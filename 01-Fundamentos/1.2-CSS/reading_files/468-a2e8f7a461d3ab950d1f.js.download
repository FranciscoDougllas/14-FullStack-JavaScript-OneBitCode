"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[468,8092],{93526:(e,t,r)=>{r.d(t,{F:()=>f});var n=r(67294),i=r(94184),o=r.n(i),a=r(23560),l=r.n(a),s=r(18605),c=r(81786),u=r(27025),d=r(85893),f=function(e){var t=e.variant,r=e.options,i=e.selectedAction,a=e.setSelectedAction,f=e.onChange,p=e.disabled,m=e.type,b=void 0===m?"button":m,v=i||r[0],h=(0,n.useMemo)((function(){return r.filter((function(e){return e.value!==v.value}))}),[r,v]);return(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(c.z,{type:b,variant:t,className:"truncate rounded-r-sm",disabled:p,"data-testid":"perform-action-button",tabIndex:0,onClick:function(){l()(v.onClick)&&v.onClick()},children:v.label}),(0,d.jsx)(u.Lt,{direction:"top-end",buttonType:"button",linkType:"button",buttonWrapperClassName:o()({"pointer-events-none":p}),popperOptions:{modifiers:[{name:"offset",options:{offset:[0,8]}}]},button:(0,d.jsx)("div",{className:"ml-0.5",children:(0,d.jsx)(c.z,{type:"button",variant:t,className:"rounded-l-sm !px-2.5",disabled:p,"data-testid":"select-action-button",children:(0,d.jsx)(s.JO,{type:"16-chevron-down",size:16,className:"mb-[1px]"})})}),options:h,onChange:function(e){var t=r.find((function(t){return t.value===e}));a(t),l()(f)&&f(t)}})]})}},9578:(e,t,r)=>{r.d(t,{a:()=>d});var n=r(67294),i=r(23078),o=r(13288),a=r(85893);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=(0,i.u)((function(){return Promise.all([r.e(532),r.e(5903),r.e(6446)]).then(r.bind(r,34633))})),d=function(e){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(o.a,{}),children:(0,a.jsx)(u,s({},e))})}},32282:(e,t,r)=>{r.d(t,{D:()=>d});var n=r(67294),i=r(87536),o=r(85893),a=["name","style"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=(0,n.forwardRef)((function(e,t){var r=e.name,l=e.style,c=void 0===l?{}:l,d=u(e,a),f=(0,n.useRef)(null),p=(0,i.Gc)(),m=p.watch,b=p.control,v=m(r);return(0,n.useEffect)((function(){f.current.style.height="inherit",f.current.style.height="".concat(f.current.scrollHeight,"px")}),[v]),(0,o.jsx)("div",{className:"react-auto-expanding-text-input form-input",children:(0,o.jsx)(i.Qr,{name:r,control:b,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,o.jsx)("textarea",s(s({},d),{},{value:i,onChange:function(e){e.preventDefault(),n(e.target.value.replaceAll("\n",""))},ref:function(e){f.current=e,t&&(t.current=e)},className:"form-control placeholder:text-light placeholder:opacity-100",rows:1,style:s(s({},c),{},{resize:"none"})}))}})})}));d.displayName="AutoExpandingTextInput"},67741:(e,t,r)=>{r.d(t,{o:()=>d,C:()=>f});var n=r(94184),i=r.n(n),o=r(85893),a=["variant","children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d={brand:"brand",default:"default",success:"success",warning:"warning",danger:"danger",info:"info",white:"white"},f=function(e){var t,r=e.variant,n=void 0===r?d.default:r,l=e.children,f=u(e,a),p="react-badge";return(0,o.jsx)("span",s(s({},f),{},{className:i()(p,(t={},c(t,"".concat(p,"--brand"),n===d.brand),c(t,"".concat(p,"--default"),n===d.default),c(t,"".concat(p,"--info"),n===d.info),c(t,"".concat(p,"--success"),n===d.success),c(t,"".concat(p,"--warning"),n===d.warning),c(t,"".concat(p,"--danger"),n===d.danger),c(t,"bg-primary !text-black",n===d.white),t)),children:l}))}},94353:(e,t,r)=>{r.d(t,{g:()=>u});var n=r(94184),i=r.n(n),o=r(94281),a=r(85893);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){var t,r=e.emoji,n=e.label,l=e.truncate,u=void 0===l||l,d=e.truncateLength,f=void 0===d?20:d,p=e.tooltipCursor,m=void 0===p?"pointer":p,b=e.tooltipText,v=void 0===b?"":b,h=e.inverted,y=e.square,g=e.styles,j=e.className,x=e.dataTestId,O=e.textSizeClassName,w=void 0===O?"text-[0.6rem]":O;return r||n?(n&&u&&n.length>f&&(t=n.substring(0,f)),(0,a.jsxs)("span",{style:g,className:i()("text-default inline-flex h-5 items-center gap-1 border","py-[3px]",{"pr-2":r&&(n||t),"border-secondary bg-badge":h,"border-dark bg-primary":!h,"rounded px-1":y,"rounded-2xl px-1.5":!y},j),"data-testid":i()("member-tag",x),children:[r&&(0,a.jsx)("span",{className:i()("leading-none",w),"data-testid":"member-tag-emoji",children:v?(0,a.jsx)(o.T,{role:"tooltip",content:v,interactive:!1,children:r}):r}),n&&(0,a.jsx)("span",s(s({className:i()("font-medium",c({"text-badge":h,"text-xxs":y},w,!y))},t&&{style:{cursor:m}}),{},{"data-testid":"member-tag-label",children:t?(0,a.jsx)(o.T,{role:"tooltip",content:n,children:(0,a.jsxs)(a.Fragment,{children:[t,"..."]})}):n}))]})):null}},52749:(e,t,r)=>{r.d(t,{_:()=>d});var n=r(86013),i=r(81786),o=r(85893),a=["type","classNames","children","submitting","submittingText","isDisabled"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.type,r=void 0===t?"button":t,l=e.classNames,c=void 0===l?"":l,d=e.children,f=e.submitting,p=void 0!==f&&f,m=e.submittingText,b=void 0===m?(0,n.t)("submitting"):m,v=e.isDisabled,h=void 0!==v&&v,y=u(e,a);return(0,o.jsxs)(i.z,s(s({type:r,disabled:p||h},y),{},{className:c,children:[p&&b,!p&&d]}))}},5057:(e,t,r)=>{r.d(t,{C:()=>c});var n=r(94184),i=r.n(n),o=r(86013),a=r(18605),l=r(81786),s=r(85893),c=function(e){var t=e.children,r=e.onClick,n=e.onButtonClick;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.z,{variant:"secondary",className:i()("rounded-r-none border-r-0 !pl-3 !pr-2 !font-light",{"pointer-events-none":!n}),onClick:n,children:t}),(0,s.jsx)("div",{className:"ml-[-1px]",children:(0,s.jsx)(l.z,{onClick:r,variant:"secondary",className:"rounded-l-none border-l-0 !px-1.5","data-testid":"clear-action-button",ariaLabel:(0,o.t)("clear"),title:(0,o.t)("clear"),children:(0,s.jsx)(a.JO,{"aria-hidden":!0,type:"16-close",size:16,className:"mb-[1px]"})})})]})}},57159:(e,t,r)=>{r.d(t,{T:()=>l});var n=r(47031),i=r(86013),o=r(18605),a=r(85893),l=function(e){var t=e.handleChangeCoverClick,r=e.showAddCoverBtn,l=e.customAddCoverBtn;return(0,a.jsx)(n.u,{show:!!r,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-75",leave:"transition-opacity duration-300",leaveFrom:"opacity-75",leaveTo:"opacity-0",children:(0,a.jsx)("div",{role:"button",onClick:t,onKeyDown:t,tabIndex:0,children:l||(0,a.jsxs)("button",{type:"button",className:"form-section__add-cover",children:[(0,a.jsx)(o.JO,{type:"toolbar-image",className:"no-fill"}),(0,i.t)("add_cover")]})})})}},78221:(e,t,r)=>{r.d(t,{B:()=>a});var n=r(98338),i=r(81786),o=r(85893),a=function(e){var t=e.onChange,r=e.onDelete,a=e.changeButtonText,l=e.removeButtonText,s=(0,n.wh)().isViewOnlyMasquerading;return(0,o.jsxs)("div",{className:"cover-image-overlay hover:opacity-100","data-testid":"cover-image-overlay",children:[(0,o.jsx)(i.z,{variant:"secondary",onClick:t,disabled:s,children:a}),(0,o.jsx)(i.z,{variant:"secondary",onClick:r,type:"button",disabled:s,children:l})]})}},74338:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(18605),i=r(85893),o=function(e){var t=e.title,r=e.description;return(0,i.jsxs)("div",{className:"image-input-banner__add",children:[(0,i.jsx)("div",{className:"image-input-banner__add__icon-wrapper",children:(0,i.jsx)(n.JO,{type:"plus-big",viewBox:"0 0 20 20"})}),t&&(0,i.jsx)("span",{className:"image-input-banner__label",children:t}),r&&(0,i.jsx)("span",{className:"image-input-banner__description !text-dark",children:r})]})}},10647:(e,t,r)=>{r.d(t,{D:()=>y});var n=r(86013),i=r(48088),o=r(57159),a=r(43227),l=r(78221),s=r(85893),c=function(e){var t=e.changeImageText,r=void 0===t?(0,n.t)("edit_cover_image"):t,i=e.handleChangeCoverClick,o=e.handleDelete,c=e.imageUrl,u=e.processing,d=e.value,f=Boolean(u),p=Boolean(d);return(0,s.jsxs)("div",{className:"cover-image-input__preview",children:[f&&(0,s.jsx)("div",{className:"quickpost-progress",children:(0,s.jsx)(a.m,{})}),p&&!f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{loading:"lazy",src:c,alt:""}),(0,s.jsx)(l.B,{onDelete:o,onChange:i,removeButtonText:(0,n.t)("remove_cover_image"),changeButtonText:r})]})]})};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=e.value,r=e.processing;return t||r?(0,s.jsx)(c,d({},e)):(0,s.jsx)(o.T,d({},e))},m=["renderer"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=function(e){var t=e.renderer,r=void 0===t?p:t,o=h(e,m);return(0,s.jsx)(i.a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({renderer:r,title:(0,n.t)("quick_post_v2.choose_cover_image")},o))}},43204:(e,t,r)=>{r.d(t,{W:()=>v});var n=r(94184),i=r.n(n),o=r(86013),a=r(8804),l=r.n(a),s=r(15953),c=r(87536),u=r(18605),d=r(85893),f=["name","rules","disabled","fullWidth","minDate","maxDate","minuteIncrement","required","withIcon","isStatic","dataTestId"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v=function(e){var t=e.name,r=e.rules,n=void 0===r?{}:r,i=e.disabled,o=void 0!==i&&i,a=e.fullWidth,l=void 0!==a&&a,s=e.minDate,u=void 0===s?"":s,p=e.maxDate,m=void 0===p?"":p,v=e.minuteIncrement,y=void 0===v?15:v,g=e.required,j=void 0!==g&&g,x=e.withIcon,O=void 0!==x&&x,w=e.isStatic,S=void 0!==w&&w,P=e.dataTestId,_=void 0===P?"":P,N=b(e,f),k=(0,c.Gc)().control;return(0,d.jsx)(c.Qr,{control:k,name:t,rules:n,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,d.jsx)(h,{onChange:r,value:n,fullWidth:l,disabled:o,minDate:u,maxDate:m,withIcon:O,required:j,minuteIncrement:y,isStatic:S,dateInputOptions:N,dataTestId:_})}})},h=function(e){var t=e.onChange,r=e.value,n=e.fullWidth,a=void 0!==n&&n,c=e.disabled,f=e.minDate,b=e.maxDate,v=e.required,h=e.withIcon,y=e.minuteIncrement,g=e.isStatic,j=e.dateInputOptions,x=e.dataTestId,O=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enableTime:!0,dateFormat:"F d, Y G:i K",minDate:f,maxDate:b,disableMobile:"true",minuteIncrement:y,static:g},j);return(0,d.jsx)("div",{className:"form-input","data-testid":x,children:(0,d.jsxs)("div",{className:i()("flex",{"flatpickr--static":g}),children:[(0,d.jsx)(s.Z,{className:i()("flatpickr bg-primary border-primary text-dark h-[46px] px-4 text-left text-base font-normal",{"w-full":a,"!cursor-not-allowed opacity-40":c,"!rounded-r-none !border-r-0":h}),"data-enable-time":!0,options:O,value:r,onValueUpdate:function(e){l()(e)&&t(e[0].toISOString())},disabled:c,placeholder:(0,o.t)("select_a_date"),required:v}),Boolean(h)&&(0,d.jsx)("div",{className:i()("bg-primary border-primary relative -ml-px inline-flex items-center space-x-2 rounded-r-lg border border-l-0 px-4 py-2",{"cursor-not-allowed opacity-40":c}),children:(0,d.jsx)(u.JO,{type:"16-calendar",useWithFillCurrentColor:!0,size:16,className:"text-light"})})]})})}},6934:(e,t,r)=>{r.d(t,{D:()=>p});var n=r(61973),i=r(11699),o=r(86013),a=r(87536),l=r(58837),s=r(58249),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=e.startsAtConfig,r=e.endsAtConfig,u=e.durationConfig,f=e.disabled,p=void 0!==f&&f,m=(0,a.Gc)(),b=m.register,v=m.setValue,h=m.getValues,y=(0,l.bl)(h(t.name));return(0,c.jsxs)("div",{className:"flex flex-col items-start gap-2 md:flex-row md:items-center",children:[(0,c.jsx)(s.x,{name:t.name,onChange:function(e){var t=h(u.name),i=(0,n.Z)(e,t);v(r.name,i)},minDate:t.minDate,dataTestId:"event_starts_at",disabled:p}),(0,c.jsx)("div",{className:"mx-2",children:(0,o.t)("to")}),(0,c.jsx)(s.x,{name:r.name,onChange:function(){var e=(0,l.bl)(h(t.name)),n=(0,l.bl)(h(r.name)),o=(0,i.Z)(n,e);o<0||v(u.name,o,{shouldDirty:!0})},minDate:y,dataTestId:"event_ends_at",disabled:p}),(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",d({type:"hidden"},b(u.name)))})]})}},58249:(e,t,r)=>{r.d(t,{x:()=>O});var n=r(67294),i=r(94184),o=r.n(i),a=r(3151),l=r(83894),s=r(69119),c=r(96486),u=r(9198),d=r.n(u),f=r(87536),p=r(58837),m=r(18605),b=r(8246),v=r(85893),h=["name","onChange","minDate","maxDate","disabled","dataTestId","datePlaceholder","timePlaceholder","labelDate","labelTime","className","classNameDate","classNameTime"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O=function(e){var t=e.name,r=e.onChange,i=void 0===r?c.noop:r,u=e.minDate,y=e.maxDate,j=e.disabled,O=void 0!==j&&j,w=e.dataTestId,S=e.datePlaceholder,P=void 0===S?"":S,_=e.timePlaceholder,N=void 0===_?"":_,k=e.labelDate,C=void 0===k?"":k,D=e.labelTime,A=void 0===D?"":D,E=e.className,T=void 0===E?"":E,I=e.classNameDate,M=void 0===I?"":I,L=e.classNameTime,R=void 0===L?"":L,F=x(e,h),U=(0,f.Gc)().control,$=(0,n.useRef)(),B=(0,n.useRef)(),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.noop;return function(t){if(t instanceof Date){var r=t;(0,a.default)(r,u)&&(0,p.qB)(r)&&(r=(0,p.qe)(u)),e(r.toUTCString()),i(r)}}};return(0,v.jsx)(f.Qr,{control:U,name:t,render:function(e){var r=e.field,n=r.onChange,i=r.value,c=i&&new Date(i),f=function(e,t,r){return(0,a.default)(e,t)&&(0,a.default)(e,r)?{minTime:t,maxTime:r}:(0,a.default)(e,t)?{minTime:t,maxTime:(0,l.default)(t)}:(0,a.default)(e,r)?{minTime:(0,s.default)(r),maxTime:r}:{minTime:null,maxTime:null}}(c,u,y),p=f.minTime,h=f.maxTime;return(0,v.jsxs)("div",{className:o()("flex",T),"data-testid":w,children:[(0,v.jsxs)("div",{className:M,children:[C&&(0,v.jsx)("label",{htmlFor:t,className:"mb-2",children:(0,v.jsx)(b.Z.LabelSm,{weight:"semibold",children:C})}),(0,v.jsxs)("div",{className:"relative mr-1","data-testid":"event_date",children:[(0,v.jsx)(d(),g({ref:$,selected:c,dateFormat:"MMM d, yyyy",onChange:X(n),minDate:u,maxDate:y,name:t,disabled:O,placeholderText:P,className:"relative"},F)),(0,v.jsx)(m.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null===(e=$.current)||void 0===e||null===(t=e.input)||void 0===t||t.focus()}})]})]}),(0,v.jsxs)("div",{className:R,children:[A&&(0,v.jsx)("label",{htmlFor:t,className:"mb-2",children:(0,v.jsx)(b.Z.LabelSm,{weight:"semibold",children:A})}),(0,v.jsxs)("div",{className:"relative ml-1","data-testid":"event_hour",children:[(0,v.jsx)(d(),g({ref:B,selected:c,onChange:X(n),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",disabled:O,placeholderText:N,minTime:p,maxTime:h,className:"relative"},F)),(0,v.jsx)(m.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null===(e=B.current)||void 0===e||null===(t=e.input)||void 0===t||t.focus()}})]})]})]})}})}},34141:(e,t,r)=>{r.d(t,{P:()=>y});var n=r(67294),i=r(94184),o=r.n(i),a=r(66007),l=r(24185),s=r(80809),c=r(51832),u=r(18701),d=r(89277),f=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.content,r=e.disableFullScreenPreview,i=void 0!==r&&r,p=e.contentParentPath,b=e.transformLinks,h=void 0===b?c.G5:b,y=(0,l.k6)(),g=(0,n.useRef)(null),j=v((0,n.useState)(!1),2),x=j[0],O=j[1],w=(0,n.useRef)(null),S=(0,u.I)();(0,n.useEffect)((function(){if(g.current){var e=g.current.querySelector(".trix-content");(0,c.GL)(e),h({containerElement:e,shouldIncludeInternalLinks:S}),(0,c.BU)(e),(0,c.el)(e);new s.W(g.current).addAttachmentClickEventHandler((function(e){var t=e.attachments,r=e.currentIndex;i?y.push(p):(w.current={attachments:t,currentIndex:r},O(!0))}))}}),[g,S,p,i,y]),(0,n.useEffect)((function(){t&&window.loadOembed()}),[t]);var P=(0,n.useMemo)((function(){return(0,c.ND)(t)}),[t]);return(0,f.jsxs)("div",{className:o()("react-trix-content text-dark",{"fullscreen-preview-enabled":!i}),ref:g,children:[x&&(0,f.jsx)(d._,m(m({},w.current),{},{onClose:function(){w.current=null,O(!1)},show:!0})),(0,f.jsx)(a.Z,{html:P})]})}},70532:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(27025),i=r(96486),o=r(36589),a=r(18605),l=r(94353),s=r(8246),c=r(89288),u=r(85893);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){var t=e.options,r=e.linkType,d=(0,o.I)().isV3Enabled,p=d?s.Z.LabelXsPlus:s.Z.LabelSm,m={weight:d?"medium":"normal"};return(0,u.jsx)(u.Fragment,{children:t.map((function(e){if((0,c.n)(e))return(0,u.jsx)(n.Lt.Separator,{},(0,i.uniqueId)("separator-"));var t=e.value,o=e.label,s=e.icon,d=e.iconSize,b=e.pathTo,v=e.badge,h=e.badgeVariant,y=e.onClick,g=e.dataTestId,j=e.isActive;return(0,u.jsx)(n.Lt.ItemWithLink,{to:b,onClick:y,linkType:r,active:j,children:(0,u.jsxs)(n.Lt.BadgeContainer,{children:[(0,u.jsxs)(n.Lt.IconContainer,{children:[s&&(0,u.jsx)("span",{className:"flex h-5 w-5 self-start",children:(0,u.jsx)(a.JO,{type:s,size:null!==d&&void 0!==d?d:16})}),(0,u.jsx)(p,f(f({},m),{},{"data-testid":g,children:o}))]}),v&&(0,u.jsx)("div",{className:"flex",children:"plain"!==h?(0,u.jsx)(l.g,{inverted:!0,square:!0,label:v}):(0,u.jsx)(p,{weight:"medium","data-testid":g,children:v})})]})},t)}))})}},45876:(e,t,r)=>{r.d(t,{c:()=>o});var n=r(72510),i=r(85893),o=function(e){var t=e.onClick,r=e.children,o=e.as;return(0,i.jsx)(n.v.Item,{as:o,onClick:t,children:r})}},46128:(e,t,r)=>{r.d(t,{F:()=>x});var n=r(67294),i=r(94184),o=r.n(i),a=r(23560),l=r.n(a),s=r(50308),c=r.n(s),u=r(40160),d=r(36589),f=r(27025),p=r(85893),m=["active","children","forceClose","hasDanger","onClick","isDark","isDisabled"],b=["linkType"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j=function(e){return"to"in e&&Boolean(e.to)},x=(0,n.forwardRef)((function(e,t){var r=e.active,n=e.children,i=e.forceClose,a=void 0!==i&&i,s=e.hasDanger,v=void 0!==s&&s,y=e.onClick,x=void 0===y?c():y,O=e.isDark,w=void 0!==O&&O,S=e.isDisabled,P=void 0!==S&&S,_=g(e,m),N=(0,f.tv)(),k=N.isOpen,C=N.toggle,D=(0,d.I)().isV3Enabled,A=function(e){a&&k&&C(),l()(x)&&x(e)},E=o()("block w-full text-left py-2 group",{"opacity-30":P,"hover:text-dark hover:bg-secondary":!w,"text-default":!v&&!w,"bg-tertiary":r&&!w,"text-v2-danger hover:text-v2-danger":v,"text-white hover:bg-tertiary":w,"px-5 text-sm font-normal":!D,"py-[0.438rem] px-4 rounded-lg hover:bg-tertiary text-xs-plus font-medium transition-colors duration-75":D});if(j(_))return(0,p.jsx)(u.rU,h(h({ref:t,className:E,onClick:A},_),{},{children:n}));if(!j(_)){var T=_.linkType,I=void 0===T?"submit":T,M=g(_,b);return(0,p.jsx)("button",h(h({ref:t,onClick:A,className:E},M),{},{type:I,disabled:P,children:n}))}return null}));x.displayName="ItemLink"},91171:(e,t,r)=>{r.d(t,{g:()=>d});var n=r(72510),i=r(46128),o=r(85893),a=["children","active","onClick","to","as"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.children,r=e.active,l=e.onClick,c=e.to,d=e.as,f=u(e,a);return(0,o.jsx)(n.v.Item,{as:d,onClick:l,children:function(e){var n=e.active;return(0,o.jsx)(i.F,s(s({to:c,active:n||r},f),{},{children:t}))}})}},18496:(e,t,r)=>{r.d(t,{j:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["children","className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.children,r=e.className,n=u(e,a);return(0,o.jsx)("div",s(s({className:i()("group flex w-full cursor-pointer items-center justify-center gap-1.5 py-1",r)},n),{},{children:t}))}},89288:(e,t,r)=>{r.d(t,{n:()=>f,W:()=>p});var n=r(23560),i=r.n(n),o=r(36589),a=r(18605),l=r(27025),s=r(8246),c=r(45876),u=r(46128),d=r(85893),f=function(e){return"separator"===e.value},p=function(e){var t=e.option,r=e.onChange,n=e.linkType,p=void 0===n?"submit":n,m=e.labelWeight,b=e.isDark,v=e.isActive,h=(0,o.I)().isV3Enabled,y=null!==m&&void 0!==m?m:h?"medium":"normal";return f(t)||null!==t&&void 0!==t&&t.hide?null:(b&&(t.color="text-feature-light group-hover:text-dark"),(0,d.jsx)(c.c,{children:function(e){var n,o,c=e.active;return(0,d.jsxs)(u.F,{active:void 0!==v?v:c,to:null===t||void 0===t?void 0:t.pathTo,onClick:function(){i()(r)&&r(t.value),i()(null===t||void 0===t?void 0:t.onClick)&&t.onClick()},linkType:p,isDark:b,isDisabled:null===t||void 0===t?void 0:t.isDisabled,children:[(0,d.jsx)(l.Lt.IconContainer,{children:h?(0,d.jsxs)(d.Fragment,{children:[t.icon&&(0,d.jsx)("span",{className:"h-5 w-5",children:(0,d.jsx)(a.JO,{className:t.iconClassName,type:t.icon,size:null!==(n=t.iconSize)&&void 0!==n?n:16})}),(0,d.jsx)(s.Z.LabelXsPlus,{weight:y,color:t.color,children:t.label})]}):(0,d.jsxs)(d.Fragment,{children:[t.icon&&(0,d.jsx)(a.JO,{className:t.iconClassName,type:t.icon,size:null!==(o=t.iconSize)&&void 0!==o?o:16}),(0,d.jsx)(s.Z.LabelSm,{weight:y,color:t.color,children:t.label})]})}),t.description&&(0,d.jsx)("div",{className:"py-0.5",children:t.description})]})}},t.value))}},27025:(e,t,r)=>{r.d(t,{wk:()=>k,Lt:()=>$,tv:()=>j});var n=r(67294),i=r(72510),o=r(94184),a=r.n(o),l=r(77294),s=r(8804),c=r.n(s),u=r(8246),d=r(36589),f=r(18605),p=r(18496),m=r(89288),b=r(85893),v=function(e){var t=e.activeOptionValue,r=e.options,n=void 0===r?[]:r,i=e.className,o=e.labelColor,l=void 0===o?"text-dark":o,s=n.find((function(e){return e.value===t})),v=c()(n),h=s||v,y=(0,d.I)().isV3Enabled;return h&&(0,m.n)(h)?null:(0,b.jsxs)(p.j,{className:a()(i,{"focus-visible:bg-tertiary hover:bg-tertiary !gap-1 !rounded-lg py-2 !pl-3 !pr-1.5 transition-colors duration-200":y}),children:[(0,b.jsx)(u.Z.LabelSm,{color:l,weight:"medium",children:null===h||void 0===h?void 0:h.label}),(0,b.jsx)(f.JO,{type:"caret-down","aria-hidden":"true",useWithStrokeCurrentColor:!0,className:a()("h-5 w-5",l),viewBox:"0 0 8 4"})]})},h=r(23560),y=r.n(h),g=(0,n.createContext)(null);g.displayName="DropdownContext";var j=function(){var e=(0,n.useContext)(g);if(!e)throw new Error("useDropdownContext must be used within a Dropdown");return e},x=function(e){var t=e.isOpen,r=e.toggle,i=e.onToggle,o=e.children;return(0,n.useEffect)((function(){y()(i)&&i(t)}),[t,i]),(0,b.jsx)(g.Provider,{value:{isOpen:t,toggle:r,onToggle:i},children:o})},O=r(70532),w=r(45876),S=r(46128),P=r(91171),_=r(47031),N=r(73935),k={SMALL:"small",MEDIUM:"medium",LARGE:"large",EXTRA_LARGE:"extra-large",FULL:"full"},C={enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){var t=e.open,r=e.size,o=e.onChange,l=e.options,s=e.hasOptions,c=e.menuWrapperClassName,u=e.transitionWrapperClassName,f=e.menuItemsClassName,p=e.shouldAddDivider,v=e.popperElRef,h=e.popperAttributes,y=e.popperStyles,g=e.appendTo,j=e.setPopperElement,x=e.children,O=e.linkType,w=e.labelWeight,S=e.isDark,P=!!g,D=e.animations||C,E=(0,d.I)().isV3Enabled,T=(0,b.jsx)("div",A(A({className:a()("z-10",{"w-full":r===k.FULL},u),ref:v,style:y},h),{},{children:(0,b.jsx)(_.u,A(A({as:n.Fragment,show:t,beforeEnter:function(){return j(null===v||void 0===v?void 0:v.current)},afterLeave:function(){return j(null)}},D),{},{children:(0,b.jsx)("div",{className:a()("mt-1",{"px-4":r===k.FULL},c),children:(0,b.jsxs)(i.v.Items,{static:!0,className:a()("overflow-hidden border shadow-xl outline-none focus:outline-none",f,S?"border-[#34373D] bg-[#1F2123]":"bg-primary border-primary",{"divide-primary divide-y":p,"w-32":r===k.SMALL,"w-56":r===k.MEDIUM,"w-[17rem]":r===k.LARGE,"w-96":r===k.EXTRA_LARGE,"w-full":r===k.FULL,"rounded-lg py-2":!E,"rounded-2xl p-4":E}),"data-testid":"dropdown-menu-items",children:[l&&s&&l.map((function(e){return(0,b.jsx)(m.W,A({option:e,onChange:o,linkType:O,labelWeight:w,isDark:S},!(0,m.n)(e)&&{isActive:e.isActive}),"".concat(e.value))})),!s&&x]})})}))}));return P?(0,b.jsx)(b.Fragment,{children:(0,N.createPortal)(T,g)}):T},I=r(84721);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=Object.assign((function(e){var t=e.as,r=void 0===t?"div":t,o=e.buttonWrapperComponent,s=void 0===o?"div":o,c=e.activeOptionValue,u=e.animations,d=e.appendTo,f=e.button,p=e.buttonClassName,m=e.buttonLabel,h=e.buttonType,y=e.buttonWrapperClassName,g=e.children,j=e.className,O=void 0===j?"inline-block text-left":j,w=e.dataTestId,S=e.buttonDataTestId,P=void 0===S?"dropdown-button":S,_=e.direction,N=void 0===_?"bottom-end":_,C=e.isDark,D=void 0!==C&&C,A=e.labelWeight,E=e.linkType,M=e.menuWrapperClassName,R=e.menuItemsClassName,U=e.onChange,$=e.onToggle,B=e.options,X=e.popperOptions,z=e.shouldAddDivider,Z=void 0!==z&&z,H=e.size,q=void 0===H?k.MEDIUM:H,V=e.transitionWrapperClassName,W=e.menuButtonEl,J=void 0===W?"button":W,G=(0,n.useRef)(null),K=(0,n.useRef)(null),Q=F((0,n.useState)(null),2),Y=Q[0],ee=Q[1],te=F((0,n.useState)(null),2),re=te[0],ne=te[1],ie=Boolean(d),oe=Boolean(f),ae=Boolean(B),le={placement:N,strategy:"fixed"};ie&&q===k.FULL&&(le.modifiers=[I.Z]),le=L(L({},le),X);var se=(0,l.D)(Y,re,le),ce=se.styles,ue=se.attributes,de=(0,n.useCallback)((function(){var e,t;null===(e=K.current)||void 0===e||null===(t=e.click)||void 0===t||t.call(e)}),[K]),fe=function(e){e.stopPropagation()};return(0,b.jsx)(i.v,{as:r,className:O,"data-testid":"dropdown",children:function(e){var t=e.open;return(0,b.jsx)(x,{isOpen:t,toggle:de,onToggle:$,children:(0,b.jsxs)(s,{ref:ee,className:y,"data-testid":w||"dropdown-button-wrapper",children:[(0,b.jsxs)(i.v.Button,{as:J,ref:K,className:a()("focus-visible:outline-secondary rounded-md focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",p),"data-testid":P,type:h,"aria-label":m,onClick:fe,children:[oe&&f,!oe&&(0,b.jsx)(v,{activeOptionValue:c,options:B})]}),(0,b.jsx)(T,{open:t,size:q,onChange:U,options:B,hasOptions:ae,menuWrapperClassName:M,transitionWrapperClassName:V,shouldAddDivider:Z,popperElRef:G,popperAttributes:ue.popper,popperStyles:ce.popper,appendTo:d,setPopperElement:ne,linkType:E,labelWeight:A,animations:u,isDark:D,menuItemsClassName:R,children:g})]})})}})}),{Header:function(e){var t=e.children;return(0,d.I)().isV3Enabled?(0,b.jsx)("div",{className:"flex items-center px-3 py-2",children:(0,b.jsx)(u.Z.LabelXsPlus,{color:"text-lightest",weight:"medium",children:t})}):(0,b.jsx)("div",{className:"block px-5 py-0.5",children:(0,b.jsx)(u.Z.LabelXxs,{color:"text-light",children:t})})},Item:w.c,ItemWithLink:P.g,ItemGroup:function(e){var t=e.children;return(0,b.jsx)("div",{className:"py-1",children:t})},ItemLink:S.F,MenuButton:p.j,ActiveLabelButton:v,BadgeContainer:function(e){var t=e.children;return(0,b.jsx)("div",{className:"flex items-center justify-between",children:t})},IconContainer:function(e){var t=e.children,r=(0,d.I)().isV3Enabled;return(0,b.jsx)("div",{className:a()("flex items-center",{"text-default gap-2.5":!r,"text-dark gap-2":r}),children:t})},IconWithBadgeList:O.A,Separator:function(){(0,d.I)().isV3Enabled;return(0,b.jsx)("div",{className:"p-3",children:(0,b.jsx)("hr",{className:"border-primary h-[1px] overflow-hidden border-t"})})}})},78417:(e,t,r)=>{r.d(t,{S:()=>v,P:()=>h});var n=r(67294),i=r(96486),o=r(19647),a=r(27828),l=r(40569),s=r(85893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,r,n,c=m(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this,e)).handleReload=function(){t.setState((function(e){return{hasError:!1,errorMessage:"",reloadCount:e.reloadCount+1}}))},t.state={hasError:!1,errorMessage:"",reloadCount:0},t}return t=d,(r=[{key:"componentDidCatch",value:function(e,t){if("true"==window.DISABLE_JS_ERROR_BOUNDARIES)throw e;var r=this.state.reloadCount;this.setState({hasError:!0,error:e,componentStack:null===t||void 0===t?void 0:t.componentStack,errorMessage:null===e||void 0===e?void 0:e.message,errorStack:e.stack,reloadCount:r}),console.error("ErrorBoundary Error",e,t),e instanceof a.d||(0,o.d)(e),this.props.shouldAutoReload&&r<3&&(0,i.delay)(this.handleReload,3e3)}},{key:"render",value:function(){var e=this.state,t=e.error,r=e.hasError,n=e.errorMessage,i=this.props,o=i.renderFunc,c=i.handleNotFoundError,d=i.children,f=u(u({},this.state),{},{error:JSON.stringify(t)});return r?c&&t instanceof a.d?(0,s.jsx)(l.u,u({errorMessage:n},f)):o?o(f):null:d}}])&&f(t.prototype,r),n&&f(t,n),d}(n.Component),h=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{handleNotFoundError:!1},n=function(n){return(0,s.jsx)(v,{renderFunc:t,handleNotFoundError:r.handleNotFoundError,children:(0,s.jsx)(e,u({},n))})};return n.displayName="withErrorBoundary(".concat(e.displayName||e.name||"Component",")"),n}},40569:(e,t,r)=>{r.d(t,{u:()=>A,D:()=>E});var n=r(86013),i=r(64687),o=r.n(i),a=r(67294),l=r(96486),s=r(77678),c=r(88767),u=r(56065),d=r(98338),f=r(68997),p=r(14856),m=r(44155),b=r(13288),v=r(85893),h=["title","errorCode"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function O(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var S=function(e){var t,r=e.title,i=e.errorCode,c=w(e,h),p=(0,d.wh)(),y=p.currentCommunity,g=p.isLoading,j=(0,a.createRef)();if(g)return(0,v.jsx)(b.a,{center:!0});var x,S="https://circle.so",P=u;y&&(S=window.location.origin,P=(0,f.j)(y),x=y.prefs.brand_color);var _=null!==y&&void 0!==y&&y.has_plus_plan?"error_page.message_placeholder_circle_plus":"error_page.message_placeholder",N=function(){var e,t=(e=o().mark((function e(t,r,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.current.executeAsync().then((function(){n.target.submit()})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,l,"next",e)}function l(e){O(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}();return(0,v.jsx)("div",{className:"center-layout error-layout notification-error",children:(0,v.jsxs)("div",{className:"center-container",children:[(0,v.jsx)("div",{className:"community__brand",children:P?(0,v.jsx)("a",{href:S,target:"_blank",rel:"noopener noreferrer",children:(0,v.jsx)("img",{loading:"lazy",alt:"",className:"logo",src:P})}):(0,v.jsx)("a",{className:"brand-icon brand-icon__initial",style:{backgroundColor:x},target:"_blank",rel:"noopener noreferrer",href:S,children:null===(t=y.name)||void 0===t?void 0:t[0]})}),(0,v.jsx)("div",{className:"mb-12",children:(0,v.jsx)("h1",{children:r})}),(0,v.jsxs)("h4",{className:"mb-6",children:[" ",(0,n.t)("error_page.suspect_bug")]}),(0,v.jsxs)("form",{action:"/error_reports/send_email_notification",acceptCharset:"UTF-8",method:"post",onSubmit:N,children:[(0,v.jsx)(m.X,{}),(0,v.jsxs)("div",{className:"form-group mb-4",children:[(0,v.jsx)("label",{className:"required sr-only",htmlFor:"error_detail",children:(0,n.t)("error_page.error_detail")}),(0,v.jsx)("textarea",{placeholder:(0,n.t)(_),rows:"7",cols:"50",required:"required",name:"error_detail",id:"error_detail",className:"form-control placeholder:text-light placeholder:opacity-100"})]}),window.CAPTCHA_SITE_KEY&&(0,v.jsx)("div",{className:"mb-4 flex items-center justify-center",children:(0,v.jsx)(s.Z,{ref:j,sitekey:window.CAPTCHA_SITE_KEY,size:"invisible"})}),(0,v.jsx)("input",{value:i,type:"hidden",name:"error_status",id:"error_status"}),(0,v.jsx)("input",{value:window.location.href,type:"hidden",name:"error_url",id:"error_url"}),(0,v.jsx)("input",{type:"submit",name:"commit",value:(0,n.t)("error_page.submit_report"),className:"btn btn-primary","data-disable-with":"Submit report"}),(0,l.map)(c,(function(e,t){return(0,v.jsx)("input",{name:t,type:"hidden",value:e},t)}))]})]})})},P=function(e){var t=x({},e);return(0,v.jsx)(c.QueryClientProvider,{client:p.Eh,children:(0,v.jsx)(S,g({},t))})},_=["errorMessage"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var A=function(e){var t=e.errorMessage,r=D(e,_);return(0,v.jsx)(P,k({title:t||(0,n.t)("error_page.page_not_found"),errorCode:404},r))},E=function(e){return(0,v.jsx)(P,k({title:(0,n.t)("error_page.something_went_wrong"),errorCode:500},e))}},877:(e,t,r)=>{r.d(t,{n:()=>m});var n=r(67294),i=r(94184),o=r.n(i),a=r(87536),l=r(82248),s=r(85893),c=["name","className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=(0,n.forwardRef)((function(e,t){var r=e.name,n=e.className,i=p(e,c),u=(0,a.Gc)().control;return(0,s.jsx)(a.Qr,{control:u,name:r,render:function(e){var r=e.field,a=r.onChange,c=r.value,u=r.name;return(0,s.jsx)(l.Z,d(d({},i),{},{className:o()("placeholder:text-light placeholder:opacity-100",n),name:u,onChange:function(e){var t=e.target.value;return a(t)},value:c,ref:t}))}})}));m.displayName="FormTextAreaAutosize"},31280:(e,t,r)=>{r.d(t,{$:()=>d});var n=r(96486),i=r(87536),o=r(7074),a=r(85893),l=["name","onChangeCallback"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.name,r=e.onChangeCallback,d=void 0===r?n.noop:r,f=u(e,l),p=(0,i.Gc)().control;return(0,a.jsx)(i.Qr,{control:p,name:t,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,a.jsx)(o.R,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({value:i,onChange:function(e){(0,n.isFunction)(d)&&d(e),r(e)}},f))}})}},23062:(e,t,r)=>{r.d(t,{R:()=>f});var n=r(87536),i=r(10450),o=r(51014),a=r(85893),l=["name","onBlur"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.name,r=e.onBlur,s=d(e,l),u=(0,n.Gc)().setValue;return(0,a.jsx)(i.y,c(c({},s),{},{type:"url",name:t,onBlur:function(e){var n=(0,o.R)(e.target.value);u(t,n,{shouldValidate:!0}),null===r||void 0===r||r(e)}}))}},51014:(e,t,r)=>{r.d(t,{R:()=>n});var n=function(e){return e&&!/^(http:\/\/|https:\/\/).*/i.test(e)?"https://".concat(e.trim()):e}},29402:(e,t,r)=>{r.d(t,{T:()=>s});var n=r(24185),i=r(51065),o=r(50732),a=r(20290),l=[o.o0.new(),o.o0.edit({workflowId:""}),o.o0.view({workflowId:""})],s=function(){var e=(0,n.TH)().pathname,t=(0,a.h)(),r=i.s.some((function(t){return e.startsWith(t)})),o=l.some((function(t){return e.startsWith(t)}));return{isSettingsRoute:r,isReactFlowWorkflowsRoute:t&&o}}},24929:(e,t,r)=>{r.d(t,{a:()=>o});var n=r(18605),i=r(85893),o=function(e){return e.condition?(0,i.jsx)("div",{className:"quickpost__loader-wrapper",children:(0,i.jsx)(n.JO,{type:"loader"})}):null}},48088:(e,t,r)=>{r.d(t,{a:()=>S});var n=r(87536),i=r(67294),o=r(94184),a=r.n(o),l=r(96486),s=r(50732),c=r(34488),u=r(86013),d=r(81786),f=r(85893),p=function(e){var t=e.value,r=e.isProcessing,n=void 0!==r&&r,i=e.handleDelete,o=e.handleChangeCoverClick,a=Boolean(t);return(0,f.jsxs)("div",{className:"flex gap-2",children:[a&&(0,f.jsx)(d.z,{variant:"danger",full:!0,onClick:i,children:(0,u.t)("remove")}),(0,f.jsx)(d.z,{full:!0,variant:"secondary",onClick:o,disabled:!!n,children:a?(0,u.t)("replace"):(0,u.t)("upload")})]})},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,r=e.alt;return e.value&&t?(0,f.jsx)("img",{loading:"lazy",className:"quickpost__thumbnail",src:t,alt:r}):(0,f.jsx)(f.Fragment,{})},b=r(24929);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.alt,r=e.aspectRatio,n=e.changeImageText,o=e.className,u=e.customAddCoverBtn,d=e.customAspectRatioHelpText,h=e.hideEmbedUrl,y=void 0!==h&&h,g=e.hideUnsplash,j=void 0!==g&&g,x=e.isCropEnabled,O=void 0===x||x,w=e.isOpen,S=void 0!==w&&w,P=e.name,_=e.onChange,N=void 0===_?l.noop:_,k=e.onClose,C=void 0===k?l.noop:k,D=e.onDelete,A=void 0===D?l.noop:D,E=e.onImageAttachSuccess,T=void 0===E?l.noop:E,I=e.onProcessing,M=e.renderer,L=e.renderImagePreview,R=e.showAddCoverBtn,F=void 0!==R&&R,U=e.title,$=e.value,B=v((0,i.useState)(!1),2),X=B[0],z=B[1],Z=v((0,i.useState)(S),2),H=Z[0],q=Z[1],V=v((0,i.useState)(!1),2),W=V[0],J=V[1],G=(0,s.C9)({filename:P,signed_id:$}),K=(0,i.useRef)(X);(0,i.useEffect)((function(){S&&q(!0)}),[S]),(0,i.useEffect)((function(){(0,l.isFunction)(I)&&K.current!==X&&I(X),K.current=X}),[X,I]);var Q=null!==t&&void 0!==t?t:P,Y=function(e){null===e||void 0===e||e.preventDefault(),z(!1),N(null),J(!1),A()},ee=function(e){null===e||void 0===e||e.preventDefault(),q(!0)},te=null!==L&&void 0!==L?L:m;return(0,f.jsxs)("div",{className:a()("react-image-input form-input",o),onClick:function(e){return e.stopPropagation()},children:[(0,f.jsx)(c.K,{showModal:H,closeModal:function(){q(!1),C()},attachImage:function(e,t){N(t),z(!1),T&&T()},uploadProgress:function(){z(!0)},aspectRatio:r,hideUnsplash:j,hideEmbedUrl:y,isCropEnabled:O,title:U,hasFile:W,customAspectRatioHelpText:d,setHasFile:J}),!M&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.a,{condition:X}),!X&&(0,f.jsx)(te,{value:$,src:G,alt:Q}),(0,f.jsx)(p,{value:$,isProcessing:X,handleDelete:Y,handleChangeCoverClick:ee})]}),M&&M({changeImageText:n,customAddCoverBtn:u,handleChangeCoverClick:ee,handleDelete:Y,imageUrl:G,processing:X,showAddCoverBtn:F,value:$})]})},g=["name"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var S=function(e){var t=e.name,r=w(e,g),i=(0,n.Gc)().control;return(0,f.jsx)(n.Qr,{control:i,name:t,render:function(e){var t=e.field,n=t.onChange,i=t.value,o=t.name;return(0,f.jsx)(y,x(x({},r),{},{name:o,onChange:n,value:i}))}})}},5982:(e,t,r)=>{r.d(t,{q:()=>p,m:()=>m});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),l=r(96486),s=r(17290),c=r(94281),u=r(54482),d=r(85893),f=(0,a.t)("dynamic_vars_groups.member"),p=[{group:f,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:f,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:f,label:"{{member.name}}",value:"{{member.name}}"},{group:f,label:"{{member.email}}",value:"{{member.email}}"},{group:f,label:"{{member.public_uid}}",value:"{{member.public_uid}}"}],m=function(e){var t=e.className,r=e.editor,i=e.inputRef,f=e.setInputChangeHandler,m=void 0===f?l.noop:f,b=e.variables,v=void 0===b?p:b,h=e.tooltipPlacement,y=void 0===h?"bottom":h,g=e.wrapperClassName,j=void 0===g?"max-w-sm pt-3":g,x=e.optionsClassName,O=function(e){var t=e.editor,r=e.inputRef,i=(0,n.useRef)(null);if(t)i.current={getText:function(){return t.getText()},insertText:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.selection.anchor;t.chain().focus().insertContentAt(r,e).run()},getCursorPosition:function(){return t.state.selection.anchor},textUpToAnchor:function(){return t.state.doc.textBetween(0,t.state.selection.anchor," ")}};else if(null!==r&&void 0!==r&&r.current){var o=r.current;i.current={getText:function(){return o.value},insertText:function(e){var t,r,n=null!==(t=o.selectionStart)&&void 0!==t?t:0,i=null!==(r=o.selectionEnd)&&void 0!==r?r:0,a=o.value.substring(0,n),l=o.value.substring(i);o.value=a+e+l,o.setSelectionRange(n+e.length,n+e.length),o.focus()},getCursorPosition:function(){var e,t;return(null!==(e=null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.selectionStart)&&void 0!==e?e:0)+1},textUpToAnchor:function(){var e,t;return o.value.substring(0,(null!==(e=null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.selectionStart)&&void 0!==e?e:0)+1)}}}return i.current}({editor:r,inputRef:i}),w=function(){if(!O)return"";var e=O.textUpToAnchor();return e.length>=2?e.slice(-2):e},S=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e=function(){"{{"===w()&&S.current&&S.current.click()};return r?r.on("update",e):m(e),function(){r?r.off("update",e):m(l.noop)}}),[O]),(0,d.jsx)("div",{className:j,children:(0,d.jsx)(s.l,{options:v,groupBy:function(e){return e.group},onSelect:function(e){var t="{{"===w()?e.slice(2):e;null===O||void 0===O||O.insertText(t)},buttonRef:S,optionsClassName:x,children:(0,d.jsx)(c.T,{placement:y,delay:300,content:(0,a.t)("tiptap.add_variable"),interactive:!1,children:(0,d.jsx)(u.h,{iconSize:20,buttonSize:32,name:"20-variables",className:o()("disabled:cursor-not-allowed disabled:opacity-40",t),ariaLabel:(0,a.t)("tiptap.add_variable")})})})})}},25676:(e,t,r)=>{r.d(t,{Q:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["href","variant","children","full","small","extraLarge","large","className","forwardedRef","rel"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.href,r=e.variant,n=void 0===r?"primary":r,l=e.children,c=e.full,d=e.small,f=e.extraLarge,p=e.large,m=e.className,b=e.forwardedRef,v=e.rel,h=void 0===v?"noopener noreferrer":v,y=u(e,a);return(0,o.jsx)("a",s(s({},y),{},{href:t,rel:h,ref:b,className:i()("focus-visible:!outline-secondary inline-block rounded-md font-bold leading-5 transition-colors duration-150 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"px-8 py-3 leading-normal":f,"px-6 py-2 leading-normal":p,"px-[18px] py-[6px] text-sm":!p&&!d&&!f,"px-2 py-1 text-xs":d,"w-full":c,"bg-brand !text-brand-button hover:opacity-90":"primary"===n,"border-secondary bg-primary !text-darkest hover:bg-tertiary border !font-medium":"secondary"===n,"border-hover bg-primary !text-darkest hover:bg-primary border":"secondary-light"===n,"!text-link bg-transparent":"plain"===n,"border-v2-danger bg-v2-danger border !text-white hover:opacity-90":"danger"===n,"border-v2-danger bg-primary !text-v2-danger border !font-medium hover:opacity-90":"danger-outline"===n,"border-circle-button bg-circle-button !text-circle-button hover:border-circle-button-hover hover:bg-circle-button-hover border":"circle"===n,"!text-default hover:!text-darkest bg-transparent !p-0 font-medium transition-colors":"text"===n,"!text-darkest hover:bg-tertiary !font-semibold":"circle-plain"===n,"!text-circle !p-0 !font-semibold":"circle-text"===n},m),children:l}))}},43574:(e,t,r)=>{r.d(t,{m:()=>O});var n=r(86013),i=r(57954),o=r(47619),a=r(94353),l=r(94184),s=r.n(l),c=r(16765),u=r(38503),d=r(9951),f=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=e.memberTag,r=e.className,n=(0,u.TC)().currentAppearance,i=t||{},o=i.name,l=i.emoji,p=i.color,b=i.display_format,v=i.custom_emoji_url,h=i.custom_emoji_dark_url,y=i.is_public,g=i.is_background_enabled;if(!y)return null;var j={};return g&&(j.borderColor=p,j.backgroundColor=p,j.color=p&&(0,c.Vi)(p).isDark()?"#ffffff":"#000000"),(0,f.jsx)(a.g,m(m(m({className:s()(r,{"cursor-pointer":"icon"===b,"font-medium":!0,"px-2":!0})},(l||v||h)&&{emoji:(0,f.jsx)(d.S,{emoji:l,className:"!h-3",appearance:n,customEmojiUrl:v,customEmojiDarkUrl:h})}),"icon"===b?{tooltipText:o}:{label:o}),p&&{styles:m({},j)}))},h=r(94281);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t=e.memberTags,r=e.labelVariant,i=void 0===r?"words":r,o=(0,u.TC)().currentAppearance,l=(0,f.jsx)("ul",{className:"flex !list-none flex-col gap-1 py-1",children:t.map((function(e){return(0,f.jsx)("li",{children:(0,f.jsx)(v,{memberTag:g({},e),className:"border-secondary"})},e.id)}))}),s="words"===i?(0,n.t)("member_tags.show_more",{count:t.length}):"+".concat(t.length);return(0,f.jsx)("div",{children:(0,f.jsx)(h.T,{content:l,className:"flex",theme:o,children:(0,f.jsx)(a.g,{label:s})})})},O=function(e){var t=e.isAdmin,r=void 0!==t&&t,l=e.limit,s=void 0===l?3:l,c=e.memberTags,u=void 0===c?[]:c,d=e.showMoreTag,p=void 0===d||d,m=e.memberId,b=e.shouldShowActivityScore,h=void 0!==b&&b,y=e.showMoreLabelVariant,g=u.filter((function(e){return e.is_public}));if(!g.length&&!r&&!h)return null;var j=g.slice(0,s),O=g.slice(s,g.length);return(0,f.jsxs)("div",{className:"flex flex-wrap gap-2",children:[h&&m&&(0,f.jsx)(o.XR,{ids:[m],children:(0,f.jsx)(i.z4,{memberId:m,shouldHideIfNoScore:!0})}),r&&(0,f.jsx)(a.g,{className:"!bg-brand !text-brand-button !border-none",label:(0,n.t)("admin"),dataTestId:"admin-badge"}),j.map((function(e){return(0,f.jsx)(v,{memberTag:e},e.id)})),p&&O.length>0&&(0,f.jsx)(x,{memberTags:O,labelVariant:y})]})}},47839:(e,t,r)=>{r.d(t,{u:()=>P});var n=r(67294),i=r(47031),o=r(68975),a=r(5506),l=r(94184),s=r.n(l),c=r(86013),u=r(85893),d=function(e){var t=e.id,r=e.children,l=e.show,d=e.onClose,f=e.title,p=e.className,m=void 0===p?"px-6 py-6":p,b=e.hideCloseButton,v=e.overflowVisible,h=void 0!==v&&v,y=e.containerClassName,g=void 0===y?"default":y;return(0,u.jsx)(i.u.Root,{show:l,as:n.Fragment,children:(0,u.jsx)(o.V,{as:"div",static:!0,className:"react-modal react-modal--default ".concat(g),open:l,onClose:d,children:(0,u.jsxs)("div",{className:"react-modal__wrapper",children:[(0,u.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(o.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,u.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",style:{content:"&#8203;"}}),(0,u.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsxs)("div",{id:t,className:s()("react-modal__container",{"overflow-hidden":!h},m),children:[(0,u.jsx)("div",{className:"react-modal__close-button-container",children:!b&&(0,u.jsxs)("button",{type:"button",className:"react-modal__close-button",onClick:d,children:[(0,u.jsx)("span",{className:"sr-only",children:(0,c.t)("close")}),(0,u.jsx)(a.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)(o.V.Title,{as:"h3",className:"text-darkest text-lg font-medium leading-6",children:f}),(0,u.jsx)("div",{className:"h-full",children:r})]})]})})]})})})},f=r(18605);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=e.show,r=e.onClose,a=e.className,l=e.title,s=e.passThroughProps,c=e.hideCloseButton,d=e.hideTitle,p=e.children,b=(0,n.useRef)(),v=(0,n.useRef)();return(0,u.jsx)(i.u.Root,{show:t,as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(o.V,m(m({as:"div",static:!0,className:"fullscreen-modal ".concat(a),initialFocus:c?v:b,open:t,onClose:r},s),{},{children:(0,u.jsxs)("div",{className:"fullscreen-modal__body-outer",children:[(0,u.jsx)(o.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"}),(0,u.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,u.jsx)("div",{className:"fullscreen-modal__body-wrap",children:(0,u.jsxs)("div",{className:"fullscreen-modal__body",ref:v,children:[!c&&(0,u.jsx)("button",{type:"submit",className:"fullscreen-modal__close-icon",onClick:r,ref:b,children:(0,u.jsx)(f.JO,{type:"close"})}),!d&&(0,u.jsx)("h2",{className:"fullscreen-modal__title",children:l}),p]})})]})}))})};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){var t=e.show,r=e.title,a=e.onClose,l=e.hideCloseButton,s=e.className,c=e.passThroughProps,d=e.children,p=(0,n.useRef)();return(0,u.jsx)(i.u.Root,{show:t,as:n.Fragment,children:(0,u.jsx)(o.V,y(y({as:"div",static:!0,className:"fullpage-modal fixed inset-0 z-10 overflow-y-auto ".concat(s),initialFocus:p,open:t,onClose:a},c),{},{children:(0,u.jsxs)("div",{className:"fullpage-modal__body-outer h-full w-full",children:[(0,u.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(o.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,u.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,u.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsx)("div",{className:"z-1 fullpage-modal__body-wrap relative m-0 h-full w-full",children:(0,u.jsxs)("div",{className:"bg-primary fullpage-modal__body h-full rounded-none md:rounded-lg","data-testid":"modal",children:[(0,u.jsx)("h2",{className:"fullpage-modal__title sticky",children:r}),!l&&(0,u.jsx)("button",{type:"submit",className:"fullpage-modal__close-icon z-10",onClick:a,ref:p,children:(0,u.jsx)(f.JO,{type:"close",useWithFillCurrentColor:!0})}),d]})})})]})}))})},x=["variant"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t,r=e.variant,n=S(e,x);switch(r){case"fullscreen":t=v;break;case"large":t=j;break;default:t=d}return(0,u.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n))}},43733:(e,t,r)=>{r.d(t,{q:()=>l});var n=r(67294),i=r(94184),o=r.n(i),a=r(85893),l=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.iconEl,i=e.actionButtonEl,l=e.className;return(0,a.jsxs)("div",{ref:t,className:o()("flex gap-3 rounded-lg px-4 py-3",l),children:[n,(0,a.jsx)("div",{className:"flex-1",children:r}),i]})}))},64813:(e,t,r)=>{r.d(t,{a:()=>m});var n=r(67294),i=r(94184),o=r.n(i),a=r(8246),l=r(43733),s=r(85893),c=["children","className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.className,i=p(e,c);return(0,s.jsx)(l.q,d(d({className:o()("bg-v2-warning/5 border-v2-warning border",n),ref:t},i),{},{children:(0,s.jsx)(a.Z.LabelSm,{color:"text-stroke-foreground",as:"span",children:r})}))}))},88326:(e,t,r)=>{r.d(t,{s:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.overflowVisible,n=void 0===r||r,a=e.withBorder,l=void 0===a||a,s=e.isUsedInMinimalTipTapViewModal,c=void 0!==s&&s,u=e.className;return(0,o.jsx)("div",{className:i()("content-panel",{"overflow-hidden":!n},u),children:(0,o.jsx)("div",{className:i()("content-panel__container !bg-primary !shadow-none",{"border-primary border":l,"!mx-0":c}),children:t})})}},51009:(e,t,r)=>{r.d(t,{R:()=>l});var n=r(50768),i=r(94184),o=r.n(i),a=r(85893),l=function(e){var t=e.children,r=e.value,i=e.className,l=void 0===i?"":i;return(0,a.jsx)(n.E.Option,{value:r,className:function(e){var t=e.checked;return o()("bg-primary hover:border-secondary relative flex cursor-pointer rounded-lg border p-6 shadow-sm transition-colors focus:outline-none",{"border-secondary":t,"border-primary":!t},l)},children:function(e){var r=e.checked;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex flex-1",children:(0,a.jsx)("span",{className:"flex flex-col",children:t})}),(0,a.jsx)("span",{className:o()("mt-1.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-transparent",{"bg-toggle-active":r,"bg-primary":!r}),"aria-hidden":"true",children:(0,a.jsx)("span",{className:"bg-primary h-1.5 w-1.5 rounded-full"})})]})}})}},43760:(e,t,r)=>{r.d(t,{Q_:()=>O,Mz:()=>j,l3:()=>x,S0:()=>w});var n=r(67294),i=r(94184),o=r.n(i),a=r(96486),l=r(41793),s=r(54030),c=r(10140),u=r(59887),d=r(79311),f=r(36589),p=r(62113),m=r(62447),b=r(4404),v=r(85893),h=function(e){var t=e.startResizing,r=e.isMessagingModalOpen,n=e.isV3Enabled,i=e.isTrialBannerExists,a=e.isEitherOptInOrPreviewBarVisible,l=(0,p.f)();return(0,v.jsx)("div",{className:o()("border-primary hover:bg-circle invisible z-10 shrink-0 grow-0 basis-0.5 cursor-col-resize resize-x justify-self-end hover:w-0.5 md:visible",{"h-[calc(100vh-40px)]":r,"h-[calc(100vh-64px)]":n&&!r&&!i,"h-[calc(100vh-64px-48px)]":n&&!r&&!i&&l,"h-[calc(100vh-48px)]":!n&&!r&&!i,"h-[calc(100vh-112px)]":n&&!r&&i,"h-[calc(100vh-96px)]":!n&&!r&&i&&!l,"h-[calc(100vh-144px)]":!n&&!r&&i&&l,"h-[calc(100vh-144px-48px-48px)]":!n&&!r&&i&&l&&a,"h-[calc(100vh-144px-48px)]":n&&!r&&i&&l}),onMouseDown:t})};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=64,x=48,O=64,w=function(e){var t=e.isBelowHeader,r=void 0!==t&&t,i=e.noBorderLeft,g=void 0!==i&&i,j=e.isLoading,x=e.loaderVariant,O=void 0===x?"rail-bar":x,w=e.children,S=e.className,P=void 0===S?"":S,_=(0,l.k)().isTrialBannerExists,N=(0,s.BT)(),k=(0,d.U)().isMessagingModalOpen,C=(0,u.xX)(),D=C.isLiveStream,A=C.isCourseSpace,E=C.isDrawer,T=(0,p.f)(),I=(0,l.k)().shouldShowTrialBanner,M=(0,c.a)(),L=(0,f.I)().isV3Enabled,R=(0,n.useRef)(null),F=y((0,n.useState)(!1),2),U=F[0],$=F[1],B=(0,m._)("circle-railbar-width"),X=B.setValue,z=B.getValue,Z=y((0,n.useState)(z()||360),2),H=Z[0],q=Z[1],V=(0,n.useCallback)((function(){$(!0)}),[]),W=(0,n.useCallback)((function(){$(!1)}),[]),J=(0,n.useCallback)((function(e){if(U){var t,r=(null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect().right)||0,n=Math.abs(e.clientX-r);n>332&&n<720&&(q(n),X(n))}}),[U]);(0,n.useEffect)((function(){return window.addEventListener("mousemove",J),window.addEventListener("mouseup",W),function(){window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",W)}}),[J,W]);var G=function(){var e=document.getElementById("lesson-hello-bar");return A&&(0,a.isEmpty)(e)},K={"lg:top-12":!0,"lg:!top-0":k||D||E||G(),"lg:top-24":_&&!A||T,"lg:top-36":_&&!A&&T,"lg:top-16":r,"border-l-0":g,"z-50 !h-full !w-full":N,"lg:top-48":!A&&I&&T&&M},Q={"lg:top-16":!0,"lg:!top-0":k||D||E||G(),"lg:top-28":_&&!A||T,"lg:top-40":_&&!A&&T,"lg:top-20":r,"border-l-0":g,"z-50 !h-full !w-full":N},Y=L?Q:K,ee=D||A;return j?(0,v.jsx)(b.gi,{variant:O}):(0,v.jsxs)("div",{className:o()("flex h-full flex-row",P),style:{width:H},children:[!ee&&(0,v.jsx)(h,{startResizing:V,isMessagingModalOpen:k,isTrialBannerExists:_,isV3Enabled:L,isEitherOptInOrPreviewBarVisible:M}),(0,v.jsx)("div",{ref:R,id:"rail-content",className:o()("bg-primary border-primary z-2 fixed right-0 top-0 h-full border-l opacity-100",Y,{"m-4 !h-[calc(100vh-32px)] !w-96 rounded-lg":D,"!w-full":E}),style:{width:H},children:w})]})};w.Header=function(e){var t=e.hasNoBorder,r=e.children,n=e.className,i=(0,f.I)().isV3Enabled?t?"min-h-[48px]":"min-h-[72px]":t?"min-h-[48px]":"min-h-[64px]";return(0,v.jsx)("div",{className:o()("text-darkest flex items-center px-6 font-medium",i,{"border-primary border-b py-4":!t},n),children:r})},w.Content=function(e){var t=e.children,r=e.heightGap,i=e.noPadding,a=void 0!==i&&i,c=e.isBelowHeader,u=void 0!==c&&c,f=e.isCourseSpace,p=void 0!==f&&f,m=(0,l.k)().isTrialBannerExists,b=(0,d.U)().isMessagingModalOpen,h=(0,s.j)(),y=(0,n.useMemo)((function(){var e=j;return r?e=r:u&&(e=j+x),b?e+=40:(m&&!p&&(e+=48),h&&(e+=48)),e}),[r,u,m,b,h,p]);return(0,v.jsx)("div",{className:o()("scrollbar-hide overflow-auto",{"px-6 py-4":!a}),style:{height:"calc(100dvh - ".concat(y,"px)")},children:t})}},23127:(e,t,r)=>{r.d(t,{O:()=>f});var n=r(67294),i=r(94184),o=r.n(i),a=r(87536),l=r(77852),s=r(85893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,n.forwardRef)((function(e,t){var r=e.name,n=e.className,i=void 0===n?"":n,c=e.textboxClassName,d=void 0===c?"":c,f=(0,a.Gc)().control;return(0,s.jsx)("div",{className:o()("react-rich-text-input",i),children:(0,s.jsx)(a.Qr,{control:f,name:r,render:function(r){var n=r.field,i=n.onChange,o=n.value;return(0,s.jsx)(l.y,u(u({},e),{},{className:d,onChange:function(e){return i(e.target.innerHTML)},value:o,ref:t}))}})})}));f.displayName="RichTextInputControlledInput"},61844:(e,t,r)=>{r.d(t,{X:()=>b});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),l=r(96486),s=r(90161),c=r(95287),u={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6",7:"line-clamp-7",8:"line-clamp-8"},d={1:"overflow-hidden max-h-6 h-6",2:"overflow-hidden max-h-12 h-12",3:"overflow-hidden max-h-18 h-18",4:"overflow-hidden max-h-24 h-24",5:"overflow-hidden max-h-30 h-30",6:"overflow-hidden max-h-36 h-36",7:"overflow-hidden max-h-42 h-42",8:"overflow-hidden max-h-48 h-48"},f=r(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t=e.children,r=e.disabled,i=void 0!==r&&r,m=e.hideToggle,b=void 0!==m&&m,v=e.lines,h=void 0===v?2:v,y=e.onToggle,g=e.seeMoreClassName,j=(0,n.useRef)(null),x=(0,n.useRef)(null),O=p((0,n.useState)(!1),2),w=O[0],S=O[1],P=p((0,n.useState)(!i),2),_=P[0],N=P[1],k=p((0,n.useState)(!1),2),C=k[0],D=k[1],A=(0,c.G6)()||(0,c.qx)()?d[h]:u[h];(0,n.useEffect)((function(){!i&&_&&y&&y(w)}),[i,w,_,y]),(0,n.useEffect)((function(){if(!w&&j.current&&_&&C){var e=j.current,t=setTimeout((function(){(0,s.Z)(e,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})}),100);return function(){return clearTimeout(t)}}}),[j,C,w,_]),(0,n.useLayoutEffect)((function(){var e=(0,l.defer)((function(){if(x.current&&!i){var e=x.current;requestAnimationFrame((function(){var t=e.scrollHeight,r=e.offsetHeight;N(t>r)}))}}));return function(){return clearTimeout(e)}}),[i,x]);var E,T,I,M=!_||i||b,L=w||i||!_;return(0,f.jsxs)("div",{className:"flex flex-col","data-testid":"see-more-less",children:[(0,f.jsx)("div",{ref:x,className:o()((E={"line-clamp-none h-auto":L},T=A,I=!L,T in E?Object.defineProperty(E,T,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[T]=I,E)),"data-testid":"see-more-less-content",children:t}),(0,f.jsx)("button",{type:"button",ref:j,"data-testid":"show-expand",onClick:function(){i||(D(!0),S((function(e){return!e})))},className:o()("text-light hover:text-dark focus-visible:text-dark inline-flex text-base",{hidden:M},g),children:w?(0,a.t)("show_less"):(0,a.t)("show_more")})]})}},15897:(e,t,r)=>{r.d(t,{S:()=>s});var n=r(50768),i=r(94184),o=r.n(i),a=r(8246),l=r(85893),s=function(e){var t=e.value,r=e.onChange,i=e.options;return(0,l.jsx)(n.E,{value:t,onChange:r,children:(0,l.jsx)("div",{className:"flex items-center gap-6",children:i.map((function(e){var t=e.label,r=e.value;return(0,l.jsx)(n.E.Option,{value:r,className:function(e){var t=e.checked;return o()("cursor-pointer select-none rounded-md px-3 py-2 leading-none transition-colors duration-200",{"bg-transparent":!t,"bg-tertiary":t})},children:function(e){var r=e.checked;return(0,l.jsx)(n.E.Label,{as:"span",className:"whitespace-nowrap",children:(0,l.jsx)(a.Z.LabelSm,{weight:r?"medium":"normal",children:t})})}},r)}))})})}},84749:(e,t,r)=>{r.d(t,{X:()=>c});var n=r(94184),i=r.n(n),o=r(95e3),a=r(85893),l=["className","isDark"];function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=function(e){var t=e.className,r=void 0===t?"":t,n=e.isDark,c=void 0!==n&&n,u=s(e,l),d=i()("skeleton-loader__row",r),f=(0,o.m)(d,u).modifiers;return(0,a.jsx)("div",{className:i()(d,f,{"!bg-tertiary":!c,"!bg-overlay-dark":c})})}},39997:(e,t,r)=>{r.d(t,{qE:()=>l,mw:()=>u,X2:()=>d.X,RN:()=>m});var n=r(94184),i=r.n(n),o=r(95e3),a=r(85893),l=function(e){var t="skeleton-loader__avatar",r=(0,o.m)(t,e).modifiers,n=e.isFullRounded,l=void 0===n||n;return(0,a.jsx)("div",{className:i()(t,r),children:(0,a.jsx)("div",{className:i()("skeleton-loader__avatar-content !bg-tertiary",l?"!rounded-full":"!rounded-md")})})},s=["children"];function c(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var u=function(e){var t=e.children,r=c(e,s),n="skeleton-loader__avatar-container",l=(0,o.m)(n,r).modifiers;return(0,a.jsx)("div",{className:i()(n,l),children:t})},d=r(84749),f=["children","className"];function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,l=p(e,f),s="skeleton-loader__row-container",c=(0,o.m)(s,l).modifiers;return(0,a.jsx)("div",{className:i()(s,c,n),children:t})}},4404:(e,t,r)=>{r.d(t,{qE:()=>a.qE,mw:()=>a.mw,X2:()=>a.X2,RN:()=>a.RN,gi:()=>L});var n=r(84749),i=r(86013),o=r(8246),a=r(39997),l=r(85893),s=function(e){var t=e.badge,r=e.highlights,n=e.children,s=(0,l.jsx)(o.Z.LabelXs,{weight:"medium",children:(0,i.t)("separator_dot")});return(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--access-registry-card bg-primary border-primary flex flex-col gap-y-2 rounded-lg border p-6",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,l.jsx)(a.X2,{lg:!0,extraLong:!0}),t&&(0,l.jsx)(a.X2,{lg:!0,badge:!0})]}),(0,l.jsx)("div",{className:"flex flex-row items-center gap-x-2",children:r&&r.map((function(e,t){return(0,l.jsxs)(l.Fragment,{children:[t>0&&s,(0,l.jsx)(a.X2,{sm:!0,short:!0},e)]})}))}),n&&(0,l.jsx)("div",{className:"border-primary mt-4 flex flex-col border-t pt-4",children:n})]})},c=r(94184),u=r.n(c),d=r(69263);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){return(0,l.jsx)(d.i,{className:"skeleton-loader skeleton-loader--admin-member-edit-modal-access-community-member-access-content-table w-min",children:(0,l.jsx)(d.i.TableBody,{children:[["1",["2","3","4"]],["5",["6","7"]],["8",["9","10","11"]]].map((function(e){var t=f(e,2),r=t[0],n=t[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.i.Tr,{children:(0,l.jsx)(d.i.Td,{hideBorders:!0,colSpan:3,className:"truncate px-0 py-2 align-middle",children:(0,l.jsx)(a.X2,{lg:!0,half:!0})})},r),n.map((function(e){return(0,l.jsxs)(d.i.Tr,{children:[(0,l.jsx)(d.i.Td,{hideBorders:!0,className:"w-[300px] truncate px-0 py-2 align-middle",children:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,l.jsx)(a.X2,{md:!0,short:!0}),(0,l.jsx)(a.X2,{md:!0,extraLong:!0})]})}),(0,l.jsx)(d.i.Td,{hideBorders:!0,className:"w-[150px] truncate px-0 py-2 align-middle",children:(0,l.jsx)(a.X2,{md:!0,long:!0})}),(0,l.jsx)(d.i.Td,{hideBorders:!0,className:"flex w-[200px] truncate px-0 py-2 align-middle",children:(0,l.jsx)(a.X2,{md:!0,long:!0})})]},e)}))]})}))})})},b=function(){return(0,l.jsx)(s,{badge:!0,highlights:["1","2","3"],children:(0,l.jsx)(m,{})})},v=r(64420),h=r(96486),y=function(e){return(0,l.jsx)("div",{className:"py-1.5",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0})]})]})},e)},g=r(87160),j=r(92663),x=function(){return(0,l.jsxs)(a.mw,{children:[(0,l.jsx)("div",{className:"!border-tertiary z-[2] !rounded-md !border-r-2",children:(0,l.jsx)(a.qE,{sm:!0})}),(0,l.jsx)("div",{className:"!border-tertiary z-[1] !ml-[-5px] !rounded-md !border-r-2",children:(0,l.jsx)(a.qE,{sm:!0})}),(0,l.jsx)("div",{className:"!ml-[-5px]",children:(0,l.jsx)(a.qE,{sm:!0})})]})},O=function(e){var t=e.count,r=void 0===t?5:t;return(0,l.jsx)("div",{className:"border-primary bg-primary w-full rounded-2xl border p-2",children:(0,h.times)(r,(function(e){return(0,l.jsx)("div",{className:"flex p-4",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,half:!0}),(0,l.jsx)(a.X2,{sm:!0})]}),(0,l.jsxs)("div",{className:"mr-4 flex items-center space-x-8",children:[(0,l.jsx)(x,{}),(0,l.jsx)(a.X2,{lg:!0,className:"!h-6"})]})]})})]})},e)}))})},w=function(){return(0,l.jsxs)("div",{className:"skeleton-loader__member-card !rounded-2xl",children:[(0,l.jsx)(a.mw,{children:(0,l.jsx)(a.qE,{lg:!0})}),(0,l.jsxs)(a.RN,{children:[(0,l.jsx)(a.X2,{lg:!0}),(0,l.jsx)(a.X2,{half:!0})]}),(0,l.jsx)(a.X2,{x2l:!0,full:!0})]})},S=r(41793),P=r(79311),_=function(e){return(0,l.jsx)("div",{className:"p-5",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0})]})]})},e)},N=function(e){return(0,l.jsx)("div",{className:"p-5",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{lg:!0}),(0,l.jsx)(a.X2,{lg:!0,full:!0})]})]})},e)},k=r(13288),C=function(){return(0,l.jsx)("div",{className:"skeleton-loader--right-sidebar__item",children:(0,l.jsxs)(a.mw,{children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{children:[(0,l.jsx)(a.X2,{}),(0,l.jsx)(a.X2,{xs:!0,half:!0})]})]})},(0,h.uniqueId)())},D=r(18216),A=["variant","show"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M={"app-bar":function(e){var t=e.showMemberAvatarsRow;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"hidden h-16 items-center px-4 md:flex",children:[(0,l.jsx)("div",{style:{flex:"0 0 308px"},children:(0,l.jsx)(a.RN,{inline:!0,full:!0,children:(0,l.jsx)(a.X2,{xxl:!0})})}),(0,l.jsxs)(a.RN,{inline:!0,full:!0,children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{lg:!0,half:!0})]}),(0,l.jsx)("div",{className:"skeleton-loader--main-header-desktop__actions",children:(0,l.jsxs)(a.RN,{inline:!0,full:!0,children:[(0,l.jsxs)("div",{className:"mr-4 flex space-x-4",children:[(0,l.jsx)(a.X2,{square:!0}),(0,l.jsx)(a.X2,{square:!0}),(0,l.jsx)(a.X2,{square:!0}),t&&(0,l.jsx)(x,{})]}),(0,l.jsx)(a.X2,{x2l:!0,long:!0})]})})]}),(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--main-header-mobile",children:[(0,l.jsx)(a.RN,{children:(0,l.jsx)(a.X2,{square:!0})}),(0,l.jsx)("div",{className:"skeleton-loader--main-header-mobile__logo",children:(0,l.jsx)(a.RN,{inline:!0,full:!0,children:(0,l.jsx)(a.X2,{xxl:!0})})}),(0,l.jsx)(a.mw,{children:(0,l.jsx)(a.qE,{sm:!0})})]})]})},"right-sidebar":function(e){var t=e.count,r=void 0===t?1:t;return(0,l.jsxs)("div",{className:"sidebar__members",children:[(0,l.jsx)("div",{className:"sidebar__block sidebar__right block",children:(0,l.jsx)("div",{className:"skeleton-loader skeleton-loader--right-sidebar",children:(0,h.times)(3,C)})}),(0,l.jsx)("div",{className:"sidebar__block sidebar__right block",children:(0,l.jsx)("div",{className:"skeleton-loader skeleton-loader--right-sidebar",children:(0,h.times)(r,C)})})]})},"feed-view":function(e){var t=e.count,r=void 0===t?1:t;return(0,l.jsx)(l.Fragment,{children:(0,h.times)(r,(function(e){return(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--feed-view !bg-primary !border-primary !rounded-2xl",children:[(0,l.jsxs)(a.mw,{lg:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{children:[(0,l.jsx)(a.X2,{}),(0,l.jsx)(a.X2,{extraLong:!0,sm:!0})]})]}),(0,l.jsx)("div",{className:"skeleton-loader--feed-view__body",children:(0,l.jsxs)(a.RN,{md:!0,children:[(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0})]})}),(0,l.jsxs)(a.RN,{inline:!0,children:[(0,l.jsx)(a.X2,{lg:!0,short:!0}),(0,l.jsx)(a.X2,{lg:!0,short:!0})]})]},e)}))})},"card-view":function(e){var t=e.count,r=void 0===t?1:t,n=e.withContainer,i=void 0===n||n,o=function(e){var t=e.withContainer,r=e.children;return t?(0,l.jsx)("div",{className:"skeleton-loader--card-view__container",children:r}):(0,l.jsx)(l.Fragment,{children:r})};return(0,l.jsx)(o,{withContainer:i,children:(0,h.times)(r,(function(e){return(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--card-view !bg-primary !border-primary !rounded-2xl",children:[(0,l.jsx)("div",{className:"skeleton-loader--card-view__cover !bg-secondary"}),(0,l.jsxs)("div",{className:"skeleton-loader--card-view__content",children:[(0,l.jsx)("div",{className:"skeleton-loader--card-view__body",children:(0,l.jsxs)(a.RN,{lg:!0,children:[(0,l.jsx)(a.X2,{md:!0,almostFull:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),(0,l.jsx)("div",{className:"skeleton-loader--card-view__footer",children:(0,l.jsxs)(a.RN,{lg:!0,inline:!0,children:[(0,l.jsx)(a.X2,{badge:!0}),(0,l.jsx)(a.X2,{badge:!0})]})})]})]},e)}))})},"grid-view":function(e){var t=e.count,r=void 0===t?1:t,n=e.columnsCount,i=void 0===n?3:n,o=Array.from({length:r},(function(e,t){return{id:t+1}})),a=Array.from({length:i},(function(){return[]}));return o.forEach((function(e,t){return a[t%i].push(e)})),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3",children:a.map((function(e){return(0,l.jsx)("div",{className:"flex flex-col gap-6",children:e.map((function(e){return(0,l.jsx)("div",{className:u()("bg-secondary aspect-square",{"mt-4 rounded-md":i<3})},e.id)}))},e.map((function(e){return e.id})).join())}))})},"list-view":function(e){var t=e.count,r=void 0===t?1:t;return(0,l.jsx)("div",{className:"skeleton-loader skeleton-loader--list-view !border-primary !bg-primary !divide-y !rounded-2xl border",children:(0,h.times)(r,(function(){return(0,l.jsx)("div",{className:"skeleton-loader--list-view__item !m-0 !border-0 !bg-transparent",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,half:!0}),(0,l.jsx)(a.X2,{sm:!0})]}),(0,l.jsxs)("div",{className:"mr-4 flex items-center space-x-4",children:[(0,l.jsx)(a.X2,{square:!0,lg:!0}),(0,l.jsx)(a.X2,{square:!0,lg:!0})]})]})})]})},(0,h.uniqueId)())}))})},"community-switcher":j.r,"community-sidebar":function(e){var t=e.count,r=void 0===t?3:t;return(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--community-sidebar",children:[(0,l.jsx)("div",{className:"skeleton-loader--community-sidebar__header",children:(0,l.jsx)(a.X2,{xl:!0,long:!0})}),(0,h.times)(r,(function(){return(0,l.jsx)("div",{className:"skeleton-loader--community-sidebar__item",children:(0,l.jsxs)(a.RN,{xl:!0,children:[(0,l.jsx)(a.X2,{half:!0,lg:!0}),(0,l.jsx)(a.X2,{almostFull:!0}),(0,l.jsx)(a.X2,{almostFull:!0}),(0,l.jsx)(a.X2,{almostFull:!0})]})},(0,h.uniqueId)())}))]})},"community-sidebar-v2":g.H,"space-header":function(){return(0,l.jsxs)("div",{className:"skeleton-loader skeleton-loader--space-header",children:[(0,l.jsxs)("div",{className:"skeleton-loader--space-header__container",children:[(0,l.jsx)("div",{className:"skeleton-loader--space-header__title",children:(0,l.jsxs)(a.RN,{inline:!0,full:!0,children:[(0,l.jsx)(a.X2,{xxl:!0,short:!0}),(0,l.jsx)(a.X2,{xxl:!0,almostFull:!0})]})}),(0,l.jsx)("div",{className:"skeleton-loader--space-header__actions",children:(0,l.jsxs)(a.RN,{inline:!0,children:[(0,l.jsx)(a.X2,{xl:!0,short:!0}),(0,l.jsx)(a.X2,{xl:!0,short:!0}),(0,l.jsx)(a.X2,{xl:!0,short:!0}),(0,l.jsx)(a.X2,{xxl:!0,long:!0})]})})]}),(0,l.jsxs)("div",{className:"skeleton-loader--space-header__container",children:[(0,l.jsxs)(a.RN,{inline:!0,children:[(0,l.jsx)(a.X2,{xxl:!0,long:!0}),(0,l.jsx)(a.X2,{xxl:!0,long:!0})]}),(0,l.jsx)("div",{className:"skeleton-loader--space-header__actions",children:(0,l.jsx)(a.RN,{inline:!0,children:(0,l.jsx)(a.X2,{xxl:!0,long:!0})})})]})]})},"member-card":w,"space-member-list-page":function(e){var t=e.count,r=void 0===t?12:t;return(0,l.jsx)("div",{className:"space__members-listing",children:(0,h.times)(r,(function(e){return(0,l.jsx)(w,{},e)}))})},"rail-bar":function(){return(0,l.jsx)(k.a,{center:!0})},"rail-member-list":function(){return(0,l.jsx)(l.Fragment,{})},"rail-profile":function(){return(0,l.jsx)(l.Fragment,{})},"messaging-list-page":function(){return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from(Array(4).keys()).map(N)})}),(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from(Array(3).keys()).map(N)})})]})},"chat-room":function(e){var t=e.hideMessageBox,r=void 0!==t&&t,n=(0,S.k)().isTrialBannerExists,i=(0,P.U)().isMessagingModalOpen;return(0,l.jsxs)("div",{className:u()("bg-primary flex flex-col justify-between py-5",{"lg:h-[calc(100vh-64px)]":!i&&!n,"lg:h-[calc(100vh-112px)]":!i&&n,"lg:h-[calc(100vh-224px)]":i}),children:[(0,l.jsx)(a.RN,{lg:!0,full:!0,children:Array.from(Array(3).keys()).map((function(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"px-5 py-3",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})]})}),(0,l.jsx)("div",{className:"px-5 py-3",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})]})})]},e)}))}),!r&&(0,l.jsx)("div",{className:"bg-primary z-50 w-full p-5",children:(0,l.jsx)("div",{className:"border-primary h-24 w-full rounded-lg border",children:(0,l.jsxs)("div",{className:"flex h-full items-end space-x-3 p-4",children:[(0,l.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"}),(0,l.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"}),(0,l.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"})]})})})]})},"chat-thread":function(){return(0,l.jsxs)("div",{className:"bg-primary flex flex-col justify-between py-5",children:[(0,l.jsxs)(a.RN,{lg:!0,full:!0,children:[(0,l.jsx)("div",{className:"px-5 py-2",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{sm:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0})]})]})}),(0,l.jsx)("div",{className:"px-5 py-2",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{sm:!0}),(0,l.jsx)(a.X2,{sm:!0,full:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0})]})]})}),(0,l.jsx)("div",{className:"px-5 py-2",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{sm:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0})]})]})})]}),(0,l.jsx)("div",{className:"bg-primary z-50 w-full p-5",children:(0,l.jsx)("div",{className:"border-primary h-24 w-full rounded-lg border",children:(0,l.jsx)("div",{className:"flex h-full items-end space-x-3 p-4",children:Array(3).fill().map((function(e,t){return(0,l.jsx)("div",{className:"bg-secondary h-6 w-6 rounded-lg"},t)}))})})})]})},"chat-threads-list-page":function(){return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from(Array(4).keys()).map(_)})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsx)("div",{className:"bg-primary border-primary mb-14 divide-y rounded-2xl border",children:Array.from(Array(3).keys()).map(_)})})]})},bookmarks:v.x,transcription:D.b,"full-post-view":function(){return(0,l.jsxs)("div",{className:"skeleton-loader !bg-primary !border-primary h-[636px] w-full max-w-2xl !rounded-2xl border",children:[(0,l.jsx)("div",{className:"bg-tertiary h-80 w-full rounded-t-2xl"}),(0,l.jsxs)("div",{className:"grid p-8",children:[(0,l.jsxs)(a.mw,{lg:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{children:[(0,l.jsx)(a.X2,{}),(0,l.jsx)(a.X2,{sm:!0,extraLong:!0})]})]}),(0,l.jsx)("div",{className:"skeleton-loader--feed-view__body",children:(0,l.jsxs)(a.RN,{md:!0,children:[(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0})]})}),(0,l.jsxs)(a.RN,{inline:!0,children:[(0,l.jsx)(a.X2,{lg:!0,short:!0}),(0,l.jsx)(a.X2,{lg:!0,short:!0}),(0,l.jsx)(a.X2,{lg:!0,short:!0})]})]})]})},"members-avatar-row":x,"members-avatar-row-v3":function(){return(0,l.jsxs)(a.mw,{children:[(0,l.jsx)("div",{className:"!border-tertiary z-[2] !rounded-full !border-r-2",children:(0,l.jsx)(a.qE,{sm:!0,isFullRounded:!0})}),(0,l.jsx)("div",{className:"!border-tertiary z-[1] !ml-[-5px] !rounded-full !border-r-2",children:(0,l.jsx)(a.qE,{sm:!0,isFullRounded:!0})}),(0,l.jsx)("div",{className:"!ml-[-5px]",children:(0,l.jsx)(a.qE,{sm:!0,isFullRounded:!0})})]})},"events-list-view":function(){return(0,l.jsxs)("div",{className:"space-y-12",children:[(0,l.jsx)(O,{count:5}),(0,l.jsx)(O,{count:3})]})},"new-events-list-view":function(e){var t=e.count,r=void 0===t?8:t;return(0,l.jsx)("div",{className:"mx-6 max-w-2xl space-y-9 p-4 pb-12 md:mx-auto",children:(0,h.times)(r,(function(e){return(0,l.jsxs)("div",{className:"flex h-[90px] w-full items-center space-x-6",children:[(0,l.jsx)("div",{className:"bg-tertiary h-full w-[75px] shrink-0 rounded-md"}),(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsxs)("div",{className:"flex justify-between space-x-8",children:[(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0})]}),(0,l.jsx)("div",{className:"mr-4",children:(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"})})]})})]},e)}))})},"new-events-thumbnail-view":function(e){var t=e.count,r=void 0===t?6:t,n=e.disableCoverImage,i=void 0!==n&&n;return(0,l.jsxs)("div",{className:"mx-6 max-w-2xl space-y-9 pb-12 md:mx-auto",children:[!i&&(0,l.jsxs)("div",{className:"mb-6 flex w-full flex-col items-center space-x-6",children:[(0,l.jsx)("div",{id:"cover-image",className:"bg-tertiary mb-8 h-[244px] w-full shrink-0 rounded-2xl"}),(0,l.jsxs)("div",{className:"skeleton-loader__row-container skeleton-loader__row-container--full !m-0",children:[(0,l.jsxs)("div",{className:"mb-4 flex justify-between space-x-6",children:[(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{xl:!0,half:!0}),(0,l.jsx)(a.X2,{xl:!0,almostFull:!0})]}),(0,l.jsx)("div",{className:"mr-4",children:(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"})})]}),(0,l.jsx)("div",{className:"flex justify-between space-x-6",children:(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,half:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),(0,l.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,l.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"}),(0,l.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"}),(0,l.jsx)("div",{className:"bg-tertiary h-8 w-32 rounded-full"})]})]})]}),(0,h.times)(r,(function(e){return(0,l.jsxs)("div",{className:"flex h-[100px] w-full items-center space-x-6",children:[(0,l.jsx)("div",{className:"bg-tertiary h-[110px] w-[220px] shrink-0 rounded-xl"}),(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsxs)("div",{className:"flex justify-between space-x-6",children:[(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,full:!0}),(0,l.jsx)(a.X2,{md:!0,almostFull:!0})]}),(0,l.jsx)("div",{className:"mr-4",children:(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"})})]})})]},e)}))]})},"new-event-detail":function(){return(0,l.jsx)("div",{className:"mx-auto max-w-5xl space-y-9 py-12",children:(0,l.jsxs)("div",{className:"mb-6 flex w-full flex-col items-center space-x-6",children:[(0,l.jsx)("div",{id:"cover-image",className:"bg-tertiary mb-8 h-[244px] w-full shrink-0 rounded-2xl lg:h-[366px]"}),(0,l.jsxs)("div",{className:"!m-0 flex w-full justify-between space-x-6",children:[(0,l.jsxs)("div",{className:"bg-primary w-[720px] rounded-2xl p-6",children:[(0,l.jsxs)("div",{className:"skeleton-loader__row-container skeleton-loader__row-container--full !m-0 pb-6",children:[(0,l.jsxs)("div",{className:"mb-4 space-x-6 space-y-6",children:[(0,l.jsxs)(a.RN,{full:!0,className:"gap-2",children:[(0,l.jsx)(a.X2,{xl:!0,half:!0}),(0,l.jsx)(a.X2,{xl:!0,almostFull:!0})]}),(0,l.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]})]}),(0,l.jsx)("div",{className:"border-primary flex justify-between space-x-6 border-t pt-6",children:(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsx)(a.X2,{xl:!0,almostFull:!0})})})]}),(0,h.times)(2,(function(e){return(0,l.jsx)("div",{className:"border-primary flex w-full items-center space-x-6 border-t py-9 pr-10",children:(0,l.jsxs)(a.RN,{full:!0,className:"gap-2",children:[(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"}),(0,l.jsx)(a.X2,{sm:!0,full:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0}),(0,l.jsx)(a.X2,{sm:!0,full:!0}),(0,l.jsx)(a.X2,{sm:!0,half:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0}),(0,l.jsx)(a.X2,{sm:!0,full:!0}),(0,l.jsx)(a.X2,{sm:!0,almostFull:!0}),(0,l.jsx)(a.X2,{sm:!0,full:!0}),(0,l.jsx)(a.X2,{sm:!0,half:!0})]})},e)}))]}),(0,l.jsxs)("div",{className:"hidden h-full w-[320px] flex-col space-y-6 lg:flex",children:[(0,l.jsxs)("div",{className:"bg-primary h-full rounded-2xl p-6",children:[(0,l.jsxs)("div",{className:"border-primary flex flex-row space-x-6 border-b",children:[(0,l.jsx)("div",{className:"bg-tertiary mb-4 h-[80px] w-[68px] rounded-xl"}),(0,l.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]})]}),(0,l.jsxs)("div",{className:"!mx-0 mb-6 mt-4 flex items-center space-x-6",children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,l.jsx)(a.X2,{x2l:!0,full:!0})]}),(0,l.jsxs)("div",{className:"bg-primary h-full space-y-6 rounded-2xl p-6",children:[(0,l.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,l.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]}),(0,l.jsxs)("div",{className:"!mx-0 flex items-center space-x-6",children:[(0,l.jsx)(a.X2,{squareLarge:!0}),(0,l.jsx)(a.X2,{md:!0,short:!0,className:"!h-4"})]})]})]})]})]})})},"chat-room-sidebar":function(){return(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(a.RN,{lg:!0,full:!0,children:Array.from(Array(3).keys()).map((function(e){return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"px-6 py-3",children:(0,l.jsxs)(a.mw,{md:!0,full:!0,children:[(0,l.jsx)(a.qE,{}),(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0,half:!0}),(0,l.jsx)(a.X2,{md:!0,full:!0})]})]})})},e)}))})})},"chat-threads-list-header":function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsxs)("div",{className:"bg-primary border-primary mb-2 rounded-2xl border p-5",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),Array.from(Array(4).keys()).map(y)]})}),(0,l.jsx)(a.RN,{lg:!0,full:!0,children:(0,l.jsxs)("div",{className:"bg-primary border-primary mb-2 rounded-2xl border p-5",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(a.RN,{full:!0,children:[(0,l.jsx)(a.X2,{md:!0}),(0,l.jsx)(a.X2,{md:!0,half:!0})]})}),Array.from(Array(3).keys()).map(y)]})})]})},"email-preview":function(){return(0,l.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,l.jsx)("div",{className:"bg-tertiary mb-8 h-[175px] w-full rounded-lg"}),(0,l.jsx)("div",{className:"flex w-full items-center",children:(0,l.jsxs)(a.RN,{full:!0,className:"gap-2",children:[(0,l.jsx)(a.X2,{xxl:!0,full:!0}),(0,l.jsx)(a.X2,{xxl:!0,half:!0}),(0,l.jsx)(a.X2,{xxl:!0,almostFull:!0})]})})]})},"event-popover":function(){return(0,l.jsxs)("div",{className:"w-full p-6",children:[(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"})}),(0,l.jsxs)("div",{className:"mt-6 flex justify-start gap-4",children:[(0,l.jsx)(a.X2,{md:!0,long:!0,className:"!w-32"}),(0,l.jsx)(a.X2,{md:!0,long:!0,className:"!w-32"})]}),(0,l.jsxs)("div",{className:"mt-6 flex justify-between gap-4",children:[(0,l.jsx)(a.X2,{xxl:!0,full:!0}),(0,l.jsx)(a.X2,{xxl:!0,full:!0})]})]})},"event-item":function(e){var t=e.isMobileView,r=void 0!==t&&t;return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(a.RN,{full:!0,children:(0,l.jsx)(a.X2,{lg:!0,short:!0,className:"!h-6"})}),r?(0,l.jsxs)("div",{className:"mt-4 flex flex-col justify-start gap-y-3",children:[(0,l.jsx)(a.X2,{md:!0,almostFull:!0}),(0,l.jsx)(a.X2,{md:!0,long:!0,className:"!w-32"})]}):(0,l.jsx)("div",{className:"my-4 flex flex-col justify-start gap-y-3",children:(0,l.jsx)(a.X2,{md:!0,almostFull:!0})})]})},row:n.X,"access-registry-card":s,"community-member-access-control":function(e){var t=e.className;return(0,l.jsxs)("div",{className:u()("skeleton-loader skeleton-loader--admin-member-edit-modal-community-member-access-control flex flex-col gap-y-12 py-12",t),children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(n.X,{lg:!0,long:!0}),(0,l.jsx)(n.X,{sm:!0,extraLong:!0})]}),(0,l.jsx)(n.X,{xl:!0,full:!0})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,l.jsx)(n.X,{lg:!0,long:!0}),(0,l.jsx)(b,{}),(0,l.jsx)(s,{highlights:["1"],children:(0,l.jsx)(m,{})})]})]})},"community-member-access-group-card-control":b},L=function(e){var t=e.variant,r=e.show,n=void 0===r||r,i=I(e,A),o=M[t];return n?(0,l.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i)):null}},64420:(e,t,r)=>{r.d(t,{x:()=>o});var n=r(39997),i=r(85893),o=function(){return(0,i.jsx)("div",{className:"h-10 w-full",children:(0,i.jsxs)(n.mw,{lg:!0,full:!0,children:[(0,i.jsx)(n.X2,{lg:!0,extraLong:!0}),(0,i.jsx)(n.X2,{lg:!0,extraLong:!0}),(0,i.jsx)(n.X2,{lg:!0,extraLong:!0}),(0,i.jsx)(n.X2,{lg:!0,extraLong:!0})]})})}},87160:(e,t,r)=>{r.d(t,{H:()=>c});var n=r(94184),i=r.n(n),o=r(96486),a=r(36589),l=r(39997),s=r(85893),c=function(e){var t=e.count,r=void 0===t?5:t,n=(0,a.I)().isV3Enabled,c=n?"ml-6":"ml-4";return(0,s.jsx)("div",{className:i()("relative grid h-[calc(100vh-65px)] grid-rows-[1fr]",{"left-0":!n}),children:(0,s.jsxs)("div",{className:"h-full max-w-[18.5rem] overflow-hidden pb-0 pl-0",children:[(0,s.jsx)("div",{className:i()("flex h-20 min-h-[5rem] items-center",{"px-4":!n,"px-6":n}),children:(0,s.jsx)(l.X2,{long:!0})}),!n&&(0,s.jsx)("div",{className:i()(n?"my-6":"my-4"),children:(0,s.jsxs)(l.RN,{xl:!0,full:!0,children:[(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c})]})}),(0,s.jsx)("div",{className:i()(n?"space-y-5":"space-y-6"),children:(0,o.times)(r,(function(e){return(0,s.jsx)("div",{className:i()("items-center",{"px-4":!n,"px-6":n}),children:(0,s.jsxs)(l.RN,{xl:!0,children:[(0,s.jsx)(l.X2,{half:!0,lg:!0}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:c}),(0,s.jsx)(l.X2,{almostFull:!0,className:"mb-2"})]})},e)}))})]})})}},92663:(e,t,r)=>{r.d(t,{r:()=>c});var n=r(94184),i=r.n(n),o=r(96486),a=r(36589),l=r(39997),s=r(85893),c=function(e){var t=e.count,r=void 0===t?5:t,n=(0,a.I)().isV3Enabled;return(0,s.jsx)("div",{"data-testid":"community-switcher-skeleton",className:i()("border-primary bg-primary flex flex-col gap-4 overflow-y-auto border-r",{"fixed left-0 top-12 h-full w-16 p-3":!n,"flex h-screen w-full max-w-[4.5rem] items-center p-4":n}),children:(0,o.times)(r,(function(){return(0,s.jsx)(l.X2,{squareExtraLarge:!0},(0,o.uniqueId)())}))})}},18216:(e,t,r)=>{r.d(t,{b:()=>o});var n=r(39997),i=r(85893),o=function(){return(0,i.jsxs)("div",{className:"h-10 w-full",children:[(0,i.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,i.jsx)(n.X2,{lg:!0,short:!0}),(0,i.jsx)(n.X2,{lg:!0,almostFull:!0})]}),(0,i.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,i.jsx)(n.X2,{lg:!0,short:!0}),(0,i.jsx)(n.X2,{lg:!0,almostFull:!0})]}),(0,i.jsxs)("div",{className:"flex cursor-pointer items-start gap-3 p-1",children:[(0,i.jsx)(n.X2,{lg:!0,short:!0}),(0,i.jsx)(n.X2,{lg:!0,almostFull:!0})]})]})}},67842:(e,t,r)=>{r.d(t,{i:()=>w});var n=r(79072),i=r(94184),o=r.n(i),a=r(20426),l=r(67294),s=r(94281),c=r(85893),u=["className"];function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,l.forwardRef)((function(e,t){var r=e["aria-valuenow"];return(0,c.jsx)(s.T,{content:r,children:(0,c.jsx)("span",p({ref:t},e))})}));b.displayName="Thumb";var v=["className"],h=["className"],y=["className"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var w=Object.assign({},{Root:function(e){var t=e.className,r=O(e,v);return(0,c.jsx)(n.fC,j({className:o()("relative flex h-1 w-full touch-none select-none items-center rounded-md bg-gray-200",t)},r))},Track:function(e){var t=e.className,r=O(e,h);return(0,c.jsx)(n.fQ,j({className:o()("relative h-1 grow rounded-full",t)},r))},Range:function(e){var t=e.className,r=O(e,y),i=(0,a.r)();return(0,c.jsx)(n.e6,j({className:o()("absolute h-full rounded-full",{"bg-brand":"primary"===i,"bg-circle":"circle"===i},t)},r))},Thumb:function(e){var t=e.className,r=d(e,u);return(0,c.jsx)(n.bU,p(p({className:o()("before:bg-brand bg-primary shadow-c-slider relative block h-4 w-4 rounded-xl before:absolute before:inset-1/2 before:h-2 before:w-2 before:-translate-x-1/2 before:-translate-y-1/2 before:rounded-xl",t),asChild:!0},r),{},{children:(0,c.jsx)(b,{})}))}})},51534:(e,t,r)=>{r.d(t,{d:()=>a,D:()=>l});var n=r(67294),i=r(85893),o=(0,n.createContext)({item:{},listeners:{}});o.displayName="ListItemData";var a=function(){return(0,n.useContext)(o)},l=function(e){var t=e.item,r=e.listeners,n=e.children;return(0,i.jsx)(o.Provider,{value:{item:t,listeners:r},children:n})}},85040:(e,t,r)=>{r.d(t,{d:()=>u,y:()=>d});var n=r(67294),i=r(45587),o=r(96486),a=r(85893);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,n.createContext)({activeItem:{},distance:0,items:[],lockedHorizontalAxis:!1,lockedVerticalAxis:!1,onSort:o.noop,setActiveItem:o.noop,useAnimation:!1,useDragHandle:!1});c.displayName="SortableListData";var u=function(){return(0,n.useContext)(c)},d=function(e){var t=e.children,r=e.distance,s=void 0===r?0:r,u=e.items,d=e.lockedHorizontalAxis,f=void 0!==d&&d,p=e.lockedVerticalAxis,m=void 0!==p&&p,b=e.onDragEnd,v=e.onDragOver,h=e.onDragStart,y=e.onSort,g=e.useAnimation,j=void 0===g||g,x=e.useDragHandle,O=void 0!==x&&x,w=l((0,n.useState)(null),2),S=w[0],P=w[1];return(0,a.jsx)(c.Provider,{value:{activeItem:S,distance:s,items:u,lockedHorizontalAxis:f,lockedVerticalAxis:m,onDragEnd:function(e){return P(null),(0,o.isFunction)(b)?b(e):function(e){var t=e.active,r=e.over;if(t.id!==r.id){var n=u.findIndex((function(e){return e.id===t.id})),o=u.findIndex((function(e){return e.id===r.id})),a=(0,i.Rp)(u,n,o);y(a)}}(e)},onDragOver:v,onDragStart:(0,o.isFunction)(h)?h:function(e){var t=u.find((function(t){return t.id===e.active.id}));P(t)},onSort:y,setActiveItem:P,useAnimation:j,useDragHandle:O},children:t})}},77658:(e,t,r)=>{r.d(t,{LB:()=>f,Fo:()=>a,yx:()=>i.y,dI:()=>l.d,dw:()=>i.d});var n=r(45587),i=r(85040),o=r(85893),a=function(e){var t,r=e.id,a=e.items,l=e.children,s=(0,i.d)(),c=s.items,u=s.lockedVerticalAxis,d=s.lockedHorizontalAxis;return u?t=n.qw:d&&(t=n.PG),(0,o.jsx)(n.Fo,{id:r,items:null!==a&&void 0!==a?a:c,strategy:t,children:l})},l=r(51534),s=r(79752),c=r(32339);function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=e.children,r=e.shouldUseKeyboardSensor,a=(0,i.d)(),l=a.lockedVerticalAxis,d=a.lockedHorizontalAxis,f=a.onDragStart,p=a.onDragEnd,m=a.onDragOver,b=a.distance,v=(0,s.VT)(s.we,{activationConstraint:{distance:b}}),h=(0,s.VT)(s.Lg,{coordinateGetter:n.is}),y=[v];r&&y.push(h);var g=s.Dy.apply(void 0,y),j=[c.hg].concat(u(l?[c.DL]:[]),u(d?[c.K7]:[]));return(0,o.jsx)(s.LB,{sensors:g,modifiers:j,collisionDetection:s.pE,onDragStart:f,onDragEnd:p,onDragOver:m,children:t})}},94780:(e,t,r)=>{r.d(t,{y:()=>b});var n=r(79752),i=r(32339),o=r(73935),a=r(96561),l=r(85040),s=r(93162),c=r(85893),u=["children","portalTo","shouldRestrictToParent"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=function(e){var t,r=e.children,d=e.portalTo,p=void 0===d?null:d,b=e.shouldRestrictToParent,v=void 0!==b&&b,h=m(e,u),y=(0,a.xQ)(),g=null===y||void 0===y||null===(t=y.document)||void 0===t?void 0:t.documentElement,j=(0,l.d)(),x=j.activeItem,O=j.useAnimation,w=p||g||window.document.body;return(0,c.jsx)(c.Fragment,{children:(0,o.createPortal)((0,c.jsx)(n.y9,f(f(f({adjustScale:!0,dropAnimation:{duration:O?100:0}},v&&{modifiers:[i.F4]}),h),{},{children:x?(0,c.jsx)(s.g,{item:x,isDragOverlay:!0,children:r}):null})),w)})}},25939:(e,t,r)=>{r.d(t,{c:()=>f});var n=r(45587),i=r(85040),o=r(93162),a=r(85893),l=["item","disabled","dataTestId"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.item,r=e.disabled,s=void 0!==r&&r,u=e.dataTestId,f=void 0===u?"":u,p=d(e,l),m=t.id,b=(0,i.d)().useAnimation,v=(0,n.nB)(c(c({id:m},!b&&{transition:{duration:0,easing:"linear"}}),{},{disabled:s})),h=v.attributes,y=v.listeners,g=v.transform,j=v.transition,x=v.isDragging,O=v.setNodeRef;return(0,a.jsx)(o.g,c({ref:O,item:t,attributes:h,listeners:y,transform:g,transition:j,isDragging:x,dataTestId:f},p))}},5359:(e,t,r)=>{r.d(t,{a:()=>f});var n=r(94184),i=r.n(n),o=r(77658),a=r(85893),l=["gap","className","children"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.gap,r=void 0===t?2:t,n=e.className,s=void 0===n?"":n,u=e.children,f=d(e,l);return(0,a.jsx)(o.Fo,c(c({},f),{},{children:(0,a.jsx)("ul",{className:i()("grid gap-".concat(r),s),children:u})}))}},93162:(e,t,r)=>{r.d(t,{g:()=>v});var n=r(67294),i=r(24285),o=r(94184),a=r.n(o),l=r(51534),s=r(85040),c=r(85893),u=["item","transform","transition","listeners","attributes","isDragging","isDragOverlay","placeholder","className","children","dataTestId"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=(0,n.forwardRef)((function(e,t){var r=e.item,n=e.transform,o=e.transition,d=e.listeners,p=e.attributes,b=e.isDragging,v=void 0!==b&&b,h=e.isDragOverlay,y=void 0!==h&&h,g=e.placeholder,j=e.className,x=e.children,O=e.dataTestId,w=void 0===O?"":O,S=m(e,u),P=(0,s.d)().useDragHandle,_={transform:i.ux.Transform.toString(n),transition:o},N=v&&!y;return(0,c.jsx)("li",f(f(f(f({ref:t,style:_,className:a()("w-full min-w-0 list-none",{"cursor-auto":P,"cursor-move":!P},j)},p),S),!P&&d),{},{"data-testid":w,children:(0,c.jsx)(l.D,{item:r,listeners:d,children:!N&&x?x:g?(0,c.jsx)(g,{}):(0,c.jsx)("div",{className:"h-10"})})}))}));b.displayName="ListItem";var v=(0,n.memo)(b);v.displayName="ListItemMemo"},99545:(e,t,r)=>{r.d(t,{Fo:()=>n.Fo,cm:()=>p,dI:()=>n.dI,dw:()=>n.dw});var n=r(77658),i=r(85893),o=["children","shouldUseKeyboardSensor"];function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var u=r(94780),d=r(25939),f=r(5359),p=Object.assign((function(e){var t=e.children,r=e.shouldUseKeyboardSensor,a=void 0===r||r,s=c(e,o);return(0,i.jsx)(n.yx,l(l({},s),{},{children:(0,i.jsx)(n.LB,{shouldUseKeyboardSensor:a,children:t})}))}),{List:f.a,Item:d.c,DragOverlay:u.y})},4848:(e,t,r)=>{r.d(t,{O:()=>s});var n=r(94184),i=r.n(n),o=r(85893),a={success:"text-v2-success",warning:"text-v2-warning-900",danger:"text-v2-danger",default:"text-dark",info:"text-v2-info"},l={success:"bg-v2-success-100",warning:"bg-v2-warning-100",danger:"bg-v2-danger-100",default:"bg-secondary",info:"bg-blue-100"},s=function(e){var t=e.children,r=e.variant,n=void 0===r?"default":r,s=e.textTransform,c=a[n]||a.default,u=l[n]||l.default;return(0,o.jsx)("span",{className:i()("rounded-md px-2 py-1 text-xs font-semibold",c,u,s),children:t})}},1712:(e,t,r)=>{r.d(t,{r:()=>u});var n=r(77768),i=r(94184),o=r.n(i),a=r(50308),l=r.n(a),s=r(18605),c=r(85893),u=function(e){var t=e.as,r=void 0===t?"button":t,i=e.checked,a=void 0!==i&&i,u=e.onChange,d=void 0===u?l():u,f=e.disabled,p=void 0!==f&&f;return(0,c.jsx)(n.r,{as:r,checked:a,onChange:d,disabled:p,className:o()("disabled:bg-disabled relative mb-0 flex h-4 w-6 items-center rounded-full transition-colors disabled:cursor-not-allowed",{"bg-toggle-checked":a,"bg-toggle-unchecked":!a}),children:(0,c.jsx)("span",{className:o()("text-darkest inline-block h-2.5 w-2.5 rounded-full transition-transform",{"bg-toggle-circle-checked translate-x-2.5":a,"bg-toggle-circle-unchecked translate-x-1":!a}),children:(0,c.jsx)(s.JO,{type:"10-circle-check",size:10,style:{width:"auto",display:"block"},className:o()("text-selector-active transition-opacity",{"opacity-30":a&&p,"opacity-100":a&&!p,"opacity-0":!a}),useWithStrokeCurrentColor:!0})})})}},11745:(e,t,r)=>{r.d(t,{V:()=>o,A:()=>a});var n=r(62618),i=r(85893),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=1e4?"".concat((0,n.HA)(1e4),"+"):(0,n.HA)(e)},a=function(e){var t=e.children;if("number"!==typeof t)return null;var r=o(t);return(0,i.jsx)("span",{className:"ml-2 font-normal",children:r})}},6952:(e,t,r)=>{r.d(t,{O:()=>$});var n=r(11745),i=r(17969),o=r(94184),a=r.n(o),l=r(96486),s=r(85893),c=["children","className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,o=p(e,c);return(0,s.jsx)(i.O.Group,d(d({as:"div","data-testid":"tab-group",selectedIndex:o.selectedIndex,onChange:(0,l.isFunction)(o.onChange)?function(e){var t;null===(t=o.onChange)||void 0===t||t.call(o,e)}:l.noop,className:a()("text-dark h-full w-full overflow-auto",n)},o),{},{children:t}))};m.displayName="Tab.Group";var b=r(30380),v=["children","className"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var x=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,o=j(e,v);return(0,s.jsx)(b.E,{className:n,options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:(0,s.jsx)(i.O.List,y(y({as:"nav","data-testid":"tab-list",className:a()("flex gap-6")},o),{},{children:t}))})};x.displayName="Tab.List";var O=r(36589),w=["children","className"];function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var k=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,o=N(e,w);return(0,s.jsx)(i.O.Panel,P(P({as:"div","data-testid":"tab-panel",className:a()("h-full w-full overflow-auto",n)},o),{},{children:t}))};k.displayName="Tab.Panel";var C=["children","className"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var I=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,o=T(e,C);return(0,s.jsx)(i.O.Panels,A(A({as:"div","data-testid":"tab-panels",className:a()("h-full w-full overflow-auto",n)},o),{},{children:t}))};I.displayName="Tab.Panels";var M=["children","className","disabled","isButtonType"];function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var $=Object.assign((function(e){var t=e.children,r=e.className,n=void 0===r?"":r,o=e.disabled,l=void 0!==o&&o,c=e.isButtonType,u=void 0!==c&&c,d=U(e,M);return(0,s.jsx)(i.O,{as:"div",className:"flex","data-testid":"tab-div-wrapper",children:function(e){var r=e.selected,i=void 0!==r&&r;return(0,s.jsxs)("button",R(R({type:u?"button":"submit","data-testid":"tab-button",disabled:l,className:a()("inline-block h-10 whitespace-nowrap border-b-2 py-2 text-base leading-none",{"cursor-not-allowed":l,"cursor-pointer":!l,"border-darkest":i,"hover:border-primary border-transparent transition-colors":!i},n)},d),{},{children:[(0,s.jsx)("span",{className:"invisible block h-0 overflow-hidden font-semibold","aria-hidden":!0,children:t}),(0,s.jsx)("span",{className:a()("block",{"text-dark font-semibold":i,"text-light font-normal":!i}),children:t})]}))}})}),{List:x,Group:m,Panel:k,Panels:I,Counter:n.A,ListWrapper:function(e){var t=e.hasBorder,r=void 0===t||t,n=e.children,i=(0,O.I)().isV3Enabled;return(0,s.jsx)("div",{className:a()("bg-primary px-6",{"border-b":r,"lg:px-9":i}),children:n})}})},69263:(e,t,r)=>{r.d(t,{i:()=>C});var n=r(94184),i=r.n(n),o=r(85893),a=["className","children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=r(8246),f=["colSpan","className","onClick","children","hideBorders"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var h=["className","children"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O=r(23560),w=r.n(O),S=["onClick","className","children"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var C=Object.assign((function(e){var t=e.className,r=e.children;return(0,o.jsx)("table",{className:i()("bg-primary min-w-full border-separate border-spacing-0",t),children:r})}),{TableHead:function(e){var t=e.isSticky,r=e.className,n=e.children;return(0,o.jsx)("thead",{className:i()({"bg-primary border-primary sticky top-0 border-t":t},r),children:n})},TableHeaderText:function(e){var t=e.children,r=e.className;return(0,o.jsx)("span",{className:i()("flex",r),children:(0,o.jsx)(d.Z.LabelXxs,{leading:"leading-tight",color:"text-default",children:t})})},TableBody:function(e){var t=e.className,r=e.children,n=u(e,a);return(0,o.jsx)("tbody",s(s({className:i()("divide-primary divide-y",t)},n),{},{children:r}))},Th:function(e){var t=e.className,r=e.children,n=x(e,h);return(0,o.jsx)("th",g(g({className:i()("border-primary whitespace-nowrap border-b px-4 pb-3 pt-5 text-left leading-tight first:pl-0 last:pr-0",t)},n),{},{children:r}))},Tr:function(e){var t=e.onClick,r=e.className,n=e.children,a=k(e,S),l=w()(t);return(0,o.jsx)("tr",_(_(_({},l&&{onClick:t}),{},{className:i()("group",{"cursor-pointer":l},r)},a),{},{children:n}))},Td:function(e){var t=e.colSpan,r=e.className,n=e.onClick,a=e.children,l=e.hideBorders,s=void 0!==l&&l,c=v(e,f);return(0,o.jsx)("td",m(m({colSpan:t,className:i()("break-words p-3 align-top first:pl-0 last:pr-0",{"cursor-pointer":!!n,"border-primary border-b py-5":!s},r),onClick:n},c),{},{children:a}))},TableFoot:function(e){var t=e.className,r=e.children;return(0,o.jsx)("tfoot",{className:t,children:r})}})},26643:(e,t,r)=>{r.d(t,{O:()=>v});var n=r(94184),i=r.n(n),o=r(41609),a=r.n(o),l=r(40160),s=r(67741),c=r(85893),u=["value"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=function(e){var t=e.badge,r=t.value,n=m(t,u);return(0,c.jsx)("span",{className:"title-badge",children:(0,c.jsx)(s.C,f(f({},n),{},{children:r}))})},v=function(e){var t=e.active,r=e.label,n=e.variant,o=e.onClick,s=e.badge,u=void 0===s?{}:s,d=e.to,f=void 0===d?"":d,p=e.disabled,m=void 0!==p&&p,v=e.className,h=void 0===v?"":v,y=i()("react-tabs__tab","react-tabs__tab--".concat(n),"!text-dark",{"react-tabs__tab--active":t,"react-tabs__tab--disabled":!t&&m},h),g=i()({"text-light font-normal":!t&&!m,"!text-dark font-semibold":t,"text-secondary-muted":!t&&m});return!m&&f?(0,c.jsxs)(l.rU,{className:y,to:f,onClick:o,role:"tab","aria-selected":t,children:[(0,c.jsx)("span",{className:g,children:r}),!a()(u)&&(0,c.jsx)(b,{badge:u})]}):(0,c.jsxs)("button",{type:"button",className:y,onClick:function(){m||o(r)},"aria-selected":t,role:"tab",tabIndex:0,children:[(0,c.jsx)("span",{className:g,children:r}),!a()(u)&&(0,c.jsx)(b,{badge:u})]})}},62557:(e,t,r)=>{r.d(t,{m:()=>h});var n=r(67294),i=r(94184),o=r.n(i),a=r(23560),l=r.n(a),s=r(47037),c=r.n(s),u=r(26643),d=r(85893);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t;return c()(e)?e:null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.displayName},h=(0,n.forwardRef)((function(e,t){var r=e.controlled,i=void 0!==r&&r,a=e.children,s=e.value,c=e.defaultValue,b=e.onChange,h=e.activeTab,y=e.onClick,g=e.wrapperClassName,j=e.options,x=e.variant,O=void 0===x?"default":x,w=e.mobile,S=void 0!==w&&w,P=e.tabClassName,_=void 0===P?"":P,N=e.className,k=void 0===N?"":N,C=(0,n.useMemo)((function(){var e;return a?null===(e=a[0])||void 0===e?void 0:e.props.label:null}),[a]),D=s||c||C,A=m((0,n.useState)(i?D:h),2),E=A[0],T=A[1];if((0,n.useEffect)((function(){!c||i||E||T(c)}),[c,i]),i&&!h)throw new Error("Tabs are in controlled mode and activeTab prop isn't passed.");var I=function(e){i||T(e),l()(y)&&y(e),l()(b)&&b(e)};(0,n.useEffect)((function(){i||s===h||T(s)}),[s,i]);var M=i?h:E;return(0,d.jsxs)("div",{ref:t,className:o()("react-tabs",k,"react-tabs--".concat(String(O)),{"react-tabs--mobile":S}),children:[(0,d.jsx)("div",{className:"react-tabs__tabs",children:(0,d.jsxs)("nav",{className:o()("react-tabs__nav",g),role:"tablist",children:[!!j&&j.map((function(e){return(0,d.jsx)(u.O,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({"data-testid":"tab-".concat(String(e.label)),className:_,active:M===e.label,label:e.label,badge:e.badge,onClick:I,variant:O},e),e.label)})),!!a&&a.map((function(e){var t=e.props,r=t.label,n=t.onClick,i=v(r);return(0,d.jsx)(u.O,{className:_,active:M===i,label:r,onClick:function(){I(i),null===n||void 0===n||n()},variant:O},i)}))]})}),a&&(0,d.jsx)("div",{className:"react-tabs__tab-content",children:n.Children.map(a,(function(e){return(0,n.isValidElement)(e)?v(e.props.label)!==M?null:e.props.children:null}))})]})}));h.displayName="Tabs"},88677:(e,t,r)=>{r.d(t,{V:()=>o});var n=r(83474),i=r(85893),o=function(e){var t=e.content_type;return"application/pdf"==t?(0,i.jsx)(n.Q3,{}):null!==t&&void 0!==t&&t.startsWith("audio")?(0,i.jsx)(n.Bb,{}):null!==t&&void 0!==t&&t.startsWith("video")?(0,i.jsx)(n.nk,{}):(0,i.jsx)(n.$B,{})}},71921:(e,t,r)=>{r.d(t,{P:()=>l});var n=r(71462);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=n.Z.extend({inclusive:!1,addOptions:function(){var e;return o(o({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{openInternalLinksInCurrentTab:!1})},addAttributes:function(){var e,t=this;return o(o({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{target:{default:this.options.HTMLAttributes.target,renderHTML:function(e){return{target:t.options.openInternalLinksInCurrentTab&&function(e){try{return window.location.host===new URL(e).host}catch(t){return!1}}(e.href)?null:e.target}}}})},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([class *= "mention__name"])'}]}})},6811:(e,t,r)=>{r.d(t,{Y:()=>X});var n=r(51420),i=r(24706),o=r(16722),a=r(76922),l=r(79253),s=r(80382),c=r(17237),u=r(86013),d=r(50732),f=r(89052),p=r(94281),m=r(7074),b=r(66422),v=r(85893),h=function(e){var t=e.node,r=(0,m.p)(),n=(0,b.S)()||r,o=n.sgidToObjectMap,a=void 0===o?{}:o,l=n.localSgidToObjectMap,s=(void 0===l?{}:l)[t.attrs.sgid]||a[t.attrs.sgid],c=function(){var e;switch(s.type){case"Space":case"space":e=(0,d._v)({spaceSlug:s.slug});break;case"Posts::Basic":case"Posts::Event":case"post":e=d.xu.show({spaceSlug:s.space_slug,slug:s.slug});break;case"Courses::Lesson":case"lesson":e=d.H4.showLesson({spaceSlug:s.space_slug,sectionId:s.section_id,lessonId:s.id})}e&&window.open(e,"_blank","noreferrer")},h=(0,f.k)(c);if(!s)return(0,v.jsx)(i.T5,{as:"span",children:(0,v.jsx)(p.T,{interactive:!1,content:(0,u.t)("unavailable_entity_message"),placement:"top",children:(0,v.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,u.t)("unavailable_entity")})})});var y="space"===s.type||"Space"===s.type;return(0,v.jsx)(i.T5,{as:"span",children:(0,v.jsx)(p.T,{interactive:!1,content:"".concat(y?"#":"").concat(String(s.name)),placement:"top",disabled:!s.name,children:(0,v.jsxs)("span",{role:"button",onClick:c,onKeyDown:h,contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 text-left font-medium",tabIndex:0,children:[y&&"#",s.name||(0,u.t)("tiptap.entity_untitled")]})})})},y=r(67294),g=r(96486),j=r(88767),x=r(8246),O=r(81089),w=r(61960),S=r(25782),P=function(e){var t=e.isLoading,r=e.query;return(0,v.jsx)("div",{className:"-mt-4 px-6 py-3",children:(0,v.jsx)(x.Z.LabelSm,{color:"text-light",children:t?(0,u.t)("tiptap.extensions.entities.loading"):r?(0,u.t)("tiptap.extensions.entities.no_results"):(0,u.t)("tiptap.extensions.entities.start_typing_to_search")})})},_=r(94184),N=r.n(_),k=r(38503),C=r(9951),D=function(e){var t=e.entity,r=e.handleClick,n=e.isSelected,i=t||{},o=i.name,a=i.emoji,l=i.custom_emoji_url,s=i.custom_emoji_dark_url,c=(0,k.TC)().currentAppearance;return(0,v.jsx)(p.T,{interactive:!1,content:o,disabled:(null===o||void 0===o?void 0:o.length)<40,children:(0,v.jsxs)("button",{type:"button",className:N()("hover:bg-tertiary flex w-full cursor-pointer items-center truncate px-6 py-2.5 text-left",{"bg-tertiary":n}),onClick:r,children:["space"===t.type&&(0,v.jsx)(C.S,{className:"!text-dark mr-2 flex !h-5 !w-auto items-center",emoji:a,customEmojiUrl:l,customEmojiDarkUrl:s,appearance:c}),(0,v.jsx)(x.Z.LabelSm,{weight:"medium",children:(0,g.truncate)(o,{length:40})})]})})};function A(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){return{space:(0,u.t)("tiptap.extensions.entities.spaces"),post:(0,u.t)("tiptap.extensions.entities.posts"),event:(0,u.t)("tiptap.extensions.entities.events"),lesson:(0,u.t)("tiptap.extensions.entities.lessons"),course:(0,u.t)("tiptap.extensions.entities.courses")}[e]};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=(0,y.forwardRef)((function(e,t){var r=e.query,n=e.command,i=(0,b.S)(),o=(0,m.p)(),a=(i||o).addToLocalSgidToObjectMap,l=(0,w.O)().setPopupsVisible,s=R((0,y.useState)(0),2),c=s[0],u=s[1],f=(0,j.useQuery)(["entities",r],(function(){return(0,O.UT)(d.av.searchV2.advanced.index({params:{query:r,per_page:10,page:1,type:"entity_list"}}))}),{select:function(e){return e.records.map((function(e){return M(M({},e),{},{label:e.name})}))},enabled:!!r,keepPreviousData:!0}),p=f.data,h=void 0===p?[]:p,_=f.isLoading,N=(0,g.isArray)(h)&&h.length>0,k=function(e){e&&(a({sgid:e.sgid,object:e}),n(e))};(0,y.useEffect)((function(){l(!(!r||_||!N))}),[N,r,_,l]);var C=(0,g.groupBy)(h,"type"),E=Object.values(C),I=E.map((function(e){return e.length})),L=(0,g.flatten)(E),F=(0,y.useCallback)((function(e,t){var r=function(e,t){var r,n=0,i=0,o=0,a=A(t);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(e<(o+=l)){i=e-(o-l);break}n++}}catch(s){a.e(s)}finally{a.f()}return{groupIndex:n,insideGroupIndex:i}}(c,I),n=r.groupIndex,i=r.insideGroupIndex;return n===e&&i===t}),[c,I]);return(0,S.h)({selectedIndex:c,setSelectedIndex:u,ref:t,items:L,selectItem:function(e){var t=L[e];k(t)}}),(0,v.jsx)("div",{className:"bg-primary border-primary relative max-h-[550px] min-w-[250px] max-w-[320px] space-y-6 overflow-auto rounded-lg border pt-4 text-sm shadow-md",children:h.length?(0,v.jsx)(v.Fragment,{children:E.map((function(e,t){var r=e[0].type;return(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("div",{className:"px-6 pb-2",children:(0,v.jsx)(x.Z.LabelSm,{color:"text-light",weight:"medium",children:T(r)})}),e.map((function(e,r){return(0,v.jsx)(D,{entity:e,handleClick:function(){k(e),(0,g.defer)((function(){return l(!1)}))},isSelected:F(t,r)},e.id)}))]},r)}))}):(0,v.jsx)(P,{isLoading:_,query:r})})}));U.displayName="EntityList";var $=r(98338),B=function(e){var t,r=e.href,n=e.command,i=(0,$.Cc)().record.unfurl_entity_links_enabled,o=(0,b.S)(),a=(0,m.p)(),l=(o||a).addToLocalSgidToObjectMap,s=(0,j.useQuery)(d.av.richTextFields.unfurlURLs({params:{urls:[r]}}),{initialData:[],enabled:!!i}).data,c=null!==(t=null===s||void 0===s?void 0:s[0])&&void 0!==t?t:{type:"",sgid:""};return(0,y.useEffect)((function(){null!==c&&void 0!==c&&c.type&&(l({sgid:c.sgid,object:c}),n(c.sgid))}),[c]),null};B.displayName="EntityPaste";var X=function(e){return n.NB.create({name:"entity",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1100,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"entity-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["entity-react",(0,n.P1)(t)]},addNodeView:function(){return(0,i.fW)(h)},addProseMirrorPlugins:function(){var t=this,r=(0,s.D)(e||null),n=this.editor,u=this.name;return[new a.Sy({key:new a.H$("entityLinkPaste"),props:{handlePaste:function(e,t){if(!e.state.selection.empty)return!1;var r=t.clipboardData.getData("text/plain").trim(),o=new RegExp("^https?://".concat(window.location.host,"/c/[-\\]_.~!*'();:@&=+$,/?%#[A-z0-9]*$"),"g").exec(r);if(!o)return!1;var a=o[0],l=e.state.selection.ranges[0].$from.pos;n.chain().focus().insertContentAt(l,{type:"text",text:a,marks:[{type:"link",attrs:{href:a,target:"_blank"}}]}).run();var s=new i.M_(B,{props:{href:a,command:function(e){(0,c.R)({editor:n,range:{from:l,to:l+a.length},name:u,attrs:{sgid:e}}),s.destroy()}},editor:n});return!0}}}),(0,o.ZP)({editor:this.editor,char:"#",allowSpaces:!0,pluginKey:new a.H$("entity"),command:function(e){var r=e.editor,n=e.range,i=e.props;return(0,c.R)({editor:r,range:n,name:t.name,attrs:i})},allow:function(e){var r=e.state,n=e.range;return(0,c.k)({state:r,range:n,name:t.name})},render:function(){var e,t;return{onStart:function(n){e=new i.M_(U,{props:n,editor:n.editor});t=(0,l.ZP)("body",{getReferenceClientRect:function(){var e;return(null===(e=n.clientRect)||void 0===e?void 0:e.call(n))||new DOMRect(0,0,0,0)},appendTo:function(){return r},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(r){e.updateProps(r),t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown:function(r){var i;if("Space"===r.event.code){var o=n.getText();if(" "==(null===o||void 0===o?void 0:o.at(-1)))return t[0].hide(),!1}else if("Escape"===r.event.code)return t[0].hide(),!1;return null===(i=e.ref)||void 0===i?void 0:i.onKeyDown(r)},onExit:function(){t[0].destroy(),e.destroy()}}}})]}})}},98122:(e,t,r)=>{r.d(t,{o:()=>$});var n=r(51420),i=r(24706),o=r(16722),a=r(76922),l=r(79253),s=r(80382),c=r(17237),u=r(67294),d=r(96486),f=r(61960),p=r(7074),m=r(66422),b=r(25782),v=r(94184),h=r.n(v),y=r(8246),g=r(18605),j=r(64422),x=r(85893),O=function(e){var t=e.member,r=e.isSelected,n=e.handleClick;return(0,x.jsxs)("button",{type:"button","data-testid":"mention-item",className:h()("hover:bg-tertiary flex cursor-pointer items-center px-3 py-1.5",{"bg-tertiary":r}),onClick:n,children:[(0,x.jsx)("div",{className:"mr-3",children:"group_mention"===t.type?(0,x.jsx)(g.JO,{type:"20-members",size:20,className:"!text-darkest ml-1 mr-2"}):(0,x.jsx)(j.s,{size:"8",name:t.name,src:t.avatar_url})}),(0,x.jsx)(y.Z.LabelSm,{weight:"medium",children:t.name})]})},w=function(e){var t=e.spaceId,r=e.isDirectMessaging,n=e.isThread,i=e.editorType,o=e.isUpdate,a=e.disableGroupMentions;return"block"===i?"post":n||o||a?"thread":t?"space":r?"direct":"group_chat"},S=r(88767),P=r(81089),_=r(50732);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=(0,u.forwardRef)((function(e,t){var r=e.query,n=e.command,i=(0,m.S)(),o=(0,p.p)(),a=i||o,l=a.addToLocalSgidToObjectMap,s=a.spaceId,c=a.chatProps,v=a.type,h=a.isUpdate,y=c||{},g=y.isThread,j=y.isDirectMessaging,N=y.disableGroupMentions,C=(0,f.O)().setPopupsVisible,A=function(e){var t=e.query,r=e.scope,n=void 0===r?"space":r,i=e.spaceId,o=(0,S.useQuery)(["entities",t],(function(){return(0,P.UT)(_.av.searchV2.advanced.index({params:k({query:t,per_page:20,page:1,type:"mentions",mention_scope:n},i&&{space_id:i})}))}),{select:function(e){return e.records.map((function(e){return k(k({},e),{},{label:e.name})}))},enabled:!!t}),a=o.data;return{items:void 0===a?[]:a,isLoading:o.isLoading}}({query:r,spaceId:s,scope:w({spaceId:s,isDirectMessaging:j,isThread:g,editorType:v,isUpdate:h,disableGroupMentions:N})}),E=A.items,T=A.isLoading,I=(0,d.isArray)(E)&&E.length>0,M=D((0,u.useState)(0),2),L=M[0],R=M[1],F=function(e){var t=E[e];t&&(l({sgid:t.sgid,object:t}),n(t))};return(0,u.useEffect)((function(){return R(0)}),[E]),(0,b.h)({selectedIndex:L,setSelectedIndex:R,ref:t,items:E,selectItem:F}),(0,u.useEffect)((function(){C(!(!r||T||!I))}),[I,r,T,C]),I?(0,x.jsx)("div",{className:"bg-primary border-primary relative max-h-[50vh] min-w-[250px] max-w-[320px] overflow-auto rounded border py-1.5 text-sm shadow-md",children:(0,x.jsx)("div",{className:"flex flex-col space-y-0.5",children:E.map((function(e,t){return(0,x.jsx)(O,{member:e,handleClick:function(){F(t),(0,d.defer)((function(){return C(!1)}))},isSelected:t===L},e.id)}))})}):null}));E.displayName="MentionList";var T=r(98338),I=r(11355);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={COMMUNITY_MEMBER:"CommunityMember",GROUP_MENTION:["GroupMention","group_mention"]},U=function(e){var t=e.node,r=(0,T.N3)(),n=(0,m.S)(),o=(0,p.p)(),a=n||o,l=a.sgidToObjectMap,s=void 0===l?{}:l,c=a.localSgidToObjectMap,u=void 0===c?{}:c,d=a.type,f=a.disableMentionClicks,b=void 0!==f&&f,v=u[t.attrs.sgid]||s[t.attrs.sgid],y=(0,I.O)({public_uid:null===v||void 0===v?void 0:v.public_uid});if(!v)return null;var g="chat"===d,j=v.type===F.COMMUNITY_MEMBER,O=F.GROUP_MENTION.some((function(e){return e===v.type})),w=O||j&&v.id===(null===r||void 0===r?void 0:r.id),S=h()("mx-0.5 rounded-sm p-0.5 font-normal",O?"text-[#42464D]":"text-circle cursor-pointer",w?"bg-amber-100":"bg-indigo-100");return(0,x.jsx)(i.T5,{as:"span",children:(0,x.jsxs)("span",L(L({contentEditable:!1,className:g?S:"text-link cursor-pointer font-medium"},b||O?{}:y),{},{children:[g?"@":"",v.name]}))})},$=function(e){return n.NB.create({name:"mention",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"mention-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["mention-react",(0,n.P1)(t)]},addNodeView:function(){return(0,i.fW)(U)},addProseMirrorPlugins:function(){var t=this,r=(0,s.D)(e);return[(0,o.ZP)({editor:this.editor,char:"@",allowSpaces:!0,pluginKey:new a.H$("mention"),command:function(e){var r=e.editor,n=e.range,i=e.props;return(0,c.R)({editor:r,range:n,name:t.name,attrs:i})},allow:function(e){var r=e.state,n=e.range;return(0,c.k)({state:r,range:n,name:t.name})},render:function(){var e,t;return{onStart:function(n){e=new i.M_(E,{props:n,editor:n.editor}),t=(0,l.ZP)("body",{getReferenceClientRect:n.clientRect,appendTo:function(){return r},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(r){e.updateProps(r),t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown:function(r){var n;return"Escape"===r.event.key?(t[0].hide(),!0):null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(r)},onExit:function(){t[0].destroy(),e.destroy()}}}})]}})}},25782:(e,t,r)=>{r.d(t,{h:()=>a});var n=r(67294),i=r(96486),o=r(61960),a=function(e){var t=e.selectedIndex,r=e.setSelectedIndex,a=e.items,l=e.ref,s=e.selectItem,c=(0,o.O)().setPopupsVisible;(0,n.useImperativeHandle)(l,(function(){return{onKeyDown:function(e){switch(e.event.key){case"ArrowUp":return r((Number(t)+Number(a.length)-1)%a.length),!0;case"ArrowDown":return r((Number(t)+1)%a.length),!0;case"Enter":return!!a.length&&(s(t),(0,i.defer)((function(){return c(!1)})),!0);default:return c(!1),!1}}}}),[a,t,s,c,r])}},17237:(e,t,r)=>{r.d(t,{R:()=>n,k:()=>i});var n=function(e){var t,r=e.editor,n=e.range,i=e.name,o=e.attrs,a=r.view.state.selection.$to.nodeAfter;(null===a||void 0===a||null===(t=a.text)||void 0===t?void 0:t.startsWith(" "))&&(n.to+=1),r.chain().focus().insertContentAt(n,[{type:i,attrs:o},{type:"text",text:" "}]).run()},i=function(e){var t=e.state,r=e.range,n=e.name,i=t.doc.resolve(r.from),o=t.schema.nodes[n];return!!i.parent.type.contentMatch.matchType(o)}},99625:(e,t,r)=>{r.d(t,{a:()=>n});var n=r(48510).Z.extend({parseHTML:function(){return[{tag:"u"}]}})},87981:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(18605),i=r(85893),o=function(e){var t=e.type,r=e.iconSize,o=void 0===r?20:r;return(0,i.jsx)("span",{className:"flex items-center",children:(0,i.jsx)(n.JO,{type:t,size:o,useWithFillCurrentColor:!0})})}},20010:(e,t,r)=>{r.d(t,{p:()=>u});var n=r(94184),i=r.n(n),o=r(23560),a=r.n(o),l=r(46266),s=r(87981),c=r(85893),u=function(e){var t=e.label,r=e.isActive,n=e.onClick,o=e.tooltipPlacement,u=void 0===o?"top":o,d=e.iconType,f=(0,c.jsx)("button",{type:"button",onClick:function(){return a()(n)&&n()},className:i()("rounded border p-1.5","text-dark","hover:bg-secondary",{"bg-tertiary text-dark border-light":r,"border-transparent":!r}),children:(0,c.jsx)(s.l,{type:d})});return t?(0,c.jsx)(l.Y,{content:t,placement:u,theme:"text-modifiers-tooltip",children:f}):(0,c.jsx)(c.Fragment,{children:f})}},9765:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(51420),i=function(e){var t=e.view,r=e.state,i=e.from,o=e.to,a=r.doc,l=r.selection,s=l.empty,c=l.$from.node(),u=!a.textBetween(i,o).length&&(0,n.xh)(l),d=t.hasFocus(),f=["paragraph","heading"].includes(c.type.name);return d&&!s&&f&&!u}},20434:(e,t,r)=>{r.d(t,{o:()=>p});var n=r(67294),i=r(94184),o=r.n(i),a=r(18605),l=r(85893),s=["icon","isLight","shouldAnimateSpin","className","disabled"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=(0,n.forwardRef)((function(e,t){var r=e.icon,n=e.isLight,i=e.shouldAnimateSpin,c=e.className,d=e.disabled,p=f(e,s);return(0,l.jsx)("button",u(u({ref:t,type:"button",className:o()("hover:bg-tertiary focus-visible:bg-tertiary flex h-7 w-7 items-center justify-center rounded p-1",{"cursor-not-allowed":d},c),disabled:d},p),{},{children:(0,l.jsx)(a.JO,{type:r,size:20,className:o()("h-5 w-5",{"text-default dark:text-dark":n,"text-lightest dark:text-default":!n,"animate-spin":i})})}))}));p.displayName="MenuIconButton"},94272:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(85893),i=function(){return(0,n.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},55759:(e,t,r)=>{r.d(t,{KN:()=>U,$j:()=>$.$,B7:()=>Z});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),l=r(18605),s=r(64687),c=r.n(s),u="waiting_for_mic_permission",d="recording",f="processing",p="uploading",m="upload_error",b="server_error",v="VOICE_MESSAGE_PROCESSED",h="VOICE_MESSAGE_ERROR";function y(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}var g=function(){var e,t=(e=c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"microphone"});case 3:if("granted"===e.sent.state){e.next=6;break}throw new Error("Microphone permission not granted");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(u);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,l,"next",e)}function l(e){y(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),j=r(58883),x=r(48465),O=r(50732);function w(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,l,"next",e)}function l(e){w(o,n,i,a,l,"throw",e)}a(void 0)}))}}var P={accept:"application/json","content-type":"application/json"},_=function(){var e=S(c().mark((function e(t,r){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.av.voiceMessages.signedUploadUrl(),{method:"POST",headers:P,body:JSON.stringify({filename:t.name,contentType:t.type})});case 3:return n=e.sent,e.next=6,n.json();case 6:return i=e.sent,e.abrupt("return",{method:i.method,url:i.url,fields:i.fields,headers:{"Content-Type":t.type}});case 10:return e.prev=10,e.t0=e.catch(0),r(),console.error("Error uploading audio file:",e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),N=function(){var e=S(c().mark((function e(t,r,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.av.voiceMessages.processFileUrl(),{method:"POST",headers:P,body:JSON.stringify({object_id:t,recording_id:r})});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),n(),console.error("Error processing audio file:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}();function k(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){k(o,n,i,a,l,"next",e)}function l(e){k(o,n,i,a,l,"throw",e)}a(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.recordingId,r=D((0,n.useState)(d),2),i=r[0],o=r[1],a=(0,n.useRef)(null),l=(0,n.useRef)(null),s=(0,n.useRef)(null),u=(0,n.useRef)([]),v=(0,n.useRef)(null),h=(0,n.useRef)(!1),y=(0,n.useRef)(null),O=function(e){return{isRecording:e===d,isBusy:e===p||e===f,isError:e===m||e===b}}(i),w=O.isRecording,S=O.isBusy,P=O.isError,k=(0,n.useCallback)(C(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(o),e.next=4,navigator.mediaDevices.getUserMedia({audio:!0});case 4:r=e.sent,l.current=r,s.current=new MediaRecorder(r),s.current.addEventListener("dataavailable",(function(e){u.current.push(e.data)})),s.current.addEventListener("stop",(function(){if(h.current)h.current=!1;else{o(p);var e=new Blob(u.current,{type:"audio/mp4"});a.current=new x.ZP,a.current.use(j.Z,{getUploadParameters:function(e){return _(e,I)}}),a.current.addFile({data:e}),a.current.upload(),a.current.on("upload-success",(function(e,r){var n=r.uploadURL.split(".com/")[1].split("/")[0];y.current=n,N(n,t,T),o(f)})),a.current.on("upload-error",(function(){return I()}))}})),s.current.start(),o(d),v.current=setTimeout((function(){return A()}),36e5),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error accessing microphone:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[A,t]),A=(0,n.useCallback)((function(){s.current&&l.current&&(s.current.stop(),s.current=null,l.current.getTracks().forEach((function(e){return e.stop()})),l.current=null,u.current=[],clearTimeout(v.current))}),[]),E=(0,n.useCallback)((function(){h.current=!0,A()}),[A]),T=function(){return o(b)},I=function(){return o(m)};return(0,n.useEffect)((function(){return k(),function(){E()}}),[k,E]),{setServerError:T,status:i,isRecording:w,isBusy:S,isError:P,onSubmit:function(){P?i===m?(o(p),a.current.retryAll()):(o(f),N(y.current,t)):A()}}},T=r(43333),I=r(98338),M=r(66422);function L(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=r(85893),U=function(e){var t=e.onClose,r=(0,n.useMemo)((function(){return Math.random().toString(36).slice(2,9)}),[]),i=E({recordingId:r}),s=i.isRecording,c=i.status,u=i.isBusy,d=i.isError,f=i.onSubmit;!function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,i=(0,I.wh)().currentCommunityMember.id,o=(0,M.S)(),a=o.localAttachments,l=o.setLocalAttachments;(0,T.I)(i,(function(e){e.event!==v&&e.event!==h||e.json_message.recording_id!==r||(e.event===v?(l([].concat(L(a),[{url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}])),t()):e.event===h&&n())}))}({onClose:t,recordingId:r,setServerError:i.setServerError});var p=(0,a.t)("tiptap.voice_message.".concat(c));return(0,F.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex h-full w-full items-center justify-center rounded-lg",children:(0,F.jsxs)("div",{className:o()("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":s}),children:[(0,F.jsx)("button",{type:"submit",onClick:t,className:"flex items-center justify-center rounded-full bg-white p-2 dark:bg-gray-600",children:(0,F.jsx)(l.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,F.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,F.jsx)("div",{className:"min-w-[160px]",children:p}),(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,F.jsx)(Z,{isRecording:s})}),(0,F.jsx)(l.JO,{type:"20-microphone",className:o()("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":s})})]})]}),(0,F.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:f,disabled:u,children:u?(0,F.jsx)($.$,{}):(0,F.jsx)(l.JO,{type:d?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},$=r(94272),B=r(58837);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.isRecording,r=X((0,n.useState)(0),2),i=r[0],o=r[1];return(0,n.useEffect)((function(){if(t){var e=setInterval((function(){o((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}}),[t]),(0,F.jsx)("div",{children:(0,B.He)(i)})}},66422:(e,t,r)=>{r.d(t,{T:()=>jr,S:()=>gr});var n=r(64687),i=r.n(n),o=r(67294),a=r(24706),l=r(94184),s=r.n(l),c=r(86013),u=r.n(c),d=r(96486),f=r(41389),p=r(95172),m=r(64797),b=r(17214),v=r(95287),h=r(1881),y=r(20010),g=r(9765),j=r(54032),x=r(85893);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){var t=e.editor,r=(0,j.K)(),n=[{name:"bold",iconType:"20-character-bold",label:(0,c.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,c.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"strike",iconType:"20-character-strike",label:(0,c.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,c.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,c.t)("tiptap.bubble_menu.link"),onClick:function(){return r.show({editor:t})}}];return(0,x.jsx)("div",{children:(0,x.jsx)(a.NM,{editor:t,tippyOptions:{duration:100,arrow:!1,placement:"top",theme:"text-modifiers",animation:"shift-away-subtle",zIndex:1},shouldShow:g.E,children:(0,x.jsx)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-lg border p-1 shadow-sm",children:(0,x.jsx)("div",{children:n.map((function(e){return(0,x.jsx)(y.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isActive:t.isActive(e.name)},e),e.name)}))})})})})},P=r(61960),_=r(18605),N=function(){return(0,x.jsxs)("p",{className:"text-light bg-secondary/90 absolute left-0 top-0 z-20 flex h-full w-full items-center justify-center space-x-2 rounded-lg",children:[(0,x.jsx)(_.JO,{size:20,type:"20-paperclip"}),(0,x.jsx)("span",{children:u().t("tiptap.drag_and_drop_file")})]})},k=r(67937),C=r(30561),D=r(88776),A=r(20336),E=r(35525),T=r(21902),I=r(93582),M=r(51575),L=r(26022),R=r(93237),F=r(4281),U=r(52701),$=r(77567),B=r(51420),X=function(e){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.splitListItem("listItem")},function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]}))},z=B.hj.create({name:"chatKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return X({editor:e})},Enter:function(){return!0}}}}),Z=B.hj.create({name:"commentKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return X({editor:e})},Enter:function(){return X({editor:e})}}}}),H=r(99625),q=r(29662),V=r(5982),W=r(76922),J=r(17237),G=r(98338),K=r(89052),Q=r(44032),Y=r(94281),ee=r(7074),te=r(8246),re=r(81089),ne=r(50732);function ie(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function oe(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le=function(e,t){var r,n=oe(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(Object.prototype.hasOwnProperty.call(i,e)&&!0===i[e])return!0}}catch(o){n.e(o)}finally{n.f()}return!1},se=function(){var e,t=(e=i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatRoomUuid,n=t.messageId,e.prev=1,e.next=4,(0,re.UT)(ne.av.chatRoomMessages.show({uuid:r,id:n}));case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",void 0);case 10:return e.prev=10,e.t0=e.catch(1),console.error("No chat message access",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ie(o,n,i,a,l,"next",e)}function l(e){ie(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();function ce(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=e.node,r=ue((0,o.useState)(!1),2),n=r[0],l=r[1],s=(0,G.N3)(),u=ue((0,h.k)(),2),d=u[0],f=u[1],p=(0,ee.p)(),m=gr(),b=m||p,v=b.sgidToObjectMap,y=void 0===v?{}:v,g=b.localSgidToObjectMap,j=void 0===g?{}:g,O=m.addMessageAttachments,w=m.removeMessageAttachments,S=m.chatRoomAccessArr,P=void 0===S?[]:S,_=m.setShouldShowPrivateMessageConfirmationOnSubmit,N=m.editor,k=j[t.attrs.sgid]||y[t.attrs.sgid],C=(0,K.k)((function(){E()}));if((0,o.useEffect)((function(){return k?(O(k),k.is_private_message&&_(!0)):l(!0),function(){w(k),null!==k&&void 0!==k&&k.is_private_message&&_(!1)}}),[k]),(0,o.useEffect)((function(){if(n){var e=setTimeout((function(){l(!1)}),1e3);return function(){return clearTimeout(e)}}}),[n]),n)return(0,x.jsx)(a.T5,{as:"span",children:(0,x.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("tiptap.extensions.entities.loading")})});if(!k)return(0,x.jsx)(a.T5,{as:"span",children:(0,x.jsx)(Y.T,{interactive:!1,content:(0,c.t)("unavailable_entity_message"),placement:"top",children:(0,x.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("unavailable_entity")})})});var D=k.data,A=k.sender,E=function(){var e,t=(e=i().mark((function e(){var t,r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.length>0,r=!N.isEditable&&!t,n=A.community_member_id===s.id,o=function(){return!!N.isEditable||le(k.id,P)},a=function(){return se({chatRoomUuid:D.chat_room_uuid,messageId:k.id})},!n){e.next=9;break}e.t0=!0,e.next=17;break;case 9:if(!r){e.next=15;break}return e.next=12,a();case 12:e.t1=e.sent,e.next=16;break;case 15:e.t1=o();case 16:e.t0=e.t1;case 17:e.t0?window.open(D.url,"_blank","noreferrer"):f();case 19:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ce(o,n,i,a,l,"next",e)}function l(e){ce(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.T5,{as:"span",children:(0,x.jsx)(Y.T,{interactive:!1,content:D.url,placement:"top",children:(0,x.jsx)("span",{id:"message-link-".concat(D.id),contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",onClick:E,onKeyDown:C,tabIndex:0,role:"button",children:D.label})})}),(0,x.jsx)(Q.c,{isOpen:d,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:f,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,x.jsx)(te.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},pe=r(88767),me=r(24185),be=r(9831),ve=function(e){var t,r,n,i,a,l,s=e.href,c=e.command,u=gr(),d=(0,ee.p)(),f=(u||d).addToLocalSgidToObjectMap,p=(n=(0,me.TH)().pathname.includes("/messages"),i=(0,G.L2)().data,a=(0,be.z)({forEdition:!1}).currentLesson,l=void 0===a?{}:a,{chatRoomUuid:n?null===(r=window.location.pathname)||void 0===r?void 0:r.split("messages/")[1]:(null===i||void 0===i?void 0:i.chat_room_uuid)||(null===l||void 0===l?void 0:l.chat_room_uuid)}).chatRoomUuid,m=(0,pe.useQuery)(ne.av.richTextFields.unfurlURLs({params:{urls:[s],open_chat_room_uuid:p}}),{initialData:[]}).data,b=null!==(t=null===m||void 0===m?void 0:m[0])&&void 0!==t?t:{type:"",sgid:""};return(0,o.useEffect)((function(){b.type&&(f({sgid:b.sgid,object:b}),c(b.sgid))}),[b]),null};ve.displayName="ChatMessagePaste";var he=r(71921),ye=r(88884),ge=function(){var e=gr().editedAt,t=(0,ye.H)(e||new Date),r=t.day,n=t.time;return(0,x.jsx)(a.T5,{as:"span",children:(0,x.jsx)(Y.T,{content:"".concat(r," at ").concat(n),disabled:!e,children:(0,x.jsx)("span",{style:{color:"#717680"},className:"ml-0.5 cursor-default",children:(0,c.t)("edited")})})})},je=B.NB.create({name:"editedlabel",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{default:(0,d.random)()}}},addNodeView:function(){return(0,a.fW)(ge)},addCommands:function(){return{addEditedLabelNode:function(){return function(e){var t=e.commands;return e.editor.isEmpty?t.insertContent({type:"paragraph",content:[{type:"text",text:""},{type:"editedlabel"}]}):t.insertContent({type:"editedlabel"})}}}}});function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}je.displayName="EditedLabelExtension";const Se=B.NB.create({name:"external-video",addOptions:function(){return{inline:!1,HTMLAttributes:{}}},inline:function(){return this.options.inline},group:function(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:function(){return{src:{default:null},title:{default:null},frameborder:{default:"0"},allow:{default:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},allowfullscreen:{default:"allowfullscreen"}}},parseHTML:function(){return[{tag:"iframe[src]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["iframe",(0,B.P1)(this.options.HTMLAttributes,Oe(Oe({},t),{},{class:"video-wrapper"}))]},addCommands:function(){var e=this;return{setExternalVideo:function(t){return function(r){return r.commands.insertContent({type:e.name,attrs:t})}}}}});var Pe=B.hj.create({name:"emojiReplacer",addInputRules:function(){return[(0,B.DS)({find:/-___- $/,replace:"\ud83d\ude11 "}),(0,B.DS)({find:/:'-\) $/,replace:"\ud83d\ude02 "}),(0,B.DS)({find:/':-\) $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/':-D $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/>:-\) $/,replace:"\ud83d\ude06 "}),(0,B.DS)({find:/-__- $/,replace:"\ud83d\ude11 "}),(0,B.DS)({find:/':-\( $/,replace:"\ud83d\ude13 "}),(0,B.DS)({find:/:'-\( $/,replace:"\ud83d\ude22 "}),(0,B.DS)({find:/>:-\( $/,replace:"\ud83d\ude20 "}),(0,B.DS)({find:/O:-\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/0:-3 $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/0:-\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/0;\^\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/O;-\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/0;-\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/O:-3 $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/:'\) $/,replace:"\ud83d\ude02 "}),(0,B.DS)({find:/:-D $/,replace:"\ud83d\ude03 "}),(0,B.DS)({find:/':\) $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/'=\) $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/':D $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/'=D $/,replace:"\ud83d\ude05 "}),(0,B.DS)({find:/>:\) $/,replace:"\ud83d\ude06 "}),(0,B.DS)({find:/>;\) $/,replace:"\ud83d\ude06 "}),(0,B.DS)({find:/>=\) $/,replace:"\ud83d\ude06 "}),(0,B.DS)({find:/;-\) $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/\*-\) $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/;-\] $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/;\^\) $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/B-\) $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/8-\) $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/B-D $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/8-D $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/:-\* $/,replace:"\ud83d\ude18 "}),(0,B.DS)({find:/:\^\* $/,replace:"\ud83d\ude18 "}),(0,B.DS)({find:/:-\) $/,replace:"\ud83d\ude42 "}),(0,B.DS)({find:/-_- $/,replace:"\ud83d\ude11 "}),(0,B.DS)({find:/:-X $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/:-# $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/:-x $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/>.< $/,replace:"\ud83d\ude23 "}),(0,B.DS)({find:/:-O $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/:-o $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/O_O $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/>:O $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/:-P $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:-p $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:-\xde $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:-\xfe $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:-b $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/>:P $/,replace:"\ud83d\ude1c "}),(0,B.DS)({find:/X-P $/,replace:"\ud83d\ude1c "}),(0,B.DS)({find:/x-p $/,replace:"\ud83d\ude1c "}),(0,B.DS)({find:/':\( $/,replace:"\ud83d\ude13 "}),(0,B.DS)({find:/'=\( $/,replace:"\ud83d\ude13 "}),(0,B.DS)({find:/>:\\ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/>:\/ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/:-\/ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/:-. $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/>:\[ $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/:-\( $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/:-\[ $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/:'\( $/,replace:"\ud83d\ude22 "}),(0,B.DS)({find:/;-\( $/,replace:"\ud83d\ude22 "}),(0,B.DS)({find:/#-\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/%-\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/X-\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/>:\( $/,replace:"\ud83d\ude20 "}),(0,B.DS)({find:/0:3 $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/0:\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/O:\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/O=\) $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/O:3 $/,replace:"\ud83d\ude07 "}),(0,B.DS)({find:/<\/3 $/,replace:"\ud83d\udc94 "}),(0,B.DS)({find:/:D $/,replace:"\ud83d\ude03 "}),(0,B.DS)({find:/=D $/,replace:"\ud83d\ude03 "}),(0,B.DS)({find:/;\) $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/\*\) $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/;\] $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/;D $/,replace:"\ud83d\ude09 "}),(0,B.DS)({find:/B\) $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/8\) $/,replace:"\ud83d\ude0e "}),(0,B.DS)({find:/:\* $/,replace:"\ud83d\ude18 "}),(0,B.DS)({find:/=\* $/,replace:"\ud83d\ude18 "}),(0,B.DS)({find:/:\) $/,replace:"\ud83d\ude42 "}),(0,B.DS)({find:/=\] $/,replace:"\ud83d\ude42 "}),(0,B.DS)({find:/=\) $/,replace:"\ud83d\ude42 "}),(0,B.DS)({find:/:\] $/,replace:"\ud83d\ude42 "}),(0,B.DS)({find:/:X $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/:# $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/=X $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/=x $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/:x $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/=# $/,replace:"\ud83d\ude36 "}),(0,B.DS)({find:/:O $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/:o $/,replace:"\ud83d\ude2e "}),(0,B.DS)({find:/:P $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/=P $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:p $/,replace:"\ud83d\ude1b  "}),(0,B.DS)({find:/=p $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:\xde $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:\xfe $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:b $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/d: $/,replace:"\ud83d\ude1b "}),(0,B.DS)({find:/:\/ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/:\\ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/=\/ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/=\\ $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/:L $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/=L $/,replace:"\ud83d\ude15 "}),(0,B.DS)({find:/:\( $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/:\[ $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/=\( $/,replace:"\ud83d\ude1e "}),(0,B.DS)({find:/;\( $/,replace:"\ud83d\ude22 "}),(0,B.DS)({find:/D: $/,replace:"\ud83d\ude28 "}),(0,B.DS)({find:/:\$ $/,replace:"\ud83d\ude33 "}),(0,B.DS)({find:/=\$ $/,replace:"\ud83d\ude33 "}),(0,B.DS)({find:/#\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/%\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/X\) $/,replace:"\ud83d\ude35 "}),(0,B.DS)({find:/:@ $/,replace:"\ud83d\ude20 "}),(0,B.DS)({find:/<3 $/,replace:"\u2764\ufe0f "}),(0,B.DS)({find:/\/shrug $/,replace:"\xaf\\_(\u30c4)_/\xaf"})]}}),_e=r(6811),Ne=r(98122);function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ae=function(e){var t=e.placeholder,r=e.openInternalLinksInCurrentTab,n=e.maxLength,i=void 0===n?null:n,o=e.portalTargetId,l=e.menubarProps,s=e.type,c="comment"==s,u="workflow"==s,d="chat"==s;return[A.Z,L.Z,U.Z,k.ZP,I.ZP,F.ZP,H.a,je,T.Z,c||(0,v.P4)()?Z:z,he.P.configure({openInternalLinksInCurrentTab:r,openOnClick:!1,autolink:!0,validate:function(e){return!(l.dynamicVariables||V.q).map((function(e){return e.label.replace(/{{|}}/g,"")})).some((function(t){return t.includes(e)}))}}),R.Z.configure({placeholder:t,emptyEditorClass:"is-editor-empty"}),Se,Ce({},!u&&(0,Ne.o)(o)),(0,_e.Y)(o),Ce({},d&&B.NB.create({name:"message",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1200,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"chat-message-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["chat-message-react",(0,B.P1)(t)]},addNodeView:function(){return(0,a.fW)(fe)},addProseMirrorPlugins:function(){var e=this.editor,t=this.name;return[new W.Sy({key:new W.H$("chatMessageLinkPaste"),props:{handlePaste:function(r,n){var i=n.clipboardData.getData("text/plain");if(!i.includes("#message_"))return!1;var o=i,l=r.state.selection.ranges[0].$from.pos;e.chain().focus().insertContentAt(l,{type:"text",text:o,marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}).run();var s=new a.M_(ve,{props:{href:o,command:function(r){(0,J.R)({editor:e,range:{from:l,to:l+o.length},name:t,attrs:{sgid:r}}),s.destroy()}},editor:e});return!0}}})]}})),E.Z.extend({addKeyboardShortcuts:function(){return{}}}),Pe,D.Z.configure({limit:i}),C.ZP,M.ZP,q.E.configure({type:s}),(0,$.r)(o)]},Ee=r(81786),Te=r(87834),Ie=r(80382),Me=r(20434),Le=r(55759);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ue=function(e){var t=e.isLight,r=Re((0,o.useState)(!1),2),n=r[0],i=r[1];return(0,x.jsxs)("div",{children:[(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.voice_message.action"),dataTestId:"add_voice_message",children:(0,x.jsx)(Me.o,{type:"submit",onClick:function(){return i(!0)},"aria-label":(0,c.t)("tiptap.voice_message.action"),icon:"20-mic-2",isLight:t,iconClassName:"relative top-[2px] left-[2px]"})}),n&&(0,x.jsx)(Le.KN,{onClose:function(){return i(!1)}})]})},$e=r(86215),Be=r(73935),Xe=r(77294),ze=r(58533),Ze=r(25182),He=r(70755);function qe(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var We=function(e){var t=e.gif,r=e.close,n=gr(),i=n.localAttachments,o=void 0===i?[]:i,a=n.setLocalAttachments;return(0,x.jsx)("button",{type:"submit",onClick:function(){var e="video"===t.type?"video/mp4":"image/gif";a([].concat(qe(o),[{url:t.images.original.url,id:t.id,content_type:e,toUpload:!0,progress:0}])),r()},"aria-label":t.title,children:(0,x.jsx)("img",{loading:"eager",alt:"",width:180,src:t.images.preview_gif.url})})},Je=function(e){var t=e.query,r=e.setQuery;return(0,x.jsx)("div",{className:"p-2 pb-0",children:(0,x.jsx)("input",{type:"text",placeholder:u().t("tiptap.search_giphy"),onChange:function(e){return r(e.target.value)},value:t,className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})};function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qe=function(e){var t=e.close,r=Ge((0,o.useState)(null),2),n=r[0],i=r[1],a=(0,pe.useInfiniteQuery)(["chat-members-search",n],(function(e){var t=e.pageParam,r=void 0===t?1:t;return n?He.y(n,{offset:r,limit:10}):He.q({offset:r,limit:10})}),{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),l=a.data,s=a.fetchNextPage,c=a.hasNextPage,u=a.isLoading,f=(0,o.useMemo)((function(){var e;return(0,d.uniqBy)((0,d.flatten)(null===l||void 0===l||null===(e=l.pages)||void 0===e?void 0:e.map((function(e){return e.data}))),"id")}),[l]);return(0,x.jsxs)("div",{className:"bg-primary border-primary flex w-[360px] flex-col space-y-1 rounded border shadow","data-testid":"giphy-picker",children:[(0,x.jsx)(Je,{query:n,setQuery:i}),(0,x.jsxs)("div",{className:"h-[360px]",children:[!f.length&&(0,x.jsx)("div",{className:"flex h-full items-center justify-center",children:u?(0,x.jsx)(_.JO,{type:"loader"}):(0,x.jsx)("span",{children:I18n.t("tiptap.no_results_found")})}),Boolean(f.length)&&(0,x.jsx)(ze.Z,{dataLength:f.length,next:s,hasMore:c,scrollThreshold:.6,height:360,loader:(0,x.jsx)("div",{className:"col-span-2 flex justify-center py-3",children:(0,x.jsx)(_.JO,{type:"loader"})}),className:"mb-2 p-2",children:(0,x.jsx)(Ze.Z,{columnsCount:2,gutter:8,children:f.map((function(e){return(0,x.jsx)(We,{gif:e,close:t},e.id)}))})})]})]})};function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var it=function(e){var t=e.isLight,r=rt((0,o.useState)(null),2),n=r[0],i=r[1],a=rt((0,o.useState)(null),2),l=a[0],s=a[1],u=(0,Xe.D)(n,l,{placement:"top",modifiers:[{name:"offset",enabled:!0,options:{offset:[80,10]}}]}),d=u.styles,f=u.attributes,p=gr().portalTargetId,m=(0,Ie.D)(p);return(0,x.jsx)($e.J,{className:"relative",children:function(e){var r=e.open,n=e.close;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_gif"),dataTestId:"add_gif_message",children:(0,x.jsx)($e.J.Button,{as:Me.o,ref:i,isLight:t,icon:"20-gif-2","aria-label":(0,c.t)("tiptap.add_gif")})}),r&&(0,Be.createPortal)((0,x.jsx)($e.J.Panel,et(et({static:!0,className:"z-[1060]",ref:s,style:d.popper},f.popper),{},{children:(0,x.jsx)(Qe,{close:n})})),m||document.body)]})}})},ot=function(e){var t=e.editor,r=e.handleSubmit,n=e.openFilePicker,i=e.isUploading,o=e.editorHasNoContent,a=e.isFocused,l=e.isSubmitting,u=e.isUpdate,d=e.isLiveStream,f=void 0!==d&&d,p=e.submitButtonLabel,m=e.submittingLabel,b=e.portalTargetId,v=(0,G.Cc)().record.voice_messages_enabled,h=b?(0,Ie.D)(b):null,y=a||document.getElementById("tiptapMessageTextBox")===document.activeElement||!o();return(0,x.jsxs)("div",{className:s()("flex items-end justify-between",p?"mt-3":"mt-4"),children:[(0,x.jsxs)("div",{className:"flex gap-1",children:[(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_image"),dataTestId:"add_image_message",children:(0,x.jsx)(Me.o,{onClick:n,"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-image-2",isLight:y})}),(0,x.jsx)(Te.c,{portalTo:h,placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).insertContent(" ").run()},targetWrapperClassName:"!flex",target:(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_emoji"),dataTestId:"add_emoji_message",children:(0,x.jsx)(Me.o,{"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-reaction",isLight:y})})}),(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,x.jsx)(Me.o,{onClick:function(){t.chain().focus().insertContent(" #").run()},"aria-label":(0,c.t)("add_entity"),icon:"20-hash",isLight:y})}),(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_mention"),dataTestId:"add_mention_message",children:(0,x.jsx)(Me.o,{onClick:function(){t.chain().focus().insertContent(" @").run()},"aria-label":(0,c.t)("add_mention"),icon:"20-mention",isLight:y})}),(0,x.jsx)(it,{isLight:y}),(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.attach_file"),dataTestId:"add_attachment_message",children:(0,x.jsx)(Me.o,{onClick:n,"aria-label":(0,c.t)("tiptap.attach_file"),icon:"20-attachment",isLight:y})}),v&&!f&&!u&&(0,x.jsx)(Ue,{isLight:y})]}),p?(0,x.jsx)(Ee.z,{type:"submit",variant:"circle",onClick:r,disabled:l||o()||i,small:!0,className:"!px-4",children:l&&m||p}):(0,x.jsx)(Y.T,{placement:"bottom",interactive:!1,content:(0,c.t)("chat_space.send_message"),dataTestId:"submit_button_message",children:(0,x.jsx)(Me.o,{type:"submit",onClick:r,disabled:l||o()||i,id:"tiptap-send","aria-label":(0,c.t)("chat_space.send_message"),icon:i||l?"loader":"20-send",isLight:!o(),shouldAnimateSpin:i||l})})]})},at=r(20107),lt=r(79292),st=r(82964),ct=r(54080),ut=r(56755),dt=r.n(ut),ft=r(88677),pt=function(e){var t=e.attachment;return(0,x.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,x.jsx)("div",{className:"mb-1 flex items-center",children:(0,x.jsx)(ft.V,{content_type:t.content_type})}),(0,x.jsxs)("div",{className:"flex flex-col truncate",children:[(0,x.jsx)("div",{className:"truncate",children:(0,x.jsx)(te.Z.LabelSm,{weight:"semibold",children:t.filename})}),(0,x.jsx)(te.Z.LabelXs,{weight:"regular",children:dt()(t.byte_size)})]})]})},mt=r(11442),bt=function(e){var t=e.queuedForCancellation,r=e.removeCurrentAttachment,n=e.progress,i=e.isUploading;return(0,x.jsxs)("button",{type:"button",onClick:function(e){t.current=!0,r(),e.preventDefault()},className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex h-[22px] w-[22px] cursor-pointer items-center justify-center rounded-full border",children:[i&&(0,x.jsx)("div",{className:"flex items-center group-hover:hidden",children:(0,x.jsx)(mt.D,{percentage:n,size:14,strokeWidth:2})}),(0,x.jsx)(Y.T,{content:u().t("tiptap.remove_attachment"),children:(0,x.jsx)("div",{className:s()({"hidden group-hover:block":i}),children:(0,x.jsx)(_.JO,{type:"close"})})})]})},vt=function(e){var t=e.url;return(0,x.jsx)("button",{type:"submit",className:"from-primary pointer-events-none absolute right-0 -my-2 hidden h-full items-center rounded-md bg-gradient-to-l px-1 pl-36 group-hover:flex",children:(0,x.jsx)("a",{className:"bg-primary pointer-events-auto p-2",href:t,download:!0,target:"_blank",rel:"noreferrer",children:(0,x.jsx)(_.JO,{type:"download"})})})};function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function xt(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){jt(o,n,i,a,l,"next",e)}function l(e){jt(o,n,i,a,l,"throw",e)}a(void 0)}))}}function Ot(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"===typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _t=function(e){var t,r,n,a,l=e.attachmentsForGalleryPreview,u=e.attachment,d=e.index,f=e.shouldShowEnlarged,p=gr(),m=p.editor,b=p.setLocalAttachments,v=p.shouldScrollIntoView,h=(0,st.T)().show,y=wt((0,o.useState)(0),2),g=y[0],j=y[1],O=wt((0,o.useState)(!1),2),w=O[0],S=O[1],P=wt((0,o.useState)(!1),2),_=P[0],N=P[1],k=(0,o.useRef)(!1),C=u.image_variants||{},D=(0,o.useCallback)((function(e){b((function(t){var r=Ot(t);return r[d]=e,r}))}),[d,b]),A=function(){var e=xt(i().mark((function e(t){var r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.filename,o=t.content_type,e.next=3,fetch(r);case 3:return a=e.sent,e.t0=File,e.next=7,a.blob();case 7:return e.t1=e.sent,e.t2=[e.t1],e.t3=n,e.t4={type:o},e.abrupt("return",new e.t0(e.t2,e.t3,e.t4));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=(0,o.useCallback)(xt(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),e.t0=u.file,e.t0){e.next=6;break}return e.next=5,A({url:u.url,filename:"".concat(u.id,".").concat(u.content_type.split("/")[1]),content_type:u.content_type});case 5:e.t0=e.sent;case 6:t=e.t0,new lt.DirectUpload(t,(0,ne.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",(function(t){k.current&&(e.abort(),N(!1)),j(t.loaded/t.total*100)}))}}).create((function(e,t){if(e)throw new Error("Direct upload failed: ".concat(String(e)));var r=(0,ne.Gd)({signed_id:t.signed_id,filename:t.filename});D(yt(yt({},t),{},{url:r,uploaded:!0})),N(!1)}));case 9:case"end":return e.stop()}}),e)}))),[u,D]);(0,o.useEffect)((function(){u.toUpload&&!_&&E()}),[u,_,E]);var T,I,M=at.$.isImage(u.content_type),L=at.$.isAudio(u.content_type)&&Boolean(null===(t=u.metadata)||void 0===t?void 0:t.voice_message),R=(0,at.c)(u.content_type),F=u.url;m.isEditable||(F=f?null!==(T=C.small)&&void 0!==T?T:u.url:null!==(I=C.thumbnail)&&void 0!==I?I:u.url);F=null!==(r=F)&&void 0!==r?r:null===u||void 0===u?void 0:u.url;var U={onLoad:function(){var e;S(!0),v&&((e=document.getElementById("message-scroll-view")).scrollTop=e.scrollHeight)},onError:function(){S(!0)}};return(0,x.jsxs)("button",{type:"button",onClick:function(){return!m.isEditable&&R&&h({attachments:l,startIndex:l.findIndex((function(e){return e.url==u.url}))})},className:s()("relative flex max-w-[264px] cursor-pointer",{"h-[60px] min-w-[150px] px-4 py-2":!M&&!L,"h-[60px] w-[60px]":M&&!f&&!L,"h-[200px] w-auto min-w-[150px]":M&&f&&!L,"border-tertiary bg-tertiary group gap-2 rounded-md border":!L}),children:[m.isEditable&&(0,x.jsx)(bt,{isUploading:_,progress:g,queuedForCancellation:k,removeCurrentAttachment:function(){b((function(e){return e.filter((function(e,t){return t!==d}))}))}}),!R&&!m.isEditable&&!L&&(0,x.jsx)(vt,{url:u.url}),M&&(0,x.jsx)("img",yt({loading:"eager",alt:(0,c.t)("tiptap.attachment_previews.image"),className:s()("rounded-md object-cover",w?"border-primary h-full w-full border":"hidden"),src:F},U)),L&&(0,x.jsx)(ct.z,{src:u.url,type:u.content_type,controls:["play","progress","current-time"],isVoiceMessage:L,transcriptionId:null===(n=u.metadata)||void 0===n?void 0:n.transcript_id,transcriptionPreview:null===(a=u.metadata)||void 0===a?void 0:a.transcript_preview}),!R&&!L&&(0,x.jsx)(pt,{attachment:u})]})},Nt=function(e){var t=e.attachmentsList,r=e.linkMarks,n=gr().editor;if(!t.length)return null;var i=1===t.length,o=0===r.length,a=t.filter((function(e){return(0,at.c)(e.content_type)}));return(0,x.jsx)("div",{className:"flex items-center gap-2",children:t.map((function(e,t){return(0,x.jsx)(_t,{index:t,attachmentsForGalleryPreview:a,attachment:e,shouldShowEnlarged:!n.isEditable&&i&&o},e.filename)}))})},kt=function(e){var t=e.url,r=e.meta,n=t.replace(/(^\w+:|^)\/\//,"");return(0,x.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"border-primary flex min-w-[150px] max-w-[300px] shrink-0 flex-col rounded-md border px-4 py-3 md:max-w-[246px]",children:[(0,x.jsx)("div",{className:"text-dark mb-0.5 truncate text-sm font-medium",children:r.title}),r.description&&(0,x.jsx)("div",{className:"text-light mb-1.5 line-clamp-2 flex-1 text-xs",children:r.description}),(0,x.jsxs)("div",{className:"text-default flex items-center",children:[r.favicon?(0,x.jsx)("img",{loading:"eager",alt:"",src:r.favicon,className:"mr-1.5 h-4 w-4"}):(0,x.jsx)(_.JO,{type:"12-globe",size:12,className:"mr-1 !w-3"}),(0,x.jsx)("div",{className:"flex-1 truncate text-xs",children:n})]})]})},Ct=r(73890),Dt=r(64422);function At(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var It=function(e){var t=e.message,r=(0,G.N3)(),n=Et((0,h.k)(),2),o=n[0],a=n[1],l=gr()||{},s=l.chatRoomAccessArr,u=void 0===s?[]:s,d=l.editor,f=t.sender,p=t.data,m=p.url,b=p.chat_room_uuid,v=p.message_body,y=p.sent_at,g=p.attachments_count,j=void 0===g?0:g,O=t.sender.community_member_id,w=t.id,S=(0,Ct.TF)(y),P=function(){var e,t=(e=i().mark((function e(){var t,n,o,l,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0,n=!d.isEditable&&!t,o=O===r.id,l=function(){return!!d.isEditable||le(w,u)},s=function(){return se({chatRoomUuid:b,messageId:w})},!o){e.next=9;break}e.t0=!0,e.next=17;break;case 9:if(!n){e.next=15;break}return e.next=12,s();case 12:e.t1=e.sent,e.next=16;break;case 15:e.t1=l();case 16:e.t0=e.t1;case 17:e.t0?window.open(m,"_blank","noreferrer"):a();case 19:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){At(o,n,i,a,l,"next",e)}function l(e){At(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),_=(0,K.k)((function(){P()}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{type:"button",onClick:P,onKeyDown:_,className:"border-primary focus-visible:border-secondary flex w-full min-w-[150px] max-w-[300px] shrink-0 cursor-pointer flex-row space-x-3 rounded-md border px-4 py-3 text-left",children:[(0,x.jsx)(Dt.s,{src:f.avatar_url,name:f.name,size:"10"}),(0,x.jsxs)("div",{className:"max-w-[calc(100%-52px)]",children:[(0,x.jsxs)("div",{className:"mb-0.5 flex flex-row space-x-2 truncate",children:[(0,x.jsx)(te.Z.LabelMd,{weight:"semibold",children:f.name}),(0,x.jsx)(te.Z.BodyXs,{color:"text-light",children:S})]}),v&&(0,x.jsx)("div",{className:"text-default mb-1 line-clamp-2 flex-1",children:v}),j>0&&(0,x.jsx)(te.Z.BodySm,{color:"text-light",children:(0,c.t)("bookmarks.attachments_count",{count:j})})]})]}),(0,x.jsx)(Q.c,{isOpen:o,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:a,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,x.jsx)(te.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},Mt=["url"];function Lt(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Rt=function(e){var t=e.linkMarks,r=e.messageAttachments,n=(0,d.uniq)(t.map((function(e){var t;return null===e||void 0===e||null===(t=e.attrs)||void 0===t?void 0:t.href}))),i=(0,pe.useQuery)(ne.av.richTextFields.unfurlURLs({params:{urls:n}}),{enabled:n.length>0,keepPreviousData:!0,initialData:[]}),o=i.data,a=i.isLoading,l=o.filter((function(e){return n.includes(e.url)&&((t=e).title||t.description);var t}));return!l.length&&!r.length||a?null:(0,x.jsxs)("div",{className:"flex flex-wrap gap-2 pb-2",children:[r.map((function(e){return(0,x.jsx)(It,{message:e},e.id)})),l.map((function(e){var t=e.url,r=Lt(e,Mt);return(0,x.jsx)(kt,{url:t,meta:r},t)}))]})};function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zt=function(e){var t=e.editor;try{var r=!1,n=t.getJSON().content.map((function(e){if("paragraph"==e.type){var t,n=null===(t=e.content)||void 0===t?void 0:t.map((function(e){if("text"===e.type&&e.marks){var t=function(e){var t=e.marks,r=!1;return{marks:t.map((function(e){return"link"==e.type&&"_blank"!==e.attrs.target&&"_self"!==e.attrs.target?(r=!0,Ut(Ut({},e),{},{attrs:Ut(Ut({},e.attrs),{},{target:"_blank"})})):e})),isMarkUpdated:r}}({marks:e.marks}),n=t.marks,i=t.isMarkUpdated;return r=r||i,Ut(Ut({},e),{},{marks:n})}return e}));return Ut(Ut({},e),{},{content:n})}return e}));r&&t.commands.setContent(n)}catch(i){console.error("Error while updating link marks",i)}},Zt=function(){var e=gr(),t=e.editor,r=e.attachments,n=void 0===r?[]:r,i=e.localAttachments,o=void 0===i?[]:i,a=e.messageAttachments,l=t.isEditable?o:n,c=function(e){var t=e.editor,r=e.type;try{var n=t.getJSON().content,i=[];return((null===n||void 0===n?void 0:n.filter((function(e){return"paragraph"==e.type})))||[]).forEach((function(e){var t;null===e||void 0===e||null===(t=e.content)||void 0===t||t.forEach((function(e){"hardBreak"!==e.type&&e.marks&&e.marks.forEach((function(e){e.type==r&&(i=[].concat(Bt(i),[e]))}))}))})),i}catch(o){return console.error("Error while fetching marks by type ".concat(r),o),[]}}({editor:t,type:"link"}),u=c.length>0,d=(null===l||void 0===l?void 0:l.length)>0,f=u&&d,p=(null===a||void 0===a?void 0:a.length)>0;return d||u||p?(0,x.jsxs)("div",{className:s()("flex items-center gap-x-2 overflow-x-auto overflow-y-hidden pb-2",t.isEditable?"pt-4":"pt-2"),children:[(0,x.jsx)(Nt,{attachmentsList:l,linkMarks:c}),f&&(0,x.jsx)("div",{className:"border-primary mx-0.5 h-16 w-px rounded-lg border-l-2"}),(0,x.jsx)(Rt,{linkMarks:c,messageAttachments:a})]}):null},Ht={content:[{content:[],type:"paragraph"}],type:"doc"},qt=r(13263),Vt=function(e,t){var r=e.replace().split(/(?:\r\n?|\n)/),n=[];r.forEach((function(e,i){if(e.length>0){var o,a={type:"paragraph",content:[{type:"text",text:e}]};0==(null===(o=r[i+1])||void 0===o?void 0:o.length)&&a.content.push({type:"hardBreak"}),n.push(qt.NB.fromJSON(t.doc.type.schema,a))}}));var i=qt.HY.from(n);return qt.p2.maxOpen(i)};function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=function(e){return"external-video"===e.type},Qt=function(e){var t=e.editor;t.isEmpty||(!function(e){var t=e.editor,r=t.getJSON();if(r.content.some(Kt)){var n=Jt(Jt({},r),{},{content:r.content.filter((function(e){return!Kt(e)}))});t.commands.setContent(n)}}({editor:t}),zt({editor:t}))},Yt=function(e){try{if(!e)return;var t=e.content.map((function(e){if("paragraph"==e.type){var t,r=null===(t=e.content)||void 0===t?void 0:t.filter((function(e){return!("text"===e.type&&""===e.text)}));return Jt(Jt({},e),{},{content:r})}return e}));return Jt(Jt({},e),{},{content:t})}catch(r){console.error("Error while sanitizing jsonContent",r)}},er=r(52792);function tr(e){return function(e){if(Array.isArray(e))return lr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){if(e){if("string"===typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sr=["editorRef","autofocus","disabled","editable","isUpdate","onBlur","onChange","onDelete","onFocus","onSubmit","placeholder","rich_text_body","shouldRefetch","shouldScrollIntoView","showMenuBar","spaceId","submitOnEnter","submitOnModEnter","openInternalLinksInCurrentTab","maxLength","value","className","editorClassName","editedAt","portalTargetId","menuBarComponent","menubarProps","isLiveStream","isChatSpace","type","shouldShowTextModifiersMenu","chatProps","shouldUseFullHeight","shouldResetAfterSubmit","chatRoomAccessArr"];function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach((function(t){dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e){return function(e){if(Array.isArray(e))return vr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||br(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||br(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){if(e){if("string"===typeof e)return vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vr(e,t):void 0}}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var yr=(0,o.createContext)(null);yr.displayName="TipTapEditorContext";var gr=function(){return(0,o.useContext)(yr)},jr=function(e){var t,r,n=e.editorRef,l=e.autofocus,u=void 0!==l&&l,y=e.disabled,g=void 0!==y&&y,j=e.editable,O=void 0===j||j,w=e.isUpdate,_=void 0!==w&&w,k=e.onBlur,C=e.onChange,D=e.onDelete,A=e.onFocus,E=e.onSubmit,T=e.placeholder,I=void 0===T?(0,c.t)("message_placeholder"):T,M=e.rich_text_body,L=void 0===M?{}:M,R=e.shouldRefetch,F=e.shouldScrollIntoView,U=e.showMenuBar,$=void 0===U||U,B=e.spaceId,X=e.submitOnEnter,z=void 0===X||X,Z=e.submitOnModEnter,H=void 0!==Z&&Z,q=e.openInternalLinksInCurrentTab,V=void 0!==q&&q,W=e.maxLength,J=e.value,G=e.className,K=e.editorClassName,Q=e.editedAt,Y=e.portalTargetId,ee=e.menuBarComponent,te=void 0===ee?ot:ee,re=e.menubarProps,ne=void 0===re?{}:re,ie=e.isLiveStream,oe=void 0!==ie&&ie,ae=e.isChatSpace,le=void 0!==ae&&ae,se=e.type,ce=void 0===se?"chat":se,ue=e.shouldShowTextModifiersMenu,de=void 0===ue||ue,fe=e.chatProps,pe=void 0===fe?{isThread:!1,isDirectMessaging:!1,isChatAdminOrModerator:!1,chatParticipantsCount:0,disableGroupMentions:!1,isTyping:!1}:fe,me=e.shouldUseFullHeight,be=void 0!==me&&me,ve=e.shouldResetAfterSubmit,he=void 0===ve||ve,ye=e.chatRoomAccessArr,ge=void 0===ye?[]:ye,je=hr(e,sr),xe=mr((0,h.k)(),2),Oe=xe[0],we=xe[1],Se=mr((0,h.k)(),2),Pe=Se[0],_e=Se[1],Ne=mr((0,o.useState)(!1),2),ke=Ne[0],Ce=Ne[1],De="workflow"===ce,Ee=(O&&De?{body:(null===J||void 0===J?void 0:J.body)||J,sgids_to_object_map:(null===J||void 0===J?void 0:J.localSgidToObjectMap)||{}}:L)||{},Te=Ee.body,Ie=Ee.attachments,Me=void 0===Ie?[]:Ie,Le=Ee.sgids_to_object_map,Re=void 0===Le?{}:Le,Fe=(0,P.O)().arePopupsVisible,Ue=function(e){var t=e.initialValue,r=void 0===t?{}:t,n=or((0,h.k)(!1),3),i=n[0],a=n[2],l=or((0,o.useState)(r),2),s=l[0],c=l[1],u=or((0,o.useState)([]),2),d=u[0],f=u[1];return{isFocused:i,setIsFocused:a,localSgidToObjectMap:s,setLocalSgidToObjectMap:c,addToLocalSgidToObjectMap:function(e){var t=e.sgid,r=e.object;c((function(e){return nr(nr({},e),{},ir({},t,r))}))},messageAttachments:d,setMessageAttachments:f,addMessageAttachments:function(e){f((function(t){return t.some((function(t){return t.id===e.id}))?t:[].concat(tr(t),[e])}))},removeMessageAttachments:function(e){f((function(t){return e?t.filter((function(t){return t.id!==e.id})):t}))}}}({initialValue:_||De?Re:{}}),$e=Ue.isFocused,Be=Ue.setIsFocused,Xe=Ue.localSgidToObjectMap,ze=Ue.addToLocalSgidToObjectMap,Ze=Ue.setLocalSgidToObjectMap,He=Ue.messageAttachments,qe=Ue.addMessageAttachments,Ve=Ue.removeMessageAttachments,We=Ue.setMessageAttachments,Je=(0,o.useRef)(Xe);Je.current=Xe;var Ge=mr((0,o.useState)(!1),2),Ke=Ge[0],Qe=Ge[1],Ye=mr((0,o.useState)(O?Me:[]),2),et=Ye[0],tt=Ye[1],rt=Boolean(Q),nt=(0,d.debounce)((function(e){if((0,d.isFunction)(C)){var t=e.getJSON();C({body:t,localSgidToObjectMap:Je.current})}}),500),it=(0,o.useMemo)((function(){return Yt(De?(null===J||void 0===J?void 0:J.body)||J||Te:J||Te)}),[De,J,Te]),at=(0,a.jE)({editable:O,content:it,onUpdate:function(e){var t=e.editor;Qt({editor:t}),nt(t)},onFocus:function(){Be(!0),(0,d.isFunction)(A)&&A()},onBlur:function(){Be(!1),(0,d.isFunction)(k)&&k()},autofocus:u,extensions:Ae({placeholder:I,openInternalLinksInCurrentTab:V,maxLength:W,portalTargetId:Y,menubarProps:ne,type:ce}),editorProps:{transformPastedHTML:function(e){var t=(0,er.n)(e);return t.length&&(0,er.S)({sgids:t,setLocalSgidToObjectMap:Ze}),e},clipboardTextParser:Vt,attributes:{class:s()(K,"tiptap-editor")}}}),lt=et.some((function(e){return e.progress>=0})),st=function(){return function(e){if(null!==e&&void 0!==e&&e.isEmpty)return!0;var t=null===e||void 0===e?void 0:e.getJSON();if(!t)return!0;var r=(t||{}).content;return!r||!r.some((function(e){var t;if("paragraph"===e.type)return null===(t=e.content)||void 0===t?void 0:t.some((function(e){return"mention"===e.type||"entity"===e.type||"message"===e.type}))}))}(at)&&((null===at||void 0===at?void 0:at.isEmpty)||0===(null===at||void 0===at||null===(e=at.state)||void 0===e||null===(t=e.doc)||void 0===t?void 0:t.textContent.trim().length));var e,t},ct=function(){var e,t=(e=i().mark((function e(){var t,r,n,o,a,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],!((r=st()&&!et.length)&&!_||lt)){e.next=4;break}return e.abrupt("return");case 4:if(!r||!_){e.next=6;break}return e.abrupt("return",null===D||void 0===D?void 0:D());case 6:if(n=Object.values(Xe),o=n.some((function(e){return"group_mention"==e.type})),t||!o){e.next=11;break}return we(),e.abrupt("return");case 11:if(!ke){e.next=14;break}return _e(),e.abrupt("return");case 14:if(!(0,d.isFunction)(E)){e.next=29;break}return a=E({body:st()?Ht:null===at||void 0===at?void 0:at.getJSON(),attachments:et.map((function(e){return e.signed_id})),localAttachments:et,localSgidToObjectMap:Xe}),e.prev=16,Qe(!0),e.next=20,a;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),console.error(e.t0);case 25:return e.prev=25,Qe(!1),he&&(null===at||void 0===at||at.commands.clearContent(),tt([]),Ze({}),We([])),e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[16,22,25,29]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){pr(o,n,i,a,l,"next",e)}function l(e){pr(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),ut=[].concat(fr(H?["cmd+enter, ctrl+enter"]:[]),fr(z?["enter"]:[])).join(", ");(0,p.y1)(ut,(function(){ct()}),{enabled:$e&&(z||H)&&!Fe&&!(0,v.P4)(),enableOnContentEditable:!0},[at,et,Fe,$e,ke]);var dt=function(e){return tt((function(t){return[].concat(fr(t),fr(e.map((function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,byte_size:e.size,content_type:e.type,toUpload:!0,progress:0}}))))}))},ft=(0,f.uI)({onDrop:dt,noClick:!0}),pt=ft.getRootProps,mt=ft.getInputProps,bt=ft.isDragActive,vt=ft.open,ht=mt();if((0,o.useEffect)((function(){R&&at&&at.commands.setContent(it),!O&&rt&&at&&"addEditedLabelNode"in at.commands&&"function"===typeof at.commands.addEditedLabelNode&&setTimeout(at.commands.addEditedLabelNode,0)}),[it,at,R,rt,O]),!at)return null;n&&(n.current=at);var yt={editor:at,sgidToObjectMap:Re,localSgidToObjectMap:Xe,addToLocalSgidToObjectMap:ze,attachments:Me,localAttachments:et,setLocalAttachments:tt,shouldScrollIntoView:F,shouldRefetch:R,spaceId:B,editedAt:Q,portalTargetId:Y,type:ce,chatProps:pe,isUpdate:_,messageAttachments:He,addMessageAttachments:qe,removeMessageAttachments:Ve,chatRoomAccessArr:ge,setShouldShowPrivateMessageConfirmationOnSubmit:Ce},gt=(null===at||void 0===at||null===(t=at.storage)||void 0===t||null===(r=t.characterCount)||void 0===r?void 0:r.characters())||0,jt="".concat(String(gt),"/").concat(String(W)),xt=pe.isTyping;return(0,x.jsxs)(yr.Provider,{value:yt,children:[at.isEditable?(0,x.jsxs)("div",ur(ur(ur({className:s()("bg-primary text-dark relative flex flex-col px-4 py-3 text-sm transition-colors",le?"md:mb-6":"mb-6",{"border-none":bt,"border-light":!st(),"pointer-events-none opacity-50":g||Ke,"border-primary focus-within:border-light active:border-light rounded-lg border border-solid":!be,"!mb-0 h-full":be,"!mb-0":xt},G)},je),pt()),{},{onPaste:function(e){var t,r;if((null===(t=e.clipboardData)||void 0===t||null===(r=t.files)||void 0===r?void 0:r.length)>0){e.preventDefault();var n=Array.from(e.clipboardData.files);dt(n)}},"data-testid":"tiptap-editor",children:[bt&&(0,x.jsx)(N,{}),(0,x.jsx)("input",ur({},ht)),(0,x.jsxs)("div",{className:s()("chat-message-word-wrap cursor-text overflow-auto",be?"h-full":"max-h-[300px]"),children:[(0,x.jsx)(a.kg,{editor:at}),W&&(0,x.jsx)("div",{className:"text-gray-400",children:jt})]}),at&&de&&(0,x.jsx)(S,{editor:at}),(0,x.jsx)(Zt,{}),$&&(0,x.jsx)(te,ur({isSubmitting:Ke,isUploading:lt,openFilePicker:vt,editor:at,handleSubmit:ct,editorHasNoContent:function(){return!_&&(st()&&!et.length)},isFocused:$e,isUpdate:_,isLiveStream:oe,portalTargetId:Y},ne))]})):(0,x.jsxs)(x.Fragment,{children:[!st()&&(0,x.jsx)(a.kg,{editor:at}),!_&&(0,x.jsx)(Zt,{})]}),(0,x.jsx)(m.s,{shouldShowConfirmationModal:Oe,toggleConfirmationModal:we,handleSubmit:ct,chatParticipantsCount:pe.chatParticipantsCount}),Pe&&(0,x.jsx)(b.u,{shouldShowPrivateMessageConfirmationModal:Pe,togglePrivateMessageConfirmationModal:_e,handleSubmit:ct,setShouldShowPrivateMessageConfirmationOnSubmit:Ce,shouldShowPrivateMessageConfirmationOnSubmit:ke})]})}},61960:(e,t,r)=>{r.d(t,{O:()=>n});var n=(0,r(73445).Ue)((function(e){return{arePopupsVisible:!1,setPopupsVisible:function(t){return e({arePopupsVisible:t})}}}))},57290:(e,t,r)=>{r.d(t,{Ln:()=>n,$U:()=>i,H9:()=>o,Om:()=>a,Z9:()=>l,F_:()=>s});var n=function(e){return{body:{type:"doc",content:e.bodyContent},inline_attachments:e.inlineAttachments}},i=function(e){return{type:"text",text:e.text}},o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).content;return{type:"paragraph",content:void 0===e?[]:e}},a=function(e){return{type:"file",attrs:{signed_id:e.file.signed_id}}},l=function(e){var t=e.text;return o({content:[i({text:t})]})},s=function(e){return{type:"mention",attrs:{sgid:e.sgid}}}},20107:(e,t,r)=>{r.d(t,{$:()=>i,c:()=>o});var n=function(e){return e.startsWith("image/")},i={isImage:n,isVideo:function(e){return e.startsWith("video/")},isNativelySupportedVideo:function(e){return["video/mp4","video/mpeg","video/ogg"].includes(e)},isAudio:function(e){return["audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(e)},isPDF:function(e){return e.startsWith("application/pdf")}},o=function(e){return n(e)}},80382:(e,t,r)=>{r.d(t,{D:()=>n});var n=function(e){return(e?document.getElementById(e):null)||document.body}},52792:(e,t,r)=>{r.d(t,{n:()=>d,S:()=>f});var n=r(64687),i=r.n(n),o=r(81089),a=r(50732);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}var d=function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("[data-sgid]");return Array.from(t).map((function(e){return String(e.getAttribute("data-sgid"))}))},f=function(){var e,t=(e=i().mark((function e(t){var r,n,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.sgids,n=t.setLocalSgidToObjectMap,e.prev=1,e.next=4,(0,o.UT)(a.av.richTextFields.fetchSgidRecords({params:{sgids:r}}));case 4:l=e.sent,n((function(e){return s(s({},e),l)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,l,"next",e)}function l(e){u(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},54032:(e,t,r)=>{r.d(t,{K:()=>b});var n=r(67294),i=r(86013),o=r.n(i),a=r(87561),l=r(11049),s=r(81786),c=r(67687),u=r(82177),d=r(85893),f=a.Ry().shape({url:a.Vo((function(e){return e.startsWith("mailto:")?a.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,o().t("link_url_invalid")).required(o().t("link_url_required")):a.Z_().url(o().t("link_url_invalid")).required(o().t("link_url_required"))}))}),p=function(e){var t=e.editor,r=e.isAdminUsageContext,o=void 0!==r&&r,a=(0,l.dd)(),p=t.isActive("link"),m=(0,n.useRef)(null),b=t.getAttributes("link").href;return(0,d.jsxs)(u.u_,{isOpen:a.visible,onClose:a.hide,initialFocus:m,children:[(0,d.jsx)(u.u_.Overlay,{}),(0,d.jsxs)(u.u_.Content,{children:[(0,d.jsxs)(u.u_.Header,{children:[(0,d.jsx)(u.u_.Title,{className:"text-center",size:"md",children:p?(0,i.t)("tiptap.extensions.link.edit"):(0,i.t)("tiptap.extensions.link.add")}),(0,d.jsx)(u.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,d.jsx)(u.u_.CloseButton,{onClick:a.hide})})]}),(0,d.jsxs)(c.l,{onSubmit:function(e){var r=e.url;t.chain().focus().extendMarkRange("link").setLink({href:r}).run(),a.hide()},defaultValues:{url:b},validationSchema:f,autoComplete:"off",children:[(0,d.jsx)(u.u_.Body,{children:(0,d.jsx)(c.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"url",label:(0,i.t)("tiptap.extensions.link.link"),children:(0,d.jsx)(c.l.Input,{ref:m,autoFocus:!0})})}),(0,d.jsxs)(u.u_.Footer,{className:"!px-5 md:!px-8",children:[(0,d.jsx)(s.z,{full:!0,type:"submit",variant:o?"circle":"primary",children:(0,i.t)("tiptap.extensions.link.save")}),p&&(0,d.jsx)("div",{className:"mt-4 flex justify-end",children:(0,d.jsx)(s.z,{full:!0,variant:"secondary",onClick:function(){t.chain().focus().extendMarkRange("link").unsetLink().run(),a.hide()},children:(0,i.t)("tiptap.extensions.link.remove")})})]})]})]})]})},m=l.gk.create((function(e){var t=e.editor,r=e.isAdminUsageContext;return(0,d.jsx)(p,{editor:t,isAdminUsageContext:r})})),b=function(){return(0,l.dd)(m)}},29185:(e,t,r)=>{r.d(t,{t:()=>l});var n=r(67294),i=r(96486);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t=e.optionsCount,r=void 0===t?0:t,a=e.onEnter,l=o((0,n.useState)(0),2),s=l[0],c=l[1];return(0,n.useEffect)((function(){var e=function(e){if(["ArrowDown","ArrowUp","Enter"].includes(e.key)){if("Enter"===e.key&&e.shiftKey)return;switch(e.preventDefault(),e.key){case"ArrowDown":c((s+1)%r);break;case"ArrowUp":c((s-1+r)%r);break;case"Enter":(0,i.isFunction)(a)&&a(s)}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[s,a,r]),{activeIndex:s,setActiveIndex:c}}},10234:(e,t,r)=>{r.d(t,{Y:()=>w});var n=r(67294),i=r(11049),o=r(42991),a=r(38503),l=r(8246),s=r(82177),c=r(87561),u=r(81786),d=r(67687),f=r(54543),p=r(10450),m=r(17755),b=r(23062),v=r(51014),h=r(85893),y="settings.emails.builder",g=c.Ry().shape({label:c.Z_().required((0,o.t)([y,"errors.label_is_required"])),url:c.Z_().transform((function(e,t){return(0,v.R)(t)})).url((0,o.t)([y,"errors.url_is_required"])).required((0,o.t)([y,"errors.url_is_required"])),color:c.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,o.t)([y,"errors.color_is_required"])).required((0,o.t)([y,"errors.color_is_required"]))});function j(e){var t=e.inputRef,r=e.editor,n=e.range,i=e.onClose,a=e.defaultValues;return(0,h.jsxs)(d.l,{defaultValues:a,onSubmit:function(e){r.chain().focus().insertContentAt(n,[{type:"cta",attrs:e},{type:"hardBreak"}]).run(),i()},validationSchema:g,shouldStopPropagation:!0,noValidate:!0,children:[(0,h.jsxs)("div",{className:"flex flex-col pb-4",children:[(0,h.jsx)(m.c,{name:"label",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.label"),required:!0,children:(0,h.jsx)(p.y,{ref:t,name:"label",label:(0,o.t)("email_editor.cta.label"),placeholder:(0,o.t)("email_editor.cta.label"),autocomplete:"off"})}),(0,h.jsx)(m.c,{name:"url",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.url"),required:!0,children:(0,h.jsx)(b.R,{label:(0,o.t)("email_editor.cta.url"),name:"url",autocomplete:"off"})}),(0,h.jsx)(m.c,{name:"color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,o.t)("email_editor.cta.color"),required:!0,children:(0,h.jsx)(f.s,{name:"color"})})]}),(0,h.jsxs)("div",{className:"flex justify-end gap-x-3 pb-5 pt-2.5",children:[(0,h.jsx)(u.z,{type:"button",onClick:i,variant:"secondary-light",children:(0,o.t)("cancel")}),(0,h.jsx)(u.z,{type:"submit",variant:"circle",children:(0,o.t)("email_editor.cta.save")})]})]})}var x=function(e){var t,r=e.editor,c=e.range,u=(0,i.dd)(),d=(0,a.TC)(),f=(0,n.useRef)(null);if(!r)return null;var p,m,b,v,y,g,x=null!==(t=d.brandColor[d.currentAppearance])&&void 0!==t?t:"#000000",O=(p=r.isActive("cta")?r.getAttributes("cta"):{},m=p.label,b=void 0===m?"":m,v=p.url,y=void 0===v?"":v,g=p.color,{label:b,url:y,color:void 0===g?x:g}),w=!!O.label;return(0,h.jsxs)(s.u_,{isOpen:u.visible,onClose:u.remove,initialFocus:f,children:[(0,h.jsx)(s.u_.Overlay,{}),(0,h.jsxs)(s.u_.Content,{children:[(0,h.jsxs)(s.u_.Header,{children:[(0,h.jsx)(s.u_.Title,{size:"sm",children:(0,h.jsx)(l.Z.LabelLg,{weight:"semibold",children:w?(0,o.t)("email_editor.cta.edit_title"):(0,o.t)("email_editor.cta.title")})}),(0,h.jsx)(s.u_.HeaderActions,{children:(0,h.jsx)(s.u_.CloseButton,{onClick:u.remove})})]}),(0,h.jsx)(s.u_.Body,{children:(0,h.jsx)(j,{inputRef:f,range:c,editor:r,onClose:u.remove,defaultValues:O})})]})]})},O=i.gk.create((function(e){var t=e.editor,r=e.range;return(0,h.jsx)(x,{editor:t,range:r})})),w=function(){return(0,i.dd)(O)}},29662:(e,t,r)=>{r.d(t,{E:()=>u});var n=r(51420),i=r(34565),o=r(21081),a=function(){return function(e){var t=e.tr,r=e.state,n=e.dispatch;try{var i=(0,o.GJ)(r.doc,r.selection.$from.pos,-1);return null!==i&&void 0!==i&&(t.join(i,2),n&&n(t),!0)}catch(a){return!1}}};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=i.Z.extend({addCommands:function(){return{joinListItemBackward:a}},addKeyboardShortcuts:function(){var e,t,r=this,i=null===(e=this.parent)||void 0===e?void 0:e.call(this);return(t=this.options)&&"string"===typeof t.type&&"chat"===this.options.type&&(null===i||void 0===i||delete i.Enter),s(s({},i),{},{Backspace:function(){var e;if(r.editor.commands.undoInputRule())return!0;var t,i,o,a,l=r.editor.state.selection.$from.node(),s=0===(null===l||void 0===l||null===(e=l.content)||void 0===e?void 0:e.size);if((0,n.Ig)(r.editor.state,r.name)&&s)return r.editor.commands.lift(r.name),!0;if(t=r.editor.state,i=t.selection,o=i.$from,a=i.$to,o.parentOffset>0||o.pos!==a.pos)return!1;var c=function(e,t){for(var r=t.selection.$from,i=(0,n.jo)(e,t.schema),o=r.depth,a=r.pos,l=null;o>0&&null===l;)r.node(o).type===i?l=o:(o-=1,a-=1);return null===l?null:{$pos:t.doc.resolve(a),depth:l}}(r.name,r.editor.state);if(!c){var u=r.editor.state.doc.resolve(r.editor.state.selection.$from.pos-2).nodeBefore;if((null===u||void 0===u?void 0:u.type.name)===r.name&&s)throw new Error("ListItem error (intentional)");return!1}var d=r.editor.state.doc.resolve(c.$pos.pos-2).node(c.depth),f=function(e,t,r){if(!r)return!1;var i=(0,n.jo)(e,t.schema),o=!1;return r.descendants((function(e){e.type===i&&(o=!0)})),o}(r.name,r.editor.state,d);return!function(e,t){var r,n=t.selection.$anchor,i=t.doc.resolve(n.pos-2);return 0!==i.index()&&(null===(r=i.nodeBefore)||void 0===r?void 0:r.type.name)===e}(r.name,r.editor.state)||f||s?r.editor.chain().liftListItem(r.name).run():r.editor.commands.joinListItemBackward(r.name)}})}})},89050:(e,t,r)=>{r.d(t,{E:()=>m});var n=r(86013),i=r(81786),o=r(67687),a=r(96778),l=r(88767),s=r(11049),c=r(81089),u=r(50732),d=r(69647),f=r(8246),p=r(85893),m=function(e){var t=e.addToLocalSgidToObjectMap,r=e.editor,m=e.range,b=e.inputRef,v=e.provider,h=function(e){var t=e.editor,r=e.range,i=e.addToLocalSgidToObjectMap,o=(0,d.p)(),a=(0,s.dd)();return(0,l.useMutation)((function(e){return(0,c.Cu)(u.av.richTextFields.createOembed({params:{url:e}}))}),{onSuccess:function(e){if(null===e||void 0===e||!e.oembed)return o.error((0,n.t)("courses.edit.lesson.embed_failed"));t.chain().focus().insertContentAt(r,{type:"embed",attrs:{sgid:e.sgid}}).run(),i({sgid:e.sgid,object:e.oembed}),a.remove()},onError:function(e,n){"string"===typeof n&&(t.chain().focus().insertContentAt(r,{type:"paragraph",content:[{type:"text",text:n,marks:[{type:"link",attrs:{href:n,target:"_blank"}}]}]}).run(),a.remove())}})}({addToLocalSgidToObjectMap:t,editor:r,range:m});return(0,p.jsx)(o.l,{onSubmit:function(e){var t=e.url;return h.mutate(t)},defaultValues:{url:""},validationSchema:(0,a.o)({allowUnsupportedURLs:!0}),autoComplete:"off",children:(0,p.jsxs)("div",{className:"mb-6 flex h-full flex-col items-center rounded-md",role:"tabpanel",children:[(0,p.jsx)(o.l.Item,{name:"url",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,className:"!pt-0",placeholder:(0,n.t)("courses.edit.lesson.embed_placeholder"),children:(0,p.jsx)(o.l.Input,{ref:b})}),(0,p.jsxs)("div",{className:"mt-4 text-center",children:[(0,p.jsx)(i.z,{disabled:h.isLoading,type:"submit",variant:"circle",children:h.isLoading?(0,n.t)("courses.edit.lesson.embedding"):(0,n.t)("courses.edit.lesson.embed_media")}),(0,p.jsx)("div",{className:"mt-2",children:v?(0,p.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,n.t)("tiptap.extensions.embed.provider_description.works_with",{provider:v}),(0,p.jsx)("a",{href:"https://embed.ly/providers#service-search",target:"_blank",rel:"noreferrer",children:(0,n.t)("tiptap.extensions.embed.provider_description.providers")})]}):(0,p.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,n.t)("tiptap.extensions.embed.description.start"),(0,p.jsx)("a",{href:"https://embed.ly/providers#service-search",target:"_blank",rel:"noreferrer",children:(0,n.t)("tiptap.extensions.embed.description.providers")}),(0,n.t)("tiptap.extensions.embed.description.end")]})})]})]})})}},48077:(e,t,r)=>{r.d(t,{d:()=>d});var n=r(67294),i=r(86013),o=r(11049),a=r(89050),l=r(82177),s=r(85893),c=function(e){var t=e.editor,r=e.range,c=e.addToLocalSgidToObjectMap,u=e.provider,d=(0,o.dd)(),f=(0,n.useRef)(null);return(0,s.jsxs)(l.u_,{isOpen:d.visible,onClose:d.remove,initialFocus:f,children:[(0,s.jsx)(l.u_.Overlay,{}),(0,s.jsxs)(l.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:[(0,s.jsxs)(l.u_.Header,{children:[(0,s.jsx)(l.u_.Title,{size:"sm",children:u?(0,i.t)("tiptap.extensions.embed.add_provider",{provider:u}):(0,i.t)("tiptap.extensions.embed.add")}),(0,s.jsx)(l.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,s.jsx)(l.u_.CloseButton,{onClick:d.remove})})]}),(0,s.jsx)(l.u_.Body,{children:(0,s.jsx)(a.E,{inputRef:f,addToLocalSgidToObjectMap:c,editor:t,range:r,provider:u})})]})]})},u=o.gk.create((function(e){var t=e.editor,r=e.range,n=e.addToLocalSgidToObjectMap,i=e.provider;return(0,s.jsx)(c,{editor:t,range:r,provider:i,addToLocalSgidToObjectMap:n})})),d=function(){return(0,o.dd)(u)}},96778:(e,t,r)=>{r.d(t,{o:()=>l});var n=r(86013),i=r(87561),o=["youtube.com","youtu.be","vimeo.com","wistia.com","wi.st","typeform.com","videoask.com","loom.com","spotify.com","spoti.fi","simplecast.com","brightcove.com","brightcove.net","bcove.video","bcove.me","panopto.com","panopto.eu"],a=function(e){try{var t=new URL(e).host;return o.some((function(e){return t.includes(e)}))}catch(r){return!1}},l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowUnsupportedURLs,t=void 0!==e&&e,r=(0,n.t)("courses.edit.lesson.embed_invalid_url");return t?i.Ry().shape({url:i.Z_().required(r).url(r)}):i.Ry().shape({url:i.Z_().required(r).url(r).test("supported-url",r,a)})}},54080:(e,t,r)=>{r.d(t,{z:()=>M});var n=r(67294),i=r(94184),o=r.n(i),a=r(21443),l=r.n(a),s=r(98338),c=r(39068),u=r(86215),d=r(86013),f=r(73935),p=r(77294),m=r(8246),b=r(18605),v=r(18216),h=r(99012),y=r(33934),g=r(73560),j=r(13753),x=r(28620),O=r(84546),w=r(75089),S=r(85893),P=function(e){var t=e.toggleFullscreen,r=e.togglePopup,n=e.onSeek,i=e.mediaTranscriptId,o=e.currentTime,a=e.onFullscreenSeek,l=e.renderFullscreenPlayer,s=e.isFullscreen,c="function"===typeof l,u=(0,O.g)(),f=u.containerRef,p=u.shouldAutoScroll,P=(0,w.q)(i).parsedWebvtt.cues,_=Boolean(null===P||void 0===P?void 0:P.length);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"bg-primary ml-2 flex h-72 w-96 flex-col rounded-md p-4 shadow-sm",children:[(0,S.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(b.JO,{type:"16-star-ai",viewBox:"0 0 20 16",className:"mr-1"}),(0,S.jsx)(m.Z.LabelMd,{as:"div",color:"text-dark",weight:"bold",children:(0,d.t)("media_player.transcript")})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[c&&(0,S.jsx)(g.d,{onClick:t}),(0,S.jsx)(h.P,{onClick:r})]})]}),(0,S.jsxs)("div",{className:"grow overflow-auto",ref:f,children:[!_&&(0,S.jsx)(v.b,{}),_&&P.map((function(e,t){return(0,S.jsx)(y.N,{cue:e,isCurrentCue:(0,x.O4)(e,o),shouldScroll:p,onSeek:n},"transcript-".concat(i,"-").concat(t))}))]})]}),c&&_&&(0,S.jsx)(j.n,{isOpen:s,onClose:t,cues:P,onSeek:a,currentTime:o,children:l()})]})};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.mediaTranscriptId,r=e.onSeek,i=e.onFullscreenSeek,o=e.onFullscreenToggle,a=e.renderFullscreenPlayer,l=e.currentTime,s=e.transcriptPreview,c=C((0,n.useState)(!1),2),b=c[0],v=c[1],h=function(){null===o||void 0===o||o(),v(!b)},y=(0,n.useRef)(null),g=C((0,n.useState)(null),2),j=g[0],x=g[1],O=C((0,n.useState)(null),2),w=O[0],_=O[1],k=(0,p.D)(j,w,{placement:"auto-end",modifiers:[{name:"offset",options:{offset:[0,5]}}]}),D=k.styles,A=k.attributes,E=function(){var e;return null===(e=y.current)||void 0===e?void 0:e.click()};return(0,S.jsx)(u.J,{className:"relative",children:function(e){var n=e.open;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("blockquote",{children:[(0,S.jsx)("div",{className:"text-left",children:(0,S.jsx)(m.Z.BodyXs,{as:"div",children:s})}),(0,S.jsx)(u.J.Button,{as:"div",className:"flex",ref:x,children:(0,S.jsx)("button",{type:"button",className:"text-link text-xs hover:underline",ref:y,children:n?(0,d.t)("media_player.hide_transcript"):(0,d.t)("media_player.show_transcript")})})]}),(0,f.createPortal)((0,S.jsx)(u.J.Panel,N(N({as:"div",className:"z-[10000]",ref:_,style:D.popper},A.popper),{},{children:(0,S.jsx)(P,{toggleFullscreen:h,togglePopup:E,onSeek:r,mediaTranscriptId:t,currentTime:l,onFullscreenSeek:i,renderFullscreenPlayer:a,isFullscreen:b})})),document.getElementById("headless-ui-popover-root")||document.body)]})}})},E=function(e){var t=e.transcriptionId,r=e.transcriptionPreview,n=e.audioPlayer;return(0,S.jsxs)("div",{className:"mt-2 flex",children:[(0,S.jsx)("div",{className:"mr-2 h-auto w-1 rounded bg-gray-300"}),(0,S.jsx)(A,{mediaTranscriptId:t,onSeek:function(e){n.currentTime=e,n.play()},transcriptPreview:r})]})};function T(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.src,r=e.type,i=e.controls,a=void 0===i?["play","progress","current-time","mute","volume","settings"]:i,u=e.isVoiceMessage,d=void 0!==u&&u,f=e.transcriptionId,p=e.transcriptionPreview,m=(0,s.wh)().currentCommunityMember,b=(0,c.vb)(m),v=(0,n.useRef)(null),h=b&&!d?[].concat(T(a),["download"]):a;return(0,n.useEffect)((function(){if(v.current){var e=new(l())(v.current,{controls:h,invertTime:!1,speed:{selected:1,options:[.5,1,1.5,2]},storage:{enabled:!1}});return function(){return e.destroy()}}}),[]),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:o()("post-audio-player",{"default mt-2":!d,"voice-message":d}),children:(0,S.jsx)("audio",{ref:v,preload:"none",controls:!0,children:(0,S.jsx)("source",{src:t,type:r})})}),f&&p&&(null===v||void 0===v?void 0:v.current)&&(0,S.jsx)(E,{transcriptionId:f,transcriptionPreview:p,audioPlayer:v.current})]})}},98843:(e,t,r)=>{r.d(t,{Z:()=>x});var n=r(67294),i=r(86013),o=r(96486),a=r(41389),l=r(11049),s=r(18605),c=r(81786),u=r(69647),d=r(8246),f=r(89050),p=r(82177),m=r(6952),b=r(85893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.editor,r=e.range,v=void 0===r?{from:0,to:0}:r,y=e.addToLocalSgidToObjectMap,g=void 0===y?o.noop:y,j=e.type,x=void 0===j?"file":j,O=e.maxFileUploadSize,w=void 0===O?4294967296:O,S=(0,l.dd)(),P=(0,u.p)(),_=(0,n.useCallback)((function(e){var t=e[0];"too-many-files"===t.errors[0].code&&P.error((0,i.t)("tiptap.one_file_limit")),"file-too-large"===t.errors[0].code&&P.error((0,i.t)("tiptap.file_too_large",{size:(0,i.toHumanSize)(w)}))}),[P]),N=(0,a.uI)({onDropAccepted:function(e){t.chain().focus().deleteRange(v).run(),e.forEach((function(e){t.chain().focus().insertContent({type:"file-loader",attrs:{file:e}}).run()})),S.remove()},onDropRejected:_,noClick:!0,multiple:!0,maxSize:w}),k=N.getRootProps,C=N.getInputProps,D=N.open,A="video"===x?(0,i.t)("tiptap.drag_and_drop_any_video"):(0,i.t)("tiptap.drag_and_drop_".concat(x));return(0,b.jsxs)(p.u_,{isOpen:S.visible,onClose:S.remove,children:[(0,b.jsx)(p.u_.Overlay,{}),(0,b.jsxs)(p.u_.Content,{size:"lg",children:[(0,b.jsxs)(p.u_.Header,{children:[(0,b.jsx)(p.u_.Title,{size:"sm",children:(0,i.t)("tiptap.attach_".concat(x))}),(0,b.jsx)(p.u_.HeaderActions,{children:(0,b.jsx)(p.u_.CloseButton,{onClick:S.remove})})]}),(0,b.jsx)(p.u_.Body,{className:"!px-5 md:!px-8",children:(0,b.jsxs)(m.O.Group,{className:"overflow-hidden",children:["video"==x&&(0,b.jsxs)(m.O.List,{className:"border-primary border-b",children:[(0,b.jsx)(m.O,{children:(0,i.t)("tiptap.upload")}),(0,b.jsx)(m.O,{children:(0,i.t)("tiptap.embed_link")})]}),(0,b.jsxs)(m.O.Panels,{children:[(0,b.jsx)(m.O.Panel,{children:(0,b.jsxs)("div",h(h({className:"border-primary mb-6 mt-2 flex min-h-[220px] flex-col items-center justify-center rounded-md border border-dotted"},k()),{},{children:[(0,b.jsx)("input",h({},C())),(0,b.jsx)(s.JO,{size:42,className:"h-[42px] !w-[42px]",type:"new-file-plus"}),(0,b.jsx)("div",{className:"text-dark my-4",children:(0,b.jsx)(d.Z.LabelSm,{weight:"semibold",children:A})}),(0,b.jsx)(c.z,{type:"button",onClick:D,variant:"circle",children:(0,i.t)("tiptap.choose_".concat(x))})]}))}),(0,b.jsx)(m.O.Panel,{className:"px-px py-5",children:(0,b.jsx)(f.E,{addToLocalSgidToObjectMap:g,editor:t,range:v,provider:(0,i.t)("tiptap.extensions.embed.provider_description.top_video_providers")})})]})]})})]})]})},j=l.gk.create((function(e){var t=e.editor,r=e.range,n=e.addToLocalInlineAttachments,i=e.addToLocalSgidToObjectMap,o=e.type,a=e.maxSize;return(0,b.jsx)(g,{editor:t,range:r,type:o,addToLocalInlineAttachments:n,addToLocalSgidToObjectMap:i,maxSize:a})})),x=function(){return(0,l.dd)(j)}},69289:(e,t,r)=>{r.d(t,{d:()=>D});var n=r(11049),i=r(64687),o=r.n(i),a=r(67294),l=r(94184),s=r.n(l),c=r(86013),u=r.n(c),d=r(96486),f=r(82177),p=r(62557),m=r(18605),b=r(13435),v=r(29613),h=r(2002),y=r(6150),g=r(23082),j=r(88604),x=r(8246),O=r(85893);function w(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,l,"next",e)}function l(e){w(o,n,i,a,l,"throw",e)}a(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N=function(e){var t=e.isOpen,r=e.onClose,n=e.onComplete,i=P((0,a.useState)([]),2),l=i[0],c=i[1],w=P((0,a.useState)(0),2),_=w[0],N=w[1],k=P((0,a.useState)(""),2),C=k[0],D=k[1],A=P((0,a.useState)(!1),2),E=A[0],T=A[1],I=P((0,a.useState)(""),2),M=I[0],L=I[1],R=function(e,t,r){T(!1),N(0),n({url:e,signed_id:t,content_type:r})},F=function(){var e=S(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new j.Q(t,R,"","",N).start();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},$=function(){var e=S(o().mark((function e(t){var r,n,i,a,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.id,i=void 0===n?(0,d.uniqueId)():n,e.prev=1,T(!0),e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.blob();case 8:l=e.sent,U(a.headers.get("content-type"))?(s=new File([l],i,{type:"image/jpeg"}),F(s)):(D(u().t("image_upload.invalid_file_type_error")),T(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),D(u().t("image_upload.embed_network_error")),T(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=S(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim().length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g.q.search.getPhotos({query:t.trim(),page:1,perPage:30,orientation:"landscape"});case 4:r=e.sent,(n=r.response.results).length>=1&&c(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){B("wallpapers")}),[]);return(0,O.jsxs)(f.u_,{isOpen:t,onClose:r,className:"editor-modal trix-modal__upload",children:[(0,O.jsx)(f.u_.Overlay,{}),(0,O.jsxs)(f.u_.Content,{className:"relative transition-all duration-200",size:E?"sm":"lg",children:[!E&&(0,O.jsx)("div",{className:"absolute right-4 top-4",children:(0,O.jsx)(f.u_.CloseButton,{onClick:r})}),(0,O.jsx)(f.u_.Body,{children:E?(0,O.jsxs)("div",{className:s()("bg-primary pointer-events-none flex w-full flex-col items-center justify-center py-6"),children:[(0,O.jsx)(m.JO,{type:"loader"}),(0,O.jsx)("div",{className:"mt-2 flex flex-col items-center",children:_?(0,O.jsx)(x.Z.LabelSm,{weight:"medium",children:u().t("image_upload.progress",{progress:_})}):(0,O.jsx)(x.Z.LabelSm,{weight:"medium",children:u().t("image_upload.preparing")})})]}):(0,O.jsxs)(p.m,{defaultValue:u().t("upload"),controlled:!1,children:[(0,O.jsx)("div",{label:u().t("upload"),children:(0,O.jsx)("div",{className:"pb-4",children:(0,O.jsx)(v.p,{imageError:C,insertFiles:function(e){var t=e[0];t&&U(t.type)?(T(!0),D(""),F(t)):D(u().t("image_upload.invalid_file_type_error"))}})})}),(0,O.jsx)("div",{label:(0,O.jsx)(h.$,{}),className:"unsplash-tab",children:(0,O.jsx)(y.A,{unsplashResults:l,searchUnsplash:B,addUnsplash:function(e){return $({url:e.urls.regular,id:e.id})}})}),(0,O.jsx)("div",{label:u().t("image_upload.embed"),children:(0,O.jsx)(b.u,{imageError:C,embedUrl:M,onChangeEmbedUrl:function(e){return L(e.target.value)},addEmbed:function(){return $({url:M})}})})]})})]})]})},k=function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,o=(0,n.dd)();return(0,O.jsx)(N,{onComplete:function(e){var n=e.url,a=e.signed_id,l=e.content_type;i({url:n,signed_id:a,content_type:l}),t.chain().focus().insertContentAt(r,[{type:"image",attrs:{url:n,signed_id:a,content_type:l,width_ratio:1}},{type:"hardBreak"}]).run(),o.remove()},isOpen:o.visible,onClose:o.remove})},C=n.gk.create((function(e){var t=e.editor,r=e.range,n=e.addToLocalInlineAttachments;return(0,O.jsx)(k,{editor:t,range:r,addToLocalInlineAttachments:n})})),D=function(){return(0,n.dd)(C)}},74686:(e,t,r)=>{r.d(t,{S:()=>n});var n=function(){return r.e(6431).then(r.bind(r,6431))}},77567:(e,t,r)=>{r.d(t,{r:()=>T});var n=r(51420),i=r(24706),o=r(16722),a=r(96486),l=r(76922),s=r(79253),c=r(80382),u=r(64687),d=r.n(u),f=r(67294),p=r(43394),m=r(61960),b=r(25782),v=r(74686);function h(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=y((0,f.useState)([]),2),r=t[0],n=t[1];return(0,f.useEffect)((function(){var t=function(){var t,r=(t=d().mark((function t(){var r,i,o,a,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,")"!==e&&"("!==e||(r=":".concat(e)),t.next=4,(0,v.S)();case 4:return i=t.sent,o=i.SearchIndex,t.next=8,o.search(r||"face");case 8:a=t.sent,l=a.filter((function(e){var t,r;return null===e||void 0===e||null===(t=e.skins)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.native})),n(l);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){h(o,n,i,a,l,"next",e)}function l(e){h(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}),[e]),{emojis:r}},x=r(94184),O=r.n(x),w=r(8246),S=r(85893),P=function(e){var t=e.emoji,r=e.index,n=e.isSelected,i=e.setSelectedIndex,o=e.insertEmoji,l=(0,m.O)().setPopupsVisible,s=function(){i(r)};return(0,S.jsxs)("button",{type:"button",tabIndex:0,id:"emoji-".concat(t.id),onClick:function(){o(t),(0,a.defer)((function(){return l(!1)}))},onMouseOver:s,onFocus:s,className:O()("text-light flex w-full cursor-pointer items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":n}),children:[(0,S.jsx)("span",{className:"text-base",children:t.skins[0].native}),(0,S.jsx)("div",{className:"truncate",children:(0,S.jsxs)(w.Z.LabelSm,{children:[":",t.id,":"]})})]},t.id)};function _(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=(0,f.forwardRef)((function(e,t){var r,n,i=e.editor,o=e.range,l=e.query,s=N((0,f.useState)(0),2),c=s[0],u=s[1],h=(0,m.O)().setPopupsVisible;(0,p.M)({options:{onSuccess:(r=d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.S)();case 2:(0,e.sent.init)({data:t});case 5:case"end":return e.stop()}}),e)})),n=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){_(o,n,i,a,l,"next",e)}function l(e){_(o,n,i,a,l,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)})}});var y=j(l).emojis;(0,f.useEffect)((function(){h(!0)}),[h]);var g=function(e){i.chain().focus().deleteRange(o).insertContent(e.skins[0].native).insertContent(" ").run()};return(0,f.useEffect)((function(){var e,t;null===(e=document.getElementById("emoji-".concat(null===(t=y[c])||void 0===t?void 0:t.id)))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),[c,y]),(0,b.h)({selectedIndex:c,setSelectedIndex:u,ref:t,items:y,selectItem:function(e){var t=y[e];g(t)}}),(0,a.isEmpty)(y)?null:(0,S.jsx)("div",{ref:t,className:"border-primary bg-primary relative max-h-[50vh] min-w-[250px] max-w-[300px] overflow-auto rounded border py-1.5 text-sm shadow-md",children:y.map((function(e,t){var r=t===c;return(0,S.jsx)(P,{emoji:e,index:t,setSelectedIndex:u,isSelected:r,insertEmoji:g},e.id)}))})}));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}C.displayName="EmojiPicker";var T=function(e){return n.hj.create({addOptions:function(){var t=(0,c.D)(e||null);return{suggestion:{char:":",pluginKey:new l.H$("emoji"),render:function(){var e,r;return{onStart:function(n){var o,a;e=new i.M_(C,{props:n,editor:n.editor,onClose:null===(o=r)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.hide}),r=(0,s.ZP)("body",{getReferenceClientRect:n.clientRect,appendTo:function(){return t||n.editor.options.element},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(t){e.updateProps(A(A({},t),{},{key:(0,a.uniqueId)()})),t.query&&r[0].show(),r[0].setProps({getReferenceClientRect:t.clientRect})},onKeyDown:function(t){var n;return"Escape"===t.event.key?(r[0].hide(),!0):null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(t)},onExit:function(){var t,n,i;null===(t=r)||void 0===t||null===(n=t[0])||void 0===n||n.hide(),null===(i=e)||void 0===i||i.destroy()}}}}}},addProseMirrorPlugins:function(){return[(0,o.ZP)(A({editor:this.editor},this.options.suggestion))]}})}},54042:(e,t,r)=>{r.d(t,{W:()=>n,v:()=>i});var n=function(e){var t,r,n=e.editor;if(null!==(null===(t=n.state.selection)||void 0===t||null===(r=t.$cursor)||void 0===r?void 0:r.pos)){var i,o,a,l=null===(i=n.state)||void 0===i||null===(o=i.selection)||void 0===o||null===(a=o.$cursor)||void 0===a?void 0:a.pos;if(l>0){var s=Math.max(0,l-1),c=l&&n.state.doc.nodeAt(s);if(c&&null!==c&&void 0!==c&&c.isText)c.textBetween(s,l," ").endsWith(" ")||n.chain().focus().insertContent(" ").run()}}return n.chain().focus().insertContent("/").run()},i=function(e){var t=e.editor.state.selection;return{from:t.from,to:t.to}}},81625:(e,t,r)=>{r.d(t,{o:()=>u});var n=r(76234),i=r(86013),o=r(94281),a=r(87834),l=r(54482),s=r(54042),c=r(85893),u=function(e){var t=e.editor,r=e.portalId,u=e.showImagePickerModal,d=e.showFileUploadModal,f=e.showGiphyPickerModal,p=e.showPollModal,m=e.disabledExtensions;return t&&r?(0,c.jsx)(n.Z,{container:function(){return document.getElementById(r)},children:(0,c.jsxs)("ul",{className:"flex list-none items-center gap-1.5",children:[(0,c.jsx)("li",{children:(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.open_slash_commands_menu"),dataTestId:"open_slash_commands_menu",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",name:"20-add-circle",ariaLabel:(0,i.t)("tiptap.open_slash_commands_menu"),onClick:function(){(0,s.W)({editor:t})}})})}),(0,c.jsx)("li",{children:!m.entities&&(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.add_entity"),name:"20-tiptap-entity",onClick:function(){t.chain().focus().insertContent(" #").run()}})})}),(0,c.jsx)("li",{className:"hidden md:flex",children:(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.attach_file"),dataTestId:"attach_file",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.attach_file"),name:"20-attach",onClick:function(){return d({editor:t,range:(0,s.v)({editor:t})})}})})}),(0,c.jsx)("li",{children:(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.attach_video"),dataTestId:"attach_video",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",name:"20-video",ariaLabel:(0,i.t)("tiptap.attach_video"),onClick:function(){return d({editor:t,range:(0,s.v)({editor:t}),type:"video"})}})})}),(0,c.jsx)("li",{className:"hidden md:flex",children:(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_gif"),dataTestId:"add_gif",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",name:"20-gif",ariaLabel:(0,i.t)("tiptap.add_gif"),onClick:function(){return f({editor:t,range:(0,s.v)({editor:t})})}})})}),(0,c.jsx)("li",{children:(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_image"),dataTestId:"add_image",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.add_image"),onClick:function(){return u({editor:t,range:(0,s.v)({editor:t})})},name:"20-file-image"})})}),!m.emojipicker&&(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_emoji"),dataTestId:"add_emoji",children:(0,c.jsx)(a.c,{placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).run()},as:"li",shouldEmojiPickerRenderAsPortal:!1,targetWrapperClassName:"!flex",target:(0,c.jsx)(l.h,{iconSize:20,ariaLabel:(0,i.t)("tiptap.add_emoji"),iconClassName:"!text-dark",name:"20-emoji"})})}),(0,c.jsx)("li",{children:!m.poll&&(0,c.jsx)(o.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_poll"),dataTestId:"add_poll",children:(0,c.jsx)(l.h,{iconSize:20,iconClassName:"!text-dark",name:"20-editor-poll",ariaLabel:(0,i.t)("tiptap.add_poll"),onClick:function(){return p({editor:t,range:(0,s.v)({editor:t})})}})})})]})}):null}},7074:(e,t,r)=>{r.d(t,{R:()=>Si,p:()=>wi});var n=r(67294),i=r(99734),o=r(67937),a=r(30561),l=r(64330),s=r(20336),c=r(82973),u=r(51358),d=r(38170),f=r(35525),p=r(7490),m=r(50601),b=r(21902),v=r(25748),h=r(93582),y=r(51575),g=r(26022),j=r(93237),x=r(4281),O=r(52701),w=r(90214),S=r(24706),P=r(94184),_=r.n(P),N=r(96486),k=r(4149),C=r(64593),D=r(1881),A=r(6811),E=r(52792),T=r(51420),I=r(56755),M=r.n(I),L=r(86013),R=r.n(L),F=r(88767),U=r(18605),$=r(88677),B=r(11049),X=r(791),z=r(82177),Z=r(85893),H=function(e){var t=e.file,r=(0,B.dd)();return"application/pdf"===t.content_type?(0,Z.jsx)(z.u_,{isOpen:r.visible,onClose:r.remove,children:(0,Z.jsx)(z.u_.Overlay,{children:(0,Z.jsxs)(z.u_.Content,{size:"full",children:[(0,Z.jsxs)(z.u_.Header,{children:[(0,Z.jsx)(z.u_.Title,{size:"sm",children:t.filename}),(0,Z.jsxs)(z.u_.HeaderActions,{children:[(0,Z.jsx)("a",{href:t.url,download:!0,className:"text-dark hover:text-darkest focus:text-dark flex items-center justify-center",children:(0,Z.jsx)(U.JO,{type:"16-download",size:16})}),(0,Z.jsx)(z.u_.CloseButton,{onClick:r.remove})]})]}),(0,Z.jsx)(z.u_.Body,{children:(0,Z.jsx)(X.X,{className:"h-full w-full",src:t.url})})]})})}):null},q=B.gk.create((function(e){var t=e.file;return(0,Z.jsx)(H,{file:t})})),V=r(8246),W=r(50732),J=r(20107),G=r(54080),K=r(3888),Q=function(e){var t,r=e.attachment,n=e.isTranscodingEnabled,i=void 0!==n&&n;return(0,Z.jsx)(S.T5,{as:"div",id:"file-wrapper",children:(0,Z.jsx)(K.T,{src:r.url,type:r.content_type,mediaTranscoding:r.media_transcoding,mediaTranscriptId:r.media_transcript_id,isDownloadable:r.is_downloadable,isTranscodingEnabled:i,poster:null===r||void 0===r||null===(t=r.image_variants)||void 0===t?void 0:t.thumbnail,variants:r.video_variants,signedId:r.signed_id})})},Y=r(42991);function ee(e){var t=e.attachment,r=e.isEditable,n=e.onDelete;return(0,Z.jsx)(S.T5,{as:"div",id:"file-wrapper",children:(0,Z.jsxs)("div",{className:"group relative inline-block pe-4",children:[(0,Z.jsx)("a",{href:t.url,download:!0,target:"_blank",rel:"noreferrer",children:t.filename}),r&&(0,Z.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute right-0 top-0 flex -translate-y-1/2 translate-x-1/2 scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:n,"aria-label":(0,Y.t)("delete"),children:(0,Z.jsx)(U.JO,{type:"close"})})]})})}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function(e){var t,r,n,i=e.node,o=e.editor,a=e.deleteNode,l=o.isEditable,s=(0,B.dd)(q),c=null!==(t=wi())&&void 0!==t?t:{},u=c.localInlineAttachments,d=c.inlineAttachments,f=c.addToLocalInlineAttachments,p=c.shouldPreviewFilesAsLinks,m=null===(r=i.attrs)||void 0===r?void 0:r.signed_id,b=(null===u||void 0===u?void 0:u.find((function(e){return e.signed_id===m})))||(null===d||void 0===d?void 0:d.find((function(e){return e.signed_id===m}))),v=function(e){a(),e.preventDefault(),e.stopPropagation()};if((0,F.useQuery)(W.av.richTextFields.fetchAttachment({signedId:m}),{enabled:!b&&l,retry:!1,retryOnMount:!1,onSuccess:f}).isLoading)return(0,Z.jsx)(S.T5,{as:"div",className:"my-4",children:(0,Z.jsx)(U.JO,{type:"loader",size:16})});if(!b)return null;if(p)return(0,Z.jsx)(ee,{attachment:b,isEditable:l,onDelete:v});var h=J.$.isNativelySupportedVideo(b.content_type),y=J.$.isVideo(b.content_type)&&Boolean(b.media_transcoding),g=h||y,j=J.$.isAudio(b.content_type),x=J.$.isPDF(b.content_type),O=!g&&!j&&!x,w=j?{}:{href:b.url,download:!0};return g?(0,Z.jsx)(Q,{attachment:b,isTranscodingEnabled:y}):(0,Z.jsxs)(S.T5,{as:"div",id:"file-wrapper",className:_()("bg-secondary hover:bg-tertiary border-primary group relative w-full flex-col rounded border px-3 py-2",{"max-w-[350px]":O,"max-w-[500px]":j||x}),children:[l&&(0,Z.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute -right-2.5 -top-2.5 flex scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:v,"aria-label":(0,L.t)("close"),children:(0,Z.jsx)(U.JO,{type:"close"})}),(0,Z.jsxs)("a",re(re({},w),{},{className:"inline-flex items-center space-x-3 truncate",children:[(0,Z.jsx)($.V,{content_type:b.content_type}),(0,Z.jsxs)("div",{className:"flex flex-col truncate",children:[(0,Z.jsx)(V.Z.LabelSm,{weight:"semibold",children:(0,N.truncate)(b.filename,{length:35})}),(0,Z.jsx)(V.Z.LabelXs,{weight:"regular",children:M()(b.byte_size)})]})]})),x&&(0,Z.jsxs)("div",{className:"relative mt-2 flex max-h-[500px] items-center justify-center overflow-hidden",children:[(0,Z.jsx)("button",{type:"button",onClick:function(){s.show({file:b})},className:"absolute left-0 top-0 h-full w-full cursor-zoom-in","aria-label":(0,L.t)("view_attachment")}),(null===(n=b.image_variants)||void 0===n?void 0:n.thumbnail)&&(0,Z.jsx)("img",{loading:"lazy",className:"h-48 w-full object-cover object-top",src:b.image_variants.thumbnail,alt:(0,L.t)("tiptap.pdf_preview")})]}),j&&(0,Z.jsx)(G.z,{src:b.url,type:b.content_type})]})},oe=T.NB.create({name:"file",group:"block",atom:!0,addAttributes:function(){return{signed_id:{default:null}}},parseHTML:function(){return[{tag:"file-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-react",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(ie)}}),ae=r(98843),le=r(77567),se=r(71921),ce=r(98122),ue=r(99625),de=r(54030),fe=r(54042),pe=r(87981),me=function(e){var t=e.isActive,r=void 0!==t&&t,n=e.onClick,i=e.iconType;return(0,Z.jsx)("button",{type:"button",onClick:n,className:_()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":r}),children:(0,Z.jsx)(pe.l,{type:i,iconSize:16})})},be=r(10234),ve=function(e){var t=e.editor,r=e.node,n=e.updateAttributes,i=e.deleteNode,o=(0,be.Y)(),a=(0,de.ef)();return(0,Z.jsx)("div",{className:_()("absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",{invisible:!a}),children:(0,Z.jsxs)("div",{className:"bg-text-editor-modifier flex overflow-hidden rounded-lg p-1 text-sm",children:[(0,Z.jsxs)("div",{className:"flex gap-x-1",children:[(0,Z.jsx)(me,{onClick:function(){n({alignment:"left",full_width:!1})},isActive:"left"==r.attrs.alignment,iconType:"16-image-left"}),(0,Z.jsx)(me,{onClick:function(){n({alignment:"center",full_width:!1})},isActive:"center"==r.attrs.alignment&&!r.attrs.full_width,iconType:"16-image-centre"}),(0,Z.jsx)(me,{onClick:function(){n({alignment:"center",full_width:!0})},isActive:"center"==r.attrs.alignment&&r.attrs.full_width,iconType:"16-image-full-width"}),(0,Z.jsx)(me,{onClick:function(){n({alignment:"right",full_width:!1})},isActive:"right"==r.attrs.alignment,iconType:"16-image-right"})]}),(0,Z.jsx)("span",{className:"m-1 inline-block w-px self-stretch bg-gray-500","aria-hidden":!0}),(0,Z.jsxs)("div",{className:"flex gap-x-1",children:[(0,Z.jsx)(me,{iconType:"16-edit",onClick:function(){return o.show({editor:t,range:(0,fe.v)({editor:t})})}}),(0,Z.jsx)(me,{onClick:i,iconType:"16-trash"})]})]})})},he=function(e){var t=e.editor,r=e.node,n=e.updateAttributes,i=e.deleteNode,o=e.selected,a=t.isEditable;return(0,Z.jsxs)(S.T5,{as:"div",className:_()("group relative my-2 flex items-center rounded-lg border py-4",{"justify-center":"center"===r.attrs.alignment,"justify-start":"left"===r.attrs.alignment,"justify-end":"right"===r.attrs.alignment},{"border-transparent":!a,"hover:border-dark border-transparent":a&&!o,"border-circle":a&&o}),children:[(0,Z.jsx)("a",{style:{backgroundColor:r.attrs.color},className:_()("tiptap-cta focus-visible:!outline-secondary group relative block rounded-full px-6 py-2.5 font-bold !text-white mix-blend-difference transition-opacity hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",r.attrs.full_width?"w-[350px] text-center":"w-auto"),target:"_blank",href:r.attrs.url,rel:"noreferrer",children:r.attrs.label}),a&&(0,Z.jsx)(ve,{editor:t,node:r,updateAttributes:n,deleteNode:i})]})},ye=T.NB.create({name:"cta",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},label:{default:null},color:{default:null},full_width:{default:!1},alignment:{default:"center"}}},parseHTML:function(){return[{tag:"cta-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["cta-react",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(he)}}),ge=T.hj.create({name:"disableModEnter",addKeyboardShortcuts:function(){return{"Mod-Enter":function(){return!0}}}}),je=r(81089);function xe(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var we=(0,r(73445).ZP)((function(e){return{failedLinkEmbeds:[],addFailedLinkEmbed:function(t){e((function(e){return{failedLinkEmbeds:[].concat(xe(e.failedLinkEmbeds),[t])}}))}}})),Se=T.NB.create({name:"embed-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{href:{default:null},text:{default:null}}},parseHTML:function(){return[{tag:"embed-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-loader",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(Pe)},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){var t=we.getState().failedLinkEmbeds,r=e.editor.state;if(r.selection.$from.pos>0){var n=r.doc.resolve(r.selection.$from.pos-1).marks(),i=r.doc.resolve(r.selection.$from.pos).marks();if(n.some((function(e){return"link"===e.type.name}))&&!i.some((function(e){return"link"===e.type.name}))){var o=n.find((function(e){return"link"===e.type.name})),a=o.attrs,l=r.doc.nodeAt(r.selection.$from.pos-1),s=a.href===l.text;return!(t.includes(a.href)||!l||!o||!s)&&(e.editor.chain().focus().setTextSelection(r.selection.$from.pos-1).extendMarkRange("link").deleteSelection().run(),e.editor.view.dispatch(e.editor.view.state.tr.insert(e.editor.view.state.selection.anchor,e.editor.schema.nodes["embed-loader"].create({href:a.href,text:l.text})).setMeta("addToHistory",!1)),!0)}return!1}}}}}),Pe=function(e){var t=e.node,r=e.editor,i=e.HTMLAttributes,o=e.getPos,a=wi().addToLocalSgidToObjectMap,l=we().addFailedLinkEmbed,s=function(){var e=r.state,n=r.view.dispatch,i=o();i&&n(e.tr.delete(i,i+t.nodeSize).setMeta("addToHistory",!1))},c=(0,F.useMutation)((function(e){return(0,je.Cu)(W.av.richTextFields.createOembed({params:{url:e}}))}),{onSuccess:function(e){s(),r.chain().focus().insertContent({type:"embed",attrs:{sgid:e.sgid}}).run(),a({sgid:e.sgid,object:e.oembed})},onError:function(){l(t.attrs.href),s(),r.chain().focus().insertContent({type:"text",text:t.attrs.text,marks:[{type:"link",attrs:{href:t.attrs.href}}]}).run()}}),u=r.isEditable;return(0,n.useEffect)((function(){if(u){var e=t.attrs.href;return c.mutate(e),function(){c.reset()}}}),[]),(0,Z.jsxs)(S.T5,{as:"span",HTMLAttributes:i,children:[(0,Z.jsx)("a",{href:t.attrs.href,className:_()({"pointer-events-none mr-px animate-pulse":u}),target:"_blank",rel:"noopener noreferrer",children:t.attrs.text}),u&&(0,Z.jsx)(U.JO,{type:"loader",className:"mb-[3px]",size:14})]})},_e=r(79717),Ne=r(4524),ke=r(2541),Ce=r(93016);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Me="tiptap.file_upload",Le=T.NB.create({name:"file-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{file:{default:null}}},parseHTML:function(){return[{tag:"file-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-loader",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(Re)}}),Re=function(e){var t=e.node,r=e.editor,i=e.HTMLAttributes,o=e.getPos,a=r.isEditable,l=t.attrs.file,s=wi().addToLocalInlineAttachments,c=function(e){e&&r.view.dispatch(r.state.tr.delete(e,e+t.nodeSize).setMeta("addToHistory",!1))},u=function(e){var t=e.onComplete,r=Te((0,n.useState)("idle"),2),i=r[0],o=r[1],a=Te((0,n.useState)(null),2),l=a[0],s=a[1],c=Te((0,n.useState)(null),2),u=c[0],d=c[1],f=(0,F.useMutation)((function(e){return Ne.O.create({blobSignedId:e.signed_id})}),{onError:function(){s("processing_failed"),o("failed")}}).mutate,p=(0,ke.S)({onUploadStarted:function(){return o("uploading")},onUploadComplete:function(e){if(d(e),J.$.isVideo(e.content_type)&&!J.$.isNativelySupportedVideo(e.content_type))o("processing"),f(e);else{var r=e.signed_id,n=e.filename,i=(0,W.Gd)({signed_id:r,filename:n});t(Ae(Ae({},e),{},{url:i})),o("succeeded")}},onUploadFailed:function(){s("upload_failed"),o("failed")}}),m=p.uppy,b=p.progress;return(0,Ce.k)({enabled:"processing"===i&&Boolean(null===u||void 0===u?void 0:u.signed_id),signedId:null===u||void 0===u?void 0:u.signed_id,onSuccess:function(e){if(u){var r=u.signed_id,n=u.filename,i=(0,W.Gd)({signed_id:r,filename:n});t(Ae(Ae({},u),{},{url:i,media_transcoding:{status:"succeeded"},video_variants:{original:i,hls:e}})),o("succeeded")}},onError:function(){s("processing_failed"),o("failed")}}),{status:i,progress:b,error:l,addFile:(0,n.useCallback)((function(e){o("preparing"),s(null),d(null),m.addFile(e)}),[m]),cancelUpload:(0,n.useCallback)((function(){o("idle"),s(null),d(null),m.cancelAll()}),[m])}}({onComplete:function(e){var t=e.signed_id,n=e.content_type,i=J.$.isImage(n),a=o();s(e),c(a),r.view.dispatch((0,_e.SJ)(r.state.tr.insert(a,r.schema.nodes[i?"image":"file"].create({signed_id:t}))))}}),d=u.status,f=u.progress,p=u.error,m=u.addFile,b=u.cancelUpload,v=l instanceof File;if((0,n.useEffect)((function(){if(a){if(v)return m(l),function(){return b()};var e=o();c(e)}}),[]),!a||!v)return null;return(0,Z.jsx)(S.T5,{as:"div",HTMLAttributes:i,children:(0,Z.jsxs)("div",{className:"bg-secondary border-primary relative my-2 inline-flex w-full space-x-3 rounded border px-3 py-2 md:w-[75%] lg:w-[50%]",children:["failed"===d?(0,Z.jsx)(U.JO,{type:"20-alert",className:"!h-5 !w-5",size:20}):(0,Z.jsx)(U.JO,{type:"loader",className:"animate-spin",size:24}),(0,Z.jsxs)("div",{className:"flex flex-col",children:[(0,Z.jsx)(V.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,N.truncate)(l.name,15)}),(0,Z.jsx)(V.Z.LabelSm,{children:function(){switch(d){case"preparing":return(0,L.t)([Me,"preparing"]);case"uploading":return(0,L.t)([Me,"uploading"],{progress:f.toFixed(0)});case"processing":return(0,L.t)([Me,"processing"]);case"failed":return(0,L.t)([Me,"errors",p]);default:return""}}()})]})]})})},Fe=r(64687),Ue=r.n(Fe),$e=r(58533),Be=r(25182),Xe=r(70755),ze=r(48616),Ze=r(43227),He=r(13288),qe=(0,n.forwardRef)((function(e,t){var r=e.query,n=e.setQuery;return(0,Z.jsx)("div",{className:"py-2",children:(0,Z.jsx)("input",{ref:t,type:"text",placeholder:R().t("tiptap.search_giphy"),onChange:function(e){return n(e.target.value)},value:r,className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})}));function Ve(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}qe.displayName="SearchBox";var Ge=function(e){var t=e.editor,r=e.range,i=void 0===r?{from:0,to:0}:r,o=e.addToLocalInlineAttachments,a=void 0===o?N.noop:o,l=(0,B.dd)(),s=We((0,n.useState)(""),2),c=s[0],u=s[1],d=We((0,n.useState)(!1),2),f=d[0],p=d[1],m=(0,n.useRef)(null),b=(0,F.useInfiniteQuery)(["chat-members-search",c],(function(e){var t=e.pageParam,r=void 0===t?1:t;return c?Xe.y(c,{offset:r,limit:10}):Xe.q({offset:r,limit:10})}),{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),v=b.data,h=b.fetchNextPage,y=b.hasNextPage,g=b.isLoading,j=(0,n.useMemo)((function(){var e;return(0,N.uniqBy)((0,N.flatten)(null===v||void 0===v||null===(e=v.pages)||void 0===e?void 0:e.map((function(e){return e.data}))),"id")}),[v]),x=(0,ze.A)(),O=x.uploadFile,w=x.status,S=x.isError,P=x.response,_=x.progress,k=!S&&"uploading"===w||f,C=function(){var e,t=(e=Ue().mark((function e(t){var r,n,i;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,fetch(t.images.original.url);case 3:return r=e.sent,n="video"==t.type?"video/mp4":"image/gif",e.t0=File,e.next=8,r.blob();case 8:e.t1=e.sent,e.t2=[e.t1],e.t3="".concat(t.id,".").concat(n.split("/")[1]),e.t4={type:n},i=new e.t0(e.t2,e.t3,e.t4),O(i);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ve(o,n,i,a,l,"next",e)}function l(e){Ve(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,n.useEffect)((function(){"uploading"===w&&p(!1),"completed"===w&&P&&function(){if(function(e){return e.signed_id&&e.filename&&e.content_type}(P)){var e=P.signed_id,r=P.filename,n=P.content_type,o=(0,W.Gd)({signed_id:e,filename:r});a({url:o,signed_id:e,content_type:n}),t.chain().focus().insertContentAt(i,[{type:"image",attrs:{url:o,signed_id:e,content_type:n,width_ratio:1}},{type:"hardBreak"}]).run(),l.remove()}}()}),[w,P]),(0,Z.jsxs)(z.u_,{isOpen:l.visible,onClose:l.remove,initialFocus:m,children:[(0,Z.jsx)(z.u_.Overlay,{}),(0,Z.jsxs)(z.u_.Content,{size:"lg",children:[(0,Z.jsxs)(z.u_.Header,{children:[(0,Z.jsx)(z.u_.Title,{size:"sm",children:(0,L.t)("tiptap.add_gif")}),(0,Z.jsx)(z.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,Z.jsx)(z.u_.CloseButton,{onClick:l.remove})})]}),(0,Z.jsx)(z.u_.Body,{children:k?(0,Z.jsx)("div",{className:"bg-primary pointer-events-none flex min-h-[240px] w-full flex-col items-center justify-center py-6",children:(0,Z.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[(0,Z.jsx)(He.a,{center:!0}),_?(0,Z.jsx)(V.Z.LabelSm,{weight:"medium",children:(0,L.t)("tiptap.progress",{progress:_.toFixed(0)})}):(0,Z.jsx)(V.Z.LabelSm,{weight:"medium",children:(0,L.t)("tiptap.preparing")})]})}):(0,Z.jsxs)("div",{className:"bg-primary border-primary flex w-full flex-col space-y-1",children:[(0,Z.jsx)(qe,{ref:m,query:c,setQuery:u}),g&&(0,Z.jsx)(Ze.m,{}),Boolean(j.length)&&(0,Z.jsx)($e.Z,{dataLength:j.length,next:h,hasMore:!!y,scrollThreshold:.6,height:360,loader:(0,Z.jsx)("div",{className:"col-span-3 flex justify-center py-3",children:(0,Z.jsx)(Ze.m,{})}),className:"mb-2 py-2",children:(0,Z.jsx)(Be.Z,{columnsCount:3,gutter:"8",children:j.map((function(e){return(0,Z.jsx)("button",{type:"submit",onClick:function(){return C(e)},"aria-label":e.title,children:(0,Z.jsx)("img",{loading:"lazy",alt:"",className:"rounded",width:180,src:e.images.preview_gif.url})},e.id)}))})})]})})]})]})},Ke=B.gk.create((function(e){var t=e.editor,r=e.range,n=e.addToLocalInlineAttachments;return(0,Z.jsx)(Ge,{editor:t,range:r,addToLocalInlineAttachments:n})})),Qe=r(90789),Ye=r(43535),et=r(98338),tt=r(27025),rt=r(54482),nt=r(95172),it=r(67687),ot=r(94956),at=r(69647);function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ct=function(e){var t=e.sgid,r=e.options,n=void 0===r?{}:r;return(0,F.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryKey:["poll",t],queryFn:function(){return(0,je.UT)(W.av.polls.showBySgid(t))}},n))},ut=r(87536),dt=r(99545),ft=r(25939),pt=r(5359),mt=r(52801),bt=r(87561),vt=function(e){return new Set(e.map((function(e){return e.value.trim()}))).size===e.length},ht={value:""};function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xt=function(e){var t,r,n,i=e.index,o=e.insert,a=e.fields,l=e.remove,s=e.disabled,c=(0,dt.dI)().listeners,u=(0,nt.y1)("enter",(function(e){e.preventDefault(),o(i+1,ht)}),{enabled:a.length<5,enableOnTags:["INPUT"]}),d=(0,ut.cl)({name:"options"}).errors,f=null===d||void 0===d||null===(t=d.options)||void 0===t||null===(r=t[i])||void 0===r||null===(n=r.value)||void 0===n?void 0:n.message;return(0,Z.jsxs)("div",{className:_()("group flex items-center justify-between md:pl-2",{"form-group--has-error":f}),children:[(0,Z.jsx)(mt.h,gt(gt({name:"16-drag-handle",className:"invisible mr-1 hidden cursor-move group-hover:visible md:block"},c),{},{children:(0,Z.jsx)(U.JO,{type:"16-drag-handle",size:16})})),(0,Z.jsx)(it.l.Input,{ref:u,id:"poll_options-".concat(i),name:"poll_options.".concat(i,".value"),placeholder:(0,L.t)("tiptap.extensions.poll.option_placeholder",{number:i+1}),disabled:s}),!s&&(0,Z.jsx)(rt.h,{className:_()("border-primary invisible ml-2 rounded-full border",{"group-hover:visible":a.length>1}),name:"20-close",onClick:function(){a.length>1&&l(i)},iconSize:20,buttonSize:32,ariaLabel:(0,L.t)("close")})]})},Ot=function(){var e=(0,dt.dI)().item;return(0,Z.jsx)("div",{className:"h-auto w-full pl-8 pr-10",children:(0,Z.jsx)("input",{disabled:!0,className:"border-primary bg-tertiary z-50 w-full rounded-md border-2 border-dashed px-4 py-[11px] leading-[1.25]",value:null===e||void 0===e?void 0:e.value})})};function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _t=function(e){var t,r=e.disabled,n=(0,ut.Dq)({name:"poll_options"}),i=n.insert,o=n.fields,a=n.remove,l=n.replace,s=(0,(0,ut.Gc)().watch)("poll_options"),c=o.map((function(e,t){return St(St({},e),s[t])})),u=(0,ut.cl)({name:"poll_options"}).errors;return(0,Z.jsxs)("div",{className:"md:pr-8",children:[(0,Z.jsx)(dt.cm,{shouldUseKeyboardSensor:!1,items:c,onSort:l,lockedVerticalAxis:!0,distance:10,useDragHandle:!0,children:(0,Z.jsxs)(pt.a,{gap:2,className:_()({"mb-2":c.length>=5}),children:[c.map((function(e,t){return(0,Z.jsx)(ft.c,{tabIndex:-1,item:e,disabled:1===c.length||r,placeholder:Ot,dataTestId:"poll-option-item",children:(0,Z.jsx)(xt,{index:t,insert:i,fields:c,remove:a,disabled:r},e.id)},e.id)})),!r&&c.length<5&&(0,Z.jsxs)("button",{type:"button",tabIndex:0,className:"hover:bg-tertiary inline-flex w-fit cursor-pointer items-center space-x-1 rounded-md p-1 pr-1.5 md:ml-8",onClick:function(){return i(c.length,ht)},children:[(0,Z.jsx)(U.JO,{type:"20-plus-v2",size:20}),(0,Z.jsx)("div",{children:(0,Z.jsx)(V.Z.LabelSm,{weight:"medium",children:(0,L.t)("tiptap.extensions.poll.add_option")})})]})]})}),u.poll_options&&(0,Z.jsx)("p",{className:"form-group__error pl-5 md:pl-8",children:null===(t=u.poll_options.message)||void 0===t?void 0:t.toString()})]})},Nt=r(58249),kt=function(){return(0,(0,ut.Gc)().watch)("enable_poll_duration")?(0,Z.jsx)("div",{className:"mt-2",children:(0,Z.jsx)(Nt.x,{datePlaceholder:(0,L.t)("tiptap.extensions.poll.settings.cutoff_date_placeholder"),timePlaceholder:(0,L.t)("tiptap.extensions.poll.settings.cutoff_time_placeholder"),name:"closes_at",minDate:new Date})}):null},Ct=r(81786),Dt=function(e){var t=e.isEdit,r=e.isLoading,n=(0,B.dd)();return(0,Z.jsxs)("footer",{className:"border-primary flex justify-end gap-x-4 border-t px-5 py-4","data-testid":"poll-modal-footer",children:[(0,Z.jsx)(Ct.z,{onClick:n.remove,variant:"secondary",type:"button",children:(0,L.t)("tiptap.extensions.poll.cancel")}),(0,Z.jsx)(Ct.z,{variant:"circle",type:"submit",disabled:r,children:t?(0,L.t)("tiptap.extensions.poll.save"):(0,L.t)("tiptap.extensions.poll.insert")})]})};function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var It=function(e){var t,r=e.initialFocusRef,n=e.onComplete,i=e.isEdit,o=e.pollSgid,a=e.closeModal,l=(0,B.dd)(),s=(0,at.p)().success,c=ct({sgid:o,options:{enabled:!!o&&i}}),u=c.data,d=c.isLoading,f=(0,F.useQueryClient)(),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.useMutation)((function(e){return(0,je.Cu)(W.av.polls.create(),e)}),e)}({onSuccess:function(e){n(e),l.remove()}}),m=p.mutate,b=p.isLoading,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.useMutation)((function(e){return(0,je.aU)(W.av.polls.update(e.id),e)}),e)}({onSuccess:function(e){s((0,L.t)("tiptap.extensions.poll.edit_success")),f.setQueryData(["poll",e.sgid],e),n(e),l.remove()}}),h=v.mutate,y=v.isLoading;(0,nt.y1)("mod+enter",(function(e){e.preventDefault(),e.stopPropagation()}));if(d)return(0,Z.jsx)(Ze.m,{});var g=!i||!(null!==u&&void 0!==u&&null!==(t=u.results)&&void 0!==t&&t.total_responses),j=i?{title:null===u||void 0===u?void 0:u.title,poll_options:null===u||void 0===u?void 0:u.poll_options,allow_members_to_view_results:null===u||void 0===u?void 0:u.allow_members_to_view_results,enable_poll_duration:!(null===u||void 0===u||!u.closes_at),closes_at:null===u||void 0===u?void 0:u.closes_at}:{title:"",poll_options:[ht],allow_members_to_view_results:!0,enable_poll_duration:!1,closes_at:null};return(0,Z.jsxs)(it.l,{onSubmit:function(e){i&&u?h(Et(Et({},e),{},{id:u.id})):m(e)},defaultValues:j,validationSchema:bt.Ry().shape({title:bt.Z_().required((0,L.t)("tiptap.extensions.poll.validation_errors.title_required")),poll_options:bt.IX().of(bt.Ry().shape({value:bt.Z_().required((0,L.t)("tiptap.extensions.poll.validation_errors.option_value_required"))})).min(2,(0,L.t)("tiptap.extensions.poll.validation_errors.options_minimum")).max(5,(0,L.t)("tiptap.extensions.poll.validation_errors.options_maximum",{maximum:5})).test("unique-option-values",(0,L.t)("tiptap.extensions.poll.validation_errors.options_unique"),vt).required((0,L.t)("tiptap.extensions.poll.validation_errors.options_minimum"))}),className:"h-full",formClassName:"h-full flex flex-col mb-0",children:[(0,Z.jsxs)(z.u_.Header,{children:[(0,Z.jsx)(z.u_.Title,{size:"sm",children:(0,L.t)(i?"tiptap.extensions.poll.edit":"tiptap.extensions.poll.title")}),(0,Z.jsx)(z.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-4",children:(0,Z.jsx)(z.u_.CloseButton,{onClick:a})})]}),(0,Z.jsxs)("div",{className:"flex-1 overflow-auto px-5 py-4 md:px-0",children:[(0,Z.jsx)("div",{className:"md:px-8",children:(0,Z.jsx)(it.l.Item,{name:"title",label:(0,L.t)("tiptap.extensions.poll.ask_a_question"),placeholder:(0,L.t)("tiptap.extensions.poll.question_placeholder"),hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,Z.jsx)(it.l.Input,{ref:r})})}),(0,Z.jsx)(it.l.Item,{label:(0,L.t)("tiptap.extensions.poll.options"),hideBorder:!0,hideDescription:!0,tooltipText:g?"":(0,L.t)("tiptap.extensions.poll.cannot_edit_options"),labelWrapperClassName:"md:px-8",children:(0,Z.jsx)(_t,{disabled:!g})}),(0,Z.jsxs)("div",{className:"md:px-8",children:[(0,Z.jsx)("div",{className:"border-primary mt-2 border-b"}),(0,Z.jsx)(ot.l,{fieldId:"",hideBorder:!0,label:(0,L.t)("tiptap.extensions.poll.settings.title")}),(0,Z.jsx)(it.l.Checkbox,{id:"allow_members_to_view_results",name:"allow_members_to_view_results",label:(0,L.t)("tiptap.extensions.poll.settings.allow_members_to_view_results"),description:"",className:"!mt-0"}),(0,Z.jsx)(it.l.Checkbox,{id:"enable_poll_duration",name:"enable_poll_duration",label:(0,L.t)("tiptap.extensions.poll.settings.poll_duration"),rules:{},description:"",className:"!mt-2"}),(0,Z.jsx)(kt,{})]})]}),(0,Z.jsx)(Dt,{isEdit:!0,isLoading:y||b})]})};function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rt=function(e){var t=e.pollSgid,r=(0,B.dd)(),i=(0,n.useRef)(null),o=(0,F.useQueryClient)();return(0,Z.jsxs)(z.u_,{isOpen:r.visible,onClose:r.remove,initialFocus:i,children:[(0,Z.jsx)(z.u_.Overlay,{}),(0,Z.jsx)(z.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,Z.jsx)(It,{isEdit:!0,pollSgid:t,closeModal:r.remove,onComplete:function(){return o.removeQueries(["poll",t])},initialFocusRef:i})})]})},Ft=function(){return(0,B.dd)(B.gk.create((function(e){return(0,Z.jsx)(Rt,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})))},Ut=r(67803),$t=r(76972),Bt=r(69690),Xt=r(11699),zt=r(49546),Zt=r(94281);function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vt=function(e){var t,r=e.poll,i=e.canUndo,o=e.undo,a=r.results&&"total_responses"in r.results,l=Ht((0,n.useState)(),2),s=l[0],c=l[1],u=function(){if(r.closes_at){var e=new Date(r.closes_at),t=new Date,n=(0,Ut.Z)(e,t),i=(0,$t.Z)(e,t)%24,o=(0,Bt.Z)(e,t)%60,a=(0,Xt.Z)(e,t)%60;return n>0?(0,L.t)("tiptap.extensions.poll.days_left",{count:n}):i>0?(0,L.t)("tiptap.extensions.poll.hours_left",{count:i}):o>0?(0,L.t)("tiptap.extensions.poll.minutes_left",{count:o}):a>0?(0,L.t)("tiptap.extensions.poll.seconds_left",{count:a}):(0,L.t)("tiptap.extensions.poll.closed")}};return(0,n.useEffect)((function(){if(r.closes_at&&(c(u()),(0,Bt.Z)(new Date(r.closes_at),new Date)<10)){var e=setInterval((function(){return c(u())}),1e3);return function(){return clearInterval(e)}}}),[]),(0,Z.jsxs)("div",{className:"flex items-center space-x-1","data-testid":"poll-footer",children:[a&&(0,Z.jsx)(V.Z.LabelSm,{weight:"regular","data-testid":"poll-total-votes",children:(0,L.t)("tiptap.extensions.poll.votes",{count:(null===(t=r.results)||void 0===t?void 0:t.total_responses)||0})}),a&&r.closes_at&&(0,Z.jsx)("span",{className:"mx-px",children:(0,L.t)("separator_dot")}),r.closes_at&&(0,Z.jsx)(Zt.T,{className:"flex items-center",content:(0,L.t)("tiptap.extensions.poll.closes_at",{date:(0,zt.default)(new Date(r.closes_at),"MMMM do, yyyy, h:mm a")}),dataTestId:"poll-closes-at",children:(0,Z.jsx)(V.Z.LabelSm,{weight:"regular",children:s})}),i&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("span",{className:"mx-px",children:(0,L.t)("separator_dot")}),(0,Z.jsx)("button",{type:"button",className:"focus:bg-secondary hover:bg-secondary flex items-center rounded px-0.5",onClick:o,children:(0,Z.jsx)(V.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,L.t)("tiptap.extensions.poll.undo")})})]})]})},Wt=function(e){return e.checked?(0,Z.jsx)("div",{className:"border-secondary bg-dark-primary-button my-0.5 flex h-5 w-5 items-center justify-center rounded-full",children:(0,Z.jsx)("div",{className:"bg-primary h-2 w-2 rounded-full"})}):(0,Z.jsx)("div",{className:"border-primary bg-primary my-0.5 h-5 w-5 rounded-full border"})},Jt=r(11552),Gt=r(78599);function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yt=function(e){var t,r=e.pollOptionId,i=e.pollId,o=e.pollValue,a=e.percentage,l=(0,B.dd)(),s=(0,Gt.m)(W.av.polls.voteList({pollId:i,pollOptionId:r,params:{per_page:15}}),{enabled:!!i&&!!r},["poll-vote-list",i,r]),c=s.data,u=s.isLoading,d=s.fetchNextPage,f=s.hasNextPage,p=s.mapPages,m=(0,n.useMemo)((function(){return(0,N.flatten)(p((function(e){return e.records})))}),[p]),b=null===c||void 0===c||null===(t=c.pages[0])||void 0===t?void 0:t.count;return(0,Z.jsxs)(z.u_,{isOpen:l.visible,onClose:l.remove,children:[(0,Z.jsx)(z.u_.Overlay,{}),(0,Z.jsxs)(z.u_.Content,{shouldCloseOnOutsideClick:!0,children:[(0,Z.jsxs)(z.u_.Header,{children:[(0,Z.jsx)(z.u_.Title,{size:"sm",children:o}),(0,Z.jsx)(z.u_.HeaderActions,{children:(0,Z.jsx)(z.u_.CloseButton,{onClick:l.hide})})]}),!u&&(0,Z.jsx)(V.Z.LabelSm,{weight:"regular",children:(0,Z.jsxs)("div",{className:"space-x-1 px-5 pb-4 md:px-8",children:[(0,Z.jsxs)("span",{children:[a,"%"]}),(0,Z.jsx)("span",{children:(0,L.t)("separator_dot")}),(0,Z.jsx)("span",{children:(0,L.t)("tiptap.extensions.poll.votes",{count:b})})]})}),(0,Z.jsx)(z.u_.Body,{id:"post-likes-modal-".concat(i,"-").concat(r),className:"overflow-auto pb-4 pt-0 sm:max-h-80",children:u?(0,Z.jsx)(Ze.m,{}):(0,Z.jsx)($e.Z,{scrollThreshold:.75,next:d,hasMore:f||!1,loader:(0,Z.jsx)(Ze.m,{}),scrollableTarget:"post-likes-modal-".concat(i,"-").concat(r),dataLength:m.length,className:"flex flex-col space-y-4",children:m.map((function(e){return(0,Z.jsx)(Jt.N,{member:e.community_member,hideModal:l.hide},e.id)}))})})]})]})},er=function(){return(0,B.dd)(B.gk.create((function(e){return(0,Z.jsx)(Yt,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})))};function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ir=function(e){var t,r,n,i,o=e.option,a=e.selectedOptionId,l=e.setSelectedOptionId,s=e.canRespond,c=e.poll,u=e.shouldShowResults,d=(0,F.useQueryClient)(),f=er().show,p=(0,F.useMutation)((function(e){return(0,je.Cu)(W.av.polls.respond(c.id),{poll_option_id:e})}),{onSuccess:function(e){(0,N.isEmpty)(e)||d.setQueryData(["poll",c.sgid],(function(t){if(t)return rr(rr({},t),{},{community_member_response_option_id:o.id,results:e})}))}}),m=null!==(t=null===(r=c.results)||void 0===r||null===(n=r.detailed_results)||void 0===n||null===(i=n.find((function(e){return e.poll_option_id===o.id})))||void 0===i?void 0:i.percentage)&&void 0!==t?t:0,b=a===o.id,v="closed"===c.status,h=!s||v||!!a;return(0,Z.jsxs)("div",{className:_()("relative flex w-full items-start overflow-hidden rounded-lg border p-3.5",{"hover:border-dark hover:bg-secondary focus:border-dark group":!h,"border-darkest":b,"border-primary":!b}),"data-testid":"poll-option",children:[(0,Z.jsxs)("button",{type:"button",disabled:h,onClick:function(){s&&l(o.id),p.mutate(o.id)},className:"flex w-full items-start","data-testid":"select-poll-option",children:[u&&(0,Z.jsx)("div",{className:"bg-tertiary absolute inset-y-0 left-0 -z-10 h-full w-full",style:{width:"".concat(m,"%")}}),!v&&(0,Z.jsx)(Wt,{checked:b}),(0,Z.jsx)("div",{className:"ml-3 mr-4 flex-1 text-left",children:(0,Z.jsx)(V.Z.LabelMd,{weight:"regular",children:o.value})})]},o.id),u&&(0,Z.jsxs)("div",{className:"flex shrink-0 items-center space-x-1","data-testid":"poll-option-info",children:[(0,Z.jsxs)(V.Z.LabelSm,{weight:"regular",children:[m,"%"]}),(0,Z.jsx)(rt.h,{ariaLabel:"",name:"16-chevron-right",iconSize:16,onClick:function(){f({pollId:c.id,pollOptionId:o.id,pollValue:o.value,percentage:m})},dataTestId:"open-poll-option-info"})]})]})};function or(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||lr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){if(e){if("string"===typeof e)return sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(e,t):void 0}}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cr=function(e){var t,r,i=e.poll,o=e.isEditable,a=e.deleteNode,l=(0,et.wh)().currentCommunityMember,s=(0,et.L2)().data,c=(0,Qe.Y_)(s),u=(t=(0,at.p)(),{handleExportPollResponses:(r=(0,F.useMutation)({mutationFn:function(e){return(0,je.Cu)(W.av.polls.exportCsv(e))},onSuccess:function(e){t.success((0,L.t)("export_member_csv.message",{email:e.email}))},onError:function(e){t.error(e.message)}})).mutate,isExporting:r.isLoading}),d=u.handleExportPollResponses,f=u.isExporting,p=Ft(),m=ar((0,n.useState)(!i.community_member_response_option_id&&!!l),2),b=m[0],v=m[1],h=ar((0,n.useState)(i.community_member_response_option_id),2),y=h[0],g=h[1],j=ar((0,n.useState)(0),2),x=j[0],O=j[1],w=Boolean(i.results&&"detailed_results"in i.results),S=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options,t=void 0===e?{}:e;return(0,F.useMutation)((function(e){return(0,je.pC)(W.av.polls.undo(e))}),t)}();(0,n.useEffect)((function(){y&&(0,N.delay)((function(){v(!1)}),15e3)}),[y]);var P=Boolean(y&&b&&x<1);return(0,Z.jsx)(Ye.T,{children:(0,Z.jsxs)("div",{className:"border-primary space-y-4 rounded-lg border px-6 py-5","data-testid":"poll-wrapper",children:[(0,Z.jsxs)("div",{className:"text-darkest flex items-start justify-between","data-testid":"poll-header",children:[(0,Z.jsx)(V.Z.TitleSm,{weight:"semibold",children:i.title}),(o||c)&&(0,Z.jsx)(tt.Lt,{direction:"bottom-end",linkType:"button",button:(0,Z.jsx)("div",{children:(0,Z.jsx)(tt.Lt.MenuButton,{children:(0,Z.jsx)(rt.h,{ariaLabel:(0,L.t)("options_dropdown"),name:"16-menu-dots-horizontal"})})}),options:[].concat(or(o?[{label:(0,L.t)("tiptap.extensions.poll.edit"),onClick:function(){return p.show({pollSgid:i.sgid})},value:"edit"},{label:(0,L.t)("tiptap.extensions.poll.remove"),value:"remove",onClick:function(){return a()}}]:[]),or(c?[{label:(0,L.t)("tiptap.extensions.poll.export_responses_csv"),value:"export_csv",onClick:function(){return d(i.id)},isDisabled:f}]:[])),dataTestId:"poll-".concat(i.id,"-").concat(o?"edit":"view","-actions")})]}),(0,Z.jsx)("div",{className:"space-y-3","data-testid":"poll-options",children:i.poll_options.map((function(e){return(0,Z.jsx)(ir,{poll:i,option:e,canRespond:b,selectedOptionId:y,setSelectedOptionId:g,shouldShowResults:w},e.id)}))}),(0,Z.jsx)(Vt,{poll:i,canUndo:P,undo:function(){g(void 0),v(!0),O(x+1),S.mutate(i.id)}})]})})},ur=function(e){var t,r,n=e.node,i=e.editor,o=e.deleteNode,a=ct({sgid:null===(t=n.attrs)||void 0===t?void 0:t.sgid,options:{enabled:!(null===(r=n.attrs)||void 0===r||!r.sgid)}}),l=a.data,s=a.isLoading;return(0,Z.jsx)(S.T5,{as:"div",children:s||!l?(0,Z.jsx)("div",{className:"my-4",children:(0,Z.jsx)(Ze.m,{})}):(0,Z.jsx)(cr,{deleteNode:o,isEditable:i.isEditable,poll:l})})},dr=T.NB.create({name:"poll",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"polls-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["polls-react",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(ur)}});function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mr=function(e){var t=e.editor,r=e.range,i=e.addToLocalSgidToObjectMap,o=(0,B.dd)(),a=(0,n.useRef)(null);return(0,Z.jsxs)(z.u_,{isOpen:o.visible,onClose:o.remove,initialFocus:a,className:"h-full max-h-full overflow-visible",children:[(0,Z.jsx)(z.u_.Overlay,{}),(0,Z.jsx)(z.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,Z.jsx)(It,{closeModal:o.remove,onComplete:function(e){t.chain().focus().insertContentAt(r,[{type:"poll",attrs:{sgid:e.sgid}},{type:"hardBreak"}]).run(),i({sgid:e.sgid,object:e})},initialFocusRef:a})})]})},br=function(){return(0,B.dd)(B.gk.create((function(e){return(0,Z.jsx)(mr,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})))},vr=r(76922);function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gr=function(e){var t=e.types,r=e.node;return r&&(Array.isArray(t)&&t.includes(r.type)||r.type===t)},jr=T.hj.create({name:"trailingNode",addOptions:function(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins:function(){var e=this,t=new vr.H$(this.name),r=Object.entries(this.editor.schema.nodes).map((function(e){return hr(e,2)[1]})).filter((function(t){return e.options.notAfter.includes(t.name)}));return[new vr.Sy({key:t,appendTransaction:function(r,n,i){var o=i.doc,a=i.tr,l=i.schema,s=t.getState(i),c=o.content.size,u=l.nodes[e.options.node];if(s)return a.insert(c,u.create())},state:{init:function(e,t){var n=t.tr.doc.lastChild;return n&&!gr({node:n,types:r})},apply:function(e,t){if(!e.docChanged)return t;var n=e.doc.lastChild;return!gr({node:n,types:r})}}})]}}),xr=r(38503),Or=r(20010),wr=r(9765),Sr=r(54032),Pr=r(25362),_r=r(52205),Nr=r(95089);function kr(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}var Cr=function(){var e=(0,_r.b)(),t=function(){var e,t=(e=Ue().mark((function e(){return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.keys(r).map((function(e){return Pr.ZP.hide(e)})));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){kr(o,n,i,a,l,"next",e)}function l(e){kr(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),r=(0,n.useContext)(Pr.ZP.NiceModalContext);return{openUpgradeModal:function(){e.show({feature:Nr.Kj,onSuccess:t}).catch((function(e){console.error("Error showing Community AI Modal:",e)}))}}},Dr=function(){var e,t=(0,et.wh)(),r=t.currentCommunityMember,n=t.currentCommunity,i=t.isLoading;return{shouldShowCopilot:!i&&Boolean(null===r||void 0===r||null===(e=r.policies)||void 0===e?void 0:e.can_use_copilot),shouldShowPlanUpgradeModal:!i&&!(null!==n&&void 0!==n&&n.community_ai_feature_flag_enabled)&&!(null!==n&&void 0!==n&&n.content_copilot_ui_enabled)&&(null===r||void 0===r?void 0:r.is_admin)}},Ar=function(e){var t=e.editor,r=Cr().openUpgradeModal,n=Dr().shouldShowPlanUpgradeModal;return(0,Z.jsx)("button",{type:"button",onClick:function(){var e,i,o,a;n?r():(e=t.state,i=e.selection.$to.after(),o=e.selection.$from.pos,a=e.selection.$to.pos,t.chain().focus().setHighlight({color:"#B3D8FF"}).run(),t.commands.insertContentAt(i,{type:"aicopilot",attrs:{placeholder:(0,L.t)("tiptap.extensions.ai_copilot.input.edit_placeholder"),range:{from:o,to:a}}}))},className:"text-dark hover:bg-secondary rounded-md p-1.5 pr-2 transition-colors",children:(0,Z.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,Z.jsx)(U.JO,{type:"16-ask-ai-gradient",size:16}),(0,Z.jsx)(V.Z.LabelSm,{weight:"medium",color:"from-ai-start to-ai-end bg-gradient-to-r bg-clip-text text-transparent",children:(0,L.t)("tiptap.bubble_menu.ai_copilot")})]})})};function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=function(e){var t=e.editor,r=e.shouldShowCopilot,n=void 0!==r&&r,i=e.showListsInTextModifierMenu,o=void 0!==i&&i,a=e.placement,l=void 0===a?"top":a,s=e.headingLevels,c=(0,Sr.K)(),u=(0,xr.ww)().isAdminUsageContext,d=[{name:"bold",iconType:"20-character-bold",label:(0,L.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,L.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"h1",iconType:"16-heading1",label:(0,L.t)("tiptap.bubble_menu.h1"),onClick:function(){return t.chain().focus().toggleHeading({level:1}).run()},isActiveFn:function(){return t.isActive("heading",{level:1})}},{name:"h2",iconType:"20-character-h2",label:(0,L.t)("tiptap.bubble_menu.h2"),onClick:function(){return t.chain().focus().toggleHeading({level:2}).run()},isActiveFn:function(){return t.isActive("heading",{level:2})}},{name:"h3",iconType:"20-character-h3",label:(0,L.t)("tiptap.bubble_menu.h3"),onClick:function(){return t.chain().focus().toggleHeading({level:3}).run()},isActiveFn:function(){return t.isActive("heading",{level:3})}},{name:"strike",iconType:"20-character-strike",label:(0,L.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,L.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,L.t)("tiptap.bubble_menu.link"),onClick:function(){return c.show({editor:t,isAdminUsageContext:u})}},{name:"bullet_list",iconType:"16-editor-ul",label:(0,L.t)("tiptap.bubble_menu.bullet_list"),onClick:function(){return t.chain().focus().toggleBulletList().run()}},{name:"ordered_list",iconType:"16-editor-ol",label:(0,L.t)("tiptap.bubble_menu.ordered_list"),onClick:function(){return t.chain().focus().toggleOrderedList().run()}}].filter((function(e){return!("h1"===e.name&&!s.includes(1))&&(!("h2"===e.name&&!s.includes(2))&&(!("bullet_list"===e.name&&!o)&&(!("ordered_list"===e.name&&!o)&&!("h3"===e.name&&!s.includes(3)))))}));return(0,Z.jsx)(S.NM,{editor:t,tippyOptions:{duration:100,arrow:!1,placement:l,theme:"text-modifiers",animation:"shift-away-subtle",maxWidth:"none"},shouldShow:wr.E,children:(0,Z.jsxs)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-lg border p-1 shadow-sm",children:[n&&(0,Z.jsx)(Ar,{editor:t}),(0,Z.jsx)("div",{children:d.map((function(e){return(0,Z.jsx)(Or.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isActive:(0,N.isFunction)(e.isActiveFn)?e.isActiveFn():t.isActive(e.name)},e),e.name)}))})]})})};function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rr=(0,n.createContext)({});Rr.displayName="AiBlockContext";var Fr=function(){return(0,n.useContext)(Rr)},Ur=function(e){var t=e.children,r=e.editor,i=e.node,o=e.getPos,a=e.deleteNode,l=i.attrs.range,s=Mr((0,n.useState)(!1),2),c=s[0],u=s[1],d={editor:r,node:i,getPos:o,deleteNode:a,isLoadingResponse:c,setIsLoadingResponse:u,cleanupNode:function(){l&&(r.commands.setTextSelection({from:0,to:r.state.doc.content.size}),r.chain().focus().unsetHighlight().run()),r.commands.setTextSelection(o()+1),a()}};return(0,Z.jsx)(Rr.Provider,{value:d,children:t})},$r=function(e){var t=e.children,r=(0,n.useRef)(null),i=Fr(),o=i.isLoadingResponse,a=i.cleanupNode;return(0,nt.y1)("esc",a,{enableOnTags:["INPUT"],enableOnContentEditable:!0,enabled:!o}),(0,n.useEffect)((function(){var e=function(e){if(o)return e.preventDefault(),void e.stopPropagation();r.current&&!r.current.contains(e.target)&&a()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[o,a]),(0,Z.jsx)("div",{ref:r,children:t})},Br=r(82248),Xr=["className"];function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var qr=(0,n.forwardRef)((function(e,t){var r=e.className,n=Hr(e,Xr);return(0,Z.jsx)(Br.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){Zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ref:t,autoComplete:"off",minRows:1,maxRows:3,type:"text",className:_()("text-dark placeholder:text-default w-full resize-none border-0 bg-transparent p-0 leading-5 outline-none focus:ring-0",r)},n))}));qr.displayName="Input";function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gr=function(e){var t=e.children,r=e.className;return(0,Z.jsx)("div",{className:_()("bg-primary flex items-start gap-3 rounded-md px-4 py-2.5 shadow-md",r),children:t})};Gr.AiIcon=function(){return(0,Z.jsx)("span",{className:"flex items-start",children:(0,Z.jsx)(U.JO,{type:"20-ask-ai-gradient",size:20,className:"h-5 w-5"})})},Gr.Input=qr,Gr.LoadingIcon=function(){return(0,Z.jsx)("span",{className:"flex animate-spin items-center overflow-hidden",children:(0,Z.jsx)(U.JO,{type:"20-stardust-gradient",size:20,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})})},Gr.Text=function(e){var t=e.hasGradient,r=e.children;return(0,Z.jsx)(V.Z.LabelMd,Wr(Wr({weight:"medium"},t&&{color:"text-transparent bg-clip-text bg-gradient-to-r from-ai-start to-ai-end"}),{},{children:r}))},Gr.EditOptions=function(e){var t=e.options,r=e.onClick,i=e.activeIndex,o=e.setActiveIndex,a=e.shouldShowEnterIcon,l=(0,n.useRef)(null);return(0,n.useEffect)((function(){l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[i]),(0,Z.jsxs)("div",{className:"bg-primary text-dark border-primary absolute top-full mt-1 max-h-80 w-80 overflow-auto rounded-lg border p-2 shadow-xl",children:[(0,Z.jsx)("div",{className:"px-4 py-0.5",children:(0,Z.jsx)(V.Z.LabelXxs,{color:"text-light",weight:"semibold",children:(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.title")})}),t.map((function(e,t){var n=function(){return o(t)};return(0,Z.jsxs)("button",{ref:t===i?l:null,type:"button",onMouseOver:n,onFocus:n,className:_()("text-default hover:text-dark flex w-full items-center gap-2 rounded-md px-4 py-2 text-left text-sm font-normal transition-colors",{"bg-secondary":t===i}),onClick:function(){return r({item:e,index:t})},children:[(0,Z.jsx)("span",{className:"flex items-center",children:(0,Z.jsx)(U.JO,{type:"16-thunder",className:"!h-4 !w-4",size:16})}),(0,Z.jsx)("span",{className:"text-dark",children:e.label}),t===i&&a&&(0,Z.jsx)("span",{className:"ml-auto flex items-center",children:(0,Z.jsx)(U.JO,{type:"16-arrow-enter",className:"!h-4 !w-4",size:16})})]},e.label)}))]})};var Kr=function(){return(0,Z.jsxs)(Gr,{children:[(0,Z.jsx)(Gr.LoadingIcon,{}),(0,Z.jsx)(Gr.Text,{hasGradient:!0,children:(0,L.t)("tiptap.extensions.ai_copilot.input.generating")})]})},Qr={HELP_WRITE:"help_write",SUGGEST_IDEA:"suggest_ideas",CONCLUSION:"conclusion",OUTLINE:"outline"},Yr=24,en=r(41390);function tn(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var on=function(){var e=rn((0,D.k)(!1),2),t=e[0],r=e[1],n=function(){var e,t=(e=Ue().mark((function e(t){var n,i,o,a,l,s,c,u;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,i=t.previous_text,o=void 0===i?"":i,a=t.user_prompt,l=t.title,s=t.onOpen,c=t.onMessage,u=t.onClose,r(!0),e.next=4,(0,en.L)("/internal_api/copilot/completions",{method:"POST",body:JSON.stringify({context:{title:l,previous_text:o,type:n,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?s():e.status>=400&&e.status<500&&429!==e.status&&r(!1)},onmessage:function(e){var t=JSON.parse(e.data);c(t.content)},onclose:function(){r(!1),u()},onerror:function(e){throw r(!1),e}});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){tn(o,n,i,a,l,"next",e)}function l(e){tn(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{createCompletion:n,isLoading:t}},an=r(50308),ln=r.n(an),sn=r(64717),cn=function(e){var t=e.isLoading,r=(0,et.Zh)().setIsSubmitEnabled,i=void 0===r?ln():r,o=(0,sn.D)().setIsSubmitEnabled,a=void 0===o?ln():o;(0,n.useEffect)((function(){i(!t),a(!t)}),[t,i,a])},un=r(29185),dn=[{label:(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.completions.suggest_ideas.label"),value:"suggest_ideas"},{label:(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.completions.outline.label"),value:"outline"},{label:(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.completions.paragraph.label"),value:"paragraph"},{label:(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.completions.conclusion.label"),value:"conclusion"}],fn=function(e){var t=e.onClick,r=(0,un.t)({optionsCount:dn.length,onEnter:function(e){t(dn[e].value,(0,L.t)("tiptap.extensions.ai_copilot.prompt_options.completions.".concat(dn[e].value,".prompt_prefix")))}}),n=r.activeIndex,i=r.setActiveIndex;return(0,Z.jsx)(Gr.EditOptions,{activeIndex:n,setActiveIndex:i,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:dn,shouldShowEnterIcon:!0})};function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bn=function(){var e,t,r=pn((0,n.useState)(""),2),i=r[0],o=r[1],a=pn((0,n.useState)(!1),2),l=a[0],s=a[1],c=(0,n.useRef)(null),u=on(),d=u.createCompletion,f=u.isLoading,p=wi().aiCopilotTitle,m=Fr(),b=m.editor,v=m.node,h=m.getPos,y=m.setIsLoadingResponse,g=pn((0,n.useState)(Qr.HELP_WRITE),2),j=g[0],x=g[1];cn({isLoading:f}),(0,n.useEffect)((function(){c.current.focus()}),[]),(0,n.useEffect)((function(){y(f)}),[f,y]);var O=function(e){e.stopPropagation(),e.preventDefault(),i&&!l&&(s(!0),d({type:j,title:p,user_prompt:i,previous_text:b.state.doc.textBetween(0,h(),"\n",". "),onMessage:S,onOpen:P,onClose:w}))},w=function(){x(Qr.HELP_WRITE),o(""),s(!1),c.current.focus()},S=function(e){b.commands.insertContent(e),_()},P=function(){b.commands.insertContentAt(h(),"\n"),o("")},_=function(){document.querySelectorAll(["[data-ai-scrollable]"]).forEach((function(e){e.scrollTop=e.scrollTop+Yr}))};return f?(0,Z.jsx)(Kr,{}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("form",{onSubmit:O,children:(0,Z.jsxs)(Gr,{children:[(0,Z.jsx)(Gr.AiIcon,{}),(0,Z.jsx)(Gr.Input,{ref:c,id:"input-".concat(null===(e=v.attrs)||void 0===e?void 0:e.id),placeholder:null===(t=v.attrs)||void 0===t?void 0:t.placeholder,onChange:function(e){return o(e.target.value)},value:i,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O(e))}})]})}),!i&&(0,Z.jsx)(fn,{onClick:function(e,t){x(e),o(t),c.current.focus()}})]})},vn=r(10161);function hn(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jn=function(){var e=yn((0,D.k)(!1),2),t=e[0],r=e[1],n=function(){var e,t=(e=Ue().mark((function e(t){var n,i,o,a,l,s,c;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,i=t.selected_text,o=void 0===i?"":i,a=t.user_prompt,l=t.onOpen,s=t.onMessage,c=t.onClose,r(!0),e.next=4,(0,en.L)("/internal_api/copilot/editions",{method:"POST",body:JSON.stringify({context:{selected_text:o,type:n,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?l():e.status>=400&&e.status<500&&429!==e.status&&r(!1)},onmessage:function(e){var t=JSON.parse(e.data);s(t.content)},onclose:function(){r(!1),c()},onerror:function(){r(!1)}});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){hn(o,n,i,a,l,"next",e)}function l(e){hn(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{createEdition:n,isLoading:t}},xn=function(e){var t=e.onClick,r="tiptap.extensions.ai_copilot.prompt_options.editions",n=[{label:(0,L.t)("".concat(r,".improve_writing")),value:"improve_writing"},{label:(0,L.t)("".concat(r,".fix_text")),value:"fix_text"},{label:(0,L.t)("".concat(r,".make_shorter")),value:"make_shorter"},{label:(0,L.t)("".concat(r,".make_longer")),value:"make_longer"},{label:(0,L.t)("".concat(r,".simplify_language")),value:"simplify_language"},{label:(0,L.t)("".concat(r,".summarize")),value:"summarize"},{label:(0,L.t)("".concat(r,".explain")),value:"explain"},{label:(0,L.t)("".concat(r,".translate_spanish")),value:"translate"},{label:(0,L.t)("".concat(r,".translate_french")),value:"translate"},{label:(0,L.t)("".concat(r,".translate_dutch")),value:"translate"},{label:(0,L.t)("".concat(r,".translate_italian")),value:"translate"},{label:(0,L.t)("".concat(r,".translate_portuguese")),value:"translate"},{label:(0,L.t)("".concat(r,".translate_english")),value:"translate"}],i=(0,un.t)({optionsCount:n.length,onEnter:function(e){t(n[e].value,n[e].label)}}),o=i.activeIndex,a=i.setActiveIndex;return(0,Z.jsx)(Gr.EditOptions,{activeIndex:o,setActiveIndex:a,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:n,shouldShowEnterIcon:!0})},On=function(e){var t=e.promptResponse,r=Fr(),n=r.node,i=r.editor,o=r.cleanupNode,a=n.attrs.range,l=i.state.selection.$to.after(),s=[{label:(0,L.t)("tiptap.replace_selection"),value:"replace",onClick:function(){i.commands.setTextSelection(a),i.commands.insertContentAt(a,t),o()}},{label:(0,L.t)("tiptap.insert_bellow"),value:"insert_below",onClick:function(){i.commands.insertContentAt(l,t),o()}}],c=function(e){(0,N.isFunction)(s[e].onClick)&&s[e].onClick()},u=(0,un.t)({optionsCount:s.length,onEnter:function(e){c(e)}}),d=u.activeIndex,f=u.setActiveIndex;return(0,Z.jsx)(Gr.EditOptions,{activeIndex:d,setActiveIndex:f,onClick:function(e){var t=e.index;return c(t)},options:s,shouldShowEnterIcon:!0})};function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pn=function(){var e,t,r=(0,n.useRef)(null),i=wn((0,n.useState)(""),2),o=i[0],a=i[1],l=wn((0,n.useState)(!1),2),s=l[0],c=l[1],u=jn(),d=u.createEdition,f=u.isLoading,p=wn((0,n.useState)(""),2),m=p[0],b=p[1],v=wn((0,n.useState)(""),2),h=v[0],y=v[1],g=Fr(),j=g.node,x=g.editor,O=j.attrs.range,w=x.state.doc.textBetween(O.from,O.to,"\n",". "),S=wn((0,n.useState)(!1),2),P=S[0],_=S[1];cn({isLoading:f}),(0,n.useEffect)((function(){!f&&m&&_(!0)}),[f,m]),(0,n.useEffect)((function(){r.current.focus()}),[]),(0,n.useEffect)((function(){o&&C()}),[h]);var N=function(e){b((function(t){return t+e}))},k=function(){a(""),y(""),c(!1),r.current.focus()},C=function(){o&&!s&&(b(""),c(!0),d({type:h||"improve_writing",user_prompt:o,selected_text:w,onMessage:N,onOpen:function(){a("")},onClose:k}))},D=function(e){e.stopPropagation(),e.preventDefault(),C()};return(0,Z.jsxs)("div",{className:"bg-primary rounded-md",children:[m&&(0,Z.jsx)("div",{className:"select-none p-4",children:(0,Z.jsx)(vn.w,{content:m})}),f?(0,Z.jsx)(Kr,{}):(0,Z.jsx)("form",{onSubmit:D,children:(0,Z.jsxs)(Gr,{children:[(0,Z.jsx)(Gr.AiIcon,{}),(0,Z.jsx)(Gr.Input,{ref:r,id:"input-".concat(null===(e=j.attrs)||void 0===e?void 0:e.id),placeholder:null===(t=j.attrs)||void 0===t?void 0:t.placeholder,onChange:function(e){return a(e.target.value)},value:o,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D(e))}})]})}),!o&&!m&&(0,Z.jsx)(xn,{onClick:function(e,t){a(t),y(e)}}),P&&!o&&(0,Z.jsx)(On,{promptResponse:m})]})},_n=function(e){var t=e.editor,r=e.node,n=e.getPos,i=e.deleteNode,o=r.attrs.range;return Dr().shouldShowCopilot?(0,Z.jsx)(Ur,{editor:t,node:r,getPos:n,deleteNode:i,children:(0,Z.jsx)(S.T5,{children:(0,Z.jsx)($r,{children:(0,Z.jsx)("div",{className:"mx-auto my-4 flex items-center justify-center",children:(0,Z.jsx)("div",{className:"from-ai-start to-ai-end relative z-10 w-full rounded-lg bg-gradient-to-r p-0.5 shadow-xl",children:o?(0,Z.jsx)(Pn,{}):(0,Z.jsx)(bn,{})})})})})}):null},Nn=T.NB.create({name:"aicopilot",group:"block",selectable:!1,atom:!0,renderHTML:function(e){return["aicopilot",e.HTMLAttributes,0]},addAttributes:function(){return{placeholder:{default:null},id:{default:(0,N.random)()},range:{default:null},type:{default:"completion"}}},parseHTML:function(){return[{tag:"aicopilot"}]},addNodeView:function(){return(0,S.fW)(_n)},addCommands:function(){return{addAiCopilotNode:function(){return function(e){return e.commands.insertContent({type:"aicopilot",attrs:{placeholder:(0,L.t)("tiptap.extensions.ai_copilot.input.placeholder")}})}}}}}),kn=r(29662),Cn=r(66007),Dn="small",An="large",En="video",Tn="aspect-ratio",In={SoundCloud:Dn,GitHub:An,Brightcove:En,Panopto:En,Loom:En,"Wistia, Inc.":En,"bunny.net":En,YouTube:En,Arcade:Tn,Canva:Tn,Genially:Tn,Vimeo:Tn};function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(r),!0).forEach((function(t){Rn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fn=["Facebook","Instagram","Twitter","X (Formerly Twitter)"],Un={Facebook:function(){var e,t;return null===(e=window.FB)||void 0===e||null===(t=e.init)||void 0===t?void 0:t.call(e,{xfbml:!0,version:"v12.0"})},Instagram:function(){var e,t,r;return null===(e=window.instgrm)||void 0===e||null===(t=e.Embeds)||void 0===t||null===(r=t.process)||void 0===r?void 0:r.call(t)},Twitter:function(){var e,t,r;return null===(e=window.twttr)||void 0===e||null===(t=e.widgets)||void 0===t||null===(r=t.load)||void 0===r?void 0:r.call(t)}},$n=function(e){var t,r=e.node,i=e.editor.isEditable,o=wi()||{},a=o.sgidToObjectMap,l=o.localSgidToObjectMap,s=o.addToLocalSgidToObjectMap,c=null===r||void 0===r||null===(t=r.attrs)||void 0===t?void 0:t.sgid,u=a[c]||l[c],d=(0,F.useQuery)(W.av.richTextFields.fetchOembed({sgid:c}),{enabled:!u&&i,retry:!1,retryOnMount:!1,onSuccess:function(e){null===s||void 0===s||s({sgid:c,object:e})}}).isLoading;if((0,n.useEffect)((function(){var e;null!==u&&void 0!==u&&u.provider_name&&(null===(e=Un[u.provider_name])||void 0===e||e.call(Un))}),[null===u||void 0===u?void 0:u.provider_name]),d)return(0,Z.jsx)(S.T5,{as:"div",children:(0,Z.jsx)(U.JO,{type:"loader",size:16})});if(!u)return null;if(!u.html&&u.url)return(0,Z.jsx)(S.T5,{as:"div",children:(0,Z.jsxs)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"bg-secondary hover:bg-tertiary border-primary group relative inline-flex max-w-full items-center justify-between space-x-4 break-all rounded border px-3 py-2",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(V.Z.LabelSm,{weight:"semibold",children:(0,N.truncate)(u.title,{length:100})})}),u.description&&(0,Z.jsx)("div",{className:"mb-2",children:(0,Z.jsx)(V.Z.LabelSm,{children:(0,N.truncate)(u.description,{length:100})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(V.Z.LabelSm,{color:"text-light",children:(0,N.truncate)(u.url,{length:100})})})]}),u.thumbnail_url&&(0,Z.jsx)("div",{className:"shrink-0",children:(0,Z.jsx)("img",{loading:"lazy",src:u.thumbnail_url,alt:u.title,className:"h-16 w-16 rounded object-contain"})})]})});var f=Fn.includes(u.provider_name),p=function(e){var t=e.embed,r=t.provider_name?In[t.provider_name]:null;return r===Dn?{height:160}:r===An?{height:384}:r===En?{style:{aspectRatio:"16 / 9",height:"auto"}}:r===Tn?t.height&&t.width?{style:{aspectRatio:"".concat(t.width," / ").concat(t.height),height:"auto",maxHeight:"700px"}}:{style:{aspectRatio:"16 / 9",height:"auto"}}:t.height?{height:t.height}:{}}({embed:u});return(0,Z.jsx)(S.T5,{as:"div",children:f?(0,Z.jsx)(Cn.Z,{className:"overflow-auto",html:u.html}):(0,Z.jsx)("iframe",Ln({loading:"lazy",className:_()("w-full max-w-full"),src:u.circle_embed_url,title:u.title,frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;",allowFullScreen:!0},p))})},Bn=T.NB.create({name:"embed",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"embed-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-react",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)($n)}}),Xn=r(48077),zn=r(82964),Zn=r(17479),Hn=function(e){var t=e.isActive,r=e.onClick,n=e.iconType;return(0,Z.jsx)("button",{type:"button",onClick:r,className:_()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":t}),children:(0,Z.jsx)(pe.l,{type:n,iconSize:16})})},qn=function(e){var t=e.node,r=e.updateAttributes;return(0,Z.jsx)("div",{className:"invisible absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",children:(0,Z.jsxs)("div",{className:"bg-text-editor-modifier space-x-1 overflow-hidden rounded-md p-1 text-sm",children:[(0,Z.jsx)(Hn,{onClick:function(){r({alignment:"left",width_ratio:.5})},isActive:"left"==t.attrs.alignment,iconType:"16-image-left"}),(0,Z.jsx)(Hn,{onClick:function(){r({alignment:"center",width_ratio:1})},isActive:"center"==t.attrs.alignment,iconType:"16-image-centre"})]})})},Vn=function(e){var t=e.width,r=e.node,n=e.isEditable,i=e.attachmentMeta,o=e.onClickOpenAttachmentGallery,a=e.updateAttributes,l=(0,et.wh)().currentCommunitySettings,s=null===l||void 0===l?void 0:l.progressive_image_loading_on_post_space_enabled;return(0,Z.jsxs)("div",{style:{width:t},className:_()("group relative",{"mx-auto":"center"===r.attrs.alignment}),"aria-label":(0,L.t)("tiptap.extensions.image_preview.view_attachment"),children:[(0,Z.jsx)("button",{type:"button",className:"w-full",onClick:o,"aria-label":(0,L.t)("tiptap.extensions.image_preview.view_attachment"),children:s?(0,Z.jsx)(Zn.Q,{alt:"",src:i.url,className:_()("w-full",{"cursor-zoom-in":!n}),srcVariants:null===i||void 0===i?void 0:i.image_variants}):(0,Z.jsx)("img",{loading:"lazy",alt:"",className:_()("w-full",{"cursor-zoom-in":!n}),src:i.url})}),n&&(0,Z.jsx)(qn,{node:r,updateAttributes:a})]})},Wn=function(e){var t,r,n=e.editor,i=e.node,o=e.updateAttributes,a=(0,zn.T)().show,l=n.isEditable,s=null!==(t=wi())&&void 0!==t?t:{},c=s.localInlineAttachments,u=s.inlineAttachments,d=s.addToLocalInlineAttachments,f=null===(r=i.attrs)||void 0===r?void 0:r.signed_id,p=(null===c||void 0===c?void 0:c.find((function(e){return e.signed_id===f})))||(null===u||void 0===u?void 0:u.find((function(e){return e.signed_id===f}))),m=null===u||void 0===u?void 0:u.filter((function(e){return(0,J.c)(e.content_type)}));if((0,F.useQuery)(W.av.richTextFields.fetchAttachment({signedId:f}),{enabled:!p&&l,retry:!1,retryOnMount:!1,onSuccess:d}).isLoading)return(0,Z.jsx)(S.T5,{as:"div",className:"my-4",children:(0,Z.jsx)(U.JO,{type:"loader",size:16})});if(!p)return null;var b=1;i.attrs.width_ratio?b=i.attrs.width_ratio:i.attrs.width&&(b="100%"===i.attrs.width?1:.5);var v="".concat(100*b,"%");return(0,Z.jsx)(S.T5,{as:"div",children:(0,Z.jsx)(Vn,{width:v,node:i,isEditable:l,attachmentMeta:p,onClickOpenAttachmentGallery:function(){l||a({attachments:m,startIndex:null===m||void 0===m?void 0:m.findIndex((function(e){return e.signed_id==p.signed_id}))})},updateAttributes:o})})},Jn=T.NB.create({name:"image",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},signed_id:{default:null},content_type:{default:null},width:{},width_ratio:{},alignment:{default:"center"}}},parseHTML:function(){return[{tag:"img-resizable"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["img-resizable",(0,T.P1)(t)]},addNodeView:function(){return(0,S.fW)(Wn)}}),Gn=r(69289),Kn=r(16722),Qn=r(79253),Yn=function(e){var t,r=e.activeMenuIndex,i=e.setActiveMenuIndex,o=e.flattenedCommands,a=e.item,l=e.editor,s=e.range,c=(null===(t=o[r])||void 0===t?void 0:t.name)===a.name,u=(0,n.useRef)();(0,n.useEffect)((function(){c&&u.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[c]);var d=function(){i(o.findIndex((function(e){return e.name===a.name})))};return(0,Z.jsxs)("button",{type:"button",ref:u,onClick:function(){document.exitPointerLock&&document.exitPointerLock(),a.command({editor:l,range:s})},onMouseOver:d,onFocus:d,className:_()("text-dark flex items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":c}),children:[(0,Z.jsx)(U.JO,{type:a.icon,size:16}),(0,Z.jsx)("div",{children:(0,Z.jsx)(V.Z.LabelSm,{children:a.title})})]},a.name)},ei=function(e){var t=e.editor,r=e.range,i=e.activeMenuIndex,o=e.setActiveMenuIndex,a=e.items,l=e.ref;(0,n.useImperativeHandle)(l,(function(){return{onKeyDown:function(e){var n,l=e.event;if(["ArrowDown","ArrowUp","Enter"].includes(l.key)){switch(l.preventDefault(),l.stopPropagation(),document.body.requestPointerLock&&document.body.requestPointerLock(),l.key){case"ArrowDown":i<a.length-1?o(i+1):o(0);break;case"ArrowUp":o(i>0?i-1:a.length-1);break;case"Enter":null===(n=a[i])||void 0===n||n.command({editor:t,range:r}),document.exitPointerLock&&document.exitPointerLock()}return!0}return!1}}}))};function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ri(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ri(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ni=(0,n.forwardRef)((function(e,t){var r=e.items,i=e.editor,o=e.range,a=ti((0,n.useState)(0),2),l=a[0],s=a[1],c=r.flatMap((function(e){return e.commands}));return ei({ref:t,editor:i,range:o,items:c,activeMenuIndex:l,setActiveMenuIndex:s}),(0,n.useEffect)((function(){if(document.exitPointerLock){var e=function(){document.exitPointerLock()};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}}),[]),r.length?(0,Z.jsx)("div",{className:"bg-primary border-primary relative max-h-[50vh] min-w-[250px] max-w-[320px] overflow-auto rounded border py-2 text-sm shadow-md","data-testid":"slash-commands-list",children:(0,Z.jsx)("div",{className:"flex flex-col",children:r.map((function(e){return e.commands.length?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"flex items-center space-x-2 px-5 py-2 uppercase first:pt-2",children:(0,Z.jsx)(V.Z.LabelXxs,{color:"text-light",children:e.name})},e.name),e.commands.map((function(e){return(0,Z.jsx)(Yn,{activeMenuIndex:l,setActiveMenuIndex:s,flattenedCommands:c,item:e,editor:i,range:o},e.name)}))]}):null}))})}):null}));ni.displayName="CommandsList";var ii=[{name:"youtube",title:(0,L.t)("tiptap.slash_commands.youtube")},{name:"wistia",title:(0,L.t)("tiptap.slash_commands.wistia")},{name:"vimeo",title:(0,L.t)("tiptap.slash_commands.vimeo")},{name:"loom",title:(0,L.t)("tiptap.slash_commands.loom")},{name:"soundcloud",title:(0,L.t)("tiptap.slash_commands.soundcloud")},{name:"spotify",title:(0,L.t)("tiptap.slash_commands.spotify")},{name:"simplecast",title:(0,L.t)("tiptap.slash_commands.simplecast")},{name:"instagram",title:(0,L.t)("tiptap.slash_commands.instagram")},{name:"facebook",title:(0,L.t)("tiptap.slash_commands.facebook")},{name:"twitter",title:(0,L.t)("tiptap.slash_commands.twitter")},{name:"typeform",title:(0,L.t)("tiptap.slash_commands.typeform")},{name:"airtable",title:(0,L.t)("tiptap.slash_commands.airtable")},{name:"github",title:(0,L.t)("tiptap.slash_commands.github")},{name:"google-maps",title:(0,L.t)("tiptap.slash_commands.google_maps")},{name:"codepen",title:(0,L.t)("tiptap.slash_commands.codepen")}];function oi(e){return function(e){if(Array.isArray(e))return ai(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ai(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ai(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?li(Object(r),!0).forEach((function(t){ci(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return di(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return di(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fi={ai_copilot:["ai_copilot"],mention:["mention"],poll:["poll"],cta:["cta"]};const pi=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,i=e.showGiphyPickerModal,o=e.showPollModal,a=e.showCTASettingsModal,l=e.disabledExtensions,s=e.disabledSlashMenuCategories,c=e.disabledSlashMenuCommands,u=e.shouldShowPlanUpgradeModal,d=e.openUpgradeModal,f=e.headingLevels;Object.entries(fi).forEach((function(e){var t=ui(e,2),r=t[0],n=t[1];l[r]&&n.forEach((function(e){c[e]=!0}))}));var p=function(e,t){if("Basic"===t.name){var r=t.commands.filter((function(e){return f.includes(1)?f.includes(2)?!!f.includes(3)||"h3"!==e.name:"h2"!==e.name:"h1"!==e.name}));if(r.length>0)return e.push(si(si({},t),{},{commands:r})),e}return e.push(t),e};return T.hj.create({addOptions:function(){return{suggestion:{char:"/",pluginKey:new vr.H$("slash-commands"),items:function(e){var l=e.query,f=Object.values(function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,i=e.showGiphyPickerModal,o=e.showPollModal,a=e.showCTASettingsModal,l=e.openUpgradeModal,s=e.shouldShowPlanUpgradeModal,c=ii.map((function(e){var r=e.name,n=e.title;return{name:r,title:n,icon:"16-editor-".concat(r),command:function(e){var r=e.editor,i=e.range;return t({editor:r,range:i,provider:n})}}})),u=[{name:"ai_copilot",title:(0,L.t)("tiptap.slash_commands.co_pilot"),icon:"20-community-ai",command:function(e){var t=e.editor,r=e.range;s?l():t.chain().focus().deleteRange(r).addAiCopilotNode().run()}},{name:"paragraph",title:(0,L.t)("tiptap.slash_commands.paragraph"),icon:"16-editor-paragraph",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("paragraph").run()}},{name:"h1",title:(0,L.t)("tiptap.slash_commands.heading_1"),icon:"16-heading1",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:1}).run()}},{name:"h2",title:(0,L.t)("tiptap.slash_commands.heading_2"),icon:"16-editor-h2",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:2}).run()}},{name:"h3",title:(0,L.t)("tiptap.slash_commands.heading_3"),icon:"16-editor-h3",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:3}).run()}},{name:"ordered_list",title:(0,L.t)("tiptap.slash_commands.number_list"),icon:"16-editor-ol",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleOrderedList().run()}},{name:"bullet_list",title:(0,L.t)("tiptap.slash_commands.bullet_list"),icon:"16-editor-ul",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBulletList().run()}},{name:"block-quote",title:(0,L.t)("tiptap.slash_commands.blockquote"),icon:"16-editor-quote",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBlockquote().run()}},{name:"divider",title:(0,L.t)("tiptap.slash_commands.divider"),icon:"16-editor-divider",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setHorizontalRule().run()}},{name:"code",title:(0,L.t)("tiptap.slash_commands.code"),icon:"16-editor-code",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleCodeBlock().run()}},{name:"emoji",title:(0,L.t)("tiptap.slash_commands.emoji"),icon:"16-editor-emoji",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent(":").run()}},{name:"mention",title:(0,L.t)("tiptap.slash_commands.mention"),icon:"16-editor-mention",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent("@").run()}},{name:"cta",title:(0,L.t)("tiptap.slash_commands.cta"),icon:"16-link",command:a}],d=[{name:"poll",title:(0,L.t)("tiptap.slash_commands.poll"),icon:"16-editor-poll",command:o},{name:"image",title:(0,L.t)("tiptap.slash_commands.image"),icon:"16-editor-image",command:r},{name:"file",title:(0,L.t)("tiptap.slash_commands.file"),icon:"16-editor-file",command:n},{name:"audio",title:(0,L.t)("tiptap.slash_commands.audio"),icon:"16-editor-audio",command:function(e){var t=e.editor,r=e.range;return n({editor:t,range:r,type:"audio"})}},{name:"video",title:(0,L.t)("tiptap.slash_commands.video"),icon:"16-editor-video",command:function(e){var t=e.editor,r=e.range;return n({editor:t,range:r,type:"video"})}},{name:"pdf",title:(0,L.t)("tiptap.slash_commands.pdf"),icon:"16-editor-pdf",command:function(e){var t=e.editor,r=e.range;return n({editor:t,range:r,type:"pdf"})}},{name:"giphy",title:(0,L.t)("tiptap.slash_commands.giphy"),icon:"16-editor-giphy",command:i}],f=[{name:"embed",title:(0,L.t)("tiptap.slash_commands.embed"),icon:"16-editor-embed",command:t}].concat(oi(c));return[{name:(0,L.t)("tiptap.slash_commands.basic"),commands:u},{name:(0,L.t)("tiptap.slash_commands.upload"),commands:d},{name:(0,L.t)("tiptap.slash_commands.embed"),commands:f}]}({showEmbedModal:t,showImagePickerModal:r,showFileUploadModal:n,showGiphyPickerModal:i,showPollModal:o,showCTASettingsModal:a,shouldShowPlanUpgradeModal:u,openUpgradeModal:d}));return f.map((function(e){return si(si({},e),{},{commands:e.commands.filter((function(e){return!c[e.name]&&e.title.toLowerCase().includes(l.toLowerCase())}))})})).filter((function(e){return!s[e.name]&&!(0,N.isEmpty)(e.commands)})).reduce(p,[])},render:function(){var e,t;return{onStart:function(r){e=new S.M_(ni,{props:r,editor:r.editor}),t=(0,Qn.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:function(){return r.editor.options.element},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",zIndex:999,onHidden:function(){e.destroy()}})},onUpdate:function(r){e.updateProps(r),r.items.length<1?(t[0].hide(),e&&e.destroy()):(t[0].show(),t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown:function(r){var n;return"Escape"===r.event.key?(t[0].hide(),r.event.preventDefault(),r.event.stopPropagation(),!0):null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(r)},onExit:function(){t&&t[0].destroy(),e&&e.destroy()}}}}}},addProseMirrorPlugins:function(){return[(0,Kn.ZP)(si({editor:this.editor},this.options.suggestion))]}})};function mi(e){return function(e){if(Array.isArray(e))return ji(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||gi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach((function(t){hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||gi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t){if(e){if("string"===typeof e)return ji(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ji(e,t):void 0}}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xi=function(e){return Boolean(e)},Oi=(0,n.createContext)(null);Oi.displayName="BlockEditorContext";var wi=function(){return(0,n.useContext)(Oi)};r.e(8783).then(r.bind(r,48783)).then((function(e){e.default.highlightAll()})).catch(console.error);var Si=function(e){var t=e.aiCopilotTitle,r=e.className,P=e.disabledExtensions,T=void 0===P?[]:P,I=e.disabledSlashMenuCategories,M=void 0===I?[]:I,L=e.disabledSlashMenuCommands,R=void 0===L?[]:L,F=e.disableMentionClicks,U=void 0!==F&&F,$=e.editorClassName,X=e.editorRef,z=e.inlineAttachments,H=void 0===z?[]:z,q=e.onChange,V=e.onFocusChange,W=e.onLocalAttachmentsChange,J=e.onLocalSgidToObjectMapChange,G=e.openInternalLinksInCurrentTab,K=void 0===G||G,Q=e.placeholder,Y=e.readOnly,ee=void 0!==Y&&Y,te=e.sgidToObjectMap,re=void 0===te?{}:te,ne=e.shouldPreviewFilesAsLinks,ie=void 0!==ne&&ne,de=e.shouldShowTextModifiersMenu,fe=void 0===de||de,pe=e.spaceId,me=e.textModifierPlacement,ve=void 0===me?"top":me,he=e.showListsInTextModifierMenu,je=void 0!==he&&he,xe=e.maxFileUploadSize,Oe=e.toolbars,we=e.value,Pe=e.shouldRefetch,_e=void 0!==Pe&&Pe,Ne=e.headingLevels,ke=void 0===Ne?[2,3]:Ne,Ce=(0,Xn.d)(),De=(0,Gn.d)(),Ae=(0,ae.Z)(),Ee=(0,be.Y)(),Te=(0,B.dd)(Ke),Ie=br(),Me=yi((0,n.useState)({}),2),Re=Me[0],Fe=Me[1],Ue=yi((0,n.useState)([]),2),$e=Ue[0],Be=Ue[1],Xe=yi((0,D.k)(!1),3),ze=Xe[0],Ze=Xe[2],He=Dr(),qe=He.shouldShowCopilot,Ve=He.shouldShowPlanUpgradeModal,We=Cr().openUpgradeModal,Je=yi([T,M,R].map((function(e){return Object.fromEntries(e.map((function(e){return[e,!0]})))})),3),Ge=Je[0],Qe=Je[1],Ye=Je[2];Ge.ai_copilot=Ge.ai_copilot||!(qe||Ve)||ee;var et=function(e){var t=e.sgid,r=e.object;if(Fe((function(e){return vi(vi({},e),{},hi({},t,r))})),(0,N.isFunction)(J)){var n=vi(vi({},Re),{},hi({},t,r));J(n)}},tt=function(e){Be((function(t){var r=[].concat(mi(t),[e]);return(0,N.isFunction)(W)&&W(r),r}))},rt=function(e){return De.show(vi(vi({},e),{},{addToLocalInlineAttachments:tt}))},nt=function(e){return Te.show(vi(vi({},e),{},{addToLocalInlineAttachments:tt}))},it=function(e){return Ae.show(vi(vi({},e),{},{maxFileUploadSize:xe,addToLocalInlineAttachments:tt,addToLocalSgidToObjectMap:et}))},ot=function(e){return Ie.show(vi(vi({},e),{},{addToLocalSgidToObjectMap:et}))},at=[!Ge.blockquote&&i.ZP,o.ZP,h.ZP,x.ZP,ue.a,s.Z,u.Z,d.Z,f.Z,!Ge.code_block&&l.Z.configure({lowlight:k.$,HTMLAttributes:{spellCheck:"false"}}),!Ge.headings&&p.Z.configure({levels:ke}),b.Z,a.ZP,kn.E,y.ZP,g.Z,O.Z,w.ZP,m.ZP.configure({multicolor:!0}),se.P.configure({openInternalLinksInCurrentTab:K,openOnClick:!1,autolink:!1}),j.Z.configure({placeholder:Q,emptyEditorClass:"is-block-editor-empty text-light",emptyNodeClass:"is-empty",showOnlyWhenEditable:!1,showOnlyCurrent:!1}),!Ge.horizontal_rule&&v.Z,!Ge.file&&oe,(0,le.r)(),Se,!Ge.ai_copilot&&Nn,!Ge.slash_commands&&pi({showEmbedModal:function(e){return Ce.show(vi(vi({},e),{},{addToLocalSgidToObjectMap:et}))},showImagePickerModal:rt,showFileUploadModal:it,showGiphyPickerModal:nt,showPollModal:ot,showCTASettingsModal:function(e){return Ee.show(vi(vi({},e),{},{addToLocalSgidToObjectMap:et}))},disabledExtensions:Ge,disabledSlashMenuCategories:Qe,disabledSlashMenuCommands:Ye,shouldShowPlanUpgradeModal:Ve,openUpgradeModal:We,headingLevels:ke}),!Ge.embeds&&Bn,!Ge.image&&Jn,!Ge.mention&&(0,ce.o)(),!Ge.entities&&(0,A.Y)(),!Ge.poll&&dr,!Ge.cta&&ye,!ee&&jr,ge,Le,c.Z.configure({width:2})].filter(xi);(0,n.useEffect)((function(){(0,N.isFunction)(V)&&V(ze)}),[ze,V]);var lt=(0,N.debounce)((function(e){var t=e.editor.getJSON();q&&q(t)}),200),st=(0,S.jE)({extensions:at,onUpdate:lt,onFocus:function(){Ze(!0)},onBlur:function(){Ze(!1)},content:we,editable:!ee,editorProps:{transformPastedHTML:function(e){var t=(0,E.n)(e);return t.length&&(0,E.S)({sgids:t,setLocalSgidToObjectMap:Fe}),e},attributes:{focus:"",class:_()("z-0 max-w-none whitespace-pre-wrap bg-transparent border-none ring-0 circle-block-editor text-dark",$),"data-readonly":ee}}});X&&(X.current=st),(0,n.useEffect)((function(){_e&&st&&st.commands.setContent(we)}),[st,we,_e]);var ct={sgidToObjectMap:re,inlineAttachments:H,localSgidToObjectMap:Re,addToLocalSgidToObjectMap:et,localInlineAttachments:$e,addToLocalInlineAttachments:tt,spaceId:pe,aiCopilotTitle:t,shouldPreviewFilesAsLinks:ie,type:"block",disableMentionClicks:U};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C.q,{children:(0,Z.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css",integrity:"sha512-0aPQyyeZrWj9sCA46UlmWgKOP0mUipLQ6OZXu8l4IcAmD2u31EPEy9VcIMvl7SoAaKe8bLXZhYoMaE/in+gcgA==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})}),(0,Z.jsxs)(Oi.Provider,{value:ct,children:[st&&fe&&(0,Z.jsx)(Ir,{shouldShowCopilot:!Ge.ai_copilot,editor:st,headingLevels:ke,placement:ve,showListsInTextModifierMenu:je}),Oe&&Oe.map((function(e){var t=e.portalId,r=e.component;return(0,Z.jsx)(r,{editor:st,isEditorFocused:ze,portalId:t,showImagePickerModal:rt,showFileUploadModal:it,showGiphyPickerModal:nt,showPollModal:ot,disabledExtensions:Ge},"editor-toolbar-for-".concat(t))})),(0,Z.jsx)(S.kg,{onPaste:function(e){var t,r,n;(null===(t=e.clipboardData)||void 0===t||null===(r=t.files)||void 0===r?void 0:r.length)>0&&(n=e.clipboardData.files,!Ge.file&&st&&st.chain().focus().insertContent(Array.from(n).map((function(e){return{type:"file-loader",attrs:{file:e}}}))).run())},onDrop:function(e){if(!st)return null;e.preventDefault();var t={left:e.clientX,top:e.clientY},r=st.view.posAtCoords(t);return r?Array.from(e.dataTransfer.files).forEach((function(e){st.chain().focus().insertContentAt(r.pos,{type:"file-loader",attrs:{file:e}}).run()})):void 0},className:r,editor:st,"data-testid":"tip-tap-editor-content"})]})]})}},52995:(e,t,r)=>{r.d(t,{Zh:()=>c,sI:()=>b});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),l="default",s="large",c=function(e){var t=e.field,r=e.value,n=void 0!==r&&r,c=e.disabled,u=void 0!==c&&c,d=e.onChange,f=e.variant,p=void 0===f?"default":f,m=e.className,b=e.labelClassName,v=e.wrapperClassName,h=e.label,y=void 0===h?(0,o.t)("toggle_switch"):h;return(0,a.jsxs)("div",{className:i()("toggle-switch",v,{"toggle-switch--small":p===l,"toggle-switch--large":p===s}),id:"field-".concat(t),children:[(0,a.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:n,onChange:d,disabled:u,className:i()("peer",m)}),(0,a.jsx)("label",{htmlFor:"checkbox-".concat(t),className:i()("bg-toggle-unchecked before:bg-toggle-circle-unchecked peer-checked:bg-toggle-checked before:peer-checked:bg-toggle-circle-checked relative",b),children:(0,a.jsx)("span",{className:"sr-only",children:y})})]})},u=r(50308),d=r.n(u),f=r(18605),p=r(94281),m=r(1712),b=function(e){var t=e.label,r=void 0===t?(0,o.t)("toggle_switch"):t,n=e.field,l=e.value,s=void 0!==l&&l,u=e.onChange,b=void 0===u?d():u,v=e.tooltipText,h=e.className,y=e.labelClassName,g=e.toggleSwitchClassName,j=e.toggleSwitchLabelClassName,x=e.variant,O=void 0===x?"default":x,w=e.disabled,S=void 0!==w&&w;return(0,a.jsxs)("div",{className:i()("flex flex-row items-center justify-between",h),children:[v?(0,a.jsxs)("span",{className:"text-default flex items-center",children:[r,(0,a.jsx)(p.T,{content:v,className:"inline-flex",children:(0,a.jsx)(f.JO,{type:"question-mark",className:"ml-2 !w-3"})})]}):(0,a.jsx)("span",{className:i()("text-default",y),children:r}),(0,a.jsx)("div",{id:"field-".concat(n),className:"flex items-center",children:"small"===O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"checkbox",name:n,id:"checkbox-".concat(n),checked:s,onChange:b,className:"peer hidden"}),(0,a.jsxs)("label",{className:"m-0",htmlFor:"checkbox-".concat(n),children:[(0,a.jsx)(m.r,{as:"span",checked:s,onChange:b}),(0,a.jsx)("span",{className:"sr-only",children:r})]})]}):(0,a.jsx)(c,{field:n,value:s,onChange:b,variant:O,disabled:S,wrapperClassName:g,labelClassName:j})})]})}},99012:(e,t,r)=>{r.d(t,{P:()=>s});var n=r(86013),i=r(94281),o=r(54482),a=r(85893),l=(0,n.t)("close"),s=function(e){var t=e.onClick;return(0,a.jsx)(i.T,{content:l,interactive:!1,children:(0,a.jsx)(o.h,{name:"close",variant:"secondary",onClick:t,ariaLabel:l})})}},33934:(e,t,r)=>{r.d(t,{N:()=>c});var n=r(94184),i=r.n(n),o=r(22050),a=r(8246),l=r(28620),s=r(85893),c=function(e){var t=e.cue,r=e.isCurrentCue,n=void 0!==r&&r,c=e.shouldScroll,u=void 0===c||c,d=e.onSeek,f=(0,o.g)(n&&u);return(0,s.jsxs)("button",{type:"button",className:i()("flex cursor-pointer items-start gap-3 p-1 text-left hover:underline",{"bg-secondary":n}),onClick:function(e){e.stopPropagation(),d(t.startTime)},ref:f,children:[(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(a.Z.BodySm,{as:"div",color:n?"text-dark":"text-light",weight:n?"semibold":"normal",children:(0,l.Ly)(t.startTime)})}),(0,s.jsx)(a.Z.LabelSm,{as:"div",color:"text-dark",weight:n?"semibold":"normal",children:t.text})]})}},73560:(e,t,r)=>{r.d(t,{d:()=>s});var n=r(86013),i=r(94281),o=r(54482),a=r(85893),l=(0,n.t)("live_streams.room.button_tooltips.fullscreen"),s=function(e){var t=e.onClick;return(0,a.jsx)(i.T,{content:l,interactive:!1,children:(0,a.jsx)(o.h,{name:"fullscreen",variant:"secondary",onClick:t,ariaLabel:l})})}},13753:(e,t,r)=>{r.d(t,{n:()=>v});var n=r(67294),i=r(86013),o=r(18605),a=r(55531),l=r(8246),s=r(33934),c=r(96486),u=r(85893),d=function(e){var t=e.onChange,r=void 0===t?c.noop:t;return(0,u.jsx)("input",{type:"search",placeholder:(0,i.t)("media_player.search"),className:"shadow-xs placeholder:text-light w-full rounded-lg border-gray-300 placeholder:opacity-100",onChange:r})},f=r(28620),p=r(84546);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.isOpen,r=e.onClose,c=e.cues,b=e.onSeek,v=e.currentTime,h=e.children,y=m((0,n.useState)(""),2),g=y[0],j=y[1],x=(0,p.g)(),O=x.containerRef,w=x.shouldAutoScroll,S=c.filter((function(e){return!g||e.text.toLowerCase().includes(g.toLowerCase())}));return(0,u.jsx)(a.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!0,isOpen:t,contentPortalId:"fullscreen-transcripts-portal",position:"bottom",onClose:r,children:(0,u.jsxs)("div",{className:"relative flex h-full items-stretch",children:[(0,u.jsx)("div",{className:"bg-dark relative grow",children:(0,u.jsx)("div",{id:"transcripts-fullscreenmodal-player",className:"absolute inset-0",children:h})}),(0,u.jsxs)("div",{className:"border-primary flex w-1/3 max-w-sm shrink-0 flex-col border-l",children:[(0,u.jsxs)("div",{className:"border-primary mb-2 flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,u.jsx)(o.JO,{type:"20-ai",size:20}),(0,u.jsx)(l.Z.LabelLg,{weight:"semibold",children:(0,i.t)("media_player.transcript")})]}),(0,u.jsx)("div",{className:"px-4 py-2",children:(0,u.jsx)(d,{onChange:function(e){return j(e.target.value)}})}),(0,u.jsx)("div",{className:"relative grow",children:(0,u.jsx)("div",{className:"absolute inset-0 overflow-auto p-4",ref:O,children:S.map((function(e,t){return(0,u.jsx)(s.N,{cue:e,isCurrentCue:(0,f.O4)(e,v),shouldScroll:w,onSeek:b},"transcript-fullscreen-".concat(t))}))})})]})]})})}},28620:(e,t,r)=>{r.d(t,{Ly:()=>o,O4:()=>a});var n=r(96486),i=function(e){return(0,n.padStart)(e,2,"0")},o=function(e){var t=Number(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),o=Math.floor(t-3600*r-60*n);return r?"".concat(i(r),":").concat(i(n),":").concat(i(o)):"".concat(i(n),":").concat(i(o))},a=function(e,t){if(!e)return!1;var r=e.startTime,n=e.endTime;return t>=r&&t<n}},84546:(e,t,r)=>{r.d(t,{g:()=>a});var n=r(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=function(){var e=(0,n.useRef)(null),t=i((0,n.useState)(!0),2),r=t[0],o=t[1],a=e.current;return(0,n.useEffect)((function(){var e=function(){return o(!1)};return null===a||void 0===a||a.addEventListener("mousewheel",e),function(){return null===a||void 0===a?void 0:a.removeEventListener("mousewheel",e)}}),[a]),{containerRef:e,shouldAutoScroll:r}}},3888:(e,t,r)=>{r.d(t,{T:()=>at});r(69077);var n=r(44828),i=r(69647),o=r(67294),a=r(98338),l=r(39068),s=r(50732),c=r(93016),u=r(94184),d=r.n(u),f=r(93041),p=r(86013),m=r(96486),b=r(21443),v=r.n(b),h=r(85893),y=function(e){var t=e.id,r=e.contentType,n=e.children,i=e.poster,o=e.preload,a=void 0===o?"none":o;return(null===r||void 0===r?void 0:r.match("audio.*"))?(0,h.jsx)("audio",{id:t,preload:a,controls:!0,children:n}):(0,h.jsx)("video",{id:t,preload:a,controls:!0,poster:i,"data-poster":i,"data-testid":"media-player",children:n})};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t=e.id,r=e.renderKey,n=e.src,i=e.enabled,a=void 0===i||i,l=e.autoStartLoadEnabled,s=void 0!==l&&l,c=(0,o.useRef)(null),u=g((0,o.useState)(null),2),d=u[0],p=u[1],m=(0,o.useRef)(!1);return(0,o.useEffect)((function(){if(a&&n&&t){var e=document.getElementById(t);if(e instanceof HTMLMediaElement)return c.current=new f.Z({autoStartLoad:s}),c.current.loadSource(n),c.current.attachMedia(e),c.current.once(f.Z.Events.MANIFEST_PARSED,(function(){if(c.current&&!m.current){var e=c.current.levels,t={default:e[e.length-1].height,options:e.map((function(e){return e.height})),forced:!0,onChange:function(t){e.forEach((function(e,r){c.current&&e.height===t&&(c.current.currentLevel=r)}))}};p(t),m.current=!0}})),function(){var e;null===(e=c.current)||void 0===e||e.destroy(),c.current=null}}}),[r,t,n,a,s]),{quality:d,startLoad:(0,o.useCallback)((function(){var e;return null===(e=c.current)||void 0===e?void 0:e.startLoad()}),[])}};function O(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=(0,o.memo)((function(e){var t=e.captionsUrl,r=e.contentType,n=e.downloadUrl,i=e.isDownloadable,a=void 0!==i&&i,l=e.onTimeUpdate,s=e.onEnded,c=e.playerRef,u=void 0===c?null:c,b=e.poster,g=e.src,j=e.startTime,_=e.preload,N=void 0===_?"none":_,k=e.menuPosition,C=void 0===k?"top":k,D=e.onProgress,A=P((0,o.useState)((0,m.uniqueId)("plyr-container-")),2),E=A[0],T=A[1],I=(0,o.useRef)((0,m.uniqueId)("plyr-")),M=(0,o.useRef)(null),L=P((0,o.useState)(!1),2),R=L[0],F=L[1],U=f.Z.isSupported(),$=g.endsWith(".m3u8")&&U,B="none"!==N,X=x({id:I.current,renderKey:E,src:g,enabled:$,autoStartLoadEnabled:B}),z=X.quality,Z=X.startLoad,H=(0,o.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({controls:["play-large","play","progress","current-time","mute","volume"].concat(O(t?["captions"]:[]),["settings","pip","fullscreen"],O(a?["download"]:[])),urls:{download:n}},z?{quality:z}:{})}),[t,n,z,a]);(0,o.useEffect)((function(){return function(){var e;null===(e=M.current)||void 0===e||e.destroy(),T((0,m.uniqueId)("plyr-container-"))}}),[H]),(0,o.useEffect)((function(){M.current=new(v())("#".concat(I.current),H),u&&(u.current={plyr:M.current})}),[H,E,u]);var q=function(){M.current&&(M.current.currentTime=j)},V=function(){M.current&&(0,m.isFunction)(s)&&s()};return(0,o.useEffect)((function(){return j&&M.current&&M.current.once("canplay",q),M.current&&(M.current.once("ended",V),(0,m.isFunction)(D)&&M.current.on("timeupdate",D)),function(){var e,t;(null===(e=M.current)||void 0===e||e.off("canplay",q),(0,m.isFunction)(D))&&(null===(t=M.current)||void 0===t||t.off("timeupdate",D))}}),[M.current]),(0,o.useEffect)((function(){return j&&M.current&&M.current.once("play",q),function(){var e;null===(e=M.current)||void 0===e||e.off("play",q)}}),[j,M.current]),(0,o.useEffect)((function(){if(M.current&&$&&!B)return M.current.once("play",Z),function(){var e;return null===(e=M.current)||void 0===e?void 0:e.off("play",Z)}}),[E,$,B,Z]),(0,o.useEffect)((function(){var e,t=function(){M.current&&l&&l(M.current.currentTime)};l&&(null===(e=M.current)||void 0===e||e.on("timeupdate",t));return function(){var e;l&&(null===(e=M.current)||void 0===e||e.off("timeupdate",t))}}),[l,M.current]),(0,o.useEffect)((function(){if(M.current){var e=function(){return F(!0)},t=function(){return F(!1)};return M.current.on("enterfullscreen",e),M.current.on("exitfullscreen",t),function(){var r,n;null===(r=M.current)||void 0===r||r.off("enterfullscreen",e),null===(n=M.current)||void 0===n||n.off("exitfullscreen",t)}}}),[M.current]),(0,h.jsx)("div",{className:d()("plyr-container",{"plyr-container--fullscreen":R,"plyr-container__menu--bottom":"bottom"===C&&!R}),children:(0,h.jsxs)(y,{id:I.current,contentType:r,poster:b,preload:N,children:[!$&&(0,h.jsx)("source",{src:g,type:r}),t&&(0,h.jsx)("track",{kind:"captions",label:(0,p.t)("default"),src:t,srcLang:"en"})]})},E)}));k.displayName="MediaPlayer";var C=r(88767),D=r(34334),A=function(e){var t=(0,i.p)(),r=t.success,n=t.error,o=(0,C.useQueryClient)(),a=(0,C.useQuery)(["mediaSettings",e],(function(){return D.Ss.show(e)}),{enabled:!!e}),l=a.data,s=a.isLoading,c=a.refetch,u=(0,C.useMutation)((function(t){return D.Ss.update(e,t)}),{onSuccess:function(){r((0,p.t)("media_settings.success")),c(),o.invalidateQueries(["mediaSettings",e])},onError:function(e){n((0,p.t)("media_settings.error")),console.error(e)}}),d=u.mutate;return{mediaSettings:l,isLoading:s,isUpdating:u.isLoading,update:d,refetch:c}},E=r(81786),T=r(67687);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,n=e.isUpdatingMediaSettings,i=e.closePopover,o={make_downloadable:t.make_downloadable,custom_thumbnail:t.custom_thumbnail_signed_id};return(0,h.jsxs)(T.l,{id:"download-settings",onSubmit:function(e){r(M(M({},e),{},{id:t.id})),i()},defaultValues:o,children:[(0,h.jsx)(T.l.Item,{name:"make_downloadable",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:n,children:(0,h.jsx)(T.l.ToggleSwitch,{variant:"small",name:"make_downloadable"})}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(E.z,{type:"submit",variant:"circle",disabled:n,className:"mt-3",children:(0,p.t)("save")})})]})},F=r(87536),U=r(50768),$=r(85277),B=r(18605),X=r(51009),z=["name","rules"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=function(e){var t=e.name,r=e.errorMessage,n=e.onChange,a=(0,i.p)().error,l=W((0,o.useState)(null),2),s=l[0],c=l[1],u=(0,o.useRef)(null);(0,o.useEffect)((function(){r&&a(r)}),[r]);return(0,h.jsx)("div",{children:(0,h.jsxs)("label",{className:d()("bg-primary flex cursor-pointer rounded-md border border-gray-600 px-2 py-1.5 text-sm",{"justify-center":!s,"hover:bg-selector-active":!s,"border-red-500":r}),children:[!s&&(0,h.jsx)("span",{children:(0,p.t)("media_player.transcript_menu.file_type.user_file")}),s&&(0,h.jsxs)("span",{className:"flex gap-2",children:[(0,h.jsx)(B.JO,{type:"20-attach",size:20,className:"shrink-0"}),(0,h.jsx)("span",{className:"grow",children:(0,m.truncate)(s,{length:17,omission:"..."})}),(0,h.jsx)(B.JO,{type:"16-close",size:16,onClick:function(e){e.preventDefault(),e.stopPropagation(),u.current.value=null,n(null),c(null)},className:"shrink-0"})]}),(0,h.jsx)("input",{type:"file",name:t,onChange:function(e){var t=e.target.files[0],r=new FileReader;r.onload=function(){n(r.result)},r.readAsDataURL(t),c(t.name)},className:"hidden",itemType:"text/vtt",accept:".vtt",ref:u})]})})},K=function(e){var t=e.name,r=e.rules,n=V(e,z),i=(0,F.Gc)(),o=i.control,a=i.formState.errors,l=(0,m.get)(a,"".concat(t,".message"));return(0,h.jsx)(F.Qr,{control:o,name:t,rules:r,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,h.jsx)(G,H(H({},n),{},{onChange:r,value:i,errorMessage:l}))}})},Q=["name","rules"];function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ne=function(e){var t=e.onChange,r=e.value,n=e.supportsAi,i=e.aiFileDownloadUrl,o="ai"===r,a="user"===r,l=o&&!n&&!i,c=o&&!!i;return(0,h.jsx)(U.E,{value:r,name:"file_type",onChange:t,className:"w-full",children:(0,h.jsxs)("div",{className:d()("flex flex-col items-stretch gap-3",{"flex-col-reverse":!n}),children:[(0,h.jsxs)(X.R,{value:"ai",className:"py-4",children:[(0,h.jsx)(U.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,p.t)("media_player.transcript_menu.file_type.ai")}),(0,h.jsxs)(U.E.Description,{as:"span",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,p.t)("media_player.transcript_menu.file_type.ai_description"),l&&(0,h.jsx)(E.z,{variant:"circle",onClick:function(e){e.preventDefault(),window.open((0,s.xn)(),"_blank")},children:(0,p.t)("media_player.transcript_menu.file_type.upgrade_label")}),c&&(0,h.jsxs)(E.z,{variant:"secondary",onClick:function(e){e.preventDefault(),window.open(i,"_blank")},children:[(0,h.jsx)(B.JO,{type:"16-download",className:"mr-1.5",size:16}),(0,p.t)("media_player.transcript_menu.file_type.download_vtt_label")]})]})]}),(0,h.jsxs)(X.R,{value:"user",className:"py-4",children:[(0,h.jsx)(U.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,p.t)("media_player.transcript_menu.file_type.user")}),(0,h.jsxs)(U.E.Description,{as:"div",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,p.t)("media_player.transcript_menu.file_type.user_description"),a&&(0,h.jsx)(K,{name:"user_webvtt_file",rules:{validate:function(e){var t;if(!e)return!0;var r=atob(e.replace(/data:\S+,/,"")),n=(new $.WebVTTParser).parse(r);return null===n||void 0===n||null===(t=n.errors)||void 0===t||!t.length||(0,p.t)("media_player.transcript_menu.file_type.user_file_error")}}})]})]})]})})},ie=function(e){var t=e.name,r=e.rules,n=re(e,Q),i=(0,F.Gc)().control;return(0,h.jsx)(F.Qr,{control:i,name:t,rules:r,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,h.jsx)(ne,ee(ee({},n),{},{onChange:r,value:i}))}})},oe="media_player.transcript_menu",ae=function(e){var t=e.isUpdating,r=e.supportsAi,n=e.aiFileDownloadUrl,i=(0,(0,F.Gc)().watch)("enabled");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T.l.Item,{name:"enabled",translationRoot:oe,hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:t,children:(0,h.jsx)(T.l.ToggleSwitch,{variant:"small",name:"enabled"})}),i&&(0,h.jsx)(T.l.Item,{name:"selected_file",translationRoot:oe,hideBorder:!0,fullWidth:!0,inline:!0,hideLabel:!0,hideDescription:!0,isDisabled:t,rules:{validate:function(e){return!("ai"===e&&!r)||(0,p.t)("media_player.transcript_menu.file_type.ai_not_supported_error")}},className:"flex flex-col",children:(0,h.jsx)(ie,{supportsAi:r,aiFileDownloadUrl:n})}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(E.z,{type:"submit",variant:"circle",disabled:t,className:"mt-1",children:(0,p.t)("save")})})]})},le=function(e){var t=e.mediaTranscript,r=e.updateAsync,n=e.isUpdating;if(!t)return null;var i=function(e){return e?{enabled:e.enabled,selected_file:e.selected_file}:{}}(t);return(0,h.jsx)(T.l,{id:"media-transcript",onSubmit:function(e){r(e)},defaultValues:i,children:(0,h.jsx)(ae,{isUpdating:n,supportsAi:!(null===t||void 0===t||!t.supports_ai),aiFileDownloadUrl:null!==t&&void 0!==t&&t.is_ai_ready?null===t||void 0===t?void 0:t.webvtt_file_url:null})})},se=function(e){var t=e.children;return(0,h.jsx)("div",{className:"bg-primary border-light absolute right-0 top-1 w-80 cursor-default rounded-lg border p-5",children:t})},ce=(0,o.forwardRef)((function(e,t){var r=e.iconType,n=e.onClick;return(0,h.jsx)("button",{ref:t,type:"button",onClick:n,className:"bg-primary text-dark border-light hover:bg-secondary flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border",children:(0,h.jsx)(B.JO,{type:r,size:16})})}));ce.displayName="Button";var ue=r(86215),de=r(47031),fe=r(2740),pe=r(77294),me=r(69293);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){he(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var je={strategy:"fixed",placement:"bottom-end"},xe={enter:"transition ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},Oe=Object.assign((function(e){var t=e.iconType,r=e.isOpen,n=e.onToggle,i=e.children,a=ye((0,o.useState)(null),2),l=a[0],s=a[1],c=ye((0,o.useState)(null),2),u=c[0],d=c[1],f=(0,o.useRef)(null),p=(0,pe.D)(u,l,je),m=p.styles,b=p.attributes;return(0,me.Z)(f,(function(e){var t;e.target instanceof Node&&(function(e){return e instanceof MouseEvent&&e.target instanceof Node&&(null===u||void 0===u?void 0:u.contains(e.target))}(e)||(t=e.target)instanceof Element&&null!==t.closest(".modal__box")||n())})),(0,h.jsxs)(ue.J,{as:"div",className:"relative",children:[(0,h.jsx)(ce,{iconType:t,onClick:n,ref:d}),(0,h.jsx)(de.u,ve(ve({},xe),{},{show:r,children:r&&(0,h.jsx)(fe.h,{as:o.Fragment,children:(0,h.jsx)(ue.J.Panel,ve(ve({ref:s,style:m.popper},b.popper),{},{className:"z-20",children:(0,h.jsx)("div",{ref:f,children:(0,h.jsx)(se,{children:i})})}))})}))]})}),{Body:se,Button:ce}),we=r(10161),Se=r(10647);function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,n=e.isUpdatingMediaSettings,i=e.closePopover;return(0,h.jsxs)(T.l,{id:"thumbnail-image-settings",onSubmit:function(e){r(_e(_e({},e),{},{id:t.id})),i()},shouldStopPropagation:!0,defaultValues:{custom_thumbnail:t.custom_thumbnail_signed_id},children:[(0,h.jsx)(T.l.Item,{name:"custom_thumbnail",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,hideDescription:!0,className:"!p-0",children:(0,h.jsx)(Se.D,{name:"custom_thumbnail",aspectRatio:16/9,hideUnsplash:!0,showAddCoverBtn:!0,changeImageText:(0,p.t)("replace"),title:(0,p.t)("media_settings.thumbnail_title"),customAddCoverBtn:(0,h.jsxs)("div",{className:"bg-primary border-primary text-dark my-2 flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border border-dashed px-4 py-5 text-center",children:[(0,h.jsx)("div",{className:"bg-tertiary flex h-8 w-8 items-center justify-center rounded-full",children:(0,h.jsx)(B.JO,{type:"plus",viewBox:"0 0 20 20"})}),(0,h.jsx)("span",{className:"mt-0.5 text-xs",children:(0,h.jsx)(we.w,{content:(0,p.t)("media_settings.image_upload_description")})})]})})}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(E.z,{type:"submit",variant:"circle",disabled:n,className:"mt-3",children:(0,p.t)("save")})})]})};function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){var t,r=e.mediaTranscript,n=e.canEditTranscript,i=e.updateAsyncTranscript,s=e.isUpdatingTranscript,c=e.signedId,u=e.contentType,f=(0,a.wh)().currentCommunityMember,p=(0,l.vb)(f),m=null===u||void 0===u?void 0:u.match("audio.*"),b=null===(t=window.webview)||void 0===t?void 0:t.isInsideMobileWebview,v=p&&!b,y=A(c),g=y.mediaSettings,j=y.update,x=y.isUpdating,O=Ce((0,o.useState)(null),2),w=O[0],S=O[1],P=function(e){S(w===e?null:e)};return(0,h.jsxs)("div",{className:d()("invisible absolute z-10 flex gap-3 group-hover:visible",{"!visible":w,"right-4 top-4":!m,"bottom-12 right-2.5":m}),children:[g&&v&&(0,h.jsxs)(h.Fragment,{children:[!m&&(0,h.jsx)(Oe,{isOpen:"thumbnail"===w,onToggle:function(){return P("thumbnail")},iconType:"16-file-image",children:(0,h.jsx)(ke,{mediaSettings:g,updateMediaSettings:j,isUpdatingMediaSettings:x,closePopover:function(){return P("thumbnail")}})}),(0,h.jsx)(Oe,{isOpen:"download"===w,onToggle:function(){return P("download")},iconType:"16-download",children:(0,h.jsx)(R,{mediaSettings:g,updateMediaSettings:j,isUpdatingMediaSettings:x,closePopover:function(){return P("download")}})})]}),n&&(0,h.jsx)(Oe,{isOpen:"transcript"===w,onToggle:function(){return P("transcript")},iconType:"16-transcript",children:(0,h.jsx)(le,{mediaTranscript:r,updateAsync:i,isUpdating:s})})]})},Ee=r(8246),Te="media_player.transcoding",Ie=function(e){var t=e.status,r="failed"===t?"failed":"in_progress";return(0,h.jsxs)("div",{className:"absolute left-0 top-0 z-10 h-full w-full",children:[(0,h.jsx)("div",{className:"h-full w-full bg-black opacity-80"}),(0,h.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:(0,h.jsxs)("div",{className:"w-10/12 max-w-[360px] text-center",children:[(0,h.jsxs)("div",{className:"space-x-2",children:["failed"===t&&(0,h.jsx)(B.JO,{type:"20-alert",size:20,className:"!h-4 !w-4 !text-white"}),(0,h.jsx)(Ee.Z.LabelSm,{color:"text-white",weight:"semibold",children:(0,p.t)([Te,r,"title"])})]}),(0,h.jsx)(Ee.Z.LabelSm,{color:"text-white",children:(0,p.t)([Te,r,"description"])})]})})]})},Me=r(34914);function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=function(e){var t=e.url,r=e.onNewMediaTranscript,n=e.onMediaTranscriptUpdated,i=e.mediaTranscript,a=e.isLoading,l=Le((0,o.useState)(!1),2),c=l[0],u=l[1],d=(0,o.useRef)(!1),f=function(){return u(!0)};(0,Me.s)({channel:"MediaTranscriptChannel",url:t,onMessageReceive:function(e){var t;if("newMediaTranscript"===e.event)f(),null===r||void 0===r||r(null===(t=e.json_message)||void 0===t?void 0:t.id);else if("mediaTranscriptUpdated"===e.event){var i;d.current||f(),null===n||void 0===n||n(null===(i=e.json_message)||void 0===i?void 0:i.id)}}});var m=null===i||void 0===i?void 0:i.supports_ai;return!c||a?null:(0,h.jsxs)("div",{className:"bg-primary absolute left-5 top-5 z-10 flex w-2/3 max-w-sm items-start gap-3 rounded-md p-4 shadow-xl",children:[(0,h.jsx)("div",{className:"shrink-0",children:(0,h.jsx)(B.JO,{type:"20-ai"})}),(0,h.jsxs)("div",{className:"flex grow flex-col gap-4",children:[(0,h.jsx)(Ee.Z.LabelSm,{as:"div",children:(0,p.t)("media_player.transcript_notification_message")}),!m&&(0,h.jsxs)(Ee.Z.LabelSm,{as:"div",children:[(0,h.jsx)("span",{children:"".concat((0,p.t)("media_player.transcript_notification_upgrade_message")," ")}),(0,h.jsx)("a",{className:"cursor-pointer",href:(0,s.xn)(),target:"_blank",rel:"noreferrer",children:(0,p.t)("media_player.transcript_notification_upgrade_link")})]})]}),(0,h.jsx)("div",{className:"shrink-0",children:(0,h.jsx)(B.JO,{type:"20-close",onClick:function(){d.current=!0,u(!1)},className:"cursor-pointer"})})]})},Ue=r(99012),$e=r(33934),Be=r(73560),Xe=r(13753),ze=r(28620),Ze=r(84546);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ve=function(e){var t=e.mediaTranscriptId,r=e.onSeek,n=e.onFullscreenSeek,i=e.onFullscreenToggle,a=e.renderFullscreenPlayer,l=e.cues,s=void 0===l?[]:l,c=e.currentTime,u=(0,o.useRef)(null),d=He((0,o.useState)(!1),2),f=d[0],b=d[1],v=He((0,o.useState)(!1),2),y=v[0],g=v[1],j=function(){return b(!f)};(0,me.Z)(u,(function(){return b(!1)}));var x=(0,Ze.g)(),O=x.containerRef,w=x.shouldAutoScroll,S=function(){null===i||void 0===i||i(),b(!1),g(!y)};if(null===s||void 0===s||!s.length)return null;var P=s[0]||{text:"",startTime:0};return(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("blockquote",{children:[(0,h.jsx)(Ee.Z.BodyXs,{as:"div",children:P.text}),(0,h.jsx)("div",{children:(0,h.jsxs)("button",{type:"button",className:"text-link relative cursor-pointer text-xs hover:underline",onClick:j,ref:u,children:[f?(0,p.t)("media_player.hide_transcript"):(0,p.t)("media_player.show_transcript"),f&&(0,h.jsxs)("div",{className:"bg-primary border-light absolute bottom-0 left-full z-20 ml-2 flex h-72 w-96 flex-col rounded-md border p-4",children:[(0,h.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,h.jsx)(Ee.Z.BodyMd,{as:"div",color:"text-dark",children:(0,p.t)("media_player.transcript")}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(Be.d,{onClick:S}),(0,h.jsx)(Ue.P,{onClick:j})]})]}),(0,h.jsx)("div",{className:"grow overflow-auto",ref:O,children:s.map((function(e){return(0,h.jsx)($e.N,{cue:e,isCurrentCue:(0,ze.O4)(e,c),shouldScroll:w,onSeek:r},(0,m.uniqueId)("transcript-".concat(t)))}))})]})]})})]}),(0,h.jsx)(Xe.n,{isOpen:y,onClose:S,cues:s,onSeek:n,currentTime:c,children:a()})]})},We=r(73445),Je=r(782);function Ge(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qe=(0,We.Ue)()((0,Je.tJ)((function(e,t){return{blobs:[],saveProgress:function(t,r){e((function(e){return{blobs:[{signedId:t,progress:r}].concat(Ge(e.blobs.filter((function(e){return e.signedId!==t})).slice(0,99)))}}))},getProgress:function(e){var r,n=t().blobs.find((function(t){return t.signedId===e}));return null!==(r=null===n||void 0===n?void 0:n.progress)&&void 0!==r?r:0},deleteProgress:function(t){e((function(e){return{blobs:e.blobs.filter((function(e){return e.signedId!==t}))}}))}}}),{name:"media-progress",version:1})),Ye=r(75089);function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rt=(0,o.memo)((function(e){var t=e.src,r=e.poster,n=e.type,i=e.mediaTranscoding,u=e.mediaTranscriptId,d=e.isDownloadable,f=void 0!==d&&d,p=e.isTranscodingEnabled,m=void 0!==p&&p,b=e.downloadUrl,v=e.variants,y=e.preload,g=void 0===y?"none":y,j=e.menuPosition,x=void 0===j?"top":j,O=e.signedId,w=e.onProgress,S=(0,a.wh)(),P=S.currentCommunityMember,_=S.currentCommunitySettings,N=(0,l.vb)(P),C=(0,o.useRef)(null),D=(0,o.useRef)(null),E=et((0,o.useState)(null),2),T=E[0],I=E[1],M=m?null===v||void 0===v?void 0:v.hls:null,L=et((0,o.useState)(null!==M&&void 0!==M?M:t),2),R=L[0],F=L[1],U=R.endsWith(".m3u8"),$=["video/mp4","video/mpeg","video/ogg","audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(n),B=U||$,X=Qe((function(e){return e.getProgress(O||"")})),z=Qe((function(e){return e.deleteProgress})),Z=Qe((function(e){return e.saveProgress})),H=function(){O&&z(O)},q=et((0,o.useState)(X),2),V=q[0],W=q[1],J=u||T,G=null===_||void 0===_?void 0:_.community_ai_settings_enabled,K=A(O).mediaSettings;(0,o.useEffect)((function(){V&&O&&Z(O,V)}),[V,O,Z]);var Q=(0,c.k)({enabled:m&&!B,signedId:O,mediaTranscoding:i,onSuccess:function(e){return e&&F(e)}}).status,Y=(0,Ye.q)(J),ee=Y.parsedWebvtt.cues,te=Y.mediaTranscript,re=Y.canEdit,ne=Y.updateAsync,ie=Y.isUpdating,oe=Y.isLoading,ae=Y.refetch,le=K?K.poster_url:r;(0,o.useEffect)((function(){if(le){var e=C.current;e&&(e.plyr.poster=le)}}),[le]);var se=m&&!B&&"succeeded"!==Q,ce=G&&(null===te||void 0===te?void 0:te.enabled)&&(null===te||void 0===te?void 0:te.is_ready),ue=G&&!u&&(null===P||void 0===P?void 0:P.is_admin),de="number"===typeof u?String(u):"",fe=ce?s.CG.showVtt({id:de}):void 0;return(0,h.jsxs)("div",{className:"group relative",children:[se&&(0,h.jsx)(Ie,{status:Q}),(0,h.jsx)(k,{captionsUrl:fe,contentType:n,downloadUrl:null!==b&&void 0!==b?b:null===v||void 0===v?void 0:v.original,isDownloadable:f||N,onTimeUpdate:W,playerRef:C,menuPosition:x,poster:le,src:R,startTime:V,preload:g,onEnded:H,onProgress:w}),(0,h.jsx)(Ae,{signedId:O,mediaTranscript:te,canEditTranscript:re,updateAsyncTranscript:ne,isUpdatingTranscript:ie,contentType:n}),ce&&(0,h.jsx)(Ve,{mediaTranscriptId:u,onSeek:function(e){var t=C.current;t&&(t.plyr.currentTime=e)},onFullscreenSeek:function(e){var t=D.current;t&&(t.plyr.currentTime=e)},renderFullscreenPlayer:function(){return(0,h.jsx)(k,{captionsUrl:fe,contentType:n,downloadUrl:null!==b&&void 0!==b?b:null===v||void 0===v?void 0:v.original,isDownloadable:f||N,onTimeUpdate:W,playerRef:D,poster:le,src:R,startTime:V,preload:g,onEnded:H,onProgress:w})},onFullscreenToggle:function(){var e=C.current;e&&e.plyr.pause()},cues:ee,currentTime:V}),ue&&(0,h.jsx)(Fe,{url:t,onNewMediaTranscript:I,onMediaTranscriptUpdated:function(e){J!==e?I(e):ae()},mediaTranscript:te,isLoading:oe})]})}));function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}rt.displayName="TranscriptsPlayerComponent";var at=function(e){return(0,h.jsx)(n.aH,{children:(0,h.jsx)(i.V,{children:(0,h.jsx)(rt,it({},e))})})}},75089:(e,t,r)=>{r.d(t,{q:()=>u});var n=r(86013),i=r(88767),o=r(34334),a=r(69647),l=r(67294),s=r(85277),c=r(50732),u=function(e){var t=(0,a.p)(),r=t.success,u=t.error,d=(0,i.useQuery)(["mediaTranscript",e],(function(){return o.ac.show(e)}),{enabled:!!e}),f=d.data,p=d.isLoading,m=d.refetch,b=function(e){var t=e||{},r=t.id,n=t.enabled,o=t.is_ready,a=(0,i.useQuery)(["mediaTranscript","webvtt",r],(function(){return fetch(c.CG.showVtt({id:r})).then((function(e){return e.text()}))}),{enabled:!!r&&o&&n}),u=a.data,d=a.isError,f=a.refetch;return{parsedWebvtt:(0,l.useMemo)((function(){return!u||d?{}:(new s.WebVTTParser).parse(u)}),[u,d]),refetch:f}}(f)||{},v=b.parsedWebvtt,h=b.refetch,y=(0,i.useMutation)((function(t){return o.ac.update(e,t)}),{onSuccess:function(){r((0,n.t)("media_player.transcript_menu.success")),m(),h()},onError:function(e){u((0,n.t)("media_player.transcript_menu.error")),console.error(e)}}),g=y.mutateAsync,j=y.mutate,x=y.isLoading;return{mediaTranscript:f,canEdit:null===f||void 0===f?void 0:f.can_edit,isLoading:p,isUpdating:x,parsedWebvtt:v,update:j,updateAsync:g,refetch:m}}},41982:(e,t,r)=>{r.d(t,{Y:()=>p});var n=r(94184),i=r.n(n),o=r(96486),a=r(46266),l=r(85893),s=function(e){var t=e.className,r=e.children;return(0,l.jsx)("span",{className:i()("truncate",t),children:r})};function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="flex min-w-0",p=function(e){var t=e.className,r=e.tooltipOptions,n=e.children;return(0,o.isEmpty)(r)||(0,o.isEmpty)(null===r||void 0===r?void 0:r.content)?(0,l.jsx)("span",{className:i()(f,t),children:(0,l.jsx)(s,{children:n})}):(0,l.jsx)(a.Y,u(u({},r),{},{className:i()(f,null===r||void 0===r?void 0:r.className),children:(0,l.jsx)(s,{children:n})}))}},64422:(e,t,r)=>{r.d(t,{s:()=>s});var n=r(67142),i=r(86013),o=r(64289),a=r(36589),l=r(85893),s=function(e){var t=e.hasBorder,r=e.isFullRounded,s=void 0!==r&&r,c=e.name,u=e.size,d=e.src,f=(0,a.I)().isV3Enabled,p=s||f,m=function(e,t){var r=!e&&!t,n=e!==(0,i.t)("no_name");return r||!n?o:t}(c,d);return(0,l.jsx)(n.sJ,{hasBorder:t,isFullRounded:p,name:c,size:u,src:m})}},14135:(e,t,r)=>{r.d(t,{t:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.backgroundNone,n=void 0!==r&&r,a=e.className,l=void 0===a?"":a;return(0,o.jsx)("div",{className:i()("rounded-md bg-none px-4 py-5 sm:p-6",{"bg-none":n,"bg-tertiary":!n},l),children:t})}}}]);
//# sourceMappingURL=/packs/js/468-a2e8f7a461d3ab950d1f.js.map