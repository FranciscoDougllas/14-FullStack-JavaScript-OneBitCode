(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[7682],{67074:(e,t,r)=>{var n={"./add_member_controller.js":49759,"./admin_controller.js":78761,"./admin_sidebar_controller.js":15357,"./admin_tabs_controller.js":13574,"./auth_providers_controller.js":28239,"./authentication_form_controller.js":93769,"./autocomplete_controller.js":10861,"./back_controller.js":51028,"./bottom_bar_controller.js":58545,"./browser_notifications_controller.js":89073,"./clipboard_controller.js":77238,"./collapsible_controller.js":1653,"./colorpicker_controller.js":79286,"./comment_controller.js":83067,"./custom_domain_form_controller.js":12094,"./daterange_controller.js":65371,"./download_controller.js":86594,"./dropdown_controller.js":85368,"./flash_controller.js":22720,"./form_controller.js":81840,"./infinity_scroll_controller.js":68214,"./lazy_load_controller.js":78111,"./like_controller.js":20984,"./member_settings_controller.js":94515,"./mobile_controller.js":15684,"./mobile_sidebar_controller.js":29918,"./monthrange_controller.js":89643,"./multiselect_controller.js":20340,"./notification_preferences_controller.js":5291,"./onboardingform_controller.js":70941,"./otp_controller.js":99995,"./popup_controller.js":9600,"./post_controller.js":69421,"./post_form_controller.js":8525,"./profile_image_controller.js":75456,"./profilecard_controller.js":35664,"./react_mount_controller.js":78542,"./recaptcha_controller.js":99892,"./reorder_controller.js":32477,"./reorderparent_controller.js":67406,"./richtext_controller.js":58162,"./select_controller.js":87852,"./share_controller.js":54815,"./signin_controller.js":68564,"./spaces_sidebar_controller.js":40448,"./standard_layout_controller.js":51576,"./stimulus-tabs/tabs_controller.js":57955,"./stripe_controller.js":12019,"./time_controller.js":44046,"./toggle_controller.js":44206,"./trix_attachment_preview_controller.js":58532,"./unread_posts_count_controller.js":59911,"./unsaved_changes_controller.js":40269,"./validation_controller.js":78204,"controllers/add_member_controller.js":49759,"controllers/admin_controller.js":78761,"controllers/admin_sidebar_controller.js":15357,"controllers/admin_tabs_controller.js":13574,"controllers/auth_providers_controller.js":28239,"controllers/authentication_form_controller.js":93769,"controllers/autocomplete_controller.js":10861,"controllers/back_controller.js":51028,"controllers/bottom_bar_controller.js":58545,"controllers/browser_notifications_controller.js":89073,"controllers/clipboard_controller.js":77238,"controllers/collapsible_controller.js":1653,"controllers/colorpicker_controller.js":79286,"controllers/comment_controller.js":83067,"controllers/custom_domain_form_controller.js":12094,"controllers/daterange_controller.js":65371,"controllers/download_controller.js":86594,"controllers/dropdown_controller.js":85368,"controllers/flash_controller.js":22720,"controllers/form_controller.js":81840,"controllers/infinity_scroll_controller.js":68214,"controllers/lazy_load_controller.js":78111,"controllers/like_controller.js":20984,"controllers/member_settings_controller.js":94515,"controllers/mobile_controller.js":15684,"controllers/mobile_sidebar_controller.js":29918,"controllers/monthrange_controller.js":89643,"controllers/multiselect_controller.js":20340,"controllers/notification_preferences_controller.js":5291,"controllers/onboardingform_controller.js":70941,"controllers/otp_controller.js":99995,"controllers/popup_controller.js":9600,"controllers/post_controller.js":69421,"controllers/post_form_controller.js":8525,"controllers/profile_image_controller.js":75456,"controllers/profilecard_controller.js":35664,"controllers/react_mount_controller.js":78542,"controllers/recaptcha_controller.js":99892,"controllers/reorder_controller.js":32477,"controllers/reorderparent_controller.js":67406,"controllers/richtext_controller.js":58162,"controllers/select_controller.js":87852,"controllers/share_controller.js":54815,"controllers/signin_controller.js":68564,"controllers/spaces_sidebar_controller.js":40448,"controllers/standard_layout_controller.js":51576,"controllers/stimulus-tabs/tabs_controller.js":57955,"controllers/stripe_controller.js":12019,"controllers/time_controller.js":44046,"controllers/toggle_controller.js":44206,"controllers/trix_attachment_preview_controller.js":58532,"controllers/unread_posts_count_controller.js":59911,"controllers/unsaved_changes_controller.js":40269,"controllers/validation_controller.js":78204};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=67074},61926:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(81089),i=r(46347),o={preview:function(e){var t=e.subscriptionProcessorId,r=e.couponCode;return function(){return(0,n.UT)(i.q.subscriptions.coupons.preview({subscriptionProcessorId:t,couponCode:r}))}},create:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.q.subscriptions.coupons.create({subscriptionProcessorId:t}),r)},delete:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.q.subscriptions.coupons.delete({subscriptionProcessorId:t}))}}},79544:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var n=r(81089),i=r(50732),o={list:function(e){var t=e.params,r=void 0===t?{}:t;return(0,n.UT)(i.av.broadcasts.list({params:r}))},create:function(e){return(0,n.Cu)(i.av.broadcasts.create(),e)},show:function(e){var t=e.id;return(0,n.UT)(i.av.broadcasts.show({id:t}))},update:function(e){var t=e.id,r=e.body;return(0,n.aU)(i.av.broadcasts.show({id:t}),r)},sendNow:function(e){var t=e.id;return(0,n.gN)(i.av.broadcasts.sendNow({id:t}))},duplicate:function(e){var t=e.id;return(0,n.aU)(i.av.broadcasts.duplicate({id:t}))},recipientList:function(e){var t=e.id,r=e.params,o=void 0===r?{}:r;return(0,n.UT)(i.av.broadcasts.recipientList({id:t,params:o}))},report:function(e){var t=e.id;return(0,n.UT)(i.av.broadcasts.report({id:t}))},recipients:function(e){var t=e.id,r=e.params,o=void 0===r?{}:r;return(0,n.UT)(i.av.broadcasts.recipients({id:t,params:o}))},cancelSchedule:function(e){var t=e.id;return(0,n.gN)(i.av.broadcasts.cancelSchedule({id:t}))},rename:function(e){var t=e.id,r=e.body;return(0,n.gN)(i.av.broadcasts.rename({id:t}),r)},sendTestEmail:function(e){var t=e.id;return(0,n.gN)(i.av.broadcasts.sendTestEmail({id:t}))},deleteBroadcast:function(e){var t=e.id;return(0,n.pC)(i.av.broadcasts.deleteBroadcast({id:t}))}}},50688:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(81089),i=r(81649),o={create:function(e){return(0,n.Cu)(i.a.forms.create(),e)},index:function(e){return(0,n.UT)(i.a.forms.index(e))},show:function(e){return(0,n.UT)(i.a.forms.show(e))},update:function(e){return(0,n.gN)(i.a.forms.update(e.id),e)},destroy:function(e){return(0,n.pC)(i.a.forms.destroy(e))},duplicate:function(e){return(0,n.Cu)(i.a.forms.duplicate(e))}}},59687:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(81089),i=r(50732),o={show:function(){return(0,n.UT)(i.av.marketingEmailAddressSettings.show())},upsert:function(e){return(0,n.Cu)(i.av.marketingEmailAddressSettings.upsert(),e)},footerHtml:function(e){return(0,n.UT)(i.av.marketingEmailAddressSettings.footerHtml(e))}}},74543:(e,t,r)=>{"use strict";r.d(t,{i:()=>o});var n=r(81089),i=r(50732),o={index:function(e){return function(){return Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]})),(0,n.UT)(i.av.paywalls.index({params:e}))}},getPaywall:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.UT)(i.av.paywalls.show({paywallId:e,params:t}))},createPaywall:function(e){return(0,n.Cu)(i.av.paywalls.create(),e)},updatePaywall:function(e,t){return(0,n.aU)(i.av.paywalls.update({paywallId:e}),t)},deletePaywall:function(e){return(0,n.pC)(i.av.paywalls.delete({paywallId:e}))},updateMemberAccess:function(e){return(0,n.Cu)(i.av.paywalls.updateMemberAccess({paywallId:e}))}}},13051:(e,t,r)=>{"use strict";r.d(t,{k:()=>f});var n=r(64687),i=r.n(n),o=r(80129),a=r.n(o),s=r(81089),l=r(50732);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var f={show:function(e){return(0,s.t5)(l.av.paywallCheckout.show({paywallCheckoutPath:e}),{method:"GET"})},preview:function(){var e,t=(e=i().mark((function e(t){var r,n,o,c,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryParams,n=t.shouldIgnoreCommunityMember,o=t.locale,c="".concat(l.av.paywallCheckout.preview()).concat(a().stringify(u({checkout:r},o?{locale:o}:{}))),e.next=4,fetch(c,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:n?"omit":"same-origin"});case 4:return d=e.sent,e.abrupt("return",(0,s.QJ)(d));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),prepare:function(e){return(0,s.Cu)(l.av.paywallCheckout.prepare(),{checkout:e})},create:function(e){var t=e.formData;return(0,s.Cu)(l.av.paywallCheckout.create(),{checkout:t})},prepare_DEPRECATED:function(e,t){return(0,s.t5)(l.av.paywallCheckout.prepare(),{method:"POST",body:JSON.stringify({checkout:{community_id:e,paywall_price_id:t}})})},create_DEPRECATED:function(e){var t=e.formData;return(0,s.t5)(l.av.paywallCheckout.create(),{method:"POST",body:JSON.stringify({checkout:t})})},complete:function(e){return(0,s.t5)(l.av.paywallCheckout.complete(),{method:"POST",body:JSON.stringify({checkout:e})})},cancel:function(e){return(0,s.t5)(l.av.paywallCheckout.cancel(),{method:"POST",body:JSON.stringify({checkout:e})})}}},16617:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(81089),i=r(50732),o={index:function(e){var t=e.paywallId,r=e.skipDateValidations,o=e.couponStatuses;return function(){return(0,n.UT)(i.av.paywallCoupons.index({params:{paywall_id:t,skip_date_validations:r,status:o}}))}},createPaywallCoupon:function(e){var t=JSON.stringify({paywall_coupon:e});return(0,n.t5)(i.av.paywallCoupons.create(),{method:"POST",body:t,forReactQuery:!0})},updatePaywallCoupon:function(e,t){var r=JSON.stringify({paywall_coupon:t,forReactQuery:!0});return(0,n.t5)(i.av.paywallCoupons.update({paywallCouponId:e}),{method:"PATCH",body:r,forReactQuery:!0})},calculateDiscount:function(e){return(0,n.t5)(i.av.paywallCoupons.calculateDiscount({params:e}),{method:"GET",forReactQuery:!0})},destroyPaywallCoupon:function(e){return(0,n.t5)(i.av.paywallCoupons.destroy({paywallCouponId:e}),{method:"DELETE",forReactQuery:!0})}}},37443:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var n=r(81089),i=r(50732);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={index:function(e){var t=e.filters,r=e.order,o=e.page,s=e.perPage,l=e.searchKey,c=l?{search_key:l}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.subscriptions.index({params:a({filters:t,order:r,page:o,per_page:s},c)}))}},create:function(e){var t=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.create(),t)},cancelAndRefundSubscription:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}),r)},resumeSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}))},refundOptionsSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.UT)(i.av.admin.paywalls.subscriptions.refundOptions({subscriptionProcessorId:t}))}}},37342:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var n=r(81089),i=r(50732),o={index:function(e){return(0,n.UT)(i.av.paywalls.affiliates.index(e))},invite:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.invite(),e)},attributions:{create:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.attributions.create(),e)},destroy:function(e){return(0,n.pC)(i.av.paywalls.affiliates.attributions.destroy(),e)}}}},39320:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(81089),i=r(50732),o={create:function(e,t){return(0,n.Cu)(i.av.paywalls.communityMembers.billingInfo.create(e),{billing_info:t})},show:function(e){return(0,n.UT)(i.av.paywalls.communityMembers.billingInfo.show(e))},update:function(e,t){return(0,n.aU)(i.av.paywalls.communityMembers.billingInfo.update(e),{billing_info:t})}}},73546:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(81089),i=r(35501),o={create:function(e){return(0,n.Cu)(i.yT.create(),e)},refresh:function(){return(0,n.UT)(i.yT.refresh())}}},64666:(e,t,r)=>{"use strict";r.d(t,{W:()=>o});var n=r(81089),i=r(50732),o={list:function(e){var t=e.params,r=void 0===t?{}:t;return(0,n.UT)(i.av.segments.index({params:r}))},delete:function(e){var t=e.id;return(0,n.pC)(i.av.segments.detail({id:t}))},create:function(e){var t=e.title,r=e.rules,o=e.visible;return(0,n.Cu)(i.av.segments.index(),{title:t,rules:r,visible:o})},show:function(e){var t=e.id;return(0,n.UT)(i.av.segments.detail({id:t}))},update:function(e){var t=e.id,r=e.title,o=e.rules;return(0,n.aU)(i.av.segments.detail({id:t}),{title:r,rules:o})},duplicate:function(e){var t=e.id,r=e.title;return(0,n.Cu)(i.av.segments.duplicate({id:t}),{title:r})},usageStatus:function(e){var t=e.id;return(0,n.UT)(i.av.segments.usageStatus({id:t}))}}},3219:(e,t,r)=>{"use strict";r.d(t,{X:()=>G,c:()=>q});var n=r(67294),i=r(88767),o=r(69976),a=r(2725),s=r(25675),l=r(40160),c=r(24185),u=r(23078),d=r(40207),p=r(85893),f=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(4061),r.e(4158),r.e(1574),r.e(1106),r.e(8898),r.e(3079),r.e(626)]).then(r.bind(r,16709))})),m=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(f,{})})},b=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(2837),r.e(9541),r.e(8838),r.e(3252),r.e(4061),r.e(4040),r.e(4158),r.e(1574),r.e(8092),r.e(1106),r.e(1564),r.e(8898),r.e(2223),r.e(3492)]).then(r.bind(r,7827))})),h=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(b,{})})},v=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(4158),r.e(1106),r.e(8898),r.e(2056)]).then(r.bind(r,42056))})),y=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(v,{})})},g=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(4158),r.e(1574),r.e(1106),r.e(8898),r.e(6133),r.e(2359)]).then(r.bind(r,37843))})),_=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(g,{})})};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(1356),r.e(5363),r.e(4158),r.e(1574),r.e(1106),r.e(8898),r.e(6133),r.e(1506),r.e(2439)]).then(r.bind(r,98219))})),S=function(e){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(O,j({},e))})},P=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(4158),r.e(1106),r.e(8898),r.e(6381)]).then(r.bind(r,36381))})),k=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(P,{})})},C=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(4158),r.e(1574),r.e(1106),r.e(8898),r.e(6133),r.e(7967)]).then(r.bind(r,71858))})),N=function(){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(C,{})})};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=(0,u.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(3252),r.e(4593),r.e(1356),r.e(5363),r.e(4158),r.e(1574),r.e(1106),r.e(8898),r.e(6133),r.e(1506),r.e(3533)]).then(r.bind(r,26970))})),T=function(e){return(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(d.w,{}),children:(0,p.jsx)(D,A({},e))})},L=function(e){var t=e.hasEmail,r=void 0!==t&&t,n=e.otpSignInResponse,i=e.setOtpSignInResponse;return(0,p.jsxs)(l.VK,{children:[(0,p.jsx)(c.AW,{path:"/user/sign_in",component:_}),(0,p.jsx)(c.AW,{path:"/user/sign_up",children:(0,p.jsx)(S,{hasEmail:r,otpSignInResponse:n,setOtpSignInResponse:i})}),(0,p.jsx)(c.AW,{path:"/user/password",component:y}),(0,p.jsx)(c.AW,{path:"/users/login",component:N}),(0,p.jsx)(c.AW,{path:"/users/sign_in",component:N}),(0,p.jsx)(c.AW,{path:"/sign_in",component:N}),(0,p.jsx)(c.AW,{path:"/sign_up",children:(0,p.jsx)(T,{hasEmail:r,otpSignInResponse:n,setOtpSignInResponse:i})}),(0,p.jsx)(c.AW,{path:"/users/password/new",component:k}),(0,p.jsx)(c.AW,{path:"/communities",component:m}),(0,p.jsx)(c.AW,{path:"/settings/profile",component:h})]})},M=r(69647);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=(0,n.createContext)({});V.displayName="CurrentCommunityContext";var q=function(){return(0,n.useContext)(V)},Z=new i.QueryClient,G=function(e){var t=e.currentCommunity,r=e.currentCommunityPolicies,l=e.communityThemeSettings,c=void 0===l?{}:l,u=e.brandColor,d=void 0===u?{light:"",dark:""}:u,f=e.brandTextColor,m=void 0===f?{light:"",dark:""}:f,b=e.invitationToken,h=e.signUpOptions,v=e.notice,y=e.alert,g=e.errors,_=e.user_email,x=e.current_user,j=e.is_signup_password_matching,w=e.can_current_community_support_custom_login,O=e.authProviderAuthorizationUrl,S=e.authProviderName,P=e.authProviderSignInWithCircleLinkLabel,k=e.promotion_details,C=e.suggestedLanguage,N=F(F({},c),{},{brand_color:d,brand_text_color:m,current_theme:"default",is_custom:!1});(0,s.M2)();var I=R((0,n.useState)(null),2),A=I[0],E=I[1];return(0,p.jsx)(a.S,{children:(0,p.jsx)(i.QueryClientProvider,{client:Z,children:(0,p.jsx)(V.Provider,{value:{currentCommunity:t,currentCommunityPolicies:r,invitationToken:b,signUpOptions:h,errors:g,currentUser:x,userEmail:_,isSignupPasswordMatching:j,canCurrentCommunitySupportCustomLogin:w,authProviderAuthorizationUrl:O,authProviderName:S,suggestedLanguage:C,authProviderSignInWithCircleLinkLabel:P,promotion_details:k},children:(0,p.jsx)(s.f6,{theme:N,children:(0,p.jsxs)(M.V,{children:[(0,p.jsx)(o.I,{notice:v,alert:y}),(0,p.jsx)(L,{hasEmail:Boolean((null===g||void 0===g?void 0:g.email)&&_),otpSignInResponse:A,setOtpSignInResponse:E})]})})})})})}},24390:(e,t,r)=>{"use strict";r.d(t,{F:()=>It});var n=r(25362),i=r(88767),o=r(40160),a=r(90132),s=r(93788),l=r(47034),c=r(67294),u=r(96486),d=r(24185),p=r(30636),f=r(87536),m=r(76133),b=r(28661),h=r(42991),v=r(81089),y=r(50732),g=r(38503),_=r(18605),x=r(65587),j=r(66422),w=r(8246),O=r(67687),S=r(40179),P=r(20365),k=r(20781),C=r(35102),N=r(85893);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.id,r=e.updatedAt,n=I((0,c.useState)(),2),i=n[0],o=n[1];(0,P.e)(i);var a=(0,C.Dk)().setCurrentBotProfile;return(0,c.useEffect)((function(){t&&S.MW.previewChat({community_bot_profile_id:t}).then((function(e){o(e.id),a(e.community_bot_profile)})).catch((function(e){console.error(e)}))}),[t,a,r]),i?(0,N.jsx)("div",{className:"flex h-[calc(100vh-67px)] grow flex-col items-center justify-center py-10",children:(0,N.jsx)("div",{className:"bg-primary h-full min-w-[436px] max-w-[628px] rounded-xl px-6 py-4 shadow-xl md:w-1/2",children:(0,N.jsx)(k.o,{previewId:i,isDms:!0})})}):null},D=r(94184),T=r.n(D),L=r(94281),M=function(e){var t=e.children,r=e.path;return(0,N.jsx)(o.OL,{exact:!0,to:r,className:"hover:bg-secondary hover:border-dark flex items-center justify-center rounded-lg border border-transparent p-2.5 transition-all duration-150 ease-linear",activeClassName:"bg-tertiary",isActive:function(e,t){return t.pathname===r},children:t})},R=function(e){var t=e.label,r=e.path,n=e.icon,i=(0,d.$B)({path:r,exact:!0}),o=Boolean(i);return(0,N.jsx)(L.T,{interactive:!1,content:t,placement:"right",arrow:!1,children:(0,N.jsx)(M,{path:r,children:(0,N.jsx)(_.JO,{type:n,className:T()({"text-default":!o,"text-selector-active":o}),size:20})})},t)},B=r(86013),U=r(39068),F=r(98338),z=r(75126),V=function(){var e,t,r=(e=(0,F.wh)().currentCommunityMember,t=(0,d.UO)().botPublicId,[{label:(0,B.t)("community_bot.bot_builder.customize_page.title"),icon:"20-bot-customize",path:z.X.customize({botPublicId:t}),enabled:(0,U.vb)(e)},{label:(0,B.t)("community_bot.bot_builder.audience_page.title"),icon:"20-audience",path:z.X.audience({botPublicId:t}),enabled:(0,U.vb)(e)},{label:(0,B.t)("community_bot.bot_builder.behavior_page.title"),icon:"20-bot-behavior",path:z.X.behavior({botPublicId:t}),enabled:(0,U.vb)(e)},{label:(0,B.t)("community_bot.bot_builder.knowledge_page.title"),icon:"20-bot-content",path:z.X.knowledge({botPublicId:t}),enabled:(0,U.vb)(e)}]);return(0,N.jsx)("div",{className:"bg-primary border-r-primary flex h-[calc(100vh-67px)] w-16 shrink-0 flex-col items-center justify-start space-y-2 border-r p-3",children:r.map((function(e){var t=e.label,r=e.path,n=e.icon;return e.enabled?(0,N.jsx)(R,{label:t,path:r,icon:n},t):null}))})},q=r(81786),Z=function(){return(0,N.jsxs)("div",{className:"flex items-center justify-end gap-5",children:[(0,N.jsx)(q.z,{type:"submit",variant:"secondary",children:(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",children:(0,B.t)("community_bot.bot_builder.header_buttons.save.title")})}),(0,N.jsx)(q.z,{variant:"circle",onClick:function(){},children:(0,N.jsx)(w.Z.LabelSm,{color:"white",weight:"semibold",children:(0,B.t)("community_bot.bot_builder.header_buttons.enable.title")})})]})},G=r(54482),W=function(e){var t=e.onClick;return(0,N.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,N.jsx)(G.h,{name:"20-arrow-left",onClick:t,ariaLabel:(0,B.t)("back"),iconSize:20,buttonSize:32}),(0,N.jsx)("div",{className:"border-primary h-7 border-l"})]})},H=function(e){var t=e.isEditing,r=e.transformValue,n=e.onBlur,i=(0,(0,f.Gc)().register)("name"),o=i.ref,a=i.onChange,s=i.onBlur;return(0,N.jsx)("input",{autoComplete:"off",type:"text","data-1p-ignore":!0,ref:o,name:"name",spellCheck:"false",onChange:function(e){(0,u.isFunction)(r)&&(e.target.value=r(e.target.value)),a(e)},onBlur:function(e){s(e),null===n||void 0===n||n(e)},className:T()("placeholder:text-light w-full min-w-[6rem] max-w-full border-0 bg-transparent p-0 text-xl font-semibold placeholder:opacity-100 focus:outline-none focus:ring-0",{hidden:!t})})},Q=["isEditing"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Y=function(e){var t=e.isEditing,r=X(e,Q),n=(0,(0,f.Gc)().getValues)("name");return(0,N.jsx)("div",K(K({},r),{},{className:T()("flex h-7 min-w-0 flex-col",{hidden:t}),children:(0,N.jsx)("span",{className:T()("hover:border-dark focus:border-dark text-dark truncate border-b border-dashed border-transparent text-xl font-semibold"),children:n})}))};function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(){var e=ee((0,c.useState)(!1),2),t=e[0],r=e[1],n=(0,f.Gc)().setFocus;return(0,c.useEffect)((function(){t&&n("name")}),[t,n]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Y,{isEditing:t,onClick:function(){return r(!0)}}),(0,N.jsx)(H,{isEditing:t,onBlur:function(){return r(!1)}})]})},ne=function(e){var t=e.onClose;return(0,N.jsx)("div",{className:"text-dark border-primary bg-primary sticky flex w-full items-center justify-between border-b px-5 py-4",children:(0,N.jsxs)("div",{className:"bg-primary flex h-full w-full justify-between",children:[(0,N.jsxs)("div",{className:"flex w-full flex-row items-center gap-6 truncate",children:[(0,N.jsx)(W,{onClick:t}),(0,N.jsx)(re,{})]}),(0,N.jsx)("div",{className:"flex w-full items-center gap-6 overflow-auto lg:justify-center lg:overflow-visible"}),(0,N.jsx)("div",{className:"flex w-full items-center justify-end gap-3",children:(0,N.jsx)(Z,{})})]})})},ie=r(32641),oe=r(95580),ae=r(93),se=r(34774),le=r(36589);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=Object.assign((function(e){var t=e.defaultFilterNames,r=void 0===t?[]:t,n=e.stateFilters,i=e.className,o=e.children,a=e.platformFilters,s=e.profileFieldFilters,l=void 0===s?[]:s,c=(0,se.t)({defaultFilterNames:r}),d=ue(ue({},c),{},{displayedFilters:(0,u.merge)(c.displayedFilters,n),platformFilters:a,profileFieldFilters:l}),p=(0,le.I)().isV3Enabled;return(0,N.jsx)(oe.N.Provider,{value:d,children:(0,N.jsx)("div",{className:T()("bg-primary flex w-full items-center justify-between gap-x-1 rounded-b-md px-6 py-3",i,{"lg:px-9":p}),children:o})})}),{Panel:ae.S,ClearButton:ie.z}),fe=r(47139),me=r(98751),be=r(58118),he=r(14914),ve=r(57733),ye=r(35503),ge=r(10983),_e=r(86799),xe=r(14076),je=r(33112),we=r(64991),Oe=r(55431),Se=fe.f2.RoleFilter,Pe=fe.f2.SpaceGroupsFilterV2,ke=fe.f2.SpacesFilter,Ce=fe.f2.StatusFilter,Ne=fe.f2.MemberTagsFilter,Ie=fe.f2.PaywallsFilter,Ae=fe.f2.EventsFilter,Ee=fe.f2.HasPastDueSubscriptionFilter,De=fe.f2.JoinedCommunityDaysAgoFilter,Te=fe.f2.LastLoggedInDaysAgoFilter,Le=fe.f2.AvatarSet,Me=fe.f2.ActivityScoreFilter,Re=fe.f2.NameFilter,Be=fe.f2.BioFilter,Ue=fe.f2.HeadlineFilter,Fe=fe.f2.LocationFilter,ze=fe.f2.InvitationLinksFilter,Ve=fe.f2.LevelFilter,qe=[{name:"joined_community_days_ago",component:De,label:(0,h.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,h.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:Te,label:(0,h.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],Ze=[{name:"name",component:Re,label:(0,h.t)("members_directory.header.search.filters.name")},{name:"bio",component:Be,label:(0,h.t)("members_directory.header.search.filters.bio")},{name:"headline",component:Ue,label:(0,h.t)("members_directory.header.search.filters.headline")},{name:"location",component:Fe,label:(0,h.t)("members_directory.header.search.filters.location")},{name:"role",component:Se,label:(0,h.t)("members_directory.header.search.filters.role")},{name:"invitation_link_ids",component:ze,label:(0,h.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"spaces",component:ke,label:(0,h.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"space_groups",component:Pe,label:(0,h.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"online_status",component:Ce,label:(0,h.t)("members_directory.header.search.filters.online_status")},{name:"tags",component:Ne,label:(0,h.t)("members_directory.header.search.filters.tags.singular_title")},{name:"paywalls",component:Ie,label:(0,h.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:Ae,label:(0,h.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:Ee,label:(0,h.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(qe,[{name:"is_avatar_set",component:Le,label:(0,h.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:Me,label:(0,h.t)("members_directory.header.search.filters.activity_score")},{name:"level",component:Ve,label:(0,h.t)("members_directory.header.search.filters.level")}]);function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=function(e){var t=e.agent,r=e.filters,n=(0,g.TC)().isDarkAppearance,i=Ge((0,c.useState)(0),2),o=i[0],a=i[1],s=(0,f.Gc)().getValues,l=s("send_welcome_message"),d=s("welcome_message");(0,c.useEffect)((function(){(0,v.Cu)(y.av.communityBot.agents.audienceCount(),{members_filters:r||[]}).then((function(e){a(e.total_count)}))}),[r]);var p=function(){var e=(0,he.C)({platformFilters:Ze,component:me.L}),t=e.isLoadingProfileFields,r=e.customProfileFields,n=e.filteredDefaultFilters,i=(0,u.flow)(be.h,ge.$,ye.x,we.C,_e._,xe.S,Oe.n,je.s)(n);return{finalFilters:(0,ve.c)({filters:i,canShowActivityScoreDisabled:!0}),customProfileFields:r,isLoadingProfileFields:t}}(),S=p.finalFilters,P=p.isLoadingProfileFields,k=p.customProfileFields;return!t||P?null:(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)(ne,{onClose:function(){window.location.href="/settings/community-bot/agents"}}),(0,N.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(n?m:b,")")},children:[(0,N.jsx)(V,{}),(0,N.jsxs)("div",{className:"bg-primary w-[453px] flex-col",children:[(0,N.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,N.jsx)(w.Z.LabelLg,{weight:"semibold",children:(0,h.t)("community_bot.bot_builder.audience_page.title")})}),(0,N.jsxs)("div",{className:"h-auto px-6",children:[(0,N.jsx)(O.l.Label,{fieldId:"members_filters",label:(0,h.t)("community_bot.bot_builder.audience_page.filters_label"),hideBorder:!0}),(0,N.jsxs)("div",{className:"bg-secondary border-collapse rounded-t-md border px-6 py-3",children:[(0,N.jsx)(_.JO,{type:"16-audience",size:16,className:"mr-2"}),(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",color:"text-light",children:(0,h.t)("community_bot.bot_builder.audience_page.audience_label")}),(0,N.jsx)("span",{className:"ml-1",children:(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",color:"text-dark",children:o})})]}),(0,N.jsx)("div",{className:"border-collapse rounded-b-md border-x border-b",children:(0,N.jsx)(pe,{stateFilters:r,platformFilters:S,profileFieldFilters:k,children:(0,N.jsx)(pe.Panel,{children:(0,N.jsx)(x.kT,{})})})})]}),(0,N.jsx)("div",{className:"my-2 flex w-full items-center justify-center",children:(0,N.jsx)(_.JO,{type:"audience-dots"})}),(0,N.jsx)("div",{className:"h-auto px-6",children:(0,N.jsxs)("div",{className:"border-collapse rounded border px-6 pb-3",children:[(0,N.jsx)(O.l.Checkbox,{className:"inline w-auto font-normal",name:"send_welcome_message",description:(0,h.t)("community_bot.bot_builder.audience_page.welcome_message_tooltip"),isDescriptionTooltip:!0,label:(0,h.t)("community_bot.bot_builder.audience_page.send_welcome_message")}),l&&(0,N.jsx)(j.T,{className:"mt-2",editorClassName:"mt-2 bg-secondary p-3 text-sm border-t-md rounded-t-md rounded-br-md",disabled:!0,editable:!1,value:null===d||void 0===d?void 0:d.body,showMenuBar:!1})]})})]}),(0,N.jsx)(E,{id:t.id,updatedAt:t.updated_at})]})]})},Qe=r(89674);function Je(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=r(50768),tt=function(e){var t=e.option,r=t.label,n=t.disabled,i=t.description,o=e.checked,a=e.rightIcon,s=Boolean(r);return(0,N.jsx)("div",{className:T()("option-group__option-wrapper",{disabled:n&&!o,"!items-start":!0}),children:(0,N.jsxs)("div",{className:T()("option-group__option",{active:o,"!items-start":!0}),children:[s&&(0,N.jsxs)("div",{className:T()("flex w-full flex-row items-center justify-between gap-2"),children:[(0,N.jsxs)("p",{className:"option-group__option-label flex items-baseline gap-2 !text-left",children:[(0,N.jsx)("span",{className:"text-[14px] font-semibold leading-5",children:r}),n&&(0,N.jsx)("span",{id:"coming-soon-pill",className:"inline-flex items-center justify-center rounded-[64px] bg-zinc-200 px-3 py-1 font-[InterVariable,sans-serif] text-[10px] font-bold leading-[10px] text-zinc-950",children:(0,h.t)("community_bot.bot_builder.behavior_page.soon")})]}),a&&(0,N.jsx)("div",{className:T()("option__icon",{active:o}),children:a})]}),i&&(0,N.jsx)("p",{className:"option-group__option-description !text-left",children:i})]})})},rt=function(e){var t=e.name,r=e.className,n=e.options,i=e.onChange,o=e.fullWidth,a=void 0!==o&&o,s=(0,f.Gc)().control;return(0,N.jsx)(f.Qr,{control:s,name:t,render:function(e){var t=e.field,o=t.onChange,s=t.value;return(0,N.jsx)("div",{children:(0,N.jsx)(et.E,{value:s,onChange:function(e){null===i||void 0===i||i(e),o(e)},className:T()("bot-builder-behavior-option-group",r,{"bot-builder-behavior-option-group--full-width":a}),children:n.map((function(e){return(0,N.jsx)(et.E.Option,{value:e.value,className:T()({"pointer-events-none":e.disabled}),children:function(t){var r=t.checked;return(0,N.jsx)(tt,{checked:r,option:e,rightIcon:e.rightIcon})}},e.value)}))})})}})},nt=function(e){var t=e.agent,r=(0,g.TC)().isDarkAppearance;if(!t)return null;var n={name:t.name,purpose:t.purpose,answer_type:t.answer_type,tone:t.tone};return(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)(ne,{onClose:function(){window.location.href="/settings/community-bot/agents"}}),(0,N.jsxs)("div",{className:"flex",style:{backgroundImage:"url(".concat(r?m:b,")")},children:[(0,N.jsx)(V,{}),(0,N.jsxs)("div",{className:"bg-primary w-[453px] flex-col",children:[(0,N.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,N.jsx)(w.Z.LabelLg,{weight:"semibold",children:(0,B.t)("community_bot.bot_builder.behavior_page.title")})}),(0,N.jsxs)("div",{className:"h-auto px-6",children:[(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)(O.l.Label,{fieldId:"purpose",label:(0,B.t)("community_bot.bot_builder.behavior_page.form.purpose.label"),hideBorder:!0}),(0,N.jsx)(L.T,{content:(0,B.t)("community_bot.bot_builder.behavior_page.form.purpose.tooltip_text"),children:(0,N.jsx)(_.JO,{type:"16-question-mark",className:"ml-1 mt-1",size:16,useWithStrokeCurrentColor:!0})})]}),(0,N.jsx)(O.l.Input,{name:"purpose",variant:"textarea",defaultValue:n.purpose,rows:4,placeholder:(0,B.t)("community_bot.bot_builder.behavior_page.form.purpose.placeholder")}),(0,N.jsx)(O.l.Label,{fieldId:"answer_type",label:(0,B.t)("community_bot.bot_builder.behavior_page.form.answer_type.label"),hideBorder:!0}),(0,N.jsx)(rt,{fullWidth:!0,name:"answer_type",options:[{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.answer_type.ai_generated"),value:"ai-generated",rightIcon:(0,N.jsx)(_.JO,{type:"24-ai-list-sparkle",size:24,useWithStrokeCurrentColor:!0})},{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.answer_type.custom"),value:"custom",disabled:!0,rightIcon:(0,N.jsx)(_.JO,{type:"24-note-text",size:24,useWithStrokeCurrentColor:!0})}]}),(0,N.jsx)(O.l.Label,{fieldId:"tone",label:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.label"),hideBorder:!0}),(0,N.jsx)(rt,{className:"grid grid-cols-2 gap-4",name:"tone",options:[{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.normal_label"),value:"normal",rightIcon:(0,N.jsx)(_.JO,{type:"20-normal-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.normal_description")},{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.friendly_label"),value:"friendly",rightIcon:(0,N.jsx)(_.JO,{type:"20-friendly-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.friendly_description")},{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.short_and_sweet_label"),value:"short-and-sweet",rightIcon:(0,N.jsx)(_.JO,{type:"20-short-and-sweet-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.short_and_sweet_description")},{label:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.descriptive_label"),value:"descriptive",rightIcon:(0,N.jsx)(_.JO,{type:"20-descriptive-behavior-type",size:24,useWithStrokeCurrentColor:!0}),description:(0,B.t)("community_bot.bot_builder.behavior_page.form.tone.descriptive_description")}]})]})]}),(0,N.jsx)(E,{id:t.id,updatedAt:t.updated_at})]})]})},it=r(31280),ot=r(41389),at=r(48616),st=r(69647),lt=function(){return(0,N.jsxs)("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,N.jsxs)("g",{clipPath:"url(#clip0_5608_19387)",children:[(0,N.jsx)("rect",{x:"0.5",width:"64",height:"64",rx:"32",fill:"url(#paint0_radial_5608_19387)"}),(0,N.jsx)("rect",{x:"0.5",width:"64",height:"64",fill:"url(#paint1_linear_5608_19387)"}),(0,N.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_5608_19387)",children:(0,N.jsx)("path",{d:"M43.5 51L22.5 39V38H42.5H57.5L43.5 51Z",fill:"url(#paint2_linear_5608_19387)"})}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1066 28.92V34.2158C25.1066 35.0397 25.3078 35.571 25.5425 35.925C25.7823 36.2868 26.111 36.5436 26.4781 36.7283C26.8506 36.9155 27.2387 37.0156 27.5446 37.0669C27.6945 37.092 27.8165 37.1041 27.8959 37.1098C27.9354 37.1126 27.9637 37.1138 27.9788 37.1143L27.9897 37.1146H37.1463C37.9615 37.1146 38.4863 36.9135 38.8365 36.6788C39.1952 36.4383 39.4512 36.1078 39.6358 35.7366C39.8228 35.3604 39.9229 34.9683 39.9741 34.6593C39.9992 34.5078 40.0113 34.3844 40.017 34.304C40.0198 34.264 40.021 34.2353 40.0216 34.2198L40.0219 34.2084V28.9127C40.0219 28.0887 39.8207 27.5575 39.5859 27.2034C39.3461 26.8416 39.0175 26.5848 38.6503 26.4002C38.2778 26.2129 37.8897 26.1128 37.5838 26.0615C37.4339 26.0364 37.3119 26.0243 37.2325 26.0186C37.193 26.0158 37.1647 26.0146 37.1496 26.0141L37.1387 26.0138H27.9821C27.1669 26.0138 26.6421 26.2149 26.2919 26.4496C25.9332 26.6901 25.6772 27.0206 25.4926 27.3918C25.3056 27.768 25.2055 28.1601 25.1543 28.4692C25.1292 28.6206 25.1172 28.744 25.1114 28.8244C25.1086 28.8644 25.1074 28.8931 25.1069 28.9086L25.1066 28.92ZM37.1463 24.7105C37.1463 23.4072 37.147 23.4072 37.1476 23.4072L37.1491 23.4072L37.1522 23.4072L37.1597 23.4073L37.1794 23.4075C37.1946 23.4078 37.2138 23.4082 37.2369 23.409C37.283 23.4105 37.3445 23.4134 37.4192 23.4188C37.5683 23.4295 37.7728 23.4503 38.0147 23.4908C38.4923 23.5709 39.1489 23.7334 39.8212 24.0714C40.4987 24.412 41.2148 24.9431 41.7584 25.7631C42.3073 26.591 42.6284 27.6355 42.6284 28.9127V34.2158H41.3251C42.6284 34.2158 42.6284 34.2164 42.6284 34.2171L42.6284 34.2185L42.6284 34.2216L42.6284 34.2291L42.6281 34.2487C42.6279 34.2639 42.6274 34.2831 42.6267 34.3061C42.6252 34.3522 42.6223 34.4138 42.617 34.4887C42.6064 34.638 42.5858 34.8429 42.5456 35.0855C42.4662 35.5643 42.3051 36.2227 41.9698 36.8971C41.632 37.5764 41.1045 38.2964 40.2879 38.8439C39.4628 39.397 38.4206 39.7212 37.1463 39.7212H27.9821V38.4179C27.9821 39.7212 27.9815 39.7212 27.9808 39.7212L27.9794 39.7212L27.9762 39.7212L27.9687 39.7211L27.949 39.7209C27.9338 39.7206 27.9146 39.7202 27.8915 39.7194C27.8455 39.7179 27.784 39.715 27.7092 39.7096C27.5601 39.6989 27.3556 39.6781 27.1137 39.6376C26.6361 39.5576 25.9795 39.395 25.3073 39.057C24.6297 38.7164 23.9136 38.1853 23.37 37.3653C22.8212 36.5375 22.5 35.4929 22.5 34.2158V28.9127H23.7983C22.5 28.9127 22.5 28.912 22.5 28.9113L22.5 28.9099L22.5 28.9068L22.5001 28.8993L22.5003 28.8797C22.5005 28.8646 22.501 28.8453 22.5017 28.8223C22.5033 28.7762 22.5061 28.7147 22.5114 28.6398C22.522 28.4904 22.5426 28.2855 22.5828 28.043C22.6622 27.5642 22.8233 26.9057 23.1587 26.2313C23.4964 25.552 24.0239 24.832 24.8405 24.2846C25.6656 23.7314 26.7079 23.4072 27.9821 23.4072H37.1463V24.7105ZM40.0219 34.207C40.0219 34.2068 40.0219 34.2067 40.0219 34.2069L40.0219 34.207Z",fill:"white"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.565 18C33.2848 18 33.8683 18.5835 33.8683 19.3033V24.7097C33.8683 25.4295 33.2848 26.013 32.565 26.013C31.8452 26.013 31.2617 25.4295 31.2617 24.7097V19.3033C31.2617 18.5835 31.8452 18 32.565 18Z",fill:"white"}),(0,N.jsx)("path",{opacity:"0.6",fillRule:"evenodd",clipRule:"evenodd",d:"M36.1123 43.1968C36.1123 43.9166 35.6062 44.5001 34.9818 44.5001L30.292 44.5001C29.6676 44.5001 29.1615 43.9166 29.1615 43.1968C29.1615 42.4771 29.6676 41.8936 30.292 41.8936L34.9818 41.8936C35.6062 41.8936 36.1123 42.4771 36.1123 43.1968Z",fill:"white"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.357 29.4858C30.0768 29.4858 30.6603 30.0693 30.6603 30.7891V32.3425C30.6603 33.0623 30.0768 33.6458 29.357 33.6458C28.6372 33.6458 28.0537 33.0623 28.0537 32.3425V30.7891C28.0537 30.0693 28.6372 29.4858 29.357 29.4858Z",fill:"white"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.772 29.4858C36.4918 29.4858 37.0753 30.0693 37.0753 30.7891V32.3425C37.0753 33.0623 36.4918 33.6458 35.772 33.6458C35.0522 33.6458 34.4688 33.0623 34.4688 32.3425V30.7891C34.4688 30.0693 35.0522 29.4858 35.772 29.4858Z",fill:"white"})]}),(0,N.jsxs)("defs",{children:[(0,N.jsxs)("filter",{id:"filter0_f_5608_19387",x:"20.5",y:"36",width:"39",height:"17",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,N.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,N.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,N.jsx)("feGaussianBlur",{stdDeviation:"1",result:"effect1_foregroundBlur_5608_19387"})]}),(0,N.jsxs)("radialGradient",{id:"paint0_radial_5608_19387",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(32.5 32) rotate(90) scale(32)",children:[(0,N.jsx)("stop",{stopColor:"#469AFC"}),(0,N.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,N.jsxs)("linearGradient",{id:"paint1_linear_5608_19387",x1:"32.5",y1:"0",x2:"32.5",y2:"64",gradientUnits:"userSpaceOnUse",children:[(0,N.jsx)("stop",{stopColor:"#516DF1"}),(0,N.jsx)("stop",{offset:"1",stopColor:"#6C47D2"})]}),(0,N.jsxs)("linearGradient",{id:"paint2_linear_5608_19387",x1:"38.5",y1:"42",x2:"47.5",y2:"47",gradientUnits:"userSpaceOnUse",children:[(0,N.jsx)("stop",{}),(0,N.jsx)("stop",{offset:"1",stopColor:"#6750D9"})]}),(0,N.jsx)("clipPath",{id:"clip0_5608_19387",children:(0,N.jsx)("rect",{x:"0.5",width:"64",height:"64",rx:"32",fill:"white"})})]})]})},ct=function(e){var t=e.avatarUrl,r=e.response;return t||null!==r&&void 0!==r&&r.blob_url?(0,N.jsx)("img",{loading:"eager",src:(null===r||void 0===r?void 0:r.blob_url)||t,alt:(0,h.t)("community_bot.bot_builder.customize_page.avatar"),className:"h-[64px] w-[64px] rounded-full"}):(0,N.jsx)(lt,{})};function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=function(e){var t=e.avatarUrl,r=(0,st.p)().error,n=(0,at.A)(),i=n.uploadFile,o=n.status,a=n.response,s=(0,f.Gc)(),l=s.register,u=s.setValue;l("avatar");var d=(0,ot.uI)({maxFiles:1,multiple:!1,accept:{"image/*":[".jpeg",".gif",".png",".jpg"]},onDropAccepted:function(e){i(e[0])},onDropRejected:function(){r((0,h.t)("community_bot.bot_builder.customize_page.avatar_invalid"))},disabled:!1}),p=d.getRootProps,m=d.getInputProps;return(0,c.useEffect)((function(){null!==a&&void 0!==a&&a.signed_id&&u("avatar",a.signed_id)}),[a,u]),(0,N.jsxs)("div",dt(dt({},p()),{},{className:"flex h-28 w-full cursor-pointer items-center justify-center rounded-md border",children:[(0,N.jsx)("input",dt(dt({},m()),{},{type:"file",className:"hidden"})),"uploading"===o?(0,N.jsx)(_.JO,{type:"loader"}):(0,N.jsx)(ct,{avatarUrl:t,response:a})]}))},mt=function(e){var t=e.agent,r=(0,g.TC)().isDarkAppearance;return t?(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)(ne,{onClose:function(){window.location.href="/settings/community-bot/agents"}}),(0,N.jsxs)("div",{className:"flex h-full items-stretch justify-start",style:{backgroundImage:"url(".concat(r?m:b,")")},children:[(0,N.jsx)(V,{}),(0,N.jsxs)("div",{className:"bg-primary w-[453px] shrink-0 flex-col",children:[(0,N.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,N.jsx)(w.Z.LabelLg,{weight:"semibold",children:(0,h.t)("community_bot.bot_builder.customize_page.title")})}),(0,N.jsxs)("div",{className:"h-auto px-6",children:[(0,N.jsx)(O.l.Label,{fieldId:"avatar",label:(0,h.t)("community_bot.profiles.avatar"),hideBorder:!0}),(0,N.jsx)(L.T,{content:(0,h.t)("community_bot.bot_builder.customize_page.avatar_tooltip_text"),children:(0,N.jsx)(ft,{avatarUrl:t.avatar_url})}),(0,N.jsx)(O.l.Label,{fieldId:"welcome_message",label:(0,h.t)("community_bot.profiles.welcome_message"),hideBorder:!0}),(0,N.jsx)(it.$,{mode:"all",name:"welcome_message.body",className:"h-28 rounded-md border",editorClassName:"p-2 h-28 overflow-scroll quick-post-modal--v2",placeholder:(0,h.t)("community_bot.profiles.welcome_message")}),(0,N.jsx)(O.l.Label,{fieldId:"bio",label:(0,h.t)("community_bot.profiles.bio"),hideBorder:!0}),(0,N.jsx)(it.$,{mode:"all",name:"bio.body",className:"h-28 rounded-md border",editorClassName:"p-2 h-28 overflow-scroll quick-post-modal--v2",placeholder:(0,h.t)("community_bot.profiles.bio")})]})]}),(0,N.jsx)(E,{id:t.id,updatedAt:t.updated_at})]})]}):null},bt=r(40135),ht=r(62547),vt=function(e){var t=e.name,r=e.icon,n=e.count,i=e.tooltipContent;return(0,N.jsx)("div",{className:"border-secondary dark:border-primary rounded-lg border-[1.5px] py-2 pl-3 pr-6",children:(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsx)("div",{className:"dark:text-light flex h-10 w-10 justify-center align-middle",children:r?(0,N.jsx)(_.JO,{type:r,size:20}):(0,N.jsx)("div",{className:"content-center",children:(0,N.jsx)("img",{src:bt,alt:(0,B.t)("community_bot.bot_builder.knowledge_page.circle_logo"),loading:"eager",className:"h-5 w-5"})})}),(0,N.jsxs)("div",{className:"text-dark flex grow items-center gap-2",children:[(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",as:"div",textTransform:"mb-px",children:(0,B.t)("community_bot.bot_builder.knowledge_page.".concat(t))}),"number"===typeof n&&(0,N.jsx)("div",{className:"border-primary flex h-4 min-w-[20px] items-center justify-center rounded border px-1 text-[11px] font-semibold leading-4 tracking-[-0.4px]",children:n}),i&&(0,N.jsx)(L.T,{content:i,children:(0,N.jsx)("div",{className:"flex items-center",children:(0,N.jsx)(_.JO,{type:"16-question-mark",size:16})})})]}),(0,N.jsx)(ht.Z,{name:t,shouldUseCheckmark:!0,variant:"small"})]})})},yt=function(e){var t=e.profile;return(0,N.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,N.jsx)(vt,{name:"use_community_knowledge",icon:"20-book",count:t.spaces_count}),(0,N.jsx)(vt,{name:"use_custom_snippets",icon:"20-note",count:t.snippets_count}),(0,N.jsx)(vt,{name:"use_platform_support",tooltipContent:(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",color:"text-dark-inverse",children:(0,h.t)("community_bot.bot_builder.knowledge_page.use_platform_support_tooltip_title")}),(0,N.jsxs)(w.Z.BodySm,{color:"text-dark-inverse",children:[(0,h.t)("community_bot.bot_builder.knowledge_page.use_platform_support_tooltip_description"),(0,N.jsx)("a",{className:"ml-1",href:"https://help.circle.so",target:"_blank",rel:"noreferrer",children:(0,h.t)("community_bot.bot_builder.knowledge_page.learn_more")})]})]})})]})},gt=function(e){var t=e.agent,r=(0,g.TC)().isDarkAppearance;return t?(0,N.jsxs)("div",{children:[(0,N.jsx)(ne,{onClose:function(){window.location.href="/settings/community-bot/agents"}}),(0,N.jsxs)("div",{className:"flex h-full",style:{backgroundImage:"url(".concat(r?m:b,")")},children:[(0,N.jsx)(V,{}),(0,N.jsxs)("div",{className:"bg-primary flex w-[453px] flex-col",children:[(0,N.jsx)("div",{className:"border-primary border-b px-6 py-5",children:(0,N.jsx)(w.Z.LabelLg,{weight:"semibold",children:(0,B.t)("community_bot.bot_builder.knowledge_page.title")})}),(0,N.jsxs)("div",{className:"px-6 py-5",children:[(0,N.jsx)("div",{className:"mb-4",children:(0,N.jsx)(w.Z.LabelSm,{weight:"semibold",children:(0,B.t)("community_bot.bot_builder.knowledge_page.sources_label")})}),(0,N.jsx)(yt,{profile:t})]})]}),(0,N.jsx)(E,{id:t.id,updatedAt:t.updated_at})]})]}):null},_t=r(5606),xt=r(78417),jt=r(40569);function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){St(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function St(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct=function(){return(0,N.jsx)(jt.D,{})},Nt=function(){var e=window.location.pathname.split("/"),t=parseInt(e[e.length-2]),r=Pt((0,c.useState)([]),2),n=r[0],i=r[1],o=(0,p.q_)({id:t}).data,a=(0,p.vQ)({id:t}).mutate,s=function(e,t){return{updateFilters:(0,c.useCallback)((function(r,n){t(function(){if((0,Qe.N)(n))return e.filter((function(e){return r!==e.id}));var t=e.some((function(e){return r===e.id})),i=(0,u.omit)(n,["isInitialOpen"]);return t?e.map((function(e){return e.id===r?Xe(Xe({},e),i):e})):[].concat(Je(e),[i])}())}),[e,t])}}(n,i),l=s.updateFilters;return(0,c.useEffect)((function(){i((null===o||void 0===o?void 0:o.members_filters)||[])}),[o,i]),o?(0,N.jsx)(fe.OL,{filterParams:n,onApply:function(e,t){l(e,t)},onClearAll:function(){return i([])},children:(0,N.jsx)(O.l,{encType:"multipart/form-data",defaultValues:(0,u.omit)(o,"members_filters"),onSubmit:function(e){a(Ot(Ot({},e),{},{members_filters:n}))},children:(0,N.jsx)(xt.S,{renderFunc:Ct,children:(0,N.jsxs)(d.rs,{children:[(0,N.jsx)(_t.i,{path:"/settings/community-bot/bot-builder/:botPublicId/audience",render:function(e){return(0,N.jsx)(He,Ot(Ot({},e),{},{agent:o,filters:n}))}}),(0,N.jsx)(_t.i,{path:"/settings/community-bot/bot-builder/:botPublicId/customize",render:function(e){return(0,N.jsx)(mt,Ot(Ot({},e),{},{agent:o}))}}),(0,N.jsx)(_t.i,{path:"/settings/community-bot/bot-builder/:botPublicId/behavior",render:function(e){return(0,N.jsx)(nt,Ot(Ot({},e),{},{agent:o}))}}),(0,N.jsx)(_t.i,{path:"/settings/community-bot/bot-builder/:botPublicId/knowledge",render:function(e){return(0,N.jsx)(gt,Ot(Ot({},e),{},{agent:o}))}})]})})})}):null},It=function(){var e=new i.QueryClient;return(0,N.jsx)(i.QueryClientProvider,{client:e,children:(0,N.jsx)(o.VK,{children:(0,N.jsx)(l.f,{children:(0,N.jsx)(st.V,{children:(0,N.jsx)(n.ZP.Provider,{children:(0,N.jsx)(s.H,{children:(0,N.jsx)(a.C,{children:(0,N.jsx)(Nt,{})})})})})})})})}},29930:(e,t,r)=>{"use strict";r.d(t,{g:()=>Md});var n=r(67294),i=r(64687),o=r.n(i),a=r(43784);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var l=function(){var e,t=(e=o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pt"!==(null===(t=window)||void 0===t?void 0:t.locale)){e.next=7;break}return e.next=3,r.e(205).then(r.bind(r,68994));case 3:n=e.sent,(0,a.Z)({locale:n.default,weekStartsOn:1}),e.next=11;break;case 7:return e.next=9,Promise.resolve().then(r.bind(r,41695));case 9:i=e.sent,(0,a.Z)({locale:i.default});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),c=r(78527),u=r(3852);function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var p=function(){var e,t=(e=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pt"!==(0,u.cm)()){e.next=5;break}return e.next=3,r.e(9793).then(r.t.bind(r,6924,23));case 3:t=e.sent,c.default.setDefaults({locale:t.Portuguese});case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),f=r(19647),m=r(38503),b=r(11049),h=r(59887),v=r(42393),y=r(14692),g=r(85893),_=[h.Cz,y.Rl,h.x3,b.yB,v.hg],x=function(e){var t=e.children;return _.reduceRight((function(e,t){return(0,g.jsx)(t,{children:e})}),t)},j=r(25675),w=r(78417),O=r(40569),S=r(38704),P=r(86013),k=r(88666),C=r(96486),N=r(98338),I=r(18605),A=r(27887),E=r(31979),D=function(){var e,t,r,n,i=(0,N.wh)(),o=i.currentCommunityMember,a=i.isViewOnlyMasquerading,s=i.masqueradingEntity,l=(0,m.wC)().masquerade_referrer_url,c=(0,E.D)(),u=!!l&&!c,d=(0,v.Vu)(),p=d.isBannerVisible,f=d.openViewMasqueradingSearch,b=d.openEditMasqueradingSearch,h=d.hideBanner;return u||p?(p?(e=(0,P.t)("view_only_masquerading.banner.title_not_selected"),t=(0,P.t)("view_only_masquerading.banner.title_selected"),r=(0,P.t)("view_only_masquerading.banner.placeholder"),n=f):a?(e=(0,P.t)("view_only_masquerading.banner.title_selected"),t=(0,P.t)("view_only_masquerading.banner.title_selected"),r=(0,C.truncate)(s.name,{length:50}),n=f):(e=(0,P.t)("masquerade.banner.title"),t=(0,P.t)("masquerade.banner.title"),r=(0,C.truncate)(o.name,{length:50}),n=b),(0,g.jsxs)("div",{className:"flex h-12 items-center justify-between bg-gray-900 px-6 dark:bg-gray-700",children:[(0,g.jsx)("div",{})," ",(0,g.jsxs)("div",{className:"flex","data-testid":"masquerade-banner",children:[(0,g.jsx)("div",{className:"mr-2",children:(0,g.jsx)(A.Di,{weight:"semibold",color:"text-feature-dark",children:e})}),(0,g.jsxs)("button",{type:"button",onClick:n,className:"flex","aria-label":t,children:[(0,g.jsx)("div",{className:"border-dark dark:border-secondary border-b border-dashed",children:(0,g.jsx)(A.Di,{color:"text-feature-dark",children:r})}),(0,g.jsx)("div",{children:(0,g.jsx)(I.JO,{type:"20-chevron-down-sm",className:"text-feature-dark ml-[3px]","aria-hidden":!0})})]})]}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{type:"button",onClick:function(){h(),l&&(window.location.href=l)},children:(0,g.jsx)(A.Di,{color:"text-feature-dark",weight:"semibold",children:(0,P.t)("view_only_masquerading.banner.exit")})})})]})):null},T=r(39068),L=r(24185),M=r(81786),R=r(29402),B=r(33777),U=r(10161),F=["/live/:roomSlug/not_supported","/live/:roomSlug/record","/live/:roomSlug/mobile","/live/:roomSlug/public","/live/:roomSlug","/features/visual-refresh"],z=function(e){var t=e.optInText,r=e.optInCTAContent,n=e.isAdmin,i=void 0!==n&&n,o=e.shouldDisplayV3OptInBar,a=void 0!==o&&o,s=(0,R.T)().isSettingsRoute,l=(0,L.$B)(F),c=(0,L.k6)();return!a||!i||l||s?null:(0,g.jsx)(B.E,{children:(0,g.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,g.jsx)(U.w,{content:t}),(0,g.jsx)(M.z,{variant:"secondary",isFullRounded:!0,onClick:function(){c.push("/features/visual-refresh")},children:r})]})})},V=r(45611),q=function(e){var t=e.optInText,r=e.optInCTAContent,n=(0,N.wh)().currentCommunityMember,i=(0,T.vb)(n),o=(0,V.F)();return(0,g.jsx)(z,{optInText:t,optInCTAContent:r,isAdmin:i,shouldDisplayV3OptInBar:o})},Z=r(69976),G=r(73935),W=r(52746),H=function(){return null},Q=r(47031),J=r(94184),K=r.n(J),$=r(88767),X=r(5476),Y=r(43535),ee=function(e){var t=e.isOpen,r=e.onClick;return(0,g.jsx)(Y.T,{children:(0,g.jsx)("button",{type:"submit",className:"bg-support-widget float-right hidden h-14 w-14 self-end rounded-full text-white shadow-md lg:block",onClick:r,"aria-label":(0,P.t)("support_widget.floating_button_aria_label"),"aria-expanded":t,"aria-controls":"support-widget",children:(0,g.jsx)(I.JO,{type:t?"20-chevron-down":"chat",size:t?20:null})})})},te=r(61484),re=r(49338),ne=r(42398),ie=function(e){var t=e.onClick,r=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e=r.current;if(e){var t=e.offsetHeight;e.style.setProperty("--arrow-top","".concat(t,"px"))}}),[]),(0,g.jsxs)("div",{ref:r,className:"support-widget-onboarding bg-circle w-[303px] rounded-lg p-6 text-white",children:[(0,g.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,g.jsx)("img",{loading:"lazy",src:te,alt:(0,P.t)("support_widget.circle_logo_alt_text"),className:"h-8 w-8"}),(0,g.jsx)("button",{type:"button",className:"-mt-1",onClick:t,children:(0,g.jsx)(I.JO,{type:"20-close",size:20})})]}),(0,g.jsx)(ne.o,{color:"text-white",children:(0,P.t)("support_widget.onboarding.title")}),(0,g.jsx)(re.Q,{color:"text-white",children:(0,P.t)("support_widget.onboarding.content")})]})},oe=r(45697),ae=r.n(oe),se=r(58759);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=function(e){var t=e.children,r=(0,L.TH)(),i=(0,W.J1)().collapseWidget;return(0,n.useEffect)((function(){(0,se.qQ)(ce(ce({},(0,se.$o)()),{},{location:r.pathname})),"/form"===r.pathname||r.pathname.startsWith("/posts/")||r.pathname.startsWith("/news/")||i()}),[r.pathname,i]),t};de.propTypes={children:ae().node};var pe=r(40160),fe=function(e){return K()({"text-circle link-active":e,"text-default link-inactive":!e},"relative flex flex-col gap-2 hover:text-circle focus:text-circle w-1/5 text-center")},me=function(){var e=(0,W.J1)().unreadConversations,t=(0,W.J1)().isDraftConversationPresent;return(0,g.jsxs)("div",{className:"flex h-[76px] w-full items-center justify-evenly text-xs",children:[(0,g.jsxs)(pe.OL,{to:"/",className:fe,isActive:function(e,t){return"/"===t.pathname},children:[(0,g.jsx)(I.JO,{type:"home-v2",viewBox:"0 0 16 16"}),(0,g.jsx)("span",{children:(0,P.t)("support_widget.bottom_menu.home")})]}),(0,g.jsxs)(pe.OL,{to:"/conversations",className:fe,children:[(0,g.jsx)(I.JO,{type:"16-messages",viewBox:"0 0 16 16"}),e.length>0?(0,g.jsx)("span",{className:"absolute right-5 top-[-2px] h-2 w-2 rounded-full bg-blue-600"}):t&&(0,g.jsx)("span",{className:"bg-dark absolute right-5 top-[-2px] h-2 w-2 rounded-full"}),(0,g.jsx)("span",{children:(0,P.t)("support_widget.bottom_menu.messages")})]}),(0,g.jsxs)(pe.OL,{to:"/space_groups",className:fe,isActive:function(e,t){var r;return t.pathname.startsWith("/space_groups")||t.pathname.startsWith("/spaces")||t.pathname.startsWith("/posts")&&!["848480","3422440","3701502"].includes(null===(r=t.pathname.split("/"))||void 0===r?void 0:r.slice(-1)[0])},children:[(0,g.jsx)(I.JO,{type:"question-mark",viewBox:"0 0 24 24"}),(0,g.jsx)("span",{children:(0,P.t)("support_widget.bottom_menu.help")})]}),(0,g.jsxs)(pe.OL,{to:"/news",className:fe,isActive:function(e,t){return t.pathname.startsWith("/news")},children:[(0,g.jsx)(I.JO,{type:"announcements",size:20}),(0,g.jsx)("span",{children:(0,P.t)("support_widget.bottom_menu.news")})]}),(0,g.jsxs)(pe.OL,{to:"/events",className:fe,isActive:function(e,t){return t.pathname.startsWith("/events")},children:[(0,g.jsx)(I.JO,{type:"support-widget-calendar",size:20}),(0,g.jsx)("span",{children:(0,P.t)("support_widget.bottom_menu.events")})]})]})},be=function(e){var t=e.children,r=(0,L.TH)(),n=(0,W.J1)().isExpanded;return"/ask"!==r.pathname&&!r.pathname.match(/\/conversations\/\d+/)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:K()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border-x border-t lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(580px,100vh-224px)] w-[688px]":n,"h-[min(580px,100vh-224px)] max-h-[580px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t}),(0,g.jsx)("div",{className:"border-primary bg-primary hidden origin-bottom-right rounded-b-lg border-y border-l shadow-lg lg:flex",children:(0,g.jsx)(me,{})})]}):(0,g.jsx)("div",{className:K()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(658px,100vh-224px)] w-[688px]":n,"h-[min(658px,100vh-224px)] max-h-[658px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t})},he=r(47790),ve=r(8246),ye=r(94281),ge=r(67687),_e=r(50732),xe="type_live_chat",je=function(e){var t=e.onClick,r=e.type;return(0,g.jsxs)("div",{className:"bg-tertiary flex flex-col gap-6 px-4 py-6",children:[(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)(ve.Z.BodySm,{children:(0,P.t)("support_widget.chatbot.live_chat_ended")}),r==xe?(0,g.jsx)(ve.Z.BodySm,{weight:"font-bold",children:(0,P.t)("support_widget.chatbot.live_chat_follow_up")}):null]}),(0,g.jsx)(M.z,{variant:"circle",large:!0,onClick:t,children:(0,P.t)("support_widget.chatbot.live_chat_back_home")})]})},we=r(3682),Oe=r(87536),Se=function(e){var t=e.onSubmit,r=(0,Oe.Gc)(),i=r.handleSubmit,o=r.reset,a=(0,Oe.qo)({name:"message"}),s=(0,n.useRef)(null),l=function(){(0,we.Z)(s.current)};return(0,n.useEffect)((function(){l()}),[]),(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(ge.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,P.t)("support_widget.chatbot.message_placeholder"),ref:s,rows:1,onInput:l,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(i(t)(),o(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar max-h-[128px] resize-none !py-4 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,g.jsx)("div",{className:"text-circle pr-4 pt-4",children:a&&(0,g.jsx)(ye.T,{placement:"top",content:(0,P.t)("support_widget.chatbot.send"),children:(0,g.jsx)(I.JO,{type:"tiptap-send",className:"cursor-pointer",onClick:function(){i(t)(),o()}})})})]})},Pe=r(66007),ke=r(94426),Ce=r(18360),Ne=r(64422),Ie=r(57166);function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=function(e){var t,r,i=e.attachment,o=null===(t=i.thumbnails)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.content_url,a=Ae((0,n.useState)(!!o),2),s=a[0],l=a[1];return(0,g.jsx)("div",{children:(0,g.jsxs)("a",{href:i.content_url,target:"_blank",rel:"noreferrer",className:"flex gap-2 rounded-lg border border-gray-300 p-3 dark:border-gray-600",download:!0,children:[s?(0,g.jsx)("img",{loading:"lazy",alt:"",className:"h-10 w-10 rounded-lg object-cover",src:o,onError:function(){return l(!1)}}):(0,g.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100 object-cover text-gray-400 dark:bg-gray-700",children:(0,g.jsx)(I.JO,{type:"tiptap-paperclip",size:20})}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)(Ie.T1,{weight:"semibold",className:"break-all",children:(0,C.truncate)(i.file_name,{length:28})}),(0,g.jsx)(Ce.wN,{children:(0,C.truncate)(i.content_type.split("/").pop().toUpperCase(),{length:28})})]})]})})};function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Me=function(e){var t=e.attachments,r=e.collapsed,i=void 0===r||r,o=Te((0,n.useState)(i),2),a=o[0],s=o[1],l=1===t.length?I18n.t("support_widget.file"):I18n.t("support_widget.files");return 0===t.length?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ve.Z.LabelXs,{children:(0,g.jsxs)("button",{type:"button",onClick:function(){return s((function(e){return!e}))},className:"text-dark hover:text-dark focus:text-dark cursor-pointer hover:underline",children:["".concat(t.length," ").concat(l),a?(0,g.jsx)(I.JO,{type:"cheveron-up",useWithFillCurrentColor:!0}):(0,g.jsx)(I.JO,{type:"cheveron-down",useWithFillCurrentColor:!0})]})}),(0,g.jsx)("div",{className:"flex flex-col gap-2",children:!a&&t.map((function(e){return(0,g.jsx)(De,{attachment:e},e.id)}))})]})},Re=function(){return(0,g.jsx)("div",{className:"from-circle flex h-[40px] w-[40px] shrink-0 justify-center overflow-hidden rounded bg-gradient-to-b to-[#6B47D2] text-white",children:(0,g.jsx)(I.JO,{type:"20-ai",size:20})})},Be=function(e){var t=e.label,r=e.sublabel,n=e.event,i=e.value,o=e.selected,a=e.setSelected,s=e.process;return(0,g.jsxs)("button",{type:"button",className:K()("border-primary rounded-full border px-4 py-2 text-sm font-medium",{"hover:border-secondary cursor-pointer":null===o,"border-secondary bg-gray-100 dark:bg-gray-700":o===t,"cursor-not-allowed":null!==o,"w-full":r}),onClick:function(){null===o&&(a(t),s({event:n,value:i}))},children:[(0,g.jsx)(Ie.T1,{weight:"medium",children:t}),r&&(0,g.jsxs)(g.Fragment,{children:[" \u2022 ",(0,g.jsx)(Ie.T1,{weight:"medium",color:"text-gray-400",children:r})]})]})};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ze=function(e){var t=e.type,r=e.authorAvatarUrl,i=e.authorName,o=e.content,a=e.buttons,s=e.attachments,l=void 0===s?[]:s,c=e.createdAt,u=e.showDisclaimer,d=void 0!==u&&u,p=e.process,f=void 0===p?function(){}:p,b=Ve((0,n.useState)(null),2),h=b[0],v=b[1],y=(0,N.wh)().currentCommunityMember,_={business:{avatarUrl:r,name:i},bot:{avatarUrl:null,name:(0,P.t)("support_widget.chatbot.name")},user:{avatarUrl:y.avatar_url,name:y.name}},x=a.map((function(e){var t=e.label;return(0,g.jsx)(Be,Fe(Fe({},e),{},{selected:h,setSelected:v,process:f}),t)}));return(0,g.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:["bot"===t?(0,g.jsx)(Re,{}):(0,g.jsx)(Ne.s,{src:_[t].avatarUrl,size:"10",name:_[t].name}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,g.jsx)(A.Di,{weight:"semibold",color:"text-dark",children:_[t].name}),(0,g.jsx)(Ce.wN,{color:"text-light",children:c}),d&&(0,g.jsx)(ye.T,{maxWidth:250,className:"mt-[-4px]",content:(0,g.jsx)(m.JX,{children:(0,g.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,P.t)("support_widget.chatbot.disclaimer")}})}),children:(0,g.jsx)(I.JO,{type:"16-info",size:16})})]}),(0,g.jsxs)("div",{className:"message-content pr-6",children:[(0,g.jsx)(ke.p,{children:(0,g.jsx)(Pe.Z,{html:o})}),l.length>0?(0,g.jsx)(Me,{attachments:l,collapsed:!1}):null,x.length>0?(0,g.jsx)("div",{className:"mt-4 flex flex-row flex-wrap gap-2",children:x}):null]})]})]})},Ge=function(){return(0,g.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:[(0,g.jsx)(Re,{}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)(A.Di,{weight:"semibold",color:"text-dark",children:(0,P.t)("support_widget.chatbot.name")}),(0,g.jsxs)("div",{className:"typing flex h-5 items-center gap-1",children:[(0,g.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,g.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,g.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"})]})]})]})},We=r(33681),He=function(e){var t=e.attachment,r=e.onCancel;return(0,g.jsxs)("div",{className:"flex items-center justify-between gap-2 break-all rounded-md bg-gray-50 px-4 py-2 dark:bg-gray-700",children:[t.status===he.L9?(0,g.jsx)("a",{href:t.blobUrl,target:"_blank",rel:"noopener noreferrer",className:"text-circle hover:text-circle focus:text-circle dark:text-dark dark:hover:text-dark text-sm font-semibold underline",children:(0,C.truncate)(t.filename,{length:40})}):(0,g.jsx)(Ie.T1,{weight:"semibold",children:(0,C.truncate)(t.filename,{length:28})}),(0,g.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(t.status===he.si||t.status===he.X)&&(0,g.jsx)(We.Z,{variant:"determinate",value:t.progress||0,className:"linear-progress h-1 w-14 rounded-full"}),(0,g.jsx)(I.JO,{type:"16-close",size:16,onClick:function(){r(t)},className:"text-dark cursor-pointer"})]})]})};function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){Ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e=function(e){var t,r,n,i,o,a=e.ariaLabel,s=void 0===a?"":a,l=e.onClick,c=void 0===l?null:l,u=e.href,d=void 0===u?"":u,p=e.icon,f=void 0===p?"":p,m=e.type,b=void 0===m?"":m,h=e.className,v=void 0===h?"":h,y=e.size,_=void 0===y?20:y,x=(0,L.k6)(),j=(0,W.J1)(),w=j.isExpanded,O=j.expandWidget,S=j.collapseWidget,k={back:{ariaLabel:(0,P.t)("support_widget.search_container.back_button_label"),icon:"20-chevron-left",onClick:x.goBack},expand:{ariaLabel:(0,P.t)("support_widget.search_container.expand_widget_label"),icon:w?"shrink":"20-expand",onClick:function(){return w?S():O()}}};d?(n="a",i={href:d,target:"_blank",rel:"noopener noreferrer"}):(n="button",i={onClick:c||(null===(o=k[b])||void 0===o?void 0:o.onClick)});return(0,g.jsx)(n,Je(Je({className:K()("text-dark hover:bg-tertiary w-10 rounded-lg p-2",{"visited:text-dark hover:text-dark focus:bg-tertiary focus:text-dark inline-block text-center":d},v),"aria-label":(null===(t=k[b])||void 0===t?void 0:t.ariaLabel)||s},i),{},{children:(0,g.jsx)(I.JO,{useWithFillCurrentColor:!0,type:(null===(r=k[b])||void 0===r?void 0:r.icon)||f,size:_})}))},Xe=r(41389);function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rt=function(e){var t=e.onSubmit,r=e.uploadAttachments,i=e.uploadingEnabled,o=(0,Oe.Gc)(),a=o.handleSubmit,s=o.reset,l=(0,Oe.qo)({name:"message"}),c=(0,n.useRef)(null),u=l,d=(0,Xe.uI)({onDrop:r,noClick:!0,multiple:!1}),p=d.getRootProps,f=d.getInputProps,m=d.inputRef,b=function(){(0,we.Z)(c.current)};return(0,n.useEffect)((function(){b()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ge.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,P.t)("support_widget.chatbot.message_placeholder"),ref:c,rows:1,onInput:b,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(a(t)(),s(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,g.jsxs)("div",et(et({className:"flex justify-between pb-4 pl-6 pr-4"},p()),{},{children:[(0,g.jsx)("input",et({},f())),(0,g.jsx)(ye.T,{placement:"right",content:i?(0,P.t)("tiptap.attach_file"):(0,P.t)("support_widget.chatbot.live_chat_send_a_message_first"),className:K()({"hover:text-circle focus:text-circle text-dark visited:text-dark":i,"text-dark visited:text-dark":!i}),children:(0,g.jsx)("button",{type:"submit","aria-label":(0,P.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),m.current.click()},disabled:!i,className:K()({"cursor-not-allowed":!i}),children:(0,g.jsx)(I.JO,{type:"tiptap-paperclip",size:20})})}),(0,g.jsx)("span",{className:K()({"text-circle dark:text-circle visited:text-circle":u,"text-dark visited:text-dark":!u}),children:(0,g.jsx)(I.JO,{type:"tiptap-send",className:K()({"cursor-pointer":u,"cursor-not-allowed":!u}),onClick:function(){u&&(a(t)(),s())},size:20})})]}))]})},nt="in_queue",it="chatting",ot=function(e){var t=e.onStay,r=e.onLeave,n=e.warningType==nt?(0,P.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_in_queue"):(0,P.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_chatting");return(0,g.jsx)("div",{className:"my-auto px-14",children:(0,g.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-2 text-center text-sm",children:[(0,g.jsx)(ve.Z.TitleSm,{weight:"bold",children:(0,g.jsx)("span",{className:"text-lg",children:(0,P.t)("support_widget.chatbot.live_chat_leave_dialog.are_you_sure")})}),(0,g.jsx)("div",{className:"px-4",children:(0,g.jsx)(ve.Z.BodySm,{children:n})})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,g.jsx)(M.z,{large:!0,full:!0,className:"!bg-[#2B2E33] dark:!bg-white dark:text-[#19283a]",onClick:t,children:(0,P.t)("support_widget.chatbot.live_chat_leave_dialog.stay")}),(0,g.jsx)(M.z,{variant:"secondary",full:!0,large:!0,onClick:r,children:(0,P.t)("support_widget.chatbot.live_chat_leave_dialog.leave")})]})]})})},at=r(99333),st=r(34914),lt=r(81089),ct=r(36298),ut="select-conversation-type",dt=function(e){var t=e.displayLiveChat,r=[{label:(0,P.t)("support_widget.chatbot.templates.conversation_select_type_answers.question"),event:ut,value:"question"},{label:(0,P.t)("support_widget.chatbot.templates.conversation_select_type_answers.feedback"),event:ut,value:"feedback"},{label:(0,P.t)("support_widget.chatbot.templates.conversation_select_type_answers.bug"),event:ut,value:"bug"}];return t&&r.push({label:(0,P.t)("support_widget.chatbot.templates.conversation_select_type_answers.live_chat"),event:ut,value:"live-chat"}),{content:(0,P.t)("support_widget.chatbot.templates.conversation_select_type"),buttons:r}};function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt=function(e){var t=e.history,r=e.addMessage,n=e.setIsUserInputEnabled,i=e.setConversationType,o=e.setProductArea,a=e.conversationType,s=e.setIsBotProcessing,l=e.createSupportWidgetFeedback,c=e.productArea,u=e.createChatMessage,d=e.sessionId,p=e.setSessionId,f=e.setIsConversationEnded,m=e.setCanRestart,b=e.displayLiveChat,h=e.createLiveChatMessage,v=e.setIsLiveChatEnded,y=e.hasPostedLiveMessage,g=e.setIsLiveChatWithDeflectionEnabled,_=function(e){"bug"===e?r("bot",{content:(0,P.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,P.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}):"feedback"==e?r("bot",{content:(0,P.t)("support_widget.chatbot.templates.feedback_select_product_area"),buttons:he.Dh.map((function(e){return{label:e.text,event:"select-product-type",value:e.value}}))}):"question"==e?r("bot",{content:(0,P.t)("support_widget.chatbot.templates.question_select_product_area"),buttons:he.Dh.map((function(e){return{label:e.text,event:"select-product-type",value:e.value}}))}):"live-chat"==e&&(0,lt.t5)(_e.av.supportWidget.getLiveChatStatus({flow:"any"})).then((function(e){return e.json()})).then((function(e){if(e.is_available)r("bot",{content:(0,P.t)("support_widget.chatbot.templates.live_chat_start"),buttons:[]}),n(!0);else{var t=null===e||void 0===e?void 0:e.opening_time,i=null===e||void 0===e?void 0:e.closing_time;n(!1),s(!1),r("bot",{content:(0,P.t)("support_widget.chatbot.templates.live_chat_closed",{openingTime:t,closingTime:i}),buttons:[{label:(0,P.t)("support_widget.send_a_message"),event:"contact-support",value:null}]})}})).catch((function(){})),i(e),m(!0)};return function(e){var x=e.event,j=e.value;"select-conversation-type"===x?_(j):"contact-support"===x?((0,se.qQ)(ft(ft({},(0,se.$o)()),{},{formValues:ft(ft({},he.E$),{},{type:a,area:c,text:j})})),t.push("/form",{source:"chat",chatBotSessionId:d})):"start-chat"===x?(r("bot",dt({displayLiveChat:b})),p(null),o(null),i(null),n(!1),s(!1),m(!1),f(!1),v(!1)):"restart-chat"===x?(r("bot",dt({displayLiveChat:b})),p(null),o(null),i(null),n(!1),s(!1),g(!1)):"select-product-type"==x?("feedback"===a?r("bot",{content:(0,P.t)("support_widget.chatbot.templates.feedback_prompt"),buttons:[]}):"question"===a&&r("bot",{content:(0,P.t)("support_widget.chatbot.templates.question_prompt"),buttons:[]}),o(j),n(!0)):"post-message"==x?function(e){r("user",{content:(0,se.jY)(e),buttons:[]}),"feedback"===a?(s(!0),n(!1),l({text:e,area:c,type:"feedback",is_important:!1})):"question"===a?(s(!0),n(!1),u({message:e,sessionId:d,productArea:c})):"live-chat"===a&&(y||(s(!0),m(!1)),h({message:e,sessionId:d}))}(j):"complete-chat"==x&&(r("bot",{content:["Enjoy the rest of your day!"],buttons:[]}),n(!1),f(!0))}},ht=r(414);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(this,arguments)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){if(e){if("string"===typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var St=function(){var e=(0,W.J1)().liveChatEnabled,t=(0,ht.Pi)({enabled:e}),r=t.data,i=t.isLoading,o=jt((0,n.useState)(!1),2),a=o[0],s=o[1],l=null===r||void 0===r?void 0:r.is_available,c=(0,L.k6)(),u=jt((0,n.useState)(null),2),d=u[0],p=u[1],f=jt((0,n.useState)(null),2),m=f[0],b=f[1],h=jt((0,n.useState)(null),2),v=h[0],y=h[1],g=jt((0,n.useState)(e),2),_=g[0],x=g[1],j=jt((0,n.useState)(!1),2),w=j[0],O=j[1],S=jt((0,n.useState)(!1),2),k=S[0],C=S[1],N=jt((0,n.useState)(!1),2),I=N[0],A=N[1],E=jt((0,n.useState)(!1),2),D=E[0],T=E[1],M=jt((0,n.useState)([]),2),R=M[0],B=M[1],U=jt((0,n.useState)(!1),2),F=U[0],z=U[1],V=jt((0,n.useState)(!1),2),q=V[0],Z=V[1],G=jt((0,n.useState)(null),2),H=G[0],Q=G[1],J=new Audio(at),K=jt((0,n.useState)(!1),2),$=K[0],X=K[1],Y=jt((0,n.useState)(!1),2),ee=Y[0],te=Y[1];J.oncanplaythrough=function(){return X(!0)};var re=function(e,t){var r=xt({},t);B((function(t){return[].concat(_t(t),[yt({id:(new Date).getTime().toString(),type:e,createdAt:(0,ct.w)({dateTime:new Date,format:ct.f.short_time})},r)])}))},ne=(0,ht.Gi)({attachments:[],source:"chat",onSuccess:function(){x(!1),re("bot",{content:(0,P.t)("support_widget.chatbot.templates.feedback_received"),buttons:[]}),re("bot",{content:(0,P.t)("support_widget.chatbot.templates.restart_prompt"),buttons:[{label:(0,P.t)("support_widget.chatbot.answer_yes"),event:"restart-chat",value:null},{label:(0,P.t)("support_widget.chatbot.answer_no"),event:"complete-chat",value:null}]})}}).mutate,ie=(0,ht.N9)({onSuccess:function(e){p(e.result.session_id),x(!1),O(!0);var t=e.result.answer,r=[],n=t.match(/<sources>([\s\S]*)<\/sources>/);if(n){t=t.replace(n[0],"");var i=JSON.parse(n[1]).filter((function(e){return"Not Available"!==e.url})).map((function(e){var t=e.url,r=e.title;return{url:t?t.replace("https://help-en.circle.so","https://help.circle.so"):null,title:r}})).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.title,"</a></li>")}));i.length>0&&(t=t.concat('<h6 class="sources-title">'.concat((0,P.t)("support_widget.chatbot.helpful_resources"),"</h6><ul>").concat(i.join(""),"</ul>")))}if(t.match(/<ticket>([\s\S]*)<\/ticket>/)){var o,a,l,c,u=function(e){var t=e.displayLiveChat,r=e.emailWaitTime,n=e.liveChatWaitTime;return t?{content:(0,P.t)("support_widget.chatbot.templates.select_contact_method"),buttons:[{label:(0,P.t)("support_widget.chatbot.contact_methods.live_chat"),sublabel:(0,P.t)("support_widget.chatbot.estimated_wait_time",{time:n}),event:ut,value:"live-chat"},{label:(0,P.t)("support_widget.chatbot.contact_methods.email"),sublabel:(0,P.t)("support_widget.chatbot.estimated_wait_time",{time:r}),event:"contact-support",value:null}]}:{content:(0,P.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,P.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}}({displayLiveChat:null===e||void 0===e||null===(o=e.live_chat)||void 0===o?void 0:o.is_available,emailWaitTime:null===e||void 0===e||null===(a=e.live_chat)||void 0===a?void 0:a.email_wait_time,liveChatWaitTime:null===e||void 0===e||null===(l=e.live_chat)||void 0===l?void 0:l.live_chat_wait_time});t=u.content,r=u.buttons,O(!1),s(null===e||void 0===e||null===(c=e.live_chat)||void 0===c?void 0:c.is_available)}re("bot",{content:t,buttons:r,showDisclaimer:!0})}}),oe=ie.mutate,ae=(0,ht.bj)({onSuccess:function(e){var t;if("chat_closed"==(null===(t=e.result)||void 0===t?void 0:t.error)){var r,n,i=null===(r=e.result)||void 0===r?void 0:r.opening_time,o=null===(n=e.result)||void 0===n?void 0:n.closing_time;O(!1),x(!1),re("bot",{content:(0,P.t)("support_widget.chatbot.templates.live_chat_closed",{openingTime:i,closingTime:o}),buttons:[{label:(0,P.t)("support_widget.send_a_message"),event:"contact-support",value:null}]})}else p(e.result.session_id),q||Z(!0)}}).mutate;(0,st.s)({channel:"SupportWidget::LiveChatChannel",onMessageReceive:function(e){"newMessage"===e.event?(re(e.userType,{content:(0,se.jY)(e.content),authorAvatarUrl:e.author.avatarUrl,authorName:e.author.name,buttons:[],attachments:e.attachments}),"user"!=e.userType&&$&&J.play()):"completeChat"===e.event?(C(!0),O(!1),z(!1)):"enterQueue"===e.event?(Q(e.position),z(!0),T(!1),x(!1),re("bot",{content:(0,P.t)("support_widget.chatbot.templates.live_chat_first_message_posted"),buttons:[]})):"updateQueue"===e.event?Q(e.position):"agentJoined"===e.event&&(re("bot",{content:(0,P.t)("support_widget.chatbot.templates.live_chat_agent_joined",{agent_first_name:e.agent_first_name}),buttons:[]}),$&&J.play(),z(!1),te(!0))},chat_bot_session_id:d,canCreateConnection:(l||a)&&d},[]);var le=bt({history:c,addMessage:re,setIsUserInputEnabled:O,setConversationType:b,setProductArea:y,conversationType:m,setIsBotProcessing:x,createSupportWidgetFeedback:ne,productArea:v,createChatMessage:oe,sessionId:d,setSessionId:p,setIsConversationEnded:A,setCanRestart:T,displayLiveChat:l,createLiveChatMessage:ae,setIsLiveChatEnded:C,setIsWaiting:z,hasPostedLiveMessage:q,setIsLiveChatWithDeflectionEnabled:s});return{sessionId:d,conversationType:m,messages:R,setMessages:B,isBotProcessing:_,isUserInputEnabled:w,isLiveChatEnded:k,isConversationEnded:I,canRestart:D,process:le,isWaiting:F,currentQueuePosition:H,isLiveChatStatusLoading:i,hasPostedLiveMessage:q,hasAgentJoined:ee}},Pt=r(79292);function kt(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){It(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function It(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"===typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tt=function(e){var t=e.sessionId,r=At((0,n.useState)((function(){return[]})),2),i=r[0],o=r[1],a=(0,n.useRef)({}),s=function(e,t){o((function(r){return r.map((function(r){return r.url===e?Nt(Nt({},r),t):r}))}))},l=function(e){var r=e.url,n=e.file,i=e.filename;s(r,{status:he.si}),new Pt.DirectUpload(n,(0,_e.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",(function(t){a.current[r]&&e.abort(),s(r,{progress:t.loaded/t.total*100})}))}}).create((function(e,n){if(e)throw s(r,{status:he.sM}),new Error("Direct upload failed: ".concat(e));X.R.createAttachment({signedId:n.signed_id,target:"sunshine"}).then((function(e){return e.json()})).then((function(e){var l=(0,_e.Gd)({signed_id:n.signed_id,filename:n.filename}),c=e.zendesk_upload_id;s(r,{status:he.X,zendeskUploadId:c,blobUrl:l}),function(e){var r=e.url,n=e.zendeskUploadId,i=null;i=setInterval((function(){X.R.checkAttachment({zendeskUploadId:n,target:"sunshine"}).then((function(e){a.current[r]?clearInterval(i):e.success&&(clearInterval(i),o((function(e){return e.filter((function(e){return e.url!==r}))})),X.R.uploadLiveChatAttachment({mediaUrl:e.sunshine_media_url,mediaIsImage:e.sunshine_is_image,sessionId:t}))})).catch((function(e){console.error(e)}))}),1e3)}({url:r,filename:i,zendeskUploadId:c,blobUrl:l})})).catch((function(e){console.error(e)}))}))};return{uploadAttachments:function(e){var t=e.map((function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}}));o([].concat(kt(i),kt(t)));var r,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Et(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;l({url:a.url,file:a.file,filename:a.filename,status:he.si})}}catch(s){n.e(s)}finally{n.f()}},attachments:i,setAttachments:o,cancelAttachment:function(e){a.current[e.url]=!0,o((function(t){return t.filter((function(t){return t.url!==e.url}))}))}}},Lt=function(e){if(0===e)return e;if(e>=11&&e<=13)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}};function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zt="back",Vt=function(){var e=St(),t=e.sessionId,r=e.conversationType,i=e.messages,o=e.setMessages,a=e.isBotProcessing,s=e.isUserInputEnabled,l=e.isLiveChatEnded,c=e.isConversationEnded,u=e.canRestart,d=e.process,p=e.isWaiting,f=e.currentQueuePosition,m=e.isLiveChatStatusLoading,b=e.hasPostedLiveMessage,h=e.hasAgentJoined,v=(0,W.J1)(),y=v.setOnWidgetClose,_=v.toggleWidget,x=(0,L.k6)(),j=Ut((0,n.useState)(null),2),w=j[0],O=j[1],S=Ut((0,n.useState)(null),2),k=S[0],C=S[1],N=Tt({sessionId:t}),A=N.attachments,E=N.uploadAttachments,D=N.cancelAttachment,T="live-chat"==r&&b&&!l;(0,n.useEffect)((function(){0!=i.length||m||d({event:"start-chat"});var e=document.getElementById("message-scroll-view");e&&e.scrollIntoView()}),[i.length,d,m]),(0,n.useEffect)((function(){if(T){var e=function(e){return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),y((function(){C("collapse"),O(h?it:nt)})),function(){window.removeEventListener("beforeunload",e),y(null)}}}),[T,y,h]);var M=function(e){d({event:"post-message",value:e.message})};return w?(0,g.jsx)(ot,{warningType:w,onStay:function(){C(null),O(null)},onLeave:function(){k==zt?x.replace("/"):_({shouldTriggerOnWidgetClose:!1})}}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"sticky top-0 z-10",children:[(0,g.jsxs)("div",{className:"border-primary bg-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,g.jsx)($e,{type:"back",onClick:function(){T?(C(zt),O(h?it:nt)):x.replace("/")}}),(0,g.jsxs)("div",{children:[u&&(0,g.jsx)(ye.T,{placement:"top",content:(0,P.t)("support_widget.chatbot.restart"),children:(0,g.jsx)($e,{ariaLabel:(0,P.t)("support_widget.search_container.restart_button_label"),icon:"16-restart",className:"items-center justify-center",size:16,onClick:function(){o([])}})}),t&&(0,g.jsx)(ye.T,{placement:"top",content:(0,P.t)("support_widget.chatbot.download_chat"),children:(0,g.jsx)($e,{href:_e.av.supportWidget.downloadChat(t),icon:"download",className:""})})]})]}),p&&(0,g.jsxs)("div",{className:"border-primary bg-secondary flex gap-4 border-b p-4",children:[(0,g.jsx)("div",{className:"bg-primary flex h-10 w-10 shrink-0 items-center justify-center rounded-lg text-[#6550D9]",children:(0,g.jsx)(I.JO,{type:"20-time-delay",size:20})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(ve.Z.BodySm,{children:(0,P.t)("support_widget.chatbot.live_chat_wait_queue.please_wait")}),(0,g.jsx)(ve.Z.BodySm,{weight:"font-bold",children:(0,P.t)("support_widget.chatbot.live_chat_wait_queue.current_position",{position:Lt(f)})})]})]})]}),(0,g.jsxs)("div",{className:"mb-6 mt-auto flex flex-col",children:[i.map((function(e){return(0,g.jsx)(Ze,Rt(Rt({},e),{},{process:d}),e.id)})),a&&(0,g.jsx)(Ge,{}),A.length>0&&(0,g.jsx)("div",{className:"mt-4 flex flex-col gap-2 pl-6 pr-4",children:A.map((function(e){return(0,g.jsx)(He,{attachment:e,onCancel:D},e.url)}))}),(0,g.jsx)("div",{id:"message-scroll-view"})]}),s?(0,g.jsx)("div",{className:"bg-primary sticky bottom-0 z-10",children:(0,g.jsx)("div",{className:"border-primary border-t",children:(0,g.jsx)(ge.l,{onSubmit:M,children:"live-chat"==r?(0,g.jsx)(rt,{onSubmit:M,uploadAttachments:E,uploadingEnabled:b}):(0,g.jsx)(Se,{onSubmit:M})})})}):null,c&&(0,g.jsx)(je,{type:"type_ai_chat",onClick:function(){return x.replace("/")}}),l&&(0,g.jsx)(je,{type:xe,onClick:function(){return x.replace("/")}})]})},qt=r(69647),Zt=r(88884),Gt=function(e){var t=document.createElement("div");return t.innerHTML=e.replace(/\n/g,"<br>").replace(/(<br\s*\/?>\s*)+/g,"<br>"),t.querySelectorAll("[style]").forEach((function(e){return e.removeAttribute("style")})),function(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll(":empty:not(br):not(img)").forEach((function(e){return e.remove()})),t.body.innerHTML}(t.innerHTML)},Wt=function(e){var t=e.author,r=e.avatar,n=e.content,i=e.attachments,o=e.createdAt,a=Gt(n),s=(0,Zt.H)(o).time;return(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)("div",{className:"pt-1",children:(0,g.jsx)(Ne.s,{src:r,size:"10",name:t})}),(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,g.jsx)(A.Di,{weight:"bold",children:t}),(0,g.jsx)(ve.Z.LabelSm,{children:s})]}),(0,g.jsx)(ke.p,{children:(0,g.jsx)(Pe.Z,{html:a,className:"comment-body"})}),(0,g.jsx)(Me,{attachments:i})]})]})};function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=function(e){var t=e.isSubmitting,r=e.uploadAttachments,i=e.attachments,o=e.cancelAttachment,a=e.commentsCount,s=e.onSubmit,l=(0,Oe.Gc)(),c=l.setValue,u=l.handleSubmit,d=l.reset,p=(0,Oe.qo)({name:"comment"}),f=i.every((function(e){return e.completed})),m=(0,Xe.uI)({onDrop:r,noClick:!0}),b=m.getRootProps,h=m.getInputProps,v=m.inputRef,y=!t&&p&&f,_=(0,n.useRef)(null),x=function(){(0,we.Z)(_.current),document.getElementById("scroll-to-bottom").scrollIntoView()};return(0,n.useEffect)((function(){c("comment",""),d(),_.current.disabled=!1,_.current.style.height="44px",document.getElementById("scroll-to-bottom").scrollIntoView()}),[c,d,a]),(0,n.useEffect)((function(){x()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ge.l.Input,{name:"comment",variant:"textarea",label:null,placeholder:(0,P.t)("support_widget.chatbot.message_placeholder"),ref:_,rows:1,onInput:x,hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),i.length>0&&(0,g.jsx)("div",{className:"my-4 flex flex-col gap-2 pl-6 pr-4",children:i.map((function(e){return(0,g.jsx)(He,{attachment:e,onCancel:o},e.url)}))}),(0,g.jsxs)("div",Qt(Qt({className:"flex justify-between pb-4 pl-6 pr-4"},b()),{},{children:[(0,g.jsx)("input",Qt({},h())),(0,g.jsx)(ye.T,{placement:"right",content:(0,P.t)("tiptap.attach_file"),className:"hover:text-circle focus:text-circle text-dark visited:text-dark",children:(0,g.jsx)("button",{type:"submit","aria-label":(0,P.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),v.current.click()},children:(0,g.jsx)(I.JO,{type:"tiptap-paperclip",size:20})})}),(0,g.jsx)("span",{className:K()({"text-circle dark:text-circle visited:text-circle":y,"text-dark visited:text-dark":!y}),children:(0,g.jsx)(I.JO,{type:"tiptap-send",className:K()({"cursor-pointer":y,"cursor-not-allowed":!y}),onClick:function(){y&&(u(s)(),_.current.disabled=!0)},size:20})})]}))]})},$t=function(e){var t=e.current,r=e.previous,n=(0,Zt.H)(t).day;return n!==(0,Zt.H)(r).day?(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"}),(0,g.jsx)("div",{className:"mx-5 grow-0",children:(0,g.jsx)(ve.Z.LabelXs,{color:"text-light",weight:"semibold",children:n.toUpperCase()})}),(0,g.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"})]}):null},Xt=function(e){var t=e.rows,r=void 0===t?1:t,n=e.wrapperClassName,i=void 0===n?"":n,o=e.loaderClassName,a=void 0===o?"":o,s=e.width,l=void 0===s?"100%":s,c=e.height,u=void 0===c?"24px":c;return(0,g.jsx)("div",{className:K()("animate-pulse space-y-2 px-6 last:pb-4",i),children:Array(r).fill().map((function(e,t){return(0,g.jsx)("div",{className:K()("bg-secondary rounded-md",a),style:{width:l,height:u}},t)}))})};function Yt(e){return function(e){if(Array.isArray(e))return or(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||ir(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){if(e){if("string"===typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(e,t):void 0}}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ar=function(e){var t=e.controlName,r=e.cachingEnabled,i=nr((0,n.useState)((function(){return r&&(0,se.$o)()["".concat(t,"-attachments")]||[]})),2),o=i[0],a=i[1],s=(0,n.useRef)({}),l=function(e,t){a((function(r){return r.map((function(r){return r.url===e?tr(tr({},r),t):r}))}))},c=function(e){var n=e.url,i=e.file,o=e.filename;l(n,{status:he.si}),new Pt.DirectUpload(i,(0,_e.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",(function(t){s.current[n]&&e.abort(),l(n,{progress:t.loaded/t.total*100})}))}}).create((function(e,i){if(e)throw l(n,{status:he.sM}),new Error("Direct upload failed: ".concat(e));X.R.createAttachment({signedId:i.signed_id}).then((function(e){return e.json()})).then((function(e){var a=(0,_e.Gd)({signed_id:i.signed_id,filename:i.filename}),c=e.zendesk_upload_id;l(n,{status:he.X,zendeskUploadId:c,blobUrl:a}),function(e){var n=e.url,i=e.filename,o=e.zendeskUploadId,a=e.blobUrl,c=null;c=setInterval((function(){X.R.checkAttachment({zendeskUploadId:o.current}).then((function(e){if(s.current[n])clearInterval(c);else if(e.success){if(l(n,{status:he.L9,completed:!0}),r){var u=(0,se.$o)()["".concat(t,"-attachments")]||[];(0,se.qQ)(tr(tr({},(0,se.$o)()),{},rr({},"".concat(t,"-attachments"),[].concat(Yt(u),[{status:he.L9,completed:!0,url:n,filename:i,zendeskUploadId:o,blobUrl:a}]))))}clearInterval(c)}})).catch((function(e){console.error(e)}))}),1e3)}({url:n,filename:o,zendeskUploadId:c,blobUrl:a})})).catch((function(e){console.error(e)}))}))};return{uploadAttachments:function(e){var t=e.map((function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}}));a([].concat(Yt(o),Yt(t)));var r,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=ir(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;c({url:i.url,file:i.file,filename:i.filename,status:he.si})}}catch(s){n.e(s)}finally{n.f()}},attachments:o,setAttachments:a,cancelAttachment:function(e){s.current[e.url]=!0,a((function(t){return t.filter((function(t){return t.url!==e.url}))})),r&&(0,se.qQ)(tr(tr({},(0,se.$o)()),{},rr({},"".concat(t,"-attachments"),((0,se.$o)()["".concat(t,"-attachments")]||[]).filter((function(t){return t.url!==e.url})))))}}},sr=r(87561),lr=r(28582),cr=sr.Ry().shape({text:sr.Z_().required(lr.Z.t("support_widget.send_message_form.error.text")),type:sr.Z_().required(lr.Z.t("support_widget.send_message_form.error.type")),area:sr.Z_().required(lr.Z.t("support_widget.send_message_form.error.area")),is_important:sr.O7().notRequired()}),ur=sr.Ry().shape({comment:sr.Z_().required("This field is required")});function dr(e){return function(e){if(Array.isArray(e))return pr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fr=function(){var e,t=(0,n.useRef)(null),r=(0,qt.p)(),i=(0,N.wh)().currentCommunityMember,o=(0,L.$B)(),a=(0,L.TH)(),s=(0,L.k6)(),l=Number(o.params.id),c=(0,ht.Y1)(l),u=c.isError,d=c.isLoading,p=c.data,f=null===p||void 0===p?void 0:p.conversation,m=null===p||void 0===p?void 0:p.comments,b=ar({controlName:"conversation-view-".concat(l),cachingEnabled:!1}),h=b.uploadAttachments,v=b.attachments,y=b.setAttachments,_=b.cancelAttachment,x=(0,$.useQueryClient)(),j=(0,$.useMutation)((function(e){var t=e.comment;return X.R.updateConversation({comment:t,id:l,zendeskUploadIds:v.map((function(e){return e.zendeskUploadId}))}).then((function(e){return e.json()}))}),{onSuccess:function(e){x.setQueryData(["conversations","show",l],(function(t){return{conversation:t.conversation,comments:[].concat(dr(t.comments),[e.comment])}})),y([]),r.success((0,P.t)("support_widget.send_message_form.success"))},onError:C.noop}),w=j.mutate,O=j.isLoading;return(0,n.useEffect)((function(){d||u||!t.current||(t.current.querySelectorAll(".comment-body a").forEach((function(e){e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer noopener")})),t.current.querySelectorAll(".comment-body img").forEach((function(e){var t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("rel","noreferrer noopener"),t.setAttribute("href",e.getAttribute("src")),e.parentNode.insertBefore(t,e),t.appendChild(e)})),t.current.querySelectorAll(".signature").forEach((function(e){return e.remove()})),document.getElementById("scroll-to-bottom").scrollIntoView())}),[d,u]),d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,g.jsx)(Xt,{rows:4,height:"60px"})]}):u?(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"support-widget-post__header border-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:(0,g.jsx)($e,{type:"back"})}),(0,g.jsx)("div",{className:"grow",children:(0,g.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,P.t)("support_widget.no_messages_found")})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"bg-primary support-widget-post__header border-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:["CreateConversationView"==(null===(e=a.state)||void 0===e?void 0:e.from)?(0,g.jsx)($e,{type:"back",onClick:function(){return s.push("/")}}):(0,g.jsx)($e,{type:"back"}),(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"text-dark",children:O?(0,P.t)("support_widget.sending"):(0,C.truncate)(f.subject,{length:30})}),(0,g.jsx)("div",{className:"w-[44px]"})]}),(0,g.jsx)("div",{className:"mt-auto flex flex-col",children:(0,g.jsx)("div",{className:"mx-6 my-4 flex flex-col gap-4",ref:t,children:m.map((function(e,t){var r,n;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)($t,{current:e.created_at,previous:null===(r=m[t-1])||void 0===r?void 0:r.created_at}),(0,g.jsx)(Wt,{author:e.author_id===f.requester_id?i.name:e.author.name,avatar:e.author_id===f.requester_id?i.avatar_url:null===(n=e.author.photo)||void 0===n?void 0:n.content_url,attachments:e.attachments,content:e.html_body,createdAt:e.created_at},e.id)]})}))})}),(0,g.jsxs)("div",{children:["closed"===f.status?(0,g.jsx)("div",{className:"dark:border-light mt-auto flex flex-col items-center gap-5 border-t p-5",children:(0,g.jsx)(A.Di,{weight:"medium",color:"text-light",children:(0,P.t)("support_widget.conversation_closed")})}):(0,g.jsx)("div",{className:"border-t-primary border-t",children:(0,g.jsx)(ge.l,{preventAccidentalLeave:!0,validationSchema:ur,id:"update-message-form",onSubmit:w,mode:"onSubmit",defaultValues:{comment:""},children:(0,g.jsx)(Kt,{isSubmitting:O||d,attachments:v,uploadAttachments:h,cancelAttachment:_,commentsCount:m.length,onSubmit:w})})}),(0,g.jsx)("div",{id:"scroll-to-bottom"})]})]})},mr=["onClick","className","label","type","dataTestId"];function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var gr=function(e){var t=e.onClick,r=void 0===t?C.noop:t,n=e.className,i=e.label,o=e.type,a=void 0===o?"button":o,s=e.dataTestId,l=yr(e,mr);return(0,g.jsx)("button",hr(hr({className:K()("w-full rounded-lg bg-[#506CF0] px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",n),onClick:r,type:a,"data-testid":s},l),{},{children:i}))},_r=function(e){var t=e.conversation,r=t.id,n=t.subject,i=t.status,o=t.custom_fields.find((function(e){return 0xaff66b84297===e.id})),a=o?I18n.t("support_widget.conversation_item.source.".concat(o.value)):void 0,s=(0,Zt.H)(t.updated_at).day;return(0,g.jsxs)(pe.rU,{to:"/conversations/".concat(r),className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)(ve.Z.LabelSm,{truncate:!0,weight:t.unread?"medium":"normal",children:n}),(0,g.jsxs)("div",{className:"ml-4 flex self-center",children:[t.unread&&(0,g.jsx)("div",{className:"mr-3 flex self-center",children:(0,g.jsx)("span",{className:"h-2 w-2 rounded-full bg-blue-600"})}),(0,g.jsx)("span",{className:K()("inline-flex w-14 items-center justify-center rounded-full px-2 py-1 text-xs font-medium ring-1 ring-inset",{"bg-gray-50 text-gray-500 ring-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:ring-gray-600":"closed"===i||"solved"===i,"bg-green-50 text-green-600 ring-green-600/50 dark:bg-[#0D6E30] dark:text-white dark:ring-[#199543]":"closed"!==i&&"solved"!==i}),children:function(e){return{closed:I18n.t("support_widget.conversation_item.status.closed"),solved:I18n.t("support_widget.conversation_item.status.solved")}[e]||I18n.t("support_widget.conversation_item.status.open")}(i)})]})]}),(0,g.jsx)("div",{children:(0,g.jsxs)(ve.Z.BodyXs,{className:"text-xs",color:"text-gray-400 flex",children:[a,(0,g.jsx)("div",{className:"mx-2 flex self-center",children:(0,g.jsx)("span",{className:"h-1 w-1 rounded-full bg-[#9ca3af]"})}),s]})})]})};function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Or=function(){var e,t=(0,W.J1)(),r=t.isDraftConversationPresent,n=t.setIsDraftConversationPresent,i=(0,L.k6)(),o=null===(e=(0,se.$o)().formValues)||void 0===e?void 0:e.text,a=(0,P.t)("support_widget.draft_message_button.title")+" "+(o||(0,P.t)("support_widget.draft_message_button.default_title"));return r?(0,g.jsx)("button",{type:"button",className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",onClick:function(){i.replace("/form")},children:(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsxs)("div",{className:"mr-5 flex min-w-0 flex-col text-left",children:[(0,g.jsx)(ve.Z.LabelSm,{truncate:!0,weight:"medium",children:a}),(0,g.jsx)("div",{children:(0,g.jsx)(ve.Z.BodyXs,{className:"text-xs",color:"text-gray-400",children:(0,P.t)("support_widget.draft_message_button.subtitle")})})]}),(0,g.jsx)("div",{className:"items-center self-center",children:(0,g.jsx)("span",{className:"text-dark px-4",children:(0,g.jsx)(I.JO,{type:"16-trash-bin",useWithFillCurrentColor:!0,onClick:function(e){(0,se.qQ)(jr(jr({},(0,se.$o)()),{},{formValues:he.E$})),n(!1),e.stopPropagation()},size:20})})})]})}):null},Sr=function(){var e=(0,ht.FG)(),t=e.isLoading,r=e.data;if(t)return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"!px-0"}),Array(4).fill(null).map((function(e,t){return(0,g.jsxs)("div",{className:"my-2",children:[(0,g.jsx)(Xt,{rows:1,height:"20px",width:"80%",loaderClassName:"mb-2"}),(0,g.jsx)(Xt,{rows:1,height:"13px",width:"25%",wrapperClassName:"last:pb-0"})]},t)}))]});var n=(null===r||void 0===r?void 0:r.conversations)||[];return(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",children:(0,P.t)("support_widget.messages_screen.title")})}),(0,g.jsx)(Or,{}),0===n.length?(0,g.jsx)("div",{className:"flex flex-col justify-center px-6 py-8",children:(0,g.jsx)("div",{className:"mx-auto mb-5 mt-auto w-full",children:(0,g.jsxs)("div",{className:"border-primary bg-primary rounded-lg border",children:[(0,g.jsx)("div",{className:"mt-4 text-center",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"dark:text-secondary",children:(0,P.t)("support_widget.no_messages_found")})}),(0,g.jsx)("div",{className:"mx-6 my-5",children:(0,g.jsx)(pe.rU,{to:_e._N.askChatBot(),children:(0,g.jsx)(gr,{label:(0,P.t)("support_widget.need_help"),className:"dark:bg-primary dark:text-white"})})})]})})}):n.map((function(e){return(0,g.jsx)(_r,{conversation:e},e.id)}))]})},Pr=r(52255);function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nr=function(e){return(0,g.jsx)(ge.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){Cr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,fullWidth:!0,translationRoot:"support_widget.send_message_form"},e))};function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){Er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lr=function(e){var t=e.isLoading,r=e.uploadAttachments,i=e.attachments,o=e.cancelAttachment,a=Dr((0,Oe.qo)({name:["text","type","area","is_important"]}),4),s=a[0],l=a[1],c=a[2],u=a[3],d=s&&l&&c,p=(0,Pr.c)(s,500),f=Dr((0,n.useState)(he.Mj),2),m=f[0],b=f[1],h=Dr((0,n.useState)(he.Dh),2),v=h[0],y=h[1],_=(0,W.J1)().setIsDraftConversationPresent,x=i.every((function(e){return e.completed})),j=(0,Xe.uI)({onDrop:r,noClick:!0}),w=j.getRootProps,O=j.getInputProps,S=j.inputRef;return(0,n.useEffect)((function(){(0,se.qQ)(Ar(Ar({},(0,se.$o)()),{},{formValues:{text:p,type:l,area:c,is_important:u}})),_(p||l||c||u)}),[p,l,c,_,u]),(0,n.useEffect)((function(){var e=document.getElementById("send-message-form-container");e.scrollIntoView(),e.querySelectorAll("label > span").forEach((function(e){var t=document.createElement("span");t.className="text-red-400",t.textContent=" *",e.appendChild(t)}))}),[]),(0,g.jsxs)("div",{className:"flex max-h-full flex-col px-6",children:[(0,g.jsx)(Nr,{hidePlaceholder:!1,name:"type",children:(0,g.jsx)(ge.l.Select,{name:"type",data:m,onSearch:function(e){if(""===e)b(he.Mj);else{var t=he.Mj.filter((function(t){return t.value.toLowerCase().includes(e.toLowerCase())}));b(t)}}})}),(0,g.jsx)(Nr,{hidePlaceholder:!1,className:"!pt-2",name:"area",children:(0,g.jsx)(ge.l.Select,{name:"area",data:v,onSearch:function(e){if(""===e)y(he.Dh);else{var t=he.Dh.filter((function(t){return t.value.toLowerCase().includes(e.toLowerCase())}));y(t)}}})}),(0,g.jsx)(Nr,{className:"!pt-2",name:"text",children:(0,g.jsx)(ge.l.Input,{name:"text",variant:"textarea",rows:12,className:"form-control resize-none"})}),(0,g.jsx)(Nr,{name:"is_important",hideLabel:!0,hideDescription:!0,hideBorder:!0,children:(0,g.jsx)(ge.l.Checkbox,{className:"dark:border-secondary !mt-1",option:{label:(0,P.t)("support_widget.send_message_form.is_important_description")}})}),i.length>0&&(0,g.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:i.map((function(e){return(0,g.jsx)(He,{attachment:e,onCancel:o},e.url)}))}),(0,g.jsxs)("div",Ar(Ar({className:"my-6 flex justify-between"},w()),{},{children:[(0,g.jsx)("input",Ar({},O())),(0,g.jsx)(ye.T,{placement:"right",content:(0,P.t)("tiptap.attach_file"),className:"text-dark visited:text-dark hover:bg-tertiary hover:text-dark focus:bg-tertiary flex w-10 items-center justify-center rounded-lg text-center",children:(0,g.jsx)("button",{type:"button","aria-label":(0,P.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),S.current.click()},className:"p-2",children:(0,g.jsx)(I.JO,{type:"tiptap-paperclip",size:20})})}),(0,g.jsx)(ye.T,{placement:"left",content:(0,P.t)("support_widget.send_message_form.button_tooltip"),disabled:d&&x,children:(0,g.jsx)("button",{className:"bg-circle rounded-lg px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",disabled:t||!d||!x,type:"submit",children:(0,P.t)("support_widget.send_message_form.button_label")})})]}))]})};function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ur=function(){var e,t,r=(0,L.k6)(),n=(0,L.TH)(),i=(0,qt.p)(),o=ar({controlName:"conversation-create",cachingEnabled:!0}),a=o.uploadAttachments,s=o.attachments,l=o.cancelAttachment,c=(0,W.J1)().setIsDraftConversationPresent,u=(0,ht.Gi)({attachments:s,source:null===(e=n.state)||void 0===e?void 0:e.source,chatBotSessionId:null===(t=n.state)||void 0===t?void 0:t.chatBotSessionId,onSuccess:function(e){var t=(0,se.$o)();delete t["conversation-create-attachments"],delete t.formValues,(0,se.qQ)(t),c(!1),i.success((0,P.t)("support_widget.conversation_created_toast")),r.push("/conversations/".concat(e.id),{from:"CreateConversationView"})},onError:function(){i.error((0,P.t)("request_failure_message"))}}),d=u.mutate,p=u.isLoading,f=Rr(Rr({},he.E$),(0,se.$o)().formValues);return(0,g.jsxs)("div",{className:"flex flex-col",id:"send-message-form-container",children:[(0,g.jsxs)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-start space-x-4 border-b px-3",children:[(0,g.jsx)($e,{type:"back",onClick:function(){return r.replace("/")}}),(0,g.jsx)("span",{className:"flex-1 text-center",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"text-dark",children:p?(0,P.t)("support_widget.sending_message"):(0,P.t)("support_widget.send_a_message")})}),(0,g.jsx)($e,{type:"expand"})]}),(0,g.jsx)("div",{className:"grow overflow-y-auto",children:(0,g.jsx)(ge.l,{preventAccidentalLeave:!0,validationSchema:cr,id:"send-message-form",onSubmit:d,mode:"onSubmit",defaultValues:f,children:(0,g.jsx)(Lr,{isLoading:p,attachments:s,uploadAttachments:a,cancelAttachment:l})})})]})},Fr=function(e){var t=e.event,r=e.last,n=new Date(t.starts_at).toLocaleString("en-US",{month:"long",day:"numeric"}),i=new Date(t.starts_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,g.jsxs)("a",{href:t.post_url,target:"_blank",rel:"noreferrer",className:K()("flex items-start justify-between p-4 hover:bg-gray-100 dark:border-gray-700 hover:dark:bg-gray-900",{"border-b":!r}),children:[(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)("span",{className:"text-sm font-semibold text-[#1A283B] dark:font-medium dark:text-gray-300",children:t.name}),(0,g.jsxs)("span",{className:"text-[11px] font-medium text-gray-500",children:[n," ",(0,P.t)("support_widget.at")," ",i]})]}),(0,g.jsx)("div",{className:"text-gray-400",children:(0,g.jsx)(I.JO,{type:"16-arrow-right",size:16})})]})},zr=function(e){var t=e.current,r=e.previous,n=new Date(t),i=new Date(r),o=n.getFullYear(),a=n.toLocaleString("en-US",{month:"long"}),s=i.getFullYear(),l=i.toLocaleString("en-US",{month:"long"});return o!==s||a!==l?(0,g.jsx)("div",{className:"bg-[#F7F9FB] p-4 dark:bg-[#42464D]",children:(0,g.jsxs)("span",{className:"text-base font-semibold leading-5 text-gray-900 dark:text-gray-100",children:[a," ",o]})}):null},Vr=function(){var e=(0,ht.C8)(),t=e.isLoading,r=e.data;if(t)return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,g.jsx)(Xt,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,g.jsx)(Xt,{rows:4,height:"70px",wrapperClassName:"px-2 mb-4"}),(0,g.jsx)(Xt,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,g.jsx)(Xt,{rows:1,height:"70px",wrapperClassName:"px-2 mb-4"})]});var n=(null===r||void 0===r?void 0:r.records)||[];return(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,g.jsx)(A.Di,{weight:"semibold",children:(0,P.t)("support_widget.events")})}),n.map((function(e,t){var r;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(zr,{current:e.starts_at,previous:null===(r=n[t-1])||void 0===r?void 0:r.starts_at}),(0,g.jsx)(Fr,{event:e,last:t===n.length-1},e.id)]})}))]})},qr=r(9951),Zr=r(41609),Gr=r.n(Zr),Wr=function(e){var t=e.post,r=t.id,n=t.name,i=(0,L.k6)();return(0,g.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out",onClick:function(){i.push(_e._N.showPost(r))},children:[(0,g.jsx)("span",{className:"text-dark text-left",children:(0,g.jsx)(ve.Z.LabelSm,{weight:"medium",children:n})}),(0,g.jsx)("span",{className:"-mr-1 ml-2.5",children:(0,g.jsx)(I.JO,{type:"16-chevron-right",size:16,className:"text-dark"})})]})},Hr=function(e){var t=e.spaceId,r=e.searchText,n=(0,Pr.c)(r,500),i=(0,ht.fw)(t,n),o=i.isLoading,a=i.data,s=(null===a||void 0===a?void 0:a.records)||[];return o?(0,g.jsx)(Xt,{rows:5}):Gr()(s)?(0,g.jsx)("div",{className:"flex flex-col justify-center px-6 py-2",children:(0,g.jsx)("div",{className:"mx-auto mb-5 mt-auto w-full",children:(0,g.jsxs)("div",{className:"border-primary bg-primary rounded-lg border",children:[(0,g.jsx)("div",{className:"mt-4 text-center",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"dark:text-[#ABAFB2]",children:(0,P.t)("support_widget.no_articles_found")})}),(0,g.jsx)("div",{className:"mx-6 my-5",children:(0,g.jsx)(pe.rU,{to:_e._N.askChatBot(),children:(0,g.jsx)(gr,{label:(0,P.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})]})})}):(0,g.jsx)("div",{className:"overflow-auto",children:(0,g.jsx)("div",{className:"mt-1.5 flex flex-col justify-center",children:s.map((function(e){return(0,g.jsx)(Wr,{post:e},e.id)}))})})},Qr=["searchText","setSearchText","initialFocus"];function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){$r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Yr=function(e){var t=e.searchText,r=e.setSearchText,i=e.initialFocus,o=void 0===i||i,a=Xr(e,Qr),s=(0,n.useRef)(null),l=(0,L.TH)();return(0,n.useEffect)((function(){var e;o&&(null===(e=s.current)||void 0===e||e.focus())}),[o,l]),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"text-dark pointer-events-none absolute left-0 top-[11px] flex items-center pl-3",children:(0,g.jsx)(I.JO,{type:"16-search",size:20})}),(0,g.jsx)("input",Kr({ref:s,type:"text",defaultValue:t,className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,P.t)("support_widget.placeholder_text"),onChange:function(e){r(e.target.value)}},a))]})},en=function(e){var t=e.spaceGroup,r=(0,W.J1)().setCurrentSpaceProperties,n=(0,L.k6)();return(0,C.isEmpty)(t.spaces)?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"px-6",children:(0,g.jsx)(ve.Z.LabelXxs,{color:"text-light",children:t.name})}),(0,g.jsx)("div",{className:"flex flex-col",children:t.spaces.map((function(e){var t=e.id,i=e.name,o=e.emoji,a=e.custom_emoji_url,s=e.custom_emoji_dark_url;return(0,g.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out last:mb-4",onClick:function(){return e=t,r({name:i,emoji:o,custom_emoji_url:a,custom_emoji_dark_url:s}),void n.push(_e._N.posts(e));var e},children:[(0,g.jsx)(ve.Z.LabelSm,{weight:"medium",children:(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsx)(qr.S,{className:"!h-5 !w-auto",emoji:o,customEmojiUrl:a,customEmojiDarkUrl:s}),(0,g.jsx)("span",{className:"ml-2 break-all",children:i})]})}),(0,g.jsx)(I.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},t)}))})]})},tn=function(){var e=(0,ht.ys)(),t=e.isLoading,r=e.data,n=(null===r||void 0===r?void 0:r.records)||[];return t?(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)(Xt,{width:"50px"}),(0,g.jsx)(Xt,{rows:5})]}):Gr()(n)?(0,g.jsx)("div",{className:"px-6",children:(0,g.jsx)(ve.Z.BodyMd,{children:(0,P.t)("support_widget.no_spaces_found")})}):(0,g.jsx)("div",{className:"mb-4 overflow-auto",children:(0,g.jsx)("div",{className:"mt-1.5",children:n.map((function(e){return(0,g.jsx)(en,{spaceGroup:e},e.id)}))})})};function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var on=function(){var e=rn((0,n.useState)(""),2),t=e[0],r=e[1],i=(0,L.k6)(),o=(0,L.UO)().spaceId,a=(0,W.J1)().currentSpaceProperties,s=a.custom_emoji_url,l=a.custom_emoji_dark_url,c=a.emoji,u=a.name,d=t||o,p=(0,L.$B)(_e._N.spaceGroups());return(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:K()("bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center space-x-4 border-b px-3",{"justify-between":o,"justify-center":!o}),children:[o&&(0,g.jsx)($e,{type:"back",onClick:function(){return i.replace("/space_groups")}}),p?(0,g.jsx)(A.Di,{weight:"semibold",children:(0,P.t)("support_widget.search_container.title")}):(0,g.jsxs)("div",{className:"text-dark help-view-title flex",children:[(0,g.jsx)(qr.S,{className:"!h-5 !w-auto",emoji:c,customEmojiUrl:s,customEmojiDarkUrl:l}),(0,g.jsx)("span",{className:"ml-2",children:(0,g.jsx)(A.Di,{weight:"semibold",children:u})})]}),o&&(0,g.jsx)("div",{className:"w-[44px]"})]}),(0,g.jsx)("div",{className:"px-6 pb-2 pt-5",children:(0,g.jsx)(Yr,{searchText:t,setSearchText:r})}),d?(0,g.jsx)(Hr,{spaceId:o,searchText:t}):(0,g.jsx)(tn,{})]})},an=function(){var e=(0,L.k6)();return(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"pointer-events-none absolute left-0 top-2.5 flex items-center pl-3 text-gray-500",children:(0,g.jsx)(I.JO,{type:"20-ai",size:20})}),(0,g.jsx)("input",{type:"text",className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,P.t)("support_widget.chatbot.what_do_you_need_help_with"),onFocus:function(){return e.push("/ask")}})]})},sn=function(){var e=(0,ht.mb)(),t=e.isError,r=e.isLoading,n=e.data;return r?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,g.jsx)(Xt,{rows:1,height:"200px",wrapperClassName:"px-4 mb-4"})]}):t||0===Object.keys(n).length?null:(0,g.jsxs)(pe.rU,{className:"border-primary bg-primary block cursor-pointer rounded-lg border p-4",to:"/news/".concat(n.id),children:[n.cover_image_url&&(0,g.jsx)("div",{children:(0,g.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:n.cover_image_url})}),(0,g.jsxs)("div",{className:"text-dark mb-1",children:[(0,g.jsx)("div",{className:"news-title pb-3",children:(0,g.jsx)(A.Di,{weight:"semibold",children:n.name})}),(0,g.jsx)("div",{className:"news-excerpt",children:(0,g.jsx)(re.Q,{children:(0,C.truncate)(n.body_plain_text,{length:200})})})]})]})},ln=function(){var e=(0,W.J1)().toggleWidget,t=(0,N.wh)().currentUser;return window.drift.on("chatClose",(function(){window.drift.api.widget.hide(),window.drift.unload(),e()})),(0,g.jsx)("button",{type:"submit",onClick:function(){"undefined"!==typeof window.drift&&(e(),window.drift.load("fbn954vvh72x"),window.drift.on("ready",(function(){window.drift.config({verticalOffset:4,horizontalOffset:18}),window.drift.identify(t.id,{name:t.name,email:t.email}),window.drift.api.startInteraction({interactionId:361881})})))},className:"border-primary bg-primary mb-4 block w-full rounded-lg border pt-4 text-left",children:(0,g.jsx)("div",{className:"mb-4 ml-6",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",children:(0,P.t)("support_widget.talk_to_agent")})})})},cn=function(){var e=(0,ht.HF)(),t=e.isLoading,r=e.data,n=(r=void 0===r?{records:[]}:r).records;return t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,wrapperClassName:"mb-1.5"}),(0,g.jsx)(Xt,{rows:3,wrapperClassName:"space-y-1"})]}):(0,g.jsx)("div",{className:"mt-1.5 flex flex-col justify-center pb-4",children:n.slice(0,he.St).map((function(e){return(0,g.jsx)(Wr,{post:e},e.id)}))})},un=r(80312),dn=function(){var e=(0,N.wh)().currentCommunityMember,t=function(){var e=(0,N.wh)(),t=e.currentCommunity,r=e.currentCommunitySettings,i=!(null===r||void 0===r||!r.drift_at_support_widget_enabled),o=t.is_on_trial&&i;return(0,n.useEffect)((function(){if(o){var e=document.createElement("script");return e.type="text/javascript",e.id="hs-script-loader",e.async=!0,e.defer=!0,e.src="//js.hs-scripts.com/9306053.js",document.body.appendChild(e),function(){try{document.body.removeChild(e)}catch(t){console.error("SupportWidget - Failed to remove drift script:",t)}}}}),[o]),{shouldShowDriftLink:o}}(),r=t.shouldShowDriftLink;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"bg-circle h-[220px] rounded-lg rounded-b-none pb-[140px] pt-7",children:(0,g.jsxs)("div",{className:"pl-8",children:[(0,g.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,g.jsx)("img",{loading:"lazy",src:te,alt:(0,P.t)("support_widget.circle_logo_alt_text"),className:"h-10 w-10"})}),(0,g.jsxs)("div",{className:"mt-4 flex items-center text-white",children:[(0,g.jsx)(ve.Z.TitleMd,{color:"text-white",children:(0,P.t)("support_widget.greeting",{first_name:(null===e||void 0===e?void 0:e.first_name)||(0,P.t)("support_widget.default_greeting_name")})}),(0,g.jsx)("img",{loading:"lazy",src:un,alt:(0,P.t)("support_widget.hand_wave_alt_text"),className:"ml-2 h-6 w-6"})]}),(0,g.jsx)("div",{className:"mt-1",children:(0,g.jsx)(ve.Z.BodySm,{color:"text-white",children:(0,P.t)("support_widget.greeting_question_1")})})]})}),(0,g.jsxs)("div",{className:"px-4 pb-4",children:[(0,g.jsxs)("div",{className:"border-primary bg-primary mb-4 mt-[-64px] rounded-lg border pt-4",children:[(0,g.jsx)("div",{className:"ml-6",children:(0,g.jsx)("span",{className:"flex items-center gap-3",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"text-dark",children:(0,P.t)("support_widget.chatbot.i_need_help")})})}),(0,g.jsx)("div",{className:"px-6 py-4",children:(0,g.jsx)(an,{})})]}),(0,g.jsxs)("div",{className:"border-primary bg-primary mb-4 rounded-lg border pt-4",children:[(0,g.jsx)("div",{className:"mb-3 ml-6",children:(0,g.jsx)("a",{href:"https://community.circle.so/c/tutorials",target:"_blank",rel:"noreferrer",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",color:"text-dark hover:text-circle",children:(0,P.t)("support_widget.tutorial_posts")})})}),(0,g.jsx)(cn,{})]}),r&&(0,g.jsx)(ln,{}),(0,g.jsx)(sn,{})]})]})},pn=function(e){var t=e.post;return(0,g.jsxs)(pe.rU,{className:"border-primary bg-primary mb-4 block cursor-pointer rounded-lg border p-4",to:"/news/".concat(t.id),children:[t.cover_image_url&&(0,g.jsx)("div",{children:(0,g.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:t.cover_image_url})}),(0,g.jsxs)("div",{className:"text-dark mb-1",children:[(0,g.jsx)("div",{className:"news-title pb-3",children:(0,g.jsx)(A.Di,{weight:"semibold",children:t.name})}),(0,g.jsx)("div",{className:"news-excerpt",children:(0,g.jsx)(re.Q,{children:(0,C.truncate)(t.body_plain_text,{length:200})})})]})]})},fn=function(){var e=(0,ht.bc)(),t=e.isLoading,r=e.data;if(t)return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,g.jsx)(Xt,{rows:2,height:"170px",wrapperClassName:"px-2 mb-4"})]});var n=(null===r||void 0===r?void 0:r.records)||[];return(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 mb-4 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,g.jsx)(A.Di,{weight:"semibold",children:(0,P.t)("support_widget.news.news")})}),(0,g.jsxs)("div",{className:"mb-4 px-4",children:[n.map((function(e){return(0,g.jsx)(pn,{post:e},e.id)})),(0,g.jsxs)("a",{href:he.NA,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-circle my-4 flex w-full justify-center gap-2 rounded-md border p-1",children:[(0,P.t)("support_widget.news.see_more"),(0,g.jsx)(I.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})]})]})},mn=r(51705),bn=r(34141),hn=r(7074),vn=function(e){var t=e.postUrl;return(0,g.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"border-circle my-2 flex w-full justify-center gap-2 rounded-lg border p-1",children:[(0,g.jsx)(I.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16}),(0,P.t)("support_widget.open_post")]})},yn=function(){var e=(0,L.$B)().params.id,t=(0,ht.HG)(e),r=t.isError,n=t.isLoading,i=t.data;return n?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,g.jsx)(Xt,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,g.jsx)(Xt,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,g.jsx)(Xt,{rows:6})]}):r?(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] items-center justify-between border-b px-3",children:[(0,g.jsx)($e,{type:"back"}),(0,g.jsx)("div",{className:"flex items-center",children:(0,g.jsx)($e,{type:"expand"})})]}),(0,g.jsx)("div",{className:"support-widget-post__body grow",children:(0,g.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,P.t)("support_widget.post_not_found")})})]}):(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,g.jsx)($e,{type:"back"}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)($e,{href:null===i||void 0===i?void 0:i.post_url,icon:"share-support-widget",size:16}),(0,g.jsx)($e,{type:"expand"})]})]}),(0,g.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[i.cover_image_url&&(0,g.jsx)("div",{children:(0,g.jsx)("img",{loading:"lazy",alt:"",src:i.cover_image_url})}),(0,g.jsx)("div",{className:"mx-6 my-4",children:(0,g.jsx)(ve.Z.TitleMd,{children:(0,g.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:i.post_url||he.NA,target:"_blank",rel:"noreferrer noopener",children:i.name})})}),(0,g.jsxs)("div",{id:"news_view_post_body",className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,mn.Iz)(i)&&i.body_trix_content&&(0,g.jsx)(bn.P,{content:i.body_trix_content}),(0,mn.s8)(i)&&i.tiptap_body&&(0,g.jsx)(hn.R,{readOnly:!0,value:i.tiptap_body.body,sgidToObjectMap:i.tiptap_body.sgids_to_object_map,inlineAttachments:i.tiptap_body.inline_attachments,disabledExtensions:["cta"]}),(0,g.jsx)("div",{className:"py-4",children:(0,g.jsx)(vn,{postUrl:i.post_url})})]})]})]})},gn=r(64248);function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jn=function(e){var t=e.post,r=_n((0,n.useState)(null),2),i=r[0],o=r[1],a=(0,$.useMutation)((function(e){var t=e.postId,r=e.value;return X.R.createPostFeedback({postId:t,helpful:r})})).mutate;return(0,n.useEffect)((function(){null!==i&&document.getElementById("feedback-response-container").scrollIntoView()}),[i]),(0,g.jsxs)("div",{className:"mx-auto w-full pt-4",children:[(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsx)(A.Di,{weight:"semibold",children:(0,P.t)("support_widget.was_this_article_helpful")})}),(0,g.jsx)("div",{className:"mb-6 flex justify-center gap-4",children:(0,g.jsx)(gn.O,{value:i,handleFeedback:function(e){o(e),a({postId:t.id,value:e})}})}),(0,g.jsxs)("div",{id:"feedback-response-container",children:[i&&(0,g.jsx)("div",{className:"mb-2",children:(0,g.jsx)(re.Q,{children:(0,P.t)("support_widget.thank_you_for_article_feedback")})}),!1===i&&(0,g.jsx)("div",{className:"mt-8",children:(0,g.jsx)("div",{className:"bg-primary",children:(0,g.jsx)("div",{className:"my-5",children:(0,g.jsx)(pe.rU,{to:_e._N.askChatBot(),children:(0,g.jsx)(gr,{label:(0,P.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})})})]})]})},wn=function(e){var t=e.id,r=(0,n.useRef)(null),i=(0,L.k6)(),o=(0,ht.vc)(t),a=o.isError,s=o.isLoading,l=o.data,c=(null===l||void 0===l?void 0:l.post_url)||he.kL;["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach((function(e){c.includes(e)&&(c=c.replace(e,"help.circle.so"))}));var u=(0,n.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("data-post-id");i.push(_e._N.showPost(t))}),[i]),d=(0,n.useCallback)((function(e){var t=e.containerElement;l&&(t.querySelectorAll(".trix-content a").forEach((function(e){l.urls_hash[e.href]?e.setAttribute("data-post-id",l.urls_hash[e.href]):(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer"))})),t.querySelectorAll(".trix-content a[data-post-id]").forEach((function(e){e.addEventListener("click",u)})),r.current=t)}),[l,u]);return(0,n.useEffect)((function(){return function(){r.current&&r.current.querySelectorAll(".trix-content a[data-post-id]").forEach((function(e){e.removeEventListener("click",u)}))}}),[u]),s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xt,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,g.jsx)(Xt,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,g.jsx)(Xt,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,g.jsx)(Xt,{rows:6})]}):a?(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,g.jsx)($e,{type:"back"}),(0,g.jsx)("div",{className:"flex items-center",children:(0,g.jsx)($e,{type:"expand"})})]}),(0,g.jsx)("div",{className:"support-widget-post__body grow",children:(0,g.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,P.t)("support_widget.post_not_found")})})]}):(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,g.jsx)($e,{type:"back"}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)($e,{href:c,icon:"share-support-widget",size:16}),(0,g.jsx)($e,{type:"expand"})]})]}),(0,g.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[l.cover_image_url&&(0,g.jsx)("div",{children:(0,g.jsx)("img",{loading:"lazy",alt:"",src:l.cover_image_url})}),(0,g.jsx)("div",{className:"mx-6 my-4",children:(0,g.jsx)(ve.Z.TitleLg,{children:(0,g.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:c,target:"_blank",rel:"noreferrer noopener",children:l.name})})}),(0,g.jsxs)("div",{className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,mn.Iz)(l)&&l.body_trix_content&&(0,g.jsx)(bn.P,{content:l.body_trix_content,transformLinks:d}),(0,mn.s8)(l)&&l.tiptap_body&&(0,g.jsx)(hn.R,{readOnly:!0,value:l.tiptap_body.body,sgidToObjectMap:l.tiptap_body.sgids_to_object_map,inlineAttachments:l.tiptap_body.inline_attachments}),(0,g.jsx)(vn,{postUrl:c}),"tutorials"!==l.space_slug&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"border-primary mb-0 grow border-b pt-2"}),(0,g.jsx)(jn,{post:l})]})]})]})]})};function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){Pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nn=function(){var e,t=(0,W.J1)(),r=t.isOpen,i=t.shouldDisplayOnboarding,o=t.toggleWidget,a=kn((0,n.useState)(0),2),s=a[0],l=a[1],c=kn((0,n.useState)(!1),2),u=c[0],d=c[1],p=kn((0,n.useState)(!0),2),f=p[0],m=p[1],b=kn((0,n.useState)(i),2),h=b[0],v=b[1],y=["/"],_=null===(e=(0,se.$o)())||void 0===e?void 0:e.location,x=(0,N.wh)(),j=x.currentCommunity,w=x.currentCommunitySettings;_&&"/"!=_&&y.push(_);var O=(0,$.useMutation)((function(){return X.R.completeOnboarding()}),{onSuccess:function(){},onError:function(){}}).mutate;(0,n.useEffect)((function(){l((0,se.pj)())}),[]);var S=function(){h&&O(),v(!1)},k=function(){return d(!0)},C=function(){return d(!1)},A=!r&&f&&h;return(0,g.jsxs)("div",{className:"fixed bottom-4 z-[60] flex flex-col",style:{right:s},children:[(0,g.jsx)(Q.u,Sn(Sn({show:r},he.sm),{},{children:(0,g.jsxs)(L.VA,{initialEntries:y,initialIndex:y.length-1,children:[(null===w||void 0===w?void 0:w.support_widget_analytics_enabled)&&(0,g.jsx)(L.AW,{render:function(e){var t=e.location;return"function"===typeof window.gtag&&window.gtag("event","page_view",{page_location:window.location.href,page_path:t.pathname+t.search,page_title:(0,P.t)("support_widget.support_widget"),community_name:null===j||void 0===j?void 0:j.name,community_id:null===j||void 0===j?void 0:j.id}),null}}),(0,g.jsx)(be,{children:(0,g.jsx)(de,{children:(0,g.jsxs)(L.rs,{children:[(0,g.jsx)(L.AW,{exact:!0,path:"/",component:dn},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/ask",component:Vt},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/form",component:Ur},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/space_groups",component:on},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/news",component:fn},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/spaces/:spaceId/posts",component:on},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/conversations",component:Sr},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/conversations/:id",component:fr},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/news/:id",component:yn},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/posts/:id",render:function(e){var t=e.match;return(0,g.jsx)(wn,{id:t.params.id},t.params.id)}},"path"),(0,g.jsx)(L.AW,{exact:!0,path:"/events",component:Vr},"path")]})})})]})})),A&&(0,g.jsx)(ie,{onClick:function(){return S()}}),(0,g.jsxs)("div",{className:"-mr-5 mt-5 flex justify-end align-baseline",onMouseOver:k,onFocus:k,onMouseOut:C,onBlur:C,children:[(0,g.jsx)("div",{className:K()("transition-[width,transform] duration-300 ease-linear",{"translate-x-30 w-0":!f}),children:(0,g.jsx)(ee,{isOpen:r,onClick:function(){f&&(S(),o({shouldTriggerOnWidgetClose:!0}))}})}),(0,g.jsx)(I.JO,{type:f?"12-chevron-right":"12-chevron-left",size:12,className:K()("cursor-pointer text-gray-400",{invisible:h||r||f&&!u}),onClick:f?function(){return m(!1)}:function(){return m(!0)}})]})]})};function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach((function(t){En(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function En(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dn=function(e){var t=e.showWidgetBot,r=(0,L.TH)(),i=(0,N.nT)().records,o=(0,N.wh)().currentCommunityMember,a=(0,se.$o)();for(var s in a)(s.match(/conversation-view-\d+-comment/)&&""===a[s]||s.match(/conversation-view-\d+-attachments/)&&0===a[s].length||"isChatWindowExpanded"===s)&&delete a[s];(0,se.qQ)(a);var l=!(null!==o&&void 0!==o&&o.is_admin),c=i.filter((function(e){return"chat"===e.post_type})).map((function(e){return e.slug})),u=he._9.concat(c).some((function(e){return r.pathname.includes(e)})),d=(0,W.J1)().openWidget;return(0,n.useEffect)((function(){t&&((0,se.qQ)(An(An({},(0,se.$o)()),{},{location:"/ask"})),d())}),[]),l||u?null:(0,g.jsx)(g.Fragment,{children:(0,G.createPortal)((0,g.jsx)(w.S,{renderFunc:H,children:(0,g.jsx)(Nn,{})}),document.body)})},Tn=r(36589),Ln=r(2347),Mn=r(80388),Rn=r(86308),Bn=r(63411),Un=r(60500),Fn=["children","hideAppBar"];function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(r),!0).forEach((function(t){qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Gn=function(e){var t=e.children,r=e.hideAppBar,i=Zn(e,Fn),o=(0,Rn.l)(),a=o.config,s=o.setConfig,l=(0,R.T)().isReactFlowWorkflowsRoute;return(0,n.useEffect)((function(){s((function(e){return Vn(Vn({},e),{},{hideAppBar:r})}))}),[r,s]),(0,Un.T)(),(0,g.jsx)(Bn.a,Vn(Vn({},i),{},{disableRightSidebar:a.disableRightSidebar,renderLeftSidebar:a.renderLeftSidebar,disableSidebar:a.disableSidebar||l,hideAppBar:a.hideAppBar,children:t}))},Wn=["children"];function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var $n=function(e){var t=e.children,r=Kn(e,Wn);return(0,Un.M)(),(0,g.jsx)(Gn,Qn(Qn({},r),{},{children:t}))},Xn=["shouldHideMainHeader","children","hideAppBar"];function Yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(r),!0).forEach((function(t){ti(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ri(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ni=function(e){var t=e.shouldHideMainHeader,r=void 0===t||t,n=e.children,i=e.hideAppBar,o=void 0!==i&&i,a=ri(e,Xn);return r?(0,g.jsx)(Rn.S,{children:(0,g.jsx)($n,ei(ei({},a),{},{children:n}))}):(0,g.jsx)(Rn.S,{children:(0,g.jsx)(Gn,ei(ei({hideAppBar:o},a),{},{children:n}))})},ii=r(68997),oi=r(66368),ai=r(55810),si=r(25954),li=r(23078),ci=r(40207),ui=(0,li.u)((function(){return Promise.all([r.e(6638),r.e(4748)]).then(r.bind(r,98155))})),di=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ui,{})})},pi=(0,li.u)((function(){return r.e(6818).then(r.bind(r,6818))})),fi=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(pi,{})})},mi=r(59506),bi=r(75126),hi=r(13288),vi=r(42991),yi=r(70275),gi=r(20893),_i=function(){return(0,m.TC)().isDarkAppearance?(0,g.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsxs)("g",{clipPath:"url(#clip0_4781_81533)",children:[(0,g.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4781_81533)"}),(0,g.jsx)("rect",{width:"134",height:"134",fill:"url(#paint1_linear_4781_81533)"}),(0,g.jsx)("rect",{x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,g.jsx)("rect",{x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,g.jsx)("rect",{x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("radialGradient",{id:"paint0_radial_4781_81533",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,g.jsx)("stop",{stopColor:"#469AFC"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,g.jsxs)("linearGradient",{id:"paint1_linear_4781_81533",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#2B2E33"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#212428"})]}),(0,g.jsx)("clipPath",{id:"clip0_4781_81533",children:(0,g.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]}):(0,g.jsx)("div",{children:(0,g.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{id:"Avatar",children:(0,g.jsxs)("g",{clipPath:"url(#clip0_4495_28245)",children:[(0,g.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4495_28245)"}),(0,g.jsx)("rect",{id:"Img",width:"134",height:"134",fill:"url(#paint1_linear_4495_28245)"}),(0,g.jsx)("rect",{id:"Rectangle 1940",x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,g.jsx)("rect",{id:"Rectangle 1942",x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,g.jsx)("rect",{id:"Rectangle 1941",x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]})}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("radialGradient",{id:"paint0_radial_4495_28245",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,g.jsx)("stop",{stopColor:"#469AFC"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,g.jsxs)("linearGradient",{id:"paint1_linear_4495_28245",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#F7F9FA"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#E6ECEF"})]}),(0,g.jsx)("clipPath",{id:"clip0_4495_28245",children:(0,g.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]})})},xi=function(e){var t=e.agents,r=e.handleEditAgent;return(0,g.jsxs)("div",{className:"bg-secondary flex justify-between border-b px-12 py-8",children:[(0,g.jsxs)("div",{className:"flex items-start space-x-8",children:[(0,g.jsx)(_i,{}),(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)(gi.s6,{weight:"semibold",children:(0,vi.t)("settings.community_bot.agents.banner.title")}),(0,g.jsx)(ke.p,{color:"text-light",children:(0,vi.t)("settings.community_bot.agents.banner.description")}),t.length>0&&(0,g.jsxs)(M.z,{variant:"secondary","aria-hidden":!0,className:"!border-primary hover:!border-secondary mt-2 flex w-fit gap-1.5",onClick:function(){return r(t[0])},children:[(0,g.jsx)(I.JO,{type:"14-ai-pencil","aria-hidden":!0,stroke:"secondary",className:"-ml-1",size:14}),(0,g.jsx)(yi.S,{color:"secondary",children:(0,vi.t)("settings.community_bot.agents.banner.edit_profile_button.title")})]})]})]}),(0,g.jsx)(I.JO,{type:"20-close",size:20,className:"!self-start"})]})},ji=r(1712),wi=function(){return(0,g.jsx)("div",{children:(0,g.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsxs)("g",{clipPath:"url(#clip0_2754_80797)",children:[(0,g.jsx)("rect",{width:"32",height:"32",rx:"16",fill:"url(#paint0_radial_2754_80797)"}),(0,g.jsx)("rect",{width:"32",height:"32",fill:"url(#paint1_linear_2754_80797)"}),(0,g.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_2754_80797)",children:(0,g.jsx)("path",{d:"M21.5 25.5L11 19.5V19H21H28.5L21.5 25.5Z",fill:"url(#paint2_linear_2754_80797)"})}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.3033 14.46V17.1079C12.3033 17.5199 12.4039 17.7855 12.5212 17.9625C12.6412 18.1434 12.8055 18.2718 12.9891 18.3641C13.1753 18.4578 13.3693 18.5078 13.5223 18.5335C13.5972 18.546 13.6582 18.552 13.698 18.5549C13.7177 18.5563 13.7318 18.5569 13.7394 18.5572L13.7448 18.5573H18.3231C18.7307 18.5573 18.9931 18.4568 19.1682 18.3394C19.3476 18.2192 19.4756 18.0539 19.5679 17.8683C19.6614 17.6802 19.7114 17.4842 19.7371 17.3296C19.7496 17.2539 19.7556 17.1922 19.7585 17.152C19.7599 17.132 19.7605 17.1176 19.7608 17.1099L19.7609 17.1042V14.4563C19.7609 14.0443 19.6603 13.7787 19.543 13.6017C19.423 13.4208 19.2587 13.2924 19.0751 13.2001C18.8889 13.1065 18.6949 13.0564 18.5419 13.0308C18.467 13.0182 18.406 13.0122 18.3662 13.0093C18.3465 13.0079 18.3324 13.0073 18.3248 13.007L18.3194 13.0069H13.7411C13.3335 13.0069 13.0711 13.1074 12.896 13.2248C12.7166 13.345 12.5886 13.5103 12.4963 13.6959C12.4028 13.884 12.3528 14.08 12.3272 14.2346C12.3146 14.3103 12.3086 14.372 12.3057 14.4122C12.3043 14.4322 12.3037 14.4466 12.3034 14.4543L12.3033 14.46ZM18.3231 12.3553C18.3231 11.7036 18.3235 11.7036 18.3238 11.7036L18.3245 11.7036L18.3261 11.7036L18.3299 11.7036L18.3397 11.7038C18.3473 11.7039 18.3569 11.7041 18.3684 11.7045C18.3915 11.7053 18.4222 11.7067 18.4596 11.7094C18.5342 11.7147 18.6364 11.7251 18.7573 11.7454C18.9961 11.7854 19.3244 11.8667 19.6606 12.0357C19.9993 12.206 20.3574 12.4716 20.6292 12.8816C20.9036 13.2955 21.0642 13.8178 21.0642 14.4563V17.1079H20.4126C21.0642 17.1079 21.0642 17.1082 21.0642 17.1085L21.0642 17.1092L21.0642 17.1108L21.0642 17.1145L21.0641 17.1244C21.0639 17.1319 21.0637 17.1415 21.0633 17.1531C21.0626 17.1761 21.0611 17.2069 21.0585 17.2443C21.0532 17.319 21.0429 17.4215 21.0228 17.5427C20.9831 17.7821 20.9025 18.1114 20.7349 18.4485C20.566 18.7882 20.3023 19.1482 19.894 19.4219C19.4814 19.6985 18.9603 19.8606 18.3231 19.8606H13.7411V19.209C13.7411 19.8606 13.7407 19.8606 13.7404 19.8606L13.7397 19.8606L13.7381 19.8606L13.7343 19.8606L13.7245 19.8604C13.7169 19.8603 13.7073 19.8601 13.6958 19.8597C13.6727 19.8589 13.642 19.8575 13.6046 19.8548C13.53 19.8495 13.4278 19.8391 13.3069 19.8188C13.0681 19.7788 12.7398 19.6975 12.4036 19.5285C12.0649 19.3582 11.7068 19.0926 11.435 18.6826C11.1606 18.2687 11 17.7464 11 17.1079V14.4563H11.6492C11 14.4563 11 14.456 11 14.4557L11 14.455L11 14.4534L11 14.4497L11.0001 14.4398C11.0003 14.4323 11.0005 14.4227 11.0009 14.4111C11.0016 14.3881 11.0031 14.3573 11.0057 14.3199C11.011 14.2452 11.0213 14.1427 11.0414 14.0215C11.0811 13.7821 11.1617 13.4528 11.3293 13.1157C11.4982 12.776 11.762 12.416 12.1703 12.1423C12.5828 11.8657 13.1039 11.7036 13.7411 11.7036H18.3231V12.3553ZM19.7609 17.1035C19.7609 17.1034 19.7609 17.1034 19.7609 17.1035L19.7609 17.1035Z",fill:"white"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0325 9C16.3924 9 16.6841 9.29175 16.6841 9.65164V12.3549C16.6841 12.7147 16.3924 13.0065 16.0325 13.0065C15.6726 13.0065 15.3809 12.7147 15.3809 12.3549V9.65164C15.3809 9.29175 15.6726 9 16.0325 9Z",fill:"white"}),(0,g.jsx)("path",{opacity:"0.6",fillRule:"evenodd",clipRule:"evenodd",d:"M17.8062 21.5984C17.8062 21.9583 17.5531 22.2501 17.2409 22.2501L14.896 22.2501C14.5838 22.2501 14.3307 21.9583 14.3307 21.5984C14.3307 21.2385 14.5838 20.9468 14.896 20.9468L17.2409 20.9468C17.5531 20.9468 17.8062 21.2385 17.8062 21.5984Z",fill:"white"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4285 14.7429C14.7884 14.7429 15.0801 15.0347 15.0801 15.3946V16.1713C15.0801 16.5311 14.7884 16.8229 14.4285 16.8229C14.0686 16.8229 13.7769 16.5311 13.7769 16.1713V15.3946C13.7769 15.0347 14.0686 14.7429 14.4285 14.7429Z",fill:"white"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.636 14.7429C17.9959 14.7429 18.2877 15.0347 18.2877 15.3946V16.1713C18.2877 16.5311 17.9959 16.8229 17.636 16.8229C17.2761 16.8229 16.9844 16.5311 16.9844 16.1713V15.3946C16.9844 15.0347 17.2761 14.7429 17.636 14.7429Z",fill:"white"})]}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("filter",{id:"filter0_f_2754_80797",x:"9",y:"17",width:"21.5",height:"10.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"1",result:"effect1_foregroundBlur_2754_80797"})]}),(0,g.jsxs)("radialGradient",{id:"paint0_radial_2754_80797",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16 16) rotate(90) scale(16)",children:[(0,g.jsx)("stop",{stopColor:"#469AFC"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,g.jsxs)("linearGradient",{id:"paint1_linear_2754_80797",x1:"16",y1:"0",x2:"16",y2:"32",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#516DF1"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#6C47D2"})]}),(0,g.jsxs)("linearGradient",{id:"paint2_linear_2754_80797",x1:"19",y1:"21",x2:"23.5",y2:"23.5",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{}),(0,g.jsx)("stop",{offset:"1",stopColor:"#6750D9"})]}),(0,g.jsx)("clipPath",{id:"clip0_2754_80797",children:(0,g.jsx)("rect",{width:"32",height:"32",rx:"16",fill:"white"})})]})]})})},Oi=r(30636);function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ki=function(e){var t=e.agent,r=(0,Oi.vQ)({id:t.id}).mutate,i=Si((0,n.useState)(t.enabled),2),o=i[0],a=i[1];return(0,g.jsxs)("div",{className:"border-primary bg-primary m-4 rounded-lg border p-6",children:[(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)("div",{className:"h-8 w-8",children:t.avatar_url?(0,g.jsx)("img",{src:t.avatar_url,alt:(0,P.t)("community_bot.bot_builder.customize_page.avatar"),loading:"eager",className:"rounded-full"}):(0,g.jsx)(wi,{})}),(0,g.jsx)(gi.s6,{weight:"medium",children:t.name})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsxs)("div",{className:"flex gap-4",children:[(0,g.jsxs)(M.z,{variant:"secondary","aria-hidden":!0,className:"!border-primary hover:!border-secondary mt-2 flex w-fit gap-1.5",children:[(0,g.jsx)(I.JO,{type:"16-ai",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"}),(0,g.jsx)(yi.S,{color:"secondary",children:"ai-generated"===t.answer_type?(0,P.t)("settings.community_bot.agents.ai_generated_answers_button.title"):(0,P.t)("settings.community_bot.agents.custom_answers_button.title")})]}),(0,g.jsxs)(M.z,{variant:"secondary","aria-hidden":!0,className:"!border-primary hover:!border-secondary mt-2 flex w-fit gap-1.5",children:[(0,g.jsx)(I.JO,{type:"16-group",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"}),(0,g.jsx)(yi.S,{color:"text-disabled",children:(0,P.t)("settings.community_bot.agents.role_type.title_1")}),(0,g.jsx)(yi.S,{color:"secondary",children:(0,P.t)("settings.community_bot.agents.role_type.title_2")})]}),(0,g.jsxs)(M.z,{variant:"secondary","aria-hidden":!0,className:"!border-primary hover:!border-secondary mt-2 flex w-fit gap-1.5",children:[(0,g.jsx)(I.JO,{type:"20-friendly-behavior-type","aria-hidden":!0,stroke:"secondary",size:20,className:"-ml-1"}),(0,g.jsx)(yi.S,{color:"secondary",children:(0,P.t)("settings.community_bot.agents.behavior_type_button.options.".concat(t.tone.replaceAll("-","_")))})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-6",children:[(0,g.jsxs)("div",{className:"m-0 flex w-full flex-row items-center",children:[(0,g.jsx)("span",{className:"mt-0.5",children:(0,g.jsx)(ji.r,{checked:o,onChange:function(e){return function(e){a(e),r({id:t.id,enabled:e})}(e)}})}),(0,g.jsx)("span",{className:K()("ml-3",{"font-normal":!o,"font-semibold":o}),children:(0,g.jsx)("span",{className:"mb-1",children:(0,g.jsx)(Ie.T1,{children:o?(0,P.t)("settings.community_bot.agents.enabled"):(0,P.t)("settings.community_bot.agents.disabled")})})})]}),(0,g.jsxs)(M.z,{variant:"circle","aria-hidden":!0,className:"flex w-fit gap-1.5",onClick:function(){return e=t.id,void(window.location.href=bi.X.customize({botPublicId:e.toString()}));var e},children:[(0,g.jsx)(I.JO,{type:"14-ai-pencil","aria-hidden":!0,className:"-ml-1",size:14}),(0,g.jsx)(yi.S,{color:"text-primary",children:(0,P.t)("settings.community_bot.agents.banner.edit_button.title")})]})]})]})]})},Ci=function(e){var t=e.agents;return(0,g.jsx)("div",{className:"flex flex-col px-6",children:t.map((function(e){return(0,g.jsx)(ki,{agent:e},e.id)}))})},Ni=r(8230),Ii=function(){var e=(0,Oi.X5)();return(0,g.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-9 p-8 text-center","data-testid":"empty-state",children:[(0,g.jsx)("img",{width:287,height:415,src:Ni,alt:"",loading:"eager"}),(0,g.jsxs)("div",{className:"mt-[-160px] flex flex-col items-center justify-center gap-5",children:[(0,g.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,g.jsx)(ve.Z.TitleMd,{children:(0,P.t)("settings.community_bot.empty.header")}),(0,g.jsx)(ve.Z.BodyMd,{children:(0,P.t)("settings.community_bot.empty.description")})]}),(0,g.jsx)("div",{className:"flex gap-3",children:(0,g.jsx)(M.z,{type:"button",variant:"circle",large:!0,onClick:function(){return e.mutate()},children:(0,P.t)("settings.community_bot.empty.primary_label")})})]})]})},Ai=function(){var e,t,r=(0,Oi.OH)({currentPage:1}),n=r.data;if(r.isLoading)return(0,g.jsx)(hi.a,{});if(!n||!n.records||0===n.records.length)return(0,g.jsx)(Ii,{});return(0,g.jsxs)("div",{className:"bg-secondary flex h-full flex-col",children:[(0,g.jsx)(mi.b,{pageTitle:(0,P.t)("settings.community_bot.agents.title")}),(0,g.jsx)(xi,{agents:null!==(e=null===n||void 0===n?void 0:n.records)&&void 0!==e?e:[],handleEditAgent:function(e){window.location.href=bi.X.customize({botPublicId:e.id.toString()})}}),(0,g.jsx)(Ci,{agents:null!==(t=null===n||void 0===n?void 0:n.records)&&void 0!==t?t:[]})]})},Ei=r(6952),Di=r(30431),Ti=r(58253),Li=r(56128),Mi=r(25362),Ri=r(82177),Bi=r(877),Ui=r(31280),Fi=function(){return(0,g.jsx)("div",{className:"flex-1 overflow-auto px-5 py-4","data-ai-scrollable":!0,children:(0,g.jsxs)("div",{className:"trix-v2 mx-auto grid h-full max-w-3xl grid-rows-[auto,auto,1fr]",children:[(0,g.jsx)(Bi.n,{maxLength:255,draggable:!1,name:"title",autoFocus:!0,placeholder:(0,P.t)("settings.community_bot.knowledge.custom.placeholders.title"),className:"bg-primary text-dark mb-2 block w-full resize-none border-none p-0 text-2xl font-bold focus:ring-0",rows:1,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},tabIndex:0}),(0,g.jsx)(Ui.$,{placeholder:(0,P.t)("settings.community_bot.knowledge.custom.placeholders.body"),name:"body.body",className:"h-full",editorClassName:"h-full quick-post-modal--v2"})]})})},zi=function(e){var t=e.label,r=(0,Oe.Gc)(),n=r.watch,i=r.formState.isSubmitting,o=n(),a=o.title,s=o.body,l=!a||function(e){var t,r;return"undefined"===typeof e||"undefined"===typeof e.body||1===(null===e||void 0===e||null===(t=e.body)||void 0===t||null===(r=t.content)||void 0===r?void 0:r.length)&&"paragraph"===e.body.content[0].type&&!e.body.content[0].content}(s)||i;return(0,g.jsx)("footer",{className:"border-primary flex items-center justify-end border-t px-5 py-4","data-testid":"quick-post-footer",children:(0,g.jsx)("div",{className:"flex items-center space-x-2",children:(0,g.jsx)(M.z,{disabled:l,type:"submit",variant:"circle",children:t})})})},Vi=function(e){var t=e.defaultValues,r=e.onSubmit,n=e.actionLabel;return(0,g.jsxs)(ge.l,{defaultValues:t,mode:"all",className:"h-[calc(100%-62px)]",formClassName:"h-full flex flex-col",onSubmit:r,children:[(0,g.jsx)(Fi,{}),(0,g.jsx)(zi,{label:n})]})},qi=r(54482),Zi=function(e){var t=e.title,r=(0,Mi.dd)();return(0,g.jsxs)("header",{className:"border-primary flex items-center justify-between border-b px-5 py-4",children:[(0,g.jsx)(ve.Z.TitleSm,{weight:"semibold",children:t}),(0,g.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,g.jsx)("li",{children:(0,g.jsx)(ye.T,{placement:"bottom",content:(0,P.t)("quick_post_v2.header.close"),children:(0,g.jsx)(qi.h,{variant:"secondary",iconSize:20,onClick:r.remove,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,P.t)("quick_post_v2.header.close")})})})})]})},Gi=["id"];function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ji=["internal_api","community_bot","snippets"],Ki=function(e){var t=e.onSuccess,r=(0,$.useQueryClient)(),n=(0,qt.p)(),i=n.success,o=n.error;return(0,$.useMutation)((function(e){var t=e.id,r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach((function(t){Hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Qi(e,Gi));return(0,lt.aU)(_e.av.communityBot.snippets.update({id:t}),r)}),{onSuccess:function(e){r.invalidateQueries(Ji),r.invalidateQueries(["snippets",e.id]),t(),i((0,P.t)("changes_saved"))},onError:function(){o((0,P.t)("request_failure_message"))}})},$i=function(){var e,t,r,n,i,o,a=(0,Mi.dd)(),s=(e={onSuccess:a.remove},t=e.onSuccess,r=(0,qt.p)(),n=r.success,i=r.error,o=(0,$.useQueryClient)(),(0,$.useMutation)((function(e){return(0,lt.Cu)(_e.av.communityBot.snippets.create(),{snippet:e})}),{onSuccess:function(){o.invalidateQueries(Ji),n((0,P.t)("settings.community_bot.knowledge.custom.snippet_created")),t()},onError:function(){return i((0,P.t)("quick_post.toasts.failed_to_create"))}}));return(0,g.jsxs)(Ri.u_,{isOpen:a.visible,onClose:a.hide,children:[(0,g.jsx)(Ri.u_.Overlay,{}),(0,g.jsxs)(Ri.u_.Content,{size:"auto",className:"h-full max-h-full max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[550px]",animations:"fadeIn",children:[(0,g.jsx)(Zi,{title:(0,P.t)("settings.community_bot.knowledge.custom.create_modal.title")}),(0,g.jsx)(Vi,{defaultValues:{},onSubmit:function(e){return s.mutate(e)},actionLabel:(0,P.t)("settings.community_bot.knowledge.custom.add")})]})]})},Xi=b.gk.create((function(){return(0,g.jsx)($i,{})})),Yi=r(44032),eo=function(e){var t,r,n,i,o,a,s=e.id,l=e.title,c=(0,b.dd)(),u=(t={onSuccess:c.remove},r=t.onSuccess,n=(0,$.useQueryClient)(),i=(0,qt.p)(),o=i.success,a=i.error,(0,$.useMutation)((function(e){return(0,lt.pC)(_e.av.communityBot.snippets.destroy({id:e.id}))}),{onSuccess:function(e,t){n.invalidateQueries(Ji),n.invalidateQueries(["snippet",t.id]),r(),o((0,P.t)("settings.community_bot.knowledge.custom.delete_snippet_modal.success_message"))},onError:function(){a((0,P.t)("request_failure_message"))}}));return(0,g.jsx)(Yi.c,{size:"md",isOpen:c.visible,onClose:c.hide,title:(0,P.t)("settings.community_bot.knowledge.custom.delete_snippet_modal.title"),confirmVariant:"danger",confirmText:u.isLoading?(0,P.t)("settings.community_bot.knowledge.custom.delete_snippet_modal.confirming"):(0,P.t)("settings.community_bot.knowledge.custom.delete_snippet_modal.confirm"),onConfirm:function(){u.mutate({id:s})},disabled:u.isLoading,children:(0,g.jsx)(ve.Z.BodyMd,{children:(0,g.jsx)(U.w,{content:(0,P.t)("settings.community_bot.knowledge.custom.delete_snippet_modal.description",{title:l})})})})},to=b.gk.create((function(e){var t=e.snippetId,r=e.title;return(0,g.jsx)(eo,{id:t,title:r})}));function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){io(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function io(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oo=function(e){var t=e.id,r=(0,b.dd)(),n=Ki({onSuccess:r.remove}),i=function(e){var t=e.id;return(0,$.useQuery)(["snippets",t],(function(){return(0,lt.UT)(_e.av.communityBot.snippets.show({id:t}))}))}({id:t}),o=i.data,a=i.isLoading;return(0,g.jsxs)(Ri.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,g.jsx)(Ri.u_.Overlay,{}),(0,g.jsxs)(Ri.u_.Content,{size:"auto",className:"h-full max-h-full max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[550px]",animations:"fadeIn",children:[(0,g.jsx)(Zi,{title:(0,P.t)("settings.community_bot.knowledge.custom.update_modal.title")}),a?(0,g.jsx)(hi.a,{}):(0,g.jsx)(Vi,{defaultValues:o,onSubmit:function(e){return n.mutate(no(no({},e),{},{id:t}))},actionLabel:(0,P.t)("settings.community_bot.knowledge.custom.save")})]})]})},ao=b.gk.create((function(e){var t=e.snippetId;return(0,g.jsx)(oo,{id:t})})),so=function(e){var t=e.snippet,r=(0,b.dd)(ao),n=(0,b.dd)(to);return(0,g.jsxs)(Ti.w.Actions,{children:[(0,g.jsx)(Ti.w.Actions.Item,{onClick:function(){return r.show({snippetId:t.id})},children:(0,P.t)("settings.community_bot.knowledge.custom.edit")}),(0,g.jsx)(Ti.w.Actions.Item,{hasDanger:!0,onClick:function(){n.show({snippetId:t.id,title:t.title})},children:(0,P.t)("settings.community_bot.knowledge.custom.delete")})]})},lo=function(e){var t,r,n,i,o,a=e.columns,s=e.snippetsQuery,l=e.onChangePage;return(0,g.jsxs)(Ti.w,{columns:a,data:null!==(t=null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.records)&&void 0!==t?t:[],isLoading:null===s||void 0===s?void 0:s.isLoading,initialPage:null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.page,pageSize:null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.per_page,totalRecordsCount:null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count,onChangePage:l,children:[(0,g.jsxs)(Ti.w.Table,{children:[(0,g.jsx)(Ti.w.Header,{}),(0,g.jsx)(Ti.w.Loader,{}),(0,g.jsx)(Ti.w.Body,{})]}),(0,g.jsx)(Ti.w.Pagination,{align:"left",direction:"reverse"})]})};function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var po=[{header:(0,P.t)("settings.community_bot.knowledge.custom.columns.title"),accessorKey:"title",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.title},canSort:!1,cellClassName:"w-3/4"},{header:(0,P.t)("settings.community_bot.knowledge.custom.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.used_in_replies},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var t=e.row;return(0,g.jsx)(so,{snippet:t.original})}}],fo=function(){var e,t,r=co((0,n.useState)(1),2),i=r[0],o=r[1],a=function(e){var t=e.currentPage;return(0,$.useQuery)({queryKey:Ji,queryFn:function(){return(0,lt.UT)(_e.av.communityBot.snippets.index({params:{page:t,per_page:10}}))}})}({currentPage:i}),s=(0,b.dd)(Xi),l=function(){s.show()},c=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.count)||0,u=(0,C.isEmpty)((null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.records)||[]);return null!==a&&void 0!==a&&a.isLoading?(0,g.jsx)(hi.a,{}):u?(0,g.jsx)(Li.u,{header:(0,P.t)("settings.community_bot.knowledge.custom.empty_state.header"),description:(0,P.t)("settings.community_bot.knowledge.custom.empty_state.description"),primaryLabel:(0,P.t)("settings.community_bot.knowledge.custom.empty_state.primary_label"),onPrimaryClick:l}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"px-8 pt-6",children:(0,g.jsxs)("div",{className:"flex gap-3 rounded-xl border border-zinc-200 bg-zinc-100 p-4 pr-6 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,g.jsx)(I.JO,{type:"20-info",size:20}),(0,g.jsx)(ve.Z.BodySm,{children:(0,P.t)("settings.community_bot.knowledge.custom.banner")})]})}),c>0&&(0,g.jsx)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:(0,g.jsxs)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:[(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",children:(0,P.t)("settings.community_bot.knowledge.custom.count",{count:c})}),(0,g.jsx)(M.z,{type:"button",onClick:l,variant:"circle",children:(0,P.t)("settings.community_bot.knowledge.custom.add_snippet")})]})}),(0,g.jsx)(Ti.w.TableWrapper,{children:(0,g.jsx)(Di.n,{children:(0,g.jsx)(lo,{columns:po,snippetsQuery:a,onChangePage:function(e){o(e),a.remove()}})})})]})},mo=r(36845),bo=["id"];function ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(r),!0).forEach((function(t){yo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function go(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var _o=["internal_api","community_bot","spaces"],xo=["internal_api","community_bot","setting"],jo=function(){var e=(0,$.useQueryClient)(),t=(0,qt.p)(),r=t.success,n=t.error;return(0,$.useMutation)((function(e){var t={community_bot_setting:vo({},e)};return(0,lt.aU)(_e.av.communityBot.setting.update(),t)}),{onSuccess:function(){e.invalidateQueries(xo),e.invalidateQueries(_o),r((0,P.t)("changes_saved"))},onError:function(){n((0,P.t)("request_failure_message"))}})},wo=function(){var e=jo();return(0,g.jsxs)("div",{className:"bg-secondary flex justify-between border-b px-12 py-8",children:[(0,g.jsx)("div",{className:"flex items-start space-x-8",children:(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)(gi.s6,{weight:"semibold",children:(0,vi.t)("settings.community_bot.knowledge.banner.title")}),(0,g.jsx)(ke.p,{color:"text-light",children:(0,vi.t)("settings.community_bot.knowledge.banner.description")})]})}),(0,g.jsx)(I.JO,{type:"20-close",size:20,className:"cursor-pointer !self-start",onClick:function(){e.mutate({hide_knowledge_banner:!0})}})]})},Oo=["name","id","onToggleChange","wrapperClass","variant","shouldUseCheckmark","className","disabled","label"];function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Po(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach((function(t){ko(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ko(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Co(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var No=function(e){var t=e.name,r=e.id,n=void 0===r?"":r,i=e.onToggleChange,o=void 0===i?C.noop:i,a=e.wrapperClass,s=void 0===a?"":a,l=e.variant,c=void 0===l?"default":l,u=e.shouldUseCheckmark,d=void 0===u||u,p=e.className,f=void 0===p?"":p,m=e.disabled,b=void 0!==m&&m,h=e.label,v=void 0===h?(0,P.t)("toggle_switch"):h,y=Co(e,Oo),_=n||"checkbox-".concat(t),x=d&&"small"===c;return(0,g.jsxs)("div",{className:K()("community-bot-toggle-switch community-bot-toggle-switch--".concat(c," relative max-w-[1.9rem]"),s),id:"field-".concat(t),children:[(0,g.jsx)("input",Po(Po({},y),{},{className:K()("peer",f),type:"checkbox",disabled:b,id:_,"data-testid":"item-checkbox",name:t,onChange:function(e){o(e.target.checked)}})),(0,g.jsx)("label",{htmlFor:_,className:"bg-toggle-unchecked before:bg-toggle-circle-unchecked peer-checked:bg-toggle-checked before:peer-checked:bg-toggle-circle-checked relative",children:(0,g.jsx)("span",{className:"sr-only",children:v})}),x&&(0,g.jsx)("span",{className:K()("text-darkest pointer-events-none absolute right-1 top-1 hidden items-center opacity-0 transition-opacity peer-checked:flex peer-checked:opacity-100",{"!opacity-20":b}),children:(0,g.jsx)(I.JO,{type:"12-circle-check",size:12,className:"!h-3 !w-3"})})]})},Io=function(e){var t,r,n,i,o,a=e.id,s=e.name,l=e.active,c=(t={onSuccess:function(){}}.onSuccess,r=(0,$.useQueryClient)(),n=(0,qt.p)(),i=n.success,o=n.error,(0,$.useMutation)((function(e){var t=e.id,r={community_bot_space:vo({},go(e,bo))};return(0,lt.aU)(_e.av.communityBot.spaces.update({id:t}),r)}),{onSuccess:function(e){r.invalidateQueries(_o),r.invalidateQueries(xo),r.invalidateQueries(["spaces",e.id]),t(),i((0,P.t)("changes_saved"))},onError:function(){o((0,P.t)("request_failure_message"))}}));return(0,g.jsxs)("div",{className:"m-0 flex w-full flex-row items-center gap-4",children:[(0,g.jsx)("span",{className:"mt-0.5",children:(0,g.jsx)(No,{name:"space-".concat(a),checked:l,variant:"small",shouldUseCheckmark:!0,onToggleChange:function(){c.mutate({id:a,active:!l})}})}),(0,g.jsx)("span",{className:K()({"font-normal":!l,"font-semibold":l}),children:s})]})},Ao=function(e){var t,r,n,i,o,a=e.columns,s=e.spacesQuery,l=e.onChangePage;return(0,g.jsxs)(Ti.w,{columns:a,data:null!==(t=null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.records)&&void 0!==t?t:[],isLoading:null===s||void 0===s?void 0:s.isLoading,initialPage:null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.page,pageSize:null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.per_page,totalRecordsCount:null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count,onChangePage:l,children:[(0,g.jsxs)(Ti.w.Table,{children:[(0,g.jsx)(Ti.w.Header,{}),(0,g.jsx)(Ti.w.Loader,{}),(0,g.jsx)(Ti.w.Body,{})]}),(0,g.jsx)(Ti.w.Pagination,{align:"left",direction:"reverse"})]})};function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Do(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Do(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var To,Lo=function(){var e,t,r,i,o=Eo((0,n.useState)(1),2),a=o[0],s=o[1],l=(0,mo.G)(),c=function(e){var t=e.currentPage;return(0,$.useQuery)({queryKey:_o,queryFn:function(){return(0,lt.UT)(_e.av.communityBot.spaces.index({params:{page:t,per_page:10}}))}})}({currentPage:a}),u=(0,$.useQuery)({queryKey:xo,queryFn:function(){return(0,lt.UT)(_e.av.communityBot.setting.show())}}),d=jo(),p=(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.count)||0,f=(0,C.isEmpty)((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.records)||[]);return u.isLoading||null!==c&&void 0!==c&&c.isLoading?(0,g.jsx)(hi.a,{}):f?(0,g.jsx)("div",{className:"bg-primary flex h-full flex-col",children:(0,g.jsx)(Li.u,{header:(0,P.t)("settings.community_bot.knowledge.community.empty_state.header"),description:(0,P.t)("settings.community_bot.knowledge.community.empty_state.description"),primaryLabel:(0,P.t)("settings.community_bot.knowledge.community.empty_state.primary_label"),onPrimaryClick:function(){return l.show()}})}):(0,g.jsxs)(g.Fragment,{children:[p>0&&(0,g.jsxs)(g.Fragment,{children:[!(null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&r.hide_knowledge_banner)&&(0,g.jsx)(wo,{}),(0,g.jsxs)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:[(0,g.jsx)("div",{className:"flex min-h-[1.75rem] items-center gap-4",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",children:(0,P.t)("settings.community_bot.knowledge.spaces.count",{count:p})})}),(0,g.jsxs)("div",{className:"mt-4 flex items-center gap-4 align-middle text-sm",children:[(0,g.jsx)(No,{name:"all_spaces_enabled",checked:null===u||void 0===u||null===(i=u.data)||void 0===i?void 0:i.all_spaces_enabled,variant:"small",shouldUseCheckmark:!0,onToggleChange:function(){var e;d.mutate({all_spaces_enabled:!(null!==u&&void 0!==u&&null!==(e=u.data)&&void 0!==e&&e.all_spaces_enabled)})}}),(0,g.jsx)("span",{children:(0,P.t)("settings.community_bot.knowledge.spaces.use_all_spaces")})]})]})]}),(0,g.jsx)(Ti.w.TableWrapper,{children:(0,g.jsx)("div",{className:"mt-0.5",children:(0,g.jsx)(Ao,{columns:[{header:(0,P.t)("settings.community_bot.knowledge.spaces.columns.name"),accessorKey:"name",cell:function(e){var t,r,n,i=e.row;return(0,g.jsx)(Io,{id:null===(t=i.original)||void 0===t?void 0:t.id,name:null===(r=i.original)||void 0===r?void 0:r.name,active:null===(n=i.original)||void 0===n?void 0:n.active})},canSort:!1,cellClassName:"w-1/2"},{header:(0,P.t)("settings.community_bot.knowledge.spaces.columns.posts_included"),accessorKey:"posts_count",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.posts_count},canSort:!1},{header:(0,P.t)("settings.community_bot.knowledge.spaces.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.used_in_replies},canSort:!1}],spacesQuery:c,onChangePage:function(e){s(e),c.remove()}})})})]})};function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ro(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uo={TAB_COMMUNITY:"tab_community",TAB_CUSTOM:"tab_custom"},Fo=(To={},Bo(To,Uo.TAB_COMMUNITY,(0,P.t)("settings.community_bot.knowledge.tab_community")),Bo(To,Uo.TAB_CUSTOM,(0,P.t)("settings.community_bot.knowledge.tab_custom")),To),zo=Object.values(Uo),Vo=function(){var e=(0,Oi.OH)({currentPage:1}),t=e.data,r=e.isLoading,i=Mo((0,n.useState)(zo.indexOf(Uo.TAB_COMMUNITY)),2),o=i[0],a=i[1];return r?(0,g.jsx)(hi.a,{}):t&&t.records&&0!==t.records.length?(0,g.jsx)("div",{className:"bg-primary h-full",children:(0,g.jsxs)(Ei.O.Group,{selectedIndex:o,onChange:function(e){return a(e)},children:[(0,g.jsx)(mi.b,{pageTitle:(0,P.t)("settings.community_bot.knowledge.title"),hasBorder:!1,children:(0,g.jsx)(Ei.O.ListWrapper,{children:(0,g.jsx)(Ei.O.List,{children:zo.map((function(e){return(0,g.jsx)(Ei.O,{children:Fo[e]},e)}))})})}),(0,g.jsxs)(Ei.O.Panels,{className:"h-[calc(100%-113px)]",children:[(0,g.jsx)(Ei.O.Panel,{children:(0,g.jsx)(Lo,{})}),(0,g.jsx)(Ei.O.Panel,{children:(0,g.jsx)(fo,{})})]})]})}):(0,g.jsx)(Ii,{})},qo=r(20781),Zo=r(55411),Go=function(){var e=(0,L.k6)(),t=(0,Oi.OH)({currentPage:1}),r=t.data,n=!t.isLoading&&!(null!==r&&void 0!==r&&r.count);return(0,g.jsx)("div",{className:"bg-secondary flex h-full w-full items-center justify-center text-center",children:(0,g.jsxs)("div",{className:"flex w-[31rem] flex-col items-center gap-4",children:[(0,g.jsx)("img",{alt:"",loading:"lazy",src:Zo,className:"mb-2 object-cover"}),(0,g.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,g.jsx)(ve.Z.LabelLg,{weight:"semibold",children:(0,P.t)("community_inbox.title")}),(0,g.jsx)(ve.Z.BodyMd,{color:"text-default",children:(0,P.t)("community_inbox.description")})]}),n&&(0,g.jsx)(M.z,{variant:"primary",onClick:function(){e.push(_e.lA.aiAgents.index)},children:(0,P.t)("community_inbox.setup_agent_cta")})]})})},Wo=function(){return(0,g.jsxs)(L.rs,{children:[(0,g.jsx)(L.AW,{exact:!0,path:"/settings/community-inbox/chats/:id",component:qo.o}),(0,g.jsx)(L.AW,{path:"/",component:Go})]})},Ho=(0,li.u)((function(){return r.e(1266).then(r.bind(r,70451))})),Qo=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ho,{})})},Jo=(0,li.u)((function(){return r.e(2983).then(r.bind(r,32983))})),Ko=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Jo,{})})},$o=(0,li.u)((function(){return Promise.all([r.e(705),r.e(5301)]).then(r.bind(r,24560))})),Xo=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)($o,{})})},Yo=(0,li.u)((function(){return r.e(7398).then(r.bind(r,67398))})),ea=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Yo,{})})},ta=(0,li.u)((function(){return r.e(966).then(r.bind(r,82028))})),ra=function(e){var t=e.pageTitle;return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ta,{pageTitle:t})})},na=(0,li.u)((function(){return Promise.all([r.e(7188),r.e(8682),r.e(7742)]).then(r.bind(r,98425))})),ia=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(na,{})})},oa=(0,li.u)((function(){return r.e(4541).then(r.bind(r,91404))})),aa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(oa,{})})},sa=(0,li.u)((function(){return r.e(4322).then(r.bind(r,35586))})),la=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(sa,{})})},ca=(0,li.u)((function(){return Promise.all([r.e(7188),r.e(8682),r.e(7959),r.e(6102),r.e(3912)]).then(r.bind(r,33912))})),ua=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ca,{})})},da=(0,li.u)((function(){return Promise.all([r.e(770),r.e(6802)]).then(r.bind(r,26802))})),pa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(da,{})})},fa=(0,li.u)((function(){return Promise.all([r.e(7188),r.e(8682),r.e(6102),r.e(3631)]).then(r.bind(r,33631))})),ma=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(fa,{})})},ba=(0,li.u)((function(){return r.e(5302).then(r.bind(r,85302))})),ha=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ba,{})})},va=(0,li.u)((function(){return Promise.all([r.e(8682),r.e(7871)]).then(r.bind(r,48892))})),ya=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(va,{})})},ga=(0,li.u)((function(){return r.e(9904).then(r.bind(r,89904))})),_a=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ga,{})})},xa=(0,li.u)((function(){return r.e(3937).then(r.bind(r,12519))})),ja=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(xa,{})})},wa=(0,li.u)((function(){return Promise.all([r.e(1769),r.e(93)]).then(r.bind(r,14768))})),Oa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(wa,{})})},Sa=(0,li.u)((function(){return Promise.all([r.e(532),r.e(6649),r.e(8011)]).then(r.bind(r,78011))})),Pa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Sa,{})})},ka=(0,li.u)((function(){return r.e(2941).then(r.bind(r,52941))})),Ca=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ka,{})})},Na=(0,li.u)((function(){return Promise.all([r.e(532),r.e(2606),r.e(3487),r.e(3878),r.e(7639)]).then(r.bind(r,48142))})),Ia=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Na,{})})},Aa=(0,li.u)((function(){return r.e(8856).then(r.bind(r,67479))})),Ea=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Aa,{})})},Da=(0,li.u)((function(){return r.e(7410).then(r.bind(r,57410))})),Ta=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Da,{})})},La=(0,li.u)((function(){return r.e(1822).then(r.bind(r,71822))})),Ma=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(La,{})})},Ra=(0,li.u)((function(){return r.e(2519).then(r.bind(r,71081))})),Ba=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ra,{})})},Ua=(0,li.u)((function(){return r.e(1249).then(r.bind(r,21249))})),Fa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ua,{})})},za=(0,li.u)((function(){return r.e(3253).then(r.bind(r,77602))})),Va=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(za,{})})},qa=(0,li.u)((function(){return r.e(3676).then(r.bind(r,83676))})),Za=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(qa,{})})},Ga=(0,li.u)((function(){return Promise.all([r.e(532),r.e(1769),r.e(8141),r.e(3079),r.e(8608),r.e(1286)]).then(r.bind(r,30671))})),Wa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ga,{})})},Ha=(0,li.u)((function(){return r.e(8457).then(r.bind(r,24585))})),Qa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ha,{})})},Ja=(0,li.u)((function(){return r.e(761).then(r.bind(r,66062))})),Ka=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ja,{})})},$a=(0,li.u)((function(){return r.e(4331).then(r.bind(r,74331))})),Xa=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)($a,{})})},Ya=(0,li.u)((function(){return r.e(8389).then(r.bind(r,85403))})),es=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ya,{})})},ts=(0,li.u)((function(){return Promise.resolve().then(r.bind(r,28379))})),rs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ts,{})})},ns=(0,li.u)((function(){return r.e(5871).then(r.bind(r,27236))})),is=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ns,{})})},os=(0,li.u)((function(){return r.e(6217).then(r.bind(r,56217))})),as=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(os,{})})},ss=(0,li.u)((function(){return r.e(4850).then(r.bind(r,83758))})),ls=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ss,{})})},cs=(0,li.u)((function(){return r.e(1926).then(r.bind(r,1926))})),us=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(cs,{})})},ds=(0,li.u)((function(){return r.e(1620).then(r.bind(r,1620))})),ps=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ds,{})})},fs=(0,li.u)((function(){return r.e(3123).then(r.bind(r,83123))})),ms=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(fs,{})})},bs=function(){return(0,g.jsx)(L.l_,{to:"/members/onboarding"})},hs=(0,li.u)((function(){return Promise.all([r.e(7398),r.e(8655)]).then(r.bind(r,98142))})),vs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(hs,{})})},ys=(0,li.u)((function(){return r.e(9716).then(r.bind(r,67730))})),gs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ys,{})})},_s=(0,li.u)((function(){return r.e(8282).then(r.bind(r,39856))})),xs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(_s,{})})},js=(0,li.u)((function(){return r.e(2461).then(r.bind(r,92461))})),ws=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(js,{})})},Os=(0,li.u)((function(){return r.e(9105).then(r.bind(r,52860))})),Ss=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Os,{})})},Ps=(0,li.u)((function(){return r.e(5986).then(r.bind(r,15986))})),ks=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ps,{})})},Cs=(0,li.u)((function(){return r.e(9345).then(r.bind(r,69345))})),Ns=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Cs,{})})},Is=(0,li.u)((function(){return Promise.all([r.e(532),r.e(2606),r.e(3487),r.e(3878),r.e(9182)]).then(r.bind(r,19182))})),As=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Is,{})})},Es=(0,li.u)((function(){return Promise.all([r.e(532),r.e(8902)]).then(r.bind(r,38902))})),Ds=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Es,{})})},Ts=(0,li.u)((function(){return r.e(4458).then(r.bind(r,54458))})),Ls=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ts,{})})},Ms=(0,li.u)((function(){return Promise.all([r.e(770),r.e(7768)]).then(r.bind(r,97768))})),Rs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ms,{})})},Bs=(0,li.u)((function(){return r.e(4330).then(r.bind(r,4330))})),Us=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Bs,{})})},Fs=(0,li.u)((function(){return r.e(9289).then(r.bind(r,59289))})),zs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Fs,{})})},Vs=(0,li.u)((function(){return r.e(3286).then(r.bind(r,83286))})),qs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Vs,{})})},Zs=(0,li.u)((function(){return r.e(1924).then(r.bind(r,81924))})),Gs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Zs,{})})},Ws=(0,li.u)((function(){return r.e(5794).then(r.bind(r,19944))})),Hs=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ws,{})})},Qs=(0,li.u)((function(){return Promise.all([r.e(532),r.e(6376),r.e(6716),r.e(7725)]).then(r.bind(r,36567))})),Js=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Qs,{})})},Ks=r(5606),$s=function(e){var t=e.isPaywallTaxAvailable,r=void 0!==t&&t,n=e.isAffiliatesEnabled,i=void 0!==n&&n,o=e.isWorkflowsEnabled,a=void 0!==o&&o,s=e.isPaywallPaymentSettingsAvailable,l=void 0!==s&&s,c=e.isGamificationEnabled,u=void 0!==c&&c,d=e.isV3Enabled,p=void 0!==d&&d,f=e.isCommunityBotEnabled,m=void 0!==f&&f,b=e.isSegmentsEnabled,h=void 0!==b&&b;return(0,g.jsxs)(L.rs,{children:[(0,g.jsx)(Ks.i,{component:di,path:"/settings/builder_ui",exact:!0}),(0,g.jsx)(Ks.i,{component:Xa,path:"/settings",exact:!0}),(0,g.jsx)(Ks.i,{component:Fa,path:"/settings/custom_domain",exact:!0}),(0,g.jsx)(Ks.i,{component:es,path:"/settings/home",exact:!0}),(0,g.jsx)(Ks.i,{component:bs,path:"/settings/onboarding/:tab?",exact:!0}),(0,g.jsx)(Ks.i,{component:Ma,path:"/settings/community_ai",exact:!0}),(0,g.jsx)(Ks.i,{component:zs,path:"/settings/spaces",exact:!0}),(0,g.jsx)(Ks.i,{component:Gs,path:"/settings/topics",exact:!0}),(0,g.jsx)(Ks.i,{component:Ls,path:"/settings/posts/bulk_actions",exact:!0}),(0,g.jsx)(Ks.i,{component:Ta,path:"/settings/code_snippets",exact:!0}),(0,g.jsx)(Ks.i,{component:Hs,path:"/settings/weekly_digest",exact:!0}),(0,g.jsx)(Ks.i,{component:fi,path:"/settings/mobile_app",exact:!0}),(0,g.jsx)(Ks.i,{component:ls,path:"/settings/messaging",exact:!0}),p&&(0,g.jsx)(Ks.i,{component:ms,path:"/settings/navigation",exact:!0}),(0,g.jsx)(Ks.i,{component:Us,path:"/settings/sso",exact:!0}),(0,g.jsx)(Ks.i,{component:Qa,path:"/settings/embed",exact:!0}),(0,g.jsx)(Ks.i,{component:Ds,path:"/settings/posts",exact:!0}),(0,g.jsx)(L.AW,{component:As,path:"/settings/plans",exact:!0}),(0,g.jsx)(L.AW,{component:Ia,path:"/settings/billing"}),(0,g.jsx)(L.AW,{component:Ea,path:"/settings/branded_apps"}),(0,g.jsx)(Ks.i,{component:Ca,path:"/settings/api"}),(0,g.jsx)(Ks.i,{component:us,path:"/settings/moderation",exact:!0}),(0,g.jsx)(Ks.i,{component:ps,path:"/settings/moderation/edit",exact:!0}),(0,g.jsx)(Ks.i,{component:xs,path:"/settings/paywall_groups",exact:!0}),l&&(0,g.jsx)(Ks.i,{component:ws,path:_e.lA.paywalls.payment_settings,exact:!0}),r&&(0,g.jsx)(Ks.i,{component:ks,path:"/settings/paywall_tax_settings",exact:!0}),(0,g.jsx)(Ks.i,{component:Ns,path:"/settings/paywalls",exact:!1}),i&&(0,g.jsx)(Ks.i,{component:ja,path:"/settings/affiliates_directory",exact:!0}),i&&(0,g.jsx)(Ks.i,{component:_a,path:"/settings/affiliates_commissions",exact:!0}),i&&(0,g.jsx)(Ks.i,{component:Oa,path:"/settings/affiliates_settings",exact:!0}),(0,g.jsx)(Ks.i,{component:is,path:"/settings/member_billing"}),(0,g.jsx)(Ks.i,{component:Ss,path:"/settings/paywall_subscriptions",exact:!1}),(0,g.jsx)(Ks.i,{component:Za,path:"/settings/developers",exact:!0}),(0,g.jsx)(Ks.i,{component:gs,path:"/settings/paywall_charges",exact:!1}),(0,g.jsx)(Ks.i,{component:vs,path:"/settings/paywall_bulk_logs",exact:!0}),(0,g.jsx)(Ks.i,{component:as,path:"/settings/member_tags",exact:!1}),(0,g.jsx)(Ks.i,{component:Ba,path:"/settings/coupons",exact:!0}),(0,g.jsx)(Ks.i,{component:qs,path:"/settings/theme",exact:!0}),m&&(0,g.jsx)(Ks.i,{component:Wo,path:["/settings/community-inbox/chats/:id","/settings/community-inbox"],exact:!0}),m&&(0,g.jsx)(Ks.i,{component:Vo,path:"/settings/community-bot/knowledge",exact:!0}),m&&(0,g.jsx)(Ks.i,{component:Ai,path:"/settings/community-bot/agents",exact:!0}),(0,g.jsx)(L.AW,{component:rs,path:"/settings/live_streams",exact:!1}),(0,g.jsx)(Ks.i,{component:pa,path:"/audience/manage",exact:!0}),(0,g.jsx)(Ks.i,{component:ya,path:_e.lA.members.access_groups}),(0,g.jsx)(Ks.i,{component:ua,path:"/members/invite"}),(0,g.jsx)(Ks.i,{path:"/members/edit/:id",exact:!1,render:function(){return(0,g.jsx)(ra,{pageTitle:(0,P.t)("settings.edit_member.title")})}}),(0,g.jsx)(Ks.i,{component:ia,path:"/members/invitation_links"}),(0,g.jsx)(Ks.i,{component:aa,path:"/members/invitation_links/:id/edit",exact:!0}),(0,g.jsx)(Ks.i,{component:la,path:"/members/invitation_links/new",exact:!0}),(0,g.jsx)(Ks.i,{path:"/members/invitation_links/:action",exact:!0,render:function(){return(0,g.jsx)(ra,{pageTitle:(0,P.t)("settings.invitation_links.title")})}}),(0,g.jsx)(Ks.i,{path:"/members/invitation_links/:id/:action",exact:!0,render:function(){return(0,g.jsx)(ra,{pageTitle:(0,P.t)("settings.invitation_links.title")})}}),(0,g.jsx)(Ks.i,{component:ma,path:"/members/onboarding/:tab?",exact:!0}),(0,g.jsx)(Ks.i,{path:"/members/bulk_import",exact:!0,render:function(){return(0,g.jsx)(ra,{pageTitle:(0,P.t)("settings.import_members.title")})}}),(0,g.jsx)(Ks.i,{component:ea,path:"/settings/members/bulk_import_tasks",exact:!0}),(0,g.jsx)(Ks.i,{component:ha,path:"/members/profile_fields"}),(0,g.jsx)(Ks.i,{component:Xo,path:"/settings/members/activity_logs",exact:!0}),(0,g.jsx)(Ks.i,{component:Ko,path:"/settings/legal",exact:!0}),(0,g.jsx)(Ks.i,{component:Qo,path:"/settings/discover",exact:!0}),(0,g.jsx)(Ks.i,{component:Pa,path:"/settings/analytics/:action?"}),u&&(0,g.jsx)(Ks.i,{component:Ka,path:"/settings/gamification"}),a&&(0,g.jsx)(Ks.i,{component:Js,path:"/settings/workflows"}),h&&(0,g.jsx)(Ks.i,{component:Rs,path:_e.lA.members.segments}),(0,g.jsx)(Ks.i,{component:Wa,path:"/settings/emails"}),(0,g.jsx)(Ks.i,{component:Va,path:"/settings/:component/:action/",exact:!0}),(0,g.jsx)(Ks.i,{component:Va,path:"/settings/:component",exact:!0})]})},Xs=r(53729),Ys=function(){var e=(0,N.wh)(),t=e.isLoading,r=e.currentCommunity,i=e.currentCommunitySettings,o=(0,ii.Aq)(r),a=(0,L.k6)(),s=(0,Xs.I)(),l=(0,si.H)().isSettingsPage,c=(0,Tn.I)().isV3Enabled,u=(0,oi.b)(),d=(0,Mn.x)()||!(null!==r&&void 0!==r&&r.payment_processor),p=(0,Ln.N)();if((0,n.useEffect)((function(){var e=a.listen((function(){window.scrollTo(0,0)}));return function(){return e()}})),t)return(0,g.jsx)(hi.a,{});if(!l)return null;var f=r.affiliates_feature_flag_enabled;return(0,g.jsx)(ai._p,{section:ai.kS.ADMIN,children:(0,g.jsx)(ni,{shouldHideMainHeader:!1,hideAppBar:o,children:(0,g.jsx)($s,{isPaywallTaxAvailable:d,isAffiliatesEnabled:f,isWorkflowsEnabled:s,isPaywallPaymentSettingsAvailable:p,isGamificationEnabled:i.gamification_enabled,isV3Enabled:c,isCommunityBotEnabled:null===i||void 0===i?void 0:i.community_bot_enabled,isSegmentsEnabled:u})})})},el=(0,li.u)((function(){return r.e(7323).then(r.bind(r,37323))})),tl=function(){var e=(0,N.wh)().currentCommunitySettings,t=null===e||void 0===e?void 0:e.circle_v3_eligible,r=null===e||void 0===e?void 0:e.circle_v3_enabled;return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(el,{isCircleV3Eligible:t,isCircleV3Enabled:r})})},rl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(2288)]).then(r.bind(r,14938))})),nl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(rl,{})})},il=r(3004),ol=r(64269),al=r(23072),sl=r(84432),ll=(0,li.u)((function(){return Promise.resolve().then(r.bind(r,48637))})),cl=function(){return(0,g.jsx)(Bn.a,{disableRightSidebar:!0,children:(0,g.jsx)(al.W,{fullWidth:!0,fullHeight:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsxs)(Bn.a.Body,{children:[(0,g.jsx)(il.S,{title:(0,P.t)("header_v3.bookmarks")}),(0,g.jsx)(ol.Z,{leftContent:(0,g.jsx)(sl.y,{children:(0,P.t)("header_v3.bookmarks")}),hasBorder:!0}),(0,g.jsx)(Bn.a.Content,{fullWidth:!0,children:(0,g.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,g.jsx)(ll,{})})})]})})})})},ul=(0,li.u)((function(){return Promise.all([r.e(7959),r.e(2693)]).then(r.bind(r,35423))})),dl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ul,{})})},pl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(1553)]).then(r.bind(r,21553))})),fl=function(){return(0,g.jsx)(Bn.a,{disableRightSidebar:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(pl,{})})})},ml=(0,li.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(1322),r.e(8632),r.e(3625),r.e(1759),r.e(6571)]).then(r.bind(r,66571))})),bl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ml,{})})},hl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(331)]).then(r.bind(r,89902))})),vl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(hl,{})})},yl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(8632),r.e(9237)]).then(r.bind(r,9922))})),gl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(yl,{})})},_l=(0,li.u)((function(){return Promise.all([r.e(532),r.e(3083),r.e(3625),r.e(4356),r.e(2910)]).then(r.bind(r,53624))})),xl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(_l,{})})},jl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(1322),r.e(8632),r.e(3083),r.e(3625),r.e(1759),r.e(4356),r.e(7340)]).then(r.bind(r,77340))})),wl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(jl,{})})},Ol=(0,li.u)((function(){return r.e(2445).then(r.bind(r,93741))})),Sl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ol,{})})},Pl=(0,li.u)((function(){return r.e(7607).then(r.bind(r,6589))})),kl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Pl,{})})},Cl=(0,li.u)((function(){return Promise.all([r.e(532),r.e(734)]).then(r.bind(r,10734))})),Nl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Cl,{})})},Il=(0,li.u)((function(){return r.e(743).then(r.bind(r,6041))})),Al=function(){return(0,g.jsx)(Bn.a,{disableRightSidebar:!0,children:(0,g.jsx)(al.W,{fullWidth:!0,fullHeight:!1,children:(0,g.jsx)(Bn.a.Body,{children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Il,{})})})})})},El=(0,li.u)((function(){return r.e(1304).then(r.bind(r,71304))})),Dl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(El,{})})},Tl=(0,li.u)((function(){return r.e(5226).then(r.bind(r,23790))})),Ll=function(){return(0,g.jsx)(N.BD,{children:(0,g.jsx)(Bn.a,{disableRightSidebar:!0,children:(0,g.jsx)(al.W,{fullWidth:!0,fullHeight:!1,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Tl,{})})})})})},Ml=(0,li.u)((function(){return Promise.all([r.e(532),r.e(1701)]).then(r.bind(r,31701))})),Rl=function(){return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Ml,{})})},Bl=r(69733),Ul=r(42599),Fl=r(85580),zl={page_name:Ul.$q.EDIT_PROFILE},Vl=function(e){var t=e.children,r=e.publicId,i=e.type,o=(0,Bl.P)({publicId:r,params:zl,type:i}).getProfileInfoQuery,a=(0,n.useMemo)((function(){return{publicId:r,profileInfoQuery:o,type:i}}),[r,o,i]);return(0,g.jsx)(Fl.$.Provider,{value:a,children:t})},ql=(0,li.u)((function(){return Promise.all([r.e(532),r.e(5608),r.e(705),r.e(4270),r.e(9664)]).then(r.bind(r,36803))})),Zl=function(){var e=(0,L.UO)().memberPublicId;return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Vl,{type:"CommunityMember",publicId:e,children:(0,g.jsx)(ql,{})})})},Gl=(0,_e.NQ)({type:"CommunityMember"}),Wl=[Gl.index,Gl.info,Gl.access,Gl.billing,Gl.activityLogs],Hl=function(){return(0,g.jsx)(Ks.i,{component:Zl,path:Wl,exact:!0})},Ql=r(22097),Jl=r(40725),Kl=r.n(Jl),$l=r(94700),Xl=r(22797),Yl=r(29043),ec=r(75715),tc=r(51024),rc=r(62618),nc=function(e){var t=e.level,r=e.isLocked,n=e.membersPercentage,i=e.levelName,o=e.pointsRequired,a=(0,tc.O)(t);return(0,g.jsxs)("div",{className:K()("flex space-x-2",n?"items-start":"items-center",r?"opacity-60":""),children:[(0,g.jsx)("div",{className:K()("flex h-8 w-8 items-center justify-center rounded-full border",r?"bg-primary text-dark border-primary":["border-transparent",a.bg]),children:r?(0,g.jsx)(I.JO,{size:14,type:"16-lock"}):(0,g.jsx)(ve.Z.LabelSm,{weight:"semibold",children:(0,g.jsx)("span",{className:K()(r?"text-dark":a.text),children:t})})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(ve.Z.LabelSm,{weight:"semibold",children:(0,g.jsx)("div",{className:"text-dark",children:i||(0,vi.t)("leaderboard.level_n",{level:t})})}),(0,C.isNumber)(o)&&(0,g.jsx)(ve.Z.LabelXs,{weight:"regular",children:(0,g.jsx)("div",{className:"text-default",children:(0,vi.t)("leaderboard.n_points_required",{count:(0,rc.HA)(o)})})})]})]})},ic=function(){return(0,g.jsx)(g.Fragment,{children:Array.from(Array(9).keys()).map((function(e){return(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,g.jsxs)("div",{className:"space-y-1 py-0.5",children:[(0,g.jsx)("div",{className:"bg-tertiary h-4 w-12 animate-pulse rounded"}),(0,g.jsx)("div",{className:"bg-tertiary h-3 w-20 animate-pulse rounded"})]})]},"loading-state-".concat(e))}))})},oc=function(e){var t,r=e.isLoadingGamificationMember,n=e.currentLevel,i=(0,ec.c8)(),o=i.data,a=i.isLoading||!o||r||!n;return(0,g.jsx)("div",{className:"mt-6 grid grid-flow-col-dense grid-rows-5 gap-5 md:grid-rows-3",children:a?(0,g.jsx)(ic,{}):null===(t=o.levels)||void 0===t?void 0:t.map((function(e){return(0,g.jsx)(nc,{isLocked:e.level>n,level:e.level,levelName:e.name,pointsRequired:e.points_required},e.level)}))})},ac=r(2469),sc=r(44073),lc=r(62447),cc=function(){var e=(0,N.wh)().currentCommunityMember,t=(0,sc.Y)({member_ids:[null===e||void 0===e?void 0:e.id]}),r=t.data,n=t.isLoading,i=null===r||void 0===r?void 0:r[0],o=(0,ac.k)(),a=(0,$l.Z)(),s=a.width,l=a.height,c=(0,lc._)("last-celebrated-level"),u=c.setValue,d=c.getValue,p=!n&&Number(null===i||void 0===i?void 0:i.current_level)>1&&Number(d())<Number(null===i||void 0===i?void 0:i.current_level);return(0,g.jsxs)("div",{className:"border-primary bg-primary rounded-2xl border p-6",children:[p&&(0,g.jsx)(Kl(),{width:s,height:l,style:{zIndex:999999},recycle:!1,tweenDuration:5e3,numberOfPieces:300,onConfettiComplete:function(){return u(null===i||void 0===i?void 0:i.current_level)}}),(0,g.jsx)("div",{className:"flex flex-col items-center justify-between md:flex-row",children:(0,g.jsxs)("div",{className:"grid w-full grid-flow-row-dense grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3",children:[(0,g.jsxs)("div",{className:"col-span-2 flex flex-col items-center space-x-3 space-y-4 md:flex-row md:space-y-0",children:[(0,g.jsx)(Xl.i,{avatarUrl:null===e||void 0===e?void 0:e.avatar_url,name:null===e||void 0===e?void 0:e.name,progress:null===i||void 0===i?void 0:i.level_progress,level:null===i||void 0===i?void 0:i.current_level}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-dark text-center md:text-left",children:(0,g.jsx)(ve.Z.LabelLg,{weight:"semibold",children:null===e||void 0===e?void 0:e.name})}),i&&Boolean(null===i||void 0===i?void 0:i.total_points)&&(0,g.jsx)(ve.Z.LabelSm,{children:(0,g.jsx)("div",{className:"text-light text-center md:text-left",children:(0,vi.t)("leaderboard.n_points",{count:i.total_points})})})]})]}),(0,g.jsx)("div",{className:"col-span-3 flex flex-col justify-center sm:col-span-2 md:col-span-1",children:(0,g.jsxs)("div",{className:"mt-4 min-w-[200px] pt-1 text-center md:mt-0 md:pl-4 md:pt-0 md:text-left",children:[n||!i?(0,g.jsx)("div",{className:"bg-tertiary h-6 w-32 animate-pulse rounded-full text-center text-transparent md:text-left"}):(0,g.jsx)(Yl.U,{level:null===i||void 0===i?void 0:i.current_level,levelName:null===i||void 0===i?void 0:i.current_level_name}),i&&(0,g.jsx)("div",{children:(0,g.jsx)(M.z,{type:"button",variant:"text",className:"md:flex",onClick:function(){return o.show()},children:(0,g.jsx)(ve.Z.LabelXs,{weight:"regular",children:(0,g.jsxs)("div",{className:"text-light",children:[0===i.points_to_next_level?(0,vi.t)("leaderboard.maxed_out"):(0,vi.t)("leaderboard.n_points_to_level_up",{count:null===i||void 0===i?void 0:i.points_to_next_level}),(0,g.jsx)(I.JO,{type:"question-mark",className:"text-light ml-1 !w-3"})]})})})})]})})]})}),(0,g.jsx)(oc,{isLoadingGamificationMember:n,currentLevel:null===i||void 0===i?void 0:i.current_level})]})},uc=r(64660),dc={1:{light:"leaderboard-rank-1",dark:"leaderboard-rank-1-dark"},2:{light:"leaderboard-rank-2",dark:"leaderboard-rank-2-dark"},3:{light:"leaderboard-rank-3",dark:"leaderboard-rank-3-dark"}},pc=function(e){var t=e.rank,r=(0,m.TC)().isDarkAppearance,n=function(e,t){return function(e){return e>=1&&e<=3}(e)?t?dc[e].dark:dc[e].light:null}(t,Boolean(r));return n?(0,g.jsx)(I.JO,{className:"!w-8",size:32,type:n}):(0,g.jsx)("div",{className:"text-light text-center",children:(0,g.jsx)(ve.Z.LabelSm,{weight:"semibold",children:t})})},fc=r(388),mc=function(e){var t=e.data,r=e.shouldShowPlusIcon,n=void 0!==r&&r,i=(0,uc.r)();return 0===t.length?(0,g.jsx)("div",{className:"mt-32 flex flex-col items-center justify-center",children:(0,g.jsx)(ve.Z.TitleLg,{color:"text-dark",weight:"font-bold",children:(0,vi.t)("leaderboard.not_enough_activity.title")})}):(0,g.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:t.map((function(e,t){var r;return(0,g.jsxs)("div",{className:K()("flex items-center p-4 md:px-6",{"border-primary border-t":0!==t}),children:[(0,g.jsx)("div",{className:"mr-4 w-8 shrink-0",children:(0,g.jsx)(pc,{rank:t+1})}),(0,g.jsxs)("button",{type:"button",onClick:function(){return t=e.public_uid,i.show({memberPublicId:t});var t},className:"flex min-w-0 flex-1 items-center",children:[(0,g.jsx)(fc.C,{publicUid:e.public_uid,communityMemberId:e.community_member_id,avatarURL:e.avatar_url,name:e.name,headline:e.headline,messagingEnabled:e.messaging_enabled,children:(0,g.jsx)("div",{className:"mr-3 shrink-0",children:(0,g.jsx)(Ne.s,{src:e.avatar_url,name:null!==(r=e.name)&&void 0!==r?r:"",size:"10",isFullRounded:!0})})}),(0,g.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,g.jsx)("div",{className:"inline-block w-full truncate text-left leading-4",children:(0,g.jsx)(ve.Z.LabelMd,{weight:"semibold",truncate:!0,children:e.name})}),e.headline&&(0,g.jsx)("div",{className:"text-light inline-block w-full truncate text-left leading-4",children:(0,g.jsx)(ve.Z.LabelSm,{color:"text-light",weight:"regular",truncate:!0,children:e.headline})})]})]}),(0,g.jsx)("div",{className:"ml-4 mr-1 shrink-0",children:(0,g.jsx)(ve.Z.LabelSm,{weight:"semibold",children:(0,g.jsxs)("span",{className:"text-circle whitespace-nowrap",children:[n&&"+",e.total_points]})})})]},e.community_member_id)}))})},bc=function(){return(0,g.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:Array(10).fill(0).map((function(e,t){return(0,g.jsxs)("div",{className:K()("flex items-center space-x-6 p-4 px-6",{"border-primary border-t":0!==t}),children:[(0,g.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,g.jsxs)("div",{className:"flex flex-1 items-start space-x-3",children:[(0,g.jsx)("div",{className:"bg-tertiary h-10 w-10 animate-pulse rounded-full"}),(0,g.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,g.jsx)("div",{className:"bg-tertiary h-5 w-32 animate-pulse rounded"}),(0,g.jsx)("div",{className:"bg-tertiary w-18 h-3 animate-pulse rounded"})]})]}),(0,g.jsx)("div",{className:"bg-tertiary h-5 w-10 animate-pulse rounded"})]},e)}))})},hc=function(e){var t=e.label,r=e.queryParams,n=(0,L.TH)().search===r;return(0,g.jsx)(pe.OL,{to:"/leaderboard/".concat(r),className:K()("bg-primary border-primary hover:bg-tertiary focus-visible:outline-secondary text-darkest max-w-[200px] shrink-0 truncate rounded-full border px-4 py-2 text-sm transition-colors duration-75 focus-visible:rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"border-secondary":n}),children:(0,g.jsx)(ve.Z.LabelXs,{weight:"medium",children:t})})},vc=[{label:(0,vi.t)("leaderboard.date_ranges.7_days"),queryParams:"?period=7_days"},{label:(0,vi.t)("leaderboard.date_ranges.30_days"),queryParams:"?period=30_days"},{label:(0,vi.t)("leaderboard.date_ranges.all_time"),queryParams:"?period=all_time"}],yc=function(){var e=(0,L.TH)(),t=(0,L.k6)();return vc.some((function(t){var r=t.queryParams;return e.search===r}))||t.replace("/leaderboard/".concat(vc[0].queryParams)),(0,g.jsx)("div",{className:"flex flex-1 items-center space-x-2",children:vc.map((function(e){var t=e.label,r=e.queryParams;return(0,g.jsx)(hc,{label:t,queryParams:r},r)}))})},gc=function(){var e=(0,L.TH)().search,t=new URLSearchParams(e).get("period"),r="7_days"===t||"30_days"===t,n=(0,ac.k)(),i=function(e){var t=e.period,r=void 0===t?"7_days":t;return(0,$.useQuery)(["leaderboard",r],(function(){return(0,lt.UT)(_e.av.gamification.leaderboard({params:{period:r}}))}))}({period:t}),o=i.isLoading,a=i.data;return(0,g.jsxs)("div",{className:"py-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between gap-x-2",children:[(0,g.jsx)(yc,{}),(0,g.jsx)("button",{type:"button",className:"focus-visible:!outline-secondary hidden rounded-md sm:block md:mr-6",onClick:function(){return n.show()},children:(0,g.jsx)(ve.Z.LabelXs,{weight:"medium",children:(0,g.jsx)("span",{className:"text-light hover:text-default",children:(0,P.t)("leaderboard.how_do_points_work")})})})]}),o?(0,g.jsx)(bc,{}):(0,g.jsx)(mc,{shouldShowPlusIcon:r,data:a.top_members})]})},_c=r(55390),xc=function(){var e=(0,L.k6)(),t=(0,N.wh)().currentCommunityMember;if(!(0,T.vb)(t))return null;var r=[{label:(0,P.t)("leaderboard.settings"),onClick:function(){return e.push("/settings/gamification")},value:"settings"}];return(0,g.jsx)(_c.S,{label:(0,P.t)("leaderboard.settings"),options:r,dataTestId:"leaderboard-settings"})},jc=r(78596),wc=function(){var e=(0,jc.d)().leaderboardLink,t=(null===e||void 0===e?void 0:e.label)||(0,vi.t)("leaderboard.title");return(0,g.jsx)(ol.Z,{leftContent:(0,g.jsx)(sl.y,{children:t}),rightContent:(0,g.jsx)(xc,{})})},Oc=function(){var e=!!(0,N.wh)().currentUser;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(wc,{}),(0,g.jsxs)("div",{className:K()("mx-auto max-w-5xl p-4",{"md:p-9":e}),children:[e&&(0,g.jsx)(cc,{}),(0,g.jsx)(gc,{})]})]})},Sc=r(66490),Pc=r(66722),kc=r(11076),Cc={purple:"bg-[#ECE2FF]",green:"bg-[#EBFAF5]",pink:"bg-[#FFF1F3]"},Nc={purple:"text-[#AA91DD]",green:"text-[#B0EBD9]",pink:"text-[#FFC9D3]"},Ic={purple:"bg-[#AA91DD]",green:"bg-[#B0EBD9]",pink:"bg-[#FFC9D3]"},Ac=["feature_1","feature_2","feature_3","feature_4"],Ec=function(e){var t=e.color,r=e.feature,n=e.icon,i=e.iconSize,o=void 0===i?20:i,a=e.featureCount,s=void 0===a?3:a,l="leaderboard.key_features.".concat(r);return(0,g.jsxs)("div",{className:K()("col-span-6 h-[500px] rounded-[10px] p-12 xl:col-span-5 xl:pb-4",Cc[t]),children:[(0,g.jsx)("div",{className:K()("flex h-12 w-12 items-center justify-center rounded-full",Ic[t]),children:(0,g.jsx)(I.JO,{type:n,size:o})}),(0,g.jsx)("div",{className:"mt-5",children:(0,g.jsx)(ve.Z.TitleLg,{color:"text-[#2B2E33]",children:(0,P.t)("".concat(l,".title"))})}),(0,g.jsx)("div",{className:"mt-5",children:(0,g.jsx)(ve.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,P.t)("".concat(l,".description"))})}),(0,g.jsx)("div",{className:"mt-5 flex flex-col space-y-4",children:Ac.slice(0,s).map((function(e){return(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("div",{className:"h-5 w-5",children:(0,g.jsx)(I.JO,{type:"20-checkmark-circle-fill-dark",size:20,className:Nc[t]})}),(0,g.jsx)(ve.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,P.t)("".concat(l,".").concat(e))})]},e)}))})]})},Dc=function(e){var t=e.src;return(0,g.jsx)("div",{className:"col-span-6 flex justify-center overflow-hidden rounded-[10px] xl:col-span-7",children:(0,g.jsx)("img",{alt:"",loading:"lazy",src:t,className:"object-cover"})})},Tc=function(){var e=(0,N.wh)().currentCommunitySettings,t=Boolean(null===e||void 0===e?void 0:e.circle_v3_preview);return(0,g.jsxs)("div",{className:"border-primary flex w-full flex-col items-center rounded-lg border p-14",children:[(0,g.jsx)(ve.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,vi.t)("leaderboard.landing_page_title")}),(0,g.jsx)("div",{className:"mt-2 text-center",children:(0,g.jsx)(ve.Z.TitleSm,{color:"text-dark",children:(0,vi.t)("leaderboard.description")})}),(0,g.jsx)(pe.rU,{to:"/settings/gamification",children:(0,g.jsx)(M.z,{large:!0,className:"mt-8",variant:"circle",children:t?(0,vi.t)("leaderboard.preview"):(0,vi.t)("leaderboard.activate")})})]})},Lc=function(){var e=(0,N.wh)().currentCommunitySettings,t=Boolean(null===e||void 0===e?void 0:e.circle_v3_preview);return(0,g.jsxs)("div",{className:"flex w-full flex-col items-center text-center",children:[(0,g.jsx)(ve.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,vi.t)("leaderboard.landing_page_title")}),(0,g.jsx)("div",{className:"mt-2",children:(0,g.jsx)(ve.Z.TitleSm,{color:"text-dark",children:(0,vi.t)("leaderboard.description")})}),(0,g.jsx)(pe.rU,{to:"/settings/gamification",children:(0,g.jsx)(M.z,{large:!0,className:"mt-8",variant:"circle",children:t?(0,vi.t)("leaderboard.preview"):(0,vi.t)("leaderboard.activate")})})]})},Mc=function(){var e=(0,N.wh)().currentCommunitySettings,t=Boolean(null===e||void 0===e?void 0:e.circle_v3_preview);return(0,g.jsxs)("div",{className:"bg-primary h-full",children:[(0,g.jsx)(ol.Z,{leftContent:(0,g.jsx)(sl.y,{children:(0,vi.t)("leaderboard.title")}),rightContent:(0,g.jsx)(pe.rU,{to:"/settings/gamification",children:(0,g.jsx)(M.z,{large:!0,variant:"circle",children:t?(0,vi.t)("leaderboard.preview"):(0,vi.t)("leaderboard.activate")})})}),(0,g.jsx)("main",{className:"mx-auto max-w-6xl",children:(0,g.jsxs)("div",{className:"flex h-full w-full flex-col space-y-16 p-14",children:[(0,g.jsx)(Lc,{}),(0,g.jsxs)("div",{className:"grid grid-flow-row-dense grid-cols-6 gap-6 xl:auto-rows-fr xl:grid-cols-12",children:[(0,g.jsx)(Ec,{color:"pink",icon:"leaderboard-progress",feature:"collect_points",featureCount:4,iconSize:24}),(0,g.jsx)(Dc,{src:Sc}),(0,g.jsx)(Ec,{color:"green",icon:"leaderboard-activity",feature:"level_up"}),(0,g.jsx)(Dc,{src:Pc}),(0,g.jsx)(Ec,{color:"purple",icon:"leaderboard-levelup",feature:"earn_rewards"}),(0,g.jsx)(Dc,{src:kc})]}),(0,g.jsx)(Tc,{})]})})]})},Rc=function(){var e=(0,ec.c8)(),t=e.data;return e.isLoading?(0,g.jsx)(ci.w,{}):(0,g.jsx)(al.W,{fullWidth:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:null!==t&&void 0!==t&&t.enabled?(0,g.jsx)(Oc,{}):(0,g.jsx)(Mc,{})})})},Bc=r(85518),Uc=r(27716),Fc=r(84710),zc=r(89940),Vc=r(75043),qc=r(34544),Zc=r(85327),Gc=r(32808),Wc=r(98661),Hc=r(3888),Qc=r(4395),Jc=r(78113),Kc=r(94216),$c=r(31247),Xc=r(9144),Yc=r(99658),eu=function(){return(0,g.jsx)(Ri.u_.Body,{className:"!px-0 !pt-0",children:(0,g.jsx)("div",{className:"px-5 pt-3 md:px-8",children:(0,g.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)("div",{className:"bg-tertiary h-10 w-10 animate-pulse rounded-full"}),(0,g.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,g.jsx)("div",{className:"bg-tertiary h-4 w-3/5 animate-pulse rounded-md"}),(0,g.jsx)("div",{className:"bg-tertiary h-4 w-2/5 animate-pulse rounded-md"})]})]}),(0,g.jsx)("div",{className:"bg-tertiary h-80 w-full animate-pulse rounded-md"})]})})})},tu=r(77852);function ru(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ou(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var au=function(e){var t=e.autofocusReplyForm,r=void 0===t||t,i=e.isRenderedOutsideTheSpace,o=void 0!==i&&i,a=e.onPostDestroy,s=e.post,l=e.shouldOpenCommentPage,c=void 0!==l&&l,u=e.isLoading,d=void 0!==u&&u,p=(0,N.Zh)(),f=p.record,m=p.onPostChange,b=f.status,h=f.is_comments_enabled,v=f.event_setting_attributes,y=(0,Yc.m)().isPostBodyEmpty,_=(0,Wc.N)().refetch,x=Boolean(null===s||void 0===s?void 0:s.cover_image_url),j=null===v||void 0===v?void 0:v.live_stream_room_setting_attributes,w=null===j||void 0===j?void 0:j.recording_url,O=null===j||void 0===j?void 0:j.recording_transcript_id,S=null===j||void 0===j?void 0:j.recording_thumbnail,P=null===j||void 0===j?void 0:j.auto_post_recording_enabled,k=iu((0,n.useState)(!d),2),C=k[0],I=k[1],A=b===Zc.Q_.PUBLISHED,E=null===v||void 0===v?void 0:v.rsvp_disabled,D=(0,mn.HZ)(s)&&!E&&A&&!(0,qc.QP)(f);(0,n.useEffect)((function(){var e=null;return d?I(!1):e=setTimeout((function(){return I(!0)}),50),function(){e&&clearTimeout(e)}}),[d]);var T=function(e){var t=e.initialFocus,r=void 0===t||t,i=ru((0,n.useState)(!0),2),o=i[0],a=i[1],s=(0,n.useRef)(null),l=ru((0,n.useState)(r),2),c=l[0],u=l[1],d=(0,n.useCallback)((function(){var e=s.current;e&&"focus"in e&&e.focus()}),[s]),p=(0,n.useCallback)((function(){var e,t;a(!0),u(!0),s.current&&((0,tu.p)(s.current)?s.current.focus():null===(e=s.current.commands)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,"end"))}),[]);return(0,n.useEffect)((function(){c&&d()}),[d,c]),{commentsFormRef:s,focusCommentsForm:d,showCommentsAndFocusOnForm:p,toggleComment:function(){u(!1),a((function(e){return!e}))},shouldShowComments:o,shouldAutofocusReplyForm:c}}({initialFocus:r}),L=T.commentsFormRef,M=T.showCommentsAndFocusOnForm,R=T.toggleComment,B=T.shouldShowComments;return d?(0,g.jsx)(eu,{}):(0,g.jsx)(Ri.u_.Body,{className:"!px-0 !pt-0",children:(0,g.jsxs)("div",{className:K()("flex flex-col gap-5","transition-opacity duration-300 ease-in-out",{"opacity-0":!C,"opacity-100":C}),children:[(0,g.jsx)($c.H,{post:s,className:"md:!rounded-none"}),(0,g.jsxs)("div",{className:K()("px-5 md:px-8",{"pt-3":!x}),children:[(0,g.jsx)(Xc.m,{post:s,onChange:m,refetchPosts:_,hideShareLink:!0,hideBookmarkButton:!0,hidePinnedToTopIcon:!0,onPostDestroy:a,hideAuthorHeadline:!1,tagsLimit:1,tagsShowMoreLabelVariant:"numbers",metaInfoWrapperClassName:"",isRenderedOutsideTheSpace:o}),(0,g.jsxs)("div",{className:K()("space-y-5",{"mt-5":y}),children:[(0,mn.HZ)(s)&&(0,g.jsx)(Vc.Y,{onChange:function(e){null===m||void 0===m||m(e)},shouldDisplayRsvpAction:D}),w&&P&&(0,g.jsx)(Hc.T,{src:w,type:"video/mp4",mediaTranscriptId:O,poster:S}),(0,mn.Fr)(s)&&(0,g.jsx)(Gc.l,{onPostChange:m,onPostDestroy:a}),(0,g.jsx)(Kc.y,{}),(0,g.jsxs)("div",{children:[(0,g.jsx)(Jc.S,{className:"!px-0",toggleComment:R,showCommentAndFocusCommentForm:M,shouldOpenCommentPage:c}),h&&B&&(0,g.jsx)(Qc.o,{commentsFormRef:L,autofocusReplyForm:!1})]})]})]})]})})},su=r(54030),lu=r(58974),cu=r(82507),uu=r(87229),du=function(){return(0,g.jsx)(Ri.u_.Header,{className:"flex w-full items-center gap-4",children:(0,g.jsx)("div",{className:"bg-tertiary h-8 w-3/5 animate-pulse rounded-md"})})};function pu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mu=function(e){var t,r=e.onChange,i=e.spaceId,o=e.isLoading,a=void 0!==o&&o,s=e.invalidateQueries,l=e.onPostDestroy,c=(0,Yc.m)(),u=c.post,d=c.refetchPostDetails,p=(0,$.useQueryClient)(),f=(0,Ri.UV)().contentPortalElement,m=(0,L.k6)(),b=(0,L.TH)(),h=null===b||void 0===b||null===(t=b.state)||void 0===t?void 0:t.prevLocation,v=(0,su.kK)(),y=u.name,_=u.slug,x=u.space_slug,j=(0,Wc.N)().refetch,w=pu((0,n.useState)(!a),2),O=w[0],S=w[1];(0,n.useEffect)((function(){var e=null;return a?S(!1):e=setTimeout((function(){return S(!0)}),50),function(){e&&clearTimeout(e)}}),[a]);var k=function(){p.invalidateQueries(["posts",i])};return a?(0,g.jsx)(du,{}):(0,g.jsxs)(Ri.u_.Header,{className:K()("flex w-full items-center gap-4","transition-opacity duration-300 ease-in-out",{"opacity-0":!O,"opacity-100":O,"!justify-end":!y}),children:[y&&(0,g.jsx)(ve.Z.TitleMd,{children:y}),(0,g.jsx)(Ri.u_.HeaderActions,{className:"mt-1",children:(0,g.jsxs)("div",{className:"flex gap-2 md:gap-5",children:[(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)(ye.T,{interactive:!1,content:(0,P.t)("post.post_modal.share_post_button_tooltip"),children:(0,g.jsx)(uu.P,{onChange:function(){r(),k()},appendTo:null!==f&&void 0!==f?f:document.body,menuButtonEl:"div",button:(0,g.jsx)(qi.h,{name:"20-share",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,ariaLabel:(0,P.t)("post.post_modal.share_post_aria_label")}),shouldRenderCustomMenuButton:!0})}),(0,g.jsx)(lu.e,{bookmarkType:(0,mn.HZ)(u)?"event":"post",variant:"minimal-post-modal",record:u,onSuccess:function(){null===d||void 0===d||d(),k()}}),(0,g.jsx)(cu.p,{onChange:r,onPostDestroy:l,refetchPosts:j})]}),(0,g.jsx)("div",{className:"bg-overlay-dark w-px"}),(0,g.jsxs)("div",{className:"flex gap-2",children:[!v&&(0,g.jsx)(ye.T,{interactive:!1,content:(0,P.t)("post.post_modal.open_post_in_full_page_button_tooltip"),children:(0,g.jsx)(qi.h,{name:"20-expand",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,onClick:function(){m.push(_e.xu.show({slug:_,spaceSlug:x}))},ariaLabel:(0,P.t)("post.post_modal.open_post_in_full_page_aria_label")})}),(0,g.jsx)(ye.T,{interactive:!1,content:(0,P.t)("post.post_modal.close_post_modal_tooltip"),children:(0,g.jsx)(qi.h,{name:"20-close",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,onClick:function(){h&&(m.push(h),null===s||void 0===s||s())},ariaLabel:(0,P.t)("post.post_modal.close_button_aria_label")})})]})]})})]})},bu=r(95172),hu=r(40641);function vu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gu=r(67675),_u=function(e){var t=e.currentPost,r=e.prevLocation,i=e.params,o=e.isNavigatingInsidePostModal,a=e.setIsNavigatingInsidePostModal,s=e.wasInFeed,l=void 0!==s&&s,c=e.isWithinProfileContext,u=e.profileContextMember,d=(0,hu.d)().navigateToPost,p=function(e){var t,r=vu((0,n.useState)("next"),2),i=r[0],o=r[1],a=vu((0,n.useState)(!1),2),s=a[0],l=a[1],c=vu((0,n.useState)(null!==(t=null===e||void 0===e?void 0:e.hasNextPage)&&void 0!==t&&t),2);return{direction:i,setDirection:o,isPostQueryEnabled:s,setIsPostQueryEnabled:l,hasNextPage:c[0],setHasNextPage:c[1]}}((0,L.TH)().state),f=p.direction,m=p.setDirection,b=p.isPostQueryEnabled,h=p.setIsPostQueryEnabled,v=p.hasNextPage,y=p.setHasNextPage,g=function(e,t,r,i,o,a){var s="string"===typeof i?i:"",l=e&&t,c=!e&&!t&&!o,u=e&&o,d=(0,gu.t)({memberPublicId:null===a||void 0===a?void 0:a.public_uid,enabled:u,onSuccess:r}),p=d.posts,f=d.isLoading,m=d.fetchNextPage,b=(0,Wc.N)(i,c,r),h=b.posts,v=b.isLoading,y=b.fetchNextPage,g=(0,Uc.N)(s,l,r),_=g.posts,x=g.isLoading,j=g.fetchNextPage;(0,n.useEffect)((function(){e&&(t?j():o?m():y())}),[e,t,j,y,m,o]);var w,O=[];return t?(O=_,w=x):o?(O=p,w=f):(O=h,w=v),{posts:O,isLoading:w}}(b,l,(0,n.useCallback)((function(e){if(o){var n=e.pages[e.pages.length-1];if(n&&n.records.length>0){h(!1),y(n.has_next_page);var s=n.records.findIndex((function(e){return e.id===t.id})),l=-1!==s&&s<n.records.length-1?s+1:0;d({newPost:n.records[l],prevLocation:r,params:i,isWithinProfileContext:c,profileContextMember:u})}null===a||void 0===a||a(!1)}}),[o,d,a,y,h,t,i,r,c,u]),i,c,u),_=g.isLoading,x=g.posts,j=(0,n.useCallback)((function(e){if(!_&&x&&t){null===a||void 0===a||a(!0),m(e);var n=x.findIndex((function(e){return e.id===t.id}));if(-1!==n){var o="next"===e?n+1:n-1;o<0||o>=x.length?"next"===e?h(!0):null===a||void 0===a||a(!1):(d({newPost:x[o],prevLocation:r,params:i,isWithinProfileContext:c,profileContextMember:u}),null===a||void 0===a||a(!1))}}}),[_,x,t,m,d,h,r,i,a,c,u]),w=(0,n.useCallback)((function(e){_||o||j(e)}),[j,_,o]),O=(0,n.useCallback)((function(){return!(!x||!t)&&0===x.findIndex((function(e){return e.id===t.id}))}),[x,t]),S=(0,n.useCallback)((function(){return!(!x||!t)&&(x.findIndex((function(e){return e.id===t.id}))===x.length-1&&!v)}),[x,t,v]);return(0,bu.y1)("right",(function(){S()||w("next")}),{enabled:!_&&!o},[w,_,o]),(0,bu.y1)("left",(function(){O()||w("previous")}),{enabled:!_&&!o},[w,_,o,O]),{isNavigatingToNextPost:"next"===f,isNavigatingToPreviousPost:"previous"===f,isLoading:_,setIsNavigatingInsidePostModal:a,isNavigatingInsidePostModal:o,shouldDisableLeftNavigation:_||o||O(),shouldDisableRightNavigation:_||o||S(),handleNextPost:function(){return S()?C.noop:w("next")},handlePreviousPost:function(){return O()?C.noop:w("previous")}}},xu=function(e){var t=e.onClick,r=void 0===t?C.noop:t,n=e.isDisabled,i=void 0!==n&&n,o=e.isLoading,a=void 0!==o&&o?"loader":"20-chevron-left";return(0,g.jsx)("button",{type:"button",className:K()("fixed top-1/2 -translate-y-1/2","hidden","h-24 w-24","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:left-[calc(50%-400px-96px)]","lg:left-[calc(50%-400px-128px)]"),onClick:i?void 0:r,disabled:i,children:(0,g.jsx)("div",{className:K()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative h-10 w-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":i}),children:(0,g.jsx)(I.JO,{size:20,type:a})})})},ju=function(e){var t=e.onClick,r=void 0===t?C.noop:t,n=e.isDisabled,i=void 0!==n&&n,o=e.isLoading,a=void 0!==o&&o?"loader":"20-chevron-right";return(0,g.jsx)("button",{type:"button",className:K()("fixed top-1/2 -translate-y-1/2","h-24 w-24","hidden","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:right-[calc(50%-464px-32px)]","lg:right-[calc(50%-464px-64px)]"),onClick:i?void 0:r,disabled:i,children:(0,g.jsx)("div",{className:K()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative h-10 w-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":i}),children:(0,g.jsx)(I.JO,{size:20,type:a})})})},wu=function(e){var t=_u(e),r=t.handleNextPost,n=t.handlePreviousPost,i=t.shouldDisableLeftNavigation,o=t.shouldDisableRightNavigation,a=t.isNavigatingToNextPost,s=t.isNavigatingToPreviousPost,l=e.isLoading,c=void 0!==l&&l;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(xu,{onClick:n,isDisabled:i,isLoading:c&&s}),(0,g.jsx)(ju,{onClick:r,isDisabled:o,isLoading:c&&a})]})};function Ou(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Su(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Su(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pu=function(){var e=Ou((0,n.useState)(!1),2),t=e[0],r=e[1],i=(0,L.k6)(),o=(0,L.TH)(),a=(0,zc.v)(),s=a.isLoading,l=a.postResource,c=a.perPagePostIds,u=a.space,d=o.state,p=null!==d&&void 0!==d?d:{},f=p.prevLocation,m=p.postList,b=p.currentPage,h=void 0===b?1:b,v=p.params,y=p.isWithinProfileContext,_=p.profileContextMember,x="/feed"===(null===f||void 0===f?void 0:f.pathname),j=s||t,w=(0,$.useQueryClient)(),O=x?[Uc.Z]:["posts",null===u||void 0===u?void 0:u.id],S=(0,n.useCallback)((function(){w.invalidateQueries(O)}),[w,O]),P=(0,n.useCallback)((function(){(0,C.defer)(S)}),[S]);return(0,g.jsx)(N.mE,{spaceId:null===u||void 0===u?void 0:u.id,children:(0,g.jsx)(Fc._x,{perPagePostIds:c,children:(0,g.jsx)(N.DW,{post:l.data,onPostChange:l.onPostChange,usedIn:"minimal-post-modal",children:(0,g.jsxs)(Ri.u_,{isOpen:!0,onClose:function(){f&&(i.push(f),P())},contentPortalId:"post-modal-portal",children:[(0,g.jsx)(wu,{initialPostList:m,initialPage:h,currentPost:null===l||void 0===l?void 0:l.data,prevLocation:f,params:v,isNavigatingInsidePostModal:t,setIsNavigatingInsidePostModal:r,wasInFeed:x,isLoading:j,isWithinProfileContext:y,profileContextMember:_}),(0,g.jsx)(Ri.u_.Overlay,{}),(0,g.jsxs)(Ri.u_.Content,{size:"xl",className:K()("sm:!my-[5vh]",{"sm:!max-h-[85vh]":Bc.TL,"sm:!max-h-[90vh]":!Bc.TL}),children:[(0,g.jsx)(mu,{spaceId:u.id,onChange:null===l||void 0===l?void 0:l.onPostChange,isLoading:j,invalidateQueries:P,onPostDestroy:function(){f&&i.push(f)}}),(0,g.jsx)(au,{isLoading:j,isRenderedOutsideTheSpace:x,post:l.data,onPostDestroy:function(){f&&i.push(f)}})]})]})})})})},ku=(0,li.u)((function(){return Promise.all([r.e(4901),r.e(8071)]).then(r.bind(r,18071))})),Cu=function(){return(0,g.jsx)(al.W,{fullWidth:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(ku,{})})})},Nu=(0,li.u)((function(){return Promise.all([r.e(532),r.e(7675),r.e(6464),r.e(4572),r.e(4410),r.e(6795)]).then(r.bind(r,66795))})),Iu=function(){return(0,g.jsx)(al.W,{fullWidth:!0,noPadding:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Nu,{})})})},Au=(0,li.u)((function(){return Promise.all([r.e(532),r.e(4572),r.e(3606)]).then(r.bind(r,23606))})),Eu=function(){var e=(0,Ql.h)().setDynamicLayoutProps;return(0,n.useEffect)((function(){e({fullWidth:!0,disableRightSidebar:!1})}),[e]),(0,g.jsx)(al.W,{fullWidth:!0,fullHeight:!1,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Au,{})})})},Du=(0,li.u)((function(){return Promise.resolve().then(r.bind(r,40341))})),Tu=function(){return(0,g.jsx)(al.W,{fullWidth:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Du,{})})})},Lu=r(17551),Mu=(0,li.u)((function(){return Promise.all([r.e(532),r.e(7698),r.e(6816)]).then(r.bind(r,86816))})),Ru=function(){var e=(0,Lu.U)(),t=(0,N.nT)(),r=t.isLoading,i=t.helpers.findBy({slug:e}),o=(0,Ql.h)().setDynamicLayoutProps;return(0,n.useEffect)((function(){o({disableRightSidebar:!1})}),[o]),r?null:(0,g.jsx)(N.mE,{spaceId:null===i||void 0===i?void 0:i.id,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Mu,{})})})},Bu=(0,li.u)((function(){return r.e(1500).then(r.bind(r,45141))})),Uu=function(){return(0,g.jsx)(Bn.a.Body,{children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Bu,{})})})},Fu=r(90789),zu=(0,li.u)((function(){return r.e(812).then(r.bind(r,21490))})),Vu=function(){var e=(0,Lu.U)(),t=(0,Ql.h)().setDynamicLayoutProps,r=(0,N.nT)().helpers.findBy({slug:e});return(0,n.useEffect)((function(){(0,Fu.Ug)(r)&&t({disableScroll:!0})}),[r,t]),(0,C.isEmpty)(r)?null:(0,g.jsx)(N.mE,{spaceId:null===r||void 0===r?void 0:r.id,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(zu,{space:r})})})},qu=r(16823),Zu=(0,li.u)((function(){return r.e(6622).then(r.bind(r,96622))})),Gu=function(){return(0,g.jsx)(al.W,{fullWidth:!0,children:(0,g.jsx)(qu.F.Body,{hasPaddingTopMobile:!1,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Zu,{})})})})},Wu=(0,li.u)((function(){return r.e(9635).then(r.bind(r,29635))})),Hu=function(){return(0,g.jsx)(al.W,{fullWidth:!0,children:(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Wu,{})})})},Qu=["/c/:spaceSlug","/c/:spaceSlug/invite","/c/:spaceSlug/members","/c/:spaceSlug/customize","/c/:spaceSlug/customize/*","/c/:spaceSlug/sections/*","/c/:spaceSlug/edit-lesson/*"],Ju=function(){var e=(0,Tn.I)().isV3Enabled,t=(0,L.TH)(),r=t.state,n=(null!==r&&void 0!==r?r:{}).prevLocation;return(0,g.jsx)(L.AW,{path:"/",children:(0,g.jsxs)(Ql.O,{disableRightSidebar:!0,children:[(0,g.jsxs)(L.rs,{location:n||t,children:[(0,g.jsx)(L.AW,{component:Eu,path:e?"/feed":"/home",exact:!0}),e&&(0,g.jsx)(L.l_,{from:"/home",to:"/feed"}),!e&&(0,g.jsx)(L.l_,{from:"/feed",to:"/home"}),(0,g.jsx)(Ks.i,{component:Hu,path:"/spaces",exact:!0}),(0,g.jsx)(Ks.i,{component:Tu,path:"/members",exact:!0}),(0,g.jsx)(Ks.i,{component:Iu,path:"/events",exact:!0}),(0,g.jsx)(Ks.i,{component:Cu,path:"/courses",exact:!0}),(0,g.jsx)(Ks.i,{component:Rc,path:"/leaderboard",exact:!0}),(0,g.jsx)(Ks.i,{component:Uu,path:"/u/:publicUid"}),(0,g.jsx)(Ks.i,{component:Gu,path:"/s/:spaceGroupSlug"}),(0,g.jsx)(Ks.i,{component:Vu,path:Qu,exact:!0}),(0,g.jsx)(Ks.i,{component:Ru,path:"/c/:spaceSlug/:postSlug"})]}),n&&(0,g.jsx)(Ks.i,{component:Pu,path:"/c/:spaceSlug/:postSlug"})]})})},Ku=(0,_e.Iy)({sqid:":sqid"}),$u=[Ku.index,Ku.info,Ku.access,Ku.billing,Ku.activityLogs],Xu=function(){return(0,g.jsx)(Ks.i,{component:Zl,path:$u,exact:!0})},Yu=(0,li.u)((function(){return Promise.all([r.e(705),r.e(4270),r.e(3032)]).then(r.bind(r,47380))})),ed=function(){var e=(0,L.UO)().leadPublicId;return(0,g.jsx)(n.Suspense,{fallback:(0,g.jsx)(ci.w,{}),children:(0,g.jsx)(Vl,{type:"CommunityLead",publicId:e,children:(0,g.jsx)(Yu,{})})})},td=(0,_e.NQ)({type:"CommunityLead",publicId:":leadPublicId"}),rd=[td.index,td.info,td.access,td.billing,td.activityLogs],nd=function(){return(0,g.jsx)(Ks.i,{component:ed,path:rd,exact:!0})};function id(e){return function(e){if(Array.isArray(e))return od(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return od(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return od(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ad=function(){return(0,g.jsx)(O.D,{})},sd=Object.values(_e.lA.members),ld=function(){var e,t,r=(0,L.TH)(),n=(null!==(e=null===r||void 0===r?void 0:r.state)&&void 0!==e?e:{}).prevLocation,i=null!==n&&void 0!==n?n:r,o=(t=(0,N.wh)().currentCommunitySettings,Boolean(null===t||void 0===t?void 0:t.profile_fields_for_leads_enabled));return(0,g.jsx)(w.S,{renderFunc:ad,children:(0,g.jsxs)(L.rs,{location:i,children:[(0,g.jsx)(Ks.i,{component:vl,path:"/live/:roomSlug/not_supported"}),(0,g.jsx)(Ks.i,{component:xl,path:"/live/:roomSlug/record"}),(0,g.jsx)(Ks.i,{component:bl,path:"/live/:roomSlug/mobile"}),(0,g.jsx)(L.AW,{component:gl,path:"/live/:roomSlug/public"}),(0,g.jsx)(Ks.i,{component:wl,path:"/live/:roomSlug"}),(0,g.jsx)(L.AW,{component:Dl,path:"/public/unsubscribe"}),(0,g.jsx)(L.AW,{component:Rl,path:"/two_fa"}),(0,g.jsx)(L.AW,{component:kl,path:"/marketing_emails/unsubscribe"}),(0,g.jsx)(L.AW,{component:Sl,path:"/marketing_emails/marketing_email_preference"}),(0,g.jsx)(Ks.i,{component:fl,path:"/getting-started",exact:!0}),(0,g.jsx)(Ks.i,{component:tl,path:"/features/visual-refresh"}),(0,g.jsx)(Ks.i,{component:Nl,path:["/messages/bot/:id","/messages/:uuid","/messages"]}),(0,g.jsx)(Ks.i,{component:Ll,path:"/threads"}),(0,g.jsx)(Ks.i,{component:Al,path:"/notifications"}),(0,g.jsx)(Ks.i,{component:cl,path:"/bookmarks"}),(0,g.jsx)(Ks.i,{component:Ys,path:["/settings"].concat(id(sd))}),(0,g.jsx)(Ks.i,{component:dl,path:"/contacts/import"}),(0,g.jsx)(L.l_,{from:"/members/manage",to:{pathname:"/audience/manage",search:r.search}}),(0,g.jsx)(Ks.i,{component:nl,path:"/account"}),(0,g.jsx)(Ks.i,{component:Hl,path:"/admin/members"}),(0,g.jsx)(Ks.i,{component:nd,path:"/admin/contacts"}),o&&(0,g.jsx)(Ks.i,{component:Xu,path:"/admin/audience"}),(0,g.jsx)(Ju,{})]})})},cd=r(21339),ud=function(){var e=(0,E.D)();return(0,g.jsx)(cd.H,{isLoadingAppData:e})},dd=r(22344),pd=r(95658),fd=function(){var e=(0,b.dd)();return(0,g.jsxs)(Ri.u_,{isOpen:e.visible,onClose:e.hide,title:(0,P.t)("new_opt_in_admin_preview_modal.title"),children:[(0,g.jsx)(Ri.u_.Overlay,{}),(0,g.jsxs)(Ri.u_.Content,{size:"lg",children:[(0,g.jsxs)(Ri.u_.Header,{children:[(0,g.jsx)(Ri.u_.Title,{size:"sm",children:(0,g.jsx)(ve.Z.TitleMd,{weight:"font-bold",children:(0,P.t)("new_opt_in_admin_preview_modal.title")})}),(0,g.jsx)(Ri.u_.HeaderActions,{children:(0,g.jsx)(Ri.u_.CloseButton,{onClick:e.hide})})]}),(0,g.jsx)(Ri.u_.Body,{children:(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(ve.Z.LabelLg,{color:"text-dark",weight:"semibold",children:(0,P.t)("new_opt_in_admin_preview_modal.body.title")}),(0,g.jsx)(ve.Z.BodyMd,{color:"text-default",children:(0,g.jsx)(U.w,{content:(0,P.t)("new_opt_in_admin_preview_modal.body.description")})}),(0,g.jsxs)("ul",{className:"ml-4 list-outside space-y-4",children:[(0,g.jsxs)("li",{className:"space-y-2",children:[(0,g.jsx)(ve.Z.LabelMd,{color:"text-dark",weight:"semibold",children:(0,P.t)("new_opt_in_admin_preview_modal.body.point_1")}),(0,g.jsx)(U.w,{as:"p",className:"text-default text-base leading-6 tracking-tighter",content:(0,P.t)("new_opt_in_admin_preview_modal.body.description_1")})]}),(0,g.jsxs)("li",{className:"space-y-2",children:[(0,g.jsx)(ve.Z.LabelMd,{color:"text-dark",weight:"semibold",children:(0,P.t)("new_opt_in_admin_preview_modal.body.point_2")}),(0,g.jsx)(U.w,{as:"p",className:"text-default text-base leading-6 tracking-tighter",content:(0,P.t)("new_opt_in_admin_preview_modal.body.description_2")})]}),(0,g.jsxs)("li",{className:"space-y-2",children:[(0,g.jsx)(ve.Z.LabelMd,{color:"text-dark",weight:"semibold",children:(0,P.t)("new_opt_in_admin_preview_modal.body.point_3")}),(0,g.jsx)(U.w,{as:"p",className:"text-default text-base leading-6 tracking-tighter",content:(0,P.t)("new_opt_in_admin_preview_modal.body.description_3")})]}),(0,g.jsxs)("li",{className:"space-y-2",children:[(0,g.jsx)(ve.Z.LabelMd,{color:"text-dark",weight:"semibold",children:(0,P.t)("new_opt_in_admin_preview_modal.body.point_4")}),(0,g.jsx)(U.w,{as:"p",className:"text-default text-base leading-6 tracking-tighter",content:(0,P.t)("new_opt_in_admin_preview_modal.body.description_4")})]})]})]})}),(0,g.jsx)(Ri.u_.Footer,{className:"flex justify-end border-t",children:(0,g.jsx)(M.z,{variant:"circle",onClick:function(){e.hide()},children:(0,P.t)("new_opt_in_admin_preview_modal.got_it")})})]})]})},md=b.gk.create((function(){return(0,g.jsx)(fd,{})})),bd=function(){var e=(0,Tn.I)().isCircleV3Preview,t=(0,b.dd)(md),r=!1;try{r=!!sessionStorage.getItem("showAdminPreviewModal")}catch(i){console.warn("Session storage is disabled or unavailable."),r=!0}(0,n.useEffect)((function(){if(e&&r){try{sessionStorage.removeItem("showAdminPreviewModal")}catch(i){console.warn("Unable to remove item from session storage.")}t.show()}}),[t,r,e])},hd=r(51873),vd=r(88272),yd=["/live/:roomSlug/not_supported","/live/:roomSlug/record","/live/:roomSlug/mobile","/live/:roomSlug/public","/live/:roomSlug","/features/visual-refresh"],gd=function(e){var t=e.previewBarText,r=e.previewBarCtaContent,n=e.isAdmin,i=void 0!==n&&n,o=e.shouldDisplayV3PreviewBar,a=void 0!==o&&o,s=(0,R.T)().isSettingsRoute,l=(0,L.$B)(yd),c=(0,vd.p)(),u=(0,hd.d)();return!a||!i||l||s?null:(0,g.jsx)(B.E,{exitText:(0,P.t)("new_version_preview_bar.preview_bar_go_back"),onExit:function(){return c.mutate({operation:"rollback_admin"})},children:(0,g.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,g.jsx)("span",{children:t}),(0,g.jsx)(M.z,{variant:"secondary",isFullRounded:!0,disabled:c.isLoading,onClick:function(){return u.show()},children:r})]})})},_d=r(14539),xd=function(e){var t=e.previewBarText,r=e.previewBarCtaContent,n=(0,N.wh)().currentCommunityMember,i=(0,T.vb)(n),o=(0,_d.q)();return(0,g.jsx)(gd,{previewBarText:t,previewBarCtaContent:r,isAdmin:i,shouldDisplayV3PreviewBar:o})},jd=["shouldCelebrate"];function wd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Od(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sd(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Pd=function(e){var t=e.shouldCelebrate,r=void 0!==t&&t,n=Sd(e,jd),i=(0,$l.Z)(),o=i.width,a=i.height;return r?(0,g.jsx)(Kl(),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(r),!0).forEach((function(t){Od(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({width:o,height:a,style:{zIndex:999999},recycle:!1,tweenDuration:5e3,numberOfPieces:300},n)):null},kd=function(){var e=(0,b.dd)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Pd,{shouldCelebrate:e.visible}),(0,g.jsxs)(Ri.u_,{isOpen:e.visible,onClose:e.hide,title:(0,P.t)("version_activation_modal.title"),children:[(0,g.jsx)(Ri.u_.Overlay,{}),(0,g.jsxs)(Ri.u_.Content,{size:"sm",children:[(0,g.jsx)(Ri.u_.Header,{className:"flex !flex-col !items-end",children:(0,g.jsx)(Ri.u_.HeaderActions,{className:"!self-end",children:(0,g.jsx)(Ri.u_.CloseButton,{onClick:e.hide})})}),(0,g.jsxs)(Ri.u_.Body,{className:"flex flex-col items-center !pb-6 !pt-0",children:[(0,g.jsx)("span",{className:"text-center text-[5rem]",children:(0,P.t)("version_activation_modal.emoji")}),(0,g.jsx)(ve.Z.TitleMd,{children:(0,P.t)("version_activation_modal.title")}),(0,g.jsx)(ve.Z.BodyMd,{children:(0,P.t)("version_activation_modal.description")}),(0,g.jsx)(M.z,{type:"button",onClick:e.hide,className:"mt-6",children:(0,P.t)("version_activation_modal.cta")})]})]})]})]})},Cd=b.gk.create((function(){return(0,g.jsx)(kd,{})})),Nd=function(){var e=(0,Tn.I)().isV3Enabled,t=(0,b.dd)(Cd),r=!1;try{r=!!sessionStorage.getItem("showVersionActivationModal")}catch(i){console.warn("Session storage is disabled or unavailable."),r=!0}(0,n.useEffect)((function(){if(e&&r){try{sessionStorage.removeItem("showVersionActivationModal")}catch(i){console.warn("Unable to remove item from session storage.")}t.show()}}),[t,r,e])},Id=function(e){var t=e.notice,r=e.alert,n=e.shouldDisplayHeader,i=e.shouldDisplayCommunitySwitcher,o=e.hasMinimalLayout,a=e.showWidgetBot,s=(0,Tn.I)().isV3Enabled,l=window.location.pathname!==(0,_e.hD)();return Nd(),bd(),s?((0,j.ss)(),(0,g.jsxs)("div",{className:"flex",children:[i&&(0,g.jsx)(w.S,{children:(0,g.jsx)(ud,{})}),(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)(Z.I,{notice:t,alert:r}),(0,g.jsx)(xd,{previewBarText:(0,P.t)("new_version_preview_bar.preview_bar_text"),previewBarCtaContent:(0,P.t)("new_version_preview_bar.preview_bar_cta_content")}),(0,g.jsx)(D,{}),n&&!o&&l&&(0,g.jsx)(dd.G,{}),(0,g.jsx)(ld,{}),(0,g.jsx)(Dn,{showWidgetBot:a}),(0,g.jsx)(k.J,{}),(0,g.jsx)(pd.V,{})]})]})):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.I,{notice:t,alert:r}),(0,g.jsx)(q,{optInText:(0,P.t)("new_version_opt_in.opt_in_bar_text"),optInCTAContent:(0,P.t)("new_version_opt_in.opt_in_bar_cta_content")}),(0,g.jsx)(D,{}),n&&!o&&l&&(0,g.jsx)(dd.G,{}),i&&(0,g.jsx)(w.S,{children:(0,g.jsx)(ud,{})}),(0,g.jsx)(ld,{}),(0,g.jsx)(Dn,{showWidgetBot:a}),(0,g.jsx)(k.J,{})]})},Ad=["notice","alert","display_community_switcher","display_header","minimal_layout","show_widget_bot"];function Ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(r),!0).forEach((function(t){Td(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Td(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ld(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(0,f.b)();var Md=(0,w.P)((function(e){var t=e.notice,r=e.alert,i=e.display_community_switcher,o=void 0!==i&&i,a=e.display_header,s=void 0===a||a,c=e.minimal_layout,u=void 0!==c&&c,d=e.show_widget_bot,f=void 0!==d&&d,b=Ld(e,Ad);return(0,n.useEffect)((function(){(0,j.M2)(),l(),p()}),[]),(0,g.jsx)(m.e$,{backendProps:Dd({notice:t,alert:r,display_community_switcher:o,minimal_layout:u},b),children:(0,g.jsx)("div",{id:S.BW,className:"bg-secondary","data-testid":"main-app-provider",children:(0,g.jsx)(x,{children:(0,g.jsx)(Id,{notice:t,alert:r,shouldDisplayHeader:s,shouldDisplayCommunitySwitcher:o,hasMinimalLayout:u,showWidgetBot:f})})})})}),O.D)},4443:(e,t,r)=>{"use strict";r.d(t,{H:()=>Q});var n=r(67294),i=r(94184),o=r.n(i),a=r(58533),s=r(34914),l=r(34334),c=r(74666),u=r(98338),d=r(59887),p=r(43917),f=r(19642),m=r(13288),b=r(4404),h=r(86013),v=r(18605),y=r(54030),g=r(8246),_=r(85893),x=function(e){var t=e.shouldShowChatThreadsBanner,r=e.hideBanner,n=(0,y.kK)();return t?(0,_.jsx)("div",{className:"border-primary bg-primary mx-3 mt-6 h-24 rounded-lg border px-6 py-5 shadow-sm md:mx-6",children:(0,_.jsxs)("div",{className:"flex flex-row items-center",children:[(0,_.jsx)("div",{className:"mr-3 h-10 w-12 rounded-lg bg-gray-100 md:mr-6 md:h-14 md:w-14",children:(0,_.jsx)("div",{className:"flex h-full w-full items-center justify-between",children:(0,_.jsx)(v.JO,{type:n?"16-chat-threads":"20-chat-threads",size:n?16:20,className:"!w-full"})})}),(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("div",{className:"flex w-full flex-row items-start justify-between",children:[(0,_.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("threads.banner.title")}),(0,_.jsx)("button",{type:"submit",onClick:r,children:(0,_.jsx)(v.JO,{type:"20-close-sm",size:20})})]}),!n&&(0,_.jsx)(g.Z.LabelMd,{children:(0,h.t)("threads.banner.description")})]})]})}):null},j=function(){return(0,_.jsx)("div",{className:"bg-primary flex h-full items-center justify-center lg:h-[calc(100vh-64px)]",children:(0,_.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-2 md:w-[413px]",children:[(0,_.jsx)("div",{className:"p-2",children:(0,_.jsx)(v.JO,{type:"32-chat-threads",size:32})}),(0,_.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("chat_threads_empty_page.title")}),(0,_.jsx)(g.Z.BodyMd,{textAlign:"text-center",children:(0,h.t)("chat_threads_empty_page.description")})]})})},w=r(96486),O=r(97650),S=r(24185),P=r(50732),k=r(277),C=r(94281),N=r(54482),I=r(64088),A=r(17845),E=r(98819),D=r(40160),T=r(38503),L=r(9951),M=function(e){var t=e.space,r=e.chatRoomName,n=e.parentMessage,i=e.chatRoomUrl,a=(0,T.TC)().currentAppearance,s=n.id,l=t||{},c=l.emoji,u=l.custom_emoji_url,d=l.custom_emoji_dark_url;return(0,_.jsx)(D.rU,{to:(0,P.co)({url:i,hash:"message_".concat(s),search:"message_id=".concat(s)}),children:(0,_.jsx)(g.Z.LabelSm,{as:"div",color:"text-selector-active",weight:"semibold",children:(0,_.jsxs)("div",{className:"flex items-center",children:[(0,_.jsx)(L.S,{className:"!h-5 !w-auto",emoji:c,customEmojiUrl:u,customEmojiDarkUrl:d,appearance:a}),(0,_.jsx)("span",{className:o()("hover:text-selector-active hover:underline",{"ml-1":c||u}),children:(0,w.truncate)(r,{length:80})})]})})})},R=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(e){return e.parent_message.chat_thread_id}));return e.sort((function(e,t){return r?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}))},B=function(e){var t=e.isRenderedOnHeader,r=e.children;return t?(0,_.jsx)("div",{className:"border-primary bg-primary rounded-lg border shadow-sm","data-testid":"thread-item",children:r}):r};function U(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.chatRoomData,r=e.newBadgeIds,i=e.handleWhenThreadInViewPort,a=e.thread,s=e.space,l=e.setSelectedReply,c=e.isRenderedOnHeader,u=(0,S.k6)(),p=(0,k.q)().isMessaging,f=t.roomName,m=t.uuid,b=t.embedded_space,v=t.lesson,y=(s||{}).slug,x=a.parent_message,j=a.replies,D=a.current_participant,T=x.chat_room_uuid,L=x.thread_participants_preview,R=x.total_thread_participants_count,F=x.replies_count,z=x.chat_thread_id,V=x.embedded,q=x.id,Z=function(e){var t=e.isEmbedded,r=e.isMessaging,n=e.lesson,i=e.slug,o=e.chatRoomUuid;return t&&!r?n?P.H4.showLesson({spaceSlug:i,sectionId:n.courses_section_id,lessonId:n.id}):(0,P.kr)({spaceSlug:i}):(0,P.so)({uuid:o})}({isEmbedded:V,isMessaging:p,lesson:v,slug:y,chatRoomUuid:T}),G=v?v.name:function(e,t){var r="";return e.forEach((function(n,i){var o=i===e.length-1,a=i===e.length-2;if(1===t)r="".concat((0,h.t)("just")," ").concat(n.name);else if(a&&t<=3)r=r+n.name+" ".concat((0,h.t)("and")," ");else if(o&&t>3){var s=t-3;r=r+n.name+" ".concat((0,h.t)("and")," ")+s.toString()+(1===s?" ".concat((0,h.t)("other")):"".concat((0,h.t)("others")))}else o?r+=n.name:r=r+n.name+", "})),r}(L,R),W=F-j.length,H=W>0,Q=r.has(z),J=(0,n.useMemo)((function(){return(0,A.nR)([x].concat(U(j)),[])}),[x,j]),K=(0,d.gJ)({uuid:m,ids:J,enabled:J.length>0,shouldUpdateCache:!1}),$=K.isLoading,X=K.participants;return $?null:(0,_.jsx)(n.Fragment,{children:(0,_.jsxs)(B,{isRenderedOnHeader:c,children:[(0,_.jsxs)("div",{className:o()({"flex w-full flex-row items-start justify-between":c,"mt-7 flex w-full flex-row justify-between first:mt-0":!c}),children:[(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("div",{className:o()({"mt-7 flex w-full flex-row justify-between first:mt-0":!c,"flex flex-row items-center justify-between px-5 pt-5":c}),children:[(0,_.jsx)(M,{space:s,chatRoomName:f,parentMessage:x,chatRoomUrl:Z}),Q&&(0,_.jsx)("div",{className:"bg-v2-danger flex h-4 items-center rounded px-1",children:(0,_.jsx)(g.Z.LabelXxs,{color:"text-white",children:(0,h.t)("threads.new")})})]}),(0,_.jsx)("div",{className:o()({"mb-2":!c,"px-5":c}),children:(0,_.jsx)(g.Z.LabelXs,{color:"text-light",children:(0,w.truncate)(G,{length:60})})})]}),c&&(0,_.jsx)("div",{className:"pr-5 pt-5",children:(0,_.jsx)(C.T,{interactive:!1,content:(0,h.t)("header_v3.reply_to_thread"),children:(0,_.jsx)(N.h,{iconClassName:"text-default",className:"hover:!bg-tertiary focus-visible:!bg-tertiary",name:"20-reply-to-thread",ariaLabel:(0,h.t)("header_v3.reply_to_thread"),onClick:function(){u.push((0,P.co)({url:Z,hash:"message_".concat(q),search:"message_id=".concat(q)}))}})})})]}),(0,_.jsxs)("div",{className:o()({"border-primary bg-primary rounded-lg border shadow-sm":!c}),children:[(0,_.jsxs)("div",{className:o()({"py-1 first:rounded-t-lg":!c,"mt-2":c}),children:[(0,_.jsx)(I.R,{message:x,chatRoom:t,currentParticipant:D,participants:X,isParentMessage:!0,chatThreadsEnabled:!0,isRenderedOnHeader:c,chatRoomUrl:Z}),H&&(0,_.jsx)("button",{type:"submit",className:"ml-5 hover:underline",onClick:function(){return l({parentMessage:x,threadMessageId:j[0].id})},children:(0,_.jsx)(g.Z.LabelXs,{color:"text-selector-active",weight:"medium",children:W>1?(0,h.t)("threads.show_more_replies",{repliesCount:W}):(0,h.t)("threads.show_one_more_reply")})})]}),j.map((function(e){return(0,_.jsx)("div",{className:"border-primary py-1 first:rounded-t-lg last:rounded-b-lg",children:(0,_.jsx)(I.R,{message:e,chatRoom:t,currentParticipant:D,participants:X,chatThreadsEnabled:!0,isRenderedOnHeader:c,chatRoomUrl:Z})},e.id)})),(0,_.jsx)(O.df,{as:"div",onChange:function(e){return i(e,a)},children:(0,_.jsx)("div",{id:z,className:"invisible"})}),(0,_.jsx)(E.F,{chatRoom:t,parentMessageId:x.id,spaceId:null===b||void 0===b?void 0:b.id,userList:[],participants:X,messageBoxId:"threadsMessageTextBox"+String(x.id)})]})]})},x.id)},V=r(41793),q=function(e){var t=e.unreadChatThreadIds,r=e.isTopButton,n=void 0!==r&&r,i=(0,V.k)().shouldShowTrialBanner,a=t.length;return 0===a?null:(0,_.jsx)("div",{className:o()("sticky left-0 z-10 flex w-full items-center justify-center",{"top-20":n&&i,"top-[74px]":n&&!i,"bottom-6":!n}),children:(0,_.jsx)("button",{type:"submit",className:"bg-brand rounded-2xl px-2.5 py-1 text-xs font-semibold leading-5 text-white hover:opacity-90",onClick:function(){return e=t[0],void document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"});var e},children:1===a?(0,h.t)(n?"unread_thread_at_top":"unread_thread"):(0,h.t)(n?"unread_threads_at_top":"unread_threads",{unread_count:a})})})};function Z(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e){var t=e.isRenderedOnHeader,r=void 0!==t&&t,i=(0,u.N3)(),h=G((0,f.R)(c.i,!0),2),v=h[0],y=h[1],g=G((0,n.useState)({parentMessage:null,threadMessageId:null}),2),w=g[0],O=g[1],S=G((0,n.useState)(new Set),2),P=S[0],k=S[1],C=(0,d.rZ)().unreadChatThreadIds,N=(0,d.Mk)(),I=N.chatThreads,A=N.isLoading,E=N.hasNextPage,D=N.fetchNextPage,T=N.isChatThreadsAvailable,L=N.onEventReceive,M=N.updateChatThreads,B=(0,d.NF)().handleReactionFromWebsocket,U=(0,d.nw)({parentMessage:w.parentMessage,threadMessageId:w.threadMessageId,successCallback:function(){O({parentMessage:null,threadMessageId:null})}}).threadMessages,F=void 0===U?[]:U,V=(0,u.nT)(),W=V.records,H=V.isLoading;(0,n.useEffect)((function(){k((function(e){return new Set([].concat(Z(e),Z(C)))}))}),[C]),(0,n.useEffect)((function(){F.length>0&&M(F)}),[F]),(0,s.s)({channel:"Chats::CommunityMemberThreadsChannel",onMessageReceive:function(e){"newMessage"===e.event&&Q(e.json_message),L(e)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:Boolean(null===i||void 0===i?void 0:i.id)},[]),(0,s.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){"createReaction"!==e.event&&"destroyReaction"!==e.event||B(e)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:Boolean(null===i||void 0===i?void 0:i.id)},[null===i||void 0===i?void 0:i.id]);var Q=function(e){var t=e.chat_thread_id;if(t){var r=document.getElementById(t);(0,p.z)(r)&&!e.unread_flow&&(0,l.ex)(t)}},J=function(e,t){if(e){var r=t.parent_message;C.includes(r.chat_thread_id)&&(0,l.ex)(r.chat_thread_id)}};if((A||H)&&!T)return(0,_.jsx)(b.gi,{variant:r?"chat-threads-list-header":"chat-threads-list-page"});if(!T)return(0,_.jsx)(j,{});var K=function(e,t){var r=[],n=[];return e.forEach((function(e){var t=document.getElementById(e);t&&(t.getBoundingClientRect().top>0?n.push(e):r.push(e))})),n=R(n,t),{unreadThreadIdsAtTop:r=R(r,t,!0),unreadThreadIdsAtBottom:n}}(C,I),$=K.unreadThreadIdsAtTop,X=K.unreadThreadIdsAtBottom;return(0,_.jsxs)("div",{className:"w-full",id:"threads-scroll-view",children:[(0,_.jsx)(q,{unreadChatThreadIds:$,isTopButton:!0}),(0,_.jsx)(x,{shouldShowChatThreadsBanner:v&&!r,hideBanner:function(){return y(!1)}}),(0,_.jsx)(a.Z,{style:{overflow:"auto"},scrollThreshold:.8,next:D,hasMore:E,dataLength:I.length,className:o()({"mb-14 px-3 py-6 md:px-6 lg:mb-0":!r,"mb-4 flex flex-col gap-y-2":r}),scrollableTarget:r?"chat-threads-header":"panel",loader:(0,_.jsx)(m.a,{center:!0}),children:I.map((function(e){var t=e.parent_message,n=e.current_participant,i=e.chat_room,o=i.embedded_space_id,a=i.name,s=i.kind,l=i.lesson,c=t.chat_room_uuid,u=t.id,d=W.find((function(e){return e.id===o})),p={uuid:c,current_participant:n,chat_room_kind:s,embedded_space:d,roomName:d?d.name:a,lesson:l};return(0,_.jsx)(z,{chatRoomData:p,newBadgeIds:P,handleWhenThreadInViewPort:J,thread:e,space:d,setSelectedReply:O,isRenderedOnHeader:r},u)}))}),(0,_.jsx)(q,{unreadChatThreadIds:X})]})}},89826:(e,t,r)=>{"use strict";r.d(t,{hC:()=>n,F0:()=>i,Ro:()=>o});var n=function(e){window.setTimeout((function(){var t=document.querySelector(a(e));if(t){t.querySelector("input").setAttribute("checked",!0),t.classList.add("just-added"),t.parentNode.parentNode.classList.add("parent-just-added"),t.scrollIntoView()}}),500)},i=function(){var e=o();e&&n(e)},o=function(){return(window.location.hash||"").split("#comment_wrapper_")[1]},a=function(e){return"#".concat("comment_wrapper_").concat(e)}},5479:(e,t,r)=>{"use strict";r.d(t,{tV:()=>ne,B2:()=>ie,ZP:()=>oe});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(50732),l=r(43227),c=r(94184),u=r.n(c),d=r(10281),p=r(45578),f=r.n(p),m=r(64422),b=r(81786),h=r(81089),v=r(14360),y=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,o.forwardRef)((function(e,t){var r=e.space,n=e.post,l=e.parent_comment_id,c=e.communityMember,d=e.onNewComment,p=(0,o.useRef)(null),f=w((0,o.useState)(0),2),g=f[0],x=f[1],O=w((0,o.useState)(""),2),S=O[0],P=O[1],k=w((0,o.useState)(!1),2),C=k[0],N=k[1];if(null===n||void 0===n||!n.is_comments_enabled||!c||null===r||void 0===r||!r.id)return null;var I=u()("post__reply",{"reply-to-parent":!!l,"reply-to-post":!l}),A=function(){var e,t=(e=i().mark((function e(t){var r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),S&&!C){e.next=3;break}return e.abrupt("return");case 3:return N(!0),r={comment:{body:S,parent_comment_id:l,post_id:n.id}},e.next=7,(0,h.t5)((0,s.k3)(),{method:"POST",body:JSON.stringify(r)});case 7:if(!(o=e.sent).ok){e.next=17;break}return P(""),e.next=12,o.json();case 12:a=e.sent,x(g+1),d&&d(_(_({},a.comment),{},{html:a.comment_html})),window.loadOembed&&window.loadOembed(),N(!1);case 17:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,y.jsxs)("div",{role:"button",ref:p,className:I,onClick:function(){c||(window.location.href=(0,s.j)({params:{alert:"Hey, there! You need to sign in to write a comment."}}))},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&A(e)},tabIndex:0,children:[(0,y.jsx)(m.s,{src:c.avatar_url,name:c.name,size:"10"}),(0,y.jsxs)("form",{onSubmit:A,children:[(0,y.jsx)(v.Z,{ref:t,id:"comment-body-".concat(n.id),placeholder:(0,a.t)("write_a_comment"),name:"body",is_private_space:r.is_private,space_id:r.id,dataIsPrivateSpace:r.is_private,dataSpaceId:r.id,value:S,onChange:function(e){P(e.target.innerHTML)}},g),(0,y.jsx)("div",{className:"btn-post-reply absolute bottom-4 right-4",children:(0,y.jsx)(b.z,{variant:"primary",type:"submit",disabled:!S,children:(0,a.t)("comments.post")})})]})]})}));S.displayName="Form";var P=r(89826);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=E((0,o.useState)(e.comments||[]),2),r=t[0],n=t[1],c=E((0,o.useState)(e.parent_comment_id?0:1),2),u=c[0],d=c[1],p=!e.parent_comment||parseInt(e.parent_comment.replies_count,10)>r.length,m=E((0,o.useState)(p),2),b=m[0],h=m[1],v=E((0,o.useState)(!e.parent_comment_id&&b),2),g=v[0],_=v[1],x=E((0,o.useState)(!1),2),j=x[0],w=x[1];(0,o.useEffect)((function(){var t=function(){var t,o=(t=i().mark((function t(){var o,a,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=2;break}return t.abrupt("return");case 2:if(0!==u||!r.length){t.next=4;break}return t.abrupt("return");case 4:return o={page:u||1,per_page:10},e.parent_comment_id&&(o.parent_comment_id=e.parent_comment_id),t.next=10,fetch(s.av.comments.index({postId:e.post.id,params:o}));case 10:if(!(a=t.sent).ok){t.next=22;break}return t.next=14,a.json();case 14:l=t.sent,n(f()([].concat(I(r),I(l.records)),"id")),h(l.has_next_page),_(!1),e.onPageChange&&e.onPageChange(u),setTimeout(window.initialiseTippy,300),t.next=23;break;case 22:_(!1);case 23:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){A(o,n,i,a,s,"next",e)}function s(e){A(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();t()}),[u]),(0,o.useEffect)((function(){g||j||e.parent_comment_id||(w(!0),(0,P.F0)())}),[g,j,e.parent_comment_id]);var O=e.parent_comment_id?(0,a.t)("comments.list.show_more_replies"):(0,a.t)("comments.list.show_more_comments"),k=e.parent_comment_id?"load-more__replies":"btn btn-secondary load-more__comments";return(0,y.jsxs)(y.Fragment,{children:[r.map((function(t){return(0,y.jsx)(W,C(C({},e),{},{comment:t}),t.id)})),g&&(0,y.jsx)(l.m,{}),!g&&b&&(0,y.jsx)("div",{className:"load-more",children:(0,y.jsx)("a",{href:"#load-more",onClick:function(e){e.preventDefault(),d(u+1)},className:k,children:O})}),Boolean(null===e||void 0===e?void 0:e.showReplyForm)&&(0,y.jsx)(S,{post:e.post,space:e.space,communityMember:e.communityMember,parent_comment_id:e.parent_comment_id,onNewComment:function(e){n([].concat(I(r),[e]))},isPost:!0,ref:e.formRef})]})};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=function(e){return e.post.is_comments_enabled?(0,y.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null},U=["comment","communityMember","defaultShowReplyForm"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var W=function(e){var t=e.comment,r=e.communityMember,n=e.defaultShowReplyForm,i=void 0!==n&&n,a=G(e,U),l=(0,o.useRef)(null),c=window.location.href,p=(0,o.useCallback)((function(e){null!==e&&(0,d.J)(e)}),[c]),f=q((0,o.useState)(i),2),m=f[0],b=f[1],h=q((0,o.useState)(),2),v=h[0],g=h[1],_=(0,o.useRef)(null);(0,o.useEffect)((function(){if(l.current){var e=function(e){if(e.preventDefault(),r){b(!0);var t=e.currentTarget.dataset,n=t.sgid,i=t.content,o=t.name;n&&setTimeout((function(){if(_.current.focus(),_.current.shouldInsert(n)){var e=_.current.editorRef.current.editor.composition;e.attachments.forEach((function(t){e.removeAttachment(t)})),_.current.insertMention({sgid:n,content:i,name:o})}}),100)}else window.location.push((0,s.j)({params:{notice:I18n.t("comments.log_in_to_add_a_comment")}}))};return l.current.querySelectorAll('[data-action="toggle-reply-box"]').forEach((function(t){t.addEventListener("click",e)})),function(){l.current.querySelectorAll('[data-action="toggle-reply-box"]').forEach((function(t){t.removeEventListener("click",e)}))}}}),[l,b,m,v,_,_.current]);var x=u()("post--comment comment--".concat(t.id)),j="comment_wrapper_".concat(t.id);return(0,y.jsxs)("div",{ref:l,className:x,id:j,children:[(0,y.jsx)("div",{"data-controller":"trix-attachment-preview",children:(0,y.jsx)("div",{className:"text-dark",ref:p})}),Boolean(!(null!==t&&void 0!==t&&t.parent_comment_id))&&(0,y.jsx)("div",{className:"post__replies",children:(0,y.jsx)(B,z(z({},a),{},{communityMember:r,comments:t.replies,hasNextPage:t.replies_count>1,parent_comment_id:t.id,parent_comment:t,showReplyForm:m,onPageChange:g,formRef:_}))})]})},H=["post"],Q=["post","id"];function J(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var re=function(e){var t=e.post,r=e.id,n=te(e,Q),c=K((0,o.useState)(!0),2),u=c[0],d=c[1],p=K((0,o.useState)(null),2),f=p[0],m=p[1];return(0,o.useEffect)((function(){var e=function(){var e,n=(e=i().mark((function e(){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s.av.comments.commentHierarchy({postId:t.id,id:r}));case 2:if(!(n=e.sent).ok){e.next=13;break}return e.next=6,n.json();case 6:o=e.sent,m(o),d(!1),setTimeout(window.initialiseTippy,300),(0,P.hC)(r),e.next=14;break;case 13:d(!1);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){J(o,n,i,a,s,"next",e)}function s(e){J(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[]),u?(0,y.jsx)(l.m,{}):f?(0,y.jsx)(W,Y({comment:f,defaultShowReplyForm:!0,post:t,id:r},n),f.id):(0,y.jsx)("div",{className:"post__comment-not-found alert alert-warning",children:(0,a.t)("comments.hierarchy.not_found")})},ne=S,ie=B;const oe={Form:S,CommentsList:B,CommentHierarchy:function(e){var t=e.post,r=te(e,H);return null!==t&&void 0!==t&&t.is_comments_enabled?(0,y.jsx)(re,Y({post:t},r)):null}}},52228:(e,t,r)=>{"use strict";r.d(t,{zU:()=>$,iD:()=>J,gg:()=>X,kc:()=>ie});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(23560),l=r.n(s),c=r(88767),u=r(24185),d=r(34334),p=r(41609),f=r.n(p),m=r(98338),b=r(81786),h=r(10647),v=r(6298),y=r(67687),g=r(13288),_=r(69647),x=r(85893);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}var S=function(e){var t=O({},e);return(0,x.jsx)(y.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({translationRoot:"settings.branding_form",hideDescription:!0,hideBorder:!0,fullWidth:!0,tooltipText:(0,a.t)("settings.branding_form.".concat(t.name,"_tooltip"))},t))},P=["name"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var A=/^#[0-9A-Fa-f]{6}$/,E=function(e){var t=e.name,r=I(e,P);return(0,x.jsx)(S,C(C({name:t,variant:"extra-bottom-margin",rules:{required:(0,a.t)("settings.branding_form.prefs.brand_color_required"),pattern:{value:A,message:(0,a.t)("settings.branding_form.prefs.brand_color_invalid")}}},r),{},{children:(0,x.jsx)(y.l.ColorPicker,{name:t})}))};function D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var T=function(e){var t=e.label;return(0,x.jsx)(b.z,{type:"button",variant:"secondary",full:!0,children:t})};const L=function(){var e,t,r=(0,m.wh)(),n=r.currentCommunity,o=r.isLoading,s=ie().updateStepIfIncomplete,l=(0,_.p)(),u=l.success,p=l.error,j=(0,c.useMutation)((function(e){return d.$.update({community:e})}),{onSuccess:(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(I18n.t("settings.branding_form.saved_successfully")),e.next=3,s(J.customize_branding);case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)}),onError:function(e){p(e.message)}});if(o||f()(n))return(0,x.jsx)(g.a,{center:!0});var w={prefs:{brand_color:n.prefs.brand_color},logo:n.logo,icon:n.icon};return(0,x.jsxs)(y.l,{onSubmit:j.mutate,defaultValues:w,className:"branding-drawer__form",children:[(0,x.jsxs)("div",{className:"branding-drawer__container",children:[(0,x.jsx)(E,{name:"prefs.brand_color.light"}),(0,x.jsx)(S,{name:"logo",variant:"extra-bottom-margin",children:(0,x.jsx)("div",{className:"branding-cover-image branding-cover-image__logo",children:(0,x.jsx)(h.D,{alt:"",aspectRatio:4,changeImageText:(0,a.t)("replace"),customAddCoverBtn:(0,x.jsx)(T,{label:(0,a.t)("settings.branding_form.upload_logo")}),hideEmbedUrl:!0,hideUnsplash:!0,isCropEnabled:!1,name:"logo",showAddCoverBtn:!0,title:(0,a.t)("customize_theme.logo_tab.upload_community_logo")})})}),(0,x.jsx)(S,{name:"icon",variant:"extra-bottom-margin",children:(0,x.jsx)("div",{className:"branding-cover-image branding-cover-image__icon",children:(0,x.jsx)(h.D,{alt:"",aspectRatio:1,changeImageText:(0,a.t)("replace"),customAddCoverBtn:(0,x.jsx)(T,{label:(0,a.t)("settings.branding_form.upload_icon")}),hideEmbedUrl:!0,hideUnsplash:!0,name:"icon",showAddCoverBtn:!0,title:(0,a.t)("customize_theme.logo_tab.upload_community_icon")})})})]}),(0,x.jsx)(v.d.Footer,{sticky:!0,children:(0,x.jsx)(b.z,{type:"submit",variant:"primary",disabled:j.isLoading,full:!0,children:j.isLoading?I18n.t("saving"):I18n.t("save")})})]})};var M,R,B,U=r(11049),F=function(){var e=(0,U.dd)();return(0,x.jsx)(v.d,{noWrapperPadding:!0,fixedHeader:!0,maskClosable:!1,title:(0,a.t)("settings.branding_form.title"),open:e.visible,onClose:e.hide,children:(0,x.jsx)(L,{})})},z=U.gk.create((function(){return(0,x.jsx)(F,{})})),V=r(80971),q=r(39068),Z=r(79016),G=r(50732);function W(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){W(o,n,i,a,s,"next",e)}function s(e){W(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=Object.freeze({basic_group:"basic_group",setup_paywall_group:"setup_paywall_group",invite_member_group:"invite_member_group",engage_community_group:"engage_community_group",join_circle_community_group:"join_circle_community_group",profile_completed:"profile_completed",customize_branding:"customize_branding",setup_spaces_group:"setup_spaces_group",browse_examples:"browse_examples",update_notifications:"update_notifications",default_space:"default_space",confirm_community_access:"confirm_community_access",create_paywall:"create_paywall",customize_onboarding:"customize_onboarding",invite_first_member:"invite_first_member",onboarding_completed:"onboarding_completed",download_app:"download_app",customize_home:"customize_home",create_event:"create_event",first_week_action:"first_week_action",start_conversation:"start_conversation",engagement_means:"engagement_means",paywall_analytics_info:"paywall_analytics_info"}),K=new Set([J.customize_branding,J.profile_completed]),$=function(e){return K.has(e)},X=Object.freeze({basic_group:{label:(0,a.t)("community_onboarding.basics"),queryParam:"basic_group"},setup_paywall_group:{label:(0,a.t)("community_onboarding.setup_a_paywall"),queryParam:"setup_paywall_group"},invite_member_group:{label:(0,a.t)("community_onboarding.invite_your_first_members"),queryParam:"invite_member_group"}}),Y=Object.freeze((Q(M={},J.basic_group,[J.profile_completed,J.customize_branding,J.confirm_community_access]),Q(M,J.setup_spaces_group,[J.browse_examples,J.update_notifications,J.default_space]),Q(M,J.setup_paywall_group,[J.create_paywall]),Q(M,J.invite_member_group,[J.customize_onboarding,J.invite_first_member]),Q(M,J.engage_community_group,[J.download_app,J.customize_home,J.create_event,J.first_week_action,J.start_conversation,J.engagement_means]),Q(M,"join_circle_community_group",[J.join_circle_community_group]),M)),ee=Object.freeze((Q(R={},J.engage_community_group,null),Q(R,J.join_circle_community_group,(function(e){var t=e.isCommunityOnTrial;return window.location.href=t?"/settings/plans":"https://community.circle.so/home"})),Q(R,J.profile_completed,(function(e){var t=e.openEditProfile;return t&&t()})),Q(R,J.customize_branding,(function(e){var t=e.openCustomiseBrandingDrawer;return t&&t()})),Q(R,J.setup_spaces_group,null),Q(R,J.browse_examples,null),Q(R,J.default_space,null),Q(R,J.update_notifications,null),Q(R,J.confirm_community_access,null),Q(R,J.create_paywall,(function(){return window.location.href="/settings/paywalls"})),Q(R,J.customize_onboarding,(function(){return window.location.href="/settings/onboarding"})),Q(R,J.invite_first_member,null),Q(R,J.download_app,null),Q(R,J.customize_home,null),Q(R,J.create_event,null),Q(R,J.first_week_action,null),Q(R,J.start_conversation,null),Q(R,J.engagement_means,null),R)),te=function(e){return!!e.key},re=Object.freeze((Q(B={},J.basic_group,te),Q(B,J.setup_paywall_group,(function(e){return e.hasPaywalls})),Q(B,J.invite_member_group,te),Q(B,J.engage_community_group,te),Q(B,J.join_circle_community_group,(function(e){return!e.isCommunityOnTrial})),Q(B,J.profile_completed,te),Q(B,J.customize_branding,te),Q(B,J.setup_spaces_group,te),Q(B,J.browse_examples,te),Q(B,J.update_notifications,te),Q(B,J.default_space,te),Q(B,J.confirm_community_access,te),Q(B,J.create_paywall,(function(e){return e.hasPaywalls})),Q(B,J.customize_onboarding,te),Q(B,J.download_app,te),Q(B,J.customize_home,te),Q(B,J.create_event,te),Q(B,J.first_week_action,te),Q(B,J.start_conversation,te),Q(B,J.engagement_means,te),Q(B,J.invite_first_member,te),Q(B,J.onboarding_completed,te),B)),ne=function(e){for(var t=0,r=Object.keys(Y);t<r.length;t++){var n=r[t];if(Y[n].includes(e))return n}},ie=function(){var e=(0,m.wh)().currentCommunityMember,t=(0,V.g)().hasPaywalls,r=(0,_.p)(),n=r.success,s=r.error,p=(0,Z.E)().isCommunityOnTrial,f=(0,U.dd)(z),b=(0,u.k6)(),h=(0,u.TH)(),v=(0,c.useQuery)("onboarding",d.$.getOnboarding,{notifyOnChangeProps:"tracked",retry:2,enabled:!!(0,q.vb)(e)}),y=v.data,g=v.refetch,x=v.isLoading,j=(0,c.useMutation)((function(e){var t=e.step;return d.$.completeOnboardingStep({onboarding:Q({},t,!0)})})).mutateAsync,w=(0,o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return Y[e].reduce((function(e,r){return!!t[r]&&e}),!0)}),[y]),O=(0,o.useMemo)((function(){return{isCommunityOnTrial:p,openCustomiseBrandingDrawer:f.show,openEditProfile:(e=H(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.push(G.du.profile(h)),e.next=3,j({step:J.profile_completed});case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e}),[f.show,b,p,h,j]),S=(0,o.useCallback)(function(){var e=H(i().mark((function e(t){var r,n,o,a,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.step,n=t.skipMutation,o=void 0!==n&&n,a=ee[r],!o){e.next=6;break}l()(a)&&a(O),e.next=25;break;case 6:return c=!0,e.prev=7,u=ne(r),e.next=11,j({step:r});case 11:if(d=e.sent,!w(u,d)){e.next=15;break}return e.next=15,j({step:u});case 15:return l()(a)&&(c=!1,a(O)),e.abrupt("return",d);case 19:e.prev=19,e.t0=e.catch(7),s(e.t0.message);case 22:return e.prev=22,c&&g(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),[s,w,g,O,j]),P=(0,o.useCallback)((function(){return j({step:J.onboarding_completed},{onSuccess:function(){n((0,a.t)("onboarding_hide_success"))}})}),[j,n]),k=(0,o.useCallback)((function(e){return!!y&&re[e]({key:y[e],hasPaywalls:t,isCommunityOnTrial:p})}),[y,t,p]),C=(0,o.useMemo)((function(){return!!y&&!y[J.onboarding_completed]}),[y]),N=(0,o.useCallback)(function(){var e=H(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(t)||x){e.next=3;break}return e.next=3,S({step:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,k,S]);return{onboardingData:y,updateStep:S,isLoading:x,refetchOnboarding:g,isOnboardingAvailable:C,completeWholeOnboarding:P,isStepCompleted:k,updateStepIfIncomplete:N}}},71362:(e,t,r)=>{"use strict";r.d(t,{M:()=>f});var n=r(94184),i=r.n(n),o=r(36589),a=r(48464),s=r(85893),l=["isActive","href","name"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.isActive,r=void 0!==t&&t,n=e.href,c=void 0===n?"#":n,d=e.name,f=p(e,l),m=(0,o.I)().isV3Enabled;return(0,s.jsx)("a",{"data-testid":"community-switcher-link",className:i()("switcher__icon",{active:r,"hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150":m,"border-secondary":r&&m}),href:c,"aria-label":d,children:(0,s.jsx)(a.G,u({includeName:!1,name:d},f))})}},21339:(e,t,r)=>{"use strict";r.d(t,{H:()=>$});var n=r(67294),i=r(24185),o=r(36589),a=r(38503),s=r(25954),l=r(96685),c=r(95172),u=r(43333),d=r(47544),p=r(57526),f=function(e,t){var r=new URL(e);return r.searchParams.set("automatic_login","true"),r.searchParams.set("token",t),r.toString()},m=r(71362),b=r(85893),h=function(e){var t=e.community,r=e.token,i=e.index,o=(0,a.TC)().isDarkAppearance,s=t.id,l=t.is_current_community,h=t.root_url,v=t.name,y=t.brand_color,g=t.light_brand_color,_=t.dark_brand_color,x=t.community_member_id,j=t.dark_icon_url,w=t.light_icon_url,O=o?j||w:w||"",S=(0,d.f)(),P=S.newNotificationCount,k=S.fetchNewNotificationsCount,C=S.onNotificationEventReceive,N=(0,p.K)({community:t}).unreadChatCount;return(0,n.useEffect)((function(){k(s)}),[]),(0,u.I)(x,C),(0,c.y1)("alt+g+".concat(i+1),(function(){window.location.href=f(h,r)}),{enabled:i+1<9}),(0,b.jsx)(m.M,{isActive:l,href:f(h,r),icon_attachment_url:O,includeName:!1,brand_color:y,light_brand_color:g,dark_brand_color:_,name:v,notificationCount:l?0:P+N,index:i})},v=r(6758),y=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t,n=(0,l.U)(),i=n.communities,o=n.token,a=n.isLoadingCommunities,s=r||a;return(0,b.jsx)(v.b,{id:"community-switcher",isLoading:s,children:i.map((function(e,t){return(0,b.jsx)(h,{community:e,token:o,index:t},e.id)}))})},g=r(64687),_=r.n(g),x=r(99545),j=function(){var e=(0,x.dI)().item;return(0,b.jsx)(h,{community:e,token:"",index:0})},w=r(45393),O=r(11049),S=r(25362),P=r(86013),k=r(82177),C=r(94184),N=r.n(C),I=r(48464),A=r(54482),E=r(8246),D=r(59887);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.community,r=e.href,n=e.isDragDisabled,i=void 0!==n&&n,o=(0,a.TC)().isDarkAppearance,s=function(e){var t=(0,d.f)().newNotificationCount,r=(0,D.K$)({community:e}).unreadChatCount;return{notificationsCount:Number(t+r)}}(t),l=s.notificationsCount;return(0,b.jsxs)("a",{href:r,className:"hover:bg-tertiary focus:bg-tertiary flex items-center justify-between gap-x-1 rounded-xl p-1 transition-colors duration-75",children:[(0,b.jsx)(A.h,{name:"16-drag-handle",ariaLabel:(0,P.t)("community_switcher_drag_handle"),disabled:i,className:N()({"cursor-grab":!i,"cursor-grabbing opacity-50":i})}),(0,b.jsxs)("div",{className:"flex w-full items-center gap-3",children:[(0,b.jsx)("div",{className:N()("switcher__icon !m-0 flex items-center justify-center rounded-xl border-2 border-transparent",{"active border-secondary":t.is_current_community}),children:(0,b.jsx)(I.G,L(L({},t),{},{logo_attachment_url:void 0,icon_attachment_url:o?t.dark_icon_url:t.light_icon_url,shouldShowTooltip:!1,notificationCount:l}))}),(0,b.jsx)(E.Z.LabelMd,{weight:"medium",children:t.name})]})]},t.id)},B=function(){var e=(0,x.dI)().item;return(0,b.jsx)(R,{community:e,href:""})};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(){var e=(0,S.dd)(),t=U((0,n.useState)([]),2),r=t[0],i=t[1],o=(0,l.U)(),a=o.communities,s=o.token,c=o.isLoadingCommunities,u=o.isReorderingCommunities,d=o.onSortCommunities;return(0,n.useEffect)((function(){c||i(a)}),[a,c]),(0,b.jsxs)(k.u_,{isOpen:e.visible,onClose:e.hide,children:[(0,b.jsx)(k.u_.Overlay,{}),(0,b.jsxs)(k.u_.Content,{children:[(0,b.jsxs)(k.u_.Header,{children:[(0,b.jsx)(k.u_.Title,{children:(0,P.t)("my_communities")}),(0,b.jsx)(k.u_.HeaderActions,{children:(0,b.jsx)(k.u_.CloseButton,{onClick:e.hide})})]}),(0,b.jsx)(k.u_.Body,{className:"md:my-6 md:!px-6 md:!py-0",children:(0,b.jsxs)(x.cm,{items:a,lockedVerticalAxis:!0,onSort:function(e){i(e),d(e,{onError:function(){i(a)}})},shouldUseKeyboardSensor:!1,children:[(0,b.jsx)(x.cm.List,{className:"max-h-96",children:r.map((function(e,t){return(0,b.jsx)(x.cm.Item,{className:"min-h-[3rem] min-w-min",item:e,index:t,tabIndex:-1,disabled:u,children:(0,b.jsx)(R,{community:e,href:f(e.root_url,s),isDragDisabled:u},e.id)},e.id)}))}),(0,b.jsx)(x.cm.DragOverlay,{zIndex:1070,children:(0,b.jsx)(B,{})})]})})]})]})},V=O.gk.create((function(){return(0,b.jsx)(z,{})})),q=function(e){var t=e.community,r=e.sortedCommunities,n=void 0===r?[]:r,i=e.isReorderingCommunities,o=e.token,a=e.index;return(0,b.jsx)(x.cm.Item,{className:"min-w-min",item:t,index:a,tabIndex:-1,disabled:i||1===n.length,children:(0,b.jsx)(h,{community:t,token:o,index:a})},t.id)};function Z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t,i=G((0,n.useState)([]),2),o=i[0],a=i[1],s=(0,l.U)(),c=s.communities,u=s.token,d=s.isLoadingCommunities,p=s.isReorderingCommunities,f=s.onSortCommunities,m=(0,O.dd)(V),h=r||d,v=c.length>5,y=function(){var e,t=(e=_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.show();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Z(o,n,i,a,s,"next",e)}function s(e){Z(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),g=(0,n.useMemo)((function(){var e=o.findIndex((function(e){return e.is_current_community}));if(e>=5)return o[e]}),[o]);return(0,n.useEffect)((function(){d||a(c)}),[c,d]),(0,b.jsx)(w.w,{id:"community-switcher",isLoading:h,shouldShowShowMoreButton:v,onClickSeeMyCommunities:y,children:(0,b.jsxs)(x.cm,{items:o,lockedVerticalAxis:!0,onSort:function(e){a(e),f(e,{onError:function(){a(c)}})},shouldUseKeyboardSensor:!1,children:[(0,b.jsxs)(x.cm.List,{children:[o.slice(0,5).map((function(e,t){return(0,b.jsx)(q,{community:e,sortedCommunities:o,isReorderingCommunities:p,token:u,index:t},e.id)})),g&&(0,b.jsx)(q,{community:g,sortedCommunities:o,isReorderingCommunities:p,token:u,index:o.length-1},g.id)]}),(0,b.jsx)(x.cm.DragOverlay,{shouldRestrictToParent:!0,children:(0,b.jsx)(j,{})})]})})};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e){var t=(0,i.TH)().pathname,r=(0,o.I)().isV3Enabled,l=(0,s.H)().isSettingsPage,c=t.startsWith("/two_fa"),u=(0,a.wC)().display_community_switcher,d=t.startsWith("/features/visual-refresh");return(0,n.useEffect)((function(){l||d?document.body.classList.remove("has-community-switcher"):u&&document.body.classList.add("has-community-switcher")}),[t,l,u,d]),l||c||d?null:r?(0,b.jsx)(H,J({},e)):(0,b.jsx)(y,J({},e))}},6758:(e,t,r)=>{"use strict";r.d(t,{b:()=>g});var n=r(94184),i=r.n(n),o=r(62113),a=r(92663),s=r(41793),l=r(15124),c=r(30380),u=r(36589),d=r(85893),p=function(e){var t=e.children;return(0,u.I)().isV3Enabled?(0,d.jsx)(c.E,{className:"h-screen",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:t}):(0,d.jsx)(d.Fragment,{children:t})},f=r(519),m=["children","isLoading","className"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var g=function(e){var t=e.children,r=e.isLoading,n=void 0===r||r,c=e.className,u=y(e,m),b=(0,f._)(),v=b.presentationClasses,g=b.bodyClasses,_=b.bodyStyles,x=(0,o.f)(),j=(0,s.k)().isTrialBannerExists,w={"!top-24":j||x,"!top-36":x&&j};return(0,d.jsx)(p,{children:(0,d.jsxs)("div",h(h({"data-testid":"community-switcher-presentation",className:i()(c,v)},u),{},{children:[n&&(0,d.jsx)(a.r,{}),!n&&(0,d.jsxs)("div",{"data-testid":"community-switcher-presentation-body",className:i()(g,w),style:_,children:[t,(0,d.jsx)(l.U,{},"new-community-button")]})]}))})}},45393:(e,t,r)=>{"use strict";r.d(t,{w:()=>g});var n=r(94184),i=r.n(n),o=r(86013),a=r(94281),s=r(54482),l=r(92663),c=r(166),u=r(85893),d=function(){var e=(0,c.RE)().borderColor;return(0,u.jsx)("div",{style:{backgroundColor:e},className:i()("bg-overlay-dark h-px w-9 rounded-full")})},p=r(15124),f=r(519),m=["children","isLoading","shouldShowShowMoreButton","onClickSeeMyCommunities","className"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var g=function(e){var t=e.children,r=e.isLoading,n=void 0===r||r,c=e.shouldShowShowMoreButton,b=e.onClickSeeMyCommunities,v=void 0===b?function(){}:b,g=e.className,_=y(e,m),x=(0,f._)(),j=x.presentationClasses,w=x.bodyClasses,O=x.bodyStyles;return n?(0,u.jsx)(l.r,{}):(0,u.jsx)("div",h(h({"data-testid":"community-switcher-presentation",className:i()("w-18",g,j)},_),{},{children:(0,u.jsxs)("div",{"data-testid":"community-switcher-presentation-body",className:i()("flex flex-col items-center gap-4",w),style:O,children:[(0,u.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[t,c&&(0,u.jsx)(a.T,{content:(0,o.t)("community_switcher_see_my_communities"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,u.jsx)(s.h,{name:"20-menu-dots-horizontal",className:"hover:!bg-c-header-hover !rounded-lg",iconClassName:"!text-c-sidebar group-hover:!text-dark !w-6 !h-6",variant:"secondary",iconSize:20,buttonSize:32,ariaLabel:(0,o.t)("community_switcher_see_my_communities"),onClick:v})})]}),c&&(0,u.jsx)(d,{}),(0,u.jsx)(p.U,{})]})}))}},15124:(e,t,r)=>{"use strict";r.d(t,{U:()=>u});var n=r(86013),i=r(28524),o=r(50732),a=r(36589),s=r(18605),l=r(94281),c=r(85893),u=function(){var e=(0,i.N3)(),t=(0,a.I)().isV3Enabled,r=null===e||void 0===e?void 0:e.is_admin,u=(0,i.wh)().currentCommunity,d=window.location.href+"?pendo=0oguJmJrou1SpPPXRwwyzbd4Wlo",p=window.location.toString().includes("settings/plans"),f="Expired Trial"===(null===u||void 0===u?void 0:u.plan_status),m=r&&p&&f?d:(0,o.b$)();return t?(0,c.jsx)(l.T,{content:(0,n.t)("create_new_community"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,c.jsx)("a",{className:"hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg transition-colors duration-150",href:m,"aria-label":(0,n.t)("create_new_community"),children:(0,c.jsx)(s.JO,{type:"20-plus-v3",size:20})})}):(0,c.jsx)("div",{className:"relative mb-4 flex h-8 w-8",children:(0,c.jsx)(l.T,{content:(0,n.t)("create_new_community"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,c.jsx)("a",{className:"bg-c-header-hover text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar flex h-10 w-10 cursor-pointer items-center justify-center rounded-lg uppercase transition-colors duration-200",href:m,children:(0,c.jsx)(s.JO,{type:"plus-v2",size:16})})})})}},54697:(e,t,r)=>{"use strict";r.d(t,{H:()=>n.H,P:()=>a});var n=r(21339),i=r(38503),o=r(85893),a=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t;return(0,o.jsx)(i.e$,{backendProps:{community_theme_settings:{default_appearance:"light"}},children:(0,o.jsx)(n.H,{isLoadingAppData:r})})}},519:(e,t,r)=>{"use strict";r.d(t,{_:()=>p});var n=r(94184),i=r.n(n),o=r(24185),a=r(28934),s=r(36589),l=r(62113),c=r(38503),u=r(10140),d=r(166),p=function(e){var t=(0,a.W)(),r=(0,d.RE)(),n=(0,c.TC)(),p=Boolean(n.isDarkAppearance),f=(0,o.$B)({path:"/analytics",exact:!1}),m=Boolean(f),b=!p&&!t,h=p&&!t,v=(0,s.I)().isV3Enabled,y=(0,l.f)(),g=(0,u.a)(),_=i()("community__switcher",e),x=i()(_,"min-h-screen",{"!bg-c-switcher border-primary border-r":b,"!bg-c-switcher border-c-sidebar border-r":h}),j=v?x:_,w=i()("switcher__wrapper scrollbar-hide",{"!bg-c-switcher border-primary overflow-x-hidden border-r":b,"!bg-c-switcher border-c-sidebar overflow-hidden border-r":h,"!bg-c-sidebar overflow-hidden border-r":t,"!top-12":!m&&!y&&!g,"!top-24":!m&&y&&!g||!m&&!y&&g}),O=i()("min-h-screen p-4",{"!bg-c-sidebar overflow-hidden border-r":t,"!top-24":!m&&y&&!g});return{presentationClasses:j,bodyClasses:v?O:w,bodyStyles:r}}},87712:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var n=r(86013),i=r(85893),o={zIndex:1e3},a=function(e){var t=e.isThirdParty,r=void 0!==t&&t,a=r?(0,n.t)("cookie_warning.third_party_cookies_disabled"):(0,n.t)("cookie_warning.cookies_disabled"),s=r?(0,n.t)("cookie_warning.how_enable_third_party_cookies"):(0,n.t)("cookie_warning.how_enable_cookies");return(0,i.jsx)("div",{className:"h-full w-full",style:o,children:(0,i.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,i.jsxs)("div",{className:"alert-wrapper",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20","aria-hidden":!0,className:"alert-icon flex-no-shrink fill-current",children:(0,i.jsx)("path",{d:"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{children:a}),(0,i.jsx)("p",{children:(0,i.jsx)("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/auto",target:"_parent",children:s})})]})]})})})},s=function(){return document.cookie?null:window.location!==window.parent.location?(0,i.jsx)(a,{isThirdParty:!0}):(0,i.jsx)(a,{})}},46146:(e,t,r)=>{"use strict";r.d(t,{C:()=>c});var n=r(86013),i=r(95909),o=r(88326),a=r(85893),s=function(e){var t=e.data;return(0,a.jsx)("div",{children:(0,a.jsx)("pre",{children:JSON.stringify(t,null,2)})})},l="success",c=function(e){var t=e.debug_session,r=e.debug_session_logs;return(0,a.jsx)("div",{className:"custom-login-debug-sessions",children:(0,a.jsx)("div",{className:"custom-login-debug-sessions-content",children:(0,a.jsxs)(o.s,{children:[(0,a.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.experimental_feature_warning")})})}),(0,a.jsx)("br",{}),t.status===l&&(0,a.jsx)("div",{className:"alert alert-success",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.success_sso")})})}),t.status!==l&&(0,a.jsx)("div",{className:"alert alert-error",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.fail_sso")})})}),(0,a.jsx)("br",{}),(0,a.jsx)("h3",{children:(0,n.t)("custom_logins.debug_session_logs.logs")}),(0,a.jsx)("br",{}),r.map((function(e){var t=(0,n.t)("custom_logins.debug_session_logs.".concat(e.step)),r=e.status===l?null:t;return(0,a.jsx)(i.U,{defaultActiveItemTitle:r,children:(0,a.jsx)(i.U.Item,{title:t,showIcon:!0,isDone:e.status===l,children:e.context.map((function(e,t){return(0,a.jsx)(s,{data:e},t)}))})},e)}))]})})})}},71094:(e,t,r)=>{"use strict";r.d(t,{u:()=>Bs});var n=r(64687),i=r.n(n),o=r(86013),a=r.n(o),s=r(23560),l=r.n(s),c=r(88767),u=r(24185),d=r(98338),p=r(94184),f=r.n(p),m=r(96486),b=r(67294),h=r(40160),v=r(87536),y=r(67397),g=r(90789),_=r(78270),x=r(67687),j=r(85893),w=function(e){var t=e.space,r=e.onChange,n=(0,v.Gc)(),i=n.watch,a=n.setValue,s=n.formState.dirtyFields,l=i("visible_tabs"),c=i("display_view"),u=i("show_right_sidebar"),d=i("hide_member_sidebar"),p="cards"===c,f=(0,g.H3)(t)&&!p,m=!p,h=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,b.useEffect)((function(){("show_right_sidebar"in s||"hide_member_sidebar"in s||"visible_tabs"in s||"display_view"in s)&&r(!0)}),[s.visible_tabs,s.display_view,s.show_right_sidebar,s.hide_member_sidebar]),(0,b.useEffect)((function(){null!==l&&void 0!==l&&l.includes("members")?a("hide_member_sidebar",!0):a("hide_member_sidebar",!1)}),[t]),(0,b.useEffect)((function(){f&&a("visible_tabs",d?["posts","members"]:["posts"])}),[d,f]);var w=(0,g.qy)(t),O=(0,g.Ds)(t),S=w?["posts"]:[],P=h||O,k=(0,j.jsx)(x.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.RadioGroup,{fullWidth:!1,labelOutside:!P,options:h?(0,y.Jr)({excludedOptions:S,postType:t.post_type}):(0,y.Nn)({excludedOptions:S,postType:t.post_type}),optionAlignment:P?"row":"center",className:"!grid !grid-cols-1 sm:!grid sm:!grid-cols-3"})});return w||O?(0,j.jsx)("div",{children:k}):(0,j.jsxs)("div",{children:[k,m&&(0,j.jsx)(x.l.Item,{name:"show_right_sidebar",label:(0,o.t)("spaces.form.edit.customize.right_sidebar"),className:"!pb-0",inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})}),f?(0,j.jsx)(x.l.Item,{name:"hide_member_sidebar",label:(0,o.t)("spaces.form.edit.customize.show_sidebar_members_block"),className:"!pb-0",isDisabled:!u,inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{disabled:!u,variant:"small"})}):null]})},O=function(e){var t=e.onChange,r=e.space,n=e.isEventSpaceCalendarViewEnabled,i=(0,v.Gc)().formState.dirtyFields,a=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,b.useEffect)((function(){"display_view"in i&&t(!0)}),[i.display_view]);var s=n?[]:["calendar"];return(0,j.jsx)(x.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.RadioGroup,{variant:"box",name:"display_view",fullWidth:!1,labelOutside:!a,options:a?(0,y.Jr)({excludedOptions:s,postType:r.post_type}):(0,y.Nn)({excludedOptions:s,postType:r.post_type}),optionAlignment:a?"row":"center",className:f()("!grid",n?"!grid-cols-1 !gap-x-6 sm:!grid-cols-3":"!grid-cols-2 !gap-x-7")})})},S=r(35192),P=r(82177),k=function(e){var t=e.onChange,r=e.space,n=(0,d.e2)().records,i=(0,P.UV)().contentPortalElement,s=(0,v.Gc)().formState.dirtyFields;return(0,b.useEffect)((function(){("space_group_id"in s||"name"in s||"emoji"in s||"custom_emoji"in s||"event_auto_rsvp_enabled"in s||"chat_room_description"in s||"show_next_event"in s)&&t(!0)}),[s.space_group_id,s.name,s.emoji,s.custom_emoji,s.chat_room_description,s.event_auto_rsvp_enabled,s.show_next_event]),(0,j.jsxs)("div",{className:"grid grid-cols-1 gap-0 md:mt-4 md:gap-4",children:[(0,j.jsx)(x.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:(0,o.t)("spaces.form.edit.name_required"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.Input,{prefix:(0,j.jsx)(x.l.EmojiPickerV3Wrapper,{record:r})})}),(0,j.jsx)(x.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:(0,o.t)("spaces.form.edit.choose_space_group"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,j.jsx)(S.V,{variant:"form-input",spaceGroups:n,name:"space_group_id",appendTo:i})}),(0,g.Ug)(r)&&(0,j.jsx)(x.l.Item,{name:"chat_room_description",label:(0,o.t)("spaces.form.edit.customize.add_description"),placeholder:(0,o.t)("spaces.form.edit.customize.description_placeholder"),hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.TextArea,{})}),(0,g.V5)(r)&&(0,j.jsxs)("div",{children:[(0,j.jsx)(x.l.Item,{name:"event_auto_rsvp_enabled",label:a().t("spaces.form.event_auto_rsvp_enabled"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})}),(0,j.jsx)(x.l.Item,{name:"show_next_event",label:a().t("spaces.form.show_next_event"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})})]})]})},C=r(31611),N=function(e){var t=e.className,r=e.children,n=e.id;return(0,j.jsx)(C.Ar.Main,{id:n,className:"!bg-primary",children:(0,j.jsx)("div",{className:f()("mx-auto max-w-[45rem] p-0 md:px-0 lg:py-8",t),children:r})})},I=r(74666),A=r(36589),E=r(48088),D=function(e){var t=e.space,r=e.onChange,n=(0,A.I)().isV3Enabled,i=(0,C.eW)().setIsSaveButtonDisabled,a=((0,d.wh)().currentCommunitySettings||{}).space_directory_enabled,s=(0,v.Gc)(),l=s.formState.dirtyFields,c=s.watch,u=s.setValue,p=c("cover_image"),f=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,b.useEffect)((function(){u("cover_image_visible",!!p)}),[p,u]);var m=!((0,g.Ug)(t)||(0,g.EG)(t)||(0,g.qy)(t));return(0,b.useEffect)((function(){("cover_image_visible"in l||"thumbnail_image"in l)&&r(!0)}),[l.cover_image_visible,l.thumbnail_image]),(0,j.jsxs)("div",{children:[m&&(0,j.jsx)(x.l.Item,{inline:!f,hideBorder:!0,label:(0,o.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:n?(0,o.t)("spaces.form.edit.customize.cover_image_description_v3"):(0,o.t)("spaces.form.edit.customize.cover_image_description"),className:"gap-x-6",children:(0,j.jsx)(E.a,{name:"cover_image",aspectRatio:n?I.pI.COVER_V3:43/9,onProcessing:function(e){return i(!!e)}})}),(!(0,g.Ug)(t)&&!(0,g.qy)(t)||a)&&(0,j.jsx)(x.l.Item,{inline:!f,hideBorder:!0,label:(0,o.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,g.EG)(t)?(0,o.t)("spaces.form.edit.customize.course_thumbnail_image_description"):(0,o.t)("spaces.form.edit.customize.thumbnail_image_description"),className:"gap-x-6",children:(0,j.jsx)(E.a,{name:"thumbnail_image",aspectRatio:16/9,onProcessing:function(e){return i(!!e)}})})]})};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=function(e){return[].concat(R("all"==e.default_notification_setting?["default_notification_setting"]:[]),R("all"==e.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),R("all"==e.default_mobile_notification_setting?["default_mobile_notification_setting"]:[]))},F=function(e){return e.all_notifications_enabled?"all":e.mention_notifications_enabled?"mentions":e.notifications_off?"never":void 0},z=function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(L(L(L({},(0,m.omit)(i,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","course_setting","require_topic_selection"])),{},{notification_type:"chat"===i.post_type?F(i):U(i),show_right_sidebar:!i.hide_right_sidebar,allow_members_to_create_posts:!i.is_post_disabled,allow_members_to_add_others:!i.prevent_members_from_adding_others,allow_post_title:!i.hide_post_settings,allow_cover_images:!i.disable_member_post_covers,show_sorting:!i.hide_sorting,show_to_logged_out_visitors:!i.is_hidden,visible_tabs:(t=i,r=t.visible_tabs,n=void 0===r?{}:r,Object.keys(n).filter((function(e){return n[e]}))),locked_page_description:null===(e=i.locked_page_description)||void 0===e?void 0:e.trix_html},function(e){return(0,g.EG)(e)?{course_setting_attributes:e.course_setting}:{}}(i)),V(i)),{},{topics:i.topics_order,require_topic_selection:i.require_topic_selection})},V=function(e){var t={};return e.logged_in_space_welcome_banner&&(t={logged_in_title:e.logged_in_space_welcome_banner.title,logged_in_description:L({},e.logged_in_space_welcome_banner.description||{}),logged_in_cover:e.logged_in_space_welcome_banner.cover,logged_in_banner_enabled:e.logged_in_space_welcome_banner.banner_enabled,allow_close:e.logged_in_space_welcome_banner.allow_close,logged_in_media_is_video:e.logged_in_space_welcome_banner.is_video}),e.logged_out_space_welcome_banner&&(t=L(L({},t),{},{logged_out_title:e.logged_out_space_welcome_banner.title,logged_out_description:L({},e.logged_out_space_welcome_banner.description||{}),logged_out_cover:e.logged_out_space_welcome_banner.cover,logged_out_banner_enabled:e.logged_out_space_welcome_banner.banner_enabled,logged_out_media_is_video:e.logged_out_space_welcome_banner.is_video})),t},q=["onSubmit","space","children"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Q=function(e){var t=e.onSubmit,r=e.space,n=e.children,i=H(e,q),o=(0,b.useMemo)((function(){return r&&z(r)}),[r]);return(0,j.jsx)(x.l,G(G({id:"edit-space-form",onSubmit:t,defaultValues:o,className:"flex h-full flex-col overflow-auto",formClassName:"flex flex-col h-full overflow-auto"},i),{},{children:n}))},J=r(4977),K=r(23529),$=function(e){var t=e.onChange,r=e.sortable,n=void 0===r||r,i=(0,v.Gc)().formState.dirtyFields;return(0,b.useEffect)((function(){"topics"in i&&t(!0)}),[i,i.topics]),(0,j.jsx)(K.w,{containerClassName:"bg-primary border-primary rounded-md border",sortable:n,creatable:!0,maxTopicsAllowed:J.tt,name:"topics"})},X=r(16935),Y=r(8246),ee=r(62620),te=r(69647),re=r(6952),ne=r(47094),ie=r(50732),oe=r(3951),ae=r(1881),se=r(44032),le=r(31280),ce=r(81625),ue=r(52995);function de(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){de(o,n,i,a,s,"next",e)}function s(e){de(o,n,i,a,s,"throw",e)}a(void 0)}))}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var be="customize_space.welcome_banner",he=function(e){var t=e.isLoggedIn,r=e.setDirty,n=e.onChange,a=e.spaceId,s=(0,te.p)(),l="".concat(t?"logged_in":"logged_out","_title"),c="".concat(t?"logged_in":"logged_out","_cover"),u="".concat(t?"logged_in":"logged_out","_description"),d=(0,oe.m)().reSetWelcomeBannerPreference,p=fe((0,ae.k)(!1),2),h=p[0],y=p[1],g=(0,v.Gc)(),_=g.formState.dirtyFields,w=g.setValue,O=g.getValues,S=(0,v.qo)({name:"logged_in_banner_enabled"}),P=(0,v.qo)({name:"logged_out_banner_enabled"}),k=O(t?"logged_in_media_is_video":"logged_out_media_is_video"),C=(0,v.qo)({name:u}),N=(0,v.qo)({name:l}),A=(0,v.qo)({name:c}),E=t?S:P,D=t?"logged_in_banner_enabled":"logged_out_banner_enabled",T=t?"enable_for_logged_in_members":"enable_for_logged_out_members";return(0,b.useEffect)((function(){(l in _||u in _)&&n(!0)}),[_[l],_[u]]),(0,b.useEffect)((function(){var e=function(e){var t=(e||{}).body;if(!t)return!0;var r=(t||{}).content;return!r||!r.some((function(e){if("paragraph"===e.type&&e.content)return!0}))}(C)&&(0,m.isEmpty)(N)&&(0,m.isEmpty)(A);t?r("loggedIn",!(!S||!e)):r("loggedOut",!(!P||!e))}),[null===C||void 0===C?void 0:C.body,t,S,P,N,A]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ue.sI,{label:(0,o.t)([be,T]),field:D,value:E,onChange:function(){w(D,!E)},className:"mb-2 w-full text-lg font-bold",variant:"large"}),(0,j.jsxs)("div",{className:f()("mx-auto mt-4 flex h-full flex-col",{"cursor-not-allowed opacity-20":!E}),children:[(0,j.jsx)(ne.y,{title:(0,o.t)([be,"cover_image"]),name:c,description:(0,o.t)([be,"cover_image_description"]),aspectRatio:I.pI.OPEN_GRAPH,disabled:!E,removeAttachmentsPath:ie.av.spaces.destroy_welcome_banner_cover({id:a}),removeAttachmentsParams:{banner_type:t?"logged_in_space_welcome_banner":"logged_out_space_welcome_banner"},isVideo:k,isSpaceWelcomeBanner:!0}),(0,j.jsx)("div",{className:"-mt-1",children:(0,j.jsx)(x.l.Item,{name:l,hideDescription:!0,translationRoot:be,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,j.jsx)(x.l.Input,{disabled:!E})})}),(0,j.jsx)("div",{className:"-mt-1",children:(0,j.jsx)(x.l.Item,{name:u,hideDescription:!0,translationRoot:be,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,j.jsxs)("div",{className:"border-primary active:border-darkest focus-within:border-darkest h-full max-h-[400px] overflow-y-auto rounded-lg border px-4 py-3",children:[(0,j.jsx)(le.$,{placeholder:(0,o.t)("customize_space.welcome_banner.write_a_description"),name:"".concat(u,".body"),toolbars:[{portalId:"welcome-banner-description-toolbar",component:ce.o}],className:"max-h-[350px] min-h-[100px] overflow-y-auto",editorClassName:"h-full",sgidToObjectMap:(null===C||void 0===C?void 0:C.sgids_to_object_map)||{},disabledExtensions:["poll","ai_copilot","mention","cta"]}),(0,j.jsx)("div",{id:"welcome-banner-description-toolbar"})]})})}),t&&(0,j.jsx)("div",{className:"flex flex-col",children:(0,j.jsx)(x.l.Item,{name:"allow_close",description:(0,j.jsxs)("div",{className:"pr-8",children:[(0,o.t)([be,"allow_close_description"]),(0,j.jsx)("button",{type:"button",onClick:function(){E&&y()},className:"ml-1 cursor-pointer text-sm underline hover:opacity-80",children:(0,o.t)([be,"reset_preference_title"])})]}),translationRoot:be,variant:"default",inlineReverse:!0,hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,className:"!items-start",children:(0,j.jsx)(x.l.ToggleSwitch,{name:"allow_close",variant:"small",wrapperClass:"!mt-1"})})}),(0,j.jsx)(se.c,{isOpen:h,onClose:y,onConfirm:pe(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a);case 2:y(),s.success((0,o.t)("space_welcome_banner.preferences_update_success"));case 4:case"end":return e.stop()}}),e)}))),confirmText:(0,o.t)("confirm"),title:(0,o.t)([be,"reset_preference_title"]),children:(0,j.jsx)("div",{className:"mb-6",children:(0,o.t)([be,"reset_preference_description"])})})]})]})},ve={logged_in:(0,o.t)("customize_space.welcome_banner.tabs.members"),logged_out:(0,o.t)("customize_space.welcome_banner.tabs.non_members")},ye=function(e){var t=e.setDirty,r=e.onChange,n=e.space,i=(0,v.qo)({name:"visibility"});return"calendar"===(0,v.qo)({name:"display_view"})?(0,j.jsx)(Y.Z.BodySm,{children:(0,o.t)("customize_space.welcome_banner.info")}):"open"!==i?(0,j.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,j.jsx)(he,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})}):(0,j.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,j.jsx)("section",{className:"w-full flex-1",children:(0,j.jsxs)(re.O.Group,{children:[(0,j.jsxs)(re.O.List,{children:[(0,j.jsx)(re.O,{type:"button",children:ve.logged_in}),(0,j.jsx)(re.O,{type:"button",children:ve.logged_out})]}),(0,j.jsxs)(re.O.Panels,{className:"-mx-1.5",children:[(0,j.jsx)(re.O.Panel,{className:"px-2 py-6",children:(0,j.jsx)(he,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})}),(0,j.jsx)(re.O.Panel,{className:"px-2 py-6",children:(0,j.jsx)(he,{isLoggedIn:!1,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})})]})]})})})},ge=function(e){var t=e.onChange,r=(0,v.Gc)().formState.dirtyFields;return(0,b.useEffect)((function(){"require_topic_selection"in r&&t(!0)}),[r.require_topic_selection]),(0,j.jsx)("div",{children:(0,j.jsx)(x.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.topics.require_topic_selection"),tooltipText:(0,o.t)("spaces.form.edit.topics.require_topic_selection_tooltip"),name:"require_topic_selection",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{name:"require_topic_selection",variant:"small"})})})},_e=r(18605),xe=function(e){var t=e.title,r=e.children;return(0,j.jsxs)(Y.Z.BodySm,{color:"text-default",textAlign:"left",children:[(0,j.jsxs)("span",{className:"font-medium",children:[t,": "]}),r]})},je=function(e){var t=e.accessDesc,r=e.visibilityDesc,n=e.isAccessOpen,i=void 0!==n&&n,a=e.isVisibilityOpen,s=void 0===a||a;return(0,j.jsxs)("div",{className:"mt-3 grid gap-2 text-left text-sm",style:{gridTemplateColumns:"min-content auto"},children:[(0,j.jsx)(_e.JO,{type:i?"16-lock-unlocked":"16-lock",size:16,className:"text-default mt-px !self-start"}),(0,j.jsx)(xe,{title:(0,o.t)("customize_space.access"),children:t}),(0,j.jsx)(_e.JO,{type:s?"16-eye-visible":"16-eye-hidden",size:16,className:"text-default mt-px !self-start"}),(0,j.jsx)(xe,{title:(0,o.t)("customize_space.visibility"),children:r})]})},we=[{label:(0,o.t)("spaces.form.create.visibility_types.open"),value:"open",description:(0,j.jsx)(je,{accessDesc:(0,o.t)("customize_space.access_form.open_access"),visibilityDesc:(0,o.t)("customize_space.access_form.open_visibility"),isAccessOpen:!0})},{label:(0,o.t)("spaces.form.create.visibility_types.private"),value:"private",description:(0,j.jsx)(je,{accessDesc:(0,o.t)("customize_space.access_form.private_access"),visibilityDesc:(0,o.t)("customize_space.access_form.private_visibility")})},{label:(0,o.t)("spaces.form.create.visibility_types.secret"),value:"secret",description:(0,j.jsx)(je,{accessDesc:(0,o.t)("customize_space.access_form.secret_access"),visibilityDesc:(0,o.t)("customize_space.access_form.secret_visibility")})}],Oe=function(e){var t=e.onChange,r=(0,v.Gc)().formState.dirtyFields,n="private"===(0,v.qo)({name:"visibility"}),i=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,b.useEffect)((function(){"visibility"in r&&t(!0)}),[r.visibility]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.l.Item,{name:"visibility",hideDescription:!0,rules:{required:(0,o.t)("spaces.form.create.choose_visibility"),maxLength:255},hideBorder:!0,hideLabel:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.RadioGroup,{variant:i?"box":"radio",name:"visibility",options:we,optionAlignment:"left"})}),n&&(0,j.jsx)(x.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.customize.show_lock_icon_to_non_members"),tooltipText:(0,o.t)("spaces.form.edit.customize.show_lock_icon_to_non_members_description"),name:"show_lock_icon_for_non_members",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})})]})},Se=r(96629),Pe=function(){return(0,j.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,j.jsx)(Se.b,{type:"info",title:(0,o.t)("customize_space.draft_warning.title"),description:(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,j.jsx)(Y.Z.BodySm,{children:(0,o.t)("customize_space.draft_warning.description")}),(0,j.jsx)(je,{accessDesc:(0,o.t)("customize_space.draft_warning.access"),visibilityDesc:(0,o.t)("customize_space.draft_warning.visibility"),isVisibilityOpen:!1})]})}),(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("customize_space.draft_warning.form_title")}),(0,j.jsxs)(Y.Z.BodySm,{children:[(0,o.t)("customize_space.draft_warning.form_description"),":"]})]})]})},ke=function(e){var t=e.space,r=e.onChange,n=(0,g.EG)(t)&&(0,g.H)(t);return(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.access"),dataTestId:"customize-space-access",variant:"fullScreen",children:(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[n&&(0,j.jsx)(Pe,{}),(0,j.jsx)(Oe,{onChange:r})]})})},Ce=function(e){var t=e.isOpen,r=e.onClose,n=e.onConfirm,i=e.spaceType,a=(0,v.qo)({name:"visibility"}),s=(0,v.Gc)().resetField;return(0,j.jsxs)(se.c,{isOpen:t,title:(0,o.t)("spaces.form.create.change_draft_confirmation.title"),onClose:r,onCancel:function(){s("visibility"),r()},onConfirm:n,confirmVariant:"primary",confirmText:(0,o.t)("spaces.form.create.change_draft_confirmation.confirm_button",{spaceType:i}),children:[(0,o.t)("spaces.form.create.change_draft_confirmation.".concat(a))," ",(0,o.t)("spaces.form.create.change_draft_confirmation.wont_be_able_to_change")]})};function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ae(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Re=function(e){var t=e.space,r=(0,b.useRef)(),n=(0,te.p)(),a=Le((0,b.useState)({loggedIn:!1,loggedOut:!1}),2),s=a[0],c=a[1],u=(0,X.mx)(),p=u.dirtyForms,f=u.setDirtyForms,m=(0,C.eW)(),v=m.onSave,y=m.onExit,_=(0,g.Ug)(t),x=(0,g.qy)(t),S=(0,d.wh)().currentCommunitySettings||{},P=S.space_directory_enabled,I=S.space_description_enabled,A=S.topics_enabled,E=S.course_topics_enabled,T=S.event_space_calendar_view_enabled,L=((0,g.H3)(t)||(0,g.Ds)(t))&&A,M=(0,g.EG)(t)&&E,R=L||(0,g.V5)(t)||M,B=function(e){var t=Ne((0,ae.k)(!1),2),r=t[0],n=t[1],i=Ne((0,ae.k)(!1),2),o=i[0],a=i[1];return(0,b.useEffect)((function(){o&&l()(e)&&e()}),[o,e]),{shouldShowDraftAccessConfirmaModal:r,toggleDraftAccessConfirmaModal:n,isDraftAccessConfirmed:o,toggleIsDraftAccessConfirmed:a}}((0,b.useCallback)((function(){null===r||void 0===r||r.current()}),[r])),U=B.shouldShowDraftAccessConfirmaModal,F=B.toggleDraftAccessConfirmaModal,z=B.isDraftAccessConfirmed,V=B.toggleIsDraftAccessConfirmed,q=function(e){f(De(De({},p),{},{customize:De(De({},p.customize),{},Te({},e,!0))}))},Z=function(){var e,r=(e=i().mark((function e(r,a){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.visibility,!s.loggedIn&&!s.loggedOut){e.next=4;break}return n.error((0,o.t)("landing_page.settings.welcome_banner.errors.blank_welcome_banner")),e.abrupt("return");case 4:if(!(0,g.H)(t)||"draft"===c||z){e.next=8;break}return F(),e.abrupt("return",!1);case 8:return e.next=10,v({data:r});case 10:l()(a)&&a(r,{keepValues:!0}),f(X.Wm),y();case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ae(o,n,i,a,s,"next",e)}function s(e){Ae(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),G=(_||x)&&!P;return(0,j.jsx)(N,{children:(0,j.jsxs)(Q,{onSubmit:function(e,t){var r=t.reset;return Z(e,r)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-8 md:gap-12",triggerFormSubmitRef:r,children:[(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.general"),dataTestId:"customize-space-general",variant:"fullScreen",isFirstChild:!0,children:(0,j.jsx)(k,{onChange:function(){return q("general")},space:t})}),(0,j.jsx)(ke,{space:t,onChange:function(){return q("access")}}),((0,g.H3)(t)||x||(0,g.Ds)(t))&&(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,j.jsx)("div",{className:"h-full",children:(0,j.jsx)(w,{space:t,onChange:function(){return q("customizeLayout")}})})}),R&&(0,j.jsxs)(ee.q,{title:M?(0,o.t)("customize_space.course_topics.title"):(0,o.t)("customize_space.topics.title"),dataTestId:"customize-space-topics",variant:"fullScreen",isFirstChild:!0,children:[(0,j.jsx)("div",{className:"my-1 md:mb-4",children:(0,j.jsxs)(Y.Z.BodyMd,{color:"text-light",children:[M?(0,o.t)("customize_space.course_topics.description"):(0,o.t)("customize_space.topics.description"),(0,j.jsx)(h.OL,{onClick:y,to:"/settings/topics",className:"text-light hover:text-dark ml-0.5",children:(0,j.jsx)("u",{children:M?(0,o.t)("customize_space.course_topics.manage_topics"):(0,o.t)("customize_space.topics.manage_topics")})})]})}),(0,j.jsx)($,{spaceId:t.id,onChange:function(){return q("topics")},sortable:!M}),!M&&(0,j.jsx)(ge,{onChange:function(){return q("topics")}})]}),(0,g.V5)(t)&&(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,j.jsx)("div",{className:"h-full",children:(0,j.jsx)(O,{space:t,isEventSpaceCalendarViewEnabled:T,onChange:function(){return q("customizeLayout")}})})}),!G&&(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.space_images"),dataTestId:"customize-space-images",variant:"fullScreen",children:(0,j.jsx)(D,{space:t,onChange:function(){return q("images")}})}),I&&(0,g.V5)(t)&&(0,j.jsx)("div",{id:"space-welcome-banner",children:(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.welcome_banner.title"),dataTestId:"customize-space-welcome-banner",variant:"fullScreen",children:(0,j.jsx)(ye,{setDirty:function(e,t){c(De(De({},s),{},Te({},e,t)))},onChange:function(){return q("general")},space:t})})}),(0,j.jsx)(Ce,{isOpen:U,onClose:F,onConfirm:function(){F(),V()},onCancel:function(){q("access")},spaceType:(0,g.EG)(t)?"Course":"Space"})]})})},Be=r(34334),Ue=r(31304),Fe=r.n(Ue),ze=r(10647),Ve=r(74338),qe=[{name:"slug",label:(0,o.t)("spaces.form.edit.options.seo.slug"),description:(0,o.t)("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return Fe()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:(0,o.t)("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:(0,o.t)("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:(0,o.t)("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:(0,o.t)("spaces.form.edit.options.seo.opengraph_description")}],Ze=function(e){var t=e.onChange,r=e.setImageToDelete,n=(0,v.Gc)(),i=n.getValues,a=n.formState.dirtyFields;return(0,b.useEffect)((function(){("slug"in a||"meta_tag_attributes"in a)&&t(!0)}),[a.slug,a.meta_tag_attributes]),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:qe.map((function(e){var t=e.name,r=e.label,n=e.description,i=e.transformValue;return(0,j.jsx)(x.l.Item,{hideBorder:!0,hideDescription:!0,label:r,name:t,transformValue:i,tooltipText:n,variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.Input,{})},t)}))}),(0,j.jsx)("div",{className:"grid grid-cols-1",children:(0,j.jsxs)("div",{className:"min-h-[255px] w-full",children:[(0,j.jsx)(x.l.Label,{hideBorder:!0,label:(0,o.t)("spaces.form.edit.options.seo.opengraph_image.label")}),(0,j.jsx)(ze.D,{name:"meta_tag_attributes[opengraph_image]",alt:(0,o.t)("spaces.form.edit.options.seo.opengraph_image.label"),className:"relative",showAddCoverBtn:!0,aspectRatio:I.pI.OPEN_GRAPH,changeImageText:(0,o.t)("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){t(!0),r(i("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,j.jsx)(Ve.Z,{title:(0,o.t)("spaces.form.edit.options.seo.opengraph_image.add"),description:(0,o.t)("spaces.form.edit.options.seo.opengraph_image.description")})})]})})]})},Ge=function(e){var t=e.space;return(0,g.EG)(t)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.TitleSm,{weight:"bold",children:(0,o.t)("spaces.form.edit.options.course_notifications.title")}),(0,j.jsx)(x.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.options.course_notifications.new_comment_notification"),tooltipText:(0,o.t)("spaces.form.edit.options.course_notifications.new_comment_notification_tooltip"),name:"course_setting_attributes.new_comment_notification_enabled",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.new_comment_notification_enabled"})})]}):null},We=function(e){var t=e.space;return(0,g.EG)(t)?(0,j.jsx)(x.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.options.course_options.enforce_lessons_order"),tooltipText:(0,o.t)("spaces.form.edit.options.course_options.enforce_lessons_order_tooltip"),name:"course_setting_attributes.enforce_lessons_order",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.enforce_lessons_order"})}):null},He=r(68997);function Qe(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Ke=function(e){var t=e.space,r=(0,d.wh)().currentCommunity,n=[];(0,g.V5)(t)&&(n=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,g.Ug)(t)&&(n=["chat_room_show_history"]),(0,g.Ds)(t)&&(n=["allow_members_to_add_others","allow_members_to_create_posts","hide_from_featured_areas"]),(0,g.H3)(t)&&(n=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]),(0,g.qy)(t)&&(n=["allow_members_to_add_others"]),(0,He.v)(r)||(0,g.Ug)(t)||(0,g.EG)(t)||(n=[].concat(Qe(n),["show_to_logged_out_visitors"])),n=[].concat(Qe(n),["hide_members_count"]);var i=function(e){return"allow_members_to_create_posts"==e?(0,g.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e};return(0,j.jsxs)("div",{className:"mt-5 flex-1 md:mt-8",children:[(0,j.jsx)(Y.Z.TitleSm,{weight:"bold",children:(0,o.t)("spaces.form.edit.options.permissions.label")}),n.map((function(e){return(0,j.jsx)(x.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.options.permissions.".concat(i(e))),name:e,className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})},e)}))]})};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=function(e){var t=e.space,r=function(e){var t={LATEST:{label:(0,o.t)("latest"),value:"latest"},OLDEST:{label:(0,o.t)("oldest"),value:"oldest"},POPULAR:{label:(0,o.t)("popular"),value:"popular"},LIKES:{label:(0,o.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,o.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,o.t)("alphabetical"),value:"alphabetical"}},r={name:"default_comment_sort",options:[t.LATEST,t.OLDEST]},n={name:"default_sort",options:Object.values(t)},i={name:"default_member_sort",options:[t.LATEST,t.OLDEST,t.ALPHABETICAL]};return(0,g.V5)(e)?[r]:(0,g.qy)(e)?[i]:(0,g.Ds)(e)?[r,Xe(Xe({},n),{},{options:n.options.filter((function(e){return"alphabetical"!==e.value}))})]:[r,n,i]}(t),n=!(0,g.qy)(t)&&!(0,g.V5)(t);return(0,j.jsxs)("div",{className:"mt-8 flex-1",children:[(0,j.jsx)(Y.Z.TitleSm,{weight:"semibold",children:(0,o.t)("spaces.form.edit.options.sort.label")}),n&&(0,j.jsx)(x.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,o.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,j.jsx)(x.l.ToggleSwitch,{variant:"small"})}),(0,j.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:r.map((function(e){var t=e.name,r=e.options;return(0,j.jsx)(x.l.Item,{hideBorder:!0,label:(0,o.t)("spaces.form.edit.options.sort.".concat(t,".label")),tooltipText:(0,o.t)("spaces.form.edit.options.sort.".concat(t,".description")),hideDescription:!0,name:t,variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.SelectNative,{options:r})},t)}))})]})},tt=r(97292),rt=(0,b.forwardRef)((function(e,t){var r=e.isOpen,n=e.onClose,i=e.setNotificationsChanged,a=(0,v.Gc)().setValue;return(0,j.jsxs)(se.c,{isOpen:r,title:(0,o.t)("spaces.form.create.notifications_confirm_modal.title"),onClose:n,onCancel:function(){i(!1),a("update_all_members_notifications",!1),setTimeout((function(){return t.current()}))},cancelText:(0,o.t)("spaces.form.create.notifications_confirm_modal.new_members"),onConfirm:function(){i(!1),a("update_all_members_notifications",!0),setTimeout((function(){return t.current()}))},confirmVariant:"primary",confirmText:(0,o.t)("spaces.form.create.notifications_confirm_modal.all_members"),shouldSubmitOnCancel:!0,children:[(0,o.t)("spaces.form.create.notifications_confirm_modal.description"),(0,j.jsx)("div",{className:"hidden",children:(0,j.jsx)(x.l.Item,{hiddenField:!0,name:"update_all_members_notifications",hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,j.jsx)(x.l.Input,{type:"hidden"})})})]})}));rt.displayName="NotificationsConfirmModal";var nt=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas","pinned_posts_label","default_comment_sort","notification_type","chat_room_show_history"],it=(0,b.forwardRef)((function(e,t){var r=e.space,n=e.onChange,i=e.isOpenNotificationsConfirmModal,a=e.toggleNotificationsConfirmModal,s=e.setNotificationsChanged,l=(0,v.Gc)().formState.dirtyFields;return(0,b.useEffect)((function(){var e=Object.keys(l);nt.filter((function(t){return e.includes(t)})).length>0&&n(!0),e.includes("notification_type")&&s(!0)}),[l]),(0,j.jsxs)("div",{children:[(0,j.jsx)(tt.V,{}),(0,j.jsx)(rt,{isOpen:i,onClose:a,setNotificationsChanged:s,ref:t}),(0,j.jsx)(We,{space:r}),(0,j.jsx)(Ge,{space:r}),(0,j.jsx)(Ke,{space:r}),(0,g.H3)(r)&&(0,j.jsxs)("div",{className:"mt-10 flex-1",children:[(0,j.jsx)(Y.Z.TitleSm,{weight:"semibold",children:(0,o.t)("spaces.form.edit.options.labels.label")}),(0,j.jsx)("div",{className:"grid grid-cols-1",children:(0,j.jsx)(x.l.Item,{hideBorder:!0,label:(0,o.t)("spaces.form.edit.options.labels.pinned_posts.label"),tooltipText:(0,o.t)("spaces.form.edit.options.labels.pinned_posts.description"),hideDescription:!0,name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,j.jsx)(x.l.Input,{placeholder:(0,o.t)("spaces.form.edit.pinned_posts")})})})]}),!(0,g.Ug)(r)&&!(0,g.EG)(r)&&(0,j.jsx)(et,{space:r})]})}));function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}it.displayName="SpaceOptionsForm";var dt=function(e){var t=e.space,r=ct((0,b.useState)(null),2),n=r[0],s=r[1],c=(0,X.mx)(),u=c.dirtyForms,d=c.setDirtyForms,p=c.onSlugChange,f=(0,C.eW)(),m=f.onSave,h=f.onExit,v=(0,b.useRef)(),y=(0,te.p)(),g=ct((0,ae.k)(!1),2),_=g[0],x=g[1],w=ct((0,b.useState)(!1),2),O=w[0],S=w[1],P=function(){var e,r=(e=i().mark((function e(r,o){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=3;break}return x(),e.abrupt("return",!1);case 3:if(e.prev=3,!n){e.next=8;break}return e.next=7,Be.UK.deleteOpenGraphImage(n);case 7:s(!1);case 8:return e.next=10,m({data:r,onSuccess:function(e){e.slug!==t.slug&&p(e)}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),y.error(a().t("spaces.form.edit.error"));case 15:return e.prev=15,l()(o)&&o(r,{keepValues:!0}),d(X.Wm),h(),e.finish(15);case 20:case"end":return e.stop()}}),e,null,[[3,12,15,20]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){lt(o,n,i,a,s,"next",e)}function s(e){lt(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),k=function(e){d(at(at({},u),{},{options:at(at({},u.options),{},st({},e,!0))}))};return(0,j.jsx)(N,{children:(0,j.jsxs)(Q,{onSubmit:function(e,t){var r=t.reset;return P(e,r)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-4",triggerFormSubmitRef:v,children:[(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.options"),dataTestId:"customize-space-options",variant:"fullScreen",children:(0,j.jsx)(it,{space:t,onChange:function(){return k("options")},ref:v,isOpenNotificationsConfirmModal:_,toggleNotificationsConfirmModal:x,setNotificationsChanged:S})}),(0,j.jsx)(ee.q,{title:(0,o.t)("customize_space.seo"),dataTestId:"customize-space-seo",variant:"fullScreen",children:(0,j.jsx)(Ze,{space:t,onChange:function(){return k("seo")},setImageToDelete:s})})]})})},pt=r(27414),ft=r(13288),mt=r(81089);function bt(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ht(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _t=function(e){var t=e.space,r=e.spaceGroup,n=!!r.automatically_add_members_to_new_spaces,i=!!r.add_members_to_space_group_on_space_join;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.TitleSm,{weight:"semibold",children:(0,o.t)("customize_space.paywalls.subtitle")}),(0,j.jsx)(Y.Z.BodyMd,{color:"text-default",children:(0,j.jsxs)("ul",{className:"mt-3 space-y-0.5 px-2",children:[(0,j.jsx)("li",{children:(0,o.t)("customize_space.paywalls.description.li_1")}),(0,j.jsx)("li",{children:(0,o.t)("customize_space.paywalls.description.li_2")}),(n||i)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("li",{children:(0,o.t)("customize_space.paywalls.description.li_3")}),i&&(0,j.jsx)("li",{className:"ml-4",children:(0,o.t)("customize_space.paywalls.description.li_3_1")}),n&&(0,j.jsx)("li",{className:"ml-4",children:(0,o.t)("customize_space.paywalls.description.li_3_2")})]}),!(0,g.H)(t)&&(0,g.fL)(t)&&(0,j.jsx)("li",{children:(0,o.t)("customize_space.paywalls.description.li_4")}),(0,j.jsx)("li",{children:(0,o.t)("customize_space.paywalls.description.li_5")}),(0,j.jsxs)("li",{children:[(0,o.t)("customize_space.paywalls.description.li_6.prefix")," ",(0,j.jsx)("a",{href:"https://help.circle.so/c/paywall-setup/",target:"_blank",rel:"noreferrer",children:(0,o.t)("customize_space.paywalls.description.li_6.link")})]})]})})]})},xt=r(76296),jt=r(72860),wt=r(98627),Ot=r(54030),St=r(27025);function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct=function(e){var t=e.paywall,r=e.showRemove,n=void 0!==r&&r,i=e.onRemove,a=e.refetchPaywalls,s=(0,d.wh)().currentCommunityMember,l=Pt((0,ae.k)(!1),2),c=l[0],u=l[1],p=(0,Ot.en)(),m=Pt((0,b.useState)(!1),2),h=m[0],v=m[1],y=(0,wt.I)().show;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(se.c,{isOpen:c,title:(0,o.t)("customize_space.paywalls.remove_modal.title"),onClose:u,onCancel:u,onConfirm:function(){return i(t),void u()},confirmVariant:"danger",children:(0,o.t)("customize_space.paywalls.remove_modal.description",{name:t.display_name})}),(0,j.jsxs)(St.Lt,{direction:"bottom-end",className:f()("text-dark flex justify-end",{"invisible group-hover:visible":p&&!h}),button:(0,j.jsx)("span",{className:"hover:bg-tertiary flex h-6 w-6 items-center justify-center rounded transition-colors",children:(0,j.jsx)(_e.JO,{type:"20-menu-dots-horizontal",className:"text-default",size:20})}),onToggle:v,children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),function(e){y({paywall:e,refetchPaywalls:a,paywallGroupsEnabled:s.policies.paywall_group_enabled})}(t)},children:(0,o.t)("edit")}),n&&(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),u()},children:(0,o.t)("customize_space.paywalls.remove")})]})]})},Nt=r(67741),It=function(e){var t=e.paywall;return(0,j.jsx)(Nt.C,{variant:"active"===t.status?"success":"default",children:(0,o.t)("settings.paywalls.status.".concat(t.status))})},At="uppercase !px-0 !text-default !text-xxs !text-light",Et="h-14 group px-0 text-default",Dt=[{dataIndex:"display_name",key:"display_name",title:(0,o.t)("customize_space.paywalls.table_columns.paywall"),shouldWrap:!0,className:At,tdClassName:f()(Et,"!text-dark !font-medium")},{dataIndex:"unlocked_by",key:"unlocked_by",title:(0,o.t)("customize_space.paywalls.table_columns.unlocked_by"),shouldWrap:!0,className:At,tdClassName:f()(Et,"!font-medium")},{dataIndex:"pricing",key:"pricing",title:(0,o.t)("customize_space.paywalls.table_columns.pricing"),className:At,tdClassName:Et},{dataIndex:"status",key:"status",title:(0,o.t)("customize_space.paywalls.table_columns.status"),className:At,tdClassName:Et},{dataIndex:"actions",key:"actions",title:" ",className:f()(Et,"w-2 !text-right"),tdClassName:f()(Et,"w-2 !text-right !py-0")}],Tt=function(e,t){return e.space_ids.includes(t.id)},Lt=function(e,t){var r=[];return Tt(e,t)&&r.push("Space"),function(e,t){return e.space_group_ids.includes(t.space_group_id)}(e,t)&&r.push("Space Group"),r.join(", ")},Mt=function(e){var t=e.paywalls,r=e.space,n=e.onRemove,i=e.refetchPaywalls;if(0===t.length)return null;var o=t.map((function(e){return{key:e.id,rowClassName:"group",display_name:e.display_name,unlocked_by:Lt(e,r),pricing:(0,xt.QC)(e),status:(0,j.jsx)(It,{paywall:e}),actions:(0,j.jsx)(Ct,{paywall:e,showRemove:Tt(e,r),refetchPaywalls:i,onRemove:n})}}));return(0,j.jsx)(jt.w,{variant:"no-border",className:"mt-2 lg:mt-2",columns:Dt,dataSource:o})},Rt=function(e){var t=e.paywalls,r=e.onClick,n=e.isLoading,i=e.appendTo,a=(0,u.k6)(),s=(0,C.eW)().onExit;return(0,j.jsx)("div",{className:"mt-4 lg:mt-7",children:(0,j.jsxs)(St.Lt,{size:"full",direction:"bottom",className:"w-full",buttonClassName:"flex justify-between px-4 w-full rounded-lg border border-primary h-11 items-center",menuWrapperClassName:"px-0 mt-1",popperOptions:{strategy:"absolute"},button:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelMd,{children:(0,o.t)("customize_space.paywalls.link_paywall")}),(0,j.jsx)(_e.JO,{size:16,type:"caret-down-bold",useWithFillCurrentColor:!0,className:"text-dark -mr-1.5"})]}),appendTo:i,children:[n?(0,j.jsx)(St.Lt.Item,{children:(0,j.jsx)(ft.a,{center:!0})}):(0,j.jsxs)("div",{className:"max-h-40 overflow-scroll",children:[!t.length&&(0,j.jsx)("div",{className:"px-4 py-2",children:(0,j.jsx)(St.Lt.Item,{children:(0,j.jsx)(Y.Z.LabelSm,{children:(0,o.t)("customize_space.paywalls.no_paywalls")})})}),t.map((function(e){return(0,j.jsxs)(St.Lt.ItemLink,{onClick:function(){return r(e)},disabled:n,children:[e.display_name," - ",(0,xt.QC)(e)]},e.id)}))]}),(0,j.jsxs)(St.Lt.ItemLink,{className:"hover:bg-secondary hover:text-dark flex w-full items-center gap-2.5 px-4 py-2",onClick:function(){a.push("/settings/paywalls"),s()},children:[(0,j.jsx)("span",{className:"flex",children:(0,j.jsx)(_e.JO,{type:"16-plus-v2",size:16,className:"text-dark w-4"})}),(0,j.jsx)(Y.Z.LabelSm,{children:(0,o.t)("customize_space.paywalls.create_paywall")})]})]})})},Bt=function(){var e=(0,d.L2)().data,t=(0,d.e2)().helpers.findById(e.space_group_id),r=function(e){var t=e.space,r=(0,c.useQuery)(ie.av.paywalls.index(),{enabled:!(null===t||void 0===t||!t.id),refetchOnWindowFocus:!1}),n=r.data,i=void 0===n?[]:n,o=r.isLoading,a=r.refetch,s=i.filter((function(e){return e.space_ids.includes(t.id)||e.space_group_ids.includes(t.space_group_id)})),l=i.filter((function(e){return!e.space_ids.includes(t.id)})),u=function(e){return{space_group_ids:e.space_group_ids,all_spaces:e.all_spaces,trial_days:e.trial_days}},d=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.paywalls.update({paywallId:e.id}),{paywall:yt({space_ids:e.space_ids.filter((function(e){return e!==t.id}))},u(e))})}),{onSuccess:a}),p=d.mutate,f=d.isLoading,m=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.paywalls.update({paywallId:e.id}),{paywall:yt({space_ids:[].concat(bt(e.space_ids),[t.id])},u(e))})}),{onSuccess:a}),b=m.mutate,h=m.isLoading;return{paywalls:i,isLoading:o||f||h,removePaywall:p,addPaywall:b,refetchPaywalls:a,currentPaywalls:s,availablePaywalls:l}}({space:e}),n=r.isLoading,i=r.currentPaywalls,o=r.availablePaywalls,a=r.removePaywall,s=r.addPaywall,l=r.refetchPaywalls,u=(0,P.UV)().contentPortalElement;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_t,{space:e,spaceGroup:t}),(0,j.jsx)(Rt,{paywalls:o,onClick:s,isLoading:n,appendTo:u}),n?(0,j.jsx)(ft.a,{center:!0}):(0,j.jsx)(Mt,{space:e,paywalls:i,isLoading:n,onRemove:a,refetchPaywalls:l})]})},Ut=function(){var e=(0,d.wh)(),t=e.currentCommunity,r=e.currentCommunityMember;return e.isLoading?null:(0,j.jsxs)(N,{children:[(0,j.jsx)("div",{children:(0,j.jsx)(Y.Z.TitleSm,{weight:"bold",children:(0,o.t)("customize_space.paywalls.title")})}),(0,j.jsx)("div",{className:"mt-5 lg:mt-9",children:t.has_payment_processor_enabled?(0,j.jsx)(Bt,{}):(0,j.jsx)(pt.R,{shouldHideHeader:!0,paymentProcessor:t.payment_processor,paywallGroupsEnabled:r.policies.paywall_group_enabled})})]})},Ft=r(43292),zt=r(45842),Vt=r(2339),qt=r(34310);function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){Wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ht(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jt(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var Kt=function(e){var t=function(){var e,t=(e=i().mark((function e(t){var r,n,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceId,n=t.memberId,o=t.isModerator,e.next=3,(0,mt.UT)(ie.av.communityMember.settings({memberId:n}));case 3:return a=e.sent,s=a.moderating_space_ids||[],l=o?[].concat(Ht(s),[r]):s.filter((function(e){return e!==r})),e.abrupt("return",(0,mt.aU)(ie.av.communityMember.update({memberId:n}),Gt(Gt({},a),{},{moderator_space_ids:l})));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Jt(o,n,i,a,s,"next",e)}function s(e){Jt(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,c.useMutation)(t,e)},$t=r(94281),Xt=r(26334),Yt=r(909),er=r(18574),tr=r(92110),rr=r(81571),nr=r(81786);function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},sr=function(e){var t=e.space,r=(0,te.p)(),n=(0,c.useQueryClient)(),i=ir((0,b.useState)(!1),2),a=i[0],s=i[1],l=ir((0,b.useState)(!1),2),u=l[0],p=l[1],f=ir((0,b.useState)(""),2),m=f[0],h=f[1],v=ir((0,b.useState)(null),2),y=v[0],_=v[1],x=(0,d.wh)().currentCommunityMember,w=(0,Yt.H)(),O=w.showOwnProfileEdit,S=w.showMemberProfileEdit,P=(0,Xt.I)({spaceId:t.id}),k=P.count,C=P.isLoading,I=(0,Ft.z)(),A=(0,qt.fd)({sort:qt.zw.ROLE,filters:{space_id:t.id},query:m}),E=A.isLoading,D=A.hasNextPage,T=A.fetchNextPage,L=A.members,M=A.queryKey,R=t.space_members_limit_reached,B=void 0!==R&&R,U=t.space_members_limit,F=void 0===U?0:U,z=function(e){return(0,c.useMutation)((function(e){var t=e.spaceId,r=e.memberId;return(0,mt.pC)(ie.av.spaceMembers.leaveSpace({spaceId:t,memberId:r}))}),e)}({onError:function(e){r.error(e.message)},onSuccess:function(){n.invalidateQueries(M),r.success((0,o.t)("spaces.form.edit.members.members_removed"))},onSettled:function(){s(!1),p(!1),_(null)}}),V=z.mutate,q=Kt({onError:function(e){r.error(e.message)},onSuccess:function(){n.invalidateQueries(M),r.success((0,o.t)("spaces.form.edit.members.changed_role"))}}).mutate,Z=u?(0,o.t)("spaces.form.edit.members.removing"):(0,o.t)("spaces.form.edit.members.remove_member");if(E)return(0,j.jsx)("div",{className:"flex w-screen justify-center",children:(0,j.jsx)(ft.a,{})});var G=L.map((function(e){var r=e.id,n=e.avatar_url,i=e.name,o=e.email,a=e.roles,s=e.moderating_space_ids,l=e.public_uid,c=e.current_space_member,u=void 0===c?null:c,d=e.last_seen_at;return{id:r,avatarUrl:n,name:i,email:o,role:ar(a,t.id,s),publicUid:l,lastActive:d,currentSpaceMember:u}}));return(0,j.jsxs)(N,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:[(0,j.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 md:gap-0",children:[(0,j.jsx)("div",{children:(0,j.jsxs)(Y.Z.TitleSm,{weight:"bold",children:[(0,o.t)("customize_space.members")," ",!C&&"(".concat(k,")"),(0,g.H)(t)&&(0,j.jsx)($t.T,{content:(0,o.t)("courses.admin_summary.waitlist_tooltip"),placement:"right",children:(0,j.jsx)(_e.JO,{type:"16-clock",className:"ml-2",size:16})})]})}),(0,j.jsxs)("div",{className:"flex w-full justify-between gap-4 md:flex-1 md:justify-end",children:[(0,j.jsx)(tr.n,{spaceId:t.id}),(0,j.jsx)($t.T,{content:(0,o.t)("chat_space.member_limit_title",{member_limit:F}),disabled:!B,children:(0,j.jsx)(nr.z,{variant:"secondary",onClick:function(){return I.show({spaceId:t.id})},disabled:B,children:(0,g.H)(t)?(0,o.t)("customize_space.add_waitlist"):(0,o.t)("customize_space.add_members")})})]})]}),(0,j.jsx)("div",{className:"border-primary mt-6 flex flex-row items-center border-y py-3 lg:mt-8",children:(0,j.jsx)(er.h,{onSearch:h,placeholder:(0,o.t)("spaces.form.edit.members.search_members")})}),(0,j.jsx)("div",{className:"h-full overflow-auto pt-4",children:(0,j.jsx)(Vt.r,{searchTerm:m,members:G,dataLength:L.length,next:T,hasMore:D,shouldHideAddMemberButton:!0,onEdit:function(e){var t=e.id,r=e.publicUid;if((null===x||void 0===x?void 0:x.id)==t)return O();S({memberPublicId:r})},onAdd:function(){return I.show({spaceId:t.id})},onRemove:function(e){_(e),s(!0)},onRoleChange:function(e,r){var n=r===rr.K.MODERATOR;q({spaceId:t.id,memberId:e,isModerator:n})},scrollableTarget:"scrollable-container",shouldShowHeader:!0,cellVariant:"no-x-padding"})}),(0,j.jsx)(zt.G,{isOpen:a,onClose:function(){return s(!1)},onConfirm:function(){y&&a&&(p(!0),V({spaceId:t.id,memberId:y}))},disabled:u,confirmText:Z})]})},lr=r(9581),cr=function(){return(0,j.jsx)(N,{children:(0,j.jsx)(lr.k,{category:"administrative",pageSize:4})})},ur=r(47330),dr=r(27274),pr=function(e,t){var r=t.id,n=t.value;return t.resetOthers&&e.clear(),e.set(r,n),new Map(e)},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return(0,b.useReducer)(pr,e)},mr=r(43227);function br(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var hr=function(e){var t,r,n=e.sections,o=e.variant,a=void 0===o?"primary":o,s=e.setIsNameEditable,l=(0,d.L2)().data,u=(0,c.useQueryClient)(),p=(0,c.useMutation)((function(e){return(0,mt.Cu)(ie.av.courses.createSection({courseId:l.id}),e)}),{onSuccess:(t=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.invalidateQueries((0,ur.bD)(l.id));case 2:(0,m.defer)((function(){var e=document.querySelector("#section-item-".concat(t.id));e&&e.scrollIntoView({behavior:"smooth"}),s(t.id)}));case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){br(o,n,i,a,s,"next",e)}function s(e){br(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})});return(0,j.jsx)(nr.z,{variant:a,disabled:p.isLoading,onClick:function(){p.mutate({course_section:{name:"Untitled section - ".concat(n.length+1),drip_delay:0,lesson_order:[]}})},children:I18n.t(p.isLoading?"courses.edit.sections.adding":"courses.edit.sections.add_section")})},vr=function(e){var t=e.sections,r=e.dispatchSectionsNameEditor;return(0,j.jsxs)("div",{className:"border-primary flex h-72 flex-col items-center justify-center rounded-lg border",children:[(0,j.jsx)("div",{children:(0,j.jsx)(Y.Z.TitleSm,{weight:"semibold",children:I18n.t("courses.edit.sections.empty_state.title")})}),(0,j.jsx)("div",{className:"mt-1",children:(0,j.jsx)(Y.Z.BodyMd,{children:I18n.t("courses.edit.sections.empty_state.description")})}),(0,j.jsx)("div",{className:"mt-3",children:(0,j.jsx)(hr,{sections:t,variant:"secondary",setIsNameEditable:function(e){return r({id:e,value:!0})}})})]})},yr=r(79752),gr=r(45587),_r=r(90332),xr=r(22735);function jr(e){return function(e){if(Array.isArray(e))return wr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kr=function(e){var t=e.sections,r=e.setSections,n=e.setActiveDragItem,i=e.children,o=(0,d.L2)().data,a=(0,yr.Dy)((0,yr.VT)(yr.we)),s=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.reorder({courseId:null===o||void 0===o?void 0:o.id}),e)})),l=function(e){var t,r,n,i;return"section"===(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.dragType)?e.id:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.sectionSortId};return(0,j.jsx)(yr.LB,{sensors:a,onDragStart:function(e){var t=e.active;return n(t)},onDragEnd:function(){s.mutate({new_order:t.map((function(e){return{section_id:e.id,lesson_ids:e.lessons.map((function(e){return e.id}))}}))}),n(null)},onDragOver:function(e){var n,i,o,a,s=e.active,c=e.over,u=null===s||void 0===s?void 0:s.id,d=null===c||void 0===c?void 0:c.id;if(u&&d&&u!==d){var p=null===s||void 0===s||null===(n=s.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.dragType,f=null===c||void 0===c||null===(o=c.data)||void 0===o||null===(a=o.current)||void 0===a?void 0:a.dragType;if(p&&f){if("section"==p){if("lesson"==f)return;return r((function(e){var t=e.findIndex((function(e){return e.sortId==u})),r=e.findIndex((function(e){return e.sortId==d}));return(0,gr.Rp)(e,t,r)}))}var m=l(c),b=l(s),h=b===m,v=b!==m,y=t.find((function(e){return e.sortId==b})).lessons.find((function(e){return e.sortId==u}));return r((function(e){return e.map((function(e){if(h&&e.sortId===m){var t=e.lessons.findIndex((function(e){return e.sortId===u})),r=e.lessons.findIndex((function(e){return e.sortId===d}));return r<0?e:Sr(Sr({},e),{},{lessons:(0,gr.Rp)(e.lessons,t,r)})}if(v&&e.sortId===b)return Sr(Sr({},e),{},{lessons:e.lessons.filter((function(e){return e.sortId!==u}))});if(v&&e.sortId===m){var n=e.lessons.findIndex((function(e){return e.sortId===d}));return Sr(Sr({},e),{},{lessons:[].concat(jr(e.lessons.slice(0,n)),[y],jr(e.lessons.slice(n)))})}return e}))}))}}},children:i})},Cr=r(24285),Nr=r(36298),Ir=r(1712),Ar=(0,r(73445).Ue)((function(e){return{isDirty:!1,setIsDirty:function(t){return e({isDirty:t})}}})),Er=r(52749),Dr=r(87561),Tr=r(56200),Lr=r(3852),Mr=r(84389),Rr=r(76234),Br=r(5982),Ur=[{group:(0,o.t)("dynamic_vars_groups.community"),label:"{{community.name}}",value:"{{community.name}}"},{group:(0,o.t)("dynamic_vars_groups.member"),label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:(0,o.t)("dynamic_vars_groups.member"),label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:(0,o.t)("dynamic_vars_groups.course"),label:"{{space.name}}",value:"{{space.name}}"},{group:(0,o.t)("dynamic_vars_groups.course"),label:"{{section.name}}",value:"{{section.name}}"},{group:(0,o.t)("dynamic_vars_groups.course"),label:"{{first_lesson_in_section.link}}",value:"{{first_lesson_in_section.link}}"}];function Fr(e){var t=e.editor,r=e.isEditorFocused,n=e.portalId;if(!t)return null;var i=f()(r?"text-default dark:text-dark":"text-lightest dark:text-default");return(0,j.jsx)(Rr.Z,{container:function(){return document.getElementById(n)},children:(0,j.jsx)(Br.m,{wrapperClassName:"px-8 w-80 pt-3",optionsClassName:"bottom-8",className:i,variables:Ur,editor:t,tooltipPlacement:"top"})})}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qr=function(e){var t,r,n,i=e.section,a=e.initialFocusRef,s=Ar().setIsDirty,l=(0,v.Gc)(),c=l.formState.isDirty,u=l.getValues,d=zr((0,b.useState)(!(0,Tr.NU)(u("email_notification_body"))),2),p=d[0],f=d[1],m=!(null!==(t=i.serialized_email_notification_body)&&void 0!==t&&t.body)&&!i.email_notification_subject;(0,b.useEffect)((function(){s(c)}),[s,c]),(0,b.useEffect)((function(){m&&s(!0)}),[s,m]);var h="courses.edit.sections.notify_students_modal.form";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.l.Item,{name:"email_notification_subject",className:"!items-center !py-0 px-8",label:(0,o.t)("".concat(h,".email_notification_subject")),labelWrapperClassName:"!w-auto grow-0",labelClassName:"!m-0",hideDescription:!0,inline:!0,children:(0,j.jsx)(x.l.Input,{maxLength:"255",ref:a,placeholder:(0,Lr.wB)((0,o.t)([h,"email_notification_subject_placeholder"])),otherClassName:"!px-0 !autofill:bg-yellow-200",focusRequired:!1,autoComplete:"off",hideBorder:!0})}),(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("div",{id:"drip-email-notification-editor-toolbar"}),(0,j.jsx)(le.$,{editorClassName:"mt-4 h-80 overflow-y-scroll px-8",onChangeCallback:function(e){f(!(0,Tr.NU)({body:e}))},placeholder:(0,o.t)("".concat(h,".email_notification_body_placeholder")),name:"email_notification_body[body]",sgidToObjectMap:(null===(r=i.serialized_email_notification_body)||void 0===r?void 0:r.sgids_to_object_map)||{},inlineAttachments:(null===(n=i.serialized_email_notification_body)||void 0===n?void 0:n.inline_attachments)||[],disabledExtensions:["mention","poll","cta"],disabledSlashMenuCategories:["Embed"],aiCopilotTitle:i.name,shouldPreviewFilesAsLinks:!0,shouldShowTextModifiersMenu:!1,toolbars:[{portalId:"drip-email-notification-editor-toolbar",component:Mr.j},{portalId:"drip-email-notification-variables-toolbar",component:Fr}]}),p&&(0,j.jsx)("p",{className:"absolute bottom-2 right-8 text-red-500",children:(0,o.t)("".concat(h,".required"))})]}),(0,j.jsx)("div",{id:"drip-email-notification-variables-toolbar"})]})},Zr=r(51420),Gr=r(20336),Wr=r(26022),Hr=r(52701),Qr=(0,Zr.AW)((0,o.t)("courses.edit.sections.notify_students_modal.form.email_notification_body_default_text").replace(/[{}]/g,(function(e){return"".concat(e).concat(e)})),[Gr.Z,Wr.Z,Hr.Z]);function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){$r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xr(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var Yr="edit-course-type-form",en="courses.edit.sections.notify_students_modal.form",tn=function(e){var t,r,n,a=e.section,s=e.onSuccess,l=e.onSubmit,u=e.onError,d=e.initialFocusRef,p=e.isEdit,f=(0,te.p)(),m=f.success,b=f.error,h=(0,ur.rF)(a.space_id).refetch,v=function(e){var t=e.section,r=e.options;return{emailNotificationMutation:(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:a,options:{onSuccess:(r=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:m((0,o.t)("".concat(en,".save_success")),{duration:"short",shouldUseProgress:!1}),s();case 4:case"end":return e.stop()}}),e)})),n=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Xr(o,n,i,a,s,"next",e)}function s(e){Xr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)}),onError:function(){b((0,o.t)("".concat(en,".save_error"))),u()}}}),y=v.emailNotificationMutation,g=Dr.Ry().shape({email_notification_subject:Dr.Z_().required((0,o.t)("".concat(en,".required"))),email_notification_body:Dr.Ry().test({test:function(e){return(0,Tr.NU)(e)},message:(0,o.t)("".concat(en,".required"))})}),_={email_notification_subject:a.email_notification_subject||(0,o.t)("".concat(en,".email_notification_subject_placeholder")).replace(/[{}]/g,(function(e){return"".concat(e).concat(e)})),email_notification_body:{body:(null===(t=a.serialized_email_notification_body)||void 0===t?void 0:t.body)||Qr}};return(0,j.jsx)(x.l,{id:Yr,onSubmit:function(e){y.mutate({course_section:Kr(Kr({},e),!p&&{notify_students_enabled:!0})}),l()},preventAccidentalLeave:!0,validationSchema:g,className:"divide-primary divide-y",formClassName:void 0,defaultValues:_,children:(0,j.jsx)(qr,{section:a,initialFocusRef:d})})};function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var on=function(e){var t=e.section,r=e.isOpen,n=e.isOpenForEdit,i=e.onClose,a=e.shouldShowNotificationMessage,s=rn((0,b.useState)(!1),2),l=s[0],c=s[1],u=(0,b.useRef)(null),d=Ar(),p=d.isDirty,f=d.setIsDirty,m=function(){p&&!confirm((0,o.t)("prevent_accidental_leave_message"))||i()};return(0,j.jsxs)(P.u_,{isOpen:r||n,onClose:m,contentPortalId:"course-type-picker-portal",initialFocus:u,children:[(0,j.jsx)(P.u_.Overlay,{}),(0,j.jsxs)(P.u_.Content,{size:"lg",children:[(0,j.jsxs)(P.u_.Header,{children:[(0,j.jsx)(P.u_.Title,{size:"sm",children:(0,o.t)("courses.edit.sections.notify_students_modal.title")}),(0,j.jsx)(P.u_.HeaderActions,{children:(0,j.jsx)(P.u_.CloseButton,{onClick:m})})]}),(0,j.jsxs)(P.u_.Body,{className:"!px-0",children:[a&&!n&&(0,j.jsxs)("div",{className:"border-primary bg-secondary flex items-start border px-8 py-6",children:[(0,j.jsx)("div",{className:"mr-3 pt-0.5",children:(0,j.jsx)(_e.JO,{type:"20-alert",className:"w-4"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"mb-1",children:(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("courses.edit.sections.notify_students_modal.notify_your_members_title")})}),(0,j.jsx)(Y.Z.BodySm,{children:(0,o.t)("courses.edit.sections.notify_students_modal.notify_your_members_message")})]})]}),(0,j.jsx)(tn,{section:t,isEdit:n,onSuccess:function(){f(!1),i(),setTimeout((function(){return c(!1)}),100)},onSubmit:function(){return c(!0)},onError:function(){c(!1),f(!0)},initialFocusRef:u})]}),(0,j.jsxs)(P.u_.Footer,{className:"flex justify-end border-t",children:[!l&&(0,j.jsx)(nr.z,{type:"button",variant:"secondary",className:"mr-2",onClick:m,children:(0,o.t)("cancel")}),(0,j.jsx)(Er._,{type:"submit",variant:"circle",form:Yr,submitting:l,children:(0,o.t)("save")})]})]})]})};function an(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cn="courses.edit.sections.notify_students_modal.form",un=function(e){var t,r,n=e.section,a=e.space,s=sn((0,b.useState)(Boolean(n.notify_students_enabled)),2),l=s[0],u=s[1],d=sn((0,b.useState)(!1),2),p=d[0],f=d[1],m=sn((0,b.useState)(!1),2),h=m[0],v=m[1],y=(0,te.p)(),g=y.success,_=y.error,x=(0,ur.rF)(n.space_id).refetch,w=function(e){var t=e.section,r=e.options;return{changeNotifyStudentsEnabledMutation:(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:n,options:{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:g((0,o.t)("".concat(cn,".save_success")),{duration:"short",shouldUseProgress:!1});case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){an(o,n,i,a,s,"next",e)}function s(e){an(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){_((0,o.t)("".concat(cn,".save_error"))),u(!0)}}}),O=w.changeNotifyStudentsEnabledMutation;(0,b.useEffect)((function(){u(Boolean(n.notify_students_enabled))}),[n.notify_students_enabled]);var S,P=n.drip_notifications_sent_at&&(0,Nr.w)({dateTime:new Date(n.drip_notifications_sent_at),format:"date_time_with_short_timezone"});return(0,_r.MS)(a)&&(P?S=(0,o.t)("courses.edit.sections.notify_students_modal.sent_tooltip",{date:P}):n.is_dripped&&(S=(0,o.t)("courses.edit.sections.notify_students_modal.delayed_notification_tooltip"))),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"group flex items-center",children:[(0,j.jsx)("input",{type:"checkbox",name:"section[".concat(n.id,"].notify_students_enabled"),checked:l,className:"hidden"}),(0,j.jsx)($t.T,{disabled:!S,content:S,children:(0,j.jsx)(Ir.r,{checked:l,onChange:function(e){return function(e){e?f(!0):(u(!1),O.mutate({course_section:{notify_students_enabled:!1}}))}(e)},disabled:(0,_r.MS)(a)&&!!P})}),!((0,_r.MS)(a)&&P)&&(0,j.jsx)("button",{type:"submit",className:"hover:bg-tertiary invisible ml-3 rounded-md px-2 py-1 group-hover:visible",onClick:function(){return v(!0)},children:(0,o.t)("edit")})]}),(0,j.jsx)(on,{isOpen:p,isOpenForEdit:h,onClose:function(){f(!1),v(!1)},section:n,shouldShowNotificationMessage:!!S})]})};function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var bn="courses.edit.sections",hn=function(e){var t,r,n=e.space,a=e.section,s=e.setIsNameEditable,l=(0,c.useQueryClient)(),u=(0,c.useMutation)((function(e){return(0,mt.Cu)(ie.av.courses.createLesson({courseId:n.id,sectionId:a.id}),e)}),{onSuccess:(t=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.invalidateQueries((0,ur.bD)(n.id));case 2:(0,m.defer)((function(){var e=document.querySelector("#lesson-item-".concat(t.id));e&&e.scrollIntoView({behavior:"smooth"}),s(t.id)}));case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){mn(o,n,i,a,s,"next",e)}function s(e){mn(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})}),d=function(e){var t=(0,o.t)([bn,"untitled_".concat(e)]);u.mutate({course_lesson:pn({name:"".concat(t," - ").concat(a.lessons.length+1),status:"draft",featured_media:null,rich_text_body:{}},"quiz"===e&&{quizzes_attributes:[{}]})})};return(0,j.jsxs)(St.Lt,{size:St.wk.SMALL,button:(0,j.jsx)(nr.z,{small:!0,type:"button",variant:"secondary",onClick:function(){},children:(0,j.jsx)(Y.Z.LabelSm,{children:(0,o.t)([bn,"add_new"])})}),dataTestId:"new-lesson-dropdown-menu",children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){d("lesson")},children:(0,o.t)([bn,"lesson"])}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){d("quiz")},children:(0,o.t)([bn,"quiz"])})]})};function vn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var yn=function(e){var t,r,n=e.show,a=e.name,s=e.onClose,l=e.courseId,u=e.sectionId,d=(0,ur.rF)(l).refetch,p=(0,c.useMutation)((function(){return(0,mt.pC)(ie.av.courses.deleteSection({courseId:l,sectionId:u}))}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){vn(o,n,i,a,s,"next",e)}function s(e){vn(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})});return(0,j.jsx)(se.c,{isOpen:n,title:(0,o.t)("courses.edit.sections.delete_section"),onClose:s,onCancel:s,onConfirm:p.mutate,confirmVariant:"danger",disabled:p.isLoading,confirmText:p.isLoading?(0,o.t)("deleting"):(0,o.t)("confirm"),children:(0,o.t)("courses.edit.sections.delete_confirmation",{name:a})})};function gn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var _n=function(e){var t,r,n=e.show,a=e.name,s=e.onClose,l=e.courseId,u=e.sectionId,d=e.lessonId,p=(0,ur.rF)(l).refetch,f=(0,c.useMutation)((function(){return(0,mt.pC)(ie.av.courses.deleteLesson({courseId:l,sectionId:u,lessonId:d}))}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:s();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){gn(o,n,i,a,s,"next",e)}function s(e){gn(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})});return(0,j.jsx)(se.c,{isOpen:n,title:(0,o.t)("courses.edit.sections.delete_lesson"),onClose:s,onCancel:s,onConfirm:f.mutate,confirmVariant:"danger",disabled:f.isLoading,confirmText:f.isLoading?(0,o.t)("deleting"):(0,o.t)("confirm"),children:(0,o.t)("courses.edit.sections.delete_confirmation",{name:a})})},xn=r(54482),jn=function(e){var t=e.name,r=e.setName,n=e.isLoading,i=e.onSubmit,a=e.onClose,s=e.useSemiboldFont,l=void 0!==s&&s,c=e.dataTestId,u=(0,b.useRef)(null);return(0,b.useEffect)((function(){u.current&&u.current.focus()}),[]),(0,j.jsxs)("form",{onSubmit:i,className:"flex w-full items-center pr-4",children:[(0,j.jsx)("input",{ref:u,className:f()("bg-primary border-input focus:border-secondary placeholder:text-light -my-1.5 -ml-2 mr-2 w-full rounded border px-2 py-1.5 text-sm placeholder:opacity-100 focus:outline-none",{"font-semibold":l}),onChange:function(e){return r(e.target.value)},value:t,onBlur:i,"data-testid":c}),n?(0,j.jsx)(_e.JO,{type:"loader"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(xn.h,{type:"submit",name:"16-check",onClick:i,className:"!border-v2-success mr-1.5 border",iconClassName:"!text-v2-success",ariaLabel:(0,o.t)("save_and_close")}),(0,j.jsx)(xn.h,{type:"submit",className:"border-secondary border",name:"16-close",onClick:a,ariaLabel:(0,o.t)("close")})]})]})};function wn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pn=function(e){var t,r,n=e.lesson,o=e.section,a=e.onClose,s=(0,d.L2)().data,l=On((0,b.useState)(n.name),2),u=l[0],p=l[1],f=(0,c.useQueryClient)(),m=(0,te.p)(),h=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateLesson({courseId:null===s||void 0===s?void 0:s.id,sectionId:o.id,lessonId:n.id}),e)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.invalidateQueries((0,ur.bD)(null===s||void 0===s?void 0:s.id));case 2:a();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){wn(o,n,i,a,s,"next",e)}function s(e){wn(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){m.error(e.errorDetails)}});return(0,j.jsx)(jn,{name:u,setName:p,isLoading:h.isLoading,onSubmit:function(){return h.mutate({course_lesson:{name:u}})},onClose:a,dataTestId:"lesson-title"})},kn=r(11049);function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function In(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var An=function(e){var t,r,n=e.courseId,a=void 0===n?"":n,s=e.sectionId,l=void 0===s?"":s,u=e.lessonId,d=void 0===u?"":u,p=e.defaultName,f=void 0===p?"":p,b=e.type,h=void 0===b?"lesson":b,v=(0,kn.dd)(),y=(0,c.useQueryClient)(),g=(0,te.p)(),_={onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.invalidateQueries((0,ur.bD)(a));case 2:v.hide();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){In(o,n,i,a,s,"next",e)}function s(e){In(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){g.error(e.errorDetails)}},w=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateLesson({courseId:a,sectionId:l,lessonId:d}),e)}),_),O=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateSection({courseId:a,sectionId:l}),e)}),_);return(0,j.jsxs)(P.u_,{isOpen:v.visible,onClose:v.visible?v.hide:m.noop,children:[(0,j.jsx)(P.u_.Overlay,{}),(0,j.jsxs)(P.u_.Content,{size:"lg",children:[(0,j.jsxs)(P.u_.Header,{children:[(0,j.jsx)(P.u_.Title,{children:"lesson"===h?(0,o.t)("courses.edit.sections.rename_lesson"):(0,o.t)("courses.edit.sections.rename_section")}),(0,j.jsx)(P.u_.HeaderActions,{children:(0,j.jsx)(P.u_.CloseButton,{onClick:v.visible?v.hide:m.noop})})]}),(0,j.jsx)(P.u_.Body,{children:(0,j.jsx)(x.l,{onSubmit:function(e){var t=e.name;"lesson"===h?w.mutate({course_lesson:{name:t}}):"section"===h&&O.mutate({course_section:{name:t}})},defaultValues:{name:f},id:"course-section-lesson-rename-form",children:(0,j.jsx)(x.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"name",label:(0,o.t)("title"),rules:{required:(0,o.t)("courses.edit.sections.validations.name_is_required")},children:(0,j.jsx)(x.l.Input,{autoFocus:!0})})})}),(0,j.jsx)(P.u_.Footer,{children:(0,j.jsx)(nr.z,{form:"course-section-lesson-rename-form",type:"submit",full:!0,extraLarge:!0,variant:"circle",children:w.isLoading||O.isLoading?(0,o.t)("saving_changes"):(0,o.t)("save_changes")})})]})]})},En=kn.gk.create((function(e){return(0,j.jsx)(An,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),Dn=function(){return(0,kn.dd)(En)};function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fn=function(){return[{label:a().t("courses.edit.sections.statuses.draft"),value:"draft"},{label:a().t("courses.edit.sections.statuses.published"),value:"published"}]},zn=function(e){var t=e.lesson,r=e.section,n=(0,c.useQueryClient)(),o=(0,d.L2)().data,a=Bn((0,b.useState)(t.status),2),s=a[0],l=a[1];(0,b.useEffect)((function(){l(t.status)}),[t.status]);var u,p,m=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateLesson({lessonId:t.id,sectionId:r.id,courseId:o.id}),e)}),{onSuccess:(u=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.invalidateQueries((0,ur.bD)(o.id));case 2:return e.next=4,n.invalidateQueries((0,ur.hE)(t.id));case 4:case"end":return e.stop()}}),e)})),p=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=u.apply(e,t);function o(e){Rn(i,r,n,o,a,"next",e)}function a(e){Rn(i,r,n,o,a,"throw",e)}o(void 0)}))},function(){return p.apply(this,arguments)})});return(0,j.jsx)(St.Lt,{options:Fn(),onChange:function(e){l(e),m.mutate({course_lesson:Ln(Ln({},t),{},{status:e})})},buttonClassName:"w-28",button:(0,j.jsx)(St.Lt.ActiveLabelButton,{className:f()("flex justify-between rounded-md px-2 py-1 text-xs",{"bg-secondary":"draft"===s,"bg-green-100":"published"===s}),labelColor:"published"===s?"text-green-900":"text-dark",activeOptionValue:s,options:Fn()}),dataTestId:"lesson-status-dropdown"})};function Vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hn=(0,b.forwardRef)((function(e,t){var r=e.dragHandleProps,n=e.isDragging,i=e.isNameEditable,a=e.isOverlay,s=e.lesson,l=e.section,c=e.setIsNameEditable,d=e.space,p=e.tableRowProps,m=(0,u.k6)(),h=Gn((0,b.useState)(!1),2),v=h[0],y=h[1],g=(0,Ot.kK)(),_=Dn(),x=function(){m.push(ie.H4.editLesson({spaceSlug:d.slug,sectionId:l.id,lessonId:s.id}))};return(0,j.jsxs)(xr.SC,qn(qn({id:"lesson-item-".concat(s.id),ref:t},p||{}),{},{className:f()("bg-primary group cursor-auto",{"opacity-50":n,"overflow-hidden rounded-md shadow-lg":a}),dataTestId:"course-lesson-row",children:[(0,j.jsx)(xr.pj,qn(qn({className:"pl-3 pr-0 md:pl-10"},(0,_r.XG)(d)&&{colSpan:3}),{},{children:(0,j.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,j.jsx)("div",qn(qn({className:"hover:bg-secondary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null===r||void 0===r?void 0:r.setActivatorNodeRef},(null===r||void 0===r?void 0:r.listeners)||{}),{},{children:(0,j.jsx)(_e.JO,{type:"16-reorder",size:16})})),i&&!a?(0,j.jsx)(Pn,{lesson:s,section:l,onClose:function(){return null===c||void 0===c?void 0:c(!1)}}):(0,j.jsx)("button",{type:"submit",className:"hover:border-dark mr-4 cursor-pointer truncate border-b border-dashed border-transparent",title:s.name,onClick:function(){return null===c||void 0===c?void 0:c(!0)},children:(0,j.jsx)(Y.Z.LabelSm,{children:s.name})})]})})),(0,j.jsx)(xr.pj,{colSpan:1,className:"!pr-6 text-right",children:(0,j.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[!a&&(0,j.jsx)(nr.z,{className:"!text-dark hover:bg-tertiary invisible rounded !px-2 !py-1 !font-normal sm:group-hover:visible",variant:"plain",onClick:x,children:(0,o.t)("courses.edit.sections.edit_lesson")}),(0,j.jsx)(zn,{lesson:s,section:l}),!a&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(St.Lt,{size:St.wk.SMALL,button:(0,j.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,j.jsx)(_e.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"lesson-dropdown-menu",children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){m.push(ie.H4.showLesson({spaceSlug:d.slug,sectionId:l.id,lessonId:s.id}))},children:(0,o.t)("courses.edit.lesson.view_lesson")}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:x,children:(0,o.t)("courses.edit.sections.edit_lesson")}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){return g?_.show({courseId:d.id,sectionId:l.id,lessonId:s.id,defaultName:s.name}):setTimeout((function(){return null===c||void 0===c?void 0:c(!0)}),100)},children:(0,o.t)("courses.edit.sections.rename_lesson")}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){return y(!0)},children:(0,o.t)("courses.edit.sections.delete_lesson")})]}),(0,j.jsx)(_n,{show:v,onClose:function(){return y(!1)},courseId:d.id,lessonId:s.id,sectionId:l.id,name:s.name})]})]})})]}))}));Hn.displayName="LessonItem";var Qn=["lesson","section","space"];function Jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(r),!0).forEach((function(t){$n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Yn=function(e){var t=e.lesson,r=e.section,n=e.space,i=Xn(e,Qn),o=(0,gr.nB)({id:t.sortId,data:{dragType:"lesson",item:t,sectionSortId:r.sortId}}),a=o.attributes,s=o.listeners,l=o.setActivatorNodeRef,c=o.setNodeRef,u=o.transform,d=o.transition,p=o.isDragging,f={transform:Cr.ux.Transform.toString(u),transition:d};return(0,j.jsx)(Hn,Kn({isDragging:p,ref:c,lesson:t,section:r,space:n,tableRowProps:Kn({style:f},a),dragHandleProps:{listeners:s,setActivatorNodeRef:l}},i))},ei=r(31736),ti=r(48581);function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ni(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ai="courses.edit.sections.drip_schedule.form",si=function(e){var t=(0,_r.nl)(e),r=(0,_r.Cc)(e);return(0,_r.Hv)(r,t)},li=function(e){return["days","weeks"].map((function(t){return{label:(0,o.t)("".concat(ai,".").concat(t),{count:e}),value:t}}))},ci=function(e){var t=e.onChange,r=e.dripDelay,n=e.disabled,i=ii((0,b.useState)((0,_r.nl)(r)),2),a=i[0],s=i[1],l=ii((0,b.useState)((0,_r.Cc)(r)),2),c=l[0],u=l[1],d=ii((0,b.useState)(!1),2),p=d[0],f=d[1],m=ii((0,b.useState)(si(r)),2),h=m[0],v=m[1],y=(0,b.useRef)(null),g=(0,o.t)("".concat(ai,".drip_delay_button_text"),{drip_delay:h}),_=(0,o.t)("".concat(ai,".").concat(a),{count:c}),x=(0,o.t)("".concat(ai,".drip_delay_message"),{drip_delay:(0,_r.Hv)(c,a).toLowerCase()});(0,b.useEffect)((function(){v(si(r)),s((0,_r.nl)(r)),u((0,_r.Cc)(r))}),[r]);var w=function(e,t){var r=parseInt(e)||0,n=ii("weeks"===t?[0,100]:[0,999],2),i=n[0],o=n[1];r=Math.min(Math.max(r,i),o),u(r)};return(0,j.jsxs)("div",{children:[(0,j.jsxs)(nr.z,{disabled:n,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",forwardedRef:y,onClick:function(){f(!p)},children:[(0,j.jsx)("span",{children:g}),(0,j.jsx)(_e.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),(0,j.jsx)(ei.ZP,{visible:p,onClickOutside:function(e,t){y.current instanceof HTMLButtonElement&&t.target instanceof HTMLElement&&(t.target===y.current||y.current.contains(t.target))||f(!1)},allowHTML:!0,interactive:!0,duration:0,arrow:!1,delay:0,theme:"drip-delay-dropdown",placement:"bottom-start",content:(0,j.jsxs)("div",{className:"bg-primary border-primary mb-6 w-64 rounded-md border !px-4 !pt-3 shadow-md",children:[(0,j.jsx)(Y.Z.BodyMd,{weight:"font-semibold",children:(0,o.t)("".concat(ai,".drip_delay"))}),(0,j.jsxs)("div",{className:"my-3 flex w-full items-center justify-between",children:[(0,j.jsx)("div",{className:"w-20",children:(0,j.jsx)(ti.I,{min:0,max:1e3,value:c,onChange:function(e){w(e.target.value,a)},otherClassName:"!p-2",type:"number"})}),(0,j.jsx)(St.Lt,{className:"ml-2 grow",buttonClassName:"w-full",size:St.wk.SMALL,onChange:function(e){s(e),w(c,e)},button:(0,j.jsxs)(nr.z,{large:!0,variant:"secondary",className:"!border-primary !flex w-full items-center justify-between !px-4 !pr-3 !font-normal",children:[(0,j.jsx)("span",{children:_}),(0,j.jsx)(_e.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),options:li(c)})]}),(0,j.jsx)(Y.Z.BodySm,{children:x}),(0,j.jsx)(nr.z,{variant:"circle",full:!0,className:"my-3",onClick:function(){var e="days"===a?c:7*c;t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(r),!0).forEach((function(t){ni(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({drip_delay:e},0===e&&{notify_students_enabled:!1})),f(!1)},children:(0,o.t)("done")})]}),children:(0,j.jsx)("span",{})})]})},ui=r(20036);function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fi=function(e){return e&&(0,Nr.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},mi=function(e){var t,r=e.onChange,n=e.disabled,i=e.section,a=di((0,b.useState)(!1),2),s=a[0],l=a[1],c=di((0,b.useState)(fi(i.dripped_at)),2),u=c[0],d=c[1],p=(0,b.useRef)(null);return i.is_dripped?t=(0,o.t)("courses.edit.sections.drip_schedule.form.section_already_available"):i.dripped_at||(t=(0,o.t)("courses.edit.sections.drip_schedule.form.section_immediately_available")),(0,j.jsxs)("div",{className:"!py-0",children:[(0,j.jsx)($t.T,{disabled:!t,content:t,children:(0,j.jsxs)(nr.z,{forwardedRef:p,disabled:n||!!i.drip_notifications_sent_at,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",onClick:function(){l(!s)},children:[(0,j.jsx)("span",{children:u||(0,o.t)("courses.edit.sections.drip_schedule.form.select_drip_date")}),(0,j.jsx)(_e.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]})}),(0,j.jsx)(ui.M,{datePickerVisible:s,onClickOutside:function(e,t){p.current instanceof HTMLButtonElement&&t.target instanceof HTMLElement&&(t.target===p.current||p.current.contains(t.target))||l(!1)},onCancel:function(){d(fi(null)),r({dripped_at:null}),l(!1)},cancelButtonText:(0,o.t)("courses.edit.sections.drip_schedule.form.clear_date"),value:i.dripped_at||"",onSave:function(e){d(fi(e)),r({dripped_at:e}),l(!1)},saveButtonVariant:"circle"})]})};function bi(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var hi=function(e){var t,r,n,a=e.space,s=e.section,l=(0,te.p)(),u=l.success,d=l.error,p=(0,c.useQueryClient)(),f=(0,_r.MS)(a)?(0,o.t)("courses.edit.sections.drip_schedule.form.drip_date"):(0,o.t)("courses.edit.sections.drip_schedule.form.drip_delay"),m=function(e){var t=e.section,r=e.options;return{changeDripScheduleMutation:(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:s,options:{onSuccess:(r=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.invalidateQueries((0,ur.bD)(s.space_id));case 2:u((0,o.t)("courses.edit.sections.drip_schedule.form.save_success",{drip_type:f}),{duration:"short",shouldUseProgress:!1});case 3:case"end":return e.stop()}}),e)})),n=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){bi(o,n,i,a,s,"next",e)}function s(e){bi(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)}),onError:function(){d((0,o.t)("courses.edit.sections.drip_schedule.form.save_error",{drip_type:f.toLowerCase()}))}}}),b=m.changeDripScheduleMutation,h=function(e){b.mutate({course_section:e})};return(0,j.jsxs)(j.Fragment,{children:[(0,_r.MS)(a)&&(0,j.jsx)(mi,{onChange:h,section:s,disabled:b.isLoading}),(0,_r.vv)(a)&&(0,j.jsx)(ci,{onChange:h,dripDelay:null!==(t=s.drip_delay)&&void 0!==t?t:0,disabled:b.isLoading})]})};function vi(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _i=function(e){var t,r,n=e.section,o=e.onClose,a=(0,d.L2)().data,s=yi((0,b.useState)(n.name),2),l=s[0],u=s[1],p=(0,c.useQueryClient)(),f=(0,te.p)(),m=(0,c.useMutation)((function(e){return(0,mt.aU)(ie.av.courses.updateSection({courseId:null===a||void 0===a?void 0:a.id,sectionId:n.id}),e)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.invalidateQueries((0,ur.bD)(null===a||void 0===a?void 0:a.id));case 2:o();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){vi(o,n,i,a,s,"next",e)}function s(e){vi(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){f.error(e.errorDetails)}});return(0,j.jsx)(jn,{name:l,setName:u,isLoading:m.isLoading,onSubmit:function(){return m.mutate({course_section:{name:l}})},onClose:o,useSemiboldFont:!0,dataTestId:"section-title"})};function xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(r),!0).forEach((function(t){wi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Si(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Si(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pi=(0,b.forwardRef)((function(e,t){var r=e.dragHandleProps,n=e.isDragging,i=void 0!==n&&n,o=e.isNameEditable,s=void 0!==o&&o,l=e.isOverlay,c=void 0!==l&&l,u=e.section,d=e.setIsNameEditable,p=e.setSections,m=e.space,h=e.tableBodyProps,v=void 0===h?{}:h,y=Oi(fr(),2),g=y[0],_=y[1],x=Oi((0,b.useState)(!1),2),w=x[0],O=x[1],S=u.lessons.map((function(e){return e.sortId})),P=Dn(),k=(0,Ot.kK)();return(0,j.jsxs)(xr.RM,ji(ji({className:f()("bg-primary cursor-auto transition-all duration-200 ease-in-out",{"opacity-50":i,"overflow-hidden rounded-md shadow-lg":c}),ref:t},v),{},{children:[(0,j.jsxs)(xr.SC,{id:"section-item-".concat(u.id),className:"bg-secondary group",dataTestId:"course-section-row",children:[(0,j.jsx)(xr.pj,{className:"px-1 md:px-5",children:(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)("div",ji(ji({className:"hover:bg-primary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null===r||void 0===r?void 0:r.setActivatorNodeRef},(null===r||void 0===r?void 0:r.listeners)||{}),{},{children:(0,j.jsx)(_e.JO,{type:"16-reorder",size:16})})),s&&!c?(0,j.jsx)(_i,{section:u,onClose:function(){return null===d||void 0===d?void 0:d(!1)}}):(0,j.jsx)("button",{type:"button",className:"hover:border-dark truncate border-b border-dashed border-transparent",onClick:function(){return null===d||void 0===d?void 0:d(!0)},children:(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:u.name})})]})}),(0,_r.XG)(m)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(xr.pj,{className:"pr-5",children:!c&&(0,j.jsx)(hi,{section:u,space:m})}),(0,j.jsx)(xr.pj,{className:"pr-5",children:!c&&((0,_r.MS)(m)&&u.dripped_at||(0,_r.vv)(m)&&u.drip_delay>0)&&(0,j.jsx)(un,{section:u,space:m})})]}),(0,j.jsx)(xr.pj,{className:"pr-6 text-right",children:!c&&(0,j.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[(0,j.jsx)(hn,{space:m,section:u,setIsNameEditable:function(e){return _({id:e,value:!0})}}),(0,j.jsxs)(St.Lt,{button:(0,j.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,j.jsx)(_e.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"section-dropdown-menu",children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){return k?P.show({type:"section",sectionId:u.id,courseId:m.id,defaultName:u.name}):setTimeout((function(){return null===d||void 0===d?void 0:d(!0)}),100)},children:a().t("courses.edit.sections.rename_section")}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){return O(!0)},children:a().t("courses.edit.sections.delete_section")})]})]})}),(0,j.jsx)(yn,{show:w,onClose:function(){return O(!1)},courseId:m.id,sectionId:u.id,name:u.name})]}),(0,j.jsx)(gr.Fo,{items:S,strategy:gr.qw,children:u.lessons.map((function(e){return(0,j.jsx)(Yn,{lesson:e,section:u,space:m,setSections:p,isNameEditable:g.get(e.id),setIsNameEditable:function(t){return _({id:e.id,value:t})}},e.id)}))})]}))}));Pi.displayName="SectionItem";var ki=["section","space"];function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){Ii(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ii(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ai(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ei=function(e){var t=e.section,r=e.space,n=Ai(e,ki),i=(0,gr.nB)({id:t.sortId,data:{dragType:"section",item:t}}),o=i.attributes,a=i.listeners,s=i.setActivatorNodeRef,l=i.setNodeRef,c=i.transform,u=i.transition,d=i.isDragging,p={transform:Cr.ux.Transform.toString(c),transition:u};return(0,j.jsx)(Pi,Ni({isDragging:d,ref:l,section:t,space:r,tableBodyProps:Ni({style:p},o),dragHandleProps:{listeners:a,setActivatorNodeRef:s}},n))};function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ti(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){Li(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Li(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mi=function(e){var t=e.space,r=e.sections,n=e.dispatchSectionsNameEditor,i=(0,b.useMemo)((function(){return r.reduce((function(e,t){return e+t.lessons.length}),0)}),[r]);return(0,j.jsxs)(xr.ss,{className:"divide-primary divide-y !border-t-0 p-6","data-testid":"customize-lessons-table-head",children:[(0,j.jsxs)(xr.SC,{children:[(0,j.jsx)(xr.pj,Ti(Ti({},(0,_r.XG)(t)&&{colSpan:3}),{},{className:"px-6",children:(0,j.jsxs)(Y.Z.TitleSm,{as:"span",weight:"semibold",children:[(0,o.t)("courses.edit.section_count",{count:(null===r||void 0===r?void 0:r.length)||0})," ",(0,o.t)("separator_dot")," ",(0,o.t)("courses.edit.lesson_count",{count:i})]})})),(0,j.jsx)(xr.pj,{className:"px-6 text-right",children:(0,j.jsx)(hr,{variant:"circle",sections:r,setIsNameEditable:function(e){return n({id:e,value:!0})}})})]}),(0,j.jsxs)(xr.SC,{children:[(0,j.jsx)(xr.pj,{className:"!py-3 px-6",colSpan:(0,_r.XG)(t)?1:2,children:(0,j.jsx)(Y.Z.LabelXs,{textTransform:"uppercase",children:(0,o.t)("courses.edit.sections.lesson_name")})}),(0,_r.XG)(t)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(xr.pj,{children:(0,j.jsx)(Y.Z.LabelXs,{textTransform:"uppercase",children:(0,o.t)("courses.edit.sections.schedule")})}),(0,j.jsx)(xr.pj,{className:"!px-0 !py-3",colSpan:2,children:(0,j.jsxs)(Y.Z.LabelXs,{textTransform:"uppercase",children:[(0,o.t)("courses.edit.sections.notify_students"),(0,j.jsx)($t.T,{content:(0,o.t)("courses.edit.sections.notify_students_tooltip"),className:"inline-flex",placement:"top-end",children:(0,j.jsx)(_e.JO,{type:"question-mark",className:"ml-2 !w-3"})})]})})]})]})]})};function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Bi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ui=function(e){var t,r,n,i,o,a,s,l,c=e.space,u=e.sections,d=e.setSections,p=e.dispatchSectionsNameEditor,f=e.sectionsNameEditor,m=Ri((0,b.useState)(null),2),h=m[0],v=m[1],y="lesson"===(null===h||void 0===h||null===(t=h.data)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.dragType),g="section"===(null===h||void 0===h||null===(n=h.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.dragType),_=y&&(null===h||void 0===h||null===(o=h.data)||void 0===o||null===(a=o.current)||void 0===a?void 0:a.item),x=g&&(null===h||void 0===h||null===(s=h.data)||void 0===s||null===(l=s.current)||void 0===l?void 0:l.item);return(0,j.jsxs)(kr,{sections:u,setSections:d,setActiveDragItem:v,children:[(0,j.jsxs)(xr.iA,{variant:"no-border",className:"border-primary w-full overflow-hidden rounded-lg border",tableClassName:"table-fixed w-full",dataTestId:"sections-lessons-table",children:[(0,j.jsxs)("colgroup",{children:[(0,j.jsx)("col",{}),(0,_r.XG)(c)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("col",{className:"w-72"}),(0,j.jsx)("col",{className:"w-24"})]}),(0,j.jsx)("col",{className:"w-72"})]}),(0,j.jsx)(Mi,{space:c,sections:u,dispatchSectionsNameEditor:p}),(0,j.jsx)(gr.Fo,{id:"sections-list",items:u.map((function(e){return e.sortId})),strategy:gr.qw,children:u.map((function(e){return(0,j.jsx)(Ei,{setSections:d,space:c,section:e,isNameEditable:f.get(e.id),setIsNameEditable:function(t){return p({id:e.id,value:t})}},e.id)}))})]}),(0,j.jsxs)(yr.y9,{wrapperElement:"table",children:[_&&(0,j.jsx)(Hn,{lesson:_,isOverlay:!0}),x&&(0,j.jsx)(Pi,{space:c,section:x,isOverlay:!0})]})]})};function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vi=function(e){var t=e.sections,r=e.setSections,n=e.sectionsAreLoading,i=e.space,o=Fi(fr(),2),a=o[0],s=o[1];return(0,j.jsx)(N,{className:"!max-w-6xl md:!px-6",children:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("div",{className:"mb-4 flex justify-between","data-testid":"customize-lessons-header",children:(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(Y.Z.TitleMd,{children:I18n.t("courses.edit.sections.lessons")}),(0,j.jsx)(dr.T,{space:i})]})}),n?(0,j.jsx)(mr.m,{}):t.length?(0,j.jsx)(Ui,{space:i,sections:t,setSections:r,dispatchSectionsNameEditor:s,sectionsNameEditor:a}):(0,j.jsx)(vr,{sections:t,dispatchSectionsNameEditor:s})]})})};function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(r),!0).forEach((function(t){Hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qi=function(e){var t=e.space,r=(0,ur.rF)(t.id),n=r.data,i=r.isLoading,o=r.dataUpdatedAt,a=(0,b.useMemo)((function(){return((null===n||void 0===n?void 0:n.records)||[]).map((function(e){var t;return Wi(Wi({},e),{},{sortId:"section-".concat(e.id),lessons:null===e||void 0===e||null===(t=e.lessons)||void 0===t?void 0:t.map((function(e){return Wi(Wi({},e),{},{sortId:"lesson-".concat(e.id)})}))})}))}),[n,o]),s=qi((0,b.useState)(a),2),l=s[0],c=s[1];return(0,b.useEffect)((function(){c(a)}),[n,a,o]),(0,j.jsx)(Vi,{sectionsAreLoading:i,sections:l,setSections:c,space:t})},Ji=r(62034),Ki=r(72669),$i=r(38503),Xi=r(88056),Yi=r(56568),eo=r(59038),to=r(93260),ro=r(40770);function no(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?no(Object(r),!0).forEach((function(t){oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):no(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ao=function(e){var t=e.children,r=e.space,n=void 0===r?{}:r,i=(0,to.z)(n),o=(0,v.cI)({defaultValues:{lock_screen_blocks:i}});return(0,j.jsx)(v.RV,io(io({},o),{},{children:(0,j.jsx)(eo.i4,{name:"lock_screen_blocks",children:(0,j.jsx)(ro._,{children:t})})}))};function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uo=r(36571),po=Object.assign({},{WebPreview:function(e){var t=e.space,r=void 0===t?{}:t,n=(0,$i.sL)(),i=(0,eo.sE)().blocks,o=r.emoji,a=void 0===o?"":o,s=r.name,l=void 0===s?"":s;return(0,j.jsx)(uo.n,{theme:n,headerSpaceEmoji:a,headerSpaceTitle:l,blocks:i,screenSize:"desktop"})},MobilePreview:function(e){var t=e.space,r=void 0===t?{}:t,n=(0,$i.sL)(),i=(0,eo.sE)().blocks,o=r.name,a=void 0===o?"":o;return(0,j.jsx)(Xi.t,{className:"!bg-secondary",children:(0,j.jsx)(Yi.x,{headerSpaceTitle:a,blocks:i,theme:lo(lo({},n),{},{default_appearance:"light"})})})}}),fo=r(4079),mo=r(35337),bo=r(57080),ho=["children"],vo=["children"],yo=["children"];function go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?go(Object(r),!0).forEach((function(t){xo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jo(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var wo=(0,o.t)("courses.lockscreen.tabs.content"),Oo=(0,o.t)("courses.lockscreen.tabs.design"),So=[{label:wo},{label:Oo}],Po=function(e){var t=e.children,r=jo(e,ho);return(0,j.jsx)(bo.LU,_o(_o({tabs:So,initialTab:wo,wrapperClassName:"px-0 overflow-x-auto"},r),{},{children:t}))},ko=function(e){var t=e.children,r=jo(e,vo);return(0,j.jsx)(bo.xf,_o(_o({tab:wo,className:"overflow-y-visible"},r),{},{children:t}))},Co=function(e){var t=e.children,r=jo(e,yo);return(0,j.jsx)(bo.xf,_o(_o({tab:Oo,className:"overflow-y-visible"},r),{},{children:t}))},No="#000000",Io=function(e){var t=e.blockDataPath,r=(0,v.qo)({name:"".concat(t,".button_label")}),n=(0,v.qo)({name:"".concat(t,".button_link")});return(0,j.jsxs)(Po,{children:[(0,j.jsxs)(ko,{children:[(0,j.jsx)(x.l.Item,{name:"".concat(t,".heading"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.heading"),children:(0,j.jsx)(x.l.Input,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".description"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.description"),children:(0,j.jsx)(x.l.TextArea,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".button_label"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.button_label"),rules:{required:n&&(0,o.t)("courses.lockscreen.errors.button_label_required")},children:(0,j.jsx)(x.l.Input,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".button_link"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.button_link"),rules:{required:r&&(0,o.t)("courses.lockscreen.errors.button_link_required"),pattern:{value:fo.OT,message:(0,o.t)("courses.lockscreen.errors.button_link_invalid")}},children:(0,j.jsx)(x.l.Input,{})})]}),(0,j.jsxs)(Co,{children:[(0,j.jsx)("div",{className:"mb-5"}),(0,j.jsx)(mo.Y,{label:(0,o.t)("courses.lockscreen.fields.background_image"),name:"".concat(t,".background_image"),aspectRatio:4,customAspectRatioHelpText:(0,o.t)("image_upload.recommended_size_lock_screen_background_image"),previewVariant:"cover",hideUnsplash:!1}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".overlay_color"),label:(0,o.t)("courses.lockscreen.fields.overlay_color"),placeholder:No,hideBorder:!0,hideDescription:!0,children:(0,j.jsx)(x.l.ColorPicker,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".heading_color"),label:(0,o.t)("courses.lockscreen.fields.heading"),placeholder:No,hideBorder:!0,hideDescription:!0,children:(0,j.jsx)(x.l.ColorPicker,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".text_color"),label:(0,o.t)("courses.lockscreen.fields.text"),placeholder:No,hideBorder:!0,hideDescription:!0,children:(0,j.jsx)(x.l.ColorPicker,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".button_background_color"),label:(0,o.t)("courses.lockscreen.fields.button_background"),placeholder:No,hideBorder:!0,hideDescription:!0,children:(0,j.jsx)(x.l.ColorPicker,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".button_text_color"),label:(0,o.t)("courses.lockscreen.fields.button_label"),placeholder:No,hideBorder:!0,hideDescription:!0,children:(0,j.jsx)(x.l.ColorPicker,{})})]})]})};function Ao(e){return function(e){if(Array.isArray(e))return Eo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Do(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Do(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mo=r(45144),Ro=r(23127);function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fo=function(e){var t=e.blockDataPath,r=(0,d.L2)().data,n=(0,v.Gc)(),i=n.watch,a=n.setValue,s=(0,v.cl)().defaultValues,l=Bo((0,b.useState)(!0),2),c=l[0],u=l[1],p="".concat(t,".locked_page_description.trix_html"),f="".concat(t,".locked_page_description.rendered_html_with_layout"),h=Bo((0,b.useState)((0,m.get)(s,p)),2),y=h[0],g=h[1],_=i(p),x=(0,Ji.z1)({space:r,options:{onSuccess:function(e){var t,r=null===e||void 0===e||null===(t=e.locked_page_description)||void 0===t?void 0:t.rendered_html_with_layout;a(f,r)}}}).mutate;return(0,b.useEffect)((function(){if(_!==y){if(_!==y&&c)return g(_),void u(!1);var e=(0,m.debounce)((function(){x({locked_page_description:_})}),500);return e(),e.cancel}}),[x,y,_,c]),(0,j.jsxs)("div",{className:"pb-2 pt-5",children:[(0,j.jsx)("div",{className:"text-dark mb-2 flex items-center",children:(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("courses.lockscreen.fields.description")})}),(0,j.jsx)("div",{className:"trix-v2",children:(0,j.jsx)(Ro.O,{className:"locked-page-description",name:p,id:p})}),(0,j.jsx)(Mo.v,{className:"mt-2",children:(0,o.t)("courses.lockscreen.legacy_description_update_warning")})]})},zo=r(25882),Vo=r(56031),qo=r(92130);function Zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(r),!0).forEach((function(t){Wo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ho=function(e){var t=function(e){return{label:e.short_description,value:e.id,paywall_id:e.paywall_id}},r=function(e,t){return Go({paywall_id:t.id,currency_code:t.currency.code,trial_days:e.is_web_price?t.trial_days:0},e)},n=(0,b.useMemo)((function(){return null!==e&&void 0!==e&&e.data?(0,m.flatten)(e.data.map((function(e){return e.stripe_prices_attributes.map((function(t){return r(t,e)}))}))):[]}),[null===e||void 0===e?void 0:e.data]),i=(0,b.useMemo)((function(){return null!==e&&void 0!==e&&e.data?(0,m.flatten)(e.data.map((function(e){return e.mobile_price_packages_attributes.map((function(t){return function(e,t){return Go(Go({},r(e.price_properties,t)),{},{processor_id:e.processor_id,price_package_id:e.id,id:e.id})}(t,e)}))}))):[]}),[null===e||void 0===e?void 0:e.data]),o=(0,b.useMemo)((function(){return i.map(t)}),[i]),a=(0,b.useMemo)((function(){return(0,m.compact)(n.map(t))}),[n]),s=(0,b.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)>0}),[a]);return{allStripePrices:n,allMobilePrices:i,allInAppPaywallPriceOptions:o,allWebPaywallPriceOptions:a,hasWebPaywallPrices:s}},Qo=function(e){var t="".concat(e,".paywalls"),r=(0,v.Dq)({name:t,keyName:"_id"}),n=(0,v.Gc)().watch;(0,b.useEffect)((function(){0===r.fields.length&&r.append({id:void 0,paywall_highlighted:!1})}),[r.fields.length]);var i=function(){var e,t=(0,d.L2)().data,r=(0,qo.O)({communityMemberId:null,status:[Vo.Tl.ACTIVE],spaceIds:[null===t||void 0===t?void 0:t.id]}).paywallsListQuery,n=function(e){var t=e.stripe_prices_attributes.length>0,r=e.mobile_prices_attributes.length>0,n=(0,m.compact)([t?(0,o.t)("web"):null,r?(0,o.t)("in_app"):null]);return{value:e.id,label:e.internal_name||e.display_name,description:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.includes",{price_types:n.join(", "),count:n.length})}},i=(0,b.useMemo)((function(){return null!==r&&void 0!==r&&r.data?r.data.map(n):[]}),[null===r||void 0===r?void 0:r.data]),a=(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.length)>0;return{paywallsListQuery:r,getPaywallAsOption:n,allPaywallOptions:i,hasPaywalls:a}}(),a=i.paywallsListQuery,s=i.allPaywallOptions,l=i.hasPaywalls,c=Ho(a),u=c.allStripePrices,p=c.allMobilePrices,f=c.allInAppPaywallPriceOptions,h=c.allWebPaywallPriceOptions,y=c.hasWebPaywallPrices,g=n(t),_=g.map((function(e){return e.id})),x=0===s.filter((function(e){return!_.includes(e.value)})).length,j=g.length>=6,w=g.some((function(e){var t;return!e.id||!(null!==e&&void 0!==e&&null!==(t=e.web_paywall_price)&&void 0!==t&&t.id)}));return{fieldArrayMethods:r,allStripePrices:u,allMobilePrices:p,paywallsListQuery:a,selectedPaywallIds:_,allPaywallOptions:s,allInAppPaywallPriceOptions:f,allWebPaywallPriceOptions:h,hasWebPaywallPrices:y,hasPaywalls:l,shouldDisableAddPaywall:x||j||w,onClickAddPaywall:function(){r.append({id:void 0,paywall_highlighted:!1})},fieldNameRoot:t}};function Jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(r),!0).forEach((function(t){$o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xo=(0,b.createContext)({blockDataPath:""});Xo.displayName="PaywallsEditFormProvider";var Yo=function(e){var t=e.children,r=e.blockDataPath,n=Qo(r),i=(0,ro.B)(),o=i.previewMode,a=i.setPreviewMode,s=Ko(Ko({blockDataPath:r},n),{},{previewMode:o,setPreviewMode:a});return(0,j.jsx)(Xo.Provider,{value:s,children:t})},ea=function(){return(0,b.useContext)(Xo)},ta=function(){var e=ea(),t=e.previewMode,r=e.setPreviewMode;return(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.title")}),(0,j.jsxs)("label",{className:"bg-tertiary border-hover relative inline-flex h-9 w-full cursor-pointer items-center rounded-lg border",children:[(0,j.jsxs)("div",{className:"z-[3] grid w-full grid-cols-2",children:[(0,j.jsx)(Y.Z.LabelMd,{textTransform:"text-center",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.web_option")}),(0,j.jsx)(Y.Z.LabelMd,{textTransform:"text-center",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.mobile_option")})]}),(0,j.jsx)("input",{type:"checkbox",checked:(0,zo.g)(t),className:"peer sr-only",onChange:function(e){var t=e.target.checked?"mobile":"desktop";r(t)}}),(0,j.jsx)("div",{className:"after:bg-primary absolute left-0.5 top-[0.0625rem] w-full after:absolute after:h-8 after:w-[49.375%] after:rounded-lg after:transition-all after:content-[''] peer-checked:after:translate-x-full"})]})]})},ra=r(95982),na=r(74481),ia=function(){var e=(0,wt.I)().show,t=ea().paywallsListQuery,r=(0,d.wh)().currentCommunity,n=(0,ra.l)({paymentProcessor:r.payment_processor}).paymentProcessorStatus;return(0,j.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.paywalls")}),(0,na._k)(n)&&(0,j.jsxs)(St.Lt,{button:(0,j.jsx)(xn.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,o.t)("community_member.actions")}),children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){window.open(ie.lA.paywalls.index,"_blank")},linkType:"button",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.manage_paywalls")}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){return e({paywall:void 0,refetchPaywalls:function(){t.refetch()},paywallGroupsEnabled:!0})},linkType:"button",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.create_paywall")})]})]})},oa=r(10161),aa=function(e){var t=e.onClickButton,r=void 0===t?m.noop:t,n=e.title,i=e.subtitle,o=e.buttonText;return(0,j.jsxs)("div",{className:"flex h-[70%] flex-col justify-center gap-y-2 text-center",children:[n&&(0,j.jsx)(Y.Z.LabelMd,{weight:"bold",children:n}),i&&(0,j.jsx)(Y.Z.BodyMd,{color:"text-default",children:(0,j.jsx)(oa.w,{content:i})}),o&&(0,j.jsx)("div",{className:"pt-2",children:(0,j.jsx)(nr.z,{variant:"circle",type:"button",onClick:r,children:o})})]})},sa="paywalls.lock_screen.sidebar.paywall_edit_form.branded_app_empty_state",la=function(){window.open(ie.lA.plans.brandedApps,"_blank")},ca=function(e){var t=e.children,r=(0,ro.B)(),n=r.shouldShowBrandedAppBanner,i=r.isCommunityOnPlus;return n&&!i?(0,j.jsx)(aa,{subtitle:(0,o.t)([sa,"community_not_on_plus_plan","title"]),buttonText:(0,o.t)("learn_more"),onClickButton:la}):n&&i?(0,j.jsx)(aa,{subtitle:(0,o.t)([sa,"community_on_plus_plan","title"]),buttonText:(0,o.t)("sign_up")}):(0,j.jsx)(j.Fragment,{children:t})},ua=function(){return(0,j.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,j.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,j.jsx)(Y.Z.BodySm,{textTransform:"text-center",children:(0,o.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.title")}),(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsx)(nr.z,{type:"button",onClick:function(){window.open(ie.lA.paywalls.index,"_blank")},full:!1,children:(0,o.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.cta")})})]})})},da=function(){return(0,j.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,j.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,j.jsx)(Y.Z.BodySm,{textTransform:"text-center",children:(0,o.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.title")}),(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsx)(nr.z,{type:"button",onClick:function(){window.open(ie.lA.paywalls.index,"_blank")},full:!1,children:(0,o.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.cta")})})]})})},pa=function(e){var t=e.children,r=ea(),n=r.hasPaywalls,i=r.hasWebPaywallPrices;return n&&!i?(0,j.jsx)(da,{}):n||i?(0,j.jsx)(j.Fragment,{children:t}):(0,j.jsx)(ua,{})},fa=function(e){var t=e.localeString,r=e.icon,n=e.useWithFillCurrentColor;return(0,j.jsxs)("div",{className:"flex flex-row gap-x-2.5 self-center",children:[(0,j.jsx)(_e.JO,{className:"",type:r,size:16,useWithFillCurrentColor:n}),(0,o.t)(t)]})},ma=function(e){var t=e.index,r=(0,v.Gc)(),n=r.setValue,i=r.watch,a=r.unregister,s=ea(),l=s.fieldArrayMethods,c=s.fieldNameRoot,u=i("".concat(c,".").concat(t,".paywall_highlighted")),d=l.fields.length>1;return(0,j.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.paywall_title",{index:t+1})}),(0,j.jsxs)(St.Lt,{button:(0,j.jsx)(xn.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,o.t)("community_member.actions")}),children:[u&&(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){n("".concat(c,".").concat(t,".paywall_highlighted"),!1)},linkType:"button",children:(0,j.jsx)(fa,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.remove_highlight",icon:"16-star-fill"})}),!u&&(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){l.fields.forEach((function(e,r){n("".concat(c,".").concat(r,".paywall_highlighted"),r===t)}))},linkType:"button",children:(0,j.jsx)(fa,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.highlight_price",icon:"16-star"})}),d&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){l.swap(t,t-1)},isDisabled:t<=0,linkType:"button",children:(0,j.jsx)(fa,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_up",icon:"16-arrow-up"})}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){l.swap(t,t+1)},isDisabled:l.fields.length<=t+1,linkType:"button",children:(0,j.jsx)(fa,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_down",icon:"16-arrow-down"})}),(0,j.jsx)(St.Lt.ItemWithLink,{onClick:function(){a("".concat(c,".").concat(t,".id")),l.remove(t)},linkType:"button",hasDanger:!0,children:(0,j.jsx)(fa,{localeString:"delete",icon:"16-trash-bin"})})]})]})]})},ba=r(2500);function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(r),!0).forEach((function(t){ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ya(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ga=function(e){return{id:e.id,scenario:e.scenario,amount:e.amount,upfront_payment_amount:e.upfront_payment_amount,installments_count:e.installments_count,installment_amount:e.installment_amount,interval_count:e.interval_count,interval:e.interval,price_type:e.price_type,trial_days:e.trial_days}},_a=function(e){var t;return e?"stripe"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stripe")?ga(e):va(va({},ga(t=e)),{},{processor_id:t.processor_id,price_package_id:t.price_package_id}):{id:null}};function xa(e){return function(e){if(Array.isArray(e))return ja(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ja(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ja(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(r),!0).forEach((function(t){Sa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pa=function(e){var t=e.index,r=e.initialPaywallId,n=ea(),i=n.allPaywallOptions,a=n.allMobilePrices,s=n.paywallsListQuery,l=n.selectedPaywallIds,c=n.fieldNameRoot,u=n.fieldArrayMethods,d="".concat(c,".").concat(t,".id"),p=(0,v.qo)({name:d,defaultValue:null}),f=(0,v.Gc)(),m=f.getFieldState,h=f.formState,y=m(d).error,g=!!h.errors&&!!y;(0,b.useEffect)((function(){var e,n,i;p&&p!==r&&(e=s.data.find((function(e){return e.id===p})),n=e.prices.find((function(e){return e.is_web_price})),i=a.find((function(t){return t.paywall_id===e.id})),u.update(t,{id:e.id,display_name:e.display_name,description:e.description,checkout_path:e.checkout_path,paywall_highlighted:!1,currency:{id:e.currency.id,code:e.currency.code,symbol:e.currency.symbol},processor_id:null===e||void 0===e?void 0:e.processor_id,mobile_processor_id:null===e||void 0===e?void 0:e.mobile_processor_id,status:null===e||void 0===e?void 0:e.status,web_paywall_price:Oa(Oa({},_a(n)),{},{trial_days:null===e||void 0===e?void 0:e.trial_days}),mobile_paywall_price:_a(i,"mobile")}))}),[p,r]);var _=function(e){return!l.includes(e.value)},x=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(_);return e?t.filter((function(t){return function(e,t){return("string"===typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}(t,e)})):xa(t)};return(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_paywall")}),(0,j.jsx)(v.Qr,{name:d,defaultValue:r,rules:{required:(0,o.t)("paywalls.lock_screen.sidebar.errors.paywall_not_selected")},render:function(e){var t=e.field;return(0,j.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,j.jsx)(ba.rx,Oa({isError:g,options:i,buttonClassName:"flex flex-col w-full p-4",filterBy:x},t)),g&&(0,j.jsx)(Y.Z.LabelXs,{color:"text-feedback-error",children:y.message})]})}})]})},ka=r(53103);function Ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(r),!0).forEach((function(t){Ia(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Aa=function(e){var t,r=e.paywall,n=e.filterByPrice,i=e.index,a=(0,wt.I)().show,s=ea(),l=s.paywallsListQuery,c=s.allInAppPaywallPriceOptions,u=s.fieldArrayMethods,d=s.allMobilePrices,p=(0,b.useMemo)((function(){var e;return 0===n(c).length&&!(null!==r&&void 0!==r&&null!==(e=r.mobile_paywall_price)&&void 0!==e&&e.id)}),[c,n,r]);return(0,j.jsx)(j.Fragment,{children:p?(0,j.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,j.jsx)(Y.Z.BodySm,{children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_mobile_prices")}),(0,j.jsx)("div",{children:(0,j.jsx)(nr.z,{variant:"circle",type:"button",onClick:function(){var e;return a({paywall:(null!==(e=null===l||void 0===l?void 0:l.data)&&void 0!==e?e:[]).find((function(e){return e.id===r.id})),refetchPaywalls:function(){l.refetch()},paywallGroupsEnabled:!0,initialTab:ka.eA.PRICING_TAB})},children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_mobile_price")})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,j.jsx)(ba.rx,{options:c,value:null===r||void 0===r||null===(t=r.mobile_paywall_price)||void 0===t?void 0:t.price_package_id,buttonClassName:"flex flex-col w-full p-4",filterBy:n,onChange:function(e){var t=d.find((function(t){return t.id===e}));u.update(i,Na(Na({},r),{},{mobile_paywall_price:_a(t,"mobile")}))}})]})})};function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){Ta(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ta(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var La=function(e){var t,r=e.paywall,n=e.filterByPrice,i=e.index,a=ea(),s=a.allStripePrices,l=a.allWebPaywallPriceOptions,c=a.fieldNameRoot,u=(0,v.Gc)(),d=u.setValue,p=u.watch,f=u.formState,m=u.getFieldState,h="".concat(c,".").concat(i,".web_paywall_price.id"),y=p(h),g=m(h).error,_=!!f.errors&&!!g;(0,b.useEffect)((function(){var e;y&&(e=s.find((function(e){return e.id===y})),d("".concat(c,".").concat(i,".web_paywall_price"),_a(e)))}),[y]);var x=0===l.length&&!(null===r||void 0===r||null===(t=r.web_paywall_price)||void 0===t||!t.id);return(0,j.jsx)(j.Fragment,{children:x?(0,j.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,j.jsx)(Y.Z.BodySm,{children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_web_prices")}),(0,j.jsx)("div",{children:(0,j.jsx)(nr.z,{variant:"circle",type:"button",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_web_price")})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,j.jsx)(v.Qr,{name:h,defaultValue:y,rules:{required:(0,o.t)("paywalls.lock_screen.sidebar.errors.paywall_price_not_selected")},render:function(e){var t=e.field;return(0,j.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,j.jsx)(ba.rx,Da({isError:_,options:l,buttonClassName:"flex flex-col w-full p-4",filterBy:n},t)),_&&(0,j.jsx)(Y.Z.LabelXs,{color:"text-feedback-error",children:g.message})]})}})]})})};function Ma(e){return function(e){if(Array.isArray(e))return Ra(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ra(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ra(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ba=function(e){var t=e.index,r=ea(),n=r.fieldNameRoot,i=r.previewMode,o=(0,(0,v.Gc)().watch)("".concat(n,".").concat(t)),a=(0,zo.h)(i)?null===o||void 0===o?void 0:o.web_paywall_price:null===o||void 0===o?void 0:o.mobile_paywall_price,s=function(e){return e.paywall_id===o.id&&e.value!==(null===a||void 0===a?void 0:a.id)},l=function(e){return e.paywall_id===o.id&&e.value!==(null===a||void 0===a?void 0:a.price_package_id)},c=(0,zo.h)(i)?La:Aa;return null!==o&&void 0!==o&&o.id?(0,j.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,j.jsx)(c,{paywall:o,filterByPrice:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((0,zo.h)(i)?l:s);return e?t.filter((function(t){return function(e,t){return("string"===typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}(t,e)})):Ma(t)},index:t})}):null},Ua=function(){var e=ea(),t=e.shouldDisableAddPaywall,r=e.fieldArrayMethods,n=e.onClickAddPaywall;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"divide-primary flex w-full flex-col divide-y",children:r.fields&&r.fields.map((function(e,t){return(0,j.jsxs)("div",{className:"flex flex-col gap-y-4 py-6 first:pt-0 last:pb-0",children:[(0,j.jsx)(ma,{index:t}),(0,j.jsxs)("div",{className:f()("flex flex-col gap-y-4"),children:[(0,j.jsx)(Pa,{initialPaywallId:e.id,index:t}),(0,j.jsx)(Ba,{index:t})]})]},e._id)}))}),(0,j.jsx)(nr.z,{variant:"circle",large:!0,type:"button",onClick:n,disabled:t,children:(0,o.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_paywall")})]})},Fa=function(){return(0,j.jsx)(ca,{children:(0,j.jsx)(pa,{children:(0,j.jsx)(Ua,{})})})},za=function(e){var t=e.children,r=(0,d.wh)().currentCommunity,n=(0,ra.l)({paymentProcessor:r.payment_processor}).paymentProcessorStatus;return(0,na._k)(n)?(0,j.jsx)(j.Fragment,{children:t}):(0,j.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,j.jsx)(Y.Z.LabelMd,{weight:"bold",children:(0,o.t)("paywalls.lock_screen.sidebar.connect_stripe_container.title")}),(0,j.jsx)(Y.Z.BodyMd,{color:"text-default",children:(0,j.jsx)(oa.w,{content:(0,o.t)("paywalls.lock_screen.sidebar.connect_stripe_container.text")})}),(0,j.jsx)("div",{className:"pt-2",children:(0,j.jsx)(nr.z,{variant:"circle",type:"button",onClick:function(){window.open(ie.lA.paywalls.index,"_blank")},children:(0,o.t)("paywalls.lock_screen.sidebar.connect_stripe_container.cta")})})]})},Va=function(){return(0,j.jsx)(za,{children:(0,j.jsx)(pa,{children:(0,j.jsx)(Ua,{})})})},qa=function(){var e=(0,ro.B)().previewMode;return(0,zo.h)(e)?(0,j.jsx)(Va,{}):(0,j.jsx)(Fa,{})},Za=function(){var e=ea(),t=e.paywallsListQuery,r=e.fieldNameRoot,n=(0,v.Gc)(),i=n.watch,o=n.reset,a=i(r);return(0,b.useEffect)((function(){o(void 0,{keepDirty:!0,keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0,keepTouched:!0})}),[a,o]),t.isLoading?(0,j.jsx)("div",{className:"flex flex-col",children:(0,j.jsx)(ft.a,{})}):(0,j.jsx)("div",{className:"flex h-full flex-col justify-start gap-y-6",children:(0,j.jsx)(qa,{})})},Ga={banner:function(e){var t=e.blockDataPath;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.block_name.banner")}),(0,j.jsx)(Io,{blockDataPath:t})]})},description:function(e){var t=e.blockDataPath,r=(0,v.Gc)(),n=r.watch,i=r.setValue,a="".concat(t,".sgids_to_object_map"),s=n(a)||{},l="".concat(t,".inline_attachments"),c=n(l)||[];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"mb-7 flex flex-col gap-2",children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.block_name.description")}),(0,j.jsx)(Y.Z.LabelSm,{children:(0,o.t)("courses.lockscreen.placeholder.slash_commands")})]}),(0,j.jsx)("div",{className:"border-primary h-96 resize-y overflow-y-auto rounded-lg border px-4 py-3",children:(0,j.jsx)(le.$,{name:"".concat(t,".description_tiptap"),sgidToObjectMap:s,inlineAttachments:c,className:"h-full",editorClassName:"h-full",onLocalSgidToObjectMapChange:function(e){var t=To(To({},s),e);i(a,t)},onLocalAttachmentsChange:function(e){return i(l,[].concat(Ao(c),Ao(e)))},disabledExtensions:["mention","poll","ai_copilot"]})})]})},call_to_action:function(e){var t=e.blockDataPath;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.block_name.call_to_action")}),(0,j.jsx)(Io,{blockDataPath:t})]})},legacy_lock_screen:function(e){var t=e.blockDataPath;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.block_name.legacy_lock_screen")}),(0,j.jsx)("div",{className:"mb-7"}),(0,j.jsxs)("div",{children:[(0,j.jsx)(x.l.Item,{name:"".concat(t,".locked_page_heading"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.heading"),children:(0,j.jsx)(x.l.Input,{})}),(0,j.jsx)(Fo,{blockDataPath:t}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".locked_button_label"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.button_label"),children:(0,j.jsx)(x.l.Input,{})}),(0,j.jsx)(x.l.Item,{name:"".concat(t,".locked_button_url"),hideBorder:!0,hideDescription:!0,label:(0,o.t)("courses.lockscreen.fields.button_link"),children:(0,j.jsx)(x.l.Input,{})})]})]})},paywalls:function(e){var t=e.blockDataPath;return(0,j.jsx)(Yo,{blockDataPath:t,children:(0,j.jsxs)("div",{className:"flex h-full flex-col gap-y-6",children:[(0,j.jsx)(ia,{}),(0,j.jsx)(ta,{}),(0,j.jsx)(Za,{})]})})}},Wa=function(e){var t=e.type,r=e.id,n=(0,(0,eo.sE)().getBlockDataPath)(r);if(!n)return null;var i=Ga[t];return i?(0,j.jsx)(i,{blockDataPath:n}):null},Ha=function(){var e=(0,eo.sE)(),t=e.removeBlockBeingEdited,r=e.blockBeingEdited;if(!r)return null;var n=r.type,i=r.id;return(0,j.jsxs)("div",{className:"h-full p-6",children:[(0,j.jsx)("button",{type:"submit",className:"text-dark -ml-2 mb-4 block h-7 w-7",onClick:t,children:(0,j.jsx)(_e.JO,{type:"20-arrow-left",size:20})}),(0,j.jsx)(Wa,{type:n,id:i})]})},Qa=r(61626),Ja=r(99545),Ka=function(e){var t=e.icon,r=e.label,n=e.noEdit,i=void 0!==n&&n,a=(0,Ja.dw)().useDragHandle,s=(0,Ja.dI)(),l=s.item,c=s.listeners,u=(0,eo.sE)(),d=u.toggleBlockHidden,p=u.setBlockBeingEdited,m=l.hidden,b=[];return i||b.push({tooltip:(0,o.t)("courses.lockscreen.edit_block"),icon:"pencil",onClick:function(){return p(l)}}),b.push({tooltip:m?(0,o.t)("courses.lockscreen.show_block"):(0,o.t)("courses.lockscreen.hide_block"),icon:m?"16-eye-closed":"16-eye-open",onClick:function(){return d(l.id)}}),(0,j.jsx)(Qa.TR,{item:{icon:t,label:r},actions:b,dragEventListeners:c,useDragHandle:a,className:f()({"bg-secondary text-light":m})})},$a=r(67613),Xa=["blocks","onSort"];function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(r),!0).forEach((function(t){ts(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ts(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rs(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ns={banner:function(){return(0,j.jsx)(Ka,{icon:"16-video-block",label:(0,o.t)("courses.lockscreen.banner")})},description:function(){return(0,j.jsx)(Ka,{icon:"16-document-text",label:(0,o.t)("courses.lockscreen.description")})},call_to_action:function(){return(0,j.jsx)(Ka,{icon:"16-call-to-action",label:(0,o.t)("courses.lockscreen.call_to_action")})},lessons:function(){return(0,j.jsx)(Ka,{icon:"16-text",label:(0,o.t)("courses.lockscreen.lessons"),noEdit:!0})},legacy_lock_screen:function(){return(0,j.jsx)(Ka,{icon:"16-document-text",label:(0,o.t)("courses.lockscreen.legacy_lock_screen")})},paywalls:function(){return(0,j.jsx)(Ka,{icon:"16-payments",label:(0,j.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,j.jsx)(Y.Z.LabelSm,{children:(0,o.t)("courses.lockscreen.paywalls")}),(0,j.jsx)($a.g,{})]})})}},is=function(){var e=(0,Ja.dI)().item,t=e.type,r=ns[t];return(0,j.jsx)(r,{block:e})},os=function(e){var t=e.blocks,r=e.onSort,n=rs(e,Xa),i=(0,P.UV)().contentPortalElement;return(0,j.jsxs)(Ja.cm,es(es({items:t,onSort:r},n),{},{children:[(0,j.jsx)(Ja.cm.List,{children:t.map((function(e){return(0,j.jsx)(Ja.cm.Item,{item:e,children:(0,j.jsx)(is,{})},e.id)}))}),(0,j.jsx)(Ja.cm.DragOverlay,{portalTo:i,children:(0,j.jsx)(is,{})})]}))},as=function(){var e=(0,eo.sE)(),t=e.blocks,r=e.replaceBlocks;return(0,j.jsxs)("div",{className:"p-6",children:[(0,j.jsx)(Mo.v,{className:"mb-7",children:(0,o.t)("courses.lockscreen.only_visible_on_private")}),(0,j.jsx)("div",{className:"mb-4",children:(0,j.jsx)(Y.Z.LabelLg,{weight:"semibold",children:(0,o.t)("courses.lockscreen.page_blocks")})}),(0,j.jsx)(os,{blocks:t,onSort:r})]})},ss=function(){return(0,eo.sE)().isEditingBlock?(0,j.jsx)(Ha,{}):(0,j.jsx)(as,{})};function ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(r),!0).forEach((function(t){us(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ls(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function us(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ds=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return(0,m.omit)(e,"id")})).map((function(e){return"lessons"===e.type||"legacy_lock_screen"===e.type?cs(cs({},e),{},{data:{}}):"paywalls"===e.type?((t=e).data.paywalls=(0,m.compact)(t.data.paywalls.map((function(e){var t,r,n=!(null!==e&&void 0!==e&&e.id),i=!(null!==e&&void 0!==e&&null!==(t=e.web_paywall_price)&&void 0!==t&&t.id)&&!(null!==e&&void 0!==e&&null!==(r=e.mobile_paywall_price)&&void 0!==r&&r.id);return n||i?null:e}))),t):e;var t}))},ps=function(e){var t=e.lock_screen_blocks,r=function(){var e,t,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((function(e){return"legacy_lock_screen"===e.type}));return r?cs(cs({},r.data),{},{locked_page_description:(null===(e=r.data)||void 0===e||null===(t=e.locked_page_description)||void 0===t?void 0:t.trix_html)||""}):null}(t),n=Boolean(r),i=ds(t);return n?cs({lock_screen_blocks:i},r):{lock_screen_blocks:i}},fs=function(e){var t=e.space,r=void 0===t?{}:t,n=e.onSave,i=(0,C.eW)(),a=i.formId,s=i.addBeforeExit,l=i.removeBeforeExit,c=(0,v.Gc)(),u=c.handleSubmit,d=c.formState,p=c.reset,f=d.dirtyFields,h=Object.keys(f).length>0,y=(0,ro.B)().shouldShowBrandedAppBanner,g=(0,eo.sE)().previewMode,_=(0,b.useCallback)((function(){return!h||window.confirm((0,o.t)("courses.lockscreen.modal.unsaved_changes"))}),[h]);(0,b.useEffect)((function(){return s(_),l}),[l,s,_]);var x="desktop"===g?(0,j.jsx)(C.Ar.Main,{children:(0,j.jsx)(po.WebPreview,{space:r})}):(0,j.jsx)(C.Ar.MainMobile,{children:(0,j.jsx)(po.MobilePreview,{space:r})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C.Ar.Sidebar,{children:(0,j.jsx)("form",{id:a,className:"react-form h-full w-full",onSubmit:u((function(e){if((0,m.isFunction)(n)){var t=ps(e);n(t),p(null,{keepValues:!0})}})),children:(0,j.jsx)(ss,{})})}),y?(0,j.jsx)(Ki.V.LandingPage,{}):x]})},ms=function(e){var t=e.space,r=void 0===t?{}:t,n=(0,te.p)(),i=n.success,a=n.error,s=(0,d.T4)({spaceId:r.id}).refetch,l=(0,Ji.z1)({space:r,options:{onSuccess:function(){s(),i((0,o.t)("courses.lockscreen.toast.saved"))},onError:function(){a((0,o.t)("courses.lockscreen.toast.save_error"))}}}).mutate;return(0,j.jsx)(fs,{space:r,onSave:l})},bs=function(e){var t=e.space,r=void 0===t?{}:t;return(0,j.jsx)(ao,{space:r,children:(0,j.jsx)(ms,{space:r})})},hs=function(e){var t=e.space,r=e.scrollToId,n=(0,C.eW)().currentSection;return r&&(0,m.delay)((function(){var e;return null===(e=document.getElementById(r))||void 0===e?void 0:e.scrollIntoView()})),n===(0,o.t)("customize_space.paywalls.title")?(0,j.jsx)(Ut,{space:t}):n===(0,o.t)("customize_space.customize")?(0,j.jsx)(Re,{space:t}):n===(0,o.t)("customize_space.members")?(0,j.jsx)(sr,{space:t}):n===(0,o.t)("customize_space.options")?(0,j.jsx)(dt,{space:t}):n===(0,o.t)("customize_space.lessons")?(0,j.jsx)(Qi,{space:t}):n===(0,o.t)("customize_space.lock_screen")?(0,j.jsx)(bs,{space:t}):n===(0,o.t)("customize_space.workflows")?(0,j.jsx)(cr,{}):null},vs=r(63501),ys=function(e){var t=e.space,r=e.scrollToId,n=(0,C.eW)().currentSection===(0,o.t)("customize_space.lock_screen"),i=n?"no-header":"only-main";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C.Ar,{variant:i,className:f()({"hidden lg:grid":n}),children:t&&(0,j.jsx)(hs,{space:t,scrollToId:r})}),n&&(0,j.jsx)(vs.R,{className:"lg:hidden",title:(0,o.t)("courses.lockscreen.mobile_unsupported.title"),description:(0,o.t)("courses.lockscreen.mobile_unsupported.description")})]})},gs=r(55531),_s=r(75760),xs=function(){var e=(0,C.eW)(),t=e.onExit,r=e.isSaving,n=e.formId,i=e.isSaveButtonDisabled,a=function(){var e=(0,X.mx)(),t=e.dirtyForms,r=e.setDirtyForms,n=t||X.Wm,i=n.customize,o=n.options;return{isDirty:Object.values(i).some(Boolean)||Object.values(o).some(Boolean),resetDirtyFields:function(){r(X.Wm)}}}(),s=a.isDirty,l=a.resetDirtyFields,c=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,j.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-y-2 md:flex-row md:items-center md:gap-y-0",children:[(0,j.jsx)(Y.Z.LabelSm,{weight:"semibold",children:s&&(0,o.t)("unsaved_changes")}),(0,j.jsxs)("div",{className:f()({"grid w-full grid-cols-2 gap-4":c,"flex gap-4":!c}),children:[(0,j.jsx)(nr.z,{variant:"secondary",onClick:function(){s&&l(),t()},full:c,children:(0,o.t)("cancel")}),(0,j.jsx)(_s.k,{full:c,type:"submit",formId:n,disabled:r||i,variant:"circle",children:(0,o.t)("save_changes")})]})]})},js=r(93228),ws=r(15897),Os=r(92561),Ss=function(){var e=(0,C.eW)(),t=e.formId,r=e.isSaving;return(0,j.jsx)(C.h4.Actions,{className:"hidden justify-end lg:flex",children:(0,j.jsx)(C.h4.SaveButton,{type:"submit",formId:t,disabled:r,variant:"circle",children:(0,o.t)("save_changes")})})},Ps=function(){var e=(0,C.eW)(),t=e.sections,r=e.currentSection,n=e.setCurrentSection,i=e.title,a=(0,Ot.kK)(),s=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled,l=Bs(),c=(0,Os.X)(),u=r===(0,o.t)("customize_space.lock_screen"),d=t.map((function(e){return{value:e,label:e}}));return(0,j.jsxs)(C.h4,{className:"flex !max-h-[initial] flex-col !items-start gap-4 !p-0 lg:grid lg:!items-center",style:{gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,j.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[a&&s&&(0,j.jsx)(xn.h,{name:"16-arrow-left",onClick:l.hide}),i&&(0,j.jsx)("span",{className:"flex w-full min-w-0",children:(0,j.jsx)($t.T,{content:i,className:"truncate text-lg font-semibold",interactive:!1,children:i})})]}),a&&(0,j.jsx)(js.o,{onClick:function(){l.hide(),c.hide()}})]}),(0,j.jsx)(C.h4.Actions,{className:"hidden w-full overflow-auto md:block lg:justify-center lg:overflow-visible",children:(0,j.jsx)(ws.S,{value:r,onChange:n,options:d})}),u&&(0,j.jsx)(Ss,{})]})},ks=function(e){var t=e.children,r=(0,C.eW)().currentSection,n=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled,i=r===(0,o.t)("customize_space.lock_screen"),a=r===(0,o.t)("customize_space.members"),s=r===(0,o.t)("customize_space.lessons"),l=(0,Ot.kK)(),c=[(0,o.t)("customize_space.customize"),(0,o.t)("customize_space.options")].includes(r),u=i||a||s,d=c&&n&&l;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(gs.x.Header,{className:f()({"!px-5 !py-4":n}),children:(0,j.jsx)(Ps,{})}),(0,j.jsxs)(gs.x.Body,{className:f()({"px-5 py-8":n}),wrapperClassName:f()({"max-w-full h-full":u}),children:[t,d&&(0,j.jsx)(xs,{})]}),c&&!n&&(0,j.jsx)(gs.x.Footer,{children:(0,j.jsx)(xs,{})})]})},Cs=function(e){var t=e.isOpen,r=e.onSave,n=e.onClose,i=e.onExit,o=e.sections,a=e.initialSection,s=e.title,l=e.formId,c=void 0===l?"edit-space-form":l,u=e.contentPortalId,d=void 0===u?"customize-space-portal":u,p=e.children;return(0,j.jsx)(gs.x,{isOpen:t,onClose:n,shouldShowCloseButton:!0,contentPortalId:d,children:(0,j.jsx)(C.MW,{formId:c,sections:o,initialSection:a,title:s,onSave:r,onExit:i,children:(0,j.jsx)(ks,{children:p})})})},Ns=function(e){var t=e.isOpen,r=e.onExit,n=e.onClose,i=e.onSave,o=e.space,a=e.sections,s=e.initialSection,l=e.onSlugChange,c=e.scrollToId;return o?(0,j.jsx)(d.mE,{spaceId:o.id,children:(0,j.jsx)(d.DJ,{onSlugChange:l,children:(0,j.jsx)(Cs,{isOpen:t,onClose:n,onExit:r,onSave:i,sections:a,initialSection:s,title:null===o||void 0===o?void 0:o.name,children:(0,j.jsx)(ys,{space:o,scrollToId:c})})})}):null},Is=r(7895),As=r(47080);function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ts(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Ls(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ts(o,n,i,a,s,"next",e)}function s(e){Ts(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Ms=function(e){var t=e.spaceId,r=e.refetch,n=e.initialSection,a=e.shouldRedirectOnSlugChange,s=void 0===a||a,p=e.scrollToId,f=(0,u.k6)(),m=(0,c.useQueryClient)(),b=(0,d.wh)().currentCommunitySettings,h=void 0===b?{}:b,v=(0,d.T4)({spaceId:t}),y=v.space,_=v.refetch,x=(0,d.nT)().actions.refresh,w=(0,g.fO)(),O=(0,kn.dd)(),S=(0,te.p)().success,P=function(){var e=Ls(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.invalidateQueries([d.Xe,t]);case 2:return e.next=4,m.invalidateQueries([As.Jl,t]);case 4:return e.next=6,_();case 6:return e.next=8,x();case 8:if(!l()(r)){e.next=11;break}return e.next=11,r();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Ls(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S((0,o.t)("changes_saved")),e.next=3,P();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=(0,c.useMutation)((function(e){var t=(0,Is.$o)(e);return(0,mt.aU)((0,ie.C1)(String(null===y||void 0===y?void 0:y.id)),{space:t})}),{onSuccess:k}),N=function(e){var t=e.isCourseSpace,r=void 0!==t&&t,n=e.areWorkflowsEnabled,i=[];return r&&i.push((0,o.t)("customize_space.lessons")),i.push((0,o.t)("customize_space.customize")),i.push((0,o.t)("customize_space.paywalls.title")),i.push((0,o.t)("customize_space.lock_screen")),i.push((0,o.t)("customize_space.members")),i.push((0,o.t)("customize_space.options")),n&&i.push((0,o.t)("customize_space.workflows")),i}({isCourseSpace:(0,g.EG)(y),areWorkflowsEnabled:null===h||void 0===h?void 0:h.upgrade_flows_for_workflows_spaces_enabled});return(0,j.jsx)(Ns,{isOpen:O.visible,space:y,sections:N,initialSection:n||N[0],scrollToId:p,onSlugChange:function(e){s&&f.push(w(e))},onSave:function(e){var t=e.data,r=e.onSuccess;C.mutate(t,{onSuccess:r})},onExit:function(){P(),O.hide()},onClose:function(){return O.hide()}})},Rs=kn.gk.create((function(e){return(0,j.jsx)(Ms,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(r),!0).forEach((function(t){Ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),Bs=function(){return(0,kn.dd)(Rs)}},9069:(e,t,r)=>{"use strict";r.d(t,{m:()=>s});var n=r(94184),i=r.n(n),o=r(95132),a=r(85893),s=function(e){var t=e.dateString,r=e.isSquare,n=void 0!==r&&r,s=(0,o.N)(t),l=s.dayOfMonth,c=s.shortMonthString;return(0,a.jsxs)("div",{className:i()("bg-secondary flex cursor-default flex-col items-center justify-center rounded-md py-1.5",{"h-12 w-12":n,"w-10":!n}),children:[(0,a.jsx)("div",{className:"text-dark text-center text-base font-bold leading-5",children:l}),(0,a.jsx)("div",{className:"text-dark text-center font-medium uppercase",style:{fontSize:"9px"},children:c})]})}},73062:(e,t,r)=>{"use strict";r.d(t,{I:()=>f});var n=r(67294),i=r(37054),o=r(86013),a=r(51705),s=r(8246),l=r(81786),c=r(85893),u=["places"],d={streetViewControl:!1,mapTypeControl:!1,scrollWheel:!1,fullscreenControl:!1,panControl:!1,rotateControl:!1,gestureHandling:"none",clickableIcons:!1,controlSize:25,disableDoubleClickZoom:!0,draggableCursor:"arrow",draggingCursor:"arrow",keyboardShortcuts:!1},p=function(e){var t=e.serializedLocation,r=e.variant,p=void 0===r?"default":r,f=(0,i.Ji)({id:"google-map-script",googleMapsApiKey:window.GOOGLE_MAPS_API_KEY||"",libraries:u}).isLoaded,m=(0,n.useMemo)((function(){return(0,a.qO)(t)}),[t]),b=(0,n.useMemo)((function(){return function(e){var t,r,n,i;return null!==e&&void 0!==e&&e.geometry?{lat:null===e||void 0===e||null===(t=e.geometry)||void 0===t||null===(r=t.location)||void 0===r?void 0:r.lat,lng:null===e||void 0===e||null===(n=e.geometry)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.lng}:null}(m)}),[m]),h=function(){window.open(m.url,"_blank")};return f?"default"===p?(0,c.jsxs)("div",{className:"mt-6 flex space-x-3",children:[b&&(0,c.jsx)(i.b6,{mapContainerClassName:"h-16 w-[150px] rounded-md border border-primary",zoom:15,options:d,center:b,children:(0,c.jsx)(i.Jx,{cursor:"arrow",position:b})}),(0,c.jsxs)("div",{className:"-mt-1",children:[(0,c.jsxs)("div",{children:[(null===m||void 0===m?void 0:m.name)&&(0,c.jsx)(s.Z.LabelXs,{weight:"semibold",children:null===m||void 0===m?void 0:m.name}),(null===m||void 0===m?void 0:m.formatted_address)&&(0,c.jsx)(s.Z.BodyXs,{children:null===m||void 0===m?void 0:m.formatted_address})]}),(null===m||void 0===m?void 0:m.url)&&(0,c.jsx)(l.z,{variant:"text",onClick:h,className:"!text-link !text-xs",children:(0,o.t)("events.rsvp.view_map")})]})]}):"full"===p?(0,c.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[b&&(0,c.jsx)(i.b6,{mapContainerClassName:"h-[220px] w-full rounded-md border border-primary",zoom:14,options:d,center:b,children:(0,c.jsx)(i.Jx,{cursor:"arrow",position:b})}),(0,c.jsxs)("div",{className:"-mt-1",children:[(null===m||void 0===m?void 0:m.name)&&(null===m||void 0===m?void 0:m.url)&&(0,c.jsx)(l.z,{variant:"text",onClick:h,className:"!text-left",children:(0,c.jsx)(s.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:null===m||void 0===m?void 0:m.name})}),(null===m||void 0===m?void 0:m.formatted_address)&&(0,c.jsx)(s.Z.BodySm,{children:null===m||void 0===m?void 0:m.formatted_address})]})]}):(0,c.jsx)("div",{className:"flex flex-col space-y-4",children:(0,c.jsxs)("div",{className:"-mt-1",children:[(null===m||void 0===m?void 0:m.name)&&(null===m||void 0===m?void 0:m.url)&&(0,c.jsx)(l.z,{variant:"text",onClick:h,className:"!text-left",children:(0,c.jsx)(s.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:null===m||void 0===m?void 0:m.name})}),(null===m||void 0===m?void 0:m.formatted_address)&&(0,c.jsx)(s.Z.BodyXs,{children:null===m||void 0===m?void 0:m.formatted_address})]})}):null},f=(0,n.memo)(p)},75043:(e,t,r)=>{"use strict";r.d(t,{Y:()=>re});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(34544),l=r(55652),c=r(18605),u=r(8246),d=r(81786),p=r(85893),f=function(e){var t=e.setShouldShowAddToCalendarModal;return(0,p.jsxs)(d.z,{variant:"secondary-light",full:!0,onClick:function(){t(!0)},className:"!border-primary flex justify-center gap-x-2 border",isFullRounded:!0,children:[(0,p.jsx)(c.JO,{type:"16-calendar-add",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,p.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,a.t)("add_to_calendar")})]})},m=r(79579),b=r(82177),h=function(e){var t=e.isOpen,r=e.onClose,n=e.event,i=(0,m.O)(n),o=i.addToCalendar,s=i.downloadCalendar;return(0,p.jsxs)(b.u_,{title:(0,a.t)("events.add_to_calendar.confirm_modal.title"),isOpen:!!t,onClose:r,children:[(0,p.jsx)(b.u_.Overlay,{}),(0,p.jsxs)(b.u_.Content,{children:[(0,p.jsxs)(b.u_.Header,{className:"md:pb-4",children:[(0,p.jsx)(b.u_.Title,{size:"md",className:"text-center",children:(0,a.t)("events.add_to_calendar.confirm_modal.title")}),(0,p.jsx)(b.u_.HeaderActions,{children:(0,p.jsx)(b.u_.CloseButton,{onClick:r})})]}),(0,p.jsxs)(b.u_.Body,{children:[(0,p.jsx)("div",{className:"mb-4 text-center",children:(0,p.jsx)(u.Z.BodyMd,{color:"text-default",children:(0,a.t)("events.add_to_calendar.confirm_modal.description_1")})}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(u.Z.BodyMd,{color:"text-default",children:(0,a.t)("events.add_to_calendar.confirm_modal.description_2")})})]}),(0,p.jsxs)(b.u_.Footer,{className:"space-y-2",children:[(0,p.jsxs)(d.z,{variant:"secondary",full:!0,large:!0,onClick:function(){s(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,p.jsx)(c.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,a.t)("events.add_to_calendar.confirm_modal.download")]}),(0,p.jsxs)(d.z,{variant:"secondary",full:!0,large:!0,onClick:function(){o(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,p.jsx)(c.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,a.t)("events.add_to_calendar.confirm_modal.resend")]})]})]})]})},v=r(65341),y=r(85327),g=r(20816),_=r(34398),x=r(28736),j=r(43535),w=r(98338),O=r(58837),S=r(33071),P=r(9578),k=r(4404),C=r(13238),N=r(23893),I=r(60949),A=r(71076),E=function(e){var t=e.event,r=t.event_setting_attributes,n=t.rsvped_event,i=t.rsvp_status,o=r||{},s=o.rsvp_limit_reached,l=o.show_rsvp_limit_warning,d=l?"20-event-clock":"20-event-members",f=i==y._w.INVITED;return n||f||s&&(0,_.yl)(t)||!l&&!s?null:(0,p.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,p.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,p.jsx)(c.JO,{type:d,size:20,className:"text-dark !h-5 !w-5"})}),(0,p.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[l&&(0,p.jsx)(u.Z.LabelXs,{weight:"medium",children:(0,p.jsx)("div",{className:"text-left",style:{color:"#F5A607"},children:(0,a.t)("events.rsvp.rsvp_limit_warning")})}),s&&(0,p.jsx)(u.Z.LabelXs,{weight:"medium",children:(0,p.jsx)("div",{className:"text-left",children:(0,a.t)("events.rsvp.rsvp_limit_reached")})})]})]})},D=r(73890),T=function(e){var t=e.icon;return(0,p.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,p.jsx)(c.JO,{type:t,size:20,className:"text-dark !h-5 !w-5"})})},L=function(e){var t=e.eventData,r=e.endsAt,n=e.dataTestid,i=e.rsvpedEvent,o=t.location_type,s=t.virtual_location_url,l=t.hide_location_from_non_attendees&&!i;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row items-center space-x-4 pt-4","data-testid":n,children:[(0,p.jsx)(T,{icon:"20-calendar"}),(0,p.jsx)("div",{className:"flex flex-col truncate",children:(0,p.jsx)(u.Z.LabelSm,{children:(0,a.t)("events.details.event_finished",{time_string:(0,D.TF)(r)})})})]}),!l&&"virtual"===o&&s&&(0,p.jsx)(d.z,{variant:"circle",full:!0,onClick:function(){window.open(s,"_blank","noreferrer")},className:"mt-6",children:(0,p.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-circle-button",children:(0,a.t)("events.locations.event_link")})})]})},M=r(28199),R=r(39753),B=r(29832),U=r(50732),F=function(e){var t=e.event,r=e.onChange,n=(0,w.wh)().currentUser,i=(0,m.O)(t,r).rsvpWhileJoiningEvent,o=!!n,s=t||{},l=s.event_setting_attributes,c=s.rsvped_event,f=l||{},b=f.location_type,h=f.live_stream_slug,v=f.virtual_location_url,y=(0,R.P)(t)||{},g=y.issueCreatingLive,x=y.canCreateLive,j=(0,B.y)(t),O=x&&(g||(0,M.oL)(t));return(0,p.jsx)(d.z,{variant:"primary",full:!0,onClick:function(){var e;(o&&(c||i()),"virtual"===b&&v)?window.open(v,"_blank"):O?j.mutate(null):(e=U.dE.room({roomSlug:h}),(0,_.L6)(t)&&!o&&(e=U.dE.publicRoom({roomSlug:h})),window.open(e,"_blank"))},className:"mt-6",disabled:(0,M.mv)(t)||j.isLoading,children:(0,p.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,a.t)("events.locations.join_".concat(b))})})},z=r(73062),V=r(80712),q=function(e){var t=e.event,r=e.shouldDisplayJoinButton,n=e.isLiveLimitReached,i=e.handleViewLiveStreamClick,o=e.hasEventFinished,s=e.isLoggedIn,l=t||{},c=l.event_setting_attributes,f=l.rsvped_event,m=c||{},b=m.location_type,h=m.live_stream_slug,v=m.live_stream_room_setting_attributes.limit_url_sharing,y=(0,R.P)(t)||{},g=y.issueCreatingLive,_=y.canCreateLive,x=(0,B.y)(t),j=_&&(g||(0,M.oL)(t)),w=!!h&&(!v||f)&&((0,M.Mk)(t)||(0,M.S2)(t));return n?(0,p.jsx)(V.n,{event:t}):o||r||!j&&!w||!s?(0,p.jsx)(u.Z.LabelSm,{children:(0,a.t)("events.location_types.".concat(b))}):(0,p.jsxs)(p.Fragment,{children:[j&&(0,p.jsx)(d.z,{variant:"text",onClick:x.mutate,disabled:(0,M.mv)(t)||x.isLoading||x.isSuccess,children:(0,p.jsx)(u.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,a.t)("events.locations.create_".concat(b))})}),w&&(0,p.jsx)(d.z,{variant:"text",onClick:i,children:(0,p.jsx)(u.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,a.t)("events.locations.join_".concat(b))})})]})},Z=function(e){var t=e.hasEventFinished,r=e.event,n=e.shouldDisplayJoinButton,i=e.isLiveLimitReached,o=e.shouldHideLocationFromCurrentMember,s=!!(0,w.wh)().currentCommunityMember,l=(r||{}).event_setting_attributes||{},c=l.location_type,d=l.in_person_location,f=l.virtual_location_url,m=l.live_stream_slug;if(o)return null;var b=!s||n||t,h=[y.Bq.LIVE_STREAM,y.Bq.LIVE_ROOM];return(0,p.jsxs)("div",{className:"pt-4","data-testid":"event-location",children:["virtual"===c&&f&&(0,p.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,p.jsx)(T,{icon:"20-camera"}),b?(0,p.jsx)(u.Z.LabelSm,{children:(0,a.t)("events.locations.virtual")}):(0,p.jsx)("a",{href:f,target:"_blank",rel:"noreferrer",children:(0,p.jsx)(u.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,a.t)("events.locations.join_virtual_event")})})]}),"in_person"===c&&(0,p.jsxs)("div",{className:"flex flex-row items-start space-x-4",children:[(0,p.jsx)(T,{icon:"20-location"}),(0,p.jsx)(z.I,{serializedLocation:d,variant:"text"})]}),"tbd"===c&&(0,p.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,p.jsx)(T,{icon:"20-location"}),(0,p.jsx)(u.Z.LabelSm,{children:(0,a.t)("events.rsvp.tbd")})]}),h.includes(c)&&(0,p.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,p.jsx)(T,{icon:"20-camera"}),(0,p.jsx)(q,{event:r,shouldDisplayJoinButton:n,isLiveLimitReached:i,handleViewLiveStreamClick:function(){var e=U.dE.room({roomSlug:m});(0,_.L6)(r)&&!s&&(e=U.dE.publicRoom({roomSlug:m})),window.open(e,"_blank")},hasEventFinished:t,isLoggedIn:s})]})]})},G=r(81671),W=r(95132),H=r(39639),Q=r(20846),J=function(e){var t=e.eventData,r=t.starts_at,n=t.ends_at,i=t.time_zone_abbreviations,o=t.start_date,s=t.time_zone,l=(0,Q.UZ)(o),c=(0,Q.UZ)(n),d=(0,W.N)(r,s),f=d.dayOfMonth,m=d.shortMonthString,b=(0,W.N)(n,s),h=b.dayOfMonth,v=b.shortMonthString,y=f===h,g="".concat(l,", ").concat(m," ").concat(f),_="".concat(c,", ").concat(v," ").concat(h);return(0,p.jsxs)("div",{className:"flex flex-row items-center space-x-6",children:[(0,p.jsx)(G.m,{dateString:r,timeZone:s}),y?(0,p.jsxs)("div",{"data-testid":"event-date",children:[(0,p.jsx)("div",{children:(0,p.jsx)(u.Z.LabelSm,{weight:"semibold",children:g})}),(0,p.jsx)("div",{children:(0,p.jsx)(u.Z.LabelSm,{children:"".concat((0,H.Dk)(r,s)," - ").concat((0,H.Dk)(n,s)," ").concat(i)})})]}):(0,p.jsxs)("div",{"data-testid":"event-date",children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)(u.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,a.t)("events.timestamp.from")," ",g]}),(0,p.jsxs)(u.Z.LabelSm,{as:"div",children:[(0,H.Dk)(r,s)," ",i]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)(u.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,a.t)("events.timestamp.to")," ",_]}),(0,p.jsxs)(u.Z.LabelSm,{as:"div",children:[(0,H.Dk)(n,s)," ",i]})]})]})]})},K=function(e){var t=e.rsvpStatus,r=e.ticketData,n=(e.event.event_setting_attributes||{}).rsvp_limit_reached,i="yes"==t,o=t&&!r.invited,s=!n||i,l=n&&!i;return(0,p.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,p.jsx)("div",{className:"bg-tertiary flex h-10 w-10 flex-none items-center justify-center rounded-lg",children:(0,p.jsx)(c.JO,{type:"20-event-ticket",size:20,className:"text-dark !h-5 !w-5"})}),(0,p.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[l&&(0,p.jsx)(u.Z.LabelSm,{weight:"medium",children:(0,a.t)("events.rsvp.sold_out")}),s&&(0,p.jsx)(u.Z.LabelSm,{children:r.price_with_code}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"bg-dark-primary-button h-1 w-1 rounded-full sm:block"}),(0,p.jsx)(u.Z.LabelSm,{weight:"medium",children:(0,a.t)("events.rsvp.purchased")})]})]})]})};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(e){var t=e.onChange,r=e.shouldDisplayRsvpAction,i=(0,w.Zh)(),c=i.record,d=i.isUsedInMinimalTipTapViewModal,m=(0,S.n)().selfUpdateCalendarEnabled,b=!!(0,w.wh)().currentCommunityMember,D=c||{},M=D.event_type,R=D.event_setting_attributes,B=D.recurring_setting_attributes,U=D.upcoming_occurrences_count,z=D.rsvped_event,V=D.rsvp_status,q=D.paywall_attributes,G=ee((0,n.useState)(!1),2),W=G[0],H=G[1],Q=(B||{}).frequency,$=(0,I.j)({event:c}),Y=$.isRecurringRsvpOpen,te=$.openRecurringRsvpModal,re=$.onRecurringModalCose,ne=(0,l.C)(),ie=(0,x.IO)(),oe=ie.isMonthlyHourLimitReached,ae=ie.isStorageLimitReached,se=R||{},le=se.starts_at,ce=se.ends_at,ue=se.hide_location_from_non_attendees,de=se.live_stream_room_setting_attributes,pe=(0,g.O)({startsAt:le,frequency:Q}).label;if(!R)return(0,p.jsx)(k.gi,{variant:"right-sidebar"});var fe=!!ce&&(0,O.aA)(ce),me=M===y.E_.RECURRING,be=c.rsvped_event,he=X({event:c,onChange:t,full:!0,detailsPage:!0},me&&{toggleRecurringRsvp:be?function(){ne.show({event:c,onChange:t})}:te}),ve=oe||(null===de||void 0===de?void 0:de.recording_enabled)&&ae,ye=ue&&!z,ge=(b||(0,_.L6)(c))&&(0,s.JK)(c)&&(0,s.cf)(c)&&!ve&&!fe&&!ye,_e=me&&U>0,xe=!fe&&z;return(0,p.jsx)(j.T,{children:(0,p.jsxs)("div",{className:o()("border-primary bg-primary w-full rounded-2xl border p-6",{"my-5":d}),children:[(0,p.jsxs)("div",{className:"rsvp-section",children:[(0,p.jsx)("div",{className:"border-primary border-b pb-4 last:border-b-0 last:pb-0",children:(0,p.jsx)(J,{eventData:R})}),(0,p.jsx)(Z,{event:c,hasEventFinished:fe,shouldDisplayJoinButton:ge,isLiveLimitReached:ve,shouldHideLocationFromCurrentMember:ye}),_e&&(0,p.jsxs)("div",{className:"mt-4 flex flex-row items-center space-x-4",children:[(0,p.jsx)(T,{icon:"20-calendar-recurring"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:(0,p.jsx)(u.Z.LabelSm,{children:pe})}),!(0,_.yl)(c)&&(0,p.jsx)(C.u,{event:c,onChange:t,buttonText:(0,a.t)("events.rsvp.show_all_events")})]})]}),fe&&(0,p.jsx)(L,{eventData:R,rsvpedEvent:z,endsAt:ce,dataTestid:"event-finished"}),!ge&&(r||xe)&&(0,p.jsxs)("div",{className:o()({"mt-6":r}),children:[r&&(0,p.jsxs)(p.Fragment,{children:[(0,_.yl)(c)&&(0,p.jsx)(K,{rsvpStatus:V,ticketData:q,event:c}),(0,p.jsx)(E,{event:c}),(0,p.jsx)(A.w,X({},he))]}),xe&&(0,p.jsx)("div",{className:"pt-4",children:m?(0,p.jsx)(f,{setShouldShowAddToCalendarModal:H}):(0,p.jsx)(P.a,X(X({},(0,v.q)(c)),{},{variant:"button"}))})]}),ge&&(0,p.jsx)(F,{event:c,onChange:t})]}),(0,p.jsx)(N.O,{event:c,show:Y,onClose:re,onChange:t}),(0,p.jsx)(h,{event:c,isOpen:W,onClose:function(){return H(!1)}})]})})}},81671:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(95132),i=r(85893),o=function(e){var t=e.dateString,r=e.timeZone,o=(0,n.N)(t,r),a=o.dayOfMonth,s=o.shortMonthString;return(0,i.jsxs)("div",{className:"bg-tertiary flex h-[70px] w-[56px] cursor-default flex-col items-center justify-center rounded-md py-1.5",children:[(0,i.jsx)("div",{className:"text-dark mb-0.5 text-center text-xl font-bold leading-6",children:a}),(0,i.jsx)("div",{className:"text-dark text-center font-medium uppercase leading-4",style:{fontSize:"11px"},children:s})]})}},34544:(e,t,r)=>{"use strict";r.d(t,{cf:()=>o,QP:()=>a,JK:()=>s});var n=r(85327),i=r(58837),o=function(e){var t,r,n,o,a=((e||{}).event_setting_attributes||{}).starts_at;return t=a,r=10,n=new Date,o=new Date(t),Math.abs(n.getTime()-o.getTime())/6e4<=r||(0,i.aA)(a)},a=function(e){var t=((e||{}).event_setting_attributes||{}).ends_at;return(0,i.aA)(t)},s=function(e){var t=((e||{}).event_setting_attributes||{}).location_type;return t!==n.Bq.IN_PERSON&&t!==n.Bq.TBD}},88666:(e,t,r)=>{"use strict";r.d(t,{J:()=>m});var n=r(67294),i=r(86013),o=r(6645),a=r(44410),s=r(74666),l=r(50732),c=r(81786),u={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",GB:"United Kingdom",CH:"Switzerland"},d=r(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e,t,r=!(null===(e=window.webview)||void 0===e||!e.isComingFromReactNativeWebview)||!(null===(t=window.webview)||void 0===t||!t.isInsideMobileWebview),f=p((0,o.Z)([s.nV]),2),m=f[0],b=f[1],h=p((0,n.useState)(!0),2),v=h[0],y=h[1],g=p((0,n.useState)(window.CLOUDFLARE_COUNTRY_CODE),2),_=g[0],x=g[1],j=m[s.nV],w=function(e){var t,r;b(s.nV,e,{expires:(r=new Date,r.setTime(r.getTime()+31536e6),r),domain:(t=window.location.hostname,t.endsWith(".circle.so")&&3===t.split(".").length?s.eG:t),path:"/",sameSite:"None",secure:["production","staging"].includes(window.RAILS_ENV)})};return(0,n.useEffect)((function(){j||null!==_&&void 0!==_&&_.length||fetch("https://cloudflare-quic.com/b/headers").then((function(e){return e.json()})).then((function(e){return x(e.headers["Cf-Ipcountry"])})).catch((function(e){console.error(e)}))})),(0,n.useEffect)((function(){var e;e=Object.keys(u),y(!e.includes(_))}),[_]),!document.cookie||v||j||r?null:["production","staging"].includes(window.RAILS_ENV)?(0,d.jsx)(a.Z,{children:(0,d.jsxs)("div",{className:"border-primary bg-primary fixed bottom-0 z-[999999] w-full gap-4 border p-4 shadow-lg md:bottom-8 md:right-8 md:flex md:w-auto md:max-w-3xl md:rounded-lg",children:[(0,d.jsx)("div",{className:"mb-4 leading-4 md:mb-0",children:(0,d.jsxs)("p",{className:"text-dark text-sm",children:[(0,i.t)(["gdpr.cookie_banner.description"]),(0,d.jsx)("br",{}),(0,i.t)("gdpr.cookie_banner.privacy_policy.prefix"),(0,d.jsx)("a",{href:l.ae.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,i.t)("gdpr.cookie_banner.privacy_policy.link")}),(0,i.t)("gdpr.cookie_banner.privacy_policy.suffix")]})}),(0,d.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,d.jsx)(c.z,{onClick:function(){return w(!1)},variant:"secondary",children:(0,i.t)("gdpr.cookie_banner.decline_button")}),(0,d.jsx)(c.z,{onClick:function(){return w(!0)},variant:"primary",children:(0,i.t)("gdpr.cookie_banner.accept_button")})]})]})}):null}},83701:(e,t,r)=>{"use strict";r.d(t,{_:()=>u});var n=r(12814),i=r(88767),o=r(73826),a=r(74666),s=r(14856),l=r(85893),c=new i.QueryClient(s.Vr),u=function(){var e=(0,o.D)();return(0,n.Z)(a.hn.OPEN_SEARCH_MODAL,(function(t){t.preventDefault(),e.show()})),(0,l.jsx)(i.QueryClientProvider,{client:c})}},13190:(e,t,r)=>{"use strict";r.d(t,{v:()=>h});var n=r(67294),i=r(86013),o=r(64660),a=r(98338),s=r(23647),l=r(3383),c=r(64422),u=r(85249),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){var e=(0,u.R)(),t=e.posts,r=e.fetchPosts,p=(0,a.wh)(),m=(0,o.r)().show;return(0,n.useEffect)((function(){r()}),[]),t.length>0?(0,d.jsxs)("div",{className:"sidebar__block sidebar__right trending-posts block",children:[(0,d.jsx)("div",{className:"block__title",children:(0,d.jsx)("h4",{children:(0,i.t)("trending_posts")})}),(0,d.jsx)("div",{className:"block__content",children:(0,d.jsx)("ul",{className:"trending-posts__post-list",children:t.map((function(e){var t,r=(0,s.H)({publicUid:null!==(t=e.author.public_uid)&&void 0!==t?t:"",showMemberProfileDrawer:function(e){m(e)},isProfileDrawerEnabled:(0,l.i)(p),params:{}});return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"trending-posts__post",children:[!e.hide_meta_info&&(0,d.jsx)("div",{className:"trending-posts__avatar",children:(0,d.jsx)("a",f(f({},r),{},{children:(0,d.jsx)(c.s,{src:e.author.avatar_url,name:e.author.name,size:"10"})}))}),(0,d.jsxs)("div",{className:"trending-posts__content",children:[(0,d.jsx)("a",{href:e.show_path,className:"trending-posts__post-name",children:e.name}),!e.hide_meta_info&&(0,d.jsx)("a",f(f({},r),{},{className:"trending-posts__author-name",children:e.author.name}))]})]})},e.id)}))})})]}):null},h=function(){return(0,d.jsx)("div",{className:"homepage__sidebar",children:(0,d.jsx)(b,{})})}},46776:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var n=r(67294),i=r(85249),o=r(79598),a=r(52274),s=r(85893),l=function(){var e=(0,i.R)(),t=e.spaces,r=e.fetchSpaceSuggestions,l=e.spacesHasNextPage;(0,n.useEffect)((function(){r({page:1,perPage:3})}),[]);return t.length>2?(0,s.jsx)("div",{className:"carousel carousel--suggested-spaces",children:(0,s.jsx)(o.l,{cards:t,renderCardsOnpage:function(e){var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,o=void 0===i?2:i;return t.slice(n,o).map((function(e){return(0,s.jsx)(a.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members},e.id)}))},cardsPerPage:3,cardsHaveNextPage:l,fetchCards:r})}):(0,s.jsx)("div",{})}},5463:(e,t,r)=>{"use strict";r.d(t,{B:()=>b});var n=r(64687),i=r.n(n),o=r(67294),a=r(85249),s=r(18605),l=r(94184),c=r.n(l),u=r(85893),d=function(e){var t=e.title,r=e.description;return(0,u.jsxs)("div",{className:c()("welcome-banner__content-wrapper",{"has-title":t.length>0}),children:[t&&(0,u.jsx)("h1",{className:"welcome-banner__title","data-testid":"welcome-banner-title",children:t}),r&&(0,u.jsx)("div",{className:"welcome-banner__content",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})]})},p=r(95815),f=function(e){var t=e.isVideo,r=void 0!==t&&t,n=e.mediaUrl;return r?(0,u.jsx)("div",{className:"welcome-banner__video",children:(0,u.jsx)("div",{className:"video-content",children:(0,u.jsx)(p.n,{url:n})})}):(0,u.jsx)("div",{className:"welcome-banner__image",children:(0,u.jsx)("div",{className:"image-content",children:(0,u.jsx)("img",{loading:"lazy",alt:"",src:n})})})};function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var b=function(e){var t=e.community_member_id,r=(0,a.R)(),n=r.isWelcomeBannerVisible,l=r.bannerData,c=r.fetchBannerData,p=r.setWelcomeBannerPreference,b=r.isBannerDataLoading,h=l.is_video,v=l.media_url,y=l.title,g=l.description,_=l.allow_close;(0,o.useEffect)((function(){c()}),[]);var x=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({communityMemberId:t,display:!1});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return n?b?null:(0,u.jsx)("div",{className:"welcome-banner",children:(0,u.jsxs)("div",{className:"welcome-banner__inside",children:[_&&(0,u.jsx)("button",{type:"button",className:"welcome-banner__close",onClick:function(){return x()},children:(0,u.jsx)(s.JO,{type:"close"})}),v&&(0,u.jsx)("div",{className:"welcome-banner__feature",children:(0,u.jsx)(f,{isVideo:h,mediaUrl:v})}),(y||g)&&(0,u.jsx)(d,{title:y,description:g})]})}):null}},39408:(e,t,r)=>{"use strict";r.d(t,{p:()=>b});var n=r(67294),i=r(86013),o=r(85249),a=r(77986),s=r(52274),l=r(94184),c=r.n(l),u=r(36589),d=r(85893),p=function(){var e=(0,u.I)().isV3Enabled;return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"homepage__nav",children:(0,d.jsx)("h2",{className:"homepage__title","data-testid":"space-title-name",children:(0,i.t)("home_page.title")})}),(0,d.jsx)("div",{className:c()("space__gated locked-pane",{"!rounded-2xl":e}),"data-testid":"post_section",children:(0,d.jsx)("h3",{children:(0,i.t)("landing_page.settings.empty_suggested_spaces_text")})})]})},f=function(){var e=(0,o.R)(),t=e.spaces,r=void 0===t?[]:t,l=e.fetchSpaceSuggestions,c=e.participatingSpacesIds,u=e.spacesHasNextPage,f=e.setParticipatingSpacesIds,m=(c||{}).size,b=void 0===m?0:m,h=(null===r||void 0===r?void 0:r.length)||0;(0,n.useEffect)((function(){l({page:1})}),[]);var v=function(e){var t=new Set(c);t.add(e),f(t)},y=(0,n.useMemo)((function(){return Math.max(3-b,0)}),[b]);return(0,n.useMemo)((function(){return h>=y}),[h,y])?(0,d.jsxs)("div",{className:"suggested-spaces",children:[(0,d.jsxs)("div",{className:"suggested-spaces__header",children:[(0,d.jsxs)("div",{className:"header__left",children:[(0,d.jsx)("div",{className:"header__title",children:y>0?(0,d.jsx)("h2",{children:(0,i.t)("home_page.suggested_spaces.join_count_spaces",{count:y})}):(0,d.jsx)("h2",{children:(0,i.t)("home_page.suggested_spaces.you_are_ready")})}),(0,d.jsx)("div",{className:"header__subtitle",children:y>0?(0,i.t)("home_page.suggested_spaces.to_get_started"):(0,i.t)("home_page.suggested_spaces.click_continue")})]}),(0,d.jsx)("div",{className:"header__right",children:(0,d.jsx)("button",{type:"button",className:"btn btn-primary",disabled:c.size<3,onClick:function(){return window.location.reload()},children:(0,i.t)("home_page.suggested_spaces.continue")})})]}),(0,d.jsx)("div",{className:"suggested-spaces__listing",children:r.map((function(e){return(0,d.jsx)(s.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members,handleJoinSpace:v},e.id)}))}),u&&(0,d.jsx)(a.C,{fetchNewPage:function(e){return l({page:e})},initialPage:2})]}):(0,d.jsx)(p,{})},m=r(5463),b=function(e){var t=e.community_member_id,r=e.display_welcome_banner;return(0,d.jsxs)("div",{children:[r&&(0,d.jsx)(m.B,{communityMemberId:t}),(0,d.jsx)(f,{})]})}},47094:(e,t,r)=>{"use strict";r.d(t,{y:()=>E});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(87536),l=r(50732),c=r(11442),u=r(81089),d=r(88604),p=r(44703),f=r(94184),m=r.n(f),b=r(41389),h=r(8246),v=r(85893);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t=e.isLoading,r=e.handleUpload,n=e.name,i=e.description,o=e.disabled,a=(0,b.uI)({onDropAccepted:r,onDropRejected:function(e){console.error(e)},noClick:!0,disabled:t,accept:{"image/*":[".jpeg",".gif",".png",".jpg"],"video/*":[".mp4",".mov",".m4v"]},maxFiles:1,multiple:!1}),s=a.getRootProps,l=a.getInputProps,c=a.isDragActive;return(0,v.jsx)("div",g(g({className:m()("border-primary flex h-64 w-full items-center justify-center rounded-lg border border-dashed",{"text-secondary bg-secondary":!c,"text-messaging-info-blue border-blue-300 bg-blue-50":c})},s()),{},{onPaste:function(e){var t,n;if((null===(t=e.clipboardData)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0){e.preventDefault();var i=Array.from(e.clipboardData.files);r(i)}},children:(0,v.jsxs)("div",{className:"flex max-w-xs flex-col items-center",children:[(0,v.jsx)("div",{children:(0,v.jsx)(h.Z.LabelLg,{weight:"medium",children:I18n.t("home_page.edit_form.welcome_banner.drop_image")})}),(0,v.jsx)("input",g({},l())),(0,v.jsx)("div",{className:"mt-3 px-4 text-center leading-none",children:(0,v.jsx)(h.Z.LabelSm,{weight:"regular",color:"text-light",children:i})}),(0,v.jsxs)("label",{htmlFor:n,className:"mt-6",children:[(0,v.jsx)("span",{className:m()("h-[34px] rounded-md font-bold leading-5 text-darkest border border-secondary bg-primary hover:bg-tertiary !font-medium py-[6px] px-[18px] text-sm cursor-pointer",{"cursor-not-allowed":o}),children:I18n.t("home_page.edit_form.welcome_banner.upload")}),(0,v.jsx)("input",{accept:"image/*, video/*",type:"file",id:n,name:n,className:"hidden",disabled:o,onChange:function(e){return!o&&r(e.target.files)}})]})]})}))},j=function(e){var t=e.title,r=e.children;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{htmlFor:"cover-image",className:"mb-2",children:t}),(0,v.jsx)("div",{className:"relative mb-2 flex flex-row items-start justify-between whitespace-pre-wrap",children:r})]})},w=r(86013),O=r(56310),S=r.n(O),P=r(18605),k=r(94281),C=function(e){var t=e.url,r=e.type,n=void 0===r?"image":r,i=e.onRemove,o=e.disabled,a=e.isSpaceWelcomeBanner,s=n.includes("image");return(0,v.jsxs)(v.Fragment,{children:[s?(0,v.jsx)("img",{loading:"lazy",src:t,alt:(0,w.t)("cover_image"),className:m()("w-full rounded-md",{"h-auto":!a,"h-[256px] object-cover":a})}):(0,v.jsx)("div",{className:"h-auto rounded-md",children:(0,v.jsx)(S(),{url:t,width:"100%",height:"100%",controls:!0})}),!o&&(0,v.jsx)(k.T,{content:(0,w.t)("home_page.remove_banner"),children:(0,v.jsx)("button",{type:"button",className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex h-[22px] w-[22px] cursor-pointer items-center justify-center rounded-full border",onClick:i,"aria-label":(0,w.t)("home_page.remove_banner"),children:(0,v.jsx)(P.JO,{type:"20-close-sm","aria-hidden":!0,size:20})})})]})};function N(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.name,r=void 0===t?"cover_image":t,n=e.title,f=e.description,m=e.disabled,b=void 0!==m&&m,h=e.removeAttachmentsPath,y=void 0===h?"":h,g=e.removeAttachmentsParams,_=void 0===g?{}:g,w=e.isVideo,O=void 0!==w&&w,S=e.isSpaceWelcomeBanner,P=void 0!==S&&S,k=(0,s.Gc)(),A=k.getValues,E=k.setValue,D=I((0,o.useState)(0),2),T=D[0],L=D[1],M=I((0,o.useState)(!1),2),R=M[0],B=M[1],U=A(r),F={};if((0,a.isObject)(U))F=U;else if(!((0,a.isObject)(U)||(0,a.isNull)(U)||(0,a.isUndefined)(U))){F={url:(0,l.C9)({filename:r,signed_id:U}),type:O?"video":"image"}}var z=I((0,o.useState)(F),2),V=z[0],q=z[1],Z=V.url,G=V.type,W=function(e){B(!0),L(e)},H=function(e,t,n){q({url:e,type:null===n||void 0===n?void 0:n.split("/")[0]}),E(r,t),B(!1)},Q=function(){var e,t=(e=i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),t=y||(0,l._E)(),n=(0,a.isEmpty)(_)?{field_name:p.lb[r]}:_,e.next=5,(0,u.pC)(t,n);case 5:e.sent.success&&(E(r,{url:null,type:"image"}),q({})),B(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,s,"next",e)}function s(e){N(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return R?(0,v.jsx)(j,{title:n,children:(0,v.jsx)("div",{className:"text-default bg-secondary border-primary flex h-64 w-full items-center justify-center rounded-md border border-dashed",children:(0,v.jsx)(c.D,{percentage:T,size:32,strokeWidth:3})})}):(0,v.jsx)(j,{title:n,children:Z?(0,v.jsx)(C,{url:Z,type:G,onRemove:Q,disabled:b,isSpaceWelcomeBanner:P}):(0,v.jsx)(x,{isLoading:R,handleUpload:function(e){try{new d.Q(e[0],H,"","",W).start()}catch(t){console.error(t)}},name:r,description:f,disabled:b})})}},44703:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{PM:()=>a,A1:()=>s,lb:()=>l});var a=function(e){var t=e.community,r=e.community_setting,n=r.meta_tags;return i(i({logged_in_description:t.logged_in_user_home_page_banner_description,logged_in_media:t.logged_in_user_home_page_banner_media,logged_in_title:r.logged_in_user_home_page_banner.title,allow_close:r.logged_in_user_home_page_banner.allow_close,logged_in_banner_enabled:r.logged_in_user_home_page_banner.enabled,logged_out_description:t.logged_out_user_home_page_banner_description,logged_out_media:t.logged_out_user_home_page_banner_media,logged_out_title:r.logged_out_user_home_page_banner.title,logged_out_banner_enabled:r.logged_out_user_home_page_banner.enabled,trending_posts_window_in_days:r.trending_posts_window_in_days,default_post_sort_logged_in_user:r.default_post_sort_logged_in_user,default_post_sort_logged_out_user:r.default_post_sort_logged_out_user,include_non_member_space_posts:r.include_non_member_space_posts},n),{},{opengraph_image:n.opengraph_image})},s=function(e,t){var r=t.community,n=t.community_setting,o=n.meta_tags;return i(i({},t),{},{community:i(i({},r),{},{logged_in_user_home_page_banner_description:e.logged_in_description,logged_out_user_home_page_banner_description:e.logged_out_description,logged_in_user_home_page_banner_media:e.logged_in_media,logged_out_user_home_page_banner_media:e.logged_out_media}),community_setting:i(i({},n),{},{trending_posts_window_in_days:e.trending_posts_window_in_days,default_post_sort_logged_in_user:e.default_post_sort_logged_in_user,default_post_sort_logged_out_user:e.default_post_sort_logged_out_user,include_non_member_space_posts:e.include_non_member_space_posts,logged_in_user_home_page_banner:i(i({},n.logged_in_user_home_page_banner),{},{title:e.logged_in_title,enabled:e.logged_in_banner_enabled,allow_close:e.allow_close}),logged_out_user_home_page_banner:i(i({},n.logged_out_user_home_page_banner),{},{title:e.logged_out_title,enabled:e.logged_out_banner_enabled}),meta_tags:i(i({},o),{},{meta_title:e.meta_title,meta_description:e.meta_description,opengraph_title:e.opengraph_title,opengraph_description:e.opengraph_description,opengraph_image:e.opengraph_image})})})},l={logged_in_media:"logged_in_user_home_page_banner_media",logged_out_media:"logged_out_user_home_page_banner_media"}},27716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b,N:()=>h});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(88767),l=r(81089),c=r(50732),u=r(3209),d=r(31979),p=r(70254),f=r(98338);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var b="home-page-posts",h=function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,h=(0,f.nT)(),v=(null===h||void 0===h||null===(t=h.helpers)||void 0===t?void 0:t.isDataLoading)||a.noop,y=(0,f.wh)(),g=Boolean(null===y||void 0===y?void 0:y.isLoading),_=(0,p.t)().sort,x=void 0===_?e:_,j=(0,u.d)(),w=j.removeRecord,O=j.findAndReplaceRecord,S=(0,s.useQueryClient)(),P=(0,o.useMemo)((function(){return Boolean(v()||g)}),[v,g]),k=(0,o.useMemo)((function(){return[b,{sort:x}]}),[x]),C=(0,s.useInfiniteQuery)(k,(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,l.UT)(c.av.homePagePosts.index({params:{page:t,sort:x}}))}),{keepPreviousData:!0,enabled:r,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){(0,a.isFunction)(n)&&n(e)}}),N=C.fetchNextPage,I=C.data,A=C.hasNextPage,E=C.isLoading,D=C.refetch,T=(0,o.useCallback)(function(){var e,t=(e=i().mark((function e(t){var r,n,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(o.length>1&&void 0!==o[1]?o[1]:{}).refetch,n=t,void 0!==r&&!r){e.next=6;break}return e.next=5,S.fetchQuery(c.av.posts.show({spaceId:t.space_id,postSlug:t.slug}));case 5:n=e.sent;case 6:return e.abrupt("return",O(n,k));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[S,O,k]),L=(0,o.useCallback)((function(e){w(e,k)}),[w,k]),M=(0,d.D)(),R=(0,o.useMemo)((function(){return I?(0,a.uniqBy)((0,a.flatten)(I.pages.map((function(e){return e.records}))),"id"):[]}),[I]),B=(0,o.useMemo)((function(){return I?I.pages.map((function(e){return e.records.map((function(e){return e.id}))})):[]}),[I]);return{fetchNextPage:N,hasNextPage:Boolean(A),isLoading:E,isLoadingAppData:M,onPostChange:T,onPostDestroy:L,perPagePostIds:B,posts:R,refetchPosts:D,shouldShowLoader:P}}},97084:(e,t,r)=>{"use strict";r.d(t,{w:()=>c});var n=r(86013),i=r(94281),o=r(67741),a=r(8246),s=r(85893),l=function(e){var t=e.tooltipText,r=e.text;return!e.hide&&(0,s.jsx)(i.T,{content:t,className:"cursor-pointer pr-3",children:(0,s.jsx)(a.Z.LabelSm,{color:"text-default",children:r})})},c=function(e){var t=e.invitationLinkName,r=e.invitationLinkActive,i=e.membersCount,c=e.spaces,u=e.spaceGroups,d=e.shouldShowPaywall,p=e.paywallString,f=e.paywallCouponString,m=r?"success":"default";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(a.Z.LabelLg,{children:t}),(0,s.jsx)(o.C,{variant:m,children:(0,s.jsx)("div",{className:"px-2 py-1",children:r?(0,n.t)("invitation_links.summary.badge.active"):(0,n.t)("invitation_links.summary.badge.revoked")})})]}),(0,s.jsx)("div",{className:"pt-1",children:(0,s.jsx)(a.Z.LabelSm,{color:"text-dark",children:(0,n.t)("invitation_links.members_joined",{count:i})})}),(0,s.jsxs)("div",{className:"flex pt-2",children:[(0,s.jsx)(l,{tooltipText:c.join(", "),text:(0,n.t)("invitation_links.summary.spaces",{count:c.length}),hide:c.length<=0}),(0,s.jsx)(l,{tooltipText:u.join(", "),text:(0,n.t)("invitation_links.summary.space_groups",{count:u.length}),hide:u.length<=0}),(0,s.jsx)(l,{tooltipText:p,text:(0,n.t)("invitation_links.summary.paywall"),hide:!d}),(0,s.jsx)(l,{tooltipText:f,text:(0,n.t)("invitation_links.summary.paywall_coupon"),hide:!d||!f})]})]})}},81753:(e,t,r)=>{"use strict";r.d(t,{Q:()=>B});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(81786),l=r(81089),c=r(50732),u=r(96789),d=r(20292),p=r(43227),f=r(42138),m=r(18785),b=r(57699),h=r(14360),v=r(46663),y=r(48997),g=r(22395),_=r(88604),x=r(85893);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O="landing_page.settings.welcome_banner",S=function(e){var t=e.keyField,r=e.title,n=e.media,i=e.description,s=e.allowClose,l=e.enabled,c=e.onTitleChange,p=e.onBannerDescriptionChange,f=e.displayAllowClose,m=e.onAllowCloseChange,w=e.onRemoveMedia,S=e.onEnabledChange,P=e.setMediaSettings,k=(0,u.o)().reSetWelcomeBannerPreference,C=j((0,o.useState)(!1),2),N=C[0],I=C[1],A=j((0,o.useState)({}),2),E=A[0],D=A[1],T=j((0,o.useState)(0),2),L=T[0],M=T[1],R=j((0,o.useState)(!1),2),B=R[0],U=R[1];(0,g.a)(N);var F=function(e){U(!0),M(e)},z=function(e,t,r,n){D({url:e,type:r}),U(!1);var i=n.split("community")[1].replace(/^\[(.+)\]$/,"$1");P(i,t)},V=function(){D({}),w()},q=function(){return(0,x.jsxs)("div",{className:"form-group full-width media-uploader",id:"field-".concat(t),children:[(0,x.jsx)(d.Q,{field:t,label:(0,a.t)("".concat(O,".media")),description:(0,a.t)("".concat(O,".media_description"))}),(0,x.jsx)(y.o,{id:t,name:t,media:n,previewMedia:E,onMediaUpload:function(e){return function(e,t){try{new _.Q(e.target.files[0],z,"media-uploader",t||"",F).start()}catch(r){console.error(r)}}(e,"community[".concat(t,"_media]"))},isLoading:B,progress:L,onRemoveMedia:V})]})},Z=function(){I(!1)},G=function(){I(!0)},W=function(e){e.preventDefault(),k(),I(!1)};return(0,x.jsxs)("div",{className:"form-section__content",children:[(0,x.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-show-banner"),children:[(0,x.jsx)(d.Q,{field:t,label:(0,a.t)("".concat(O,".header")),description:(0,a.t)("".concat(O,".header_description"))}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("div",{className:"form-meta-button",children:(0,x.jsx)(b.Z,{field:"field-".concat(t,"-enabled"),value:l,onToggleChange:S})})})]}),l&&(0,x.jsxs)("div",{className:"form-section__background",children:[q(),(0,x.jsxs)("div",{className:"form-group full-width",children:[(0,x.jsx)(d.Q,{field:"".concat(t,"-title"),label:(0,a.t)("".concat(O,".title"))}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:r||"",onChange:c})})]}),(0,x.jsxs)("div",{className:"form-group full-width",children:[(0,x.jsx)(d.Q,{field:"".concat(t,"-description"),label:(0,a.t)("".concat(O,".description"))}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)(h.Z,{id:"rich-text-description-".concat(t),placeholder:(0,a.t)("".concat(O,".write_a_description")),name:"rich-text-description-".concat(t),value:i||"",onChange:p,is_private_space:!1,preventAccidentalLeave:!1},"rich-text-description-".concat(t))})]}),f&&(0,x.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-allow-close"),children:[(0,x.jsxs)("div",{className:"form-meta",children:[(0,x.jsx)("label",{htmlFor:"".concat(t,"-allow-close"),children:(0,a.t)("".concat(O,".allow_close_title"))}),(0,x.jsxs)("div",{className:"field-description",children:[(0,a.t)("".concat(O,".allow_close_title_description")),"\xa0",(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{type:"button",onClick:G,className:"homepage-reset-banner-link w-full text-left",children:(0,a.t)("".concat(O,".reset_preference_title"))}),Boolean(N)&&(0,x.jsx)(v.c,{show:N,closeOnEscape:!0,closeOnOutsideClick:!0,onClose:Z,onConfirmation:W,headerText:(0,a.t)("".concat(O,".reset_preference_title")),bodyText:(0,a.t)("".concat(O,".reset_preference_description")),className:"reset-banner-modal"})]})]})]}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("div",{className:"form-meta-button",children:(0,x.jsx)(b.Z,{field:"allow_close",value:s,onToggleChange:m})})})]})]})]})},P=function(e){var t=e.fieldName,r=e.displayAllowClose,n=void 0===r||r,i=e.community,o=e.community_setting,a=e.setMediaSettings,s=e.onBannerDescriptionChange,l=e.onCommunitySettingChange,c=e.onRemoveMedia,u=o[t],d=u.enabled,p=u.title,f=u.allow_close;return(0,x.jsx)(S,{keyField:t,title:p,enabled:d||!1,description:i["".concat(t,"_description")],media:i["".concat(t,"_media")],setMediaSettings:a,onBannerDescriptionChange:function(e){return s(e,"".concat(t,"_description"))},allowClose:f||!1,onTitleChange:function(e){return l(t,"title",e.target.value)},onAllowCloseChange:function(e){return l(t,"allow_close",e)},onEnabledChange:function(e){return l(t,"enabled",e)},displayAllowClose:n,onRemoveMedia:function(e){return c(e,"".concat(t,"_media"))}})},k=(0,a.t)("landing_page.settings"),C=function(e){var t=e.fieldName,r=e.options,n=e.community,i=e.onOptionSelect,o="".concat(t,"_id");return(0,x.jsxs)("div",{className:"form-group",id:"field-".concat(o),children:[(0,x.jsx)(d.Q,{field:o,label:k[t],description:k["".concat(t,"_description")]}),(0,x.jsx)(m.K,{options:r,selected:n[o],customKey:o,onOptionSelect:function(e){return i(e,o,"community")}})]})};function N(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)}))}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(){var e=L((0,o.useState)(!1),2),t=e[0],r=e[1],n=L((0,o.useState)({logged_in:!0,logged_out:!0,meta_details:!0}),2),h=n[0],v=n[1],y=L((0,o.useState)(new Set),2),g=y[0],_=y[1],j=(0,u.o)(),w=j.dataLoaded,O=j.settings,S=j.metaData,k=j.loggedInUserSpaceOptions,I=j.loggedOutUserSpaceOptions,D=j.setSettings,M=j.fetchLandingPageSettings,R=j.setLoggedInUserSpaceOptions,B=j.setLoggedOutUserSpaceOptions,U=O.community,F=O.community_setting,z=U.home_page_enabled,V=U.default_existing_member_space_id,q=U.default_new_member_space_id,Z=U.default_logged_out_space_id,G=F.trending_posts_window_in_days,W=F.include_non_member_space_posts,H=F.meta_tags,Q=S.postSortOptions,J=S.trendingPostWindowLimit,K=S.homePageOption,$=(0,a.t)("landing_page.settings");(0,o.useEffect)((function(){M()}),[]);var X=function(){var e=new Set;return G>J&&e.add((0,a.t)("landing_page.settings.trending_posts_window_limit_exceed",{limit:J})),["logged_in_user_home_page_banner","logged_out_user_home_page_banner"].forEach((function(t){var r=F[t],n=r.enabled,i=r.title;if(n){var o=U["".concat(t,"_media")],a=o.url&&o.url.length>0||o.length>0;0!==i.length||0!==U["".concat(t,"_description")].length||a||e.add($.welcome_banner.errors.blank_welcome_banner)}})),!(e.size>0)||(_(e),!1)},Y=function(){var e=T(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),X()?(r(!0),n=(0,l.wG)({landing_page_settings:O}),fetch((0,c.H5)(),{method:"POST",body:n,credentials:"same-origin",mode:"no-cors",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(){r(!1),window.location.reload()})).catch((function(e){console.error(e)}))):window.scrollTo(0,0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=T(i().mark((function e(t,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,fetch((0,c._E)(),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({field_name:n})});case 3:e.sent.ok&&(o={community:A(A({},U),{},E({},n,{})),community_setting:F},D(o),r(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),te=function(e,t){var r={community:A(A({},U),{},E({},e,t)),community_setting:F};D(r)},re=function(e,t,r){var n={community:U,community_setting:A(A({},F),{},E({},e,t?A(A({},F[e]),{},E({},t,r)):r))};D(n)},ne=function(e,t){var r={community:A(A({},U),{},E({},t,e.target.innerHTML)),community_setting:F};D(r)},ie=function(e,t,r){var n=O;n="community"===r?{community:A(A({},U),E({},t,e.value)),community_setting:F}:{community:U,community_setting:A(A({},F),E({},t,e.value))},D(n)},oe=function(e){var t=K.value;if(!0===e){var r={home_page_enabled:e,default_existing_member_space_id:t,default_new_member_space_id:t,default_logged_out_space_id:t},n={community:A(A({},U),r),community_setting:F};R([K].concat(N(k))),B([K].concat(N(I))),D(n)}else{var i={home_page_enabled:e},o=k.filter((function(e){return e.value!==t})),a=I.filter((function(e){return e.value!==t}));V===K.value&&(i.default_existing_member_space_id=o[0].value),q===K.value&&(i.default_new_member_space_id=o[0].value),Z===K.value&&(i.default_logged_out_space_id=o[0].value);var s={community:A(A({},U),i),community_setting:F};D(s),R(o),B(a)}},ae=function(){return(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)(d.Q,{field:"trending_posts_window_in_days_title",label:$.trending_posts_window_in_days_title,description:$.trending_posts_window_in_days_description}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:G,onChange:function(e){return re("trending_posts_window_in_days",null,e.target.value)}})})]})},se=["logged_in","logged_out"].map((function(e){var t="default_post_sort_".concat(e,"_user");return(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)(d.Q,{field:t,label:$[t],description:$["".concat(t,"_description")]}),(0,x.jsx)(m.K,{options:Q,selected:F[t],customKey:t,onOptionSelect:function(e){return ie(e,t,"community_setting")},searchable:!1})]},t)})),le=function(){return(0,x.jsxs)("div",{className:"form-group full-width",children:[(0,x.jsx)(d.Q,{field:"include_non_member_space_posts",label:$.include_non_member_space_posts_title,description:$.include_non_member_space_posts_description}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("div",{className:"form-meta-button",children:(0,x.jsx)(b.Z,{field:"include_non_member_space_posts",value:W,onToggleChange:function(e){return re("include_non_member_space_posts",null,e)}})})})]})},ce=["logged_in","logged_out"].map((function(e){var t=h[e];return(0,x.jsxs)("div",{className:"form-section",children:[(0,x.jsx)("div",{className:"form-section__header has-toggle",children:(0,x.jsx)("button",{type:"button",className:"block-toggle ".concat(t?"open":"hidden"),onClick:function(r){r.preventDefault(),v(A(A({},h),{},E({},e,!t)))},children:$["".concat(e,"_defaults_title")]})}),t&&("logged_in"===e?(0,x.jsxs)("div",{className:"form-section__content",children:[(0,x.jsx)(C,{fieldName:"default_existing_member_space",options:k,community:U,onOptionSelect:ie}),(0,x.jsx)(C,{fieldName:"default_new_member_space",options:k,community:U,onOptionSelect:ie}),z&&(0,x.jsx)(P,{fieldName:"logged_in_user_home_page_banner",community:U,community_setting:F,setMediaSettings:te,onBannerDescriptionChange:ne,onCommunitySettingChange:re,onRemoveMedia:ee})]}):(0,x.jsxs)("div",{className:"form-section__content",children:[(0,x.jsx)(C,{fieldName:"default_logged_out_space",options:I,community:U,onOptionSelect:ie}),z&&(0,x.jsx)(P,{fieldName:"logged_out_user_home_page_banner",community:U,community_setting:F,setMediaSettings:te,onBannerDescriptionChange:ne,onCommunitySettingChange:re,onRemoveMedia:ee})]}))]},"".concat(e,"-section"))}));return w?(0,x.jsxs)("form",{onSubmit:Y,children:[g.size>0&&(0,x.jsx)("div",{className:"form-errors",children:g}),(0,x.jsx)("div",{className:"form-section",children:(0,x.jsxs)("div",{className:"form-section__content border-top",children:[(0,x.jsxs)("div",{className:"form-section",children:[(0,x.jsx)("div",{className:"form-group__toggle",children:(0,x.jsxs)("div",{className:"form-group full-width",id:"field-home_page_enabled",children:[(0,x.jsx)(d.Q,{field:"home_page_enabled",label:$.home_page_enabled,description:$.home_page_enabled_description}),(0,x.jsx)("div",{className:"form-input",children:(0,x.jsx)("div",{className:"form-meta-button",children:(0,x.jsx)(b.Z,{field:"home_page_enabled",value:z,onToggleChange:oe})})})]})}),z&&(0,x.jsxs)("div",{className:"form-group__hidden",children:[ae(),se,le()]})]}),ce,z&&(0,x.jsxs)("div",{className:"form-section",children:[(0,x.jsx)("div",{className:"form-section__header has-toggle",children:(0,x.jsx)("button",{type:"button",className:"block-toggle ".concat(h.meta_details?"open":"hidden"),onClick:function(e){e.preventDefault(),v(A(A({},h),{},{meta_details:!h.meta_details}))},children:$.meta_tag.meta_tag_section_title})}),h.meta_details&&(0,x.jsx)(f.p,{metaTagDetails:H,localizedData:$,onCommunitySettingChange:re})]},"meta-data-section")]})}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(s.z,{variant:"circle",type:"submit",disabled:t,children:t?(0,a.t)("submitting"):(0,a.t)("save_changes")})})]}):(0,x.jsx)(p.m,{})}},9965:(e,t,r)=>{"use strict";r.d(t,{x:()=>I});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(40160),l=r(24185),c=r(83701),u=r(98338),d=r(38503),p=r(54482),f=r(64626),m=r(36589),b=r(85893),h=function(e){var t=e.currentCommunity,r=(0,d.TC)().isDarkAppearance,n=(0,m.I)().isV3Enabled,i=t||{},s=i.name,l=i.logo_url,c=i.dark_logo_url,u=l;return r&&c&&(u=c),u?(0,b.jsx)("a",{href:"/",className:"community__brand",children:(0,b.jsx)("div",{className:"community__logo",children:(0,b.jsx)("img",{loading:"lazy",alt:(0,a.t)("community_logo_alt",{community_name:s}),src:u})})}):(0,b.jsxs)("a",{href:"/",className:"community__brand",children:[(0,b.jsx)("div",{className:o()("brand-icon brand-icon__initial",{"!rounded-xl":n})}),(0,b.jsx)("div",{className:"name",children:s})]})},v=r(64660),y=r(39068),g=r(50732),_=r(64422),x=r(27025),j=function(){var e=(0,u.wh)(),t=e.currentUser,r=e.currentCommunityMember,n=(0,l.TH)(),i=(0,u.ic)(),s=(0,v.r)().show,c=(0,y.vb)(r),d=(0,m.I)().isV3Enabled,f=(null===r||void 0===r?void 0:r.policies)||{},h=f.can_access_billing,j=f.can_access_authentication_page,w=[{action:function(){return s({memberPublicId:null===r||void 0===r?void 0:r.public_uid})},label:(0,a.t)("my_profile")},{to:g.du.profile(n),label:(0,a.t)("edit_profile")},{to:g.du.notifications(n),label:(0,a.t)("notification")},j&&{to:g.du.authentication(n),label:(0,a.t)("authentication")},h&&{to:g.du.billing(n),label:(0,a.t)("billing")},c&&[{action:function(){return window.location.href="/analytics"},label:(0,a.t)("analytics_title")},{to:"/audience/manage",label:(0,a.t)("audience")},{to:"/settings",label:(0,a.t)("settings_title")}]].flat().filter(Boolean);return t?(0,b.jsx)(x.Lt,{className:"user-menu z-[9999]",button:(0,b.jsx)(_.s,{name:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.avatar_url,size:"8"}),appendTo:document.getElementById("mainHeader")||document.body,children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:o()("-mt-2 mb-1.5 w-full py-1",{"bg-secondary":d}),children:(0,b.jsx)(x.Lt.ItemWithLink,{to:"/u/".concat(null===r||void 0===r?void 0:r.public_uid,"?show_back_link=true"),children:null===r||void 0===r?void 0:r.name})}),w.map((function(e){return(0,b.jsx)(x.Lt.ItemWithLink,{to:e.to,onClick:e.action,children:e.label},e.label)})),(0,b.jsx)(x.Lt.Separator,{}),(0,b.jsx)(x.Lt.ItemLink,{onClick:function(){return window.location.href="/users/sign_out"},children:(0,a.t)("sign_out")})]})}):(0,b.jsx)("div",{className:"user-join__mobile",children:(0,b.jsx)("div",{className:"user-join__menu",children:(0,b.jsxs)(x.Lt,{button:(0,b.jsx)(p.h,{name:"20-user",iconSize:20,buttonSize:28,ariaLabel:(0,a.t)("log_in"),iconClassName:"!w-5 !h-5 !text-dark"}),className:"z-[9999]",appendTo:document.getElementById("mainHeader")||document.body,children:[(0,b.jsx)(x.Lt.ItemLink,{onClick:function(){return window.location.href=g.zo.signIn()},children:(0,a.t)("log_in")}),i((function(e){var t=e.communitySignupUrl;return(0,b.jsx)(x.Lt.ItemLink,{onClick:function(){return window.location.href=t},children:(0,a.t)("sign_up")})}))]})})})},w=function(){var e=(0,d.wC)().minimal_layout,t=(0,u.wh)(),r=t.currentCommunity,n=void 0===r?{}:r,i=t.currentCommunitySettings,m=(0,f.gn)(),v=Boolean((0,l.$B)("/c/:spaceSlug/:postSlug")),y=Boolean(null===i||void 0===i?void 0:i.post_details_mobile_header_enabled);return v&&y?null:(0,b.jsx)("div",{className:"sticky top-0 z-30",children:(0,b.jsx)("header",{id:"mainHeader",className:"header header-v2 !bg-c-header",style:m,children:(0,b.jsxs)("div",{className:"header__inside",children:[!e&&(0,b.jsx)("div",{className:"header__menu",children:(0,b.jsx)(p.h,{name:"hamburger","data-action":"click->mobile-sidebar#toggle",ariaLabel:(0,a.t)("toggle_menu"),className:"toggle-button",buttonSize:28,iconSize:20,iconClassName:"!w-5 !h-5 !text-dark"})}),(0,b.jsx)("div",{className:o()("header__left",{"!justify-start":e}),children:(0,b.jsx)(h,{currentCommunity:n})}),(0,b.jsxs)("div",{className:"header__actions",children:[(0,b.jsx)(c._,{}),(0,b.jsx)("div",{className:"header__action",children:(0,b.jsx)("a",{href:"/analytics",children:(0,b.jsx)("svg",{className:"icon icon-analytics",viewBox:"0 0 24 24",children:(0,b.jsx)("use",{xlinkHref:"#icon-analytics"})})})}),(0,b.jsx)("div",{className:"header__action",children:(0,b.jsx)(s.rU,{to:"/audience/manage",children:(0,b.jsx)("svg",{className:"icon icon-members",viewBox:"0 0 24 24",children:(0,b.jsx)("use",{xlinkHref:"#icon-members"})})})}),(0,b.jsx)("div",{className:"header__action",children:(0,b.jsx)(s.rU,{to:"/settings",children:(0,b.jsx)("svg",{className:"icon icon-settings",viewBox:"0 0 24 24",children:(0,b.jsx)("use",{xlinkHref:"#icon-settings"})})})}),(0,b.jsx)("div",{className:"header__user relative z-30",children:(0,b.jsx)(j,{})})]})]})})})},O=r(10281),S=r(31979),P=r(17551),k=r(90789),C=r(4404),N=r(51745),I=function(){var e=window.location.href,t=(0,n.useCallback)((function(e){null!==e&&(0,O.J)(e)}));(0,n.useEffect)((function(){(0,O.J)(t.current)}),[e]);var r=(0,P.U)(),i=(0,u.nT)().helpers.findBy({slug:r}),o=(0,N.p)(),a=(0,S.D)();return o?a?(0,b.jsx)("header",{className:"header",children:(0,b.jsx)(C.gi,{variant:"app-bar",showMemberAvatarsRow:!!i&&((0,k.V5)(i)||(0,k.H3)(i))})}):(0,b.jsx)(w,{}):null}},29172:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var n=r(54914),i=r(85893),o=function(){var e=(0,n._)().data,t=(e=void 0===e?{}:e).browser_notifications_html;return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}},3135:(e,t,r)=>{"use strict";r.d(t,{W:()=>c});var n=r(88767),i=r(52352),o=r(14856),a=r(69647),s=r(85893),l=new n.QueryClient(o.Vr),c=function(){return(0,s.jsx)(n.QueryClientProvider,{client:l,children:(0,s.jsx)(a.V,{children:(0,s.jsx)(i.f,{})})})}},52352:(e,t,r)=>{"use strict";r.d(t,{f:()=>b});var n=r(94184),i=r.n(n),o=r(86013),a=r(52228),s=r(8246),l=r(37447),c=r(36589),u=r(13288),d=r(18605),p=r(85893),f=function(e){var t=e.complete;return(0,p.jsx)(d.JO,{viewBox:"0 0 16 16",size:16,type:t?"circle-checked-old":"circle-unchecked-old"})},m=function(e){var t=e.complete,r=e.href,n=e.text,o=e.children;return(0,p.jsx)("li",{className:i()({"li--complete":t}),children:o||(0,p.jsxs)("a",{href:r,className:i()({"!text-dark":!t}),children:[(0,p.jsx)(f,{complete:t}),n]})})},b=function(){var e=(0,a.kc)(),t=e.onboardingData,r=e.isLoading,n=e.isOnboardingAvailable,d=(0,c.I)().isV3Enabled;if(r)return(0,p.jsx)(u.a,{});if(!r&&!n)return null;var f=Object.keys(a.gg);return(0,p.jsx)("div",{className:i()("sidebar__block sidebar__onboarding-steps !bg-primary !border-primary block border",{"overflow-hidden !rounded-2xl":d}),children:(0,p.jsxs)("div",{className:"block__inside !bg-primary !shadow-none",children:[(0,p.jsx)("div",{className:"block__title",children:(0,p.jsx)(s.Z.TitleMd,{as:"h3",children:(0,o.t)("onboarding_title")})}),(0,p.jsx)("ul",{className:"ul--steps",children:f.map((function(e){var r=a.gg[e];return(0,p.jsx)(m,{text:r.label,href:(0,l.zt)({item:r.queryParam}),complete:t[e]},e)}))})]})})}},91785:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n={standard:"standard",fullscreen:"fullscreen",minimal:"minimal",empty:"empty"}},22097:(e,t,r)=>{"use strict";r.d(t,{O:()=>R,h:()=>B});var n=r(67294),i=r(98338),o=r(36589),a=r(38503),s=r(94184),l=r.n(s),c=r(42658),u=r(54485),d=r(85893),p=function(e){var t=e.children,r=e.bodyClassNames,n=void 0===r?"":r;return(0,c.H)(l()(n,"trix-v2")),(0,u.w)(),(0,d.jsx)("div",{className:"standard-layout-v2",children:t})},f=r(86013),m=r(48464),b=r(18605);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=r(3004),_=function(e){var t=e.title,r=e.children;return(0,d.jsx)(g.S,{title:t,children:(0,d.jsx)("div",{className:"react-layout-fullscreen",children:r})})};_.Content=function(e){var t=e.children;return(0,d.jsx)("div",{className:"react-layout-fullscreen-content",children:(0,d.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:t})})},_.Header=function(e){var t=e.title,r=e.beforeTitle,n=e.afterTitle;return(0,d.jsx)("div",{className:"react-layout-fullscreen-header",children:(0,d.jsxs)("div",{className:"react-layout-fullscreen-wrapper",children:[r&&(0,d.jsx)("div",{className:"react-layout-fullscreen-header-before",children:r}),(0,d.jsxs)("div",{className:"react-layout-fullscreen-header-heading",children:[(0,d.jsx)("h1",{className:"heading-h1",children:t}),n]})]})})},_.Tabs=function(e){var t=e.children;return(0,d.jsx)("div",{className:"react-layout-fullscreen-tabs",children:(0,d.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:(0,d.jsx)("nav",{"aria-label":(0,f.t)("full_screen_layout.tabs"),children:t})})})},_.Topbar=function(e){var t=e.onClose,r=e.actions,n=e.buttonPosition,o=void 0===n?"end":n,a=e.showCommunityIcon,s=void 0===a||a,c=(0,i.wh)().currentCommunity;return(0,d.jsxs)("div",{className:l()("react-layout-fullscreen-topbar",{"react-layout-fullscreen-topbar--reverse":"start"===o}),children:[s&&c&&(0,d.jsx)("div",{className:"react-layout-fullscreen-topbar__community-icon",children:(0,d.jsx)(m.G,v({brand_color:c.prefs.brand_color,brand_text_color:c.prefs.brand_text_color},c))}),(0,d.jsx)("div",{className:"react-layout-fullscreen-topbar__actions",children:r}),(0,d.jsxs)("button",{type:"submit",className:"btn-close",onClick:t,children:[(0,d.jsx)(b.JO,{type:"close"}),(0,d.jsx)("span",{className:"sr-only",children:(0,f.t)("full_screen_layout.close_panel")})]})]})};var x=r(9965),j=r(28159),w=r(54030),O=r(22344),S=function(e){var t=e.children,r=e.bodyClassNames,n=void 0===r?"":r,o=(0,i.wh)().currentCommunityMember;(0,c.H)(l()(n,"trix-v2 minimal-layout"));var a=(0,w.ef)();return(0,d.jsx)("div",{id:"panel",className:"minimal-layout__wrapper",children:(0,d.jsxs)("div",{className:"community__content !bg-secondary",children:[(0,d.jsx)(O.G,{isRenderedOutsideSpace:!0}),(0,d.jsx)(x.x,{}),(0,d.jsx)("div",{className:"standard-layout-v2 no-right-sidebar",children:t}),Boolean(!!o&&a)&&(0,d.jsx)(j.H,{})]})})},P=r(63411),k=r(91785),C=r(25954),N=["disabledSidebar"];function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M=(0,n.createContext)(void 0);M.displayName="DynamicLayoutContext";var R=function(e){var t,r,s,l,c,u,f=e.disabledSidebar,m=L(e,N),b=(0,i.wh)().isLoading,h=(0,a.wC)().minimal_layout,v=D((0,n.useState)({}),2),y=v[0],g=v[1],x=D((0,n.useState)(h?k.C.minimal:k.C.standard),2),j=x[0],O=x[1],I=(0,o.I)().isV3Enabled,E=(t=(0,C.H)(),r=t.isSpaceRoute,s=t.isSpaceGroupRoute,l=t.isFeedRoute,c=(0,w.a7)(),!r&&!s&&!l&&c),T=I?E:f;switch(j){case k.C.fullscreen:u=_;break;case k.C.standard:u=P.a;break;case k.C.minimal:u=S;break;case k.C.empty:u=p;break;default:u=P.a}return b?null:(0,d.jsx)(M.Provider,{value:{layoutType:j,setLayoutType:O,setStandardLayout:function(){return O(k.C.standard)},setMinimalLayout:function(){return O(k.C.minimal)},setEmptyLayout:function(){return O(k.C.empty)},setDynamicLayoutProps:g,resetDynamicLayoutProps:function(){return g({})}},children:(0,d.jsx)(u,A(A(A({},m),y),{},{disableSidebar:T}))})},B=function(){return(0,n.useContext)(M)}},87108:(e,t,r)=>{"use strict";r.d(t,{u:()=>R});var n=r(94184),i=r.n(n),o=r(86013),a=r(96486),s=r(74666),l=r(18605),c=r(50308),u=r.n(c),d=r(40160),p=r(85893),f=["children","className"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=function(e){var t=e.children,r=e.className,n=v(e,f);return function(e){return"to"in e}(n)?(0,p.jsx)(d.rU,b(b({className:i()("text-dark flex w-full justify-center p-5",r),onClick:n.onClick||u()},n),{},{children:t})):function(e){return!("to"in e)}(n)?(0,p.jsx)("button",b(b({type:"submit",className:i()("text-dark flex w-full justify-center p-5",r),onClick:n.onClick||u()},n),{},{children:t})):null},g=function(e){var t=e.children;return(0,p.jsx)("span",{className:"text-xxs bg-brand absolute right-[-12px] top-[-6px] block rounded-full border-2 border-white px-[6px] py-[4px] text-center font-bold leading-none text-white",children:t})},_=r(24185),x=r(98338),j=r(90789),w=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote;return(0,p.jsx)("a",{href:t,"data-remote":r,className:"text-dark flex w-full justify-center p-5",children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},O=r(73490),S=r(75038),P=function(){var e=(0,O.m)().spaceId,t=(0,S.L)();return(0,p.jsx)("button",{type:"button",onClick:function(){return t.show({spaceId:e})},className:"text-dark flex w-full justify-center p-5",children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("events.create.title"),type:"bar-plus",size:24,useWithStrokeCurrentColor:!0})})},k=r(1744),C=function(e){var t=e.spaceId,r=(0,k.e)();return(0,p.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:function(){r.show({spaceId:t,onClose:function(){r.remove()}})},children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},N=r(93572),I=function(){return(0,p.jsx)(N.h,{render:function(e){var t=e.onClick;return(0,p.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:t,children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})}})},A=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote,n=void 0!==r&&r,i=e.shouldNewPostOpenModal,o=void 0!==i&&i,a=((0,_.$B)("/c/:spaceSlug")||{}).params,s=(a=void 0===a?{spaceSlug:""}:a).spaceSlug,l=(0,x.nT)().helpers.findBy({slug:s})||{};return(0,j.V5)(l)?(0,p.jsx)(P,{}):(0,j.Ds)(l)?(0,p.jsx)(C,{spaceId:l.id}):o?(0,p.jsx)(I,{}):(0,p.jsx)(w,{newPostUrl:t,newPostUseDataRemote:n})},E=["className","newPostUrl","newPostUseDataRemote","onHomeClick","onNotificationsClick","onSearchClick","shouldNewPostOpenModal","shouldShowMessagingRoutes","style","unreadChatCount","unreadNotificationCount"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var R=function(e){var t=e.className,r=void 0===t?"":t,n=e.newPostUrl,c=void 0===n?"":n,u=e.newPostUseDataRemote,d=void 0!==u&&u,f=e.onHomeClick,m=e.onNotificationsClick,b=e.onSearchClick,h=e.shouldNewPostOpenModal,v=void 0!==h&&h,_=e.shouldShowMessagingRoutes,x=void 0!==_&&_,j=e.style,w=void 0===j?{}:j,O=e.unreadChatCount,S=void 0===O?0:O,P=e.unreadNotificationCount,k=void 0===P?0:P,C=M(e,E);return(0,p.jsx)("div",T(T({id:s.B7,className:i()("bg-primary fixed bottom-0 z-10 w-full",r),style:T({boxShadow:"0px 0px 10px 0px rgb(0 0 0 / 11%)"},w)},C),{},{children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("button",{type:"submit",onClick:function(e){return(0,a.isFunction)(f)&&f(e)},className:"text-dark flex w-full cursor-pointer justify-center p-5",children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.home"),type:"home",size:24,useWithStrokeCurrentColor:!0})}),(0,p.jsx)(y,{onClick:function(e){return(0,a.isFunction)(b)&&b(e)},children:(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.search"),type:"search",size:24,useWithFillCurrentColor:!0})}),(0,p.jsx)(A,{newPostUseDataRemote:d,newPostUrl:c,shouldNewPostOpenModal:v}),(0,p.jsx)(y,{onClick:function(e){return(0,a.isFunction)(m)&&m(e)},children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.notifications"),type:"bell",size:24,useWithFillCurrentColor:!0}),k>0&&(0,p.jsx)(g,{children:k})]})}),x&&(0,p.jsx)(y,{to:"/messages",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.messages"),type:"dm",size:24,useWithFillCurrentColor:!0}),S>0&&(0,p.jsx)(g,{children:S})]})})]})}))}},28159:(e,t,r)=>{"use strict";r.d(t,{H:()=>v});var n=r(35007),i=r(87108),o=r(67294),a=r(24185),s=r(90789),l=r(50732),c=r(6766),u=r(87439),d=r(98338),p=r(57526),f=r(78208);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=r(85893),v=function(){var e=function(){var e,t,r=null===(e=(0,a.$B)("/home"))||void 0===e?void 0:e.isExact,n=null===(t=(0,a.$B)("/feed"))||void 0===t?void 0:t.isExact,i=((0,a.$B)("/c/:spaceSlug")||{}).params,b=(i=void 0===i?{}:i).spaceSlug,h=(0,d.nT)().helpers.findBy({slug:b})||{},v=(0,s.V5)(h),y=m((0,o.useState)(),2),g=y[0],_=y[1],x=m((0,o.useState)(),2),j=x[0],w=x[1],O=(0,d.wh)().currentCommunitySettings,S=(0,u.I)().spotlightSearch,P=(0,f.gq)().shouldShowMessagingRoutes,k=(0,c.R)(),C=k.newNotificationCount,N=k.toggleNotificationDrawer,I=k.resetNewNotificationsCount,A=(0,p.K)().unreadChatCount,E=!v&&!(null===O||void 0===O||!O.reactified_new_post_on_mobile_enabled);return(0,o.useEffect)((function(){var e;r||n||!b?(e="/c/new_post_in_space",w(!0)):(e=v?(0,l.ed)({spaceSlug:h.slug}):l.xu.new({spaceSlug:h.slug}),w(!1)),_(e)}),[r,h.slug,v,n,b]),{newPostUrl:g,newPostUseDataRemote:j,shouldNewPostOpenModal:E,unreadChatCount:A,unreadNotificationCount:C,onNotificationsClick:function(){N(),I()},onSearchClick:function(){S.show()},shouldShowMessagingRoutes:P}}(),t=e.newPostUrl,r=e.newPostUseDataRemote,b=e.shouldNewPostOpenModal,v=e.unreadChatCount,y=e.unreadNotificationCount,g=e.onNotificationsClick,_=e.onSearchClick,x=e.shouldShowMessagingRoutes,j=(0,n.C)().goToCommunityRootPath;return(0,h.jsx)(i.u,{onSearchClick:_,onNotificationsClick:g,onHomeClick:j,unreadNotificationCount:y,unreadChatCount:v,newPostUseDataRemote:r,newPostUrl:t,shouldNewPostOpenModal:b,shouldShowMessagingRoutes:x})}},14954:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(67294),i=r(24185),o=r(86308),a=r(72268),s=r(54914),l=r(36325),c=r(97479),u=r(85893);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=e.renderLeftSidebar,r=(0,i.k6)(),p=(0,s._)().data,f=(p=void 0===p?{}:p).mobile_drawer_html,m=d((0,n.useState)(!1),2),b=m[0],h=m[1],v=(0,o.l)().config,y=t;!t&&null!==v&&void 0!==v&&v.renderLeftSidebar&&(y=v.renderLeftSidebar);var g=(0,n.useCallback)((function(e){null!==e&&h(!0)}),[h]),_=(0,n.useCallback)((function(){var e;(document.body.scrollLeft||document.documentElement.scrollLeft)>148&&(null===(e=window.mobileDrawer)||void 0===e||e.close())}),[]);return(0,l.w)((function(e){var t,r,n,i=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.innerWidth;i&&(i>1024&&(null===(r=window)||void 0===r||null===(n=r.mobileDrawer)||void 0===n||n.close()))})),(0,n.useEffect)((function(){return b&&document.body.addEventListener("scroll",_),function(){document.body.removeEventListener("scroll",_)}}),[_,b]),(0,n.useEffect)((function(){return r.listen((function(){var e;null===(e=window.mobileDrawer)||void 0===e||e.close()}))}),[r]),f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{ref:g,dangerouslySetInnerHTML:{__html:f}}),b&&(0,u.jsx)(c.h,{selectorQuery:"#react-mobile-community-sidebar",children:y?y():(0,u.jsx)(a.K,{})})]}):null}},3004:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var n=r(96486),i=r(64593),o=r(42658),a=r(98338),s=r(85893),l=function(e){var t=e.title,r=e.bodyClassNames,l=void 0===r?"":r,c=e.children,u=(0,a.wh)().currentCommunity,d=(0,n.compact)([t,null===u||void 0===u?void 0:u.name]).join(" | ");return(0,o.H)(l),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.q,{children:(0,s.jsx)("title",{children:d})}),c]})}},20226:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var n=r(94184),i=r.n(n),o=r(98338),a=r(36589),s=r(85893),l=function(e){var t=e.hasPaddingTopMobile,r=void 0===t||t,n=e.isMinimalLayout,l=e.children,c=e.className,u=e.wrapperClassName,d=(0,o.wh)().currentCommunitySettings,p=null===d||void 0===d?void 0:d.tailwind_posts_enabled,f=(0,a.I)().isV3Enabled;return(0,s.jsx)("div",{className:i()("main h-full",{"bg-secondary":!n},c),children:(0,s.jsx)("div",{className:i()("main__wrapper h-full sm:mx-6 md:pt-6",{"pt-0":!r,"px-4 sm:px-0":n,"post-v2":!p,"lg:mx-6":!f,"lg:mx-9":f},u),children:l})})}},59146:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),s=function(e){var t=e.className,r=e.children,n=e.hidden;return void 0!==n&&n?null:(0,a.jsx)("aside",{"aria-label":(0,o.t)("right_sidebar"),className:i()("sidebar sidebar--right",t),"data-testid":"sidebar-right",children:(0,a.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:r})})}},16823:(e,t,r)=>{"use strict";r.d(t,{F:()=>P});var n=r(94184),i=r.n(n),o=r(24185),a=r(9965),s=r(29172),l=r(28159),c=r(20226),u=r(40160),d=r(85893),p=r(67294),f=r(21653),m=function(e){var t=e.children,r=(0,f.S)();return(0,d.jsx)("div",{className:"sidebar sidebar--left",children:(0,d.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:(0,p.cloneElement)(t,{onClickRemoveOnboarding:r.show})})})},b=r(59146),h=r(72268),v=r(90789),y=r(42658),g=r(54030),_=r(98338),x=r(54914),j=r(14954);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){var t,r,n,c=e.disableSidebar,u=void 0!==c&&c,p=e.disableRightSidebar,f=void 0!==p&&p,b=e.children,w=e.bodyClassNames,S=void 0===w?"":w,P=e.renderLeftSidebar,k=void 0===P?null:P,C=e.hideAppBar,N=void 0!==C&&C,I=(0,_.wh)().currentCommunityMember,A={},E=(0,x._)().data,D=(E=void 0===E?{}:E).mobile_drawer_html;!u&&D&&(A["data-controller"]="mobile-sidebar"),(0,y.H)(i()("is-standard-layout react-standard-layout",S));var T=(0,g.a7)(),L=((0,o.$B)("/c/:spaceSlug")||{}).params,M=(L=void 0===L?{}:L).spaceSlug,R=((0,o.$B)("/c/:spaceSlug/:postSlug")||{}).params,B=(R=void 0===R?{}:R).postSlug,U=null===(t=(0,o.$B)("/home"))||void 0===t?void 0:t.isExact,F=null===(r=(0,o.$B)("/feed"))||void 0===r?void 0:r.isExact,z=null===(n=(0,o.$B)("/c/:spaceSlug"))||void 0===n?void 0:n.isExact,V=function(e){var t=e.postSlug,r=e.space;return!!e.disableRightSidebar||(!t||"members"===t||!(0,v.V5)(r))&&r.hide_right_sidebar}({disableRightSidebar:f,postSlug:B,space:(0,_.nT)().helpers.findBy({slug:M})||{}}),q=Boolean(!!I&&!T&&!!(U||F||z));return(0,d.jsxs)("div",O(O({className:"community__wrapper bg-secondary"},A),{},{children:[(0,d.jsx)("div",{id:"mobile-dropdown-container"}),!u&&(0,d.jsx)(j.A,{renderLeftSidebar:k}),(0,d.jsxs)("div",{id:"panel",className:i()("community__content trix-v2",{"community__content--no-sidebar":u}),"data-target":"mobile-sidebar.panel",children:[!u&&!N&&(0,d.jsx)(a.x,{}),(0,d.jsxs)("div",{className:i()("standard-layout",{"has-sidebar":!u,"no-right-sidebar":V}),children:[!u&&(0,d.jsx)(m,{children:k?k():(0,d.jsx)(h.K,{})}),b,(0,d.jsx)(s.X,{}),q&&(0,d.jsx)(l.H,{})]})]})]}))};P.Header=function(e){var t=e.sticky,r=e.children;return(0,d.jsx)("div",{className:i()("main__header",{"main__header--sticky":t}),children:r})},P.Breadcrumb=function(e){var t=e.hidden,r=void 0!==t&&t,n=e.backLink,i=void 0===n?"":n,o=e.backLinkText,a=void 0===o?I18n.t("back"):o;return r||!i?null:(0,d.jsx)("div",{className:"header__name",children:Boolean(i)&&(0,d.jsx)("div",{className:"header__breadcrumb",children:(0,d.jsx)(u.rU,{to:i,children:a})})})},P.Content=function(e){var t=e.children,r=e.className;return(0,d.jsx)("div",{className:i()("main__content mx-auto h-full max-w-5xl",r),children:t})},P.Body=c.u,P.Left=m,P.Right=b.O},73257:(e,t,r)=>{"use strict";r.d(t,{a:()=>f});var n=r(94184),i=r.n(n),o=r(86013),a=r(24185),s=r(64269),l=r(84432),c=r(18605),u=r(98338),d=r(81786),p=r(85893),f=function(e){var t=e.hidden,r=void 0!==t&&t,n=e.backLink,f=void 0===n?"":n,m=e.backLinkText,b=void 0===m?(0,o.t)("back"):m,h=e.customRightContent,v=(0,u.wh)().isViewOnlyMasquerading,y=(0,a.k6)();return r||!f?null:(0,p.jsx)(s.Z,{leftContent:(0,p.jsx)(l.y,{children:(0,p.jsxs)(d.z,{type:"button",variant:"text",extraLarge:!0,onClick:function(){y.push(f)},className:i()("flex items-center gap-2",{"!pointer-events-auto":v}),children:[(0,p.jsx)(c.JO,{type:"20-arrow-left",size:20}),b]})}),rightContent:h||null})}},49502:(e,t,r)=>{"use strict";r.d(t,{y:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["disableSidebar","children","className"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.disableSidebar,r=void 0!==t&&t,n=e.children,s=e.className,c=u(e,a);return(0,o.jsx)("div",l(l({id:"panel","data-testid":"community-content",className:i()("community__content trix-v2 bg-secondary h-[calc(100vh-48px)] w-full flex-1 overflow-y-auto print:overflow-visible",{"community__content--no-sidebar":r},s),"data-target":"mobile-sidebar.panel"},c),{},{children:n}))}},81086:(e,t,r)=>{"use strict";r.d(t,{z:()=>p});var n=r(94184),i=r.n(n),o=r(36589),a=r(85893),s=["children","className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,l=d(e,s),u=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",c(c({className:i()("bg-secondary",n,{community__wrapper:!u}),"data-testid":"community-wrapper"},l),{},{children:t}))}},18317:(e,t,r)=>{"use strict";r.d(t,{V:()=>f});var n=r(94184),i=r.n(n),o=r(86013),a=r(90369),s=r(85893),l=["children","fullWidth","fullHeight","noPadding"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.children,r=e.fullWidth,n=e.fullHeight,c=void 0===n||n,d=e.noPadding,f=p(e,l);return(0,s.jsxs)("main",u(u({"aria-label":(0,o.t)("main_content")},f),{},{className:i()("standard-layout-v2__content bg-secondary",{"standard-layout-v2__content--full":r,"standard-layout-v2__content--no-padding":d,"h-full":c}),children:[(0,s.jsx)("div",{className:i()("bg-secondary",{"h-full":c}),children:t}),(0,s.jsx)(a.n,{id:"rail-bar-content"})]}))}},39458:(e,t,r)=>{"use strict";r.d(t,{v:()=>v});var n=r(94184),i=r.n(n),o=r(41793),a=r(10140),s=r(36589),l=r(62113),c=r(54030),u=r(29402),d=r(85893),p=["children","isBgSecondary","isBgPrimary","className"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v=function(e){var t=e.children,r=e.isBgSecondary,n=void 0!==r&&r,f=e.isBgPrimary,b=void 0!==f&&f,v=e.className,y=h(e,p),g=(0,o.k)().shouldShowTrialBanner,_=(0,c.j)(),x=(0,l.f)(),j=(0,s.I)().isV3Enabled,w=(0,a.a)(),O=(0,u.T)().isReactFlowWorkflowsRoute,S=j?function(e,t,r,n,o){return o?"":i()({"lg:!min-h-[calc(100vh-64px)]":!e&&t&&!n&&!r,"lg:!min-h-[calc(100vh-64px-48px)]":(e||t)&&(n||r),"lg:!min-h-[calc(100vh-112px)]":t&&r||t&&e,"lg:!min-h-[calc(100vh-160px)]":e&&t&&r,"lg:!min-h-[calc(100vh-64px-48px-48px)]":t&&r&&(n||e),"lg:!min-h-[calc(100vh-64px-48px-48px-48px)]":t&&r&&n&&e})}(g,_,x,w,O):function(e,t,r,n,o){return o?"":i()({"lg:!min-h-[calc(100vh-48px)]":(e||t)&&!n,"lg:!min-h-[calc(100vh-48px-48px)]":(e||t)&&n&&!r,"lg:!min-h-[calc(100vh-96px)]":t&&r&&!n||t&&e&&!n,"lg:!min-h-[calc(100vh-144px)]":e&&t&&r&&!n,"lg:!min-h-[calc(100vh-48px-48px-48px)]":t&&r&&(n||e),"lg:!min-h-[calc(100vh-48px-48px-48px-48px)]":t&&r&&n&&e})}(g,_,x,w,O);return(0,d.jsx)("div",m(m({className:i()("standard-layout-v2__content-wrapper",{"!bg-secondary":n,"bg-primary":b},S,v)},y),{},{children:t}))}},67905:(e,t,r)=>{"use strict";r.d(t,{y:()=>f});var n=r(94184),i=r.n(n),o=r(36589),a=r(78849),s=r(85893),l=["url","alt","thumbnail"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.url,r=e.alt,n=void 0===r?"":r,c=e.thumbnail,d=void 0!==c&&c,f=p(e,l),m=(0,o.I)().isV3Enabled;return(0,s.jsx)(a.l,{children:(0,s.jsx)("div",u(u({},f),{},{className:i()("bg-primary block h-auto lg:relative",{"md:h-[30vh]":!d&&!m,"aspect-16/5 h-full max-h-[20.625rem] md:mx-auto md:max-w-5xl md:overflow-hidden md:rounded-2xl":!d&&m}),"data-testid":"cover-image-container",children:(0,s.jsx)("img",{loading:"lazy",src:t,alt:n,className:i()("h-full w-full",{"object-contain":d,"object-cover":!d}),"data-testid":"cover-image"})}))})}},78849:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var n=r(94184),i=r.n(n),o=r(36589),a=r(85893),s=function(e){var t=e.children,r=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",{className:i()({"md:px-6 md:pb-3 md:pt-5 lg:px-9":r}),children:t})}},90369:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(85893),i=function(e){var t=e.id,r=void 0===t?"rail-bar-header":t;return(0,n.jsx)("div",{id:r})}},35684:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"md:hidden",children:t})}},29750:(e,t,r)=>{"use strict";r.d(t,{H:()=>p});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),s=["children","className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=e.className,n=d(e,s);return(0,a.jsx)("aside",c(c({"aria-label":(0,o.t)("left_sidebar"),className:i()("standard-layout-v2__sidebar",r),"data-testid":"standard-layout-v2-sidebar"},n),{},{children:(0,a.jsx)("nav",{children:t})}))}},64269:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});r(67294);var n=r(90697),i=r(97479),o=r(85893),a=["children"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d="standard-layout-header-child",p=function(e){var t=e.children,r=u(e,a);return(0,o.jsxs)(i.h,{selectorQuery:"#standard-layout-header",children:[(0,o.jsx)(n.b,l(l({},r),{},{id:d})),t]})}},90697:(e,t,r)=>{"use strict";r.d(t,{b:()=>f});var n=r(94184),i=r.n(n),o=r(98338),a=r(36589),s=r(85893),l=["leftContent","rightContent","filters","headline","hasBorder","className"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.leftContent,r=e.rightContent,n=e.filters,c=e.headline,d=e.hasBorder,f=void 0===d||d,m=e.className,b=p(e,l),h=Boolean(n),v=Boolean(c),y=(0,o.wh)().isViewOnlyMasquerading,g=(0,a.I)().isV3Enabled;return(0,s.jsxs)("div",u(u({},b),{},{className:i()("bg-primary w-full lg:sticky lg:top-0 lg:z-10",m),children:[(0,s.jsxs)("div",{className:i()("flex items-center gap-4 px-6",{"border-primary border-b":f,"!cursor-not-allowed":y,"h-16 lg:px-6":!g,"h-18 lg:px-9":g}),"data-testid":"space-header",children:[(0,s.jsx)("div",{className:i()("flex-1 truncate",{"!pointer-events-none":y}),"data-testid":"space-settings",children:t}),(0,s.jsx)("div",{className:i()("relative flex",{"!pointer-events-none":y}),children:r})]}),h&&n,v&&c]}))}},48976:(e,t,r)=>{"use strict";r.d(t,{n:()=>f});var n=r(94184),i=r.n(n),o=r(86013),a=r(51745),s=r(85893),l=["children","className"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.children,r=e.className,n=p(e,l),c=(0,a.p)();return(0,s.jsx)("header",u(u({id:"standard-layout-header","aria-label":(0,o.t)("page_header"),className:i()("z-20 sm:relative sm:top-0 lg:sticky",c?"top-16":"top-0",r)},n),{},{children:t}))}},88949:(e,t,r)=>{"use strict";r.d(t,{m:()=>m});var n=r(94184),i=r.n(n),o=r(24185),a=r(98838),s=r(36589),l=r(85893),c=["disableSidebar","disableLayoutRightSidebar","hasSettingsSidebar","children"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=function(e){var t=e.disableSidebar,r=void 0!==t&&t,n=e.disableLayoutRightSidebar,u=void 0!==n&&n,p=e.hasSettingsSidebar,m=void 0!==p&&p,b=e.children,h=f(e,c),v=(0,s.I)().isV3Enabled,y=(0,o.TH)().pathname.includes(a.L.community_inbox.index);return(0,l.jsx)("div",d(d({className:i()("standard-layout-v2 bg-secondary",{"standard-layout-v2--has-sidebar":!r,"standard-layout-v2--has-sidebar-v3":!r&&v,"standard-layout-v2--has-settings-sidebar":m&&!y,"standard-layout-v2--has-community-inbox-sidebar":y&&m,"standard-layout-v2--no-right-sidebar":u}),"data-testid":"standard-layout-v2-wrapper"},h),{},{children:b}))}},63411:(e,t,r)=>{"use strict";r.d(t,{a:()=>be});var n=r(94184),i=r.n(n),o=r(24185),a=r(29172),s=r(28159),l=r(85893),c=r(73257),u=r(18317),d=r(67905),p=r(86013),f=r(72268),m=r(90789),b=r(98661),h=r(42658),v=r(70254),y=r(67294),g=r(61484),_=r(98338),x="circle-app-banner",j=/Android|webOS|Nokia|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,w=/Android/i,O=r(62447);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(){var e=(0,O._)(x).getValue,t=C((0,y.useState)({isMobile:!1,isMobileOsAndroid:!1}),2),r=t[0],n=t[1],i=C((0,y.useState)(!1),2),a=i[0],s=i[1],l=C((0,y.useState)(!1),2),c=l[0],u=l[1],d="/getting-started"===(0,o.TH)().pathname,p=r.isMobile&&r.isMobileOsAndroid,f=a&&c&&p&&!d;return(0,y.useEffect)((function(){var t,r=navigator.userAgent;t=document.querySelector('meta[name="google-play-app"]'),s(!!t),function(e){var t=j.test(e);n((function(e){return P(P({},e),{},{isMobile:t})}))}(r),function(e){var t=w.test(e);n((function(e){return P(P({},e),{},{isMobileOsAndroid:t})}))}(r),function(){var t=e();if(t){var r=new Date(t.dismissedAt),n=new Date,i=Math.abs(n-r);Math.ceil(i/864e5)>15&&u(!0)}else u(!0)}()}),[]),{shouldRenderAppBanner:f}},A=r(55531),E=r(81786),D=r(8246);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=(0,p.t)("circle"),R=function(){var e=T((0,y.useState)(!1),2),t=e[0],r=e[1],n=(0,_.wh)().currentCommunity,i=void 0===n?{}:n,o=i.name,a=i.has_branded_app,s=i.android_store_id,c=i.icon_url,u=a&&c,d=I().shouldRenderAppBanner,f=(0,O._)(x).setValue,m=function(){r(!1),f({dismissedAt:new Date})};if((0,y.useEffect)((function(){r(!0)}),[]),!d)return null;var b=u?c:g,h=u?(0,p.t)("app_banner.logo_alt",{community_name:o}):(0,p.t)("app_banner.logo_alt",{community_name:M}),v=a?(0,p.t)("app_banner.title",{community_name:o}):(0,p.t)("app_banner.title",{community_name:M}),j=a?(0,p.t)("app_banner.description",{community_name:o}):(0,p.t)("app_banner.description",{community_name:M});return(0,l.jsx)(A.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!1,isOpen:t,contentPortalId:"app-banner-portal",size:"auto",position:"bottom",onClose:m,className:"!h-auto",children:(0,l.jsx)(A.x.Body,{className:"px-8 py-10",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("div",{className:"border-primary mb-6 flex h-20 w-20 items-center rounded-xl border",children:(0,l.jsx)("img",{loading:"lazy",src:b,alt:h,className:"mx-auto h-14 w-14 rounded-xl object-cover"})}),(0,l.jsxs)("div",{className:"mb-8 flex flex-col space-y-2 text-center",children:[(0,l.jsx)(D.Z.TitleSm,{weight:"semibold",color:"text-dark",children:v}),(0,l.jsx)(D.Z.LabelSm,{color:"text-default",children:j})]}),(0,l.jsx)(E.z,{full:!0,extraLarge:!0,className:"mb-4",onClick:function(){a&&s?window.open("https://play.google.com/store/apps/details?id="+s,"_blank"):window.open("https://circle.so/android","_blank")},children:(0,p.t)("app_banner.download_app_cta")}),(0,l.jsx)(E.z,{variant:"plain",onClick:m,children:(0,p.t)("app_banner.continue_in_browser_cta")})]})})})},B=r(10140),U=r(29402),F=r(54914),z=r(68997),V=r(24019),q=r(36589),Z=r(62113),G=r(9965),W=r(14954),H=r(49502),Q=r(81086),J=r(39458),K=r(90369),$=r(35684),X=r(29750),Y=r(88949),ee=r(41793),te=r(50732),re=function(){var e=(0,ee.k)(),t=e.isCommunityOnTrial,r=e.trialDaysRemainingInWords,n=e.trialEndDateFormatted;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{children:[(0,p.t)("trial_banner.trial_ends_in",{trialDaysRemainingInWords:r,trialEndDateFormatted:n}),(0,l.jsx)("a",{className:"hover:!text-badge text-badge ml-1 cursor-pointer underline",href:(0,te.xn)(),children:(0,p.t)("trial_banner.upgrade_plan")})," ",(0,p.t)("trial_banner.before_trial_expires")]})})},ne=r(33777),ie=r(18605);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se="blackFridayBannerDismissed",le=function(){var e=oe((0,y.useState)(!1),2),t=e[0],r=e[1];(0,y.useEffect)((function(){var e="true"===localStorage.getItem(se);r(!e)}),[]);var n=(0,l.jsx)(ie.JO,{type:"20-close-circle",size:20});return t?(0,l.jsx)(ne.E,{exitText:n,onExit:function(){r(!1),localStorage.setItem(se,"true")},children:(0,l.jsxs)("div",{children:[(0,p.t)("black_friday_cyber_monday_banner.title")," ",(0,l.jsx)("a",{className:"hover:!text-badge text-badge cursor-pointer underline",href:(0,te.xn)(),children:(0,p.t)("black_friday_cyber_monday_banner.savings_amount")})," ",(0,p.t)("black_friday_cyber_monday_banner.description")]})}):null},ce=function(){var e=(0,_.wh)().displayCommunitySwitcher,t=(0,ee.k)(),r=t.shouldShowTrialBanner,n=t.isSubscriptionCancelled,o=t.isCommunityOnTrial;return r?o?(0,l.jsxs)(ne.E,{className:i()({"left-[60px]":e}),children:[(0,l.jsx)(re,{}),n&&(0,l.jsxs)("div",{children:[(0,p.t)("trial_banner.renew_subscription")," ",(0,l.jsx)("a",{href:(0,te.xn)(),children:(0,p.t)("trial_banner.renew_subscription")}),(0,p.t)("trial_banner.to_access_community")]})]}):(0,l.jsx)(le,{}):null},ue=r(25954),de=function(e,t,r){var n,i=(0,U.T)().isReactFlowWorkflowsRoute,o={topBarStyles:(n=(0,q.I)().isV3Enabled)?"lg:h-[calc(100vh-64px)]":"lg:h-[calc(100vh-48px)]",topBarStylesWithMasquerade:n?"lg:h-[calc(100vh-48px-64px)]":"lg:h-[calc(100vh-48px-48px)]",topBarStylesWithEitherOptInOrPreviewBar:n?"lg:h-[calc(100vh-64px-48px)]":"lg:h-[calc(100vh-96px)]",topBarStylesWithMasqueradeAndEitherOptInOrPreviewBar:n?"lg:h-[calc(100vh-48px-48px-64px)]":"lg:h-[calc(100vh-48px-48px-48px)]"};return i?"":!e&&!t&&!r||e&&t&&!r?o.topBarStyles:e||!t||r?!e&&!t&&r||e&&t&&r?o.topBarStylesWithEitherOptInOrPreviewBar:!e&&t&&r?o.topBarStylesWithMasqueradeAndEitherOptInOrPreviewBar:"":o.topBarStylesWithMasquerade};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=Object.assign((function(e){var t,r,n,c,u=e.bodyClassNames,d=void 0===u?"":u,p=e.children,y=e.disableRightSidebar,g=void 0!==y&&y,x=e.disableScroll,j=void 0!==x&&x,w=e.disableSidebar,O=void 0!==w&&w,S=e.hideAppBar,P=void 0!==S&&S,k=e.id,C=e.renderLeftSidebar,N=(0,_.wh)(),I=N.currentCommunityMember,A=N.currentCommunity,E=(0,b.P)().posts,D={id:k},T=(0,F._)(),L=null===T||void 0===T||null===(t=T.data)||void 0===t?void 0:t.mobile_drawer_html,M=(0,Z.f)(),ee=(0,q.I)().isV3Enabled,te=(0,U.T)(),re=te.isSettingsRoute,ne=te.isReactFlowWorkflowsRoute,ie=function(){var e=(0,_.wh)().currentCommunityMember,t=(0,ue.H)(),r=t.isHomePage,n=t.isSpaceShowPage,i=t.isMemberDirectoryPage,o=t.isMessagesPage;return!!e&&(r||n||i||o)}();!O&&L&&(D["data-controller"]="mobile-sidebar"),(0,h.H)(i()("is-standard-layout-v2 react-standard-layout bg-secondary",d,{"is-standard-layout-v2--v3-enabled":ee}));var oe=(0,v.t)(),ae=(0,o.$B)("/c/:spaceSlug/:postSlug"),se=null===ae||void 0===ae||null===(r=ae.params)||void 0===r?void 0:r.postSlug,le=null===(n=(0,o.$B)("/home"))||void 0===n?void 0:n.isExact,pe=null===(c=(0,o.$B)("/feed"))||void 0===c?void 0:c.isExact,me=(0,_.L2)().data,be=(0,z.Z1)(A)&&!(0,V.UU)(oe),he=(0,z.Aq)(A),ve=me||{},ye=(0,_.wh)().currentCommunitySettings,ge=null===ye||void 0===ye?void 0:ye.tailwind_posts_enabled,_e=(0,B.a)(),xe=function(e){var t,r,n,i=e.postSlug,o=e.space,a=e.disableRightSidebar,s=e.currentCommunityMember,l=e.pinnedPosts;if(e.isHomePage)return!1;if(a)return!0;if(!((null===o||void 0===o||null===(t=o.visible_tabs)||void 0===t?void 0:t.members)||(null===o||void 0===o||null===(r=o.visible_tabs)||void 0===r?void 0:r.past)||(null===o||void 0===o||null===(n=o.visible_tabs)||void 0===n?void 0:n.upcoming)||(null===l||void 0===l?void 0:l.length)>0))return!0;var c=o.is_private&&!o.is_space_member&&!(null!==s&&void 0!==s&&s.is_admin);return(!i||"members"===i||!(0,m.V5)(o))&&(!!c||o.hide_right_sidebar)}({disableRightSidebar:g,postSlug:se,space:ve,pinnedPosts:E,isHomePage:le||pe,currentCommunityMember:I}),je=(0,m.Ug)(ve)||(0,m.Hn)(ve)||he,we=de(he&&be,M,_e);return(0,l.jsxs)(Q.z,fe(fe({},D),{},{children:[(0,l.jsx)("div",{"data-testid":"mobile-drawer-wrapper",children:!O&&(0,l.jsx)(W.A,{})}),(0,l.jsxs)("div",{className:i()("bg-secondary flex w-full flex-col",we,{"h-screen":!j,"h-full":j,"post-v2":!ge}),"data-testid":"standard-layout-v2",children:[(0,l.jsx)(ce,{}),(0,l.jsx)(R,{}),(0,l.jsxs)(H.y,{disableSidebar:O,children:[!P&&(0,l.jsx)(G.x,{}),(0,l.jsxs)(Y.m,{disableSidebar:O,disableLayoutRightSidebar:xe,hasSettingsSidebar:!ne&&re&&!be&&!he,children:[(!O||!ee)&&!ne&&(0,l.jsx)(X.H,{children:C?C():(0,l.jsx)(f.K,{})}),(0,l.jsx)(J.v,{isBgSecondary:!je,isBgPrimary:je,children:p}),(0,l.jsx)("div",{className:"standard-layout-v2__railbar",children:(0,l.jsx)(K.n,{})}),(0,l.jsx)(a.X,{}),(0,l.jsx)("div",{id:"mobile-dropdown-container"}),ie&&(0,l.jsx)($.Y,{children:(0,l.jsx)(s.H,{})})]})]})]})]}))}),{Header:function(e){var t=e.sticky,r=e.children;return(0,l.jsx)("div",{className:i()("main__header",{"main__header--sticky":t}),children:r})},Breadcrumb:c.a,Content:u.V,Body:function(e){var t=e.className,r=e.children;return(0,l.jsx)("div",{className:"main",children:(0,l.jsx)("div",{className:i()("main__wrapper",t),children:r})})},Right:function(e){var t=e.children,r=e.hidden;return void 0!==r&&r?null:(0,l.jsx)("aside",{"aria-label":(0,p.t)("right_sidebar"),className:"sidebar sidebar--right","data-testid":"sidebar-right",children:(0,l.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:t})})},CoverImage:d.y})},23072:(e,t,r)=>{"use strict";r.d(t,{W:()=>f});var n=r(48976),i=r(98338),o=r(63411),a=r(74666),s=r(85893);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var p=function(e){var t=d({},e);return(0,s.jsx)("div",c(c({},t),{},{id:a.vH,"data-testid":"cover-image-container"}))},f=function(e){var t=e.children,r=e.fullHeight,a=void 0===r||r,l=e.fullWidth,c=void 0!==l&&l,u=e.noPadding,d=void 0!==u&&u;return(0,i.wh)().isLoading?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.n,{}),(0,s.jsx)(p,{}),(0,s.jsx)(o.a.Content,{fullWidth:c,fullHeight:a,noPadding:d,children:t})]})}},51745:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(18701),i=r(54030),o=function(){var e=(0,i.j)(),t=(0,n.I)();return!e&&!t}},68698:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(94184),i=r.n(n),o=r(64422),a=r(85893),s=function(e){var t=e.name,r=e.src,n=e.size,s=void 0===n?"sm":n,l=e.variant,c=void 0===l?"rounded-square":l,u="10";return"lg"===s&&(u="16"),"md"===s&&(u="7"),(0,a.jsx)("div",{className:i()("participant-avatar relative",{"participant-avatar--lg":"lg"===s,"participant-avatar--md":"md"===s,"participant-avatar--sm":"sm"===s,"participant-avatar--circle":"circle"===c,"participant-avatar--full":"full"===c,"participant-avatar--rounded-square":"rounded-square"===c}),children:(0,a.jsx)(o.s,{name:t,src:r,size:u})})}},62953:(e,t,r)=>{"use strict";r.d(t,{B:()=>d,h:()=>p});var n=r(67294),i=r(58471),o=r(95591),a=r(52494),s=r(85239),l=r(85893),c=function(e){var t=e.participant,r=(0,i.aV)(t),n=r.microphonePublication,o=r.isLocal;return null===n||void 0===n||!n.track||null===n||void 0===n||!n.isSubscribed||null!==n&&void 0!==n&&n.isMuted||null===n||void 0===n||!n.isEnabled?null:(0,l.jsx)(i.t9,{track:n.track,isLocal:o})},u=(0,n.createContext)({});u.displayName="LivekitContext";var d=function(e){var t=e.children,r=(0,a.cy)(),d=r.videoInputId,p=r.audioInputId,f={adaptiveStream:!0,dynacast:!0,publishDefaults:{audioBitrate:o.gW.music,videoCodec:"vp8"},videoCaptureDefaults:{resolution:o.OM.h1080.resolution,deviceId:d},audioCaptureDefaults:{deviceId:p},screenShareEncoding:o.Ri.h1080fps30.encoding},m=(0,i.NW)(f),b=m.connect,h=m.participants,v=m.isConnecting,y=m.connectionState,g=m.room,_=m.audioTracks,x=m.metadata,j=m.error;!function(e){null===e||void 0===e||e.forEach((function(e){var t=s.VM.HLS_SPECTATOR,r=null;try{var n=JSON.parse(e.metadata);null!==n&&void 0!==n&&n.role&&(t=n.role),r=null===n||void 0===n?void 0:n.user_id}catch(i){console.error("Could not parse participant metadata: ",i.message)}e.roleName=t,e.customerUserId=r,e.id=e.sid}))}(h);var w=null===g||void 0===g?void 0:g.localParticipant,O=(0,n.useMemo)((function(){if(null===w||void 0===w||!w.metadata)return{};try{return JSON.parse(w.metadata)}catch(e){return console.error("Could not parse participant metadata: ",e.message),{}}}),[null===w||void 0===w?void 0:w.metadata]),S=null===h||void 0===h?void 0:h.find((function(e){return e.isScreenShareEnabled})),P={roomOptions:f,connect:b,participants:h,screenSharingParticipant:S,isSomeoneScreenSharing:!!S,localParticipant:w,localMetadata:O,isConnecting:v,isReconnecting:y===o.em.Reconnecting,isConnected:y===o.em.Connected,isDisconnected:y===o.em.Disconnected,room:g,audioTracks:_,metadata:x,error:j};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Provider,{value:P,children:t}),null===h||void 0===h?void 0:h.map((function(e){return(0,l.jsx)(c,{participant:e},"participant-audio-".concat(e.id))}))]})},p=function(){return(0,n.useContext)(u)}},68534:(e,t,r)=>{"use strict";r.d(t,{Zp:()=>p,qr:()=>Q,Tq:()=>f,Ux:()=>ie,hB:()=>x,YR:()=>X,Lg:()=>$,yE:()=>K,wc:()=>P,pB:()=>O,RS:()=>w,CV:()=>se,kk:()=>k,y2:()=>J,DI:()=>te,RN:()=>M,nc:()=>R,$f:()=>z,Ak:()=>H,GK:()=>ce,HV:()=>G,tv:()=>ne,Vb:()=>Z});var n=r(85783),i=r(84895),o=Object.freeze({WEBSOCKET_DISCONNECTED:1003,ICE_CONNECTION_FAILED:4005,AUDIO_BLOCKED:3008}),a=function(){var e,t=(0,n.C1)();return(null===t||void 0===t?void 0:t.type)===i.a5.ERROR?null===(e=t.data)||void 0===e?void 0:e.code:null},s=r(67294),l=r(86013),c=r(69647),u=function(e){return"".concat("live_streams.room.hms_errors.").concat(e)},d=function(){var e=(0,c.p)().error,t=a(),r=(0,n._U)(i.Yt);(0,s.useEffect)((function(){t&&function(t){var r={1e3:(0,l.t)(u("1000_websocket_blocked")),1003:(0,l.t)(u("1003_websocket_disconnected")),2003:(0,l.t)(u("2003_endpoint_not_reachable")),3001:(0,l.t)(u("3001_cannot_access_device")),3002:(0,l.t)(u("3002_capture_device_not_available")),3003:(0,l.t)(u("3003_capture_device_is_in_use")),4005:(0,l.t)(u("4005_ice_connection_failed"))}[t];r&&e(r)}(t)}),[t]),(0,s.useEffect)((function(){r.error&&e((0,l.t)("live_streams.room.hls_error"))}),[r.error])},p=function(){var e,t,r=(0,n._U)(i.Yt),o=(0,n._U)(i.Go);return{hlsUrl:null===(e=r.variants[0])||void 0===e?void 0:e.url,isHlsRunning:!(null===r||void 0===r||!r.running),isRecording:!(null===o||void 0===o||null===(t=o.hls)||void 0===t||!t.running)}},f=function(){var e,t=(0,n._U)(i.UP);return{localPeerDownlinkQuality:null===(e=(0,n._U)((0,i.hE)(null===t||void 0===t?void 0:t.id)))||void 0===e?void 0:e.downlinkQuality}},m=r(13339),b=Object.freeze({UPDATE_ROOM:"update-room"}),h=Object.freeze({STOP_SCREENSHARE:"stop-screenshare"}),v="system";function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t,r,o,a=e.onRoomUpdate,l=e.onEndStream,c=(0,m.Ft)(),u=c.setMicrophoneEnabled,d=c.setCameraEnabled,p=(0,n.C1)(),f=(t=(0,n._U)(i.I3),r=(0,n._U)((0,i.cH)(t)),o=(0,n.cw)(),{metadata:r,setMetadata:function(e){o.changeMetadata(g(g({},r),e))}}).setMetadata,h=(0,s.useCallback)((function(e){var t=e.track,r=e.enabled;"audio"===(null===t||void 0===t?void 0:t.type)?u(r):"video"===(null===t||void 0===t?void 0:t.type)&&d(r)}),[d,u]);(0,s.useEffect)((function(){if(p){var e=p.type,t=p.data,r=t||{},n=r.type,o=r.message,s=r.reason;switch(e){case i.a5.NEW_MESSAGE:if(n===v&&o===b.UPDATE_ROOM)null===a||void 0===a||a();else if("metadata"===n){var c=JSON.parse(o);c&&"object"===typeof c&&f(c)}return;case i.a5.ROOM_ENDED:return void(null===l||void 0===l||l(s));case i.a5.CHANGE_MULTI_TRACK_STATE_REQUEST:case i.a5.CHANGE_TRACK_STATE_REQUEST:h(t);break;default:return}}}),[p,h])},j=r(85239),w=function(){var e=(0,n._U)(i.BK),t=(0,s.useMemo)((function(){return e.filter((function(e){return e.roleName===j.VM.HOST}))}),[e]),r=(0,n._U)(i.g),o=(0,s.useMemo)((function(){return e.filter((function(e){return[j.VM.SPECTATOR,j.VM.HLS_SPECTATOR].includes(e.roleName)}))}),[e]),a=(0,s.useMemo)((function(){return e.filter((function(e){return e.roleName===j.VM.MODERATOR}))}),[e]);return{peers:e,peersWithHandRaised:r,hosts:t,spectators:o,moderators:a}},O=function(){var e=w(),t=e.peers,r=e.hosts,o=e.spectators,a=(0,n._U)(i.vX),l=(0,s.useRef)(null);!function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null===t||void 0===t?void 0:t.find((function(e){return e.id===n.id})))||(null===t||void 0===t?void 0:t[0])||null}else r.current=(null===t||void 0===t?void 0:t[0])||null}(a,r,l);var c=(0,n._U)(i.Dl),u=(0,s.useCallback)((function(e){return!!c&&Object.values(c).some((function(t){return t.peerID===e}))}),[c]);return{peers:t,hosts:r,spectators:o,dominantSpeaker:a,selectedSpeaker:l.current,isSpeaking:u}},S=r(87116),P=function(e){var t=null===e||void 0===e?void 0:e.videoTrack,r=(0,S.R)({trackId:t}).videoRef,o=(0,n._U)((0,i.GP)(t));return{videoRef:r,hasVideo:Boolean(null===o||void 0===o?void 0:o.enabled)}},k=function(){return{recoderToken:null}},C=r(64687),N=r.n(C),I=r(22712);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){T(o,n,i,a,s,"next",e)}function s(e){T(o,n,i,a,s,"throw",e)}a(void 0)}))}}var M=function(e,t,r){var o=t.onJoinError,a=t.participantData,u=(0,I.g)(a),p=(0,c.p)().error,f=(0,n.cw)(),m=(0,n._U)(i.UP),b=(0,n._U)(i.ln),h=(0,n._U)(i.K0),v=!!e&&!b,y=(null===m||void 0===m?void 0:m.roleName)===j.VM.HOST,g=(null===m||void 0===m?void 0:m.roleName)===j.VM.HLS_SPECTATOR,_=(0,n._U)(i.ud),x=null===m||void 0===m?void 0:m.roleName,w=function(){var t=L(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!h){t.next=4;break}return t.next=4,f.leave();case 4:return t.next=6,f.join(E(E({},u),{},{authToken:e}));case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("joinRoom:",t.t0.message),p((0,l.t)("live_streams.room.join_error")),o&&o();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return d(),(0,s.useEffect)((function(){L(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||b||r){t.next=3;break}return t.next=3,w();case 3:case"end":return t.stop()}}),t)})))()}),[e,b,r]),{isConnected:b,isJoining:v,isHost:y,isHlsSpectator:g,isSomeoneScreenSharing:_,role:x}},R=function(){var e=(0,n._U)(i.pk),t=(0,n._U)((0,i.K6)(null===e||void 0===e?void 0:e.id));return{peer:e,videoRef:(0,S.R)({trackId:null===t||void 0===t?void 0:t.id}).videoRef,hasVideo:!(null===t||void 0===t||!t.enabled),shouldWarnInfinityMirror:"monitor"===(null===t||void 0===t?void 0:t.displaySurface)}},B=r(93914),U=r(19647);function F(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,c.p)().error,r=(0,n.cw)(),o=(0,n._U)(i.VP),a=(0,n._U)(i.ud),s=(0,B.j)({type:"moderator",onEvent:function(e){e===h.STOP_SCREENSHARE&&o&&r.setScreenShareEnabled(!1)}}).sendEvent,u=function(){var n,i=(n=N().mark((function n(){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o||!a||e){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,o||!a){n.next=6;break}return n.next=6,s(h.STOP_SCREENSHARE);case 6:return n.next=8,r.setScreenShareEnabled(!o,{audio:!0,systemAudio:"include"});case 8:n.next=15;break;case 10:n.prev=10,n.t0=n.catch(2),"SystemDeniedPermission"===n.t0.name?t((0,l.t)("live_streams.room.screen_sharing_os_error")):t((0,l.t)("live_streams.room.screen_sharing_browser_error")),console.error(n.t0),(0,U.d)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,10]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){F(o,r,i,a,s,"next",e)}function s(e){F(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(){return i.apply(this,arguments)}}();return{isScreenSharingEnabled:o,isSomeoneScreenSharing:a,toggleScreenSharing:u}};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(){var e=V((0,s.useState)(!1),2),t=e[0],r=e[1],o=(0,n.C1)();(0,s.useEffect)((function(){if(o)switch(o.type){case i.a5.RECONNECTING:r(!0);break;case i.a5.RECONNECTED:r(!1)}}),[o]);var a=f().localPeerDownlinkQuality;return!!a&&a>=0&&a<=1||t},G=function(){var e=(0,n.cw)();return function(){return e.sendBroadcastMessage(b.UPDATE_ROOM,v)}},W=r(96486),H=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize,r=void 0===t?8:t,o=(0,s.useRef)([]),a=w().peersWithHandRaised,l=(0,n._U)(i.Dl);return{orderedPeers:(0,s.useMemo)((function(){var t=(0,W.keyBy)(e,"id"),n=o.current.filter((function(e){return t[e]})),i=Object.values(l).map((function(e){return e.peerID}));a.map((function(e){return e.id})).slice(0,r/2).concat(i).forEach((function(e){n.includes(e)||n.unshift(e),n.length>r&&n.pop()})),o.current=n;var s=new Map(n.map((function(e,t){return[e,t+1]})));return(0,W.sortBy)(e,(function(e){return s.get(e.id)||1/0}))}),[l,a,e,r])}},Q=function(){var e=(0,n.cw)();return function(){return e.leave()}},J=function(){var e=(0,n.cw)(),t=(0,n._U)(i.lj),r=null===t||void 0===t?void 0:t.requestedBy;return{hasRoleChangeRequest:!!t,requestedByPeer:r,requestRoleChange:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.changeRoleOfPeer(t,r,n)},acceptRoleChange:function(){return e.acceptChangeRole(t)},rejectRoleChange:function(){return e.rejectChangeRole(t)}}},K=function(e){var t;return{peerDownlinkQuality:null===(t=(0,n._U)((0,i.hE)(null===e||void 0===e?void 0:e.id)))||void 0===t?void 0:t.downlinkQuality}},$=function(e){var t=(0,n._U)((0,i.xn)(null===e||void 0===e?void 0:e.id)),r=(0,n._U)((0,i.YC)(null===e||void 0===e?void 0:e.id)),o=(0,n.cw)();return{isMicrophoneEnabled:t,isCameraEnabled:r,muteMicrophone:(0,s.useCallback)((function(){return o.setRemoteTrackEnabled(null===e||void 0===e?void 0:e.audioTrack,!1)}),[o,null===e||void 0===e?void 0:e.audioTrack]),disableCamera:(0,s.useCallback)((function(){return o.setRemoteTrackEnabled(null===e||void 0===e?void 0:e.videoTrack,!1)}),[o,null===e||void 0===e?void 0:e.videoTrack])}},X=function(e){return{externalPeerId:e}};function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te=function(){var e=Y((0,s.useState)(!1),2),t=e[0],r=e[1],o=(0,n.C1)(i.a5.ROLE_UPDATED),a=null===o||void 0===o?void 0:o.data;return(0,s.useEffect)((function(){o&&a&&a.isLocal&&a.roleName==j.VM.MODERATOR&&r(!0)}),[o]),{roleChangedToModerator:t,hideModeratorNotification:function(){return r(!1)}}};function re(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var ne=function(){var e=a(),t=(0,n.cw)(),r=e===o.AUDIO_BLOCKED,i=function(){var e,r=(e=N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unblockAudio();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){re(o,n,i,a,s,"next",e)}function s(e){re(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return{isAudioBlocked:r,unblockAudio:i}},ie=function(){var e=(0,n.cw)(),t=(0,n._U)(i.UP),r=(0,n._U)(i.zK);return{muteAllPeersMicrophone:function(){e.setRemoteTracksEnabled({enabled:!1,roles:["host"],type:"audio"})},areAllPeersMuted:Object.values(r).filter((function(e){return e.peerId!=(null===t||void 0===t?void 0:t.id)&&"audio"===e.type})).every((function(e){return!e.enabled}))}};function oe(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){oe(o,n,i,a,s,"next",e)}function s(e){oe(o,n,i,a,s,"throw",e)}a(void 0)}))}}var se=function(e){var t=(0,n._U)(i.I3),r=e||t,o=(0,n.cw)(),a=(0,n._U)((0,i.Ag)(r)),l=(0,s.useCallback)(ae(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,o.raiseLocalPeerHand();case 3:t.next=7;break;case 5:return t.next=7,o.raiseRemotePeerHand(e);case 7:case"end":return t.stop()}}),t)}))),[o,e]),c=(0,s.useCallback)(ae(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,o.lowerLocalPeerHand();case 3:t.next=7;break;case 5:return t.next=7,o.lowerRemotePeerHand(e);case 7:case"end":return t.stop()}}),t)}))),[o,e]),u=(0,s.useCallback)(ae(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,c();case 3:e.next=7;break;case 5:return e.next=7,l();case 7:case"end":return e.stop()}}),e)}))),[a,c,l]);return{isHandRaised:a,raiseHand:l,lowerHand:c,toggleHand:u}},le=r(53939),ce=function(){var e=(0,le.Z)({role:j.VM.HLS_SPECTATOR,limit:50});return{peers:e.peers,loadPeers:e.loadPeers,loadMorePeers:e.loadMorePeers,hasNext:e.hasNext,total:e.total}}},22712:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var n=r(67294),i=r(13339),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,i.I3)(i.vi);return(0,n.useMemo)((function(){var n;return{userName:null===e||void 0===e?void 0:e.name,authToken:t,metaData:JSON.stringify(e),rememberDeviceSelection:!1,captureNetworkQualityInPreview:!0,settings:{isAudioMuted:!r.microphoneEnabled,isVideoMuted:!r.cameraEnabled,audioInputDeviceId:r.audioInputId,audioOutputDeviceId:null!==(n=r.audioOutputId)&&void 0!==n?n:void 0,videoDeviceId:r.videoInputId,speakerAutoSelectionBlacklist:"all"}}}),[e,t,r])}},68971:(e,t,r)=>{"use strict";r.d(t,{C3:()=>H.C,ar:()=>K,u7:()=>W,H9:()=>E,eR:()=>Q.e,Qc:()=>J,nH:()=>T,tv:()=>D.t,wA:()=>N,e4:()=>ye,Qs:()=>P,Nc:()=>_e,F7:()=>q,fX:()=>de,aL:()=>he,S2:()=>n.S,h5:()=>ce,Xc:()=>F,k1:()=>je,_F:()=>ie,aV:()=>f.a,rs:()=>_,p$:()=>te,sv:()=>ee,_K:()=>G,C:()=>ue,u9:()=>Z,Ji:()=>me,NW:()=>u.N,c9:()=>c,B0:()=>p,bF:()=>ve,F5:()=>Y});var n=r(73058),i=(r(59021),r(67294)),o=r(13339);var a=r(86013),s=r(52494),l=r(69647),c=function(){var e=(0,s.NA)(),t=e.data.room,r=e.status,n=r.isRoomError,o=r.apiError,c=(0,l.p)().error;(0,i.useEffect)((function(){401===(null===o||void 0===o?void 0:o.status)&&(c((0,a.t)("live_streams.room.authorization_error")),window.location.href="/"),401!==(null===o||void 0===o?void 0:o.status)&&n&&!t&&(window.location.href="/")}),[t,n,o])},u=r(46229),d=r(85239),p=function(){var e=(0,s.cy)().room;return{roomType:(null===e||void 0===e?void 0:e.room_type)||d.H0.STREAM,isLiveRoom:(0,d.$e)(e),isLiveStream:(0,d.ee)(e)}},f=r(47536),m=r(52255),b=r(68534),h=r(5278),v=r(73862);function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=(0,v.M)({hms:b.GK,livekit:h.KI})(),r=t.peers,n=t.loadPeers,a=t.loadMorePeers,l=t.hasNext,c=t.total,u=(0,o.I3)(o.zD),d=u.setLoadFn,p=u.load,f=u.loadFn,g=u.setHasNext,_=u.setLoadMoreFn,x=u.setTotal,j=u.setData,w=u.data,O=u.shouldPoll,S=l(),P=(0,i.useMemo)((function(){return[].concat(y(e||[]),y(w||[]))}),[e,w]),k=(0,s.y4)().refetchParticipants,C=null===P||void 0===P?void 0:P.reduce((function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName)}),""),N=(0,m.c)(C,1e3);(0,i.useEffect)((function(){null!==N&&void 0!==N&&N.length&&k()}),[N,k]),(0,i.useEffect)((function(){d(n),_(a)}),[]),(0,i.useEffect)((function(){x(c)}),[x,c]);var I=null===r||void 0===r?void 0:r.reduce((function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName,"-")}),"");(0,i.useEffect)((function(){g(S)}),[g,S]),(0,i.useEffect)((function(){j(r)}),[I]);var A=!!f;(0,i.useEffect)((function(){if(A&&(p(),O)){var e=setInterval((function(){p()}),3e3);return function(){clearInterval(e)}}}),[p,A,O])},x=r(64687),j=r.n(x),w=r(96043);function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)}))}}var P=function(){var e=(0,i.useRef)(!1),t=(0,s.y4)().goLiveAsync,r=(0,w.JC)();return S(j().mark((function n(){return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.current){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,e.current=!0,n.next=7,t();case 7:return n.next=9,r();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.error("Error going live",n.t0);case 14:return n.prev=14,e.current=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[3,11,14,17]])})))};function k(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){k(o,n,i,a,s,"next",e)}function s(e){k(o,n,i,a,s,"throw",e)}a(void 0)}))}}var N=function(){var e=(0,s.y4)().endStreamDelayedAsync,t=(0,n.S)(),r=(0,w.JC)();return C(j().mark((function n(){return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return n.next=4,r();case 4:return n.next=6,t();case 6:case"end":return n.stop()}}),n)})))};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=I((0,i.useState)(),2),o=n[0],a=n[1],s=function(){a(!1),clearTimeout(t),t=setTimeout((function(){return a(!0)}),r)},l=function(){document.removeEventListener("mousemove",s),clearTimeout(t)};return(0,i.useEffect)((function(){return e?(document.addEventListener("mousemove",s),a(!0)):(l(),a(!1)),function(){l()}}),[e]),{uiHidden:o}},D=r(73715),T=function(e,t){var r=(0,n.S)();(0,i.useEffect)((function(){if(e&&t&&!(0,d.a_)(t)&&r)return window.addEventListener("beforeunload",r),window.addEventListener("onunload",r),function(){window.removeEventListener("beforeunload",r),window.removeEventListener("onunload",r)}}),[e,null===t||void 0===t?void 0:t.id,r]),(0,i.useEffect)((function(){if(t&&!(0,d.a_)(t))return function(){r&&t&&!(0,d.a_)(t)&&r()}}),[null===t||void 0===t?void 0:t.id])},L=r(24185),M=r(98338),R=r(95287),B=r(50732),U=r(35639),F=function(){var e=(0,U.R)(),t=e.publicLiveStreamsEnabled,r=e.liveMobileWebEnabled,n=e.isLoading,o=(0,M.wh)(),a=o.currentCommunityMember,s=o.currentUser,l=o.isLoading,c=(0,L.k6)(),p=(0,u.N)(),f=n||l;(0,i.useEffect)((function(){f||(t&&(0,d.L6)(p)&&!a?c.push(B.dE.publicRoom({roomSlug:p.slug})):s?(0,R.P4)()&&p&&r&&window.location.pathname!==B.dE.mobileRoom({roomSlug:p.slug})?c.push(B.dE.mobileRoom({roomSlug:p.slug})):(0,R.P4)()&&!r&&c.push(B.dE.notSupported({roomSlug:p.slug})):window.location.href=B.$T.signIn({params:{post_login_redirect:window.location.href}}))}),[a,s,c,f,r,t,p])},z=r(88767),V=r(34334),q=function(e,t,r){var n=(0,l.p)(),i=n.success,o=n.error,s=(0,w.Kr)().requestRoleChange,c=J().refetchCohosts;return(0,z.useMutation)((function(){return V.Qk.addCohosts({roomId:t,formData:{cohosts_community_member_ids:[r]}})}),{onSuccess:function(){s(e,d.VM.HOST),c(),i((0,a.t)("live_streams.room.participant_invited_to_cohost_message"))},onError:function(){return o((0,a.t)("live_streams.room.participant_invited_to_cohost_error"))}}).mutate},Z=function(e,t,r){var n=(0,l.p)(),i=n.success,o=n.error,c=(0,w.Kr)().requestRoleChange,u=(0,s.y4)().refetchParticipants,p=J().refetchCohosts;return(0,z.useMutation)((function(){return V.Qk.changeRole({roomId:t,participantId:r,role:d.VM.HLS_SPECTATOR},{forReactQuery:!0})}),{onSuccess:function(){c(e,d.VM.HLS_SPECTATOR,!0),u(),p(),i((0,a.t)("live_streams.room.participant_removed_as_cohost_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return o((0,a.t)("live_streams.room.participant_removed_as_cohost_error"))}}).mutate},G=function(e){var t=(0,u.N)(),r=(0,w.Kr)().requestRoleChange,n=(0,l.p)(),i=n.success,o=n.error,c=(0,H.C)().hosts,p=(0,s.cy)().participants,f=(0,s.y4)().refetchParticipants,m=function(){e&&e(),i((0,a.t)("live_streams.room.cohost_removed_successfully"),{duration:"short",shouldUseProgress:!1})},b=function(){return o((0,a.t)("live_streams.room.could_not_remove_cohost_error"))},h=(0,z.useMutation)((function(e){return V.Qk.removeCohost({id:e,roomId:null===t||void 0===t?void 0:t.id})}),{onSuccess:m,onError:b}),v=(0,z.useMutation)((function(e){return V.Qk.changeRole({roomId:null===t||void 0===t?void 0:t.id,participantId:e,role:d.VM.SPECTATOR,forReactQuery:!0})}),{onSuccess:function(e){var t=function(e){if(!c)return null;var t=c.find((function(t){return Number(t.customerUserId)===e}));return null===t||void 0===t?void 0:t.id}(null===e||void 0===e?void 0:e.id);r(t,d.VM.HLS_SPECTATOR,!0),f(),m()},onError:b});return function(e){var t=function(e){if(!c)return!1;var t=c.find((function(t){var r;return(null===p||void 0===p||null===(r=p[t.customerUserId])||void 0===r?void 0:r.community_member_id)===e}));return null===t||void 0===t?void 0:t.customerUserId}(e);t?v.mutate(t):h.mutate(e)}},W=function(){var e=P(),t=(0,s.NA)(),r=t.data,n=r.room,o=r.currentParticipant,a=t.status,l=a.streamEnded,c=a.isJoining,u=(0,d.SS)(n),p=(0,d.Zo)(n),f=(0,d.HN)(n),m=(0,d.$e)(n);(0,i.useEffect)((function(){o&&u&&!c&&!l&&p&&f&&m&&e()}),[o,u,c,l,p,f,m])},H=r(57404),Q=r(1485),J=function(){var e=(0,u.N)(),t=!!(0,s.cy)().currentParticipant&&(0,d.HN)(e),r=(0,z.useQuery)(B.av.liveStreams.getCohosts({roomId:null===e||void 0===e?void 0:e.id}),{enabled:t}),n=r.data,i=r.isLoading,o=r.refetch;return{cohosts:(null===n||void 0===n?void 0:n.records)||[],isLoadingCohosts:i,refetchCohosts:function(){t&&o()}}},K=function(){var e=(0,L.TH)().search,t=new URLSearchParams(e).get("recording_key"),r=(0,s.NA)(),n=r.data,o=n.room,a=n.recorder,l=r.actions.createRecorder;(0,i.useEffect)((function(){o&&t&&l&&!a&&l(t)}),[o,t,a,l])};function $(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function X(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$(o,n,i,a,s,"next",e)}function s(e){$(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Y=function(){var e=(0,s.NA)(),t=e.actions,r=t.setViewTypeOverride,n=t.updateRoomAsync,i=e.data,o=i.room,a=i.viewTypeOverride,l=p().isLiveStream,c=a||(null===o||void 0===o?void 0:o.view_type),u=(0,w.JC)(),f=function(){var e=X(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c!==d.Bk.SPEAKER){e.next=2;break}return e.abrupt("return");case 2:if(!l&&!(0,d.HN)(o)){e.next=14;break}return e.prev=3,e.next=6,n({view_type:d.Bk.SPEAKER});case 6:u(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0.message);case 12:e.next=15;break;case 14:r(d.Bk.SPEAKER);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=X(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c!==d.Bk.GRID){e.next=2;break}return e.abrupt("return");case 2:if(!l&&!(0,d.HN)(o)){e.next=14;break}return e.prev=3,e.next=6,n({view_type:d.Bk.GRID});case 6:u(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0.message);case 12:e.next=15;break;case 14:r(d.Bk.GRID);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return{isSpeakerView:c===d.Bk.SPEAKER,isGridView:c===d.Bk.GRID,setSpeakerView:f,setGridView:m}},ee=function(){var e=(0,w.oZ)();return{isHandRaised:e.isHandRaised,raiseHand:e.raiseHand,lowerHand:e.lowerHand,toggleHand:e.toggleHand}},te=function(e){var t=(0,w.oZ)(e);return{isHandRaised:t.isHandRaised,raiseHand:t.raiseHand,lowerHand:t.lowerHand,toggleHand:t.toggleHand}};function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=re((0,i.useState)(t),2),o=n[0],a=n[1],s=(o-1)*r,l=null===e||void 0===e?void 0:e.slice(s,s+r),c=Math.ceil((null===e||void 0===e?void 0:e.length)/r);return{currentPagePeers:l,page:o,totalPages:c,next:function(){return a(Math.min(o+1,c))},prev:function(){return a(Math.max(o-1,1))},isFirstPage:1===o,isLastPage:o===c}},oe=r(28736);function ae(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ae(o,n,i,a,s,"next",e)}function s(e){ae(o,n,i,a,s,"throw",e)}a(void 0)}))}}var le,ce=function(e){var t=(0,M.wh)().currentCommunityMember,r=null===t||void 0===t?void 0:t.is_admin,n=(0,u.N)(),i=p().roomType,o=(0,oe.tm)({enabled:r}),s=o.streamingHoursAvailable,c=o.recordingHoursAvailable,f=o.isLoading,m=o.streamingTotalPlanHours,b=o.recordingTotalPlanHours,h=r&&!s,v=r&&!c&&(0,d.Gi)(n),y=h||v,g=!(0,d.HN)(n)&&y,_=(0,d.HN)(n)&&y,x=(0,l.p)().success,w=function(){e(),x((0,a.t)("settings.billing.add_ons.changes_succeeded"))},O=(0,oe.Yq)((function(){return w()}),{enabled:r}),S=O.purchaseAsync,P=O.unitSize,k=O.currentQuantity,C=(0,oe.$v)((function(){return w()}),{enabled:r}),N=C.purchaseAsync,I=C.unitSize,A=C.currentQuantity,E=function(){var e=se(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(P);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=se(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(I);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addonPurchaseNotAllowed:g,isLoadingUsage:f,onClickHandler:function(){return h?D():v?E():void e()},liveButtonLabel:function(){return _?(0,a.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,a.t)("live_streams.pre_join.conference.room_button_label")},backstageButtonLabel:function(){return _?(0,a.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,a.t)("live_streams.pre_join.".concat(i,".enter_backstage_button_label"))},boxMessage:function(){return g?(0,a.t)("live_streams.pre_join.".concat((0,d.vX)(n),".non_host_upgrade_message")):h?(0,a.t)("live_streams.pre_join.streaming_limit_exceeded",{hours:m+A}):v?(0,a.t)("live_streams.pre_join.recording_limit_exceeded",{hours:b+k}):(0,d.kx)(n)?(0,a.t)("live_streams.pre_join.".concat((0,d.vX)(n),".host_capacity_reached_message")):void 0}}},ue=function(e,t,r){var n=(0,w.XN)(r,t).externalPeerId,i=(0,l.p)(),o=i.success,c=i.error,u=(0,s.y4)().refetchParticipants;return(0,z.useMutation)((function(){return V.Qk.removeParticipant({roomId:e,participantId:t,peerId:n},{forReactQuery:!0})}),{onSuccess:function(){u(),o((0,a.t)("live_streams.room.participant_removed_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return c((0,a.t)("live_streams.room.participant_removed_error"))}}).mutate},de=function(e,t,r,n){var i=(0,l.p)(),o=i.success,s=i.error,c=(0,w.Kr)().requestRoleChange;return(0,z.useMutation)((function(){return V.Qk.addModerator({roomId:t,formData:{moderator_community_member_id:r,participant_id:n}})}),{onSuccess:function(){c(e,d.VM.MODERATOR,!0),o((0,a.t)("live_streams.room.participant_invited_to_moderator_message"))},onError:function(){return s((0,a.t)("live_streams.room.participant_invited_to_moderator_error"))}}).mutate};function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=Object.freeze((pe(le={},d.H0.STREAM,d.VM.HLS_SPECTATOR),pe(le,d.H0.CONFERENCE,d.VM.HOST),le)),me=function(e,t,r){var n=(0,l.p)(),i=n.success,o=n.error,s=(0,w.Kr)().requestRoleChange,c=function(e){return fe[e]||d.VM.HLS_SPECTATOR}(p().roomType);return(0,z.useMutation)((function(){return V.Qk.changeRole({roomId:t,participantId:r,role:c},{forReactQuery:!0})}),{onSuccess:function(){s(e,c,!0),i((0,a.t)("live_streams.room.participant_removed_as_moderator_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return o((0,a.t)("live_streams.room.participant_removed_as_moderator_error"))}}).mutate},be=r(12814),he=function(){var e=(0,o.Ft)(),t=e.toggleCamera,r=e.toggleMicrophone;(0,be.Z)("shift+v",(function(e){e.preventDefault(),t()})),(0,be.Z)("shift+m",(function(e){e.preventDefault(),r()}))},ve=function(){var e=(0,s.cy)().currentParticipant,t=(0,o.if)(),r=t.displayChat,n=t.isSidebarOpen,a=t.isChatSelected;(0,i.useEffect)((function(){((0,d.dF)(e)||(0,d.Vq)(e))&&r()}),[e,r]),(0,i.useLayoutEffect)((function(){if(n&&a){var e=document.getElementById("message-scroll-view");e&&(e.scrollTop=e.scrollHeight)}}),[a,n])};document.documentElement.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen,document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen;var ye=function(){var e=(0,o.if)().setIsFullscreen;(0,i.useEffect)((function(){var t=function(){return e(!!document.fullscreenElement||!!document.webkitFullscreenElement)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),function(){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}}),[e])},ge=r(81089),_e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).refetchInterval,t=void 0===e?null:e,r=(0,M.wh)(),n=r.currentCommunity,i=void 0===n?{}:n,o=r.isLoading,a=(0,L.UO)().roomSlug,s=(0,u.N)(),l=(0,z.useQuery)(["public-live-stream","guests",a,null===i||void 0===i?void 0:i.id],(function(){return(0,ge.UT)(B.qi.rooms.guests.index({slug:a,params:{community_id:null===i||void 0===i?void 0:i.id}}))}),{enabled:Boolean(s)&&(0,d.L6)(s)&&!o&&Boolean(a),refetchInterval:t}),c=l.data,p=l.isLoading;return{guests:c,count:(null===c||void 0===c?void 0:c.length)||0,isLoading:p}},xe=r(10842),je=function(){var e=(0,o.Ft)().setMicrophoneEnabled,t=(0,u.N)(),r=(0,xe.j)().isCurrentParticipantRoomCreator,n=!(null===t||void 0===t||!t.mute_on_join);(0,i.useEffect)((function(){!r&&n&&e(!1)}),[r,e,n])}},5278:(e,t,r)=>{"use strict";r.d(t,{Em:()=>l,jU:()=>E,VH:()=>m,du:()=>Z,ww:()=>h,yx:()=>U,l8:()=>B,Hg:()=>L,AE:()=>_,Bw:()=>g,yK:()=>y,zU:()=>G,fL:()=>x,Mi:()=>T,i4:()=>V,Dq:()=>w,MU:()=>O,_x:()=>P,my:()=>A,KI:()=>W,$x:()=>k,AR:()=>q,R3:()=>C});var n=r(67294),i=r(95591),o=r(62953);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(){var e=a((0,n.useState)(!1),2),t=e[0],r=e[1],s=(0,o.h)().room;return(0,n.useEffect)((function(){if(s)return r(s.isRecording),s.on(i.TQ.RecordingStatusChanged,(function(e){return r(e)})),function(){s.off(i.TQ.RecordingStatusChanged,r)}}),[s]),{hlsUrl:null,isHlsRunning:t,isRecording:t}},c=r(64687),u=r.n(c),d=Object.freeze({PUBLISH_METADATA:"PUBLISH_METADATA",UPDATE_ROOM:"UPDATE_ROOM",MUTE_MICROPHONE:"MUTE_MICROPHONE"});var p=r(58471),f=Object.freeze({excellent:5,good:3,poor:1,unknown:5}),m=function(){var e=(0,o.h)().localParticipant,t=(0,p.aV)(e).connectionQuality;return{localPeerDownlinkQuality:f[t]}},b=r(52494),h=function(e){var t=e.onRoomUpdate,r=e.onEndStream,a=(0,o.h)().room,s=(0,b.y4)().setMicrophoneEnabled;(0,n.useEffect)((function(){var e=new TextDecoder,n=function(r){try{var n=e.decode(r),i=(JSON.parse(n)||{}).type;i===d.UPDATE_ROOM?t&&t():i===d.MUTE_MICROPHONE&&s(!1)}catch(o){console.error("Could not decode received data - ",o.message)}},o=function(e){[i.W4.ROOM_DELETED,i.W4.PARTICIPANT_REMOVED].includes(e)&&r&&r()};return a&&(a.on(i.TQ.DataReceived,n),a.on(i.TQ.Disconnected,o)),function(){a&&(a.off(i.TQ.DataReceived,n),a.off(i.TQ.Disconnected,o))}}),[r,t,a,s])};var v=r(85239),y=function(){var e=(0,o.h)().participants,t=(0,n.useMemo)((function(){return(null===e||void 0===e?void 0:e.filter((function(e){try{var t;return!(null===(t=JSON.parse((null===e||void 0===e?void 0:e.metadata)||"{}"))||void 0===t||!t.isHandRaised)}catch(r){return console.error(r.message),!1}})))||[]}),[e]),r=(0,n.useMemo)((function(){return e.filter((function(e){return e.roleName===v.VM.HOST}))}),[e]),i=(0,n.useMemo)((function(){return e.filter((function(e){return[v.VM.SPECTATOR,v.VM.HLS_SPECTATOR].includes(e.roleName)}))}),[e]);return{peers:e,peersWithHandRaised:t,hosts:r,spectators:i}},g=function(){var e=y(),t=e.peers,r=e.hosts,i=e.spectators,o=(0,n.useMemo)((function(){return null===r||void 0===r?void 0:r.find((function(e){return e.isSpeaking}))}),[r]),a=(0,n.useRef)(null);!function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null===t||void 0===t?void 0:t.find((function(e){return e.id===n.id})))||(null===t||void 0===t?void 0:t[0])||null}else r.current=(null===t||void 0===t?void 0:t[0])||null}(o,r,a);var s=(0,n.useCallback)((function(e){return!(null===r||void 0===r||!r.some((function(t){return t.id===e&&t.isSpeaking})))}),[r]);return{peers:t,hosts:r,spectators:i,dominantSpeaker:o,selectedSpeaker:a.current,isSpeaking:s}},_=function(e){var t=(0,n.useRef)(),r=t.current,i=(0,p.aV)(e).cameraPublication,o=null===i||void 0===i?void 0:i.track,a=(null===i||void 0===i?void 0:i.isSubscribed)&&(null===i||void 0===i?void 0:i.track)&&!(null!==i&&void 0!==i&&i.isMuted);return(0,n.useEffect)((function(){return r&&o&&o.attach(r),function(){r&&o&&o.detach(r)}}),[r,o]),{videoRef:t,hasVideo:a}},x=function(){var e=(0,o.h)().room,t=new URLSearchParams(window.location.search).get("token");return(0,n.useEffect)((function(){e&&(console.log("START_RECORDING"),e.on(i.TQ.Disconnected,(function(){return console.log("END_RECORDING")})))}),[e]),{recorderToken:t}};function j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var w=function(e,t,r){var i=t.onJoinError,a=(0,o.h)(),s=a.roomOptions,l=a.connect,c=a.isConnected,d=a.isConnecting,p=a.isDisconnected,f=a.error,m=a.localMetadata,b=a.participants;(0,n.useEffect)((function(){var t;(t=u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!p||f||r){t.next=10;break}return t.prev=1,t.next=4,l("wss://live-staging.circle.so",e,s);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("Could not connect to room: ",t.t0.message),i&&i();case 10:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)}))})()}),[e,p,r,l,s,f,i]);var h=(null===m||void 0===m?void 0:m.role)===v.VM.HOST,y=(null===m||void 0===m?void 0:m.role)===v.VM.HLS_SPECTATOR,g=null===m||void 0===m?void 0:m.role;return{isConnected:c,isJoining:d,isHost:h,isHlsSpectator:y,isSomeoneScreenSharing:(0,n.useMemo)((function(){return null===b||void 0===b?void 0:b.some((function(e){return e.isScreenShareEnabled}))}),[b]),role:g}},O=function(){var e=(0,n.useRef)(),t=e.current,r=(0,o.h)().screenSharingParticipant,i=(0,p.aV)(r).screenSharePublication,a=null===i||void 0===i?void 0:i.track,s=(null===i||void 0===i?void 0:i.isSubscribed)&&(null===i||void 0===i?void 0:i.track)&&!(null!==i&&void 0!==i&&i.isMuted);return(0,n.useEffect)((function(){return t&&a&&a.attach(t),function(){t&&a&&a.detach(t)}}),[t,a]),{peer:r,videoRef:e,hasVideo:s,shouldWarnInfinityMirror:!1}};function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var P=function(){var e=(0,o.h)(),t=e.localParticipant,r=e.isSomeoneScreenSharing,n=!(null===t||void 0===t||!t.isScreenShareEnabled),i=function(){var e,r=(e=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,t.setScreenShareEnabled(!n,{audio:!0,systemAudio:"include"});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return{isScreenSharingEnabled:n,isSomeoneScreenSharing:r,toggleScreenSharing:i}},k=function(){var e=(0,o.h)().localParticipant;return function(){if(!e)return Promise.reject("localParticipant is not present");var t=new TextEncoder,r=JSON.stringify({type:d.UPDATE_ROOM});return null===e||void 0===e?void 0:e.publishData(t.encode(r),i.WO.RELIABLE)}},C=function(){return(0,o.h)().isReconnecting};function N(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize,r=void 0===t?8:t,i=(0,n.useRef)([]),o=(null===e||void 0===e?void 0:e.filter((function(e){return e.isSpeaking})))||[],a=(0,n.useMemo)((function(){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e[t.sid]=t,e}),{}))||{}}),[e]),s=i.current.map((function(e){return a[e.sid]})).filter((function(e){return!!e}));if(null===o||void 0===o||o.forEach((function(e){if(s.every((function(t){return t.sid!==e.sid}))){var t=a[e.sid];t&&s.unshift(t)}s.length>r&&s.pop()})),s.length<(null===e||void 0===e?void 0:e.length)&&s.length<r){var l=null===e||void 0===e?void 0:e.filter((function(e){return!s.some((function(t){return t.sid===e.sid}))}));if(null!==l&&void 0!==l&&l.length){var c=r-s.length;s.push.apply(s,N(l.slice(0,c)))}}i.current=s;var u=null===e||void 0===e?void 0:e.filter((function(e){return!s.some((function(t){return t.sid===e.sid}))}));return{orderedPeers:[].concat(N(s),N(u))}},E=function(){var e=(0,o.h)().room;return function(){return e.disconnect()}},D=r(96486),T=function(){return{hasRoleChangeRequest:!1,requestedByPeer:null,requestRoleChange:D.noop,acceptRoleChange:D.noop,rejectRoleChange:D.noop}},L=function(e){var t=(0,p.aV)(e).connectionQuality;return{peerDownlinkQuality:f[t]}};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t,r=(0,o.h)().localParticipant,a=(0,b.NA)().data.microphoneEnabled,s=!!(e instanceof i.Ix)&&!a,l=M((0,n.useState)((null===e||void 0===e||null===(t=e.getTrack(i.fQ.Source.Microphone))||void 0===t?void 0:t.isMuted)||s),2),c=l[0],u=l[1];(0,n.useEffect)((function(){var t=function(e){e.kind===i.fQ.Kind.Audio&&u(!0)},r=function(e){e.kind===i.fQ.Kind.Audio&&u(!1)};return e&&(e.on("trackMuted",t),e.on("trackUnmuted",r)),function(){e&&(e.off("trackMuted",t),e.off("trackUnmuted",r))}}),[e]);return{isMicrophoneEnabled:!c,muteMicrophone:function(){if(!r)return Promise.reject("localParticipant is not present");var t=new TextEncoder,n=JSON.stringify({type:d.MUTE_MICROPHONE});return null===r||void 0===r?void 0:r.publishData(t.encode(n),i.WO.LOSSY,[null===e||void 0===e?void 0:e.sid])},isCameraEnabled:!0,disableCamera:D.noop}},U=function(e,t){return{externalPeerId:t}};function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(){var e=F((0,n.useState)(!1),2),t=e[0],r=e[1];return{roleChangedToModerator:t,hideModeratorNotification:function(){return r(!1)}}},q=function(){return{isAudioBlocked:!1,unblockAudio:function(){return null}}},Z=function(){return{muteAllPeersMicrophone:function(){return!0},areAllPeersMuted:!1}},G=function(){return{isHandRaised:!1,raiseHand:D.noop,lowerHand:D.noop,toggleHand:D.noop}},W=function(){return{peers:[],loadPeers:Promise.resolve(),loadMorePeers:Promise.resolve(),hasNext:!0,total:0}}},96043:(e,t,r)=>{"use strict";r.d(t,{uZ:()=>a,QZ:()=>g,bf:()=>s,Wg:()=>P,rH:()=>l,XN:()=>w,UG:()=>j,fx:()=>x,iF:()=>d,I0:()=>c,RW:()=>u,oZ:()=>k,LP:()=>p,Kr:()=>_,Hy:()=>O,tO:()=>f,Hg:()=>m,so:()=>b,l9:()=>y,JC:()=>h,$I:()=>S,Xq:()=>v});var n=r(68534),i=r(5278),o=r(73862),a=function(){return(0,o.M)({hms:n.Zp,livekit:i.Em})()},s=function(){return(0,o.M)({hms:n.Tq,livekit:i.VH})()},l=function(e){var t=e.onRoomUpdate,r=e.onEndStream;return(0,o.M)({hms:n.hB,livekit:i.ww})({onRoomUpdate:t,onEndStream:r})},c=function(){return(0,o.M)({hms:n.pB,livekit:i.Bw})()},u=function(){return(0,o.M)({hms:n.RS,livekit:i.yK})()},d=function(e){return(0,o.M)({hms:n.wc,livekit:i.AE})(e)},p=function(){return(0,o.M)({hms:n.kk,livekit:i.fL})()},f=function(e,t,r){var a=t.onJoinError,s=t.participantData;return(0,o.M)({hms:n.RN,livekit:i.Dq})(e,{onJoinError:a,participantData:s},r)},m=function(){return(0,o.M)({hms:n.nc,livekit:i.MU})()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.M)({hms:n.$f,livekit:i._x})(e)},h=function(){return(0,o.M)({hms:n.HV,livekit:i.$x})()},v=function(){return(0,o.M)({hms:n.Vb,livekit:i.R3})()},y=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize;return(0,o.M)({hms:n.Ak,livekit:i.my})(e,{pageSize:t})},g=function(){return(0,o.M)({hms:n.qr,livekit:i.jU})()},_=function(){return(0,o.M)({hms:n.y2,livekit:i.Mi})()},x=function(e){return(0,o.M)({hms:n.yE,livekit:i.Hg})(e)},j=function(e){return(0,o.M)({hms:n.Lg,livekit:i.l8})(e)},w=function(e,t){return(0,o.M)({hms:n.YR,livekit:i.yx})(e,t)},O=function(){return(0,o.M)({hms:n.DI,livekit:i.i4})()},S=function(){return(0,o.M)({hms:n.tv,livekit:i.AR})()},P=function(){return(0,o.M)({hms:n.Ux,livekit:i.du})()},k=function(e){return(0,o.M)({hms:n.CV,livekit:i.zU})(e)}},73862:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(85239),i=r(46229),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hms,r=e.livekit,o=(0,i.N)();return(0,n.mP)(o)?r:t}},17447:(e,t,r)=>{"use strict";r.d(t,{v:()=>c});var n=r(85783),i=r(84895),o=function(){return(0,n._U)(i.UP)},a=r(62953),s=function(){return(0,a.h)().localParticipant},l=r(73862),c=function(){return(0,l.M)({hms:o,livekit:s})()}},57404:(e,t,r)=>{"use strict";r.d(t,{C:()=>d});var n=r(67294),i=r(52494),o=r(96043);function a(e){return function(e){if(Array.isArray(e))return e}(e)||c(e)||l(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||c(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(){var e,t=(0,o.RW)(),r=t.hosts,l=t.spectators,c=t.moderators,u=(0,i.cy)(),d=u.room,p=u.participants,f=(0,n.useCallback)((function(e,t){var r,n,i=(null===p||void 0===p||null===(r=p[e.customerUserId])||void 0===r?void 0:r.name)||"",o=(null===p||void 0===p||null===(n=p[t.customerUserId])||void 0===n?void 0:n.name)||"";return i>o?1:i===o?0:-1}),[p]),m=(0,n.useCallback)((function(e,t){var r,n,i,o;return(null===p||void 0===p||null===(r=p[e.customerUserId])||void 0===r?void 0:r.community_member_id)===(null===d||void 0===d||null===(n=d.creator)||void 0===n?void 0:n.id)?-1:(null===p||void 0===p||null===(i=p[t.customerUserId])||void 0===i?void 0:i.community_member_id)===(null===d||void 0===d||null===(o=d.creator)||void 0===o?void 0:o.id)?1:0}),[p,null===d||void 0===d||null===(e=d.creator)||void 0===e?void 0:e.id]),b=(0,n.useMemo)((function(){return r&&s(r).sort(f).sort(m)||[]}),[r,m,f]),h=(0,n.useMemo)((function(){return c&&s(c).sort(f)||[]}),[c,f]),v=(0,n.useMemo)((function(){return l&&l.sort(f)||[]}),[l,f]),y=[].concat(s(b),s(h),s(v)),g=a(b),_=g[0];return{peers:y,hosts:b,cohosts:g.slice(1),moderators:[_].concat(s(h)),spectators:v,count:(null===y||void 0===y?void 0:y.length)||0}}},1485:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var n=r(68971),i=r(86013),o=r(88767),a=r(34334),s=r(96043),l=r(52494),c=r(85239),u=r(69647),d=function(e){var t=(0,u.p)(),r=t.success,d=t.error,p=(0,n.NW)(),f=(0,s.Kr)().requestRoleChange,m=(0,s.RW)().spectators,b=(0,l.cy)().participants,h=(0,n.Qc)(),v=h.cohosts,y=h.isLoadingCohosts,g=h.refetchCohosts,_=function(e){null===e||void 0===e||e.forEach((function(e){var t=function(e){if(null===m||void 0===m||!m.length)return null;var t=m.find((function(t){var r;return(null===b||void 0===b||null===(r=b[t.customerUserId])||void 0===r?void 0:r.community_member_id)===e}));return null===t||void 0===t?void 0:t.id}(e.id);t&&f(t,c.VM.HOST)}))},x=(0,o.useMutation)((function(e){return a.Qk.addCohosts({roomId:null===p||void 0===p?void 0:p.id,formData:e,forReactQuery:!0})}),{onSuccess:function(t){_(t),g(),r((0,i.t)("live_streams.room.cohosts_added_successfully")),e&&e()},onError:function(){return d((0,i.t)("live_streams.room.could_not_add_cohosts_error"))}}),j=(0,n._K)(g),w=(null===p||void 0===p?void 0:p.host_capacity)>v.length+1;return{cohosts:v,isLoadingCohosts:y,addCohosts:x.mutate,isAddingCohosts:x.isLoading,removeCohost:j,canInviteMoreHosts:w}}},73715:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var n=r(67294),i=r(63542),o=r(85893);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t=e.title,r=e.onConfirm,s=e.description,l=void 0===s?"":s,c=e.bodyElement,u=void 0===c?null:c,d=e.buttonLabel,p=void 0===d?"":d,f=e.maxIndex,m=void 0!==f&&f,b=e.sentiment,h=void 0===b?"danger":b,v=a((0,n.useState)(!1),2),y=v[0],g=v[1],_=a((0,n.useState)(),2),x=_[0],j=_[1],w=function(){g(!1)},O=function(){g(!1),r(x)};return{confirmModal:(0,o.jsx)(i.I,{show:y,onClose:w,onConfirm:O,title:t,description:l,bodyElement:u,className:"reset-banner-modal",maxZIndexEnabled:m,buttonLabel:p,sentiment:h}),confirmModalOpen:y,onConfirmButtonClick:function(e){g(!0),j(e)},onConfirmModalClose:w,onConfirmModal:O}}},73058:(e,t,r)=>{"use strict";r.d(t,{S:()=>c});var n=r(64687),i=r.n(n),o=r(52494),a=r(96043);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))}}var c=function(){var e=(0,o.y4)().leaveAsync,t=(0,a.QZ)();return l(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e();case 2:return r.next=4,t();case 4:case"end":return r.stop()}}),r)})))}},10842:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(52494),i=r(85239),o=r(17447),a=function(){var e,t=(0,n.cy)(),r=t.currentParticipant,a=t.room,s=(0,o.v)();return{isCurrentParticipantModerator:(null===s||void 0===s?void 0:s.roleName)===i.VM.MODERATOR,isCurrentParticipantRoomCreator:(null===a||void 0===a||null===(e=a.creator)||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.community_member_id),isCurrentParticipantSpectator:(null===s||void 0===s?void 0:s.roleName)===i.VM.SPECTATOR||(null===s||void 0===s?void 0:s.roleName)===i.VM.HLS_SPECTATOR}}},59021:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var n=r(67294),i=function(){return!!navigator.mediaDevices};function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=Object.freeze({AUDIO_INPUT:"audioinput",AUDIO_OUTPUT:"audiooutput",VIDEO_INPUT:"videoinput"}),l=function(e){var t=o((0,n.useState)([]),2),r=t[0],a=t[1],l=o((0,n.useState)(!0),2),c=l[0],u=l[1],d=(0,n.useRef)(!1),p=(0,n.useRef)(null),f=(0,n.useCallback)((function(){return i()?navigator.mediaDevices.enumerateDevices().then((function(e){return a(e),e})).catch(console.error):Promise.resolve()}),[]),m=(0,n.useCallback)((function(){d.current=!0,p.current=null;var e=function(e){return!(null===e||void 0===e||!e.length)&&e.some((function(e){var t;return!(null===(t=e.label)||void 0===t||!t.trim())}))};e(r)||f().then((function(t){e(t)?d.current=!1:p.current=setTimeout((function(){m()}),2e3)})).catch((function(e){console.error(e)}))}),[f,r]);return(0,n.useEffect)((function(){if(e&&i()&&f)return f(),navigator.mediaDevices.addEventListener("devicechange",f),function(){return navigator.mediaDevices.removeEventListener("devicechange",f)}}),[e,f]),(0,n.useEffect)((function(){var e,t,r;if(f&&null!==(e=navigator.permissions)&&void 0!==e&&e.query)return navigator.permissions.query({name:"microphone"}).then((function(e){t=e,e.onchange=function(){"granted"===e.state&&f()}})).catch((function(e){console.error("Could not listen for microphone permission status",e.message),u(!1)})),navigator.permissions.query({name:"camera"}).then((function(e){r=e,e.onchange=function(){"granted"===e.state&&f()}})).catch((function(e){console.error("Could not listen for camera permission status",e.message),u(!1)})),function(){t&&(t.onchange=null),r&&(r.onchange=null)}}),[f]),(0,n.useEffect)((function(){c||d.current||m()}),[c,m]),(0,n.useEffect)((function(){return function(){p.current&&clearTimeout(p.current)}}),[]),{audioInputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.AUDIO_INPUT}))}),[r]),audioOutputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.AUDIO_OUTPUT}))}),[r]),videoInputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.VIDEO_INPUT}))}),[r])}}},47536:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var n=r(68971),i=r(52494),o=r(85239),a=function(e){var t,r=e.id,a=e.customerUserId,s=e.roleName,l=e.name,c=(0,n.p$)(r),u=c.isHandRaised,d=c.lowerHand,p=(0,n.NW)(),f=(0,i.cy)().participants,m=(0,o.pp)(e)||(null===f||void 0===f?void 0:f[a]),b=(0,n.F7)(r,null===p||void 0===p?void 0:p.id,null===m||void 0===m?void 0:m.community_member_id),h=(0,n.u9)(r,null===p||void 0===p?void 0:p.id,a),v=(0,n.fX)(r,null===p||void 0===p?void 0:p.id,null===m||void 0===m?void 0:m.community_member_id,a),y=(0,n.Ji)(r,null===p||void 0===p?void 0:p.id,a),g=e.isLocal,_=!(null===m||void 0===m||!m.community_member_id)&&(null===m||void 0===m?void 0:m.community_member_id)===(null===p||void 0===p||null===(t=p.creator)||void 0===t?void 0:t.id),x=!_&&((null===m||void 0===m?void 0:m.role)===o.VM.HOST||s===o.VM.HOST),j=!_&&((null===m||void 0===m?void 0:m.role)===o.VM.MODERATOR||s===o.VM.MODERATOR),w=(0,n.C)(null===p||void 0===p?void 0:p.id,a,r);return{participant:m,name:(null===m||void 0===m?void 0:m.name)||l,avatarUrl:null===m||void 0===m?void 0:m.avatar_url,isCurrentParticipant:g,isHandRaised:u,isHost:_,isCohost:x,isModerator:j,inviteToCohost:b,removeAsCohost:h,lowerHand:d,removeParticipant:w,removeAsModerator:y,inviteToModerator:v}}},46229:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(52494),i=function(){return(0,n.cy)().room}},13339:(e,t,r)=>{"use strict";r.d(t,{O_:()=>u,nX:()=>p,CH:()=>c,fm:()=>d,tS:()=>A,I7:()=>E,zl:()=>T,YK:()=>R,TQ:()=>re,oe:()=>U,y:()=>z,wV:()=>M,IQ:()=>L,sO:()=>B,O4:()=>$,SK:()=>X,ch:()=>ee,Le:()=>Q,W4:()=>K,SI:()=>J,bR:()=>H,EY:()=>Y,vi:()=>I,Sl:()=>F,zD:()=>W,P$:()=>te,fC:()=>V,iZ:()=>D,Ft:()=>ae,I3:()=>P,if:()=>se});var n=r(73445),i=r(782),o=r(46965),a=r(32714),s=(0,a.n)((function(e,t){return{session:{spectators:{shouldPoll:!0,setShouldPoll:function(t){return e((function(e){e.session.spectators.shouldPoll=t}))},isLoading:!1,isFetching:!1,loadFn:null,setLoadFn:function(t){return e((function(e){e.session.spectators.loadFn=t}))},load:function(){var r,n=null!==(r=t().session.spectators.loadFn)&&void 0!==r?r:function(){return Promise.resolve()};e((function(e){e.session.spectators.isLoading=!0})),n().finally((function(){e((function(e){e.session.spectators.isLoading=!1}))}))},hasNext:!1,setHasNext:function(t){return e((function(e){e.session.spectators.hasNext=t}))},loadMoreFn:null,setLoadMoreFn:function(t){return e((function(e){e.session.spectators.loadMoreFn=t}))},loadMore:function(){var r,n=null!==(r=t().session.spectators.loadMoreFn)&&void 0!==r?r:function(){return Promise.resolve()};e((function(e){e.session.spectators.isFetching=!0})),n().finally((function(){e((function(e){e.session.spectators.isFetching=!1}))}))},total:0,setTotal:function(t){return e((function(e){e.session.spectators.total=t}))},data:[],setData:function(t){return e((function(e){e.session.spectators.data=t}))}}}}})),l="default",c=2,u=16,d=2,p=16,f=(0,a.n)((function(e){return{settings:{microphoneEnabled:!0,cameraEnabled:!0,audioInputId:l,audioOutputId:null,videoInputId:l,blurEnabled:!1,mirrorEnabled:!0,noiseSuppression:"basic",gridLayoutPageSize:8,speakerLayoutPageSize:6,infinityMirrorAlertDisabled:!1},settingsActions:{toggleMicrophone:function(){return e((function(e){e.settings.microphoneEnabled=!e.settings.microphoneEnabled}))},setMicrophoneEnabled:function(t){return e((function(e){e.settings.microphoneEnabled=t}))},toggleCamera:function(){return e((function(e){var t;e.settings.cameraEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.cameraEnabled)}))},setCameraEnabled:function(t){return e((function(e){e.settings.cameraEnabled=t}))},setAudioInputId:function(t){return e((function(e){e.settings.audioInputId=t}))},setAudioOutputId:function(t){return e((function(e){e.settings.audioOutputId=t}))},setVideoInputId:function(t){return e((function(e){e.settings.videoInputId=t}))},toggleBlur:function(){return e((function(e){var t;e.settings.blurEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.blurEnabled)}))},toggleMirror:function(){return e((function(e){var t;e.settings.mirrorEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.mirrorEnabled)}))},setNoiseSuppression:function(t){return e((function(e){e.settings.noiseSuppression=t}))},setBlurEnabled:function(){return e((function(e){e.settings.blurEnabled=!0}))},setGridLayoutPageSize:function(t){return e((function(e){var r=Math.min(Math.max(t,c),u);e.settings.gridLayoutPageSize=r}))},setSpeakerLayoutPageSize:function(t){return e((function(e){var r=Math.min(Math.max(t,d),p);e.settings.speakerLayoutPageSize=r}))},toggleInfinityMirrorAlert:function(){return e((function(e){e.settings.infinityMirrorAlertDisabled=!e.settings.infinityMirrorAlertDisabled}))}}}})),m=r(34334);function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(0,a.n)((function(e){return{spotlight:{items:[],errorMessage:void 0,isLoading:!1},spotlightActions:{fetchSpotlightItems:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((function(e){e.spotlight.isLoading=!0})),m.Qk.getSpotlightItems({roomId:t,params:y(y({},r),{},{sort:"oldest"})}).then((function(t){e((function(e){e.spotlight.items=t.records,e.spotlight.isLoading=!1}))})).catch((function(t){console.error(t),e((function(e){e.spotlight.errorMessage="Failed to fetch spotlight items",e.spotlight.isLoading=!1}))}))},addSpotlightItem:function(t){e((function(e){e.spotlight.items=[].concat(b(e.spotlight.items),[t])}))},deleteSpotlightItem:function(t){e((function(e){e.spotlight.items=e.spotlight.items.filter((function(e){return e.id!==t}))}))},setSpotlightItems:function(t){e((function(e){e.spotlight.items=t}))}}}})),x=Object.freeze({CHAT:"CHAT",PARTICIPANTS:"PARTICIPANTS",QA:"QA"}),j=(0,a.n)((function(e,t){return{ui:{isSidebarOpen:!1,setIsSidebarOpen:function(t){return e((function(e){e.ui.isSidebarOpen=t}))},hideSidebar:function(){return e((function(e){e.ui.isSidebarOpen=!1}))},currentTab:x.CHAT,setCurrentTab:function(t){return e((function(e){e.ui.currentTab=t}))},displayChat:function(){return e((function(e){e.ui.isSidebarOpen=!0,e.ui.currentTab=x.CHAT,e.ui.hasUnseenChatMessages=!1}))},toggleChat:function(){t().ui.isSidebarOpen&&t().ui.currentTab===x.CHAT?t().ui.hideSidebar():t().ui.displayChat()},displayQA:function(){return e((function(e){e.ui.isSidebarOpen=!0,e.ui.currentTab=x.QA,e.ui.hasUnseenQuestions=!1}))},toggleQA:function(){t().ui.isSidebarOpen&&t().ui.currentTab===x.QA?t().ui.hideSidebar():t().ui.displayQA()},displayParticipants:function(){return e((function(e){e.ui.isSidebarOpen=!0,e.ui.currentTab=x.PARTICIPANTS,e.ui.hasUnseenChatMessages=!1}))},toggleParticipants:function(){t().ui.isSidebarOpen&&t().ui.currentTab===x.PARTICIPANTS?t().ui.hideSidebar():t().ui.displayParticipants()},isCohostsModalOpen:!1,setIsCohostsModalOpen:function(t){return e((function(e){e.ui.isCohostsModalOpen=t}))},displayCohostsModal:function(){t().ui.displayParticipants(),t().ui.setIsCohostsModalOpen(!0)},hideCohostsModal:function(){t().ui.setIsCohostsModalOpen(!1)},isMuteParticipantsModalOpen:!1,setIsMuteParticipantsModalOpen:function(t){return e((function(e){e.ui.isMuteParticipantsModalOpen=t}))},displayMuteParticipantsModal:function(){t().ui.setIsMuteParticipantsModalOpen(!0)},hideMuteParticipantsModal:function(){t().ui.setIsMuteParticipantsModalOpen(!1)},hasUnseenChatMessages:!1,setHasUnseenChatMessages:function(t){return e((function(e){e.ui.hasUnseenChatMessages=t}))},onNewChatMessage:function(){t().ui.isSidebarOpen&&t().ui.currentTab===x.CHAT||t().ui.setHasUnseenChatMessages(!0)},hasUnseenQuestions:!1,setHasUnseenQuestions:function(t){return e((function(e){e.ui.hasUnseenQuestions=t}))},onNewQuestion:function(){t().ui.isSidebarOpen&&t().ui.currentTab===x.QA||t().ui.setHasUnseenQuestions(!0)},isRoomInfoOpen:!1,setIsRoomInfoOpen:function(t){return e((function(e){e.ui.isRoomInfoOpen=t}))},toggleIsRoomInfoOpen:function(){return e((function(e){e.ui.isRoomInfoOpen=!e.ui.isRoomInfoOpen}))},isFullscreen:!1,setIsFullscreen:function(t){return e((function(e){e.ui.isFullscreen=t}))},toggleFullscreen:function(){return e((function(e){e.ui.isFullscreen?document.exitFullscreen():document.documentElement.requestFullscreen()}))},isPublicStreamNotificationVisible:!1,isPublicStreamNotificationDismissed:!1,setPublicStreamNotificationVisible:function(t){return e((function(e){e.ui.isPublicStreamNotificationVisible=t}))},hidePublicStreamNotification:function(){return e((function(e){e.ui.isPublicStreamNotificationVisible=!1,e.ui.isPublicStreamNotificationDismissed=!0}))}}}}));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=(0,n.Ue)()((0,i.tJ)((function(){return O(O(O(O(O({},f.apply(void 0,arguments)),j.apply(void 0,arguments)),s.apply(void 0,arguments)),o.r.apply(void 0,arguments)),_.apply(void 0,arguments))}),{name:"circle-live-storage",version:3,partialize:function(e){return{settings:e.settings}}}));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(e){return e.settings||{}},A=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.audioInputId},E=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.audioOutputId},D=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.videoInputId},T=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.blurEnabled},L=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.mirrorEnabled},M=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.microphoneEnabled},R=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.cameraEnabled},B=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.noiseSuppression},U=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.gridLayoutPageSize},F=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.speakerLayoutPageSize},z=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.infinityMirrorAlertDisabled},V=function(e){return e.ui},q=function(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.currentTab)===x.CHAT},Z=function(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.currentTab)===x.PARTICIPANTS},G=function(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.currentTab)===x.QA},W=function(e){var t;return(null===(t=e.session)||void 0===t?void 0:t.spectators)||{}},H=function(e){return e.qa.session},Q=function(e){var t,r=e.qa.upvotedQuestionIds||[];return(null===(t=e.qa.questions)||void 0===t?void 0:t.map((function(e){return C(C({},e),{},{upvoted_by_current_community_member:r.includes(e.id)})})))||[]},J=function(e){var t=e.qa.replyingQuestionId;return t?function(e,t){var r=e.qa.upvotedQuestionIds||[],n=e.qa.questions.find((function(e){return e.id===t}));return n?C(C({},n),{},{upvoted_by_current_community_member:r.includes(t)}):null}(e,t):null},K=function(e){return e.qa.replies||[]},$=function(e){return e.qaActions||{}},X=function(e){return e.qa.filterByStatus},Y=function(e){return e.qa.sortBy},ee=function(e){var t;return(null===(t=e.qa.pendingQuestionIds)||void 0===t?void 0:t.length)||0},te=function(e){return e.spotlightActions||{}},re=function(e){var t;return null===(t=e.spotlight.items)||void 0===t?void 0:t[0]};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae=function(){return P((function(e){return e.settingsActions}))},se=function(){var e=P(V),t=P(q),r=P(Z),n=P(G);return ie(ie({},e),{},{isChatSelected:t,isParticipantsSelected:r,isQASelected:n})}},46965:(e,t,r)=>{"use strict";r.d(t,{R:()=>o,r:()=>c});var n=r(32714),i=r(47126),o={POPULAR:"popular",LATEST:"latest",OLDEST:"oldest"},a=[i.d.APPROVED,i.d.ANSWERED,i.d.UNANSWERED],s=function(e,t){return t===i.d.APPROVED&&a.includes(e.status)||e.status===t},l=function(e,t){switch(t){case"latest":return e.sort((function(e,t){var r=new Date(t.approved_at||t.created_at),n=new Date(e.approved_at||e.created_at);return r.getTime()-n.getTime()}));case"oldest":return e.sort((function(e,t){var r=new Date(t.approved_at||t.created_at);return new Date(e.approved_at||e.created_at).getTime()-r.getTime()}));case"popular":return e.sort((function(e,t){return t.upvotes_count-e.upvotes_count}));default:return e}},c=(0,n.n)((function(e,t){return{qa:{session:null,questions:[],filterByStatus:i.d.APPROVED,sortBy:o.LATEST,replyingQuestionId:null,replies:[],upvotedQuestionIds:[],pendingQuestionIds:[]},qaActions:{setSession:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t().qa.session;e((function(e){n.setInitialFilter&&!o&&null!==r&&void 0!==r&&r.enabled&&(null!==r&&void 0!==r&&r.has_pending_questions?e.qa.filterByStatus=i.d.PENDING:e.qa.filterByStatus=i.d.APPROVED),e.qa.session=r}))},setQuestions:function(t){return e((function(e){e.qa.questions=t;var r=t.filter((function(e){return e.upvoted_by_current_community_member})).map((function(e){return e.id})),n=new Set(e.qa.upvotedQuestionIds);r.forEach((function(e){return n.add(e)})),e.qa.upvotedQuestionIds=Array.from(n)}))},setFilterToSee:function(e){var r=t().qa.filterByStatus;s(e,r)||t().qaActions.setFilterByStatus(e.status)},addQuestion:function(r){var n=t().qa,i=n.questions,o=n.filterByStatus,a=n.sortBy;s(r,o)&&!i.some((function(e){return e.id===r.id}))&&e((function(e){e.qa.questions.push(r),e.qa.questions=l(e.qa.questions,a)}))},updateQuestion:function(r){var n=t().qa,i=n.questions,o=n.filterByStatus,a=n.sortBy,c=i.findIndex((function(e){return e.id===r.id}));-1!==c?e((function(e){s(r,o)?e.qa.questions[c]=r:e.qa.questions.splice(c,1),e.qa.questions=l(e.qa.questions,a)})):s(r,o)&&t().qaActions.addQuestion(r)},updateUpvotedQuestionIds:function(r){var n=t().qa.upvotedQuestionIds,i=new Set(n);r.upvoted_by_current_community_member?i.add(r.id):i.delete(r.id),e((function(e){e.qa.upvotedQuestionIds=Array.from(i)}))},setPendingQuestionIds:function(t){return e((function(e){e.qa.pendingQuestionIds=t}))},updatePendingQuestionIds:function(r){var n=t().qa.pendingQuestionIds,o=new Set(n);r.status===i.d.PENDING?o.add(r.id):o.delete(r.id),e((function(e){e.qa.pendingQuestionIds=Array.from(o),0===o.size&&e.qa.session&&(e.qa.session.has_pending_questions=!1)}))},deleteQuestion:function(t){return e((function(e){e.qa.questions=e.qa.questions.filter((function(e){return e.id!==t})),e.qa.pendingQuestionIds=e.qa.pendingQuestionIds.filter((function(e){return e!==t}))}))},setReplyingQuestionId:function(t){return e((function(e){e.qa.replyingQuestionId=t}))},setReplies:function(t){return e((function(e){e.qa.replies=t}))},addReply:function(r){return e((function(e){var n=t().qa,i=n.replyingQuestionId,o=n.replies;i!==r.question_id||o.some((function(e){return e.id===r.id}))||e.qa.replies.push(r)}))},updateReply:function(r){var n=t().qa.replies.findIndex((function(e){return e.id===r.id}));-1!==n&&e((function(e){e.qa.replies[n]=r}))},deleteReply:function(t){return e((function(e){e.qa.replies=e.qa.replies.filter((function(e){return e.id!==t}))}))},setFilterByStatus:function(t){return e((function(e){e.qa.filterByStatus=t}))},setSortBy:function(t){return e((function(e){e.qa.sortBy=t}))}}}}))},76079:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(86013),i=r(18605),o=r(85893),a=function(){return(0,o.jsxs)("div",{className:"mb-8 mt-4 p-8 text-center shadow-none",children:[(0,o.jsx)("h1",{className:"mb-8 text-2xl",children:(0,n.t)("community.feature.no_live_streams.title")}),(0,o.jsx)("p",{className:"mb-8",children:(0,n.t)("community.feature.no_live_streams.description")}),(0,o.jsxs)("ul",{className:"mx-4 mb-8 list-none text-justify",children:[(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_3_admins")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_10_moderators")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_20_spaces")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.unlimited_members")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.custom_domain")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.advanced_analytics")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.custom_css")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.sso_wp_memberful")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.500MB_file_limit")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.100GB_total_storage")})]})]}),(0,o.jsx)("a",{className:"btn btn-primary",href:"/settings/plans",children:(0,n.t)("plan_details.upgrade_plan")})]})}},26443:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var n=r(86013),i=r(24185),o=r(50732),a=r(70254),s=r(18574),l=r(54482),c=r(85893),u=["query"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=function(e){var t=e.setShouldRenderMobileFiltersTransition,r=(0,i.k6)(),d=(0,a.t)(),f=d.query,b=void 0===f?"":f,h=m(d,u);return(0,c.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between border-b px-4 py-2 md:hidden",children:[(0,c.jsx)(s.h,{defaultValue:b,onSearch:function(e){return r.push({search:(0,o.WB)(p(p({},h),{},{query:null===e||void 0===e?void 0:e.trim()}))})},placeholder:(0,n.t)("members_directory.header.search.placeholder")}),(0,c.jsx)(l.h,{name:"20-filters",iconSize:20,iconClassName:"!text-dark",buttonSize:28,onClick:function(){return t((function(e){return!e}))}})]})}},40341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MemberDirectory:()=>Pe,default:()=>ke});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r.n(a),l=r(3004),c=r(32223),u=r(36589),d=r(49080),p=r(2480),f=r(78596),m=r(16823),b=r(69521),h=r(64269),v=r(98338),y=r(84432),g=r(39068),_=r(62618),x=r(50732),j=r(18605),w=r(27025),O=r(64687),S=r.n(O),P=r(4717),k=r(81786),C=r(6298),N=r(67687),I=r(69647),A=r(85893),E=function(e){var t=e.defaultValue,r=void 0===t?"oldest":t,n=[{value:"alphabetical",label:(0,a.t)("alphabetical")},{value:"oldest",label:(0,a.t)("oldest")},{value:"latest",label:(0,a.t)("latest")}];return(0,A.jsx)(N.l.Item,{name:"member_directory_settings.sort",label:I18n.t("".concat("members_directory.header.settings.form",".sort")),hideDescription:!0,hideBorder:!0,children:(0,A.jsx)(N.l.SelectNative,{options:n,defaultValue:r})})},D=function(){var e="members_directory.header.settings.form.exclude_empty_profiles";return(0,A.jsx)(N.l.Item,{name:"member_directory_settings.exclude_empty_profiles",label:I18n.t("".concat(e,".title")),description:I18n.t("".concat(e,".description")),isToggle:!0,hideBorder:!0,inline:!0,children:(0,A.jsx)(N.l.ToggleSwitch,{variant:"small"})})};function T(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var L="members_directory.header.settings",M=[{value:p.nk.CARDS,label:(0,a.t)(["members_directory.header","views.cards"])},{value:p.nk.LIST,label:(0,a.t)(["members_directory.header","views.list"])}],R=function(e){var t=e.open,r=e.onClose,n=(0,I.p)(),i=(0,v.wh)(),o=i.isLoading,a=i.currentCommunitySettings,l=(0,P.K)({onSuccess:function(){n.success(s().t("".concat(L,".save.success"))),r()},onError:function(){n.error(s().t("".concat(L,".save.error")))}});if(!a||o)return null;var c=a.member_directory_settings,u=void 0===c?{}:c,d=function(){var e,t=(e=S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.mutate({data:{community_settings:a},updates:t});case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){T(o,n,i,a,s,"next",e)}function s(e){T(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,A.jsx)(C.d,{open:t,onClose:r,title:s().t("".concat(L,".title")),noWrapperPadding:!0,children:(0,A.jsxs)(N.l,{onSubmit:d,defaultValues:{member_directory_settings:u},className:"h-full",formClassName:"flex flex-col h-full",children:[(0,A.jsxs)("div",{className:"grow px-6",children:[(0,A.jsx)(D,{}),(0,A.jsx)(E,{defaultValue:u.sort}),(0,A.jsx)(N.l.Item,{name:"member_directory_settings.view",label:s().t([L,"form.view"]),hideDescription:!0,hideBorder:!0,children:(0,A.jsx)(N.l.SelectNative,{options:M,defaultValue:p.nk.CARDS})})]}),(0,A.jsx)(C.d.Footer,{children:(0,A.jsx)(k.z,{disabled:l.isLoading,type:"submit",variant:"primary",full:!0,children:s().t("".concat(L,".save.button"))})})]})})};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){var t=e.currentCommunityMember,r=e.memberCount,i=e.hasDropdown,o=void 0===i||i,s=e.headerTitle,l=void 0===s?(0,a.t)("members_directory.header.title"):s,c=B((0,n.useState)(!1),2),u=c[0],d=c[1],p="(".concat((0,_.HA)(r),")"),f=r<=1?l:"".concat(l," ").concat(p);return(0,g.vb)(t)&&o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(w.Lt,{direction:"bottom-start",button:(0,A.jsxs)(w.Lt.MenuButton,{children:[(0,A.jsx)(y.y,{children:f}),(0,A.jsx)(j.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:[(0,A.jsx)(w.Lt.ItemLink,{to:x.Gp.index(),children:(0,a.t)("members_directory.header.manage_audience")}),(0,A.jsx)(w.Lt.ItemLink,{forceClose:!0,onClick:function(){d(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,A.jsx)(R,{open:u,onClose:function(){d(!1)}})]}):(0,A.jsx)(y.y,{children:f})},z=r(26443),V=r(25830),q=r(47139),Z=q.f2.RoleFilter,G=q.f2.SpaceGroupsFilterV2,W=q.f2.SpacesFilter,H=q.f2.StatusFilter,Q=q.f2.MemberTagsFilter,J=q.f2.PaywallsFilter,K=q.f2.EventsFilter,$=q.f2.HasPastDueSubscriptionFilter,X=q.f2.JoinedCommunityDaysAgoFilter,Y=q.f2.LastLoggedInDaysAgoFilter,ee=q.f2.AvatarSet,te=q.f2.ActivityScoreFilter,re=q.f2.NameFilter,ne=q.f2.BioFilter,ie=q.f2.HeadlineFilter,oe=q.f2.LocationFilter,ae=q.f2.InvitationLinksFilter,se=q.f2.LevelFilter,le=[{name:"joined_community_days_ago",component:X,label:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:Y,label:(0,a.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],ce=[{name:"name",component:re,label:(0,a.t)("members_directory.header.search.filters.name")},{name:"bio",component:ne,label:(0,a.t)("members_directory.header.search.filters.bio")},{name:"headline",component:ie,label:(0,a.t)("members_directory.header.search.filters.headline")},{name:"location",component:oe,label:(0,a.t)("members_directory.header.search.filters.location")},{name:"role",component:Z,label:(0,a.t)("members_directory.header.search.filters.role")},{name:"invitation_link_ids",component:ae,label:(0,a.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"spaces",component:W,label:(0,a.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"space_groups",component:G,label:(0,a.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"online_status",component:H,label:(0,a.t)("members_directory.header.search.filters.online_status")},{name:"tags",component:Q,label:(0,a.t)("members_directory.header.search.filters.tags.singular_title")},{name:"paywalls",component:J,label:(0,a.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:K,label:(0,a.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:$,label:(0,a.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(le,[{name:"is_avatar_set",component:ee,label:(0,a.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:te,label:(0,a.t)("members_directory.header.search.filters.activity_score")},{name:"level",component:se,label:(0,a.t)("members_directory.header.search.filters.level")}]),ue=function(){var e,t=(0,V.rV)();return(0,A.jsx)("div",{className:"shadow-xs hidden md:flex",children:(0,A.jsx)(q.YP,{platformFilters:ce,defaultFilterNames:(e=["name","spaces","tags","events"],t?[].concat(e,["activity_score"]):e)})})},de=r(24185),pe=r(31872),fe=r(55390);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(){var e=me((0,n.useState)(!1),2),t=e[0],r=e[1];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(fe.S,{label:(0,a.t)("space_settings"),dataTestId:"space-settings-v3",children:[(0,A.jsx)(w.Lt.ItemLink,{to:x.Gp.index(),children:(0,a.t)("members_directory.header.manage_audience")}),(0,A.jsx)(w.Lt.ItemLink,{forceClose:!0,onClick:function(){r(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,A.jsx)(R,{open:t,onClose:function(){r(!1)}})]})},ve=r(13288),ye=r(74079),ge=function(){var e=(0,P.K)(),t=(0,P.w)().data,r=null===t||void 0===t?void 0:t.community_settings;if(e.isLoading||!r)return(0,A.jsx)(ve.a,{});var n=r.public_member_directory,i="members_directory.header.actions.".concat(n?"public":"private");return(0,A.jsxs)(ye.J,{buttonTitle:(0,a.t)("".concat(i,".title")),children:[(0,A.jsx)("p",{children:(0,a.t)("".concat(i,".description"))}),(0,A.jsx)(k.z,{variant:"primary",onClick:function(){e.mutate({data:t,updates:{public_member_directory:!n}})},children:(0,a.t)("".concat(i,".revert_button"))})]})},_e=function(e){var t=e.activeView,r=e.setActiveView,n=(0,de.k6)(),i=(0,v.wh)().currentCommunityMember,o=(0,u.I)().isV3Enabled,s=(0,A.jsx)(pe.P,{value:t,onChange:r});return(0,g.vb)(i)?(0,A.jsxs)("div",{className:"flex items-center gap-4",children:[s,(0,A.jsx)(ge,{}),(0,A.jsx)(k.z,{large:o,type:"button",className:"hidden md:block",onClick:function(){return n.push(x.lA.members.manage)},children:(0,a.t)("manage")}),o&&(0,A.jsx)(he,{})]}):(0,A.jsx)(A.Fragment,{children:s})},xe=function(e){var t=e.memberCount,r=e.headerTitle,n=e.activeView,i=e.setShouldRenderMobileFiltersTransition,o=e.setActiveView,a=(0,v.wh)().currentCommunityMember,s=(0,u.I)().isV3Enabled;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(h.Z,{leftContent:(0,A.jsx)(F,{currentCommunityMember:a,memberCount:t,hasDropdown:!s,headerTitle:r}),rightContent:(0,A.jsx)(_e,{activeView:n,setActiveView:o})}),(0,A.jsx)(z.M,{setShouldRenderMobileFiltersTransition:i}),(0,A.jsx)(ue,{})]})};function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(e){var t=e.memberDirectorySettings,r=(0,u.I)().isV3Enabled,i=(0,f.d)().memberDirectoryLink,s=je((0,n.useState)(0),2),h=s[0],v=s[1],y=je((0,n.useState)(!1),2),g=y[0],_=y[1],x=je((0,c.Q)({defaultCommunityView:t.view,views:p.nk}),2),j=x[0],w=x[1],O=r&&(null===i||void 0===i?void 0:i.label)||(0,a.t)("members_directory.title");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(xe,{memberCount:h,activeView:j,setActiveView:w,setShouldRenderMobileFiltersTransition:_,headerTitle:O}),(0,A.jsxs)(m.F.Body,{hasPaddingTopMobile:!1,children:[(0,A.jsx)(l.S,{title:O,bodyClassNames:"view-members-directory"}),(0,A.jsxs)(m.F.Content,{className:o()("md:!min-w-0"),children:[(0,A.jsx)(d.x,{shouldRenderMobileFiltersTransition:g,shouldBeHiddenOnMd:!0,shouldShowAdminFilters:!0}),(0,A.jsx)(d.S,{setMemberCount:v,scopeResults:t.scope,defaultSort:t.defaultSort,shouldShowHiddenMemberTooltip:!0,viewType:b.c.MEMBER_DIRECTORY,activeView:j})]})]})]})},Se=r(14216),Pe=function(){var e=(0,Se.b)();return e.isLoading?null:(0,A.jsx)(Oe,{memberDirectorySettings:e})};const ke=Pe},14216:(e,t,r)=>{"use strict";r.d(t,{b:()=>c});var n=r(98338),i=r(39068),o=r(38503),a=r(2480);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){var e,t,r=(0,o.ww)().isAdminUsageContext,c=(0,n.wh)(),u=c.currentCommunitySettings,d=c.currentCommunityMember,p=c.isLoading,f=(null===u||void 0===u?void 0:u.member_directory_settings)||{sort:a.aP[0],exclude_empty_profiles:!0},m={exclude_empty_name:!r,exclude_empty_profiles:!r&&f.exclude_empty_profiles},b=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({visible_in_member_directory:!0},m),h=(0,i.vb)(d)?m:b;return{defaultSort:f.sort,scope:h,view:(t=a.nk.CARDS,null!==u&&void 0!==u&&null!==(e=u.member_directory_settings)&&void 0!==e&&e.view&&(t=u.member_directory_settings.view),t),isLoading:p}}},28521:(e,t,r)=>{"use strict";r.d(t,{z:()=>p});var n=r(86013),i=r(28338),o=r(11049),a=r(82177),s=r(52749),l=r(85893),c=function(e){var t=e.isSubmitting,r=void 0!==t&&t;return(0,l.jsx)(a.u_.Footer,{className:"!px-0",children:(0,l.jsx)(s._,{type:"submit",form:"bookmark-form",variant:"primary",full:!0,large:!0,submitting:r,children:(0,n.t)("save")})})},u=function(e){var t=e.isFolder,r=void 0===t||t,s=e.space,u=e.folderId,d=e.bookmark,p=e.isEdit,f=void 0!==p&&p,m=(0,o.dd)(),b=f?"edit":"create",h=r?"folder":"link";return(0,l.jsxs)(a.u_,{isOpen:m.visible,onClose:m.hide,children:[(0,l.jsx)(a.u_.Overlay,{}),(0,l.jsxs)(a.u_.Content,{className:"!overflow-visible",children:[(0,l.jsxs)(a.u_.Header,{children:[(0,l.jsx)(a.u_.Title,{className:"text-center",size:"md",children:(0,n.t)("".concat(b,"_").concat(h),{scope:"spaces.bookmarks"})}),(0,l.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,l.jsx)(a.u_.CloseButton,{onClick:m.hide})})]}),(0,l.jsx)(a.u_.Body,{className:"!overflow-visible px-2",children:(0,l.jsx)(i.X,{space:s,bookmark:d,folderId:u,isFolder:r,isEdit:f,renderFooter:c})})]})]})},d=o.gk.create((function(e){var t=e.folderId,r=e.space,n=e.isFolder,i=e.bookmark,o=e.isEdit;return(0,l.jsx)(u,{folderId:t,space:r,isFolder:n,bookmark:i,isEdit:o})})),p=function(){return(0,o.dd)(d)}},81830:(e,t,r)=>{"use strict";r.d(t,{L:()=>E});var n=r(86013),i=r(50308),o=r.n(i),a=r(88767),s=r(11049),l=r(98338),c=r(34334),u=r(67687),d=r(82177),p=r(69647),f=r(94184),m=r.n(f),b=r(87536),h=r(40160),v=r(24185),y=r(32320),g=r(81317),_=r(14281),x=r(81786),j=r(8246),w=r(85893),O=function(e){var t=e.onClose,r=e.formId,i=e.isLoading,o=void 0!==i&&i,a=(0,b.Gc)(),s=a.watch,l=a.setValue,c=a.formState.isDirty,p=s("community_member_ids",[])||[],f=s("add_all_members",!1),O=p.length>0,S=(0,d.UV)().contentPortalElement,P=(0,v.TH)().pathname;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d.u_.Header,{children:[(0,w.jsx)(d.u_.Title,{size:"sm",className:"text-center",children:(0,n.t)("space_groups.form.edit.members.add_member")}),(0,w.jsx)(d.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,w.jsx)(d.u_.CloseButton,{onClick:t})})]}),(0,w.jsxs)(d.u_.Body,{children:[(0,w.jsx)("div",{className:"mb-8",children:(0,w.jsxs)(j.Z.LabelMd,{children:[(0,n.t)("space_groups.add_members_to_space_group_description_without_link")," ",(0,w.jsx)(h.rU,{to:"".concat(g.l.members.invite,"?from=").concat(P),children:(0,n.t)("space_groups.add_members_to_space_group_link")}),"."]})}),(0,w.jsx)(u.l.CommunityMemberSelect,{name:"community_member_ids",direction:"down",variant:"tags",hideSelectedItems:!0,hideIcon:!0,disabled:f,appendTo:S,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,w.jsx)(y.Y,{memberIds:p,onRemove:function(e){var t=p.filter((function(t){return t!==e}));l("community_member_ids",t)}}),(0,w.jsxs)("div",{className:m()({hidden:O,visible:!O}),children:[(0,w.jsx)(_.X,{}),(0,w.jsx)("div",{className:"flex items-baseline",children:(0,w.jsx)(u.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("space_groups.form.add_everyone_from_community"),id:"add_all_members",name:"add_all_members",className:"my-5 mr-2 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"ml-4 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,children:(0,w.jsx)(u.l.ToggleSwitch,{name:"add_all_members",variant:"small"})})})]})]}),(0,w.jsx)(d.u_.Footer,{className:"flex items-baseline justify-end",children:(0,w.jsx)(x.z,{variant:"primary",type:"submit",form:r,disabled:!c||o,children:o?(0,n.t)("space_groups.invite.adding_to_space_group"):(0,n.t)("space_groups.invite.add_to_space_group")})})]})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C="add-space-group-members-form",N={add_all_members:!1,community_member_ids:null},I=function(e){var t=e.spaceGroupId,r=(0,p.p)(),i=(0,a.useQueryClient)(),f=(0,s.dd)(),m=(0,l.p7)(t).refetch,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)((function(e){var t=e.spaceGroupId,r=e.communityMembersId,n=e.shouldAddAllMembers;return c.iD.addMembers({spaceGroupId:t,body:{community_member_ids:r,add_all_members:n}})}),e)}({onError:function(e){r.error(e.message)},onSuccess:function(e){var t=e.message;i.invalidateQueries(["space-group-members"]),null===m||void 0===m||m(),r.success(t,{duration:"short",shouldUseProgress:!1}),f.hide()}}),h=b.mutate,v=b.isLoading;return(0,w.jsxs)(d.u_,{isOpen:f.visible,onClose:f.visible?f.hide:o(),contentPortalId:"add-space-group-member-portal-content",title:(0,n.t)("space_groups.form.edit.members.add_member"),children:[(0,w.jsx)(d.u_.Overlay,{}),(0,w.jsx)(d.u_.Content,{size:"md",children:(0,w.jsx)(u.l,{id:C,mode:"onChange",onSubmit:function(e){return h(P(P({spaceGroupId:t},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{},{shouldAddAllMembers:e.add_all_members}))},defaultValues:N,className:"flex flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col",children:(0,w.jsx)(O,{onClose:f.hide,isLoading:v,formId:C})})})]})},A=s.gk.create((function(e){var t=e.spaceGroupId;return(0,w.jsx)(I,{spaceGroupId:t})})),E=function(){return(0,s.dd)(A)}},32320:(e,t,r)=>{"use strict";r.d(t,{Y:()=>m});var n=r(58533),i=r(34310),o=r(90734),a=r(13288),s=r(22735),l=r(86013),c=r(64422),u=r(81786),d=r(8246),p=r(85893),f=function(e){var t,r=e.id,n=e.avatarUrl,i=e.name,a=e.onRemove;return(0,p.jsxs)(s.SC,{className:"group h-12",children:[(0,p.jsx)(s.pj,{variant:"no-padding",className:"rounded-l-lg",children:(0,p.jsx)("div",{className:"ml-4 mr-3",children:(0,p.jsx)(c.s,{name:(t=i,o.C.test(""+t)?i.charAt(0):i),src:n,size:"8"})})}),(0,p.jsx)(s.pj,{variant:"no-padding",className:"w-full",children:(0,p.jsx)("div",{className:"truncate p-2 pl-0",children:(0,p.jsx)(d.Z.LabelSm,{weight:"semibold",children:i})})}),(0,p.jsx)(s.pj,{variant:"no-padding",className:"w-24 rounded-r-lg",children:(0,p.jsx)("div",{className:"text-dark invisible group-hover:visible",children:(0,p.jsx)(u.z,{type:"button",variant:"plain",onClick:function(){return a(r)},children:(0,l.t)("remove")})})})]},r)},m=function(e){var t=e.memberIds,r=void 0===t?[]:t,l=e.onRemove,c=r.length>0,u=(0,i.fd)({filters:{id:r},options:{enabled:c,keepPreviousData:c}}),d=u.hasNextPage,m=u.fetchNextPage,b=u.members;return c?(0,p.jsx)("div",{className:"-mx-4 mt-4 h-full max-h-80 overflow-y-auto",children:(0,p.jsx)(n.Z,{loader:(0,p.jsx)(a.a,{}),dataLength:r.length,style:{overflow:"initial"},scrollThreshold:.5,next:m,hasMore:Boolean(d),children:(0,p.jsx)(s.iA,{variant:"no-border",className:"w-full max-w-full",tableClassName:"w-full",children:(0,p.jsxs)(s.RM,{children:[r.map((function(e){return t=e,o.C.test(""+t)?(0,p.jsx)(f,{id:e,name:e,onRemove:l,avatarUrl:""},e):null;var t})),b.map((function(e){var t=e.id,r=e.avatar_url,n=e.name;return(0,p.jsx)(f,{id:t,avatarUrl:r,name:n,onRemove:l},t)}))]})})})}):null}},43292:(e,t,r)=>{"use strict";r.d(t,{z:()=>U});var n=r(86013),i=r(96486),o=r(88767),a=r(11049),s=r(34334);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(67687),p=r(82177),f=r(69647),m=r(67294),b=r(94184),h=r.n(b),v=r(87536),y=r(24185),g=r(94281),_=r(98338),x=r(90789),j=r(50732),w=r(14281),O=r(81786),S=r(8246),P=r(32320),k=r(85893),C=[{label:(0,n.t)("spaces.form.add_everyone_from_options.space_group"),value:"space_group"},{label:(0,n.t)("spaces.form.add_everyone_from_options.community"),value:"community"}],N="community_member_ids",I="should_add_all_members",A=function(e){var t=e.onClose,r=e.isLoading,i=e.formId,o=(0,v.Gc)(),a=o.watch,s=o.setValue,l=(0,p.UV)().contentPortalElement,c=(0,_.wh)().currentCommunity,u=(0,y.TH)().pathname,f=c||{},b=f.chat_space_members_limit,A=f.member_count,E=(0,_.L2)().data,D=((0,(0,_.e2)().helpers.findBy)({id:null===E||void 0===E?void 0:E.space_group_id})||{}).space_group_members_count,T=void 0===D?0:D,L=a(N,[])||[],M=a(I,!1),R=a("member_type"),B=L.length>0,U=B||M,F=T>b,z=A>b,V="space_group"===R,q=(0,x.Ug)(E)&&(V?F:z);return(0,m.useEffect)((function(){q&&s(I,!1)}),[q]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(p.u_.Header,{children:[(0,k.jsx)(p.u_.Title,{size:"sm",children:(0,n.t)("spaces.form.edit.members.add_member")}),(0,k.jsx)(p.u_.HeaderActions,{children:(0,k.jsx)(p.u_.CloseButton,{onClick:t})})]}),(0,k.jsxs)(p.u_.Body,{className:"!px-5 !py-4 md:!px-8 md:!py-2",children:[(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsxs)(S.Z.LabelSm,{children:[(0,n.t)("add_members_to_space_description_without_link")," ",(0,k.jsx)("a",{href:"".concat(j.lA.members.invite,"?invite_type=csv&from=").concat(u),children:(0,n.t)("add_members_to_space_description_link")})]})}),(0,k.jsx)(d.l.CommunityMemberSelect,{name:N,variant:"tags",direction:"down",addable:!0,hideSelectedItems:!0,hideIcon:!0,disabled:M,placeholder:(0,n.t)("spaces.form.edit.members.add_member"),appendTo:l,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,k.jsx)(P.Y,{memberIds:L,onRemove:function(e){var t=L.filter((function(t){return t!==e}));s(N,t)}}),(0,k.jsxs)("div",{className:h()({hidden:B,visible:!B}),children:[(0,k.jsx)(w.X,{}),(0,k.jsxs)("div",{className:"flex flex-col items-start md:flex-row md:items-center md:gap-6",children:[(0,k.jsx)(g.T,{content:V?(0,n.t)("members_in_space_group_limit_reached"):(0,n.t)("members_in_community_limit_reached"),disabled:!q,className:"flex w-full",children:(0,k.jsx)(d.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("spaces.form.add_everyone_from"),id:I,name:I,className:"my-5 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"mx-2 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,isDisabled:q,children:(0,k.jsx)(d.l.ToggleSwitch,{name:I,variant:"small",disabled:q})})}),(0,k.jsx)(d.l.Item,{name:"member_type",className:"w-full text-sm font-normal",hideDescription:!0,hideLabel:!0,hideBorder:!0,hiddenField:!0,children:(0,k.jsx)(d.l.SelectNative,{name:"member_type",options:C})})]})]})]}),(0,k.jsxs)(p.u_.Footer,{className:"flex items-baseline justify-between",children:[(0,k.jsx)("div",{className:"-mt-4",children:(0,k.jsx)(d.l.Checkbox,{id:"notify_members",label:(0,n.t)("spaces.form.edit.members.notify_members"),name:"notify_members",labelClassName:"font-normal text-sm"})}),(0,k.jsx)(O.z,{large:!0,variant:"primary",type:"submit",form:i,disabled:r||!U,children:r?(0,n.t)("spaces.form.edit.members.adding"):(0,n.t)("spaces.form.edit.members.add")})]})]})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L="add-space-members-form",M={notify_members:!1,community_member_ids:null,member_type:"space_group",should_add_all_members:!1},R=function(e){var t=e.onAdd,r=e.spaceId,l=(0,f.p)(),u=(0,o.useQueryClient)(),m=(0,a.dd)(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMutation)((function(e){var t=e.spaceId,r=e.communityMembersId,n=e.notifyMembers,i=e.memberType,o=e.shouldAddAllMembers;return s.rb.addMemberToSpace({spaceId:t,body:c({community_member_ids_or_emails:r,notify_members:n,select_all_members:o},i&&{member_type:i})})}),e)}({onError:function(e){l.error(e.message)},onSuccess:function(){u.invalidateQueries("community-members"),l.success((0,n.t)("spaces.form.edit.members.members_added")),(0,i.isFunction)(t)?t():m.hide()}}),h=b.mutate,v=b.isLoading;return(0,k.jsxs)(p.u_,{isOpen:m.visible,onClose:m.visible?m.hide:i.noop,contentPortalId:"add-space-member-content-portal",title:(0,n.t)("spaces.form.edit.members.add_member"),children:[(0,k.jsx)(p.u_.Overlay,{}),(0,k.jsx)(p.u_.Content,{size:"xl",className:"max-w-md",children:(0,k.jsx)(d.l,{id:L,mode:"onChange",onSubmit:function(e){return h(D(D(D({spaceId:r},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{},{notifyMembers:!!e.notify_members},e.should_add_all_members&&{memberType:e.member_type}),{},{shouldAddAllMembers:e.should_add_all_members}))},defaultValues:M,className:"flex h-full flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col h-full",children:(0,k.jsx)(A,{onClose:m.visible?m.hide:i.noop,isLoading:v,formId:L})})})]})},B=a.gk.create((function(e){var t=e.spaceId,r=e.onAdd;return(0,k.jsx)(R,{spaceId:t,onAdd:r})})),U=function(){return(0,a.dd)(B)}},36845:(e,t,r)=>{"use strict";r.d(t,{G:()=>I});var n=r(67294),i=r(86013),o=r(39068),a=r(11049),s=r(39723),l=r(88320),c=r(98338),u=r(81786),d=r(82177),p=r(624),f=r(27117),m=r(67687),b=r(85893),h="course-type-form",v=function(e){var t=e.onSubmit,r=e.courseSetting,n=void 0===r?{course_type:f.t}:r;return(0,b.jsx)(m.l,{id:h,onSubmit:t,defaultValues:{course_setting:n},validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,b.jsx)(p.q,{hideLabel:!0})})},y=r(54482),g=function(e){var t=e.hideForm;return(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(y.h,{ariaLabel:(0,i.t)("back"),name:"20-chevron-left",onClick:t,iconSize:20,buttonSize:28,iconClassName:"!text-dark",className:"mr-2",variant:"primary"})})},_=r(8927),x="space_type_form",j=function(e){var t=e.onSubmit,r=(0,c.wh)(),n=r.currentCommunity,i=r.currentCommunitySettings,o=!(null===i||void 0===i||!i.courses_enabled)&&(null===n||void 0===n?void 0:n.courses_feature_flag_enabled);return(0,b.jsx)(m.l,{id:x,onSubmit:t,defaultValues:{post_type:"basic"},children:(0,b.jsx)(_.m,{hideLabel:!0,isCoursesEnabled:o})})};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.spaceGroupId,r=e.selectedPostType,o=(0,a.dd)(),c=w((0,n.useState)(null!==r&&void 0!==r?r:"basic"),2),p=c[0],f=c[1],m=w((0,n.useState)(Boolean(r)&&"course"!==r),2),y=m[0],_=m[1],O=w((0,n.useState)(!1),2),S=O[0],P=O[1],k=w((0,n.useState)("course"===r),2),C=k[0],N=k[1],I=w((0,n.useState)(),2),A=I[0],E=I[1],D=C?(0,i.t)("spaces.form.create.course_types.choose_course_type"):y?(0,i.t)("spaces.form.create.space_titles.".concat(p)):(0,i.t)("spaces.form.create.space_types.choose_type"),T=function(){o.hide(),N(!1),E(void 0),_(!1),o.remove()};return(0,b.jsxs)(d.u_,{isOpen:o.visible,onClose:T,contentPortalId:"space-type-picker-modal",title:D,children:[(0,b.jsx)(d.u_.Overlay,{}),(0,b.jsxs)(d.u_.Content,{size:"md",children:[(0,b.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[y&&(0,b.jsx)(g,{hideForm:function(){_(!1),"course"===p&&N(!0)}}),C&&(0,b.jsx)(g,{hideForm:function(){N(!1),_(!1)}}),(0,b.jsx)(d.u_.Title,{className:"w-auto",size:"sm",children:D}),(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(d.u_.CloseButton,{onClick:T})})]}),(0,b.jsxs)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:[!y&&!C&&(0,b.jsx)(j,{onSubmit:function(e){var t=e.post_type;f(t),"course"===t?N(!0):_(!0)}}),C&&(0,b.jsx)(v,{onSubmit:function(e){var t=e.course_setting;E(t),N(!1),_(!0)},courseSetting:A}),y&&(0,b.jsx)(s._,{onClose:T,post_type:p,courseSetting:A,hideSpaceTypePicker:!0,currentSpaceGroupId:t,setExternalLoadingState:P,renderHeader:function(){return(0,b.jsx)(b.Fragment,{})},renderFooter:function(){return(0,b.jsx)(b.Fragment,{})}})]}),(0,b.jsx)(d.u_.Footer,{children:(0,b.jsx)(u.z,{form:y?l.e:C?h:x,type:"submit","data-testid":"create-space-button",variant:"circle",full:!0,large:!0,disabled:S,children:y?S?(0,i.t)("creating"):(0,i.t)("create_space"):(0,i.t)("spaces.form.create.space_types.next")})})]})]})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.spaceGroupId,r=e.postType,o=(0,a.dd)(),c=P((0,n.useState)(!1),2),p=c[0],f=c[1];return(0,b.jsxs)(d.u_,{isOpen:o.visible,onClose:o.hide,contentPortalId:"create-space-content-portal",title:(0,i.t)("create_space"),children:[(0,b.jsx)(d.u_.Overlay,{}),(0,b.jsxs)(d.u_.Content,{size:"md",children:[(0,b.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[(0,b.jsx)(d.u_.Title,{size:"sm",children:(0,i.t)("create_space")}),(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(d.u_.CloseButton,{onClick:o.hide})})]}),(0,b.jsx)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:(0,b.jsx)(s._,{onClose:o.hide,setExternalLoadingState:f,currentSpaceGroupId:t,post_type:r,renderHeader:function(){return(0,b.jsx)(b.Fragment,{})},renderFooter:function(){return(0,b.jsx)(b.Fragment,{})}})}),(0,b.jsx)(d.u_.Footer,{children:(0,b.jsx)(u.z,{disabled:p,type:"submit",form:l.e,full:!0,large:!0,children:(0,i.t)(p?"creating":"create_space")})})]})]})},N=a.gk.create((function(e){var t=e.spaceGroupId,r=e.postType,n=(0,c.wh)().currentCommunityMember;return(0,o.vb)(n)?(0,b.jsx)(S,{spaceGroupId:t,selectedPostType:r}):(0,b.jsx)(C,{spaceGroupId:t,postType:r})})),I=function(){return(0,a.dd)(N)}},85580:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,K:()=>a});var n=r(67294),i=r(38776),o=(0,n.createContext)(null);o.displayName="AdminAudienceEditModalContext";var a=function(){var e=(0,n.useContext)(o);return(0,i.Z)(e,"useAdminAudienceEditModalContext must be used within a Provider"),e}},45842:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(86013),i=r(44032),o=r(85893),a=function(e){var t=e.isOpen,r=void 0!==t&&t,a=e.onClose,s=e.onConfirm,l=e.confirmText,c=e.disabled,u=void 0!==c&&c;return(0,o.jsx)(i.c,{isOpen:r,onClose:a,onConfirm:s,confirmText:l,confirmVariant:"danger",title:(0,n.t)("remove"),disabled:u,cancelText:(0,n.t)("cancel"),children:(0,o.jsx)("p",{children:(0,n.t)("remove_member_confirm")})})}},75038:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var n=r(8761),i=r(11049),o=r(79090),a=r(85893),s=function(e){var t=e.spaceId,r=(0,i.dd)(),s=r.visible,l=r.hide;return(0,a.jsx)(o.K,{children:(0,a.jsx)(n.G,{isOpen:s,onClose:l,spaceId:t,shouldClearEventStateOnHide:!0})})},l=i.gk.create((function(e){var t=e.spaceId;return(0,a.jsx)(s,{spaceId:t})})),c=function(){return(0,i.dd)(l)}},57435:(e,t,r)=>{"use strict";r.d(t,{t:()=>N});var n=r(11049),i=r(64687),o=r.n(i),a=r(67294),s=r(86013),l=r(98338),c=r(85239),u=r(31611),d=r(55531),p=r(67687),f=r(69647),m=r(76079),b=r(79090),h=r(58356),v=r(90146),y=r(96486);function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var _=function(){var e=(0,a.useRef)(null),t=function(){var t,r=(t=o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,y.isFunction)(e.current)){t.next=6;break}return t.next=3,e.current();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:r();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{validateAndContinue:t,triggerValidationRef:e}},x=r(79181),j=r(85893);function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=e.isOpen,r=e.onClose,n=(0,l.wh)().currentCommunity,i=(n=void 0===n?{}:n).supports_live_streams,y=O((0,a.useState)(c.H0.STREAM),2),g=y[0],S=y[1],P=(0,v.qj)(g),k=P.sections,C=P.sectionTitles,N=(0,v.a1)(),I=(0,v.n3)(g,r),A=I.mutateAsync,E=I.isLoading,D=_(),T=D.validateAndContinue,L=D.triggerValidationRef,M=(0,f.p)().success,R=(0,b.Y)(),B=R.shouldUpgradeAddons,U=R.purchaseRecordingsAddonWhenLimitReached,F=R.purchaseStreamingAddonWhenLimitReached,z=function(){var e,t=(e=o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:return e.next=5,F();case 5:return B&&M((0,s.t)("settings.billing.add_ons.changes_succeeded")),e.next=8,A(t,r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return(0,j.jsx)(d.x,{isOpen:t,onClose:r,shouldShowCloseButton:!0,contentPortalId:"live",children:(0,j.jsxs)(u.MW,{formId:"live-QWZ7d7ysBkm5cwhL235J9Q",sections:C,initialSection:k.roomType,title:(0,s.t)("live_streams.form.title_v3"),onExit:r,onSave:z,isSaving:E,children:[(0,j.jsx)(d.x.Header,{children:(0,j.jsx)(h.h4,{})}),(0,j.jsxs)(d.x.Body,{id:x.Um,wrapperClassName:"max-w-full",children:[i&&(0,j.jsx)(p.l,{id:"live-QWZ7d7ysBkm5cwhL235J9Q",onSubmit:z,onCancel:r,defaultValues:N,children:(0,j.jsx)(h.uT,{setRoomType:S,triggerValidationRef:L})}),!i&&(0,j.jsx)("div",{className:"mx-auto max-w-screen-md py-14",children:(0,j.jsx)(m.s,{})})]}),i&&(0,j.jsx)(d.x.Footer,{children:(0,j.jsx)(h.$_,{roomType:g,validateAndContinue:T})})]})})},k=function(){var e=(0,n.dd)(),t=e.visible,r=e.hide;return(0,j.jsx)(b.K,{children:(0,j.jsx)(P,{isOpen:t,onClose:r})})},C=n.gk.create((function(){return(0,j.jsx)(k,{})})),N=function(){return(0,n.dd)(C)}},31385:(e,t,r)=>{"use strict";r.d(t,{Y:()=>w});var n=r(96486),i=r(11049),o=r(64687),a=r.n(o),s=r(86013),l=r(88767),c=r(34334),u=r(98338),d=r(28849),p=r(69647),f=r(10161),m=r(8246),b=r(85893);function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.space,r={default:["space_members","space_settings"],basic:["posts","engagement"],event:["events","engagement"],course:["course_info","course_progress","videos_and_files","comments"],image:["posts","engagement"],chat:["messages"]},n=[].concat(h(r[t.post_type]||[]),h(r.default));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.w,{content:(0,s.t)("spaces.delete.description",{space_name:t.name})}),(0,b.jsxs)("div",{className:"border-primary mt-4 space-y-2 rounded-md border p-4",children:[(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(m.Z.LabelMd,{weight:"semibold",children:t.name})}),n&&(0,b.jsx)("ul",{className:"list-inside list-none",children:n.map((function(e){return(0,b.jsx)("li",{children:(0,b.jsx)(m.Z.LabelXs,{children:(0,s.t)(["spaces.delete.details",e])})},e)}))})]})]})};function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var _=function(e){var t,r,i=e.show,o=e.space,f=void 0===o?{}:o,m=e.onClose,h=e.onSuccess,v=(0,p.p)(),_=(0,u.nT)().actions.refresh,x=(0,l.useMutation)((function(){return c.rb.destroy({id:f.id})}),{onSuccess:(t=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:(0,n.isFunction)(h)&&h(),m();case 4:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){v.error((0,s.t)("delete_space_failed"))}}),j=x.mutate,w=x.isLoading;return(0,b.jsx)(d.V,{title:(0,s.t)("spaces.delete.title"),isOpen:i,confirmUserPrompt:(0,s.t)("spaces.delete.confirm_prompt"),onClose:m,onCancel:m,onConfirm:j,confirmVariant:"danger",isDisabled:w,confirmText:w?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,b.jsx)(y,{space:f})})},x=function(e){var t=e.space,r=e.onSuccess,o=e.onClose,a=void 0===o?n.noop:o,s=(0,i.dd)();return(0,b.jsx)(_,{show:s.visible,space:t,onClose:function(){a&&a(),s.hide()},onSuccess:r})},j=i.gk.create((function(e){var t=e.space,r=e.onSuccess,n=e.onClose;return(0,b.jsx)(x,{space:t,onSuccess:r,onClose:n})})),w=function(){return(0,i.dd)(j)}},40433:(e,t,r)=>{"use strict";r.d(t,{a:()=>de});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(11049),l=r(67687),c=r(13288),u=r(55133),d=r(21825),p=r(82177),f=r(8246),m=r(85893),b=function(){var e=(0,p.UV)().contentPortalElement;return(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)(f.Z.TitleSm,{weight:"semibold",children:(0,a.t)("space_groups.form.moderators")}),(0,m.jsx)(l.l.Item,{translationRoot:"space_groups.form.edit",name:"moderator_community_member_ids",tooltipText:(0,a.t)("space_groups.form.edit.moderator_community_member_ids_tooltip"),hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,m.jsx)(l.l.CommunityMemberSelect,{name:"moderator_community_member_ids",variant:"tags",excludeAdmins:!0,appendTo:e})})]})},h=function(e){var t=e.formId,r=e.onSubmit,n=e.defaultValues,i=e.loading;return void 0!==i&&i?(0,m.jsx)(c.a,{}):(0,m.jsx)(l.l,{id:t,onSubmit:r,defaultValues:n,className:"mx-1 h-full",children:(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)(d.K,{}),(0,m.jsx)(b,{}),(0,m.jsx)(u.a,{})]})})},v=r(88767),y=r(24185),g=r(34334),_=r(98338),x=r(50732),j=r(69647),w=["moderator_community_member_ids"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var C=r(3159),N=r(54030),I=r(1881),A=r(94353),E=r(81786),D=r(6952),T=r(81830),L=r(45842),M=r(2339),R=r(58706),B=r(34310),U=r(81089),F=r(64687),z=r.n(F);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var Q=function(e){var t=function(){var e,t=(e=z().mark((function e(t){var r,n,i,o,a,s;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceGroupId,n=t.memberId,i=t.isModerator,e.next=3,(0,U.UT)(x.av.communityMember.settings({memberId:n}));case 3:return o=e.sent,a=o.moderating_space_group_ids||[],s=i?[].concat(G(a),[r]):a.filter((function(e){return e!==r})),e.abrupt("return",(0,U.aU)(x.av.communityMember.update({memberId:n}),q(q({},o),{},{moderator_space_group_ids:s})));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){H(o,n,i,a,s,"next",e)}function s(e){H(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,v.useMutation)(t,e)},J=r(18574),K=r(92110),$=r(81571);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee=function(e,t,r){return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},te=function(e){var t,r=e.spaceGroup,i=(0,j.p)(),o=(0,v.useQueryClient)(),s=X((0,n.useState)(!1),2),l=s[0],u=s[1],d=X((0,n.useState)(!1),2),p=d[0],f=d[1],b=X((0,n.useState)(""),2),h=b[0],y=b[1],g=X((0,n.useState)(null),2),_=g[0],w=g[1],O=(0,T.L)(),S=(0,R.j)(),P=(0,B.fd)({filters:{space_groups:r.slug},sort:B.zw.ROLE,query:h}),k=P.isLoading,C=P.hasNextPage,N=P.totalMembers,I=P.fetchNextPage,A=P.members,E=P.queryKey,D=(t={onError:function(e){i.error(e.message)},onSuccess:function(){o.invalidateQueries(E),i.success((0,a.t)("space_groups.form.edit.members.members_removed"))},onSettled:function(){u(!1),f(!1),w(null)}},(0,v.useMutation)((function(e){var t=e.spaceGroupId,r=e.memberId;return(0,U.pC)(x.av.spaceGroups.deleteMember({spaceGroupId:t,memberId:r}))}),t)),F=D.mutate,z=Q({onError:function(e){i.error(e.message)},onSuccess:function(){o.invalidateQueries(E),i.success((0,a.t)("space_groups.form.edit.members.changed_role"))}}).mutate,V=p?(0,a.t)("space_groups.form.edit.members.removing"):(0,a.t)("space_groups.form.edit.members.remove_member");if(k)return(0,m.jsx)(c.a,{});var q=A.map((function(e){var t=e.id,n=e.avatar_url,i=e.name,o=e.email,a=e.roles,s=e.moderating_space_group_ids;return{id:t,avatarUrl:n,name:i,email:o,public_uid:e.public_uid,role:ee(a,r.id,s)}}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex justify-between border-b border-gray-200 px-8 py-3 text-gray-600",children:[(0,m.jsx)(J.h,{onSearch:y,placeholder:(0,a.t)("space_groups.search_members")}),(0,m.jsx)(K.n,{spaceGroupId:r.id})]}),(0,m.jsx)("div",{className:"h-full overflow-auto px-4 py-2",children:(0,m.jsx)(M.r,{searchTerm:h,members:q,dataLength:N,next:I,hasMore:C,onEdit:function(e){var t=e.public_uid;S({publicId:t})},onRemove:function(e){w(e),u(!0)},onAdd:function(){O.show({spaceGroupId:r.id})},onRoleChange:function(e,t){var n=t===$.K.MODERATOR;z({spaceGroupId:r.id,memberId:e,isModerator:n})},variant:"space-group-members",scrollableTarget:"scrollable-content"})}),(0,m.jsx)(L.G,{isOpen:l,onClose:function(){return u(!1)},onConfirm:function(){_&&l&&(f(!0),F({spaceGroupId:r.id,memberId:_}))},disabled:p,confirmText:V})]})};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se="edit-space-group-form",le=["Details","Members"],ce=function(e){var t=e.spaceGroup,r=e.tab,i=void 0===r?le[0]:r,l=oe((0,n.useState)(i),2),c=l[0],u=l[1],d=oe((0,I.k)(!1),2),f=d[0],b=d[1],O=null===t||void 0===t?void 0:t.id,P=(0,_.p7)(O),T=P.data,L=void 0===T?{}:T,M=P.isLoading,R=(0,N.kK)(),B=ne(ne({},t),L),U=(0,s.dd)(),F="Details"===c,z="Members"===c,V=null===B||void 0===B?void 0:B.active_members_count,q=function(e){var t=e.spaceGroup,r=e.onSuccess,n=(0,j.p)(),i=n.success,o=n.error,s=(0,y.k6)(),l=(0,_.p7)(t.id).refetch;return S(S({},(0,v.useMutation)((function(e){var r=e.moderator_community_member_ids,n=k(e,w);return g.iD.update(t.id,{space_group:n,moderator_community_member_ids:r})}),{onSuccess:function(e){i((0,a.t)("space_groups.form.edit.saved_successfully")),l(),r(),s.push(x.Ts.show({spaceGroupSlug:e.slug}))},onError:function(){return o((0,a.t)("space_groups.form.create.save_error"))}})),{},{spaceGroup:t})}({spaceGroup:B,onSuccess:U.hide}),Z=q.mutate,G=q.isLoading;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(p.u_,{isOpen:U.visible,onClose:U.hide,contentPortalId:"edit-space-group-content-portal",title:(0,a.t)("space_groups.form.edit.title"),children:[(0,m.jsx)(p.u_.Overlay,{}),(0,m.jsxs)(p.u_.Content,{size:"xl",children:[(0,m.jsxs)(p.u_.Header,{children:[(0,m.jsx)(p.u_.Title,{size:"md",children:(0,a.t)("space_groups.form.edit.title")}),(0,m.jsx)(p.u_.HeaderActions,{children:(0,m.jsx)(p.u_.CloseButton,{onClick:U.hide})})]}),(0,m.jsx)(p.u_.Body,{id:"scrollable-content",className:o()({"px-0 py-0":z}),children:(0,m.jsxs)(D.O.Group,{selectedIndex:le.indexOf(c),onChange:function(e){return u(le[e])},children:[(0,m.jsxs)(D.O.List,{children:[(0,m.jsx)(D.O,{children:(0,a.t)("space_groups.details")}),(0,m.jsx)(D.O,{children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.t)("space_groups.members")," ",(0,m.jsx)(A.g,{square:!0,inverted:!0,label:String(V)})]})})]}),(0,m.jsxs)(D.O.Panels,{className:"mt-4",children:[(0,m.jsx)(D.O.Panel,{children:(0,m.jsx)(h,{formId:se,onSubmit:Z,defaultValues:B,loading:M})}),(0,m.jsx)(D.O.Panel,{children:(0,m.jsx)(te,{spaceGroup:B})})]})]})}),F&&(0,m.jsxs)(p.u_.Footer,{className:"flex w-full justify-between gap-4 md:gap-0",children:[(0,m.jsx)(E.z,{type:"button",variant:"danger-outline",className:"hidden md:inline-block",onClick:b,children:(0,a.t)("space_groups.delete_space_group")}),(0,m.jsx)(E.z,{type:"button",full:!0,variant:"secondary",className:"inline-block text-center md:hidden",onClick:function(){U.hide()},children:(0,a.t)("cancel")}),(0,m.jsx)(E.z,{full:R,type:"submit",variant:"circle",form:se,disabled:G,children:G?(0,a.t)("space_groups.form.edit.submitting"):(0,a.t)("save_changes")})]})]})]}),(0,m.jsx)(C.x,{spaceGroupId:B.id,show:f,onClose:b,onSuccess:U.hide})]})},ue=s.gk.create((function(e){return(0,m.jsx)(ce,ne({},e))})),de=function(){return(0,s.dd)(ue)}},21653:(e,t,r)=>{"use strict";r.d(t,{S:()=>y});var n=r(64687),i=r.n(n),o=r(86013),a=r(23560),s=r.n(a),l=r(24185),c=r(52228),u=r(11049),d=r(98338),p=r(44032),f=r(8246),m=r(85893);function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(e){var t=e.onClose,r=(0,u.dd)(),n=(0,d.wh)().currentCommunity,a=(0,c.kc)(),h=a.completeWholeOnboarding,v=a.refetchOnboarding,y=(0,l.k6)(),g=function(){var e,o=(e=i().mark((function e(){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null===n||void 0===n?void 0:n.home_page_enabled,e.next=3,h();case 3:return e.next=5,v();case 5:if(s()(t)&&t(),r.hide(),!o){e.next=9;break}return e.abrupt("return",y.push("/home"));case 9:window.location.href="/";case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,m.jsx)(p.c,{isOpen:r.visible,onClose:r.hide,title:(0,o.t)("remove_onboarding_confirmation_modal.title"),cancelText:(0,o.t)("remove_onboarding_confirmation_modal.cancel"),confirmText:(0,o.t)("remove_onboarding_confirmation_modal.confirm"),onConfirm:g,children:(0,m.jsx)(f.Z.BodyMd,{children:(0,o.t)("remove_onboarding_confirmation_modal.description")})})},v=u.gk.create((function(e){var t=e.onClose;return(0,m.jsx)(h,{onClose:t})})),y=function(){return(0,u.dd)(v)}},83343:(e,t,r)=>{"use strict";r.d(t,{x:()=>h});var n=r(64687),i=r.n(n),o=r(67294),a=r(86664),s=r(86013),l=r(88767),c=r(81089),u=r(50732),d=r(69647);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.CardElement,r=e.currency,n=e.onSuccess,p=e.paymentMethodsRegistrableByCurrency,b=(0,a.useStripe)(),h=(0,a.useElements)(),v=(0,d.p)(),y=v.success,g=v.error,_={createSetupIntentMutation:(0,l.useMutation)((function(e){return(0,c.Cu)(u.av.communityMemberPaymentMethod.setupIntent.create(),e)})),createPaymentMethodMutation:(0,l.useMutation)((function(e){return(0,c.Cu)(u.av.communityMemberPaymentMethod.create(),e)}))},x=_.createPaymentMethodMutation,j=_.createSetupIntentMutation,w=m((0,o.useState)(!1),2),O=w[0],S=w[1],P=m((0,o.useState)(!1),2),k=P[0],C=P[1],N=!O||k,I={currency_id:null===r||void 0===r?void 0:r.id},A=function(){var e=f(i().mark((function e(r){var n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.confirmCardSetup(r,{payment_method:{card:h.getElement(t)}});case 2:if(n=e.sent,o=n.setupIntent,!(a=n.error)){e.next=7;break}throw new Error(a.message);case 7:return e.abrupt("return",o.payment_method);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=f(i().mark((function e(t){var r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.currencyId,e.next=3,j.mutateAsync({currency_id:r});case 3:return n=e.sent,e.next=6,A(n.client_secret);case 6:return o=e.sent,e.next=9,x.mutateAsync({currency_id:r,payment_method_processor_id:o});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=r?[{value:r.id,label:r.code.toUpperCase()}]:p.map((function(e){return{value:e.id,label:e.code.toUpperCase()}})),T=function(){var e=f(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,E({currencyId:t.currency_id});case 4:n&&n(),y((0,s.t)("member_profile_modal.billing.subscriptions.alerts.success.payment_created")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g(e.t0.message);case 11:return e.prev=11,C(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return{defaultValues:I,isConfirmingCard:k,disableButton:N,handleOnClick:T,handleOnChangeCard:function(e){e.complete?S(!0):O&&S(!1)},currenciesOptions:D,createPaymentMethod:E}}},47706:(e,t,r)=>{"use strict";r.d(t,{c:()=>Te});var n=r(86664),i=r(94184),o=r.n(i),a=r(82177),s=r(11049),l=r(15763),c=r(21147),u=r(50743),d=r(67294),p=r(85893),f=(0,d.createContext)({});f.displayName="ChangePlanContext";var m=function(e){var t=e.subscription,r=e.isManagingMember,n=e.children,i={subscription:t,isManagingMember:Boolean(r)};return(0,p.jsx)(f.Provider,{value:i,children:n})},b=r(86013),h=(0,d.createContext)({});h.displayName="ChangePlanFormContext";var v=function(e){var t=e.children;return(0,p.jsx)(h.Provider,{value:e,children:t})},y=function(){return(0,d.useContext)(h)},g=r(18605),_=r(27887),x=r(38875),j=function(e){var t=e.title,r=e.subtitle;return(0,p.jsxs)(a.u_.Body,{className:"flex flex-col items-center py-14",children:[(0,p.jsx)("div",{className:"m-8 flex h-16 w-16 justify-center",children:(0,p.jsx)(g.JO,{className:"!h-full !w-full",type:"loader",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})}),(0,p.jsxs)("div",{className:"space-y-4 text-center",children:[(0,p.jsx)("div",{children:(0,p.jsx)(x.P,{children:t})}),(0,p.jsx)("div",{children:(0,p.jsx)(_.Di,{children:r})})]})]})},w=r(81786),O=r(67687),S=r(8246),P=function(e){var t=e.title,r=e.children,n=y(),i=n.dismiss,o=n.canGoBack,s=n.goBack,l=n.formDefaults,c=n.submitLabel,u=n.submitDisabled,d=n.submit;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.u_.Header,{children:[(0,p.jsx)(a.u_.Title,{size:"md",className:"text-center",children:t}),(0,p.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,p.jsx)(a.u_.CloseButton,{onClick:i})}),o&&(0,p.jsx)(a.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,p.jsxs)(w.z,{type:"button",variant:"plain",small:!0,onClick:s,children:[(0,p.jsx)("span",{className:"sr-only",children:(0,b.t)("back")}),(0,p.jsx)(g.JO,{type:"20-chevron-left",size:20})]})})]}),(0,p.jsx)(a.u_.Body,{children:(0,p.jsx)(O.l,{id:"change_plan_form",defaultValues:l,onSubmit:d,className:"flex flex-col",children:r})}),(0,p.jsxs)(a.u_.Footer,{children:[(0,p.jsx)(w.z,{full:!0,large:!0,variant:"circle",form:"change_plan_form",type:"submit",disabled:u,children:c}),(0,p.jsxs)("div",{className:"mt-2 flex flex-row items-center justify-center",children:[(0,p.jsx)(g.JO,{type:"lock-solid",className:"mt-2 !h-6 !w-6"}),(0,p.jsx)(S.Z.BodyXs,{weight:"normal",children:(0,b.t)("member_profile_modal.billing.subscriptions.payment_secure_and_encrypted")})]})]})]})},k=r(60591),C=r(34470),N=r(11119),I=r(21942),A=function(e){var t=e.preview.first_payment,r=t.prorated_credit_description,n=t.prorated_credit_amount,i=t.formatted_prorated_credit_amount;return r&&0!==n?(0,p.jsxs)(N.g,{className:"gap-y-1 border-t",children:[(0,p.jsx)(I.W,{label:(0,b.t)("paywall_checkout.prorated_credit"),labelWeight:"semibold",value:i,valueColor:n<0?"text-green-600":"text-primary",dataTestId:"checkout-form-preview-prorated-credit"}),(0,p.jsx)(S.Z.LabelXs,{children:r})]}):null},E=r(1522),D=r(13288),T=r(57166),L=function(){var e=y(),t=e.CardElement,r=e.handleOnChangeCard;return(0,p.jsxs)("div",{className:"mt-6",children:[(0,p.jsx)(T.T1,{weight:"semibold",children:(0,b.t)("member_profile_modal.billing.subscriptions.add_payment_method.card_details")}),(0,p.jsx)("div",{className:"mt-1 rounded border border-solid border-gray-300 p-3",children:(0,p.jsx)(t,{options:{hidePostalCode:!0},onChange:r})})]})},M=function(e){var t=e.couponCode,r=e.onRemoveCoupon;return(0,p.jsxs)("div",{className:"bg-tertiary flex w-fit flex-row items-center gap-x-2 rounded-lg px-4 py-2",children:[(0,p.jsx)(S.Z.LabelSm,{weight:"semibold",children:t}),(0,p.jsx)(g.JO,{type:"20-close",size:20,className:"cursor-pointer",onClick:r})]})},R=r(48581),B=r(18360);function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){var t,r=e.className,n=e.direction,i=void 0===n?"row":n,a=e.detailsClassName,s=e.label,l=e.labelSize,c=void 0===l?"md":l,u=e.labelWeight,d=e.details,f=e.detailsSize,m=void 0===f?"md":f,b=e.detailsWeight,h=e.detailsColored,v=void 0!==h&&h,y=e.description,g=e.descriptionSize,x=void 0===g?"sm":g,j=e.descriptionColor,w=e.enableCursor,O=void 0!==w&&w,S=e.labelColor,P=void 0===S?"text-base":S,k="md"===c?_.Di:T.T1,C="md"===m?_.Di:T.T1,N="sm"===x?T.T1:B.wN;return(0,p.jsxs)("div",{className:o()((t={},U(t,"flex flex-row justify-between space-x-4","row"===i),U(t,"flex flex-col space-y-2","col"===i),U(t,"cursor-pointer",O),t),r),children:[(0,p.jsxs)("div",{className:"space-y-1",children:[(0,p.jsx)("div",{children:(0,p.jsxs)(k,{weight:u,color:P,children:[s," "]})}),y&&(0,p.jsx)("div",{className:"leading-3 text-gray-500",children:(0,p.jsx)(N,{color:j,children:y})})]}),d&&(0,p.jsx)("div",{className:o()("whitespace-nowrap",a,U({},"text-v2-success",v)),children:(0,p.jsx)(C,{weight:b,color:v?"text-v2-success":void 0,children:d})})]})},z=r(87536);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=function(){var e=y().priceChangePreview,t=function(){var e=y(),t=e.priceChangePreview,r=e.previewMutation,n=e.validateNewCouponHandler,i=V((0,d.useState)(!1),2),o=i[0],a=i[1],s=(0,z.cI)(),l=s.register,c=s.watch,u=s.reset,p=c().new_coupon_code;return{enableCoupon:o,toggleAddCoupon:function(e){e.preventDefault(),a(!o)},handleOnClickCouponValidation:function(e){e.preventDefault(),n({new_paywall_price_id:t.paywall_price_id,new_coupon_code:p})},handleOnClickRemoveCoupon:function(e){e.preventDefault(),u({new_coupon_code:""}),a(!1),r.mutate({new_paywall_price_id:t.paywall_price_id})},reactHook:{register:l}}}(),r=t.enableCoupon,n=t.toggleAddCoupon,i=t.handleOnClickCouponValidation,o=t.handleOnClickRemoveCoupon,a=t.reactHook,s=e.paywall_coupon_code,l=a.register;return r?s?(0,p.jsx)("div",{className:"mb-3",children:(0,p.jsx)(M,{couponCode:s,onRemoveCoupon:o})}):(0,p.jsxs)("div",{className:"mb-3 flex flex-col items-start gap-y-1",children:[(0,p.jsx)(F,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.field_label"),labelSize:"sm",labelWeight:"semibold"}),(0,p.jsxs)("div",{className:"flex w-full flex-row gap-x-1",children:[(0,p.jsx)(R.I,G(G({variant:"text"},l("new_coupon_code")),{},{suffix:(0,p.jsx)(g.JO,{type:"20-close",size:20,className:"cursor-pointer",onClick:n})})),(0,p.jsx)(w.z,{type:"button",onClick:i,variant:"tertiary",children:(0,p.jsx)(S.Z.LabelSm,{weight:"medium",children:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.activate")})})]})]}):(0,p.jsx)(w.z,{type:"button",onClick:n,variant:"link",className:"mb-3 !px-0 no-underline hover:no-underline",small:!0,children:(0,p.jsx)(S.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.add_link")})})},Q=function(e){var t=e.planName,r=e.planPricing;return(0,p.jsxs)("div",{className:"flex flex-row justify-between space-x-2 md:space-x-3",children:[(0,p.jsx)(S.Z.LabelMd,{children:t}),r&&(0,p.jsx)(S.Z.LabelMd,{children:r})]})},J=function(e){var t=e.label,r=e.children;return(0,p.jsxs)("div",{className:"flex flex-col gap-y-2 pb-6 pt-4",children:[(0,p.jsx)(S.Z.LabelSm,{weight:"medium",children:t}),r]})},K={trial_period_days:0},$=r(27823),X=function(){var e,t,r,n,i,o,a=y(),s=a.subscription,l=a.priceChangePreview,c=(0,$.a)(s.paywall_id,K),u=c.data,d=c.isLoading,p=null===u||void 0===u||null===(e=u.active_subscription_prices)||void 0===e?void 0:e.find((function(e){return e.id===s.paywall_price_id})),f=null!==(t=(0,z.qo)({name:"paywall_id"}))&&void 0!==t?t:s.paywall_id,m=(0,$.a)(f,K),b=m.data,h=m.isLoading,v=null===b||void 0===b||null===(r=b.active_subscription_prices)||void 0===r||null===(n=r.filter((function(e){return e.id!==s.paywall_price_id})))||void 0===n?void 0:n.map((function(e){return{key:"".concat(e.id),value:e.id,label:e.short_description,details:"",enableCursor:!0}})),g=null!==(i=l.paywall_price_id)&&void 0!==i?i:s.paywall_price_id;return{isLoadingCurrentPaywall:d,currentPaywall:u,currentPaywallPrice:p,isLoadingSelectedPaywall:h,selectedPaywall:b,selectedPaywallPricingOptions:v,selectedPaywallPrice:null===b||void 0===b||null===(o=b.active_subscription_prices)||void 0===o?void 0:o.find((function(e){return e.id===g}))}},Y=function(){var e=X(),t=e.selectedPaywall,r=e.selectedPaywallPrice;if(!t)return null;var n=(0,b.t)("member_profile_modal.billing.subscriptions.price_chooser_step.selected_plan"),i=t.display_name,o=null===r||void 0===r?void 0:r.short_description;return(0,p.jsx)(J,{label:n,children:(0,p.jsx)(Q,{planName:i,planPricing:o})})},ee=function(){var e=y(),t=e.priceChangePreview,r=e.isInTrial,n=e.shouldAddPaymentMethod,i=e.previewMutation,o=X(),a=o.isLoadingSelectedPaywall,s=o.selectedPaywall;return a?(0,p.jsx)(D.a,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Y,{}),s.coupons_enabled&&(0,p.jsx)(H,{}),i.isLoading?(0,p.jsx)(D.a,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A,{preview:t}),(0,p.jsx)(k.f,{className:"border-t",preview:t}),(0,p.jsx)(C.N,{preview:t}),(0,p.jsx)(E.U,{preview:t}),r&&n&&(0,p.jsx)(L,{})]})]})},te=r(50768),re=function(e){var t=e.className,r=e.name,n=e.warningMessage,i=e.options,a=(0,z.Gc)().control;return(0,p.jsx)(O.l.Item,{className:t,name:r,fullWidth:!0,hideBorder:!0,hideDescription:!0,hideLabel:!0,isFirstChild:!0,rules:{required:n},children:(0,p.jsx)(z.Qr,{name:r,control:a,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,p.jsx)(te.E,{className:"space-y-3",value:r,onChange:n,children:i.map((function(e){return(0,p.jsx)(te.E.Option,{value:e.value,children:function(t){var r=t.checked;return(0,p.jsx)(F,{className:o()("border-primary bg-primary hover:bg-secondary hover:border-secondary rounded border border-solid p-5",{"bg-secondary border-secondary":r}),label:e.label,labelSize:"md",labelWeight:"semibold",details:e.details,detailsSize:"sm",detailsWeight:"medium",description:e.description,descriptionSize:"sm",enableCursor:null===e||void 0===e?void 0:e.enableCursor})}},e.key)}))})}})})},ne=function(){var e=X(),t=e.currentPaywall,r=e.currentPaywallPrice;if(!t||!r)return null;var n=(0,b.t)("member_profile_modal.billing.subscriptions.subscription_summary.current_plan"),i=t.display_name,o=r.short_description;return(0,p.jsx)(J,{label:n,children:(0,p.jsx)(Q,{planName:i,planPricing:o})})},ie=function(){var e,t=y(),r=t.subscription,n=t.isInTrial;if(X().isLoadingCurrentPaywall)return(0,p.jsx)(D.a,{});var i,o=null===(e=r.upgradable_paywalls)||void 0===e?void 0:e.map((function(e){return{key:"".concat(e.id),value:e.id,label:e.display_name,details:e.min_subscription_amount,description:e.subtitle,enableCursor:!0}}));n||(o=null===(i=o)||void 0===i?void 0:i.filter((function(e){return e.id!==r.paywall_id})));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ne,{}),(0,p.jsx)(re,{name:"paywall_id",warningMessage:(0,b.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_plan_chosen"),options:o})]})},oe=function(){var e=X(),t=e.isLoadingSelectedPaywall,r=e.selectedPaywallPricingOptions;return t?(0,p.jsx)(D.a,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Y,{}),(0,p.jsx)(re,{name:"new_paywall_price_id",warningMessage:(0,b.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_cycle_chosen"),options:r})]})},ae="paywall",se="prices",le="summary",ce=r(64687),ue=r.n(ce),de=r(88767),pe=r(81089),fe=r(50732),me=function(e,t){return(0,pe.Cu)(fe.av.communityMemberSubscriptionPriceChanges.preview({subscriptionId:e}),t)},be=function(e,t){return(0,pe.Cu)(fe.av.communityMemberSubscriptionPriceChanges.create({subscriptionId:e}),t)},he=r(69647),ve=r(83343);function ye(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(e){var t=e.subscription,r=e.changePlan,n=e.onSuccess,i=e.CardElement,o=(0,he.p)().error,a=je((0,d.useState)(!1),2),s=a[0],l=a[1],u=je((0,d.useState)(!1),2),p=u[0],f=u[1],m=(0,c.pN)(t),h=(0,c.pN)(t)&&!t.default_payment_method,v=je((0,d.useState)(m&&!r),2),y=v[0],g=v[1],_=je((0,d.useState)(r?ae:se),2),x=_[0],j=_[1],w=je((0,d.useState)({}),2),O=w[0],S=w[1],P=(0,d.useMemo)((function(){return x===ae}),[x]),k=(0,d.useMemo)((function(){return x===se}),[x]),C=(0,d.useMemo)((function(){return x===le}),[x]),N=(0,d.useMemo)((function(){return r&&(k||C)||!r&&C}),[r,k,C]),I=(0,d.useCallback)((function(){C?j(se):k&&r&&j(ae)}),[r,k,C]),A=function(e){S(_e(_e({},O),{},{new_coupon_code_error:e}))},E=(0,de.useMutation)((function(e){return me(t.id,e)}),{onSuccess:function(e){S(_e(_e({},e),{},{new_coupon_code_error:null})),j(le)},onError:function(e){"INVALID_COUPON"==e.errorDetails.code?A(e.message):(console.error(e),o(e.message))}}),D=(0,de.useMutation)((function(e){return be(t.id,_e(_e({},e),{},{new_paywall_price_id:null===O||void 0===O?void 0:O.paywall_price_id,new_coupon_code:null===O||void 0===O?void 0:O.paywall_coupon_code}))}),{onSuccess:function(e){n(e)},onError:function(e){console.error(e),o(e.message)}}),T=(0,ve.x)({CardElement:i,currency:t.currency}).createPaymentMethod,L=function(){var e,r=(e=ue().mark((function e(r){var i;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,T({currencyId:t.currency.id});case 4:return l(!1),e.next=7,D.mutateAsync(r);case 7:i=e.sent,n(i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),o(e.t0.message);case 15:return e.prev=15,l(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ye(o,n,i,a,s,"next",e)}function s(e){ye(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{isPlanChooserActive:P,isPriceChooserStepActive:k,isConfirmationStepActive:C,canGoBack:N,goBack:I,getTitle:function(){return k?(0,b.t)("member_profile_modal.billing.subscriptions.headings.billing_cycle"):m?(0,b.t)("member_profile_modal.billing.subscriptions.headings.upgrade_plan"):P?(0,b.t)("member_profile_modal.billing.subscriptions.headings.change_plan"):(0,b.t)("member_profile_modal.billing.subscriptions.headings.change_subscription")},getButtonLabel:function(){return C?(0,b.t)("member_profile_modal.billing.subscriptions.actions.confirm_change"):(0,b.t)("member_profile_modal.billing.subscriptions.actions.next")},getFormDefaults:function(){return{paywall_id:r?"":t.paywall_id,paywall_price_id:t.paywall_price_id,new_paywall_price_id:""}},priceChangePreview:O,setActiveStep:j,setShouldKeepTrial:g,handleOnChangeCard:function(e){e.complete?f(!0):p&&f(!1)},handleOnAddPaymentAndChangePrice:L,isCardInfoComplete:p,shouldKeepTrial:y,shouldAddPaymentMethod:h,validateNewCouponHandler:function(e){e.new_coupon_code?E.mutate(e):A((0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.errors.required"))},previewMutation:E,changePriceMutation:D,isCreatingPaymentMethod:s,isInTrial:m}},Se=function(e){var t=e.subscription,r=e.changePlan,i=void 0!==r&&r,o=e.onSuccess,a=e.onDismiss,s=Oe({subscription:t,changePlan:i,onSuccess:o,CardElement:n.CardElement}),l=s.isPlanChooserActive,c=s.isPriceChooserStepActive,u=s.isConfirmationStepActive,d=s.validateNewCouponHandler,f=s.previewMutation,m=s.changePriceMutation,h=s.canGoBack,y=s.goBack,g=s.getTitle,_=s.getButtonLabel,x=s.getFormDefaults,w=s.setActiveStep,O=s.setShouldKeepTrial,S=s.priceChangePreview,k=s.shouldKeepTrial,C=s.shouldAddPaymentMethod,N=s.isInTrial,I=s.isCardInfoComplete,A=s.isCreatingPaymentMethod,E=s.handleOnAddPaymentAndChangePrice,D=s.handleOnChangeCard;if(m.isLoading)return(0,p.jsx)(j,{title:(0,b.t)("member_profile_modal.billing.subscriptions.change_plan_form.hang_tight"),subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.change_plan_form.wait_a_few_seconds")});return(0,p.jsx)(v,{dismiss:a,canGoBack:h,goBack:y,formDefaults:x(),submit:function(e){if(l)w(se),O(N&&t.paywall_id==e.paywall_id);else{if(c)return f.mutate({new_paywall_price_id:e.new_paywall_price_id});if(u)return N&&C?E({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:S.new_coupon_code}):m.mutate({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:S.new_coupon_code})}},submitLabel:_(),submitDisabled:c&&f.isLoading||u&&f.isLoading||u&&C&&!I||u&&C&&A,priceChangePreview:S,subscription:t,shouldKeepTrial:k,CardElement:n.CardElement,isInTrial:N,shouldAddPaymentMethod:C,handleOnChangeCard:D,previewMutation:f,validateNewCouponHandler:d,changePlan:i,children:(0,p.jsxs)(P,{title:g(),children:[l&&(0,p.jsx)(ie,{}),c&&(0,p.jsx)(oe,{}),u&&(0,p.jsx)(ee,{})]})})},Pe=function(e){var t=e.updatedSubscription,r=e.onDone,n=(0,d.useContext)(f),i=n.subscription,o=n.isManagingMember,s=(0,$.a)(i.paywall_id,K),l=(0,$.a)(t.paywall_id,K);if(s.isLoading||l.isLoading)return(0,p.jsx)(D.a,{center:!0});if(s.isError||l.isError)return null;var c=s.data,u=c.all_subscription_prices.find((function(e){return e.id===i.paywall_price_id})),m="".concat(c.display_name," (").concat(u.short_description,")"),h=l.data,v=h.all_subscription_prices.find((function(e){return e.id===t.paywall_price_id})),y=h.display_name,j="".concat(y," (").concat(v.short_description,")"),O=o?{subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.subtitle",{community_member_name:i.community_member.name}),description:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.description",{community_member_name:i.community_member.name,old_plan:m,new_plan:j}),actionButton:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.action_button")}:{subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.subtitle"),description:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.description",{old_plan:m,new_plan:j}),actionButton:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.action_button")};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.u_.Body,{className:"flex flex-col items-center",children:[(0,p.jsx)("div",{className:"bg-v2-success m-8 flex h-16 w-16 justify-center rounded-full",children:(0,p.jsx)(g.JO,{type:"check-solid",viewBox:"0 0 30 22"})}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(_.Di,{weight:"semibold",children:O.subtitle}),(0,p.jsxs)("div",{className:"mb-4 mt-2 flex flex-col",children:[(0,p.jsx)(x.P,{children:y}),(0,p.jsx)(T.T1,{children:v.short_description})]}),(0,p.jsx)(_.Di,{children:O.description})]})]}),(0,p.jsx)(a.u_.Footer,{children:(0,p.jsx)(w.z,{variant:"circle",full:!0,large:!0,onClick:function(){r()},children:O.actionButton})})]})};function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=function(e){var t=e.subscription,r=e.refetchSubscriptions,n=e.changePlan,i=void 0!==n&&n,l=e.isManagingMember,u=void 0!==l&&l,f=function(e){var t=e.refetchSubscriptions,r=(0,s.dd)(),n=ke((0,d.useState)(null),2),i=n[0],o=n[1];return{onClose:function(){r.hide(),r.remove()},updatedSubscription:i,handleSuccess:(0,d.useCallback)((function(e){o(e),t()}),[o,t]),modal:r}}({refetchSubscriptions:r}),b=f.onClose,h=f.updatedSubscription,v=f.handleSuccess,y=f.modal;return(0,p.jsxs)(a.u_,{isOpen:y.visible,onClose:b,children:[(0,p.jsx)(a.u_.Overlay,{}),(0,p.jsx)(a.u_.Content,{size:"md",className:o()({"sm:max-h-[90vh]":(0,c.pN)(t)}),children:(0,p.jsxs)(m,{subscription:t,isManagingMember:u,children:[!h&&(0,p.jsx)(Se,{changePlan:i,onDismiss:b,onSuccess:v,subscription:t}),h&&(0,p.jsx)(Pe,{onDone:b,updatedSubscription:h})]})})]})},De=s.gk.create((function(e){var t=(0,u.C)().stripePromise;return(0,p.jsx)(n.Elements,{stripe:t,children:(0,p.jsx)(Ee,Ie({},e))})})),Te=function(){return(0,l.j)(De,(function(e){var t,r=e.subscription;return{id:r.community_member_id,policies:{requires_billing_info:null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.requires_billing_info}}}))}},27823:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var n=r(96486),i=r(88767),o=r(74543),a=r(50732),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",s={};return t&&((0,n.isFinite)(t.trial_period_days)&&(s["presenter_options[trial_period_days]"]=t.trial_period_days),r=(0,a.UK)(s)),(0,i.useQuery)({queryKey:["paywall-show",e,r],queryFn:function(){return o.i.getPaywall(e,s)}})}},404:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var n=r(48856),i=r(47807),o=r(50732),a=r(85893),s=function(){var e=(0,i.c)({filter:"mine",per_page:1}).chats,t=(void 0===e?[]:e)[0];return t?(0,a.jsx)(n.z,{chat:t,path:(0,o.Gr)({id:t.id}),isUnread:t.has_unread_messages_for_member,isBotType:!0,shouldHightlightChat:!0},t.id):null}},14886:(e,t,r)=>{"use strict";r.d(t,{x:()=>u});var n=r(58533),i=r(48856),o=r(47807),a=r(50732),s=r(13288),l=r(98885),c=r(85893),u=function(){var e=(0,o.c)({filter:"mine",per_page:20}),t=e.chats,r=void 0===t?[]:t,u=e.isChatsLoading,d=e.hasNextPage,p=e.fetchNextPage;return u?(0,c.jsx)(s.a,{center:!0}):0===r.length?(0,c.jsx)(l.e,{}):(0,c.jsx)(n.Z,{scrollThreshold:.8,next:p,hasMore:Boolean(d),dataLength:r.length,scrollableTarget:"scrollable-dms-div",className:"h-full overflow-auto",loader:(0,c.jsx)(s.a,{center:!0}),children:r.map((function(e){return(0,c.jsx)(i.z,{chat:e,path:(0,a.Gr)({id:e.id.toString()}),isUnread:e.has_unread_messages_for_member,isBotType:!0},e.id)}))})}},18802:(e,t,r)=>{"use strict";r.d(t,{q:()=>p});var n=r(25680),i=r(67142),o=r(94184),a=r.n(o),s=r(36589),l=r(85893),c=function(e){var t=e.user1,r=e.user2,n=e.className,o=void 0===n?"":n,c=(0,s.I)().isV3Enabled,u=[{name:(null===t||void 0===t?void 0:t.name)||"",src:(null===t||void 0===t?void 0:t.avatar_url)||""},{name:(null===r||void 0===r?void 0:r.name)||"",src:(null===r||void 0===r?void 0:r.avatar_url)||""}];return(0,l.jsx)("div",{className:a()("border-tertiary max-h-10",o),children:(0,l.jsx)(i.Lt,{users:u,isFullRounded:c})})};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t=e.isDirect,r=e.otherParticipants;if(t){var i=u(r,1)[0]||{},o=i.avatar_url,a=i.name,s=i.status;return(0,l.jsx)("div",{className:"mr-1",children:(0,l.jsx)(n.g,{src:o,name:a,status:s,size:"9"})})}return(0,l.jsx)(c,{user1:r[0],user2:r[1]})}},98885:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var n=r(86013),i=r(8246),o=r(85893),a=function(){return(0,o.jsx)("div",{className:"flex h-full w-[320px] flex-col items-center justify-start pt-12",children:(0,o.jsx)(i.Z.LabelSm,{children:(0,n.t)("messaging.no_messages")})})}},20365:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(67294),i=r(98338),o=r(35102),a=r(34914),s=function(e){var t=(0,i.wh)().currentCommunityMember,r=null===t||void 0===t?void 0:t.id,s=(0,o.Dk)(),l=s.setCurrentChatId,c=s.appendMessage,u=s.updateMessage,d=s.destroyMessage,p=s.appendChat,f=s.updateChat,m=s.destroyChat;return(0,n.useEffect)((function(){e&&l(e)}),[e,l]),(0,a.s)({channel:"CommunityInbox::MemberChannel",community_member_id:r,canCreateConnection:!!r,onMessageReceive:function(e){switch(e.event){case"createMessage":c(e.json_message,"member");break;case"updateMessage":u(e.json_message);break;case"destroyMessage":d(e.json_message.id);break;case"createChat":p(e.json_message);break;case"updateChat":f(e.json_message);break;case"destroyChat":m(e.json_message.id)}}},[r])}},45238:(e,t,r)=>{"use strict";r.d(t,{m:()=>k});var n=r(86013),i=r(11049),o=r(67687),a=r(55133),s=r(21825),l=r(85893),c={},u=function(e){var t=e.onSubmit,r=e.formId;return(0,l.jsx)(o.l,{id:r,onSubmit:t,defaultValues:c,className:"h-full",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(s.K,{}),(0,l.jsx)(a.a,{})]})})},d=r(88767),p=r(24185),f=r(34334),m=r(98338),b=r(50732),h=r(69647);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=r(81786),x=r(82177);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O="new-space-group-form",S=function(e){var t=e.position,r=(0,i.dd)(),o=function(e){var t=e.position,r=e.onSuccess,i=(0,p.k6)(),o=(0,h.p)(),a=o.success,s=o.error,l=(0,m.e2)().actions;return(0,d.useMutation)((function(e){return f.iD.create({space_group:y(y({},e),{},{position:t})})}),{onSuccess:function(e){a((0,n.t)("space_groups.form.create.saved_successfully")),l.refresh(),r(),i.push(b.Ts.show({spaceGroupSlug:e.slug}))},onError:function(e){return s(e.errorDetails||(0,n.t)("space_groups.form.create.save_error"))}})}({position:t,onSuccess:r.hide}),a=o.mutate,s=o.isLoading;return(0,l.jsxs)(x.u_,{title:(0,n.t)("space_groups.form.create.title"),isOpen:r.visible,onClose:r.hide,children:[(0,l.jsx)(x.u_.Overlay,{}),(0,l.jsxs)(x.u_.Content,{size:"md",children:[(0,l.jsxs)(x.u_.Header,{className:"!px-6 md:!px-8",children:[(0,l.jsx)(x.u_.Title,{size:"md",children:(0,n.t)("space_groups.form.create.title")}),(0,l.jsx)(x.u_.HeaderActions,{children:(0,l.jsx)(x.u_.CloseButton,{onClick:r.hide})})]}),(0,l.jsx)(x.u_.Body,{className:"!px-6 md:!px-8",children:(0,l.jsx)(u,{formId:O,onSubmit:a})}),(0,l.jsx)(x.u_.Footer,{className:"flex justify-end",children:(0,l.jsx)(_.z,{type:"submit",variant:"circle",form:O,disabled:s,full:!0,large:!0,children:s?(0,n.t)("space_groups.form.create.submitting"):(0,n.t)("space_groups.form.create.submit")})})]})]})},P=i.gk.create((function(e){return(0,l.jsx)(S,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),k=function(){return(0,i.dd)(P)}},73826:(e,t,r)=>{"use strict";r.d(t,{D:()=>Pt});var n=r(94184),i=r.n(n),o=r(86013),a=r(67294),s=r(50308),l=r.n(s),c=r(69293),u=r(11049),d=r(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=(0,a.createContext)({filters:{},setFilters:function(){},resetFilters:function(){}}),b=function(e){var t=e.children,r=p((0,a.useState)({}),2),n=r[0],i=r[1];return(0,d.jsx)(m.Provider,{value:{filters:n,setFilters:i,resetFilters:function(){return i({})}},children:t})},h=function(){return(0,a.useContext)(m)};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}m.displayName="FilterContext";var j={Latest:"latest",Oldest:"oldest",Popular:"popular",Likes:"likes",Alphabetical:"alphabetical",NewActivity:"new_activity",Relevance:"relevance"},w=(0,a.createContext)({sort:{posts:j.Relevance,comments:j.Relevance,events:j.Relevance,lessons:j.Relevance,members:j.Relevance},setSort:function(){}});w.displayName="SortContext";var O=function(e){var t=e.children,r=_((0,a.useState)({posts:j.Relevance,comments:j.Relevance,events:j.Relevance,lessons:j.Relevance,members:j.Relevance}),2),n=r[0],i=r[1];return(0,d.jsx)(w.Provider,{value:{sort:n,setSort:function(e,t){i((function(r){return y(y({},r),{},g({},e,t))}))}},children:t})},S=function(){return(0,a.useContext)(w)},P=r(96486),k=r(24185),C=function(e){var t=e.children;return(0,d.jsx)("div",{className:"bg-primary m-auto text-center",children:t})},N=r(18605),I=r(8246),A=function(){return(0,d.jsx)(C,{children:(0,d.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-4 p-8 pb-14","data-testid":"empty-search",children:[(0,d.jsx)(N.JO,{type:"24-search-v2",className:"text-default !h-6 !w-6",size:24}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)(I.Z.TitleSm,{weight:"semibold",children:(0,o.t)("search_v2.search_community")}),(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,o.t)("search_v2.search_community_description")})]})]})})},E=function(e){var t=e.type;return(0,d.jsx)(C,{children:(0,d.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-2 p-8 pb-14 pt-20","data-testid":"no-results-found",children:[(0,d.jsx)(I.Z.TitleSm,{weight:"semibold",children:(0,o.t)("search_v2.empty_search_by_type.".concat(t))}),(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,o.t)("search_v2.empty_search_description")})]})})},D=r(81786),T=function(e){var t=e.isFixed,r=e.onChange,n=e.searchValue,s=e.onKeydown,l=e.isLoading,c=e.onClickCancel,u=void 0===c?P.noop:c,p=e.shouldShowClearButton,f=p&&n.length>0,m=!p||0===n.length,b=lt(),h=b.visible,v=b.hide,y=(0,a.useRef)(null);return(0,a.useEffect)((function(){y.current&&y.current.focus()}),[]),(0,d.jsxs)("div",{className:i()("bg-primary isolate z-10 flex w-full items-center justify-between gap-4 rounded-t-md",{"border-primary sticky top-0 border-b px-4 py-4 md:static md:top-auto md:px-0 md:pl-6 md:pr-1":t}),children:[(0,d.jsxs)("div",{className:"bg-secondary sm:bg-primary mr-0 flex w-full flex-1 items-center gap-3 overflow-hidden rounded-md p-3 sm:rounded-none md:p-0",children:[l?(0,d.jsx)(N.JO,{type:"loader",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}):(0,d.jsx)(N.JO,{type:"search-v2",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}),(0,d.jsx)("input",{ref:y,className:"text-darkest sm:bg-primary placeholder:text-light w-full rounded bg-transparent text-base outline-none placeholder:opacity-100 sm:rounded-none",placeholder:(0,o.t)("search_here"),"data-name":"v2-search","data-testid":"v2-search","aria-autocomplete":"list",value:n,onChange:function(e){return r(e.target.value)},onKeyDown:s})]}),m&&(0,d.jsx)(D.z,{variant:"text",className:"inline-flex md:hidden",onClick:function(){(0,P.isFunction)(u)&&u(),h&&v()},children:(0,o.t)("cancel")}),f&&(0,d.jsx)(D.z,{variant:"text",onClick:u,children:(0,o.t)("search_v2.clear_search")})]})},L=r(4404),M=r(64420),R=function(){return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"mb-4 pt-6 md:pt-10",children:(0,d.jsx)(L.RN,{children:(0,d.jsx)(L.X2,{lg:!0})})}),(0,d.jsx)(M.x,{})]})},B=function(e){var t=e.type,r=e.numberOfRecords,n=void 0===r?1:r;return(0,d.jsx)("div",{className:"mt-6 flex flex-col gap-8",children:Array.from({length:n}).map((function(e,r){switch(t){case"posts":return(0,d.jsxs)("div",{children:[(0,d.jsxs)(L.mw,{lg:!0,children:[(0,d.jsx)(L.qE,{sm:!0}),(0,d.jsx)(L.RN,{children:(0,d.jsx)(L.X2,{sm:!0})})]}),(0,d.jsx)("div",{className:"mt-2.5",children:(0,d.jsxs)(L.RN,{md:!0,children:[(0,d.jsx)(L.X2,{md:!0,full:!0}),(0,d.jsx)(L.X2,{md:!0,full:!0}),(0,d.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"lessons":return(0,d.jsxs)("div",{children:[(0,d.jsxs)(L.mw,{sm:!0,children:[(0,d.jsx)(L.qE,{sm:!0}),(0,d.jsx)(L.RN,{children:(0,d.jsx)(L.X2,{sm:!0})})]}),(0,d.jsx)("div",{className:"mt-2.5",children:(0,d.jsxs)(L.RN,{md:!0,children:[(0,d.jsx)(L.X2,{md:!0,full:!0}),(0,d.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"comments":return(0,d.jsxs)("div",{className:"flex items-center gap-8",children:[(0,d.jsxs)(L.mw,{sm:!0,children:[(0,d.jsx)(L.qE,{sm:!0}),(0,d.jsxs)(L.RN,{children:[(0,d.jsx)(L.X2,{sm:!0,full:!0}),(0,d.jsx)(L.X2,{sm:!0})]})]}),(0,d.jsx)("div",{className:"mt-2.5",children:(0,d.jsxs)(L.RN,{md:!0,children:[(0,d.jsx)(L.X2,{md:!0,full:!0}),(0,d.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"members":return(0,d.jsxs)(L.mw,{lg:!0,children:[(0,d.jsx)(L.qE,{}),(0,d.jsxs)(L.RN,{children:[(0,d.jsx)(L.X2,{sm:!0}),(0,d.jsx)(L.X2,{sm:!0})]})]},r)}return null}))})};function U(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=function(){var e=F((0,a.useState)([]),2),t=e[0],r=e[1];(0,a.useEffect)((function(){try{var e=localStorage.getItem("recentSearches");e&&r(JSON.parse(e))}catch(t){console.error("Error parsing recent searches from local storage",t)}}),[]);return{recentSearches:t,addRecentSearch:function(e){e.query&&r((function(t){var r=t.filter((function(t){return t.query!==e.query})),n=[e].concat(U(r)).slice(0,10);try{localStorage.setItem("recentSearches",JSON.stringify(n))}catch(i){console.error("Error saving recent searches to local storage",i)}return n}))},removeRecentSearch:function(e){r((function(t){var r=t.filter((function(t){return t.query!==e}));try{localStorage.setItem("recentSearches",JSON.stringify(r))}catch(n){console.error("Error saving recent searches to local storage",n)}return r}))}}},Z=function(e){var t=e.type;return{post:"/c/".concat(e.space_slug,"/").concat(e.slug),community_member:"/u/".concat(e.public_uid),comment:"/c/".concat(e.space_slug,"/").concat(e.post_slug,"#comment_wrapper_").concat(e.id),space:"/c/".concat(e.slug)}[t]},G=r(88767),W=r(81089),H=r(50732),Q=r(52255);function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t=e.onPressEnter,r=e.scrollToElement,n=e.type,i=S().sort,o=h().filters,s=J((0,a.useState)([]),2),l=s[0],c=s[1],u=J((0,a.useState)(""),2),d=u[0],p=u[1],f=(0,Q.c)(d,300),m=J((0,a.useState)(!1),2),b=m[0],v=m[1],y=J((0,a.useState)(0),2),g=y[0],_=y[1],x=Object.entries(o).reduce((function(e,t){var r=J(t,2),n=r[0],i=r[1];return i&&i.length&&(e[n]=i),e}),{}),j=["search-results",f,n,i[n],x],w=(0,G.useInfiniteQuery)(j,(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,W.UT)(H.av.searchV2.advanced.index({params:{query:f,per_page:20,page:t,type:n,order:i[n],filters:x}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},enabled:!!f,refetchOnWindowFocus:!1}),O=w.data,k=w.isLoading,C=w.error,N=w.fetchNextPage,I=w.hasNextPage,A=(0,G.useQuery)(["search-count",f],(function(){return(0,W.UT)(H.av.searchV2.count.index({params:{query:f}}))}),{refetchOnWindowFocus:!1,enabled:Boolean(f.length)&&"general"!==n}),E=A.data,D=A.isLoading;(0,a.useEffect)((function(){if(null!==O&&void 0!==O&&O.pages&&f){var e=(0,P.uniqBy)((0,P.flatten)(O.pages.map((function(e){return e.records}))),"id");c(e),_(0),v(!(0!==e.length||!f))}}),[O,f]);var T=(0,a.useCallback)((function(){p(""),_(0),L()}),[]),L=function(){c([])};return{isLoading:k,hasNoResults:b,error:C,setSearchValue:p,searchValue:d,results:l,selectedResultIndex:g,resetSearch:T,onKeydown:function(e){switch(e.key){case"Escape":l.length>0&&(T(),e.stopPropagation(),e.preventDefault());break;case"ArrowDown":_((function(e){if(e<l.length){var t=e+1;return r(t),t}return e})),e.preventDefault();break;case"ArrowUp":_((function(e){if(e>0){var t=e-1;return r(t),t}return e})),e.preventDefault();break;case"Enter":null===t||void 0===t||t(e,g)}},isLoadingCount:D,onMouseOver:function(e){var t=e.currentTarget.getAttribute("aria-posinset");_(Number(t))},onFocus:function(e){var t=e.currentTarget.getAttribute("aria-posinset");_(Number(t))},onMouseOut:function(e){e.currentTarget.getAttribute("aria-posinset")===g&&_(-1)},hasNextPage:I,fetchNextPage:N,countData:E}},X=r(95287);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=function(e){var t=e.onClose,r=e.type,n=void 0===r?"general":r,i=e.onSearchInCommunity,o=void 0===i?P.noop:i,s=(0,k.k6)(),l=(0,a.useRef)(null),c=(0,a.useRef)(null),u=$({onPressEnter:function(e){if(0===v)o();else{var t=f[v-1],r=Z(t);if((0,X.n2)(e))return window.open(r);s.push(r),C(t)}},scrollToElement:function(e){-1!==e&&function(e){var t=e.containerEl,r=e.itemSelector,n=e.scrollIntoViewOptions,i=void 0===n?{}:n,o=e.intersectionObserverOptions,a=ee({root:t,rootMargin:"0px",threshold:1},void 0===o?{}:o),s=t.querySelector(r),l=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting||s.scrollIntoView(ee({behavior:"smooth",block:"nearest"},i)),l.unobserve(s)}))}),a);s&&l.observe(s)}({containerEl:c.current,itemSelector:'[aria-posinset="'.concat(String(e),'"]')})},type:n}),d=u.searchValue,p=u.setSearchValue,f=u.results,m=u.isLoading,b=u.hasNoResults,h=u.onKeydown,v=u.selectedResultIndex,y=u.resetSearch,g=u.onMouseOver,_=u.onFocus,x=u.fetchNextPage,j=u.hasNextPage,w=u.onMouseOut,O=u.countData,S=u.isLoadingCount,C=function(e){(0,X.n2)(e)||(y(),t())};return(0,a.useEffect)((function(){!d&&l.current&&y()}),[d,l,y]),{searchValue:d,results:f,isLoading:m||S,isLoadingSearch:m,isLoadingCount:S,hasNoResults:b,selectedResultIndex:v,searchInputRef:l,resultsContainerRef:c,setSearchValue:p,onKeydown:h,fetchNextPage:x,hasNextPage:j,resetSearch:y,onNavigateToResult:C,onMouseOver:g,onFocus:_,onMouseOut:w,countData:O}},ne=r(70425);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=function(e){var t=e.isInitialOpen,r=e.name,n=void 0===r?"name":r,i=h(),a=i.filters,s=i.setFilters;return(0,d.jsx)(ne.wn,{chip:(0,o.t)("search_v2.filters.".concat(n)),title:(0,o.t)("search_v2.filters.".concat(n)),selectedText:null===a||void 0===a?void 0:a[n],isInitialOpen:t,onApply:function(e){s(oe(oe({},a),{},ae({},n,e)))},shouldShowRemoveButton:!0,children:(0,d.jsx)(ne.xo,{name:n,placeholder:(0,o.t)("search_v2.filters.name")})})},le=r(36044),ce=r(98338),ue=r(90789),de=r(13288);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=function(e){var t,r=e.spaceType,n=void 0===r?"posts":r,i=h(),a=i.filters,s=i.setFilters,l=(0,ce.nT)().helpers,c=(0,le.S)({spaces:l.spaceWithViewContentAccess().filter((function(e){switch(n){case"posts":return(0,ue.H3)(e);case"courses":return(0,ue.EG)(e);case"events":return(0,ue.V5)(e);default:return(0,P.stubTrue)()}})),valueKey:"id"});return(0,d.jsx)(ne.wn,{chip:(0,o.t)("search_v2.filters.space"),title:(0,o.t)("search_v2.filters.space"),selectedText:null!==a&&void 0!==a&&a.space_ids?(0,o.t)("search_v2.filters.n_spaces",{count:(null===a||void 0===a||null===(t=a.space_ids)||void 0===t?void 0:t.length)||0}):"",onApply:function(e){s(fe(fe({},a),{},{space_ids:((null===e||void 0===e?void 0:e.value)||[]).length?null===e||void 0===e?void 0:e.value:null}))},shouldShowRemoveButton:!(null===a||void 0===a||!a.space_ids),children:l.isDataLoading()?(0,d.jsx)(de.a,{}):(0,d.jsx)(ne.Bi,{options:c,className:"w-full",param:{id:"spaces",key:"spaces",value:(null===a||void 0===a?void 0:a.space_ids)||[]},legend:(0,o.t)("search_v2.filters.space"),hasSearch:!0,searchProps:{placeholder:(0,o.t)("search_v2.filters.search_spaces")}})})},he=r(21756);function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=r(47080);function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=r(67687);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){var t,r=e.chip,n=e.title,i=e.name,a=e.options,s=e.close,l=h(),c=l.filters,u=l.setFilters,p=function(e){u(Pe(Pe({},c),{},ke({},i,e)))};return(0,d.jsx)(ne.wn,{chip:r,title:n,selectedText:null===(t=a.find((function(e){return e.value===c[i]})))||void 0===t?void 0:t.label,onApply:p,shouldShowRemoveButton:!0,children:(0,d.jsxs)(Oe.l,{defaultValues:ke({},i,c[i]),className:"p-4",onSubmit:function(e){p(e[i]),null===s||void 0===s||s()},children:[(0,d.jsx)(Oe.l.RadioGroup,{variant:"radio",name:i,options:a}),(0,d.jsx)(D.z,{className:"mt-4",variant:"primary",type:"submit",full:!0,children:(0,o.t)("filters.apply")})]})})},Ne=["name","component"];function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Te=(0,o.t)("search_v2.filters.space"),Le={posts:[{name:Te,component:be,spaceType:"posts"},{name:"author_name",component:se},{name:"topics",component:function(){var e,t=h(),r=t.filters,n=t.setFilters,i=(0,ce.wh)().currentCommunityMember,a=(0,G.useQuery)({queryKey:[_e.Jl,"communityMember",null===i||void 0===i?void 0:i.id],enabled:!!i,queryFn:function(){return(0,W.UT)(H.av.topics.communityMemberTopics({}))}}).data;return a&&a.records&&i?(0,d.jsx)(ne.wn,{chip:(0,o.t)("search_v2.filters.topic"),title:(0,o.t)("search_v2.filters.topic"),selectedText:null!==r&&void 0!==r&&r.topic_ids?(0,o.t)("search_v2.filters.n_topics",{count:(null===r||void 0===r||null===(e=r.topic_ids)||void 0===e?void 0:e.length)||0}):"",onApply:function(e){n(je(je({},r),{},{topic_ids:null===e||void 0===e?void 0:e.value}))},shouldShowRemoveButton:!(null===r||void 0===r||!r.topic_ids),children:(0,d.jsx)(ne.Bi,{options:a.records.map((function(e){return{label:e.name,value:e.id}})),className:"w-full",param:{id:"topics",key:"topics",value:(null===r||void 0===r?void 0:r.topic_ids)||[]},legend:(0,o.t)("search_v2.filters.topic"),hasSearch:!0,searchProps:{placeholder:(0,o.t)("search_v2.filters.search_topics")}})}):null}}],comments:[{name:Te,component:be,spaceType:"posts"},{name:"author_name",component:se}],lessons:[{name:Te,component:be,spaceType:"courses"}],events:[{name:Te,component:be,spaceType:"events"},{name:"event_status",component:function(){return(0,d.jsx)(Ce,{name:"status",chip:(0,o.t)("search_v2.filters.event_status.title"),title:(0,o.t)("search_v2.filters.event_status.title"),options:[{value:"past",label:(0,o.t)("search_v2.filters.event_status.past")},{value:"upcoming",label:(0,o.t)("search_v2.filters.event_status.upcoming")}]})}}],members:[{name:"tags",component:function(){var e,t=h(),r=t.filters,n=t.setFilters,i=(0,he.Y)(),a=i.isLoading,s=i.memberTags;return a||!s.length?null:(0,d.jsx)(ne.wn,{chip:(0,o.t)("search_v2.filters.tag"),title:(0,o.t)("search_v2.filters.tag"),selectedText:null!==r&&void 0!==r&&r.member_tag_ids?(0,o.t)("search_v2.filters.n_tags",{count:(null===r||void 0===r||null===(e=r.member_tag_ids)||void 0===e?void 0:e.length)||0}):"",onApply:function(e){n(ye(ye({},r),{},{member_tag_ids:((null===e||void 0===e?void 0:e.value)||[]).length?null===e||void 0===e?void 0:e.value:null}))},shouldShowRemoveButton:!(null===r||void 0===r||!r.member_tag_ids),children:(0,d.jsx)(ne.Bi,{options:s,className:"w-full",param:{id:"member_tags",key:"member_tags",value:(null===r||void 0===r?void 0:r.member_tag_ids)||[]},legend:(0,o.t)("search_v2.filters.tag"),hasSearch:!0,searchProps:{placeholder:(0,o.t)("search_v2.filters.search_tags")}})})}}]},Me=function(e){var t=e.type;return(Le[t]||[]).map((function(e){var t=e.name,r=e.component,n=De(e,Ne);return(0,d.jsx)("div",{className:"py-1",children:(0,d.jsx)(r,Ae({name:t},n))},t)}))},Re=r(27025),Be={posts:[j.Relevance,j.Latest,j.Oldest,j.Popular,j.Likes,j.Alphabetical,j.NewActivity],comments:[j.Relevance,j.Latest,j.Oldest,j.Likes,j.Alphabetical],events:[j.Relevance,j.Latest,j.Oldest,j.Popular,j.Likes,j.Alphabetical],lessons:[j.Relevance,j.Latest,j.Oldest,j.Alphabetical],members:[j.Relevance,j.Latest,j.Oldest,j.Alphabetical]},Ue=function(e){var t=e.type,r=S(),n=r.sort,i=r.setSort,a=Be[t];return a?(0,d.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,d.jsx)(Re.Lt,{options:a.map((function(e){return{value:e,label:(0,o.t)("sorting_options.".concat(e))}})),activeOptionValue:n[t],onChange:function(e){return r=e,Object.values(j).includes(r)&&i(t,e);var r}})}):null},Fe=r(55531),ze=r(6952),Ve=r(58533),qe=function(){return(0,d.jsx)("div",{className:"border-primary h-px border-b"})},Ze=r(40160),Ge=r(10161),We=r(57954),He=r(64422),Qe=function(e){var t=e.name,r=e.avatarUrl,n=e.postName,i=e.createdAt,a=e.userImageSize,s=void 0===a?"6":a;return(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{children:(0,d.jsx)(He.s,{src:r,name:t,size:s})}),(0,d.jsxs)("div",{className:"w-[90%]",children:[(0,d.jsxs)("div",{className:"text-selector-active truncate",children:[(0,d.jsx)(I.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:t})," ",(0,d.jsx)(I.Z.LabelSm,{leading:"leading-3",color:"text-selector-active",children:(0,o.t)("search_v2.commented_on")})," ",(0,d.jsx)(I.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:n})]}),(0,d.jsx)("div",{className:"leading-3",children:(0,d.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:(0,We.p6)(i)})})]})]})},Je=r(51215),Ke=r(38503),$e=function(e){var t=e.originalText,r=e.highlightedText,n=(0,a.useMemo)((function(){if(!t)return"";var e,n,i,o=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a=function(e){if(!e)return[];return Array.from(e.matchAll(/<mark>(.*?)<\/mark>/g),(function(e){return e[1]}))}(r);return e=t,n=a.map(o),i=new RegExp("(".concat(n.join("|"),")"),"gi"),e.replace(i,"<mark>$1</mark>")}),[t,r]);return(0,d.jsx)(Ge.w,{content:n})},Xe=r(9951),Ye=Object.assign({},{Comment:function(e){var t=e.item,r=Z(t),n=t.highlighted_body||t.body;return(0,d.jsx)(Ze.OL,{to:r,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"comment-result",children:(0,d.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,d.jsx)(Qe,{name:t.user_name,postName:t.post_name,createdAt:t.created_at,avatarUrl:t.user_avatar_url,userImageSize:"8"}),(0,d.jsx)("div",{className:"[&_mark]:!bg-search-yellow line-clamp-4",children:(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,d.jsx)(Ge.w,{content:n})})})]})})},Event:function(e){var t=e.item,r=(0,H.LM)({spaceSlug:t.space_slug,slug:t.slug}),n=(0,Ke.TC)().isDarkAppearance?(0,Je.aP)("dark-mode-cover-thumbnail-2x.png"):(0,Je.aP)("light-mode-cover-thumbnail-2x.png");return(0,d.jsxs)(Ze.OL,{className:"flex max-w-full flex-col items-start gap-4 pr-0 md:flex-row md:items-center md:gap-6 md:pr-6","data-testid":"event-result",to:r,children:[(0,d.jsx)("div",{className:"w-full rounded md:h-24 md:w-44",children:(0,d.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:t.cover_image_url||n,alt:""})}),(0,d.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-1 flex-col gap-4",children:[(0,d.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,d.jsx)($e,{originalText:t.name,highlightedText:t.highlighted_name})}),(0,d.jsx)("div",{className:"flex flex-col gap-2",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(N.JO,{type:"16-calendar",size:16,className:"text-default !h-4 !w-4"}),(0,d.jsx)(I.Z.LabelXs,{children:(0,We.p6)(t.starts_at,"EEEE, MMM d, h:mm a (z)")})]})})]})]})},Member:function(e){var t,r=e.item,n=(0,H.sB)(r.public_uid);return(0,d.jsxs)(Ze.OL,{to:n,className:"flex gap-4 pr-6","data-testid":"second-user-result",children:[(0,d.jsx)(He.s,{src:null!==(t=r.avatar_url)&&void 0!==t?t:"",name:r.name,size:"16"}),(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)(I.Z.LabelMd,{weight:"semibold",children:r.name})," ",r.headline&&(0,d.jsx)(I.Z.LabelXs,{color:"text-default",children:r.headline})]}),r.bio&&(0,d.jsx)("div",{className:"line-clamp-4",children:(0,d.jsx)(I.Z.LabelSm,{color:"text-selector-active",children:r.bio})})]})]})},Post:function(e){var t,r=e.item,n=(0,H.LM)({spaceSlug:r.space_slug,slug:r.slug}),o=r.highlighted_body||r.body;return(0,d.jsxs)(Ze.OL,{to:n,className:i()("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.cover_image_url}),"data-testid":"post-result",children:[(0,d.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(He.s,{src:null!==(t=r.user_avatar_url)&&void 0!==t?t:"",name:r.user_name,size:"6"}),(0,d.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name)," \u2022 ").concat((0,We.p6)(r.created_at))})]}),(0,d.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,d.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,d.jsx)($e,{originalText:r.name,highlightedText:r.highlighted_name})}),(0,d.jsx)("div",{className:"line-clamp-4",children:(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,d.jsx)(Ge.w,{content:o})})})]})]}),r.cover_image_url&&(0,d.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,d.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:r.cover_image_url,alt:""})})]})},Lesson:function(e){var t=e.item,r=t.space_emoji||{},n=r.emoji,i=r.custom_emoji_url,o=r.custom_emoji_dark_url,a=(0,Ke.TC)().currentAppearance,s=H.H4.showLesson({spaceSlug:t.space_slug,sectionId:String(t.section_id),lessonId:t.id}),l=t.highlighted_body||t.body;return(0,d.jsx)(Ze.OL,{to:s,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"course-lesson-result",children:(0,d.jsxs)("div",{className:"flex max-w-full flex-col gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(Xe.S,{wrapperClassName:"flex items-center !w-5 !h-5",emoji:n,customEmojiUrl:i,customEmojiDarkUrl:o,appearance:a}),(0,d.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:t.space_name})]}),(0,d.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,d.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,d.jsx)($e,{originalText:t.name,highlightedText:t.highlighted_name})}),t.body&&(0,d.jsx)("div",{className:"line-clamp-4",children:(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,d.jsx)(Ge.w,{content:l})})})]})]})})},ImagePost:function(e){var t,r=e.item,n=(0,H.LM)({spaceSlug:r.space_slug,slug:r.slug}),o=r.highlighted_body||r.body;return(0,d.jsxs)(Ze.OL,{to:n,className:i()("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.main_gallery_image_url}),"data-testid":"post-result",children:[(0,d.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(He.s,{src:null!==(t=r.user_avatar_url)&&void 0!==t?t:"",name:r.user_name,size:"6"}),(0,d.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name)," \u2022 ").concat((0,We.p6)(r.created_at))})]}),(0,d.jsx)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:(0,d.jsx)("div",{className:"line-clamp-4",children:(0,d.jsx)(I.Z.BodySm,{color:"text-default",children:(0,d.jsx)(Ge.w,{content:o})})})})]}),r.main_gallery_image_url&&(0,d.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,d.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:r.main_gallery_image_url,alt:""})})]})}}),et=function(e){var t,r=e.item,n=(r||{}).type,i={post:Ye.Post,community_member:Ye.Member,comment:(t=r,"comment"===t.type&&t.post_slug&&Ye.Comment),lesson:Ye.Lesson,event:Ye.Event,image:Ye.ImagePost}[n];return i?(0,d.jsx)(i,{item:r}):null},tt=r(43227),rt=function(e){var t=e.searchResults,r=e.fetchNextPage,n=e.hasNextPage;return(0,d.jsx)(Ve.Z,{className:"flex flex-col gap-5 py-6",next:r,hasMore:!!n,loader:(0,d.jsx)(tt.m,{}),dataLength:t.length,style:{overflow:"initial"},scrollableTarget:"scrollable-container",children:t.map((function(e){return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(et,{item:e}),(0,d.jsx)(qe,{})]},e.id)}))})};function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ot=function(e){var t=e.isOpen,r=e.onClose,n=void 0===r?P.noop:r,s=e.defaultSearchValue,l=[{id:"posts",label:(0,o.t)("search_v2.tabs.posts")},{id:"comments",label:(0,o.t)("search_v2.tabs.comments")},{id:"lessons",label:(0,o.t)("search_v2.tabs.lessons")},{id:"events",label:(0,o.t)("search_v2.tabs.events")},{id:"members",label:(0,o.t)("search_v2.tabs.members")}],c=(0,ce.wh)().isViewOnlyMasquerading,u=(0,k.TH)(),p=nt((0,a.useState)(""),2),f=p[0],m=p[1],b=q().addRecentSearch,v=nt((0,a.useState)(l[0].id),2),y=v[0],g=v[1],_=h(),x=_.filters,j=_.resetFilters,w=re({onClose:n,type:y}),O=w.isLoading,S=w.isLoadingCount,C=w.results,N=w.setSearchValue,D=w.onKeydown,L=w.searchValue,M=w.fetchNextPage,U=w.hasNextPage,F=w.countData;return(0,a.useEffect)((function(){return N(s),m(s),function(){g("general")}}),[s,N]),(0,a.useEffect)((function(){j()}),[y]),(0,a.useEffect)((function(){n()}),[u,n]),(0,d.jsxs)(Fe.x,{isOpen:t,onClose:n,shouldShowCloseButton:!0,contentPortalId:"search-v2-portal",children:[(0,d.jsx)(Fe.x.Header,{children:(0,d.jsx)(T,{isLoading:O,isFixed:!1,searchValue:f,onChange:m,onKeydown:function(e){if("Enter"===e.key)return b({type:y,query:f}),void N(f);D(e)},onClickCancel:function(){N(""),m("")},shouldShowClearButton:!0})}),(0,d.jsxs)("div",{className:"mx-auto w-full max-w-screen-md px-3 lg:px-0",children:[S&&(0,d.jsx)(R,{}),(0,d.jsxs)("div",{className:i()({hidden:S||!L}),children:[(0,d.jsx)("div",{className:"mb-4 line-clamp-2 pt-6 md:pt-10",children:(0,d.jsx)(I.Z.TitleMd,{children:(0,o.t)("search_v2.search_result_for",{query:L})})}),(0,d.jsx)(ze.O.Group,{onChange:c?P.noop:function(e){var t=function(e){return l[e].id}(e);g(t)},className:"border-b",children:(0,d.jsx)(ze.O.List,{children:l.map((function(e){return(0,d.jsxs)(ze.O,{disabled:c,children:[e.label,(0,d.jsx)(ze.O.Counter,{children:(t=e.id,(null===F||void 0===F||null===(r=F.find((function(e){return e.type===t})))||void 0===r?void 0:r.count)||0)})]},e.id);var t,r}))})})]})]}),!O&&!!L&&(0,d.jsxs)("div",{className:"mx-auto mt-2 flex w-full max-w-screen-md list-none flex-wrap items-center space-x-2 px-3 lg:px-0",children:[0==C.length&&(0,P.isEmpty)(x)?null:(0,d.jsx)(Me,{type:y}),C.length>0&&(0,d.jsx)(Ue,{type:y})]}),(0,d.jsx)(Fe.x.Body,{wrapperClassName:"h-full overflow-auto max-w-screen-md px-3 lg:px-0",children:O?(0,d.jsx)(B,{type:y,numberOfRecords:10}):L?(0,d.jsx)("div",{id:"scrollable-container",className:"h-full overflow-auto",children:C.length>0?(0,d.jsx)(rt,{searchResults:C,fetchNextPage:M,hasNextPage:U}):(0,d.jsx)(E,{type:y})}):(0,d.jsx)(A,{})})]})},at=function(e){var t=e.searchValue,r=(0,u.dd)();return(0,d.jsx)(b,{children:(0,d.jsx)(O,{children:(0,d.jsx)(ot,{isOpen:r.visible,onClose:r.remove,defaultSearchValue:t})})})},st=u.gk.create((function(e){var t=e.searchValue;return(0,d.jsx)(at,{searchValue:t})})),lt=function(){return(0,u.dd)(st)};r(66007);var ct=function(e){var t=e.label;return(0,d.jsx)("span",{className:"border-primary bg-primary flex rounded border px-1.5 py-[1px]",children:(0,d.jsx)(I.Z.LabelXs,{color:"text-default",children:t})})},ut=r(54030),dt=function(e){var t=e.isSelected,r=e.onClick,n=e.onMouseOver,a=e.onFocus,s=e.index,l=e.searchValue,c=(0,ut.kK)();return(0,d.jsxs)("li",{"aria-current":t,"aria-posinset":s,className:i()("focus:bg-tertiary flex w-full cursor-pointer list-none items-center rounded px-4 py-2.5",{"bg-tertiary":t}),onMouseOver:n,onFocus:a,children:[(0,d.jsxs)("button",{type:"button",onClick:r,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline",children:[(0,d.jsx)(N.JO,{type:"search-v2",className:"text-default !h-5 min-h-[20px] !w-5 min-w-[20px]",size:20,useWithFillCurrentColor:!0}),(0,d.jsx)(I.Z.LabelSm,{as:"div",children:(0,d.jsxs)("span",{className:"[word-break:break-word]",children:[l," -"," ",c?(0,o.t)("search_v2.search_community_quick_mobile"):(0,o.t)("search_v2.search_community_quick")]})})]}),t&&(0,d.jsx)(ct,{label:(0,o.t)("search_v2.enter_character")})]})},pt=function(e){var t=e.children;return(0,d.jsx)("div",{className:"bg-primary",children:t})};function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ht=function(e){var t=e.onClick,r=e.onKeyDown,n=e.children,i=e.link,o={onClick:t,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline"};return i?(0,d.jsx)(Ze.rU,mt(mt({to:i},o),{},{children:n})):(0,d.jsx)("button",mt(mt({type:"button"},o),{},{children:n}))},vt=function(e){var t,r=e.isSelected,n=e.onClick,a=e.onMouseOver,s=e.onFocus,l=e.index,c=e.result,u=e.link,p=(0,ce.wh)(),f=p.currentCommunity,m=p.currentCommunityMember,b=Boolean(null===m||void 0===m?void 0:m.is_admin),h="community_member"===c.type,v="space"===c.type,y=h&&c.profile_confirmed_at,g=h&&(b||!(null!==f&&void 0!==f&&f.hide_emails_on_member_profiles)&&!c.hide_email),_=v?{emoji:c.emoji,customEmojiUrl:c.custom_emoji_url,customEmojiDarkUrl:c.custom_emoji_dark_url}:{},x=(0,Ke.TC)().currentAppearance,j=v||h,w=(0,ut.en)(),O=v?"space":y?"community_member":"invited_member";return(0,d.jsx)("li",{"aria-current":r,"aria-posinset":l,className:i()("focus:bg-tertiary group flex w-full cursor-pointer list-none items-center rounded px-4",{"bg-tertiary":r},g?"py-1.5":"py-2.5"),onMouseOver:a,onFocus:s,children:(0,d.jsxs)(ht,{onClick:n,onKeyDown:n,link:u,children:[h?(0,d.jsx)(He.s,{src:null!==(t=c.avatar_url)&&void 0!==t?t:"",name:c.name,size:"6"}):(0,d.jsx)("div",{className:"min-h-[1.5rem] min-w-[1.5rem]",children:(0,d.jsx)(Xe.S,{className:"flex !h-6 !w-6 items-center justify-center align-top",emoji:_.emoji,customEmojiUrl:_.customEmojiUrl,customEmojiDarkUrl:_.customEmojiDarkUrl,appearance:x})}),(0,d.jsxs)("div",{className:i()("flex flex-col",{"pt-1.5":g}),children:[(0,d.jsx)(I.Z.LabelSm,{as:"div",truncate:!0,children:(0,d.jsx)(Ge.w,{content:c.highlighted_name})}),g&&(0,d.jsx)("div",{className:"-mt-1",children:(0,d.jsx)(I.Z.LabelSm,{as:"span",truncate:!0,children:(0,d.jsx)("span",{className:"text-light leading-none",children:c.email})})})]}),(0,d.jsx)("span",{className:i()("ml-auto hidden group-focus:block",{"!block":r||!w}),children:j&&(0,d.jsx)(I.Z.LabelXs,{color:"text-default",children:(0,o.t)(["search_v2.types",O])})})]})})},yt=r(29185),gt=function(e){var t=e.searchTerm,r=e.index,n=e.activeIndex,o=e.handleClick,a=e.removeRecentSearch,s=e.canHover,l=e.setActiveIndex,c=e.dataTestId,u=r+1===n;return(0,d.jsxs)("li",{"aria-current":u,"aria-posinset":r+1,className:i()("group flex w-full cursor-pointer list-none items-center rounded",{"bg-tertiary":u}),"data-testid":c,children:[(0,d.jsx)("button",{type:"button",onClick:function(){return o(t.query)},onMouseOver:function(){return l(r+1)},onFocus:function(){return l(r+1)},className:"w-full focus-visible:!outline",children:(0,d.jsxs)("div",{className:"flex items-center gap-3 truncate px-4 py-2",children:[(0,d.jsx)(N.JO,{type:"16-clock",size:16,className:"text-default !h-5 min-h-[16px] !w-5 min-w-[16px]",useWithFillCurrentColor:!0}),(0,d.jsx)("div",{className:"flex-1 truncate text-left",children:(0,d.jsx)(I.Z.LabelSm,{children:t.query})})]})}),(0,d.jsx)("button",{type:"button",onClick:function(){return a(t.query)},className:i()("text-default ml-auto mr-2 hidden rounded-md focus-visible:!outline",{"!block":!s||u}),children:(0,d.jsx)(N.JO,{useWithFillCurrentColor:!0,type:"close"})})]})},_t=function(e){var t=e.recentSearches,r=e.removeRecentSearch,n=lt().show,i=(0,ut.en)(),a=function(e){n({searchValue:e}).catch((function(e){return console.error(e)}))},s=t.slice(0,5),l=(0,yt.t)({optionsCount:s.length+1,onEnter:function(e){var r=0===e?"":t[e-1].query;a(r)}}),c=l.activeIndex,u=l.setActiveIndex;return(0,d.jsx)("div",{className:"p-2",children:(0,d.jsxs)("ul",{className:"list-none","data-testid":"recent-search-list",children:[(0,d.jsx)("li",{className:"ml-4",children:(0,d.jsx)(I.Z.LabelXxs,{weight:"semibold",color:"text-default",children:(0,o.t)("search_v2.recent_searches.title")})}),s.map((function(e,t){return(0,d.jsx)(gt,{searchTerm:e,index:t,activeIndex:c,handleClick:a,removeRecentSearch:r,canHover:i,setActiveIndex:u,dataTestId:"recent-search-item"},"".concat(e.type,"-").concat(e.query))}))]})})},xt=function(e){var t=e.onClose,r=void 0===t?l():t,n=q(),i=n.recentSearches,o=n.addRecentSearch,s=n.removeRecentSearch,u=lt().show,p=(0,a.useRef)(null),f=function(){o({type:"general",query:b}),u({searchValue:b}).catch((function(e){return console.error(e)})),r()},m=re({onClose:r,type:"general",onSearchInCommunity:f}),b=m.searchValue,h=m.results,v=m.isLoading,y=m.hasNoResults,g=m.setSearchValue,_=m.resultsContainerRef,x=m.onKeydown,j=m.onMouseOver,w=m.onFocus,O=m.isLoadingSearch,S=m.selectedResultIndex,P=m.resetSearch;(0,c.Z)(p,r);var k=function(e){e||f(),"community_member"!==(null===e||void 0===e?void 0:e.type)&&"space"!==(null===e||void 0===e?void 0:e.type)||r()},C=function(e){return"community_member"===e.type?(0,H.zd)({public_uid:e.public_uid}):"space"===e.type?"/c/".concat(e.slug):null};return(0,d.jsxs)("div",{ref:p,children:[(0,d.jsx)(T,{onChange:function(e){return g(e)},isFixed:!0,searchValue:b,onKeydown:function(e){!b&&i.length||x(e)},isLoading:O,onClickCancel:function(){r(),P()}}),(0,d.jsx)(pt,{children:function(){if(!b&&!i.length)return(0,d.jsx)(A,{});if(!b&&i.length)return(0,d.jsx)(_t,{removeRecentSearch:s,recentSearches:i});var e=!y&&!v;return(0,d.jsx)("div",{className:"overflow-y-auto md:max-h-96",ref:_,children:(0,d.jsxs)("ul",{className:"list-none p-2",children:[(0,d.jsx)(dt,{index:0,searchValue:b,isSelected:0===S,onClick:function(){return k(null)},onMouseOver:j,onFocus:w}),e&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"-mx-2 my-2",children:(0,d.jsx)(qe,{})}),h.map((function(e,t){var r=t+1;return"space"===e.type||"community_member"===e.type?(0,d.jsx)(vt,{index:r,result:e,onMouseOver:j,onFocus:w,isSelected:S===r,onClick:function(){return k(e)},link:C(e)},e.id):null}))]})]})})}()})]})},jt=r(36589),wt=r(82177),Ot=function(){var e=(0,u.dd)(),t=(0,jt.I)().isV3Enabled;return(0,d.jsxs)(wt.u_,{title:(0,o.t)("search_v2.search_community_quick"),isOpen:e.visible,onClose:e.remove,children:[t&&(0,d.jsx)(wt.u_.Overlay,{}),(0,d.jsx)(wt.u_.Content,{position:t?"top":"default",className:i()("border-primary w-full rounded-[0px] sm:rounded-lg sm:border md:w-[620px]",{"md:!mt-2":!t}),size:"xl",children:(0,d.jsx)(b,{children:(0,d.jsx)(O,{children:(0,d.jsx)(xt,{onClose:e.hide})})})})]})},St=u.gk.create((function(){return(0,d.jsx)(Ot,{})})),Pt=function(){return(0,u.dd)(St)}},51873:(e,t,r)=>{"use strict";r.d(t,{d:()=>m});var n=r(86013),i=r(11049),o=r(81786),a=r(67687),s=r(10161),l=r(82177),c=r(75715),u=r(88272),d=r(85893),p=function(){var e=(0,i.dd)(),t=function(){var e,t=(0,u.p)(),r=t.mutate,n=t.isLoading,i=(0,c.c8)(),o=i.data,a=i.isLoading,s={activate_gamification:null!==(e=null===o||void 0===o?void 0:o.enabled)&&void 0!==e&&e},l=(0,c.g)({onSuccess:function(){r({operation:"migrate_community"})}}),d=l.mutate,p=l.isLoading;return{defaultValues:s,handleSubmit:function(e){var t=(null!==e&&void 0!==e?e:{}).activate_gamification;d({enabled:t,include_admins_in_leaderboard:!1,include_moderators_in_leaderboard:!1})},isLoading:n||a||p}}(),r=t.defaultValues,p=t.handleSubmit,f=t.isLoading;return(0,d.jsxs)(l.u_,{isOpen:e.visible,onClose:e.hide,title:(0,n.t)("activation_confirmation_modal.title"),children:[(0,d.jsx)(l.u_.Overlay,{}),(0,d.jsx)(l.u_.Content,{size:"lg",children:(0,d.jsxs)(a.l,{onSubmit:p,defaultValues:r,children:[(0,d.jsxs)(l.u_.Header,{children:[(0,d.jsx)(l.u_.Title,{size:"md",children:(0,n.t)("activation_confirmation_modal.title")}),(0,d.jsx)(l.u_.HeaderActions,{children:(0,d.jsx)(l.u_.CloseButton,{onClick:e.hide})})]}),(0,d.jsxs)(l.u_.Body,{children:[(0,d.jsx)(s.w,{content:(0,n.t)("activation_confirmation_modal.body"),className:"text-default text-base leading-6 tracking-tighter"}),(0,d.jsx)(a.l.Item,{id:"activate-gamification",name:"activate_gamification",translationRoot:"activation_confirmation_modal",hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,d.jsx)(a.l.ToggleSwitch,{name:"activate_gamification",variant:"small"})})]}),(0,d.jsx)(l.u_.Footer,{className:"flex w-full justify-end border-t",children:(0,d.jsx)(o.z,{variant:"circle",disabled:f,children:(0,n.t)("activation_confirmation_modal.cta_text")})})]})})]})},f=i.gk.create((function(){return(0,d.jsx)(p,{})})),m=function(){return(0,i.dd)(f)}},88272:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var n=r(86013),i=r(88767),o=r(81089),a=r(50732),s=r(69647),l=function(e,t){try{sessionStorage.setItem(e,t)}catch(r){console.warn('Unable to access session storage for key "'.concat(e,'".'))}},c=function(){var e=(0,s.p)().error;return(0,i.useMutation)({mutationFn:function(e){return(0,o.gN)(a.av.settings.v3_ui_preference.update(),e)},onSuccess:function(e,t){"migrate_admin"===t.operation?l("showAdminPreviewModal","true"):"migrate_community"===t.operation&&l("showVersionActivationModal","true"),window.location.href="/"},onError:function(){e((0,n.t)("failed_to_save_changes"))}})}},21529:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(67294),i=r(43333),o=r(47544),a=r(85893),s=function(e){var t=e.communityId,r=e.communityMemberId,s=(0,o.f)(),l=s.newNotificationCount,c=s.fetchNewNotificationsCount;return(0,n.useEffect)((function(){c(t)}),[]),(0,i.I)(r,onNotificationEventReceive),l?(0,a.jsx)("span",{className:"notifications__count",children:l}):null}},39706:(e,t,r)=>{"use strict";r.d(t,{f:()=>h});var n=r(67294),i=r(86013),o=r(50732),a=r(32548),s=r(51792),l=r(43333),c=r(47544),u=r(36325),d=r(35067),p=r(18605),f=r(51215),m=r(61417),b=r(85893),h=function(e){var t=e.containerElement,r=e.communityMemberId,h=e.newNotificationCount,v=(0,d.x)(!1),y=v.open,g=v.handleClose,_=v.setOpen,x=(0,a.j)().isMobileView,j=(0,c.f)(f.dL),w=j.newNotificationCount,O=j.setNewNotificationCount,S=j.resetNewNotificationsCount,P=j.onNotificationEventReceive,k=j.resizeNotificationWindow,C=(0,s.j)(),N=C.prependTitle,I=C.resetTitleToOriginal;(0,n.useEffect)((function(){O(h)}),[h]),(0,l.I)(r,P),(0,u.w)(k),(0,n.useEffect)((function(){document.title=w?N("(".concat(w,") ")):I()}),[w]);var A=function(){if(x()){var e=document.getElementsByClassName("dropdown-menu--bottom-bar bottomBarnotificationDropdown hidden");if(e.length>0&&y)return g(),e[0].classList.remove("hidden"),!1}return y};return(0,b.jsxs)("div",{className:"notifications__menu",children:[(0,b.jsxs)("button",{type:"button",className:"notifications__menu--icon","data-testid":"notifications-menu",onClick:function(){var e=A();x()&&e||(e?g():_(!0),S())},"data-action":"click->bottom-bar#openNotifications","data-target":"bottom-bar.notifications",children:[(0,b.jsx)(p.JO,{type:"bell"}),w?(0,b.jsx)("span",{children:w}):""]}),(0,b.jsx)(d.o,{open:y,handleClose:g,disableToggle:x()&&y,className:t+"notificationDropdown",children:(0,b.jsx)("div",{id:t+"NotificationWrapperOuter",className:"dropdown-menu dropdown-menu--right dropdown-menu__notifications",children:(0,b.jsxs)("div",{className:"dropdown-menu__inside",children:[(0,b.jsx)(m.u,{loadPagination:!1,containerElement:t},"notification-".concat(y)),(0,b.jsx)("div",{className:"notifications__footer",children:(0,b.jsx)("span",{children:(0,b.jsx)("a",{href:(0,o.Rj)(),children:(0,b.jsx)("div",{children:(0,i.t)("view_all_notifications")})})})})]})})})]})}},75953:(e,t,r)=>{"use strict";r.d(t,{O:()=>i,p:()=>o});var n=function(e){return null!==e&&void 0!==e&&e.includes("flagged")?"flagged":e},i=function(e){var t=e.action;return"notifications__row--".concat(n(t))},o=function(e){var t=e.action;return"".concat(n(t))}},61417:(e,t,r)=>{"use strict";r.d(t,{u:()=>F});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r.n(a),l=r(96486),c=r(47544),u=r(98338),d=r(95287),p=r(36325),f=r(43227),m=r(25958),b=r(38704),h=r(8246),v=r(62557),y=r(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t=e.setDataLoaded,r=e.setHasNextPage,i=e.setNotificationGroup,o={INBOX:s().t("notifications.group_tabs.inbox"),FOLLOWING:s().t("notifications.group_tabs.following"),ALL:s().t("notifications.group_tabs.all"),ARCHIVED:s().t("notifications.group_tabs.archived")},a=g((0,n.useState)(o.INBOX),2),l=a[0],c=a[1];return(0,y.jsx)(v.m,{wrapperClassName:"px-6",controlled:!0,activeTab:l,onClick:function(e){i(e.toLowerCase()),t(!1),r(!1),c(e)},options:Object.values(o).map((function(e){return{label:e}})),variant:"underline-sm"})},j=r(23560),w=r.n(j),O=r(50732),S=r(18605),P=r(46266),k=function(e){var t=e.markAllAsRead,r=e.handleClose;return(0,y.jsxs)("div",{className:"notifications__header",children:[(0,y.jsx)("div",{className:"pl-[10px] pt-[5px]",children:(0,y.jsx)(h.Z.TitleSm,{weight:"bold",children:(0,a.t)("notifications.page_title")})}),(0,y.jsxs)("span",{children:[(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.mark_all_as_read"),children:(0,y.jsx)("button",{type:"submit",onClick:t,children:(0,y.jsx)(S.JO,{type:"mark-all-read",className:"icon--mark-all-read"})})}),(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.notification_settings"),children:(0,y.jsx)("a",{href:O.G3.notifications,children:(0,y.jsx)(S.JO,{type:"settings",className:"icon--settings"})})}),w()(r)&&(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.close"),children:(0,y.jsx)("button",{type:"submit",onClick:r,children:(0,y.jsx)(S.JO,{type:"close"})})})]})]})},C=r(40160),N=r(24185),I=r(73890),A=r(64422),E=r(35067),D=function(e){var t=e.notification,r=e.markAsRead,n=e.unfollowNotification,i=e.followNotification,o=e.archiveNotification,s=(0,E.x)(),l=s.open,c=s.toggleDropdown,u=s.handleClose,d=t.post_follower_id,p=["Comment","Post"].includes(t.notifiable_type)&&!t.post_follower_id;return(0,y.jsx)("div",{className:"notifications__actions",children:(0,y.jsxs)("div",{className:"actions__menu",children:[(0,y.jsx)("div",{className:"actions__icon",children:(0,y.jsx)("a",{href:"#action-menu",onClick:c,children:(0,y.jsx)(S.JO,{type:"menu-dots"})})}),(0,y.jsx)(E.o,{open:l,handleClose:u,className:"dropdown-menu dropdown-menu--right dropdown-menu__actions",children:(0,y.jsx)("div",{className:"dropdown-menu__inside",children:l&&(0,y.jsxs)("ul",{children:[!t.read_at&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return r(t)},children:(0,a.t)("notifications.actions.mark_as_read")})}),d&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return n(t)},children:(0,a.t)("notifications.actions.unfollow_post")})}),p&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return i(t)},children:(0,a.t)("notifications.actions.follow_post")})}),"archived"!=t.notification_group&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return o(t)},children:(0,a.t)("notifications.actions.archive")})})]})})})]})})},T=r(75953),L={actor_name:function(e){var t=e.notification;return(0,y.jsxs)("span",{className:"notifications__name",children:[t.actor_name," "]})},display_action:function(e){var t=e.notification;return(0,y.jsxs)("span",{children:[t.display_action," "]})},notifiable_title:function(e){var t=e.notification;return(0,y.jsxs)("span",{className:"notifications__title",children:[t.notifiable_title," "]})}},M=function(e){var t=e.notification;return(0,y.jsx)("div",{className:"notifications__text",children:t.notification_text_structure.map((function(e,r){var i=L[e]||function(){return(0,y.jsxs)("span",{children:[" ",e]},r)},o=r+1===t.notification_text_structure.length,a=0===r;return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(i,{notification:t}),(o||a)&&" "]},"notification-key-".concat(r))}))},t.id)},R=function(e){var t,r=e.notification,n=e.markAsRead,i=e.unfollowNotification,o=e.followNotification,a=e.archiveNotification,s=e.onClickNotification,l=(0,N.k6)(),c=(0,T.p)(r),u=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mr-2",children:[(0,y.jsx)(A.s,{src:r.actor_image,name:r.actor_name,size:"10"}),(0,y.jsx)("div",{className:"notifications__icon",children:(0,y.jsx)(S.JO,{type:c,className:"icon--sm"})})]}),(0,y.jsxs)("div",{className:"notifications__details",children:[(0,y.jsx)(M,{notification:r}),(0,y.jsx)("div",{className:"notifications__time",children:(0,I.TF)(r.created_at)})]})]});return(0,y.jsx)("li",{children:(0,y.jsxs)("div",{className:"notifications__row ".concat((0,T.O)(r)," ").concat(r.read_at?"notifications__row--read":"notifications__row--unread"),children:[(t=u,l?(0,y.jsx)(C.rU,{to:r.action_web_path,className:"notifications__link",onClick:function(e){n(r),w()(s)&&s(e)},children:t}):(0,y.jsx)("a",{className:"notifications__link",href:(0,O.Fo)(r),children:t})),(0,y.jsx)(D,{notification:r,markAsRead:n,archiveNotification:a,unfollowNotification:i,followNotification:o})]})},r.id)};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){var t=e.loadPagination,r=void 0===t||t,i=e.containerElement,s=e.handleClose,v=e.isDropdown,g=void 0!==v&&v,_=e.isFullPage,j=void 0!==_&&_,w=(0,c.f)(),O=w.notifications,S=w.hasNextPage,P=w.dataLoaded,C=w.setDataLoaded,N=w.setHasNextPage,I=w.markAllAsRead,A=w.fetchNotifications,E=w.fetchFirstPage,D=w.markAsRead,T=w.unfollowNotification,L=w.followNotification,M=w.archiveNotification,U=w.resizeNotificationWindow,F=((0,b.wO)()||{}).onClose,z=void 0===F?l.noop:F,V=B((0,n.useState)("inbox"),2),q=V[0],Z=V[1],G=(0,u.wh)().currentCommunity.current_plan_tier;return(0,p.w)(U),(0,n.useEffect)((function(){E(q)}),[q]),(0,y.jsxs)(y.Fragment,{children:[!j&&(0,y.jsx)(k,{markAllAsRead:I,handleClose:s}),(0,y.jsx)(x,{mobile:!0,notificationGroup:q,setNotificationGroup:Z,setDataLoaded:C,setHasNextPage:N}),(0,y.jsxs)("div",{id:i+"NotificationWrapperInner",className:o()("relative flex h-full flex-col justify-between",{"h-[calc(100%-109px)] overflow-auto rounded-b":g,"overflow-auto":j}),children:[P||S?O.length?(0,y.jsx)("ul",{className:"notifications__list",children:O.filter((function(e){return null===e||void 0===e?void 0:e.action_web_path})).map((function(e){return(0,y.jsx)(R,{onClickNotification:function(e){(0,d.n2)(e)||(g?z():null===s||void 0===s||s())},notification:e,markAsRead:D,unfollowNotification:T,followNotification:L,archiveNotification:M},e.id)}))}):(0,y.jsx)("div",{className:"notifications__empty",children:(0,y.jsx)("div",{children:(0,a.t)("no_notifications")})}):(0,y.jsx)(f.m,{}),r&&S&&(0,y.jsx)(m.t,{fetchNewPage:function(e){return A(e,q)},initialPage:2,componentId:i?i+"NotificationWrapperInner":null}),G&&(0,y.jsx)("span",{className:"w-full bg-white py-4 text-center",children:(0,y.jsx)(h.Z.LabelXs,{children:(0,a.t)("notification_retention_message",{months:(0,a.t)("notification_retention_months.".concat(G))})})})]})]})}},32221:(e,t,r)=>{"use strict";r.d(t,{T:()=>c});var n=r(67294),i=r(86013),o=r.n(i),a=r(51792),s=r(61417),l=r(85893),c=function(){var e=(0,a.j)().prependTitle;return(0,n.useEffect)((function(){e("".concat(o().t("notifications.page_title")," "))})),(0,l.jsx)("div",{className:"notifications__page",children:(0,l.jsx)(s.u,{})})}},32121:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var n=r(3219),i=r(68921),o=r(86013),a=r(85893),s=function(e){var t=e.showCreatorTerms,r=e.locale,n=e.communityTermsUrl,i=e.communityPrivacyUrl,s="authentication_app.signup.form.terms_and_privacy",l=t?"pt"===r?"https://circle.so/br/creator-terms":"https://circle.so/creator-terms":n,c=t?"pt"===r?"https://circle.so/br/privacy":"https://circle.so/privacy":i;return(0,a.jsxs)("span",{className:"text-light text-xs",children:[(0,o.t)("".concat(s,".prefix"))," ",(0,a.jsx)("a",{className:"text-default hover:text-light font-bold",href:l,target:"_blank",rel:"noreferrer",children:(0,o.t)([s,t?"creator_terms_of_service":"terms_of_service"])})," ",(0,o.t)("".concat(s,".and"))," ",(0,a.jsx)("a",{className:"text-default hover:text-light font-bold",href:c,target:"_blank",rel:"noreferrer",children:(0,o.t)([s,"privacy_policy"])})]})},l=function(e){var t=e.caller,r=(0,i.Y)(),o=(0,n.c)(),l=("paywallCheckout"===t?r:o).currentCommunity;if(!l)return(0,a.jsx)(s,{showCreatorTerms:!0});var c=l.locale,u=l.terms_url,d=l.privacy_url;return(0,a.jsx)(s,{showCreatorTerms:!1,locale:c,communityTermsUrl:u,communityPrivacyUrl:d})}},52602:(e,t,r)=>{"use strict";r.d(t,{zU:()=>n,CU:()=>i,pX:()=>o,K$:()=>a});var n=/^(?=.*\d)(?=.*[A-Z])(?=.*\W)[^ ]{6,}$/,i=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,o="coupon_code",a="utm_params"},45789:(e,t,r)=>{"use strict";r.d(t,{M:()=>V});var n=r(86013),i=r.n(n),o=r(6298),a=r(81786),s=r(67687),l=r(87536),c=r(10012),u=/^((0?0?\.([1-9]\d*|0[1-9]\d*))|(([1-9]|0[1-9])\d*(\.\d+)?))$/,d=r(69585),p=r(56421),f=r(96146),m=r(98338),b=r(53242),h=r(13288),v=r(85893),y=function(){var e=(0,m.wh)(),t=e.currentCommunitySettings,r=e.isLoading,i=(0,b.K)(),o=i.data,a=i.isLoading,c=(0,l.Gc)().watch;if(r||a)return(0,v.jsx)(h.a,{});var u=o.find((function(e){return e.is_default})),y=c("currency_id"),g=o.find((function(e){return e.id===parseInt(y||u.id)})),_=(0,p.Bj)(g);return(0,v.jsxs)(v.Fragment,{children:[t.currencies_enabled&&(0,v.jsx)(f.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_coupons.form",formItemRules:{required:!0}}),(0,v.jsx)(s.l.Item,{fullWidth:!1,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,name:"amount",rules:{required:!0,validate:{inputMinAmount:function(e){return!((0,p.Mz)(e)<=0)||(0,n.t)("settings.paywall_coupons.alerts.error.amount_not_zero")}}},transformValue:_,translationRoot:"settings.paywall_coupons.form",variant:"extra-bottom-margin",children:(0,v.jsx)(d.a,{currency:g,name:"amount","data-testid":"coupon_amount"})})]})},g=function(e){var t=e.paywallCoupon,r=(0,(0,l.Gc)().watch)("type");return(0,v.jsxs)(v.Fragment,{children:[!t&&(0,v.jsx)(s.l.Item,{name:"code",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",tooltipText:i().t("settings.paywall_coupons.form.code_description"),hideDescription:!0,hidePlaceholder:!0,children:(0,v.jsx)(s.l.Input,{"data-testid":"coupon_code"})}),(0,v.jsx)(s.l.Item,{name:"name",translationRoot:"settings.paywall_coupons.form",label:i().t("settings.paywall_coupons.form.name_label"),rules:{required:i().t("settings.paywall_coupons.alerts.error.name_is_required"),maxLength:40},hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",hideDescription:!0,hidePlaceholder:!0,children:(0,v.jsx)(s.l.Input,{maxLength:"40","data-testid":"coupon_name"})}),t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"active",inline:!0,hideBorder:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.active"),children:(0,v.jsx)(s.l.ToggleSwitch,{variant:"small"})}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.code_info")}),(0,v.jsx)("p",{children:t.code})]}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.terms")}),(0,v.jsx)("p",{children:t.terms})]}),t.max_redemptions&&(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.max_redemptions")}),(0,v.jsx)("p",{children:t.max_redemptions})]}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.redemptions")}),(0,v.jsx)("p",{children:t.redemptions_count})]})]}),!t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"type",hideDescription:!0,translationRoot:"settings.paywall_coupons.form",rules:{required:i().t("settings.paywall_coupons.alerts.error.type_is_required")},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,v.jsx)(s.l.SelectNative,{name:"type",options:[{label:i().t("settings.paywall_coupons.form.type_options.fixed"),value:c.V5.fixed},{label:i().t("settings.paywall_coupons.form.type_options.percent"),value:c.V5.percent}],"data-testid":"coupon_type"})}),(0,c.Dh)(r)&&(0,v.jsx)(y,{}),(0,c.hU)(r)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"paywall-coupons-form__input_percent_symbol",children:"%"}),(0,v.jsx)(s.l.Item,{name:"amount",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:i().t("settings.paywall_coupons.alerts.error.amount_not_zero"),pattern:{value:u,message:i().t("settings.paywall_coupons.alerts.error.amount_not_zero")}},variant:"extra-bottom-margin",hideDescription:!0,children:(0,v.jsx)(s.l.Input,{"data-testid":"coupon_amount"})})]})]})]})},_=r(67294),x=r(80971),j=r(14246);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){var e=(0,l.Gc)().watch,t=(0,x.g)({type:[j.Ex.space,j.Ex.event]}),r=t.activePaywalls,n=t.isLoading,o=t.isSuccess,a=e("type"),u=e("currency_id"),d=e("all_paywalls"),p=w((0,_.useState)(""),2),f=p[0],m=p[1];(0,_.useEffect)((function(){m("")}),[]);var b=(0,_.useMemo)((function(){return r.filter((function(e){return(0,c.hU)(a)||e.currency.id==u})).filter((function(e){var t=e.display_name;return!f||-1!==t.toLowerCase().search(f.toLowerCase())})).map((function(e){return{value:e.id,text:e.display_name}}))}),[r,u,a,f]);if(n||!o)return(0,v.jsx)(h.a,{});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"all_paywalls",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,v.jsx)(s.l.SelectNative,{name:"all_paywalls",options:[{label:i().t("settings.paywall_coupons.form.paywall_options.all"),value:!0},{label:i().t("settings.paywall_coupons.form.paywall_options.specific"),value:!1}],"data-testid":"coupon_applies_to"})}),"false"==d&&(0,v.jsx)(s.l.Item,{name:"paywall_ids",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,v.jsx)(s.l.Select,{name:"paywall_ids",variant:"tags",data:b,onSearch:function(e){m(e)},minSearchValueLength:0,showArrow:!1})})]})},P=r(58837),k=r(43204),C=function(e){var t=e.paywallCoupon,r=(0,(0,l.Gc)().watch)(),n=r.duration,o=r.enable_start_date,a=r.enable_end_date,c=r.enable_max_redemptions,u=(0,P.ED)(P.tq),d="F d, Y G:i K (\\".concat(u.split("").join("\\"),")");return(0,v.jsxs)(v.Fragment,{children:[!t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"duration",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,tooltipText:i().t("settings.paywall_coupons.form.duration_description"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.duration_options.forever"),value:"forever"},{label:i().t("settings.paywall_coupons.form.duration_options.once"),value:"once"},{label:i().t("settings.paywall_coupons.form.duration_options.repeating"),value:"repeating"}],"data-testid":"coupon_duration"})}),"repeating"==n&&(0,v.jsx)(s.l.Item,{name:"duration_in_months",label:i().t("settings.paywall_coupons.form.duration_in_months"),hideDescription:!0,hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",rules:{required:i().t("settings.paywall_coupons.alerts.error.duration_in_monts_not_zero")},children:(0,v.jsx)(s.l.Input,{type:"number",min:"1",max:"120","data-testid":"coupon_duration_in_months"})})]}),(0,v.jsx)(s.l.Item,{name:"enable_start_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.redeemable_date"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.date_options.immediately"),value:!1},{label:i().t("settings.paywall_coupons.form.date_options.set_date"),value:!0}],"data-testid":"coupon_start_date"})}),"true"==o&&(0,v.jsx)(k.W,{dateFormat:d,name:"starts_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_from_date"}),(0,v.jsx)(s.l.Item,{name:"enable_end_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.redeemable_until_date"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.date_options.disable"),value:!1},{label:i().t("settings.paywall_coupons.form.date_options.until"),value:!0}],"data-testid":"coupon_end_date"})}),"true"==a&&(0,v.jsx)(k.W,{dateFormat:d,name:"ends_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_until_date"}),(0,v.jsx)("div",{className:"!hidden",children:(0,v.jsx)(s.l.Item,{name:"enable_max_redemptions",hideBorder:!0,hideDescription:!0,fullWidth:!0,label:i().t("settings.paywall_coupons.form.max_redemptions"),tooltipText:i().t("settings.paywall_coupons.form.max_redemptions_description"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.limit_options.disable"),value:!1},{label:i().t("settings.paywall_coupons.form.limit_options.enable"),value:!0}]})})}),"true"==c&&(0,v.jsx)("div",{className:"paywall-coupons-form__fields__no_margin",children:(0,v.jsx)(s.l.Item,{name:"max_redemptions",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:i().t("settings.paywall_coupons.form.max_redemptions_placeholder"),variant:"extra-bottom-margin",rules:{required:i().t("settings.paywall_coupons.alerts.error.max_redemptions_not_zero"),min:1},children:(0,v.jsx)(s.l.Input,{type:"number",min:"1"})})})]})},N=r(64687),I=r.n(N),A=r(62557),E={DETAILS:(0,n.t)("settings.paywall_coupons.tabs.details"),PAYWALLS:(0,n.t)("settings.paywall_coupons.tabs.paywalls"),USAGE:(0,n.t)("settings.paywall_coupons.tabs.usage")};function D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}const T=function(e){var t=e.activeTab,r=e.setActiveTab,n=(0,l.Gc)().trigger,i=function(){var e,i=(e=I().mark((function e(i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(t!=E.DETAILS||i!=E.USAGE){e.next=7;break}return e.abrupt("return");case 7:r(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}();return(0,v.jsx)(A.m,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:i,options:Object.values(E).map((function(e){return{label:e}})),variant:"underline"})};var L=r(18122);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,n=e.onClose,i=U((0,_.useState)(E.DETAILS),2),o=i[0],a=i[1],s=/[^\d\\.\\-]/g,l=/\./g,u=(0,L.n)({refetchCoupons:r,onClose:n,paywallCoupon:t}),d=u.createMutation,f=u.updateMutation,m=t?f:d;return{getFormDefaults:function(e){var t,r;return e?{name:e.name,currency_id:null!==(t=null===(r=e.currency)||void 0===r?void 0:r.id)&&void 0!==t?t:"",active:e.active,starts_at:e.starts_at,ends_at:e.ends_at,paywall_ids:e.paywall_ids,all_paywalls:e.all_paywalls.toString(),enable_start_date:(!!e.starts_at).toString(),enable_end_date:(!!e.ends_at).toString(),type:e.type}:{type:c.V5.fixed,currency_id:""}},handleSubmit:function(e){if(o==E.DETAILS)a(E.PAYWALLS);else if(o==E.PAYWALLS)a(E.USAGE);else if(o==E.USAGE){var t=e.amount;return(0,c.Dh)(e.type)&&(r=t,t="pt"==(null===(n=window)||void 0===n?void 0:n.locale)?parseFloat(String(r||"0").replace(l,"").replace(",",".").replace(s,"")):(0,p.Mz)(r)),m.mutate(R(R({},e),{},{amount:t}))}var r,n},setActiveTab:a,mutation:m,activeTab:o}},V=function(e){var t=e.refetchCoupons,r=e.onClose,n=e.paywallCoupon,l=z({paywallCoupon:n,refetchCoupons:t,onClose:r}),c=l.getFormDefaults,u=l.handleSubmit,d=l.setActiveTab,p=l.mutation,f=l.activeTab,m=function(){switch(f){case E.DETAILS:return(0,v.jsx)(g,{paywallCoupon:n});case E.USAGE:return(0,v.jsx)(C,{paywallCoupon:n});case E.PAYWALLS:return(0,v.jsx)(S,{})}};return(0,v.jsx)(s.l,{onSubmit:u,className:"paywall-coupons-form",defaultValues:c(n),children:function(e){var t=e.formState.isSubmitting;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T,{activeTab:f,setActiveTab:d}),(0,v.jsx)("div",{className:"paywall-coupons-form__fields h-0 overflow-y-auto",children:m()}),(0,v.jsx)(o.d.Footer,{sticky:!0,children:(0,v.jsxs)(a.z,{type:"submit",variant:"primary",full:!0,disabled:t||p.isLoading,children:[f!=E.USAGE&&i().t("settings.paywall_coupons.buttons.next"),f==E.USAGE&&!n&&i().t("settings.paywall_coupons.buttons.create"),f==E.USAGE&&n&&i().t("settings.paywall_coupons.buttons.update")]})})]})}})}},80971:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(67294),i=r(88767),o=r(81089),a=r(39068),s=r(50732),l=r(98338),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.wh)().currentCommunityMember,r=(0,i.useQuery)("PAYWALLS",(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.UT)(s.av.paywalls.index({params:e}))}(e)}),{enabled:!!(0,a.vb)(t)}),c=r.data,u=void 0===c?[]:c,d=r.isSuccess,p=r.isLoading,f=(0,n.useMemo)((function(){return u?u.filter((function(e){return"active"===e.status})):[]}),[u]),m=(0,n.useMemo)((function(){return!!f&&(null===f||void 0===f?void 0:f.length)>0}),[f]),b=(0,n.useMemo)((function(){return!!u&&(null===u||void 0===u?void 0:u.length)>0}),[u]);return{activePaywalls:f,isSuccess:d,hasActivePaywalls:m,hasPaywalls:b,isLoading:p,allPaywalls:u}}},93642:(e,t,r)=>{"use strict";r.d(t,{c:()=>k});var n=r(86013),i=r.n(n),o=r(27903),a=r(81786),s=r(72860),l=r(4848),c=r(25430),u=r(18122),d=r(64687),p=r.n(d),f=r(67294),m=r(1881),b=r(35067),h=r(44032),v=r(58253),y=r(6298),g=r(45789),_=r(85893),x=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,n=e.isDrawerVisible,i=e.toggleDrawer;return(0,_.jsx)(y.d,{open:n,title:I18n.t("settings.paywall_coupons.edit_title"),onClose:i,noWrapperPadding:!0,children:(0,_.jsx)(g.M,{refetchCoupons:r,onClose:i,paywallCoupon:t})})};function j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t,r,i=e.paywallCoupon,o=e.refetchCoupons,a=O((0,f.useState)(!1),2),s=a[0],l=a[1],c=O((0,m.k)(!1),2),d=c[0],y=c[1],g=(0,b.x)().handleClose,j=(0,u.n)({refetchCoupons:o,paywallCoupon:i}).destroyMutation,S=j.mutateAsync,P=j.isLoading,k=Boolean(null===i||void 0===i||null===(t=i.policies)||void 0===t?void 0:t.can_edit),C=Boolean(null===i||void 0===i||null===(r=i.policies)||void 0===r?void 0:r.can_destroy),N=(0,f.useMemo)((function(){var e=[];return k&&e.push({key:"edit-coupon",label:(0,n.t)("settings.paywall_coupons.buttons.edit"),onClick:function(){g(),y()}}),C&&e.push({key:"delete-coupon",label:(0,n.t)("settings.paywall_coupons.buttons.delete"),hasDanger:!0,onClick:function(){g(),l(!0)}}),e}),[k,C,g,y]);return(0,_.jsxs)(_.Fragment,{children:[k&&(0,_.jsx)(x,{paywallCoupon:i,refetchCoupons:o,isDrawerVisible:d,toggleDrawer:y}),(0,_.jsx)(v.w.Actions,{children:N.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick;return(0,_.jsx)(v.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))}),C&&(0,_.jsx)(h.c,{title:(0,n.t)("settings.paywall_coupons.alerts.confirmation.delete_title"),confirmText:(0,n.t)("confirm"),cancelText:(0,n.t)("cancel"),confirmVariant:"danger",isOpen:s,disabled:P,onCancel:function(){return l(!1)},onClose:function(){return l(!1)},onConfirm:w(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:l(!1);case 3:case"end":return e.stop()}}),e)}))),children:(0,_.jsx)("p",{children:(0,n.t)("settings.paywall_coupons.alerts.confirmation.delete")})})]})},k=function(e){var t=e.canCreate,r=e.shouldHideHeader,n=(0,(0,u.n)({}).useListPaywallCoupons)(),d=n.data,p=n.refetch,f=[{title:i().t("settings.paywall_coupons.form.code_info").toUpperCase(),dataIndex:"code",key:"code"},{title:i().t("settings.paywall_coupons.form.terms").toUpperCase(),dataIndex:"terms",key:"terms"},{title:i().t("settings.paywall_coupons.form.redemptions").toUpperCase(),dataIndex:"redemptions",key:"redemptions",className:o.M.lg,tdClassName:o.M.lg},{title:i().t("settings.paywall_coupons.form.status").toUpperCase(),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"}],m=null===d||void 0===d?void 0:d.map((function(e){return{key:e.id,name:e.name,redemptions:e.redemptions_count,terms:e.terms,code:e.code,status:(0,_.jsx)(l.O,{variant:e.active?"success":"danger",textTransform:"capitalize",children:i().t(["settings.paywall_coupons.status",e.status])}),action:(0,_.jsx)(P,{paywallCoupon:e,refetchCoupons:p}),rowClassName:"group"}})),b=(0,c.v)();return(0,_.jsxs)(_.Fragment,{children:[!r&&(0,_.jsx)("div",{className:"table-wrapper",children:(0,_.jsxs)("div",{className:"flex justify-between",children:[(0,_.jsx)("h3",{children:i().t("settings.paywall_coupons.title")}),t&&(0,_.jsx)(a.z,{variant:"circle",onClick:function(){b.show({refetchCoupons:p})},children:i().t("settings.paywall_coupons.buttons.new")})]})}),(0,_.jsx)("div",{className:"paywall-coupons-list","data-testid":"coupon-list",children:(0,_.jsx)(s.w,{columns:f,className:"paywall-coupons-list__table",dataSource:m||[]})})]})}},25430:(e,t,r)=>{"use strict";r.d(t,{v:()=>d});var n=r(86013),i=r.n(n),o=r(11049),a=r(6298),s=r(45789),l=r(85893),c=function(e){var t=e.refetchCoupons,r=(0,o.dd)();return(0,l.jsx)(a.d,{open:r.visible,title:i().t("settings.paywall_coupons.new_title"),onClose:r.hide,noWrapperPadding:!0,children:(0,l.jsx)(s.M,{refetchCoupons:t,onClose:r.hide})})},u=o.gk.create((function(e){var t=e.refetchCoupons;return(0,l.jsx)(c,{refetchCoupons:t})})),d=function(){return(0,o.dd)(u)}},18122:(e,t,r)=>{"use strict";r.d(t,{n:()=>u});var n=r(86013),i=r.n(n),o=r(88767),a=r(81089),s=r(50732),l=r(16617),c=r(69647),u=function(e){var t=e.refetchCoupons,r=void 0===t?null:t,n=e.onClose,u=void 0===n?null:n,d=e.paywallCoupon,p=void 0===d?null:d,f=(0,c.p)(),m=f.success,b=f.error;return{useListPaywallCoupons:function(){return(0,o.useQuery)("paywall-coupons",(function(){return(0,a.UT)(s.av.paywallCoupons.index())}))},updateMutation:(0,o.useMutation)((function(e){return l.p.updatePaywallCoupon(p.id,e)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.updated")),u(),r()},onError:function(e){console.error(e.errorDetails),b(e.errorDetails,{duration:"long"})}}),createMutation:(0,o.useMutation)((function(e){return l.p.createPaywallCoupon(e)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.created")),u(),r()},onError:function(e){console.error(e.errorDetails),b(e.errorDetails,{duration:"long"})}}),destroyMutation:(0,o.useMutation)((function(){return l.p.destroyPaywallCoupon(p.id)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.deleted")),r()},onError:function(e){console.error(e.message),b(e.message,{duration:"long"})}})}}},92237:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(88767),i=r(69647),o=r(14856),a=r(93642),s=r(85893),l=new n.QueryClient(o.Vr);const c={List:function(e){var t=e.canCreate;return(0,s.jsx)(i.V,{children:(0,s.jsx)(n.QueryClientProvider,{client:l,children:(0,s.jsx)(a.c,{canCreate:t})})})}}},41589:(e,t,r)=>{"use strict";r.d(t,{X:()=>f});var n=r(86013),i=r(11049),o=r(96146),a=r(81786),s=r(67687),l=r(47839),c=r(75555),u=r(85893),d=function(e){var t=e.paywallGroup,r=void 0===t?null:t,d=e.refetchPaywallGroups,p=void 0===d?null:d,f=(0,i.dd)(),m=function(e){var t=e.modal,r=e.refetchPaywallGroups,n=e.paywallGroup,i=(0,c.W)({closeModal:t.hide,refetchPaywallGroups:r}),o=i.createMutation,a=i.updateMutation,s=!!n;return{getFormDefaults:function(){var e;return{name:(null===n||void 0===n?void 0:n.name)||"",id:(null===n||void 0===n?void 0:n.id)||"",currency_id:(null===n||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.id)||""}},editionMode:s,mutation:s?a:o}}({modal:f,refetchPaywallGroups:p,paywallGroup:r}),b=m.getFormDefaults,h=m.mutation,v=m.editionMode;return(0,u.jsx)(l.u,{show:f.visible,title:v?(0,n.t)("settings.paywall_groups.headings.edit"):(0,n.t)("settings.paywall_groups.headings.create"),onClose:f.hide,children:(0,u.jsx)(s.l,{onSubmit:h.mutate,defaultValues:b(),className:"paywall-group-form",children:function(e){var t,i=e.formState.isSubmitting;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.l.Item,{name:"name",translationRoot:"settings.paywall_groups.fields",hideBorder:!0,hideDescription:!0,fullWidth:!1,rules:{required:!0,maxLength:255},hidePlaceholder:!0,children:(0,u.jsx)(s.l.Input,{})}),(!r||(null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.requires_currency))&&(0,u.jsx)(o.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_groups.fields",formItemRules:{required:(0,n.t)("settings.paywall_groups.fields.currency_id_is_required")},formItemTooltipText:(0,n.t)("settings.paywall_groups.fields.currency_id_tooltip"),disabled:r&&!r.policies.can_change_currency}),(0,u.jsx)(a.z,{type:"submit",variant:"circle",disabled:i||h.isLoading,className:"paywall-group-form__submit-button",children:v?(0,n.t)("settings.paywall_groups.actions.update"):(0,n.t)("settings.paywall_groups.actions.create")})]})}})})},p=i.gk.create((function(e){var t=e.paywallGroup,r=e.refetchPaywallGroups;return(0,u.jsx)(d,{paywallGroup:t,refetchPaywallGroups:r})})),f=function(){return(0,i.dd)(p)}},33090:(e,t,r)=>{"use strict";r.d(t,{a:()=>b});var n=r(86013),i=r.n(n),o=r(94312),a=r(81786),s=r(72860),l=r(13288),c=r(41589),u=r(75555),d=r(18605),p=r(85893),f=function(){return(0,p.jsxs)("div",{className:"paywall-groups-list__info table-wrapper",children:[(0,p.jsx)("div",{children:(0,p.jsx)(d.JO,{type:"question-mark",className:"icon--sm paywall-groups-list__info__icon"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:i().t("settings.paywall_groups.headings.what_is")}),(0,p.jsxs)("p",{className:"paywall-groups-list__info__explanation text-dark",children:[i().t("settings.paywall_groups.alerts.info.what_is"),"\xa0",(0,p.jsx)("a",{href:"https://community.circle.so/c/paywalls/",target:"_blank",rel:"noreferrer",children:i().t("settings.paywall_groups.actions.learn_more")})]})]})]})},m=[{title:i().t("settings.paywall_groups.table.name"),dataIndex:"name",key:"name"},{title:i().t("settings.paywall_groups.table.paywalls"),dataIndex:"paywalls",key:"paywalls"},{title:" ",dataIndex:"actions",key:"actions"}],b=function(e){var t=e.shouldHideHeader,r=void 0!==t&&t,i=(0,c.X)(),d=(0,(0,u.W)({}).useListPaywallGroups)(),b=d.data,h=d.isLoading,v=d.refetch,y=function(e){var t=e.paywallGroup,r=void 0===t?null:t;return i.show({refetchPaywallGroups:v,paywallGroup:r})},g=null===b||void 0===b?void 0:b.map((function(e){return{key:e.id,name:(0,p.jsx)("div",{className:"whitespace-normal",children:e.name}),paywalls:(0,p.jsx)("div",{className:"whitespace-normal",children:e.paywalls_summary_text}),actions:(0,p.jsx)("button",{type:"button",onClick:function(){return y({paywallGroup:e})},className:"paywall-groups-list__link",children:(0,n.t)("settings.paywall_groups.actions.edit")})}}));return(0,p.jsxs)("div",{className:"paywall-groups-list",children:[!r&&(0,p.jsx)("div",{className:"table-wrapper",children:(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("h3",{children:(0,n.t)("settings.paywall_groups.title")}),(0,p.jsx)(a.z,{variant:"circle",onClick:y,children:(0,n.t)("settings.paywall_groups.actions.create_group")})]})}),(0,p.jsx)(f,{}),(0,p.jsx)("div",{children:h?(0,p.jsx)(l.a,{}):(null===b||void 0===b?void 0:b.length)>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.s,{className:"!px-0",children:(0,p.jsx)(o.s.Title,{children:(0,n.t)("settings.paywall_groups.count",{count:b.length})})}),(0,p.jsx)(s.w,{columns:m,dataSource:g||[],hasStickyHeader:!0,headerClassName:"top-[63px]"})]})})]})}},75555:(e,t,r)=>{"use strict";r.d(t,{W:()=>c});var n=r(86013),i=r.n(n),o=r(88767),a=r(81089),s=r(50732),l=r(69647),c=function(e){var t=e.closeModal,r=void 0===t?null:t,n=e.refetchPaywallGroups,c=void 0===n?null:n,u=(0,l.p)(),d=u.success,p=u.error;return{useListPaywallGroups:function(){return(0,o.useQuery)("paywall-groups",(function(){return(0,a.UT)(s.av.paywallGroup.index())}))},updateMutation:(0,o.useMutation)((function(e){return(0,a.aU)(s.av.paywallGroup.update({paywallGroupId:e.id}),{paywall_group:e})}),{onSuccess:function(){d(i().t("settings.paywall_groups.alerts.success.updated")),r(),c()},onError:function(e){console.error(e.errorDetails),p(e.errorDetails,{duration:"long"})}}),createMutation:(0,o.useMutation)((function(e){return(0,a.Cu)(s.av.paywallGroup.create(),{paywall_group:e})}),{onSuccess:function(){d(i().t("settings.paywall_groups.alerts.success.created")),r(),c()},onError:function(e){console.error(e.errorDetails),p(e.errorDetails,{duration:"long"})}}),useGetPaywallGroup:function(e){return(0,o.useQuery)("paywall-group-show",(function(){return(0,a.UT)(s.av.paywallGroup.show({paywallGroupId:e}))}))}}}},89253:(e,t,r)=>{"use strict";r.d(t,{S:()=>u});var n=r(88767),i=r(11049),o=r(14856),a=r(69647),s=r(33090),l=r(85893),c=new n.QueryClient(o.Vr),u=function(){return(0,l.jsx)(a.V,{children:(0,l.jsx)(n.QueryClientProvider,{client:c,children:(0,l.jsx)(i.yB,{children:(0,l.jsx)(s.a,{})})})})}},55245:(e,t,r)=>{"use strict";r.d(t,{g:()=>h});var n=r(94184),i=r.n(n),o=r(86013),a=r(24185),s=r(45144),l=r(50732),c=r(36589),u=r(10161),d=r(8246),p=r(81786),f=r(88767),m=r(34334);var b=r(85893),h=function(){var e,t,r,n=(e=(0,f.useQuery)("community-onboarding",m.$.getOnboarding),t=e.isLoading,r=e.data,{mutateCommunityOnboarding:(0,f.useMutation)((function(){return m.$.completeOnboardingStep({onboarding:(e={},t="paywall_analytics_info",r=!0,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)});var e,t,r})).mutate,onboardingData:r,isOnboardingDataLoading:t}),h=n.onboardingData,v=n.isOnboardingDataLoading,y=n.mutateCommunityOnboarding,g=(0,a.k6)(),_=(0,c.I)().isV3Enabled;if(v||null!==h&&void 0!==h&&h.paywall_analytics_info)return null;return(0,b.jsxs)(s.v,{className:i()("border-primary mx-6 flex !w-auto justify-between border",{"mt-6":!_,"mt-4 lg:mx-9":_}),children:[(0,b.jsx)(d.Z.LabelSm,{children:(0,b.jsx)(u.w,{content:(0,o.t)("analytics_v2.paywall_snapshots.banner")})}),(0,b.jsx)(d.Z.LabelSm,{children:(0,b.jsx)(p.z,{onClick:function(){y(),g.push(l.lA.analytics_v2.payments)},variant:"plain",className:"!py-0 font-normal",children:(0,o.t)("analytics_v2.paywall_snapshots.button")})})]})}},51964:(e,t,r)=>{"use strict";r.d(t,{y:()=>q});var n=r(44828),i=r(45935),o=r(13288),a=r(67294),s=r(56031),l=r(92130),c=r(4108),u=r(85893);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=(0,a.createContext)({});f.displayName="BulkImportTrialPaywallSubscriptionFormContext";var m=function(e){var t=e.paywallId,r=e.paywallPriceId,n=e.paywallTrialDays,i=e.paywallCouponCode,o=e.skipDateValidations,p=e.hideNotifyMemberForm,m=e.children,b=d((0,a.useState)(null!==t&&void 0!==t?t:""),2),h=b[0],v=b[1],y=d((0,a.useState)(null!==r&&void 0!==r?r:""),2),g=y[0],_=y[1],x=d((0,a.useState)(null!==n&&void 0!==n?n:""),2),j=x[0],w=x[1],O=d((0,a.useState)(null!==i&&void 0!==i?i:""),2),S={paywallId:h,setPaywallId:v,paywallPriceId:g,setPaywallPriceId:_,paywallTrialDays:j,setPaywallTrialDays:w,paywallCouponCode:O[0],setPaywallCouponCode:O[1],isPaywallLoading:(0,l.O)({communityMemberId:null,status:o?c.n:[s.Tl.ACTIVE]}).paywallsListQuery.isLoading,skipDateValidations:Boolean(o),hideNotifyMemberForm:p};return(0,u.jsx)(f.Provider,{value:S,children:m})},b=function(){return(0,a.useContext)(f)},h=r(86013),v=r(10012),y=r(35584),g=r(8246),_=function(e){var t=e.label,r=void 0===t?"":t,n=e.children;return(0,u.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,u.jsx)("div",{className:"pb-2",children:(0,u.jsx)(g.Z.LabelSm,{weight:"semibold",children:r})}),n]})},x=r(96486),j=function(e){var t=e.name,r=e.options,n=e.onChange,i=void 0===n?x.noop:n,o=e.disabled,a=void 0!==o&&o,s=e.value,l=void 0===s?"":s;return(0,u.jsx)("select",{className:"disabled:bg-secondary form-control w-full",name:t,onChange:i,disabled:a,value:l,children:r.map((function(e){var t=e.label,r=e.value;return(0,u.jsx)("option",{value:r,children:t},r)}))})},w=function(){var e=b(),t=e.paywallId,r=e.paywallCouponCode,n=e.setPaywallCouponCode,i=e.skipDateValidations,o=(0,y.n)({paywallId:t,selectCouponString:(0,h.t)("bulk_import_page.paywall.choose_coupon"),couponStatuses:i?y.m:[v.DP.ACTIVE],skipDateValidations:i}).couponCodeOptions,s=(0,a.useRef)(t);return(0,a.useEffect)((function(){s.current!==t&&(n(""),s.current=t)}),[t,n]),(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.coupon"),children:(0,u.jsx)(j,{name:"paywall[paywall_coupon_code]",options:o,disabled:1===o.length,onChange:function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})},O=r(52995);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.disabled,r=void 0!==t&&t,n=b().hideNotifyMemberForm,i=S((0,a.useState)(!1),2),o=i[0],s=i[1];return n?null:(0,u.jsxs)("div",{className:"flex flex-col gap-y-4 pt-8",children:[(0,u.jsx)(g.Z.LabelSm,{weight:"semibold",children:(0,h.t)("bulk_import_page.paywall.notify_member")}),(0,u.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,u.jsx)(O.Zh,{field:"paywall[paywall_send_notification_subscription_created_by_admin]",disabled:r,value:o,onChange:function(){s(!o)}}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("span",{children:(0,h.t)("bulk_import_page.paywall.notify_member_description")})})]})]})};function C(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I={label:(0,h.t)("bulk_import_page.paywall.choose_paywall"),value:""},A=function(){var e=b(),t=e.paywallId,r=e.setPaywallId,n=e.skipDateValidations,i=(0,c.h)({communityMemberId:null,paywallStatuses:n?c.n:[s.Tl.ACTIVE]}).paywallOptions;return(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.paywall_id"),children:(0,u.jsx)(j,{name:"paywall[paywall_id]",options:[I].concat(C(i)),onChange:function(e){var n;r(null!==(n=e.target.value)&&void 0!==n?n:t)},value:t})})},E=r(66400);function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L={label:(0,h.t)("bulk_import_page.paywall.choose_term"),value:""},M=function(){var e=b(),t=e.paywallId,r=e.paywallPriceId,n=e.setPaywallPriceId,o=(0,i.U)().paywallsIndex,a=(0,E.n)({paywall:o[t]}).paywallPriceOptions;return(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.paywall_price_id"),children:(0,u.jsx)(j,{name:"paywall[paywall_price_id]",options:[L].concat(D(a)),disabled:0===a.length,onChange:function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})},R=r(94184),B=r.n(R),U=r(15649),F=r(48581),z=function(){var e=b(),t=e.paywallId,r=e.paywallTrialDays,n=e.setPaywallTrialDays,i=""===t,o=(0,a.useRef)(t);return(0,a.useEffect)((function(){o.current!==t&&(n(""),o.current=t)}),[t,n]),(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.trial_days_toggle"),children:(0,u.jsx)(F.I,{name:"paywall[paywall_trial_days]",suffix:(0,h.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:i,otherClassName:B()("",{"!opacity-100 !bg-secondary":i}),value:r,onChange:function(e){var t=""===e.target.value?NaN:Number(e.target.value);isNaN(t)?n(""):t<U.dy?n(1):t>U.ut?n(U.ut):n(t)}})})},V=function(){return b().isPaywallLoading?(0,u.jsx)(o.a,{}):(0,u.jsxs)("div",{className:"flex flex-col pb-6",children:[(0,u.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,u.jsx)(A,{}),(0,u.jsx)(M,{})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,u.jsx)(w,{}),(0,u.jsx)(z,{})]}),(0,u.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,u.jsx)(k,{})})]})},q=function(e){var t=e.paywall_id,r=e.paywall_price_id,o=e.paywall_trial_days,a=e.paywall_coupon_code,s=e.paywall_skip_date_validations,l=void 0===s||s,c=e.hide_notify_member_form,d=void 0!==c&&c;return(0,u.jsx)(n.aH,{children:(0,u.jsx)(i.X,{children:(0,u.jsx)(m,{paywallId:t,paywallPriceId:r,paywallTrialDays:o,paywallCouponCode:a,skipDateValidations:l,hideNotifyMemberForm:d,children:(0,u.jsx)(V,{})})})})}},81303:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var n=r(86013),i=r(8246),o=r(85893),a="settings.paywalls_admin_dashboard.filters.empty_page",s=function(){var e=(0,n.t)([a,"title"]),t=(0,n.t)([a,"subtitle"]);return(0,o.jsx)("div",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,o.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36",children:[(0,o.jsx)(i.Z.TitleSm,{weight:"bold",children:e}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)(i.Z.BodyMd,{color:"text-default",children:t})})]})})}},60569:(e,t,r)=>{"use strict";r.d(t,{x:()=>C});var n=r(86013),i=r(94184),o=r.n(i),a=r(70425),s=r(98899),l=r(9944),c=r(67294),u=r(96486);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.filters,r=e.defaultFilterItems,n=(0,a.Xt)(),i=n.queryParams,o=n.removeQueryParams,s=(0,u.flatten)(t.map((function(e){return e.filterKeys}))),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,t=d((0,c.useState)(e),2),r=t[0],n=t[1];return[r,{add:function(e){n((function(t){if(t.has(e))return t;var r=new Set(t);return r.add(e),r}))},remove:function(e){n((function(t){var r=new Set(t);return r.delete(e),r}))},reset:function(){n((function(){return e}))},clear:function(){n((function(){return new Set}))}}]}((function(){var e=new Set(r);return t.forEach((function(t){Object.keys(i).includes(t.name)&&e.add(t.name),void 0!=t.value&&e.add(t.name)})),e})),p=m(l,2),h=p[0],v=p[1],y=v.add,g=v.remove,_=v.clear,x=(0,c.useMemo)((function(){var e,t=0,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(Object.prototype.hasOwnProperty.call(i,o))return!0;h.has(o)&&(t+=1)}}catch(a){n.e(a)}finally{n.f()}return h.size>t}),[h,i,r]),j=(0,c.useCallback)((function(e){var t=f(h);return t.length?{availableFilters:e.filter((function(e){return!t.includes(e.name)})),displayedFilters:e.filter((function(e){return t.includes(e.name)}))}:{availableFilters:e,displayedFilters:[]}}),[h]);return{isClearFiltersShown:x,getSplitAndAvailableFilters:j,onClearFilters:function(){o(f(s)),_(),r.forEach(y)},onAddFilter:function(e){y(e)},onRemoveFilter:function(e,t){e||g(t)}}},y=r(85893),g=["isClearFiltersShown","onClearFilters"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t=e.defaultFilters,r=void 0===t?[]:t,n=e.customFilters,i=void 0===n?[]:n,c=e.defaultFilterItems,u=void 0===c?[]:c,d=e.className,p=e.showClearButton,f=void 0===p||p,m=e.label,b=v({filters:[].concat(w(r),w(i)),defaultFilterItems:u}),h=b.isClearFiltersShown,_=b.onClearFilters,j=S(b,g);return(0,y.jsxs)(l.I,{className:o()("w-full",d),children:[(0,y.jsx)(s.S,x({defaultFilters:r,customFilters:i,label:m},j)),f&&(0,y.jsx)(a.Cd,{isVisible:h,onClick:_})]})},k=r(61379),C=function(e){var t=e.filterNames,r=e.customFilterNames,i=(0,k.mN)(t,r).defaultFilters;return(0,y.jsx)(P,{label:(0,n.t)([k.po,"add_filter"]),defaultFilterItems:t,defaultFilters:i})}},61379:(e,t,r)=>{"use strict";r.d(t,{Oq:()=>Zt,lO:()=>Gt,po:()=>qt,oq:()=>Wt,mN:()=>Ht});var n=r(96486),i=r(86013),o=r(70425),a=r(20426),s=r(81407),l=r(81786),c=r(67687),u=r(85893);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t,r=e.lteValue,n=e.gteValue,o=e.localeRoot,p=e.queryParamsKey,f=(0,s.j)().onApply,m=function(e){return e.replace(/\D/g,"")},b=Intl.NumberFormat("en-US",{minimumFractionDigits:2}),h=(0,a.r)(),v=function(e){if("0.0"===e||""===e||null===e||void 0===e)return"";var t=Number(m(e));return isNaN(t)?b.format(0):b.format(t/100)};return(0,u.jsx)(c.l,{defaultValues:(t={},d(t,p.lte,v(r)),d(t,p.gte,v(n)),t),onSubmit:function(e){var t,r=parseInt(m(e[p.lte])),n=parseInt(m(e[p.gte]));f((d(t={},p.lte,r),d(t,p.gte,n),t))},children:(0,u.jsxs)("div",{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",children:[(0,u.jsx)(c.l.Input,{name:p.gte,placeholder:(0,i.t)([o,"min_amount_placeholder"]),autoFocus:!0,transformValue:v}),(0,u.jsx)(c.l.Input,{name:p.lte,placeholder:(0,i.t)([o,"max_amount_placeholder"]),transformValue:v}),(0,u.jsx)(l.z,{variant:h,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},f={amount:"amount",lte:"amount_lte",gte:"amount_gte"},m=function(e){var t=e.isInitialOpen,r=e.changeUrl,a=void 0===r||r,s=e.queryParamsKey,l=void 0===s?f:s,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.amount":c,m=(0,o.Xt)(),b=m.queryParams,h=m.updateUrl,v=b[l.lte],y=b[l.gte],g=Number(v)||0,_=Number(y)||0,x=isNaN(g)||isNaN(_)?"":(0,n.compact)([_/100,g/100]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"chip"]),title:(0,i.t)([d,"title"]),selectedText:x,isInitialOpen:t,onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[l.lte],n=t[l.gte];a&&(h("page",1),h(l.lte,isNaN(r)?null:r),h(l.gte,isNaN(n)?null:n))},shouldShowRemoveButton:!0,children:(0,u.jsx)(p,{lteValue:v,gteValue:y,localeRoot:d,queryParamsKey:l})})};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={amount_paid:"amount",lte:"amount_lte",gte:"amount_gte"},y="settings.paywalls_admin_dashboard.filters.amount",g={name:"amount",filterKeys:Object.values(v),component:function(e){return(0,u.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:v,localeRoot:y},e))},label:(0,i.t)([y,"chip"])};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={total_amount_paid:"total_amount_paid",lte:"total_amount_paid_lte",gte:"total_amount_paid_gte"},w="settings.paywalls_admin_dashboard.filters.total_amount_paid",O={name:"total_amount_paid",filterKeys:Object.values(j),component:function(e){return(0,u.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:j,localeRoot:w},e))},label:(0,i.t)([w,"chip"])},S=r(94719);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C="settings.paywalls_admin_dashboard.filters.status",N="status",I={name:"charge_status",filterKeys:[N],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=S.mB.map((function(e){return{label:(0,i.t)([C,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([C,"chip"]),title:(0,i.t)([C,"title"]),selectedText:a||l[N],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(N,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([C,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:l[N]})})},label:(0,i.t)([C,"chip"])},A=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,l=e.value,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.community_member_email":c,p=(0,o.Xt)(),f=p.queryParams,m=p.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:l||f.email,isInitialOpen:t,onApply:function(e){s&&m("email",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"email-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={name:"community_member_email",filterKeys:["email"],component:function(e){return(0,u.jsx)(A,D(D({},e),{},{onApply:n.noop}))},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_email","title"])},M=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,l=e.value,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.community_member_name":c,p=(0,o.Xt)(),f=p.queryParams,m=p.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:l||f.name,isInitialOpen:t,onApply:function(e){s&&m("name",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"name-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={name:"community_member_name",filterKeys:["name"],component:function(e){return(0,u.jsx)(M,B(B({},e),{},{onApply:n.noop}))},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_name","title"])},z=r(53242);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z="settings.paywalls_admin_dashboard.filters.currency",G="currency",W={name:"currency",filterKeys:["currency"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=(0,z.K)({includeTraded:!0}),p=d.data;if(d.isLoading||!p)return null;var f=p.map((function(e){return{label:e.code.toUpperCase(),value:e.code}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([Z,"chip"]),title:(0,i.t)([Z,"title"]),selectedText:a||l[G],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:f},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(G,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:f,legend:(0,i.t)([Z,"legend"]),name:"paywalls-filter",activeText:null!==a&&void 0!==a?a:l[G]})})},label:(0,i.t)([Z,"chip"])},H=r(67294),Q=r(36298),J=r(15953),K=r(87536),$=r(38776),X="settings.paywalls_admin_dashboard.filters.start_date",Y={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},ee="date_range",te="last_seven_days",re="last_four_weeks",ne="last_three_months",ie="last_twelve_months",oe="month_to_date",ae="quarter_to_date",se="year_to_date";function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=(0,H.forwardRef)((function(e,t){return(0,u.jsx)("input",ce(ce({},e),{},{className:"placeholder:text-light min-w-[18rem] border-none bg-transparent p-0 text-center text-xs font-medium leading-4 placeholder:opacity-100 focus:outline-none focus:ring-0",ref:t}))}));function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}de.displayName="DatePickerInput";var me=(0,H.createContext)(null);me.displayName="DateRangePickerContext";var be=function(e){var t=e.queryParamsKey,r=e.children,n=pe((0,H.useState)(null!==t&&void 0!==t?t:{}),2),i={queryParamsKey:n[0],setQueryParamsKey:n[1]};return(0,u.jsx)(me.Provider,{value:i,children:r})},he=function(){var e=(0,H.useContext)(me);if(!e)throw new Error("useDateRangePickerContext must be used within a DateRangePickerContext");return e};function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var je,we=r(27025);function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=(Oe(je={},te,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),endDate:e}})),Oe(je,re,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-28),endDate:e}})),Oe(je,ne,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),endDate:e}})),Oe(je,ie,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-12,e.getDate()),endDate:e}})),Oe(je,oe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:e}})),Oe(je,ae,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Math.floor(e.getMonth()/3),r=e.getFullYear();return{startDate:new Date(r,3*t,1),endDate:e}})),Oe(je,se,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),endDate:e}})),je),Pe=Object.assign((function(e){var t=e.children,r=e.className,n=void 0===r?"":r,i=e.defaultQueryParams,o=e.defaultValues,a=(0,s.j)().onApply;return(0,u.jsx)(be,{queryParamsKey:i,children:(0,u.jsx)(c.l,{onSubmit:a,defaultValues:o,children:(0,u.jsx)("div",{className:n,children:t})})})}),{RangePicker:function(){var e=he().queryParamsKey,t=(0,K.Gc)(),r=t.watch,i=t.setValue,o=r(e.default),a=(0,H.useRef)(null);if(o!==ee)return null;var s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1);return(0,u.jsx)(J.Z,{ref:a,options:{mode:"range",dateFormat:"M j, Y",defaultDate:[l,s],maxDate:s,onReady:function(){(0,n.defer)((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.flatpickr;(0,$.Z)(t,"flatPickrInstance is null"),t.calendarContainer.classList.add("settings-app")}))},static:!0},className:"w-full",render:function(e,t){return(0,u.jsx)("button",{type:"button",className:"border-primary focus-within:bg-tertiary text-selector-active focus-visible:!outline-secondary flex flex-col items-center justify-center gap-x-2 rounded-md border px-3 py-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:function(){var e,t,r;null===(e=a.current)||void 0===e||null===(t=e.flatpickr)||void 0===t||null===(r=t.open)||void 0===r||r.call(t)},children:(0,u.jsx)(de,ye({ref:t},e))})},onChange:function(t){var r=_e(t,2),n=r[0],o=r[1];n&&o&&(n.setHours(0,0,0,0),o.setHours(23,59,59,999),i(e.gte,n.getTime()),i(e.lte,o.getTime()))}})},DropdownOptions:function(){var e=he().queryParamsKey,t=(0,K.Gc)(),r=t.watch,n=t.setValue,o=r(e.default);(0,H.useEffect)((function(){if(Se[o]){var t=Se[o](),r=t.startDate,i=t.endDate;r.setHours(0,0,0,0),i.setHours(23,59,59,999),n(e.gte,r.getTime()),n(e.lte,i.getTime())}}),[o,e.gte,e.lte,n]);var a=[te,re,ne,ie,oe,ae,se,ee].map((function(e){return{value:e,label:(0,i.t)([X,"options",e])}}));return(0,u.jsx)(we.Lt,{onChange:function(t){n(e.default,t)},options:a,size:"full",className:"w-full rounded-lg border px-4 py-2",buttonWrapperClassName:"flex flex-col",linkType:"button",popperOptions:{modifiers:[{name:"offset",options:{offset:[34,15]}}]},button:(0,u.jsx)(we.Lt.ActiveLabelButton,{className:"flex w-full justify-between",options:a,activeOptionValue:o||te})})}});function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ie=function(e){var t,r=e.isInitialOpen,s=e.changeUrl,c=void 0===s||s,d=e.value,p=e.queryParamsKey,f=void 0===p?Y:p,m=e.localeRoot,b=void 0===m?X:m,h=(0,o.Xt)(),v=h.queryParams,y=h.updateUrl,g=Ce((0,H.useState)(te),2),_=g[0],x=g[1],j=(0,a.r)(),w=Number(v[f.lte]),O=Number(v[f.gte]),S=new Date(w),P=new Date(O),k=(0,n.compact)([isNaN(P.getTime())?null:(0,Q.w)({dateTime:P,format:Q.f.short_date}),isNaN(S.getTime())?null:(0,Q.w)({dateTime:S,format:Q.f.short_date})]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([b,"chip"]),title:(0,i.t)([b,"title"]),selectedText:d||k,isInitialOpen:r,renderSelectedText:function(){return k},onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[f.default],n=t[f.lte],i=t[f.gte];c&&(y("page",1),y(f.default,r),y(f.lte,n),y(f.gte,i)),x(r)},shouldShowRemoveButton:!0,children:(0,u.jsxs)(Pe,{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",defaultQueryParams:f,defaultValues:(t={},ke(t,f.default,_||te),ke(t,f.lte,null===S||void 0===S?void 0:S.getTime()),ke(t,f.gte,null===P||void 0===P?void 0:P.getTime()),t),children:[(0,u.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,u.jsx)(Pe.DropdownOptions,{}),(0,u.jsx)(Pe.RangePicker,{})]}),(0,u.jsx)(l.z,{variant:j,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})};function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te="settings.paywalls_admin_dashboard.filters.date",Le={default:"created_at",lte:"created_at_lte",gte:"created_at_gte"},Me={name:"created_at",filterKeys:Object.values(Le),component:function(e){return(0,u.jsx)(Ie,Ee(Ee({},e),{},{queryParamsKey:Le,localeRoot:Te}))},label:(0,i.t)([Te,"chip"])};function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe="settings.paywalls_admin_dashboard.filters.start_date",ze={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},Ve={name:"start_date",filterKeys:Object.values(ze),component:function(e){return(0,u.jsx)(Ie,Be(Be({},e),{},{queryParamsKey:ze,localeRoot:Fe}))},label:(0,i.t)([Fe,"chip"])},qe=r(13924),Ze=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=e.queryParamsKey,l=e.localeRoot,c=(0,o.Xt)(),d=c.queryParams,p=c.updateUrl,f=null!==a&&void 0!==a?a:d[s];return(0,u.jsx)(o.wn,{chip:(0,i.t)([l,"chip"]),title:(0,i.t)([l,"title"]),selectedText:a||d[s],renderSelectedText:function(){return f},isInitialOpen:t,onApply:function(e){p("page",1),n&&p(s,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(qe.x,{name:s,placeholder:(0,i.t)([l,"input_placeholder"]),autoFocus:!0,autoComplete:"off"})})};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe="settings.paywalls_admin_dashboard.filters.invoice_id",Je={name:"invoice_processor_id",filterKeys:["invoice_processor_id"],component:function(e){return(0,u.jsx)(Ze,We(We({},e),{},{localeRoot:Qe,queryParamsKey:"invoice_processor_id"}))},label:(0,i.t)([Qe,"chip"])};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye="settings.paywalls_admin_dashboard.filters.subscription_id",et={name:"subscription_processor_id",filterKeys:["subscription_processor_id"],component:function(e){return(0,u.jsx)(Ze,$e($e({},e),{},{localeRoot:Ye,queryParamsKey:"subscription_processor_id"}))},label:(0,i.t)([Ye,"chip"])};function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it="settings.paywalls_admin_dashboard.filters.transaction_id",ot={name:"transaction_id",filterKeys:["transaction_id"],component:function(e){return(0,u.jsx)(Ze,rt(rt({},e),{},{localeRoot:it,queryParamsKey:"transaction_id"}))},label:(0,i.t)([it,"chip"])},at=r(88767),st=r(81089),lt=r(50732),ct=r(47325),ut="members_directory.header.search.filters.member_name_or_email",dt="community_member_id",pt={name:"community_member_id",filterKeys:["community_member_id"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=null!==a&&void 0!==a?a:l[dt],p=(0,at.useQuery)(["community-members-subscription-community-member-id",d],(function(){return(0,st.UT)(lt.av.search.communityMembers.index({params:{page:1,per_page:10,filters:{id:d}}}))}),{enabled:!!d}).data,f=null===p||void 0===p?void 0:p.records[0];return(0,u.jsx)(o.wn,{chip:(0,i.t)([ut,"filter_chip"]),title:(0,i.t)([ut,"title"]),selectedText:d,renderSelectedText:function(){var e;return null!==(e=null===f||void 0===f?void 0:f.name)&&void 0!==e?e:d},isInitialOpen:t,onApply:function(e){n&&c(dt,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(ct.R,{record:f,recordType:"CommunityMember",searchInputPlaceholder:(0,i.t)([ut,"placeholder"]),onApply:function(e){c("page",1),n&&c(dt,e)}})})},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.members","chip"])},ft=r(14246),mt=r(65325),bt=r(13288);function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=e.localeRoot,l=e.queryParamsKey,c=e.filterName,d=e.filterParams,p=void 0===d?{}:d,f=(0,o.Xt)(),m=f.queryParams,b=f.updateUrl,h=(0,mt.k)(c,p),v=h.paywalls,y=h.isPaywallsLoading;return(0,u.jsx)(o.wn,{chip:(0,i.t)([s,"chip"]),title:(0,i.t)([s,"title"]),selectedText:a||m[l],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:v},e))},isInitialOpen:t,onApply:function(e){b("page",1),n&&b(l,e)},shouldShowRemoveButton:!0,children:y?(0,u.jsx)(bt.a,{}):(0,u.jsx)(o.l6,{options:v,legend:(0,i.t)([s,"legend"]),name:c,activeText:null!==a&&void 0!==a?a:m[l],hasSearch:!0,searchProps:{placeholder:(0,i.t)([s,"input_placeholder"])}})})};function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jt="settings.paywalls_admin_dashboard.filters.events",wt={name:"events",filterKeys:["events"],component:function(e){return(0,u.jsx)(yt,_t(_t({},e),{},{localeRoot:jt,queryParamsKey:"events",filterName:"event-paywalls-filter",filterParams:{type:[ft.Ex.event]}}))},label:(0,i.t)([jt,"chip"])};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kt="settings.paywalls_admin_dashboard.filters.paywalls",Ct={name:"paywalls",filterKeys:["paywalls"],component:function(e){return(0,u.jsx)(yt,St(St({},e),{},{localeRoot:kt,queryParamsKey:"paywalls",filterName:"paywalls-filter",filterParams:{type:[ft.Ex.space]}}))},label:(0,i.t)([kt,"chip"])},Nt=r(68997);function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Et="settings.paywalls_admin_dashboard.filters.platform",Dt="platform",Tt={name:"platform",filterKeys:[Dt],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=Object.values(Nt.VT).map((function(e){return{label:(0,i.t)([Et,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([Et,"chip"]),title:(0,i.t)([Et,"title"]),selectedText:a||l[Dt],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(Dt,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([Et,"legend"]),name:"platform-filter",activeText:null!==a&&void 0!==a?a:l[Dt]})})},label:(0,i.t)([Et,"chip"])},Lt=r(21147);function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bt="settings.paywalls_admin_dashboard.filters.status",Ut="status",Ft={name:"subscription_status",filterKeys:[Ut],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=Lt.mB.map((function(e){return{label:(0,i.t)([Bt,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([Bt,"chip"]),title:(0,i.t)([Bt,"title"]),selectedText:a||l[Ut],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(Ut,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([Bt,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:l[Ut]})})},label:(0,i.t)([Bt,"chip"])};function zt(e){return function(e){if(Array.isArray(e))return Vt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qt="settings.paywalls_admin_dashboard.filters",Zt={community_member_id:pt,currency:W,created_at:Me,community_member_email:L,community_member_name:F,paywalls:Ct,platform:Tt,amount:g,charge_status:I,invoice_processor_id:Je,transaction_id:ot,events:wt,subscription_status:Ft,subscription_id:et,total_amount_paid:O,start_date:Ve},Gt={subscriptions:{community_member_id:"community_member_id",currency:"currency",email:"email",paywalls:"paywall_ids",platform:"platform",name:"query",start_date_gte:"created_at_gte",start_date_lte:"created_at_lte",status:"status",subscription_processor_id:"processor_id",total_amount_paid_gte:"total_amount_paid_gte",total_amount_paid_lte:"total_amount_paid_lte"},charges:{amount_gte:"amount_gte",amount_lte:"amount_lte",community_member_id:"community_member_id",created_at_gte:"created_at_gte",created_at_lte:"created_at_lte",currency:"currency",email:"email",invoice_processor_id:"invoice_processor_id",paywalls:"paywall_ids",platform:"platform",events:"paywall_ids",name:"query",status:"display_status",subscription_processor_id:"subscription_processor_id",transaction_id:"processor_id"}},Wt=function(e,t){var r={};return Object.keys(t).forEach((function(n){if(e[n]){var i=t[n];r[i]=e[n]}})),r},Ht=function(e,t){var r=(0,n.compact)((null!==e&&void 0!==e?e:[]).map((function(e){return Zt[e]}))),i=(0,n.compact)((null!==t&&void 0!==t?t:[]).map((function(e){return Zt[e]})));return{defaultFilters:[].concat(zt(r),zt(i))}}},91500:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s,L:()=>l});var n=r(67294),i=r(70254),o=r(61379),a=function(e){var t=(0,i.t)();return(0,n.useMemo)((function(){return Object.keys(o.lO[e]).some((function(e){return!!t[e]}))}),[t,e])},s=function(){return a("charges")},l=function(){return a("subscriptions")}},2347:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(98338),i=function(){var e,t=(0,n.wh)().currentCommunity;return null===t||void 0===t||null===(e=t.policies)||void 0===e?void 0:e.is_paywall_payment_settings_available}},48925:(e,t,r)=>{"use strict";r.d(t,{y:()=>fe});var n=r(88767),i=r(14856),o=r(69647),a=r(86013),s=r(90697),l=r(84432),c=r(98338),u=r(74481),d=r(62345),p=r(73453),f=r(67687),m=r(13288),b=r(55245),h=r(60569),v=r(91500),y=r(3361),g=r(71930),_=r(81303),x=r(67294),j=r(11858),w=r(75369);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k,C,N=r(85893),I=function(e){var t=e.chargesData,r=e.activeFilterTab,n=e.refetchAllCharges,i=function(e){var t=e.chargesData;(0,x.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.charges)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalCharges)>0&&t.setPage(1)}));var r=(0,w.p)().defaultColumnsToRender,n=(0,j.a)(),i=function(e){var t=e.cell,r=t.column.id,i=t.row.original;"customer"!==r&&n.show({charge:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){t.setPage(e)},columnsToRender:r.map((function(e){return S(S({},e),{},{onClick:i})}))}}({chargesData:t}),o=i.onClickPagination,a=i.columnsToRender;return t.hasFilters&&0===t.totalCharges&&!t.isLoadingCharges?(0,N.jsx)(_.n,{}):(0,N.jsx)(g.O,{shouldOpenAdminMemberEdit:!0,refetchAllCharges:n,children:(0,N.jsx)(y.u,{columnsToRender:a,chargesData:t,onClickPagination:o},r)})},A=r(70842),E=r(81786),D=function(e){var t=e.totalChargesCount,r=(0,A.Q)().show,n=t<=0;return(0,N.jsx)(E.z,{variant:"circle",onClick:function(){r({relation:"charges"})},type:"button",disabled:n,children:(0,a.t)("export_paywall_csv.modal.export_cta")})},T=r(58253),L=r(11745),M=function(e){var t=e.totalChargesCount;return t<=0?null:(0,N.jsx)(T.w.Headline,{className:"flex flex-row",children:(0,N.jsx)(T.w.Headline.Title,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.count",{count:(0,L.V)(t)})})})},R=r(94184),B=r.n(R),U=r(36589),F=r(65712),z=r(50732),V=function(){var e,t=(0,o.p)().error,r=(0,U.I)().isV3Enabled,i=(0,c.wh)().currentCommunitySettings,s=null===i||void 0===i?void 0:i.paywall_snapshots_enabled,l={isChargeStatsLoading:(e=(0,n.useQuery)(z.av.admin.paywalls.charges.stats.index())).isLoading,chargeStats:e.data,chargeStatsError:e.error},u=l.isChargeStatsLoading,d=l.chargeStats,p=l.chargeStatsError;if((0,x.useEffect)((function(){p&&t(p.message)}),[p,t]),!s)return null;if(!u&&p)return null;var f=[{label:(0,a.t)("settings.paywall_charge_stats.total_revenue.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_revenue.tooltip"),value:null===d||void 0===d?void 0:d.total_revenue_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.total_refunded.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_refunded.tooltip"),value:null===d||void 0===d?void 0:d.total_refunded_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.sales_taxes.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.sales_taxes.tooltip"),value:null===d||void 0===d?void 0:d.sales_taxes_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.tooltip"),value:null===d||void 0===d?void 0:d.affiliate_earnings_as_currency}];return(0,N.jsx)(N.Fragment,{children:u?(0,N.jsx)(m.a,{center:!0}):(0,N.jsx)("div",{className:B()("my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",{"lg:px-9":r}),children:f.map((function(e){return(0,N.jsx)(F.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},q=r(6952),Z=r(87536),G=r(39591),W=r(94719);function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q={ALL:"all",PAID:"paid",REFUNDED:"refunded",FAILED:"failed"},J=(H(k={},Q.ALL,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.all")),H(k,Q.PAID,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.paid")),H(k,Q.REFUNDED,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.refunded")),H(k,Q.FAILED,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.failed")),k),K=(H(C={},Q.ALL,null),H(C,Q.PAID,[W.Q_.PAID,W.Q_.PARTIAL_REFUNDED].join(",")),H(C,Q.REFUNDED,W.Q_.REFUNDED),H(C,Q.FAILED,W.Q_.FAILED),C);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=function(e,t,r){var n=(0,G.B)({filters:{display_status:K[Q.ALL]},perPage:1}),i=(0,G.B)({filters:{display_status:K[Q.PAID]},perPage:1}),o=(0,G.B)({filters:{display_status:K[Q.REFUNDED]},perPage:1}),a=(0,G.B)({filters:{display_status:K[Q.FAILED]},perPage:1}),s=[[Q.ALL,n],[Q.PAID,i],[Q.REFUNDED,o],[Q.FAILED,a]].map((function(e){var t=$(e,2),r=t[0],n=t[1];return{value:r,label:J[r],badge:{value:n.totalCharges}}})),l=(0,Z.Gc)().reset;return{tabOptions:s,changeTabAndResetForm:function(n){l({searchKey:""}),t(""),e(n),r()}}}(t,e.setSearchKey,e.resetAllChargesToFirstPage),i=n.tabOptions,o=n.changeTabAndResetForm,a=i.findIndex((function(e){return e.value===r}));return(0,N.jsx)(q.O.Group,{selectedIndex:a,children:(0,N.jsx)(q.O.ListWrapper,{children:(0,N.jsx)(q.O.List,{children:i.map((function(e){return(0,N.jsxs)(q.O,{onClick:function(){return o(e.value)},children:[e.label,(0,N.jsx)(q.O.Counter,{children:e.badge.value})]},String(e.value))}))})})})},ee=r(24185),te=r(70254),re=r(61379),ne=r(56421);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce={created_at:"desc"},ue=["currency","transaction_id","invoice_processor_id"],de=function(){var e,t=function(){var e,t=(0,ee.k6)(),r=(0,te.t)(),i=r.tab,o=void 0===i?Q.ALL:i,a=r.search_key,s=void 0===a?"":a,l=r.page,c=void 0===l?1:l,u=r.status,d=se((0,x.useState)((0,ne.EW)(c)),2),p=d[0],f=d[1],m=se((0,x.useState)(Object.values(Q).includes(o)?o:Q.ALL),2),b=m[0],h=m[1],v=se((0,x.useState)(s),2),y=v[0],g=v[1],_=function(e,t,r){return e===t?r:""},j=function(e,r){var n=(0,z.m_)(e,r);t.push("?".concat(n))},w=function(e){j("page",String(e)),f(e)};(0,x.useEffect)((function(){j("tab",b),u||j("status",K[b])}),[]);var O=(0,G.B)({searchKeyParams:_(b,Q.ALL,y),orderParam:ce,filters:(0,re.oq)(oe({},r),re.lO.charges),page:p,setPage:w,enabled:b===Q.ALL}),S=(0,G.B)({searchKeyParams:_(b,Q.PAID,y),orderParam:ce,filters:(0,re.oq)(oe({},r),re.lO.charges),page:p,setPage:w,enabled:b===Q.PAID}),P=(0,G.B)({searchKeyParams:_(b,Q.REFUNDED,y),orderParam:ce,filters:(0,re.oq)(oe({display_status:K[Q.REFUNDED]},r),re.lO.charges),page:p,setPage:w,enabled:b===Q.REFUNDED}),k=(0,G.B)({searchKeyParams:_(b,Q.FAILED,y),orderParam:ce,filters:(0,re.oq)(oe({display_status:K[Q.FAILED]},r),re.lO.charges),page:p,setPage:w,enabled:b===Q.FAILED}),C=(0,n.useQueryClient)();return{chargesDataByTab:(ae(e={},Q.ALL,O),ae(e,Q.PAID,S),ae(e,Q.REFUNDED,P),ae(e,Q.FAILED,k),e),activeFilterTab:b,setActiveFilterTab:function(e){h(e),j("tab",e),j("status",K[e]),g("")},defaultValues:{searchKey:y},setSearchKey:g,refetchAllCharges:function(){C.clear(),O.refetchCharges(),S.refetchCharges(),P.refetchCharges(),k.refetchCharges()},resetAllChargesToFirstPage:function(){w(1),O.setOrder(ce),S.setOrder(ce),P.setOrder(ce),k.setOrder(ce)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0},isLoadingCharges:O.isLoadingCharges}}(),r=t.chargesDataByTab,i=t.activeFilterTab,o=t.setActiveFilterTab,y=t.setSearchKey,g=t.defaultValues,_=t.refetchAllCharges,j=t.resetAllChargesToFirstPage,w=t.showStats,O=t.isLoadingCharges,S=null===(e=r[Q.ALL])||void 0===e?void 0:e.totalCharges,P=(0,c.wh)(),k=P.currentCommunity,C=P.currentCommunitySettings,A=(0,v.Q)(),E=null===C||void 0===C?void 0:C.paywall_snapshots_enabled,T=(0,d.o)().isPaymentProcessorEnabled,L=(0,u.yK)(null===k||void 0===k?void 0:k.payment_processors)?["platform"]:[],R=["community_member_name","community_member_email","community_member_id","charge_status","paywalls"].concat(L,["events","amount","created_at","subscription_id"]),B=i?String(i):Q.ALL;return O?(0,N.jsx)("div",{className:"flex h-full",children:(0,N.jsx)(m.a,{center:!0})}):O||A||0!==S&&T?(0,N.jsxs)(f.l,{onSubmit:function(e){var t=e.searchKey;return y(t)},defaultValues:g,children:[(0,N.jsx)(s.b,{leftContent:(0,N.jsx)(l.y,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.title")}),rightContent:(0,N.jsx)(D,{totalChargesCount:S}),filters:(0,N.jsx)(Y,{setActiveFilterTab:o,activeFilterTab:B,setSearchKey:y,resetAllChargesToFirstPage:j}),hasBorder:!1}),!E&&(0,N.jsx)(b.g,{}),(0,N.jsx)(h.x,{filterNames:R,customFilterNames:ue}),(0,N.jsx)(M,{totalChargesCount:S}),E&&T&&w()&&(0,N.jsx)(V,{}),(0,N.jsx)(I,{activeFilterTab:B,chargesData:r[B],refetchAllCharges:_})]}):(0,N.jsx)(p._,{isPaymentProcessorEnabled:T,i18nBase:"settings.paywalls_admin_dashboard.charges",redirectToPaywalls:!0})},pe=new n.QueryClient(i.Vr),fe=function(){return(0,N.jsx)(o.V,{children:(0,N.jsx)(n.QueryClientProvider,{client:pe,children:(0,N.jsx)(de,{})})})}},28751:(e,t,r)=>{"use strict";r.d(t,{y:()=>le});var n=r(69647),i=r(86013),o=r(90697),a=r(84432),s=r(98338),l=r(74481),c=r(62345),u=r(73453),d=r(67687),p=r(13288),f=r(55245),m=r(60569),b=r(91500),h=r(70842),v=r(81786),y=r(85893),g=function(e){var t=e.totalSubscriptionsCount,r=(0,h.Q)().show,n=t<=0;return(0,y.jsx)(v.z,{variant:"circle",onClick:function(){r({relation:"subscriptions"})},type:"button",disabled:n,children:(0,i.t)("export_paywall_csv.modal.export_cta")})},_=r(58253),x=r(11745),j=function(e){var t=e.totalSubscriptionsCount;return t<=0?null:(0,y.jsx)(_.w.Headline,{className:"flex flex-row",children:(0,y.jsx)(_.w.Headline.Title,{children:(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.count",{count:(0,x.V)(t)})})})},w=r(67294),O=r(65712),S=r(88767),P=r(50732),k=function(){var e,t=(0,n.p)().error,r=(0,s.wh)().currentCommunitySettings,o=null===r||void 0===r?void 0:r.paywall_snapshots_enabled,a={isSubscriptionStatsLoading:(e=(0,S.useQuery)(P.av.admin.paywalls.subscriptions.stats.index())).isLoading,subscriptionStats:e.data,subscriptionStatsError:e.error},l=a.isSubscriptionStatsLoading,c=a.subscriptionStats,u=a.subscriptionStatsError;if((0,w.useEffect)((function(){u&&t(u.message)}),[u]),!o)return null;if(!l&&u)return null;var d=[{label:(0,i.t)("settings.paywall_subscription_stats.mrr.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.mrr.tooltip"),value:null===c||void 0===c?void 0:c.mrr_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.arr.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.arr.tooltip"),value:null===c||void 0===c?void 0:c.arr_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.avg_mrr_per_member.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.avg_mrr_per_member.tooltip"),value:null===c||void 0===c?void 0:c.avg_mrr_per_member_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.churn_rate.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.churn_rate.tooltip"),value:null===c||void 0===c?void 0:c.churn_rate_as_percentage}];return(0,y.jsx)(y.Fragment,{children:l?(0,y.jsx)(p.a,{center:!0}):(0,y.jsx)("div",{className:"my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",children:d.map((function(e){return(0,y.jsx)(O.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},C=r(57544),N=r(2509),I=r(81303),A=r(45995),E=r(13594);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M,R=function(e){var t=e.activeFilterTab,r=e.subscriptionsDataByTab,n=e.refetchAllSubscriptions,i=r[t],o=function(e){var t=e.subscriptionData;(0,w.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.subscriptions)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalSubscriptions)>0&&(null===t||void 0===t||t.setPage(1),null===t||void 0===t||t.refetchSubscriptions())}));var r=(0,E.p)().defaultColumnsToRender,n=(0,A.X)(),i=function(e){var t=e.cell,r=t.column.id,i=t.row.original;"customer"!==r&&n.show({subscription:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){null===t||void 0===t||t.setPage(e),null===t||void 0===t||t.refetchSubscriptions()},columnsToRender:r.map((function(e){return T(T({},e),{},{onClick:i})}))}}({subscriptionData:i}),a=o.onClickPagination,s=o.columnsToRender;return i.hasFilters&&0===i.totalSubscriptions&&!i.isLoadingSubscriptions?(0,y.jsx)(I.n,{}):(0,y.jsx)(N.n,{shouldOpenAdminMemberEdit:!0,refetchAllSubscriptions:n,children:(0,y.jsx)(C.s,{columnsToRender:s,subscriptionData:i,onClickPagination:a},t)})},B=r(6952),U=r(87536),F=r(21147),z=r(97971);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q={ALL:"all",ACTIVE:"active",CANCELED:"canceled"},Z=(V(M={},q.ALL,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.all")),V(M,q.ACTIVE,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.active")),V(M,q.CANCELED,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.canceled")),M);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H,Q=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=function(e,t,r){var n=(0,z.p)({perPage:1}),i=(0,z.p)({filters:{status:F.vC.join(",")},perPage:1}),o=(0,z.p)({filters:{status:F.Q_.CANCELED},perPage:1}),a=[[q.ALL,n],[q.ACTIVE,i],[q.CANCELED,o]].map((function(e){var t=G(e,2),r=t[0],n=t[1];return{value:r,label:Z[r],badge:{value:n.totalSubscriptions}}})),s=(0,U.Gc)().reset;return{tabOptions:a,changeTabAndResetSearchForm:function(n){s({searchKey:""}),t(""),r(),e(n)}}}(t,e.setSearchKey,e.resetAllSubscriptionToFirstPage),i=n.tabOptions,o=n.changeTabAndResetSearchForm,a=i.findIndex((function(e){return e.value===r}));return(0,y.jsx)(B.O.Group,{selectedIndex:a,children:(0,y.jsx)(B.O.ListWrapper,{children:(0,y.jsx)(B.O.List,{children:i.map((function(e){return(0,y.jsxs)(B.O,{onClick:function(){return o(e.value)},children:[e.label,(0,y.jsx)(B.O.Counter,{children:e.badge.value})]},String(e.value))}))})})})},J=r(24185),K=r(70254),$=r(61379),X=r(56421);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie={created_at:"desc"},oe=(ne(H={},q.ALL,null),ne(H,q.ACTIVE,F.vC.join(",")),ne(H,q.CANCELED,F.Q_.CANCELED),H),ae=["total_amount_paid","currency"],se=function(){var e,t=function(){var e,t=(0,J.k6)(),r=(0,K.t)(),n=r.tab,i=void 0===n?q.ALL:n,o=r.search_key,a=void 0===o?"":o,s=r.page,l=void 0===s?1:s,c=r.status,u=te((0,w.useState)(Object.values(q).includes(i)?i:q.ALL),2),d=u[0],p=u[1],f=te((0,w.useState)(a),2),m=f[0],b=f[1],h=te((0,w.useState)((0,X.EW)(l)),2),v=h[0],y=h[1],g=function(e,r){var n=(0,P.m_)(e,r);t.push("?".concat(n))},_=function(e){g("page",String(e)),y(e)},x=function(e,t,r){return e===t?r:""};(0,w.useEffect)((function(){g("tab",d),c||g("status",oe[d])}),[]);var j=(0,z.p)({pageParam:v,perPage:10,orderParam:ie,searchKeyParams:x(d,q.ALL,m),filters:(0,$.oq)(r,$.lO.subscriptions),enabled:d===q.ALL,page:v,setPage:_}),O=(0,z.p)({pageParam:v,perPage:10,orderParam:ie,searchKeyParams:x(d,q.ACTIVE,m),filters:(0,$.oq)(ee({},r),$.lO.subscriptions),enabled:d===q.ACTIVE,page:v,setPage:_}),k=(0,z.p)({pageParam:v,perPage:10,orderParam:ie,searchKeyParams:x(d,q.CANCELED,m),filters:(0,$.oq)(ee({},r),$.lO.subscriptions),enabled:d===q.CANCELED,page:v,setPage:_}),C=(0,S.useQueryClient)();return{subscriptionsDataByTab:(ne(e={},q.ALL,j),ne(e,q.ACTIVE,O),ne(e,q.CANCELED,k),e),resetAllSubscriptionToFirstPage:function(){_(1),j.setOrder(ie),O.setOrder(ie),k.setOrder(ie)},refetchAllSubscriptions:function(){C.invalidateQueries({queryKey:[z.D]})},activeFilterTab:d,setActiveFilterTab:function(e){p(e),g("status",oe[e]),g("tab",e)},defaultValues:{searchKey:m},setSearchKey:b,onSubmit:function(e){var t=e.searchKey;b(void 0===t?"":t)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0},isLoadingSubscriptions:j.isLoadingSubscriptions}}(),r=t.subscriptionsDataByTab,n=t.resetAllSubscriptionToFirstPage,h=t.activeFilterTab,v=t.setActiveFilterTab,_=t.defaultValues,x=t.refetchAllSubscriptions,O=t.setSearchKey,C=t.onSubmit,N=t.showStats,I=t.isLoadingSubscriptions,A=(0,s.wh)(),E=A.currentCommunity,D=A.currentCommunitySettings,T=null===E||void 0===E?void 0:E.payment_processor,L=(0,b.L)(),M=_,B=null===D||void 0===D?void 0:D.paywall_snapshots_enabled,U=h?String(h):q.ALL,F=null===(e=r[U])||void 0===e?void 0:e.totalSubscriptions,V=(0,c.o)().isPaymentProcessorEnabled,Z=(0,l.yK)(null===E||void 0===E?void 0:E.payment_processors)?["platform"]:[],G=["community_member_name","community_member_email","community_member_id","subscription_status","paywalls"].concat(Z,["start_date","subscription_id"]);return I?(0,y.jsx)("div",{className:"flex h-full",children:(0,y.jsx)(p.a,{center:!0})}):I||L||0!==F&&V?(0,y.jsxs)(d.l,{onSubmit:C,defaultValues:M,children:[(0,y.jsx)(o.b,{leftContent:(0,y.jsx)(a.y,{children:(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.title")}),rightContent:(0,y.jsx)(g,{totalSubscriptionsCount:F}),filters:(0,y.jsx)(Q,{setActiveFilterTab:v,activeFilterTab:U,setSearchKey:O,resetAllSubscriptionToFirstPage:n}),hasBorder:!1}),!B&&(0,y.jsx)(f.g,{}),(0,y.jsx)(m.x,{filterNames:G,customFilterNames:ae}),(0,y.jsx)(j,{totalSubscriptionsCount:F}),B&&T&&N()&&(0,y.jsx)(k,{}),(0,y.jsx)(R,{activeFilterTab:U,subscriptionsDataByTab:r,refetchAllSubscriptions:x})]}):(0,y.jsx)(u._,{isPaymentProcessorEnabled:V,i18nBase:"settings.paywalls_admin_dashboard.subscriptions",redirectToPaywalls:!0})},le=function(){return(0,y.jsx)(n.V,{children:(0,y.jsx)(se,{})})}},15649:(e,t,r)=>{"use strict";r.d(t,{dy:()=>n,L3:()=>i,ut:()=>o,vf:()=>a});var n=1,i=0,o=730,a=6},98627:(e,t,r)=>{"use strict";r.d(t,{I:()=>En});var n=r(11049),i=r(98338),o=r(67687),a=r(13288),s=r(82177),l=r(53103),c=r(86013),u=r.n(c),d=r(87536),p=r(85893),f=function(e){var t=e.isPaywallNew,r=(0,d.Gc)().control,n=(0,d.qo)({control:r,name:"display_name"}),i=(0,c.t)("settings.paywalls.modal.no_title_available");return(0,p.jsx)(p.Fragment,{children:t?(0,c.t)("settings.paywalls.modal.title_creation",{paywall_name:null!==n&&void 0!==n?n:i}):(0,c.t)("settings.paywalls.modal.title_editing",{paywall_name:n})})},m=r(56031),b=r(62557),h=r(94184),v=r.n(h),y=r(8246),g=function(e){var t=e.title;return(0,p.jsx)("div",{className:"pt-7",children:(0,p.jsx)(y.Z.TitleSm,{weight:"semibold",children:t})})},_=r(13359),x=r(12510),j=r(44032),w="settings.paywalls.modal_add_space_group_confirmation",O=n.gk.create((function(e){var t=e.action,r=e.spaceGroups,i=(0,n.dd)(),o=function(){i.hide(),i.remove()};return(0,p.jsx)(j.c,{isOpen:i.visible,title:(0,c.t)([w,"title"]),onClose:o,cancelText:(0,c.t)([w,"cancel"]),onConfirm:function(){t(),o()},confirmVariant:"primary",confirmText:(0,c.t)([w,"confirm"]),children:(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)([w,"description"],{count:r.length,space_groups:r.map((function(e){return e.name})).join(", ")})})})})),S="settings.paywalls.modal_remove_space_confirmation",P=n.gk.create((function(e){var t=e.action,r=e.spaces,i=(0,n.dd)(),o=function(){i.hide(),i.remove()};return(0,p.jsx)(j.c,{isOpen:i.visible,title:(0,c.t)([S,"title"]),onClose:o,cancelText:(0,c.t)(["cancel"]),onConfirm:function(){t(),o()},confirmVariant:"primary",confirmText:(0,c.t)(["confirm"]),children:(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)([S,"description"],{count:r.length,space_groups:r.map((function(e){return e.name})).join(", ")})})})})),k=function(e){return{id:e.id,name:e.name,properties:{automatically_add_members_to_new_spaces:e.automatically_add_members_to_new_spaces},spaces:[]}},C=function(){var e=(0,x.zo)({serializeSpaceGroup:k,serializeSpace:x.lV}),t=e.options,r=e.spaceGroupIndex,i=e.spaceRecords,o=(0,d.Gc)().watch,a=o("space_group_ids"),s=o("id"),l=(0,n.dd)(O).show,c=(0,n.dd)(P).show;return{options:t,addSpaceGroupCallback:function(e,t){var n,i;n=t.id,(null===(i=r[n])||void 0===i?void 0:i.properties.automatically_add_members_to_new_spaces)?l({action:e,spaceGroups:[t]}):e()},addAllSpaceGroupCallback:function(e){var r=t.filter((function(e){return!a.includes(e.id)&&e.properties.automatically_add_members_to_new_spaces}));r.length>0?l({action:e,spaceGroups:r}):e()},removeSpaceCallback:function(e,t){var r=i.filter((function(e){return e.id===t.id&&function(e){var t,r,n,i=null===(t=e.lock_screen_blocks)||void 0===t?void 0:t.find((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paywalls}));return!(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(n=r.paywalls)||void 0===n||!n.find((function(e){return e.id===s})))}(e)}));r.length>0?c({action:e,spaces:r}):e()}}},N=function(){var e=C(),t=e.options,r=e.addSpaceGroupCallback,n=e.addAllSpaceGroupCallback,i=e.removeSpaceCallback;return(0,p.jsxs)(_.i,{options:t,className:"flex-auto",children:[(0,p.jsx)(_.i.Header,{children:(0,p.jsx)(_.i.SearchBar,{})}),(0,p.jsxs)(_.i.Body,{className:"overflow-y-auto",children:[(0,p.jsxs)(_.i.ListHeader,{className:"min-h-[3rem]",children:[(0,p.jsx)(_.i.ListHeaderColumnNoAccess,{onAddAll:n}),(0,p.jsx)(_.i.ListHeaderColumnAccessGranted,{})]}),(0,p.jsxs)(_.i.ListContainer,{children:[(0,p.jsx)(_.i.ListMobile,{onAddParent:r}),(0,p.jsx)(_.i.ListNoAccess,{onAddParent:r}),(0,p.jsx)(_.i.ListAccessGranted,{onRemoveChild:i})]})]})]})},I=function(){var e=(0,d.Gc)().control,t=(0,d.qo)({control:e,name:"all_spaces"}),r=v()("paywalls-admin-drawer-access-tab__container px-4 h-[60vh] flex flex-col pb-4",{"drawer-access-expand":!t});return(0,p.jsxs)("div",{className:r,children:[(0,p.jsx)(g,{title:(0,c.t)("settings.paywalls.modal.tabs.access.title")}),(0,p.jsx)(o.l.Item,{name:"all_spaces",translationRoot:"settings.paywalls.modal.tabs.access",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.access.all_spaces_tooltip"),inline:!0,hideBorder:!0,hideDescription:!0,className:"flex flex-row-reverse items-center gap-x-4",children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})}),!t&&(0,p.jsx)(N,{}),t&&(0,p.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 text-center",children:[(0,p.jsx)(y.Z.TitleSm,{color:"text-selector-active",weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.access.all_access_title")}),(0,p.jsx)(y.Z.LabelSm,{color:"text-selector-active",children:(0,c.t)("settings.paywalls.modal.tabs.access.all_access_subtitle")})]})]})},A=r(67294),E=r(31304),D=r.n(E),T=function(e){return D()(null!==e&&void 0!==e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}).split("?coupon_code=")[0]},L=function(e,t){return t.checkout_path?"":D()(null!==e&&void 0!==e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!1}).split("?coupon_code=")[1]||""},M=r(83221);function R(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(){var e=(0,d.Gc)(),t=e.formState,r=e.control,n=e.setValue,i=e.getValues,a=e.watch,s=(0,d.qo)({control:r,name:"checkout_path"}),l=a("id"),u=(0,M.pI)({paywallId:l||"",enabled:!0}).paywallCouponsListQuery.data,f=B((0,A.useState)([]),2),m=f[0],b=f[1],h=L(s,t.dirtyFields),v=B((0,A.useState)(""!==h),2),y=v[0],g=v[1];(0,A.useEffect)((function(){if(u){var e=u.map((function(e){return{label:e.code,value:e.code}}));b(e),h&&!t.dirtyFields.coupon_selector&&n("coupon_selector",h)}}),[u,h,t.dirtyFields.coupon_selector,n]);return(0,p.jsxs)("div",{className:"flex flex-col gap-y-2.5",children:[(0,p.jsx)(o.l.Item,{labelClassName:"!font-normal",name:"auto_apply_coupon",translationRoot:"settings.paywalls.modal.tabs.details",fullWidth:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_tooltip"),hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{"data-testid":"auto_apply_coupon",name:"auto_apply_coupon_toggle",variant:"small",onToggleChange:function(e){if(g(e),!e){n("coupon_selector","");var t=T(s);n("checkout_path",t)}},checked:y})}),y&&(0,p.jsx)(o.l.Item,{className:"!pt-2",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,name:"coupon_selector",translationRoot:"settings.paywalls.modal.tabs.details",children:(0,p.jsx)(o.l.SelectNative,{name:"coupon_selector",options:[{label:(0,c.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_placeholder"),value:""}].concat(R(m)),value:i("coupon_selector")})})]})},V=r(96146),q=r(42550),Z=function(e){var t,r,n,i,a,s,l,u,f,m=e.requiresCurrency,b=e.canChangeCurrency,h=(t=(0,d.Gc)(),r=t.control,n=t.getValues,i=t.setValue,a=t.setFocus,s=t.formState,l=(0,d.qo)({control:r,name:"display_name"}),u=(0,d.qo)({control:r,name:"coupon_selector"}),f=(0,d.qo)({control:r,name:"checkout_path"}),(0,A.useEffect)((function(){i("checkout_path",D()(null!==f&&void 0!==f?f:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}))}),[f]),(0,A.useEffect)((function(){(""===f||s.dirtyFields.display_name&&!s.dirtyFields.checkout_path)&&i("checkout_path",l)}),[l]),(0,A.useEffect)((function(){var e=T(f),t=n("coupon_selector"),r=L(f,s.dirtyFields),o=t?"?coupon_code=".concat(encodeURIComponent(t)):r?"?coupon_code=".concat(encodeURIComponent(r)):"",a=r&&!t;i("checkout_path","".concat(e).concat(o),{shouldDirty:a})}),[s.dirtyFields.checkout_path,n,i,u,f]),(0,A.useEffect)((function(){f&&!f.includes("coupon_code=")&&i("coupon_selector","")}),[f,i]),{copyWithPrefix:function(){(0,q.p0)(n("checkout_path"),"#paywalls-list"),a("checkout_path",{shouldSelect:!0})}}).copyWithPrefix;return(0,p.jsxs)("div",{className:"details-tab__container",children:[(0,p.jsx)(g,{title:(0,c.t)("settings.paywalls.modal.tabs.details.title")}),(0,p.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,p.jsx)(o.l.Item,{name:"display_name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.display_name_tooltip"),hideDescription:!0,fullWidth:!1,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.display_name_is_required"),maxLength:255},hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsx)(o.l.Item,{name:"name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.name_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:255},children:(0,p.jsx)(o.l.Input,{})})]}),(0,p.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,p.jsx)(o.l.Item,{name:"subtitle",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.subtitle_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:70},children:(0,p.jsx)(o.l.Input,{maxLength:"70"})}),m&&(0,p.jsx)(V.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywalls.modal.tabs.details",formItemRules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.currency_is_required")},formItemTooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.currency_id_tooltip"),disabled:!b})]}),(0,p.jsx)("div",{className:"details-tab__container__checkout-path__container",children:(0,p.jsx)(o.l.Item,{name:"checkout_path",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.checkout_path_is_required"),maxLength:255},description:(0,p.jsx)("button",{type:"button",onClick:h,className:"anchor-copy-link",children:(0,c.t)("copy_link")}),variant:"checkout-path",children:(0,p.jsx)(o.l.Input,{prefix:(0,p.jsx)("p",{className:"details-tab__container__checkout-path__container__input-prefix",children:(0,q.Sr)()})})})}),(0,p.jsx)(z,{}),(0,p.jsx)(o.l.Item,{name:"description",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hideDescription:!0,children:(0,p.jsx)(o.l.TextArea,{})})]})},G=r(18605),W=r(81786),H=r(23127);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(){return"trix-editor-".concat(Math.floor(1e6*Math.random()))},$=function(e){var t=e.shouldDisplayWorkflowsTab,r=e.setActiveTab,n=(0,i.wh)().currentCommunitySettings,a=(0,d.Gc)(),s=a.formState,u=a.setValue,f=(0,d.qo)({name:"post_purchase_email_enabled"}),m=(0,d.qo)({name:"redirect_url_enabled"}),b=s.isSubmitSuccessful,h=Q((0,A.useState)(K()),2),v=h[0],_=h[1];(0,A.useEffect)((function(){m||u("redirect_url","")}),[m]),(0,A.useEffect)((function(){_(K())}),[b]);return(0,p.jsxs)("div",{className:"post-purchase__container",children:[(0,p.jsx)(g,{title:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.title")}),(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"thank_you_page_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.thank_you_page_enabled_tooltip"),hideDescription:!0,hideBorder:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),t&&(null===n||void 0===n?void 0:n.upgrade_flows_for_workflows_paywalls_enabled)&&(0,p.jsxs)("div",{className:"bg-tertiary flex items-start rounded-md p-4",children:[(0,p.jsx)("div",{className:"shrink-0",children:(0,p.jsx)(G.JO,{type:"20-lightning",size:20})}),(0,p.jsxs)("div",{className:"ml-3",children:[(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.title")}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)(y.Z.BodySm,{color:"text-light",children:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.description")})}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)(W.z,{small:!0,variant:"secondary",onClick:function(){r(l.eA.WORKFLOWS_TAB)},children:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.button")})})]})]}),(0,p.jsxs)("div",{className:"post-purchase__container__redirect-url-enabled-form",children:[(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"redirect_url_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,hideBorder:!0,hideDescription:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),m&&(0,p.jsx)("div",{className:"post-purchase__container__redirect-url-enabled-form__input",children:(0,p.jsx)(o.l.Item,{name:"redirect_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.alerts.redirect_url_is_required"),maxLength:255},children:(0,p.jsx)(o.l.Input,{})})})]}),(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"post_purchase_email_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.post_purchase_email_enabled_tooltip"),hideDescription:!0,hideBorder:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),f&&(0,p.jsxs)("div",{className:"post-purchase__container__post-purchase-email-message-form",children:[(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.subject",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsxs)("div",{className:"trix-v2",children:[(0,p.jsx)("label",{children:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.body")}),(0,p.jsx)(H.O,{id:"post_purchase_email_message_input",name:"post_purchase_email_message",is_private_space:!1,preventAccidentalLeave:!1,type:"textarea",featureFlags:{embeds:!1,videoUpload:!1,fileUploadLink:!1}})]},"".concat(v)),(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.button_label",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.button_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})})]})]})},X=r(79016),Y=r(53242),ee=r(52238),te=r(6952),re=r(50732),ne=r(56128),ie=r(96486),oe=r(76296),ae=r(14246);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pe=(0,A.createContext)({currency:{id:1,code:"usd",direction:ae.RV.ltr,smallest_unit:ae.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},addPrice:ie.noop,removePrice:ie.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:ie.noop,hideAddPriceModal:ie.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1},billingFrequencyOptions:function(){return[]},disableAddPriceButton:function(){return!1}});pe.displayName="MobilePricingTabContext";var fe=function(e){var t=e.currency,r=e.children,n=(0,i.wh)().currentCommunitySettings.price_build_options.mobile,o=(0,d.Gc)(),a=o.setValue,s=o.watch,l=(0,A.useCallback)((function(){return s("mobile_price_packages_attributes")}),[s]),c=(0,A.useCallback)((function(){return l().filter((function(e){return!e._destroy}))}),[l]),u=c().length>0,f=(0,A.useCallback)((function(){return!!c().find((function(e){return(0,oe.ZN)(e.price_properties)}))}),[c]),m=(0,A.useCallback)((function(){return!!c().find((function(e){return(0,oe.T)(e.price_properties)}))}),[c]),b=(0,A.useCallback)((function(){var e=c();return(0,oe.fe)(e).length>0}),[c]),h=(0,d.Dq)({name:"mobile_price_packages_attributes",rules:{minLength:1}}),v=h.append,y=h.update,g=h.remove,_=(0,A.useCallback)((function(){return Object.keys(n).filter((function(e){return e!==ae.E4.installments})).filter((function(e){return e!==ae.E4.onetime||!f()&&e===ae.E4.onetime})).map((function(e){return{value:e,label:n[e].name}}))}),[n,f]),x=(0,A.useCallback)((function(){return Object.entries(n.subscription.frequencies).filter((function(e){var t=ue(e,2),r=(t[0],t[1]);return!c().find((function(e){return e.price_properties.interval===r.interval&&e.price_properties.interval_count===r.interval_count}))})).map((function(e){var t=ue(e,2);return{value:t[0],label:t[1].as_adjective}}))}),[n,s,f()]),j=(0,A.useCallback)((function(){return _()[0]}),[_]),w=(0,A.useCallback)((function(e){v(le(le({},e),{},{tmp_id:"tmp_".concat(Date.now())}))}),[t,v]),O=(0,A.useCallback)((function(e){var t=l(),r=function(e,t){return e.findIndex((function(e){return t.id?e.id===t.id:e.tmp_id===t.tmp_id}))}(t,e);if(r>-1){var n=t[r];n.id?y(r,le(le({},n),{},{_destroy:!0})):g(r)}}),[l,y,g]),S=(0,A.useCallback)((function(){return!!s("isShowingAddPriceModal")}),[s]),P=(0,A.useCallback)((function(){a("isShowingAddPriceModal",!0)}),[a]),k=(0,A.useCallback)((function(){a("isShowingAddPriceModal",!1)}),[a]),C=(0,A.useCallback)((function(){return 0===x().length&&!_().find((function(e){return e.value===ae.E4.onetime}))}),[x,_,ae.E4]);return(0,p.jsx)(pe.Provider,{value:{currency:t,priceBuildOptions:n,priceTypeOptions:_,defaultPriceTypeOption:j,getPrices:l,getActivePrices:c,hasRecurringPrices:m,addPrice:w,removePrice:O,isShowingAddPriceModal:S,showAddPriceModal:P,hideAddPriceModal:k,hasActivePrices:u,hasSubscriptionPrices:b,billingFrequencyOptions:x,disableAddPriceButton:C},children:r})},me=function(){return(0,A.useContext)(pe)},be=r(49429),he=function(e){var t=e.name,r=e.labelKey,n=e.required,i=void 0!==n&&n,o=e.options,a=e.tooltipText,s=me().priceTypeOptions;return(0,p.jsx)("div",{className:"grow leading-5",children:(0,p.jsx)(be.N,{name:t,rules:{required:i},label:(0,p.jsxs)(p.Fragment,{children:[(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),i&&(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),options:null!==o&&void 0!==o?o:s(),tooltipText:a})})},ve=r(45144),ye=function(e){var t=e.children;return(0,p.jsxs)(ve.v,{className:"flex flex-row gap-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(G.JO,{type:"information-outline",size:24})}),(0,p.jsx)(y.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},ge=r(31018),_e=r(56421),xe=function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0&&!(0,ie.isEmpty)(t("billing_frequency"))},je=function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0&&!(0,ie.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=2},we=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&!r&&!n},stateValidator:je,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,_e.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return["installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:o-1,installment_amount:(0,ge.I)(r,a),total_amount:(0,ge.I)(r,i)}]}},{matcher:function(e){return e.priceType===ae.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return["onetime",{total_amount:(0,ge.I)(t,(0,_e.LG)(r("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&!r&&!n},stateValidator:xe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&!r&&n},stateValidator:je,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=parseInt(i("installments_count")),s=Math.round(o/a);return["trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,ge.I)(r,s),total_amount:(0,ge.I)(r,o),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&!r&&n},stateValidator:xe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0}),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.installments&&r&&n&&!i},stateValidator:je,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=(0,_e.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["trial_then_upfront_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,ge.I)(r,l),total_amount:(0,ge.I)(r,o),upfront_payment_amount:(0,ge.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.subscription&&r&&n&&!i},stateValidator:xe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_upfront_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&r&&!n},stateValidator:je,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,_e.LG)(n("amount")),o=(0,_e.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a);return["upfront_then_installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,ge.I)(r,s),total_amount:(0,ge.I)(r,i),upfront_payment_amount:(0,ge.I)(r,o)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&r&&!n},stateValidator:xe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["upfront_then_subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(n("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(n("upfront_payment_amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.installments&&r&&n&&i},stateValidator:je,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=(0,_e.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["upfront_then_trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,ge.I)(r,l),total_amount:(0,ge.I)(r,o),upfront_payment_amount:(0,ge.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.subscription&&r&&n&&i},stateValidator:xe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["upfront_then_trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}}];function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pe=function(){var e,t,r=me(),n=r.currency,i=r.priceBuildOptions,o=(0,d.Gc)().watch,a=Boolean(o("enable_trial")),s=o("trial_type"),l=null!==(e=null===(t=i.subscription.trial_options[s])||void 0===t?void 0:t.trial_days)&&void 0!==e?e:0,u=o("price_type"),f=i[u],m=Boolean(o("upfront_payment_enabled")),b=Boolean(o("trial_requires_upfront_payment")),h=we.find((function(e){return(0,e.matcher)({priceType:u,hasUpfrontPayment:m,hasTrialPeriod:a,isUpfrontPaymentRequiredForTrial:b})}));if(!h)return null;if(!(0,h.stateValidator)({watch:o}))return null;var v=Oe((0,h.messagePropsResolver)({buildOptions:f,currency:n,trialPeriodDays:l,watch:o}),2),y=v[0],g=v[1];return(0,p.jsx)(ye,{children:(0,c.t)(["settings.paywalls.modal.tabs.pricing.add_price_modal.notice",y],g)})},ke=r(69585),Ce=["name","labelKey","children"];function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var De,Te=function(e){var t=e.name,r=e.labelKey,n=e.children,i=Ee(e,Ce),a=(0,d.Gc)().formState.errors[t];return(0,p.jsx)(o.l.Item,Ie(Ie({},i),{},{name:t,className:v()({"border-red-500":a},"!m-0 grow !p-0"),label:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:n}))},Le=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=me().currency,o=(0,_e.Bj)(i,{amountInCents:!0}),a=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,ge.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,ge.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,p.jsx)(Te,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,_e.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,p.jsx)(ke.a,{currency:i})})},Me=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=void 0===n?"":n,a=e.tooltipText;return(0,p.jsx)(Te,{name:t,labelKey:r,placeholder:i,tooltipText:a,rules:{required:!0},children:(0,p.jsx)(o.l.Input,{})})},Re="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text",Be=function(){var e=(0,me().billingFrequencyOptions)();return(0,p.jsx)(he,{name:"billing_frequency",options:e,required:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text.billing_frequency")})},Ue="settings.paywalls.modal.tabs.pricing.add_price_modal",Fe=function(){var e=(0,d.Gc)(),t=e.watch,r=e.setValue,n=me().priceBuildOptions,i=t("enable_trial"),a=t("trial_type");(0,A.useEffect)((function(){i||(r("trial_type",null),r("trial_days",0))}),[i,a]);var s=Object.keys(n.subscription.trial_options).map((function(e){return{label:(0,c.t)([Ue,"trial_options",e]),value:e}}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",children:(0,p.jsx)(o.l.ToggleSwitch,{name:"enable_trial",variant:"small",value:"false"})}),i&&(0,p.jsx)(be.N,{name:"trial_type",rules:{required:!0},label:(0,p.jsxs)(p.Fragment,{children:[(0,c.t)([Ue,"field_labels.trial_options"]),(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),options:s})]})},ze="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text";function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=(Ve(De={},ae.E4.onetime,(function(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,p.jsx)(Me,{name:"in_app_apple_processor_id",tooltipText:(0,c.t)([Re,"in_app_apple_processor_id"])}),(0,p.jsx)(Me,{name:"in_app_google_processor_id",tooltipText:(0,c.t)([Re,"in_app_apple_processor_id"])})]}),(0,p.jsx)(Le,{name:"amount",labelKey:"price"})]})})),Ve(De,ae.E4.subscription,(function(){return(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,p.jsx)(Me,{name:"subscription_apple_processor_id",tooltipText:(0,c.t)([ze,"subscription_apple_processor_id"])}),(0,p.jsx)(Me,{name:"subscription_google_processor_id",tooltipText:(0,c.t)([ze,"subscription_google_processor_id"])})]}),(0,p.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,p.jsx)("div",{className:"basis-1/2",children:(0,p.jsx)(Be,{})}),(0,p.jsx)("div",{className:"basis-1/2",children:(0,p.jsx)(Le,{name:"amount",labelKey:"recurring_price"})})]}),(0,p.jsx)(Fe,{})]})})),De),Ze=function(){var e=(0,(0,d.Gc)().watch)("price_type"),t=qe[e];return t?(0,p.jsx)(t,{}):null};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var He,Qe=function(){var e=me(),t=e.priceBuildOptions,r=e.addPrice,n=e.hideAddPriceModal,i=e.currency,o=(0,d.Gc)().handleSubmit,a=(0,A.useCallback)((function(){var e=o((function(e){var o,a,s=e.price_type,l=(0,_e.LG)(e.amount);if(e.billing_frequency){var c=t[e.price_type].frequencies[e.billing_frequency];c&&(o=c.interval,a=c.interval_count)}var u=null===e||void 0===e?void 0:e.enable_trial,d=null===e||void 0===e?void 0:e.trial_type,p=(null===e||void 0===e?void 0:e.in_app_google_processor_id)||(null===e||void 0===e?void 0:e.subscription_google_processor_id),f=(null===e||void 0===e?void 0:e.in_app_apple_processor_id)||(null===e||void 0===e?void 0:e.subscription_apple_processor_id),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({currency_id:i.id,price_type:s,amount:l,interval:o,interval_count:a,installments_count:0,upfront_payment_amount:0,trial_requires_upfront_payment:!1,platform_type:e,processor_id:r},u?t.subscription.trial_options[d]:{})};r({status:"pending",price_properties:m(),prices_attributes:[m("google",p),m("apple",f)]}),n()}));e().catch((function(e){return console.error("Error adding price",e)}))}),[t,r,n,o]);return{onConfirm:a,hideAddPriceModal:n}},Je=function(){var e=Qe(),t=e.onConfirm,r=e.hideAddPriceModal;return(0,p.jsx)(j.c,{isOpen:!0,title:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title_mobile"),confirmText:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:t,onClose:r,onCancel:r,size:"lg",dataTestId:"save-paywall-price-mobile",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsx)(he,{name:"price_type",labelKey:"payment_type"}),(0,p.jsx)(Ze,{}),(0,p.jsx)(Pe,{})]})})},Ke=function(){var e=(0,me().defaultPriceTypeOption)();return(0,p.jsx)(o.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:ie.noop,children:(0,p.jsx)(Je,{})})},$e=r(58253),Xe=function(e){var t=e.variant,r=me(),n=r.showAddPriceModal,i="primary"===t?"text-secondary":"text-primary",o=(0,r.disableAddPriceButton)();return(0,p.jsx)(W.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:o,large:!0,children:(0,p.jsx)(y.Z.LabelSm,{weight:"semibold",color:i,children:(0,c.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},Ye=r(91171),et="settings.paywalls.modal_remove_price_confirmation",tt=n.gk.create((function(e){var t=e.action,r=e.spaces,i=(0,n.dd)(),o=function(){i.hide(),i.remove()};return(0,p.jsx)(j.c,{isOpen:i.visible,title:(0,c.t)([et,"title"]),onClose:o,cancelText:(0,c.t)(["cancel"]),onConfirm:function(){t(),o()},confirmVariant:"primary",confirmText:(0,c.t)(["confirm"]),children:(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)([et,"description"],{count:r.length,space_names:r.map((function(e){return e.name})).join(", ")})})})})),rt=function(e){var t=e.row.original,r=(0,n.dd)(tt).show,o=(0,i.nT)().records,a=(0,s.UV)().contentPortalElement,l=me(),c=l.getPrices,d=l.removePrice,f=1===c().length;if(f)return null;return(0,p.jsx)($e.w.Actions,{contentPortalElement:null!==a&&void 0!==a?a:document.body,children:!f&&(0,p.jsx)(Ye.g,{hasDanger:!0,onClick:function(){var e=o.filter((function(e){return function(e){var r,n,i,o=null===(r=e.lock_screen_blocks)||void 0===r?void 0:r.find((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paywalls}));return!(null===o||void 0===o||null===(n=o.data)||void 0===n||null===(i=n.paywalls)||void 0===i||!i.find((function(e){var r,n;return(null===t||void 0===t?void 0:t.id)&&((null===e||void 0===e||null===(r=e.web_paywall_price)||void 0===r?void 0:r.id)===(null===t||void 0===t?void 0:t.id)||(null===e||void 0===e||null===(n=e.mobile_paywall_price)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id))})))}(e)}));e.length>0?r({action:function(){return d(t)},spaces:e}):d(t)},linkType:"button",children:u().t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")})},nt=function(e){var t,r=e.row.original,n=r.price_properties,i=r.price_properties,o=i.price_type,a=i.interval_count,s=i.interval,l=me().priceBuildOptions,c=l[o];if((0,oe.QT)(n)){var u=l[o],d=(0,oe.X8)(u,s,a);t=(null===d||void 0===d?void 0:d.as_adjective)||u.name}else t=c.name;return(0,p.jsx)("div",{className:"flex flex-row items-center gap-2",children:t})};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at=(ot(He={},ae.E4.onetime,(function(e){var t=e.row.original.price_properties,r=t.price_type,n=t.amount,i=me().currency;if(r!==ae.E4.onetime)return null;var o=(0,_e.LG)(n),a=(0,ge.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,p.jsx)(p.Fragment,{children:a})})),ot(He,ae.E4.subscription,(function(e){var t,r=e.row.original.price_properties,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,s=r.upfront_payment_amount,l=r.trial_days,u=r.trial_requires_upfront_payment,d=me(),f=d.currency,m=d.priceBuildOptions;if(n!==ae.E4.subscription)return null;var b=l,h=!!l,v=m.subscription,y=(0,oe.X8)(v,o,i),g=(0,oe.TM)(f,s),_=(0,_e.LG)(a),x=(0,ge.I)(f,_,{amountInCents:!0,includeCurrencyCode:!0}),j=[];h&&!u&&j.push("trial"),g.variant===oe.f.upfrontPayment&&j.push("upfront"),h&&u&&j.push("trial"),j.push("value");var w=j.join("_then_");return(0,p.jsx)(p.Fragment,{children:(0,c.t)(["settings.paywall_prices",n,"short_description",w],{upfront:g.amountFormatted,interval:null===y||void 0===y||null===(t=y.as_adverb)||void 0===t?void 0:t.toLowerCase(),amount:x,trial:b})})})),ot(He,ae.E4.installments,void 0),He),st=function(e){var t=e.row.original.price_properties.price_type,r=at[t];return r?(0,p.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null},lt=r(4848),ct="settings.paywalls.modal.tabs.pricing.mobile_price_packages.status",ut=function(e){var t,r=e.row.original.status,n={pending:{locale:[ct,"pending"],variant:"default"},active:{locale:[ct,"active"],variant:"success"},denied:{locale:[ct,"denied"],variant:"danger"},unknown:{locale:[ct,"unknown"],variant:"default"}},i=null!==(t=n[r])&&void 0!==t?t:n.unknown;return(0,p.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,p.jsx)(lt.O,{variant:i.variant,children:(0,c.t)(i.locale)})})},dt=r(94281),pt=function(){return(0,p.jsxs)(p.Fragment,{children:[(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.status"),(0,p.jsx)("span",{className:"ml-2 inline-flex cursor-pointer",children:(0,p.jsx)(dt.T,{content:(0,c.t)("settings.paywalls.modal.tabs.pricing.tooltip_text.status"),children:(0,p.jsx)(G.JO,{type:"question-mark",className:"icon icon--xs"})})})]})};function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ht=[{accessorKey:"paymentType",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,p.jsx)(nt,mt({},e))}},{accessorKey:"pricing",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,p.jsx)(st,mt({},e))}},{accessorKey:"status",header:(0,p.jsx)(pt,{}),cell:function(e){return(0,p.jsx)(ut,mt({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,p.jsx)(rt,mt({},e))}}],vt=function(){var e=(0,me().getActivePrices)();return(0,p.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsxs)("div",{className:"w-4/5 flex-none",children:[(0,p.jsx)(y.Z.LabelLg,{weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal.tabs.pricing.mobile_description")})]}),(0,p.jsx)("div",{className:"w-1/5 flex-none text-right",children:(0,p.jsx)(Xe,{variant:"secondary"})})]}),(0,p.jsx)($e.w,{columns:ht,data:e,children:(0,p.jsxs)($e.w.Table,{children:[(0,p.jsx)($e.w.Header,{}),(0,p.jsx)($e.w.Body,{})]})})]})},yt=function(e){var t=e.className,r=void 0===t?"":t;return(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(r),name:"mobile_paywall_resource_attributes.processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,c.t)("settings.paywalls.form.offering_label"),hideBorder:!0,tooltipText:(0,c.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","offering_processor_id"]),rules:{required:!0},children:(0,p.jsx)(o.l.Input,{})})},gt=function(e){var t=e.className,r=void 0===t?"":t,n=me().hasRecurringPrices,i=(0,d.Gc)().setValue;return(0,A.useEffect)((function(){n()||i("apple_subscription_group_processor_id","")}),[n]),(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(r),name:"apple_subscription_group_processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,c.t)("settings.paywalls.form.subscription_group_id_label"),hideBorder:!0,rules:{required:n()},children:(0,p.jsx)(o.l.Input,{disabled:!n()})})},_t=function(e){var t=e.className,r=void 0===t?"":t,n=me().hasRecurringPrices,i=(0,d.Gc)().setValue;return(0,A.useEffect)((function(){n()||i("apple_subscription_group_name","")}),[n]),(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(r),name:"apple_subscription_group_name",hideDescription:!0,hidePlaceholder:!0,label:(0,c.t)("settings.paywalls.form.subscription_group_name_label"),tooltipText:(0,c.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","subscription_group_name"]),hideBorder:!0,rules:{required:n()},children:(0,p.jsx)(o.l.Input,{disabled:!n()})})},xt=function(){return(0,p.jsxs)(ve.v,{className:"border-primary flex flex-col gap-y-4 border px-6 py-5",children:[(0,p.jsx)(y.Z.LabelLg,{weight:"bold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,p.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,p.jsx)(yt,{}),(0,p.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,p.jsx)("div",{className:"basis-1/2",children:(0,p.jsx)(_t,{})}),(0,p.jsx)("div",{className:"basis-1/2",children:(0,p.jsx)(gt,{})})]})]})]})},jt="settings.paywalls.modal.tabs.pricing.mobile_tab.empty_state",wt=function(){var e=me(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=t();return(0,p.jsxs)(p.Fragment,{children:[i&&i.length?(0,p.jsxs)("div",{className:"mr-4 flex flex-col gap-y-8 pb-8",children:[(0,p.jsx)(vt,{}),(0,p.jsx)(xt,{})]}):(0,p.jsx)("div",{className:"m-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20",children:(0,p.jsx)(ne.u,{header:(0,c.t)([jt,"title"]),description:(0,c.t)([jt,"description"]),onPrimaryClick:n,primaryLabel:(0,c.t)([jt,"cta_primary"]),onSecondaryClick:function(){window.open(re.lA.plans.brandedApps,"_blank")},secondaryLabel:(0,c.t)([jt,"cta_secondary"])})}),r()&&(0,p.jsx)(Ke,{})]})},Ot=r(72669);function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ct=function(e,t){return e.findIndex((function(e){return t.id?e.id===t.id:e.tmp_id===t.tmp_id}))},Nt=(0,A.createContext)({currency:{id:1,code:"usd",direction:ae.RV.ltr,smallest_unit:ae.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},getTrialPeriodDays:function(){return 0},getHasTrialPeriod:function(){return!1},hasPricesEligibleForTrial:function(){return!1},addPrice:ie.noop,markPriceAsPreferred:ie.noop,removePrice:ie.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:ie.noop,hideAddPriceModal:ie.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1}});Nt.displayName="PricingTabContext";var It=function(e){var t=e.currency,r=e.children,n=(0,i.wh)().currentCommunitySettings.price_build_options.stripe,o=(0,d.Gc)(),a=o.setValue,s=o.watch,l=(0,A.useCallback)((function(){var e=s("can_be_repurchased");return Object.keys(n).filter((function(t){return!e||t===ae.E4.onetime})).map((function(e){return{value:e,label:n[e].name}}))}),[n,s]),c=(0,A.useCallback)((function(){return l()[0]}),[l]),u=(0,A.useCallback)((function(){return s("stripe_prices_attributes")}),[s]),f=(0,A.useCallback)((function(){return u().filter((function(e){return!e._destroy}))}),[u]),m=f().length>0,b=(0,A.useCallback)((function(){var e=f();return(0,oe.aG)(e).length>0}),[f]),h=(0,A.useCallback)((function(){var e=f();return(0,oe.fe)(e).length>0}),[f]),v=(0,A.useCallback)((function(){return parseInt(s("trial_days"))}),[s]),y=(0,A.useCallback)((function(){return Boolean(s("enable_trial"))&&v()>0}),[s,v]),g=(0,A.useCallback)((function(){var e=f();return(0,oe.PI)(e,oe.zA.addingPrice).length>0}),[f]),_=(0,d.Dq)({name:"stripe_prices_attributes",rules:{minLength:1}}),x=_.append,j=_.update,w=_.remove,O=(0,A.useCallback)((function(e){x(Pt(Pt({},e),{},{preferred:!1,currency_id:t.id,tmp_id:"tmp_".concat(Date.now())}))}),[t,x]),S=(0,A.useCallback)((function(e){var t=u(),r=t.findIndex((function(e){return e.preferred}));r>-1&&j(r,Pt(Pt({},t[r]),{},{preferred:!1,_updated:!0}));var n=Ct(t,e);n>-1&&j(n,Pt(Pt({},t[n]),{},{preferred:!0,_updated:!0}))}),[u,j]),P=(0,A.useCallback)((function(e){var t=u(),r=Ct(t,e);if(r>-1){var n=t[r];n.id?j(r,Pt(Pt({},n),{},{preferred:!1,_destroy:!0})):w(r)}}),[u,j,w]),k=(0,A.useCallback)((function(){return!!s("isShowingAddPriceModal")}),[s]),C=(0,A.useCallback)((function(){a("isShowingAddPriceModal",!0)}),[a]),N=(0,A.useCallback)((function(){a("isShowingAddPriceModal",!1)}),[a]);return(0,p.jsx)(Nt.Provider,{value:{currency:t,priceBuildOptions:n,priceTypeOptions:l,defaultPriceTypeOption:c,getPrices:u,getActivePrices:f,hasRecurringPrices:b,getTrialPeriodDays:v,getHasTrialPeriod:y,hasPricesEligibleForTrial:g,addPrice:O,markPriceAsPreferred:S,removePrice:P,isShowingAddPriceModal:k,showAddPriceModal:C,hideAddPriceModal:N,hasActivePrices:m,hasSubscriptionPrices:h},children:r})},At=function(){return(0,A.useContext)(Nt)},Et=["name","labelKey","children"];function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Rt=function(e){var t=e.name,r=e.labelKey,n=e.children,i=Mt(e,Et),a=(0,d.Gc)().formState.errors[t];return(0,p.jsx)(o.l.Item,Tt(Tt({},i),{},{name:t,className:v()({"border-red-500":a},"!m-0 grow !p-0"),label:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:n}))},Bt=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=At().currency,o=(0,_e.Bj)(i,{amountInCents:!0}),a=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,ge.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,ge.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,p.jsx)(Rt,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,_e.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,p.jsx)(ke.a,{currency:i})})},Ut=function(e){var t=e.name,r=e.labelKey,n=e.options,i=e.required,o=void 0!==i&&i;return(0,p.jsx)("div",{className:"grow leading-5",children:(0,p.jsx)(be.N,{name:t,rules:{required:o},label:(0,p.jsxs)(p.Fragment,{children:[(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),o&&(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),options:n})})};function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vt,qt=function(){var e=At().priceBuildOptions,t=(0,(0,d.Gc)().watch)("price_type"),r=Object.entries(e[t].frequencies).map((function(e){var t=Ft(e,2);return{value:t[0],label:t[1].as_adjective}}));return(0,p.jsx)(Ut,{name:"billing_frequency",options:r,required:!0})},Zt=function(){var e=(0,d.Gc)(),t=e.formState.errors,r=e.watch,n=r("price_type"),i=r("amount"),a=(0,_e.LG)(i),s=At().currency,l=(0,_e.Bj)(s,{amountInCents:!0}),u=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,ge.I)(s,s.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,ge.I)(s,s.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})}),f=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.upfront_payment_amount",{total:(0,ge.I)(s,a,{amountInCents:!0,includeCurrencyCode:!1})});return(0,p.jsx)(o.l.Item,{name:"upfront_payment_amount",className:v()({"border-red-500":t.upfront_payment_amount},"!m-0 !mt-2 grow !p-0"),errorClassName:"mt-1 text-red-500 text-sm",placeholder:l(0),hideBorder:!0,hideLabel:!0,hideDescription:!0,rules:{required:!0,validate:{bounds:function(e){var t=(0,_e.LG)(e);return isNaN(t)||t<s.min_charge_amount||t>s.max_charge_amount?u:!(n===ae.E4.installments&&t>a)||f}}},transformValue:l,children:(0,p.jsx)(ke.a,{currency:s})})},Gt=function(){var e=(0,At().getHasTrialPeriod)(),t=(0,d.Gc)(),r=t.watch,n=t.setValue,i=r("upfront_payment_enabled");return(0,A.useEffect)((function(){i||n("upfront_payment_amount","")}),[i,n]),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)(o.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"upfront_payment_enabled",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.upfront_payment_enabled_tooltip"),fullWidth:!0,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"upfront_payment_enabled",variant:"small"})}),i&&(0,p.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,p.jsx)(Zt,{}),e&&(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_upfront_payment",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"trial_requires_upfront_payment",variant:"small"})})]})]})};function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ht=(Wt(Vt={},ae.E4.onetime,(function(){return(0,p.jsx)(Bt,{name:"amount",labelKey:"price"})})),Wt(Vt,ae.E4.subscription,(function(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,p.jsx)(qt,{}),(0,p.jsx)(Bt,{name:"amount",labelKey:"recurring_price"})]}),(0,p.jsx)(Gt,{})]})})),Wt(Vt,ae.E4.installments,(function(){var e=At().priceBuildOptions.installments,t=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.installments_count",{min:e.limits.installments_count.min,max:e.limits.installments_count.max});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,p.jsx)(qt,{}),(0,p.jsx)(Rt,{name:"installments_count",labelKey:"rebills",placeholder:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.placeholder"),rules:{valueAsNumber:!0,required:!0,validate:{bounds:function(r){var n=parseInt(r);return!isNaN(n)&&n>=e.limits.installments_count.min&&n<=e.limits.installments_count.max||t}}},children:(0,p.jsx)(o.l.Input,{variant:"text",type:"number"})})]}),(0,p.jsx)("div",{className:"flex flex-row gap-4",children:(0,p.jsx)(Bt,{name:"amount",labelKey:"total_price"})}),(0,p.jsx)(Gt,{})]})})),Vt),Qt=function(){var e=(0,(0,d.Gc)().watch)("price_type"),t=Ht[e];return t?(0,p.jsx)(t,{}):null},Jt=function(e){var t=e.children;return(0,p.jsxs)(ve.v,{className:"flex flex-row gap-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(G.JO,{type:"information-outline",size:24})}),(0,p.jsx)(y.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},Kt=function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0&&!(0,ie.isEmpty)(t("billing_frequency"))},$t=function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0&&!(0,ie.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=2},Xt=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&!r&&!n},stateValidator:$t,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,_e.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return["installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:o-1,installment_amount:(0,ge.I)(r,a),total_amount:(0,ge.I)(r,i)}]}},{matcher:function(e){return e.priceType===ae.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,_e.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return["onetime",{total_amount:(0,ge.I)(t,(0,_e.LG)(r("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&!r&&!n},stateValidator:Kt,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&!r&&n},stateValidator:$t,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=parseInt(i("installments_count")),s=Math.round(o/a);return["trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,ge.I)(r,s),total_amount:(0,ge.I)(r,o),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&!r&&n},stateValidator:Kt,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0}),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.installments&&r&&n&&!i},stateValidator:$t,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=(0,_e.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["trial_then_upfront_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,ge.I)(r,l),total_amount:(0,ge.I)(r,o),upfront_payment_amount:(0,ge.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.subscription&&r&&n&&!i},stateValidator:Kt,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_upfront_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.installments&&r&&!n},stateValidator:$t,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,_e.LG)(n("amount")),o=(0,_e.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a);return["upfront_then_installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,ge.I)(r,s),total_amount:(0,ge.I)(r,i),upfront_payment_amount:(0,ge.I)(r,o)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===ae.E4.subscription&&r&&!n},stateValidator:Kt,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["upfront_then_subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(n("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(n("upfront_payment_amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.installments&&r&&n&&i},stateValidator:$t,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,_e.LG)(i("amount")),a=(0,_e.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["upfront_then_trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,ge.I)(r,l),total_amount:(0,ge.I)(r,o),upfront_payment_amount:(0,ge.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===ae.E4.subscription&&r&&n&&i},stateValidator:Kt,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["upfront_then_trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,ge.I)(r,(0,_e.LG)(i("amount"))),upfront_payment_amount:(0,ge.I)(r,(0,_e.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}}];function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr,rr=function(){var e=At(),t=e.currency,r=e.priceBuildOptions,n=e.getHasTrialPeriod,i=(0,e.getTrialPeriodDays)(),o=n(),a=(0,d.Gc)().watch,s=a("price_type"),l=r[s],u=Boolean(a("upfront_payment_enabled")),f=Boolean(a("trial_requires_upfront_payment")),m=Xt.find((function(e){return(0,e.matcher)({priceType:s,hasUpfrontPayment:u,hasTrialPeriod:o,isUpfrontPaymentRequiredForTrial:f})}));if(!m)return null;if(!(0,m.stateValidator)({watch:a}))return null;var b=Yt((0,m.messagePropsResolver)({buildOptions:l,currency:t,trialPeriodDays:i,watch:a}),2),h=b[0],v=b[1];return(0,p.jsx)(Jt,{children:(0,c.t)(["settings.paywalls.modal.tabs.pricing.add_price_modal.notice",h],v)})},nr=function(){var e=At(),t=e.priceBuildOptions,r=e.priceTypeOptions,n=e.addPrice,i=e.hideAddPriceModal,o=(0,d.Gc)().handleSubmit,a=(0,A.useCallback)((function(){o((function(e){var r,o,a,s,l,c,u=e.price_type,d=(0,_e.LG)(e.amount);if(e.billing_frequency){var p=t[e.price_type].frequencies[e.billing_frequency];p&&(o=p.interval,a=p.interval_count)}e.installments_count&&(s=parseInt(e.installments_count)),e.upfront_payment_enabled&&(l=(0,_e.LG)(e.upfront_payment_amount),c=e.trial_requires_upfront_payment),n({price_type:u,amount:d,interval:o,interval_count:a,installments_count:s,upfront_payment_amount:l,trial_requires_upfront_payment:null!==(r=c)&&void 0!==r&&r}),i()}))().catch((function(e){return console.error("Error adding price",e)}))}),[t,n,i,o]);return(0,p.jsx)(j.c,{isOpen:!0,title:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title"),confirmText:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:a,onClose:i,onCancel:i,size:"lg",dataTestId:"save-paywall-price",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsx)(Ut,{name:"price_type",labelKey:"payment_type",options:r()}),(0,p.jsx)(Qt,{}),(0,p.jsx)(rr,{})]})})},ir=function(){var e=(0,At().defaultPriceTypeOption)();return(0,p.jsx)(o.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:ie.noop,children:(0,p.jsx)(nr,{})})},or=r(15649),ar=function(e){var t=e.variant,r=At(),n=r.showAddPriceModal,i="primary"===t?"text-secondary":"text-primary",o=(0,r.getActivePrices)().length>=or.vf;return(0,p.jsx)(W.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:o,large:!0,children:(0,p.jsx)(y.Z.LabelSm,{weight:"semibold",color:i,children:(0,c.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},sr="settings.paywalls.modal_remove_price_confirmation",lr=n.gk.create((function(e){var t=e.action,r=e.spaces,i=(0,n.dd)(),o=function(){i.hide(),i.remove()};return(0,p.jsx)(j.c,{isOpen:i.visible,title:(0,c.t)([sr,"title"]),onClose:o,cancelText:(0,c.t)(["cancel"]),onConfirm:function(){t(),o()},confirmVariant:"primary",confirmText:(0,c.t)(["confirm"]),children:(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)([sr,"description"],{count:r.length,space_names:r.map((function(e){return e.name})).join(", ")})})})})),cr=function(e){var t=e.row.original,r=(0,n.dd)(lr).show,o=(0,i.nT)().records,a=(0,s.UV)().contentPortalElement,l=At(),c=l.getPrices,d=l.markPriceAsPreferred,f=l.removePrice,m=1===c().length;if(m&&t.preferred)return null;return(0,p.jsxs)($e.w.Actions,{contentPortalElement:null!==a&&void 0!==a?a:document.body,children:[!t.preferred&&(0,p.jsx)(Ye.g,{hasDanger:!1,onClick:function(){return d(t)},linkType:"button",children:u().t("settings.paywalls.modal.tabs.pricing.table.actions.preferred")},"preferred"),!m&&(0,p.jsx)(Ye.g,{hasDanger:!0,onClick:function(){var e=o.filter((function(e){return function(e){var r,n,i,o=null===(r=e.lock_screen_blocks)||void 0===r?void 0:r.find((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paywalls}));return!(null===o||void 0===o||null===(n=o.data)||void 0===n||null===(i=n.paywalls)||void 0===i||!i.find((function(e){var r,n;return(null===t||void 0===t?void 0:t.id)&&((null===e||void 0===e||null===(r=e.web_paywall_price)||void 0===r?void 0:r.id)===(null===t||void 0===t?void 0:t.id)||(null===e||void 0===e||null===(n=e.mobile_paywall_price)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id))})))}(e)}));e.length>0?r({action:function(){return f(t)},spaces:e}):f(t)},linkType:"button",children:u().t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")]})},ur=function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.preferred,s=At().priceBuildOptions,l=s[n];if((0,oe.QT)(r)){var c=s[n],u=(0,oe.X8)(c,o,i);t=(null===u||void 0===u?void 0:u.as_adjective)||c.name}else t=l.name;return(0,p.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t,a&&(0,p.jsx)(G.JO,{type:"16-check-circle",size:16})]})};function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fr=(pr(tr={},ae.E4.onetime,(function(e){var t=e.row.original,r=t.price_type,n=t.amount,i=At().currency;if(r!==ae.E4.onetime)return null;var o=(0,_e.LG)(n),a=(0,ge.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,p.jsx)(p.Fragment,{children:a})})),pr(tr,ae.E4.subscription,(function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,s=r.upfront_payment_amount,l=r.trial_requires_upfront_payment,u=At(),d=u.currency,f=u.priceBuildOptions,m=u.getHasTrialPeriod,b=u.getTrialPeriodDays;if(n!==ae.E4.subscription)return null;var h=b(),v=m(),y=f.subscription,g=(0,oe.X8)(y,o,i),_=(0,oe.TM)(d,s),x=(0,_e.LG)(a),j=(0,ge.I)(d,x,{amountInCents:!0,includeCurrencyCode:!0}),w=[];v&&!l&&w.push("trial"),_.variant===oe.f.upfrontPayment&&w.push("upfront"),v&&l&&w.push("trial"),w.push("value");var O=w.join("_then_");return(0,p.jsx)(p.Fragment,{children:(0,c.t)(["settings.paywall_prices",n,"short_description",O],{upfront:_.amountFormatted,interval:null===g||void 0===g||null===(t=g.as_adverb)||void 0===t?void 0:t.toLowerCase(),amount:j,trial:h})})})),pr(tr,ae.E4.installments,(function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.installments_count,s=r.amount,l=r.upfront_payment_amount,u=r.trial_requires_upfront_payment,d=At(),f=d.currency,m=d.priceBuildOptions,b=d.getHasTrialPeriod,h=d.getTrialPeriodDays;if(n!==ae.E4.installments)return null;var v=h(),y=b(),g=m.installments,_=Object.values(g.frequencies).find((function(e){return e.interval===o&&e.interval_count===i})),x=(0,oe.TM)(f,l),j=(0,_e.LG)(s),w=(0,ge.I)(f,(0,oe.$_)(x,j,a),{amountInCents:!0,includeCurrencyCode:!0}),O=[];y&&!u&&O.push("trial"),x.variant===oe.f.upfrontPayment&&O.push("upfront"),y&&u&&O.push("trial"),O.push("value");var S=O.join("_then_");return(0,p.jsx)(p.Fragment,{children:(0,c.t)(["settings.paywall_prices",n,"short_description",S],{upfront:x.amountFormatted,count:a,interval:null===_||void 0===_||null===(t=_.as_adverb)||void 0===t?void 0:t.toLowerCase(),amount:w,trial:v})})})),tr),mr=function(e){var t=e.row.original.price_type,r=fr[t];return r?(0,p.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null};function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=[{accessorKey:"paymentType",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,p.jsx)(ur,hr({},e))}},{accessorKey:"pricing",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,p.jsx)(mr,hr({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,p.jsx)(cr,hr({},e))}}],gr=function(){var e=(0,At().getActivePrices)();return(0,p.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsxs)("div",{className:"w-4/5 flex-none",children:[(0,p.jsx)(y.Z.LabelLg,{weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal.tabs.pricing.description")})]}),(0,p.jsx)("div",{className:"w-1/5 flex-none text-right",children:(0,p.jsx)(ar,{variant:"secondary"})})]}),(0,p.jsx)($e.w,{columns:yr,data:e,children:(0,p.jsxs)($e.w.Table,{children:[(0,p.jsx)($e.w.Header,{}),(0,p.jsx)($e.w.Body,{})]})})]})},_r=function(e){var t=e.tooltipText,r=e.isToggleDisabled;return(0,p.jsx)(o.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"can_be_repurchased",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"can_be_repurchased",variant:"small",disabled:r})})},xr=function(){var e=At(),t=e.hasRecurringPrices,r=!e.hasActivePrices||t(),n=r?"can_be_repurchased_tooltip_disabled":"can_be_repurchased_tooltip";return(0,p.jsx)(_r,{tooltipText:n,isToggleDisabled:r})},jr=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.onChanging;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_cancelable",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{onToggleChange:n,name:"self_cancelable",variant:"small",disabled:r})})};function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Or(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sr=function(){var e=At().hasSubscriptionPrices,t=!e(),r=(0,d.Gc)(),n=r.watch,i=r.setValue,o=!!n("id"),a=n("self_cancelable"),s=wr((0,A.useState)(e()&&!a),2),l=s[0],c=s[1];(0,A.useEffect)((function(){t?i("self_cancelable",!1):o||l||i("self_cancelable",!0)}),[t,i,l,o]);var u=t?"self_cancelable_tooltip_disabled":"self_cancelable_tooltip";return(0,p.jsx)(jr,{tooltipText:u,isToggleDisabled:t,onChanging:function(){c(!0)}})},Pr=r(75555),kr=function(e){var t=e.isSelectDisabled,r=e.paywallGroupSelectOptions,n=e.className,i=void 0===n?"":n;return(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(i),labelClassName:"!font-normal",name:"paywall_group_id",hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,isDisabled:t,children:(0,p.jsx)(o.l.SelectNative,{prompt:(0,c.t)("settings.paywalls.modal.tabs.pricing.paywall_group_prompt"),name:"paywall_group_id",options:r,disabled:t,rules:{shouldUnregister:!0}})})},Cr=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.enableSubscriptionGroup;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_subscription_group",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"enable_subscription_group",variant:"small",value:String(n),disabled:r})})},Nr=function(e){var t=e.toggleField,r=e.fieldToggleable,n=e.hideToggleableField;return(0,p.jsxs)("div",{className:"flex flex-col gap-y-2",children:[!!t&&t,!!r&&!n&&(0,p.jsx)("div",{className:"flex flex-col gap-y-2 pl-11",children:r})]})},Ir=function(){var e=At().currency,t=(0,d.Gc)().watch,r=function(e){var t=(0,d.Gc)().setValue,r=At().hasSubscriptionPrices,n=(0,(0,Pr.W)({}).useListPaywallGroups)().data,i=r(),o=(n||[]).filter((function(t){return t.currency.id===e.id})),a=o.length>0,s=i,l=o.length>0?o[0].id:"",c=o.map((function(e){return{value:"".concat(e.id),label:e.name}})),u=!(0,d.qo)({name:"id"}),p=(0,d.qo)({name:"enable_subscription_group"},!1),f=(0,A.useRef)(p);return(0,A.useEffect)((function(){u&&i&&!f.current&&t("enable_subscription_group",!0)}),[f,i,u,t]),(0,A.useEffect)((function(){i||(t("enable_subscription_group",!1),t("paywall_group_id",l))}),[l,i,t]),{canShowChooser:a,canEnableChooser:s,enableSubscriptionGroup:p,paywallGroupSelectOptions:c}}(e),n=r.canShowChooser,i=r.canEnableChooser,o=r.paywallGroupSelectOptions,a=r.enableSubscriptionGroup,s=!n||!i,l=s||!a,c=s?"paywall_group_tooltip_disabled":"paywall_group_tooltip",u=t("enable_subscription_group");return(0,p.jsx)(Nr,{toggleField:(0,p.jsx)(Cr,{tooltipText:c,isToggleDisabled:s,enableSubscriptionGroup:a}),fieldToggleable:(0,p.jsx)(kr,{isSelectDisabled:l,paywallGroupSelectOptions:o,className:"w-7/12"}),hideToggleableField:!u})},Ar=function(){var e=At().hasPricesEligibleForTrial,t=(0,d.Gc)(),r=t.setValue,n=t.setFocus,i=t.watch,o=Boolean(i("enable_trial")),a=(0,A.useRef)(!1);return(0,A.useEffect)((function(){e()||r("enable_trial",!1)}),[e(),r]),(0,A.useEffect)((function(){o?(a.current&&r("trial_requires_card",!0),n("trial_days")):(r("trial_days",0),r("trial_requires_card",!1),r("self_trial_cancelable",!1)),a.current=!0}),[o,n,r]),{hasPricesEligibleForTrial:e,hasTrial:o}},Er=function(e){var t=e.className,r=void 0===t?"":t,n=Ar().hasTrial;return(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(r),labelClassName:"!font-normal",name:"trial_days",hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,hideBorder:!0,isDisabled:!n,rules:{pattern:/^[0-9]+$/,min:{value:n?or.dy:or.L3,message:(0,c.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:or.ut,message:(0,c.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}},children:(0,p.jsx)(o.l.Input,{"data-testid":"trial_days",inputMode:"numeric",suffix:(0,c.t)("settings.paywalls.form.free_trial.days_label"),disabled:!n})})},Dr=function(){return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_card",translationRoot:"settings.paywalls.form.free_trial",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{"data-testid":"trial_requires_card",name:"trial_requires_card",variant:"small"})})},Tr=function(){var e=At().hasRecurringPrices,t=(0,d.Gc)().setValue;return(0,A.useEffect)((function(){e()||t("self_trial_cancelable",!1)}),[e()]),(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_trial_cancelable",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,isDisabled:!e(),children:(0,p.jsx)(o.l.ToggleSwitch,{name:"self_trial_cancelable",variant:"small",disabled:!e()})})},Lr=function(){var e=Ar(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",isDisabled:!t(),children:(0,p.jsx)(o.l.ToggleSwitch,{name:"enable_trial",variant:"small",disabled:!t(),value:String(r)})})},Mr=function(){var e=Ar(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,p.jsx)(Nr,{toggleField:(0,p.jsx)(Lr,{}),fieldToggleable:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Er,{className:"w-7/12"}),(0,p.jsx)(Dr,{}),(0,p.jsx)(Tr,{})]}),hideToggleableField:!t()||!r})},Rr=function(){return(0,p.jsxs)(ve.v,{className:"border-primary flex flex-col gap-y-4 border px-6",children:[(0,p.jsx)(y.Z.LabelLg,{weight:"bold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,p.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,p.jsx)(xr,{}),(0,p.jsx)(Ir,{}),(0,p.jsx)(Mr,{}),(0,p.jsx)(Sr,{})]})]})},Br=function(){var e=At(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=t();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"mr-4 flex flex-col gap-y-8",children:[i&&i.length?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(gr,{}),(0,p.jsx)(Rr,{})]}):(0,p.jsx)("div",{className:"mt-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20",children:(0,p.jsx)(ne.u,{header:(0,c.t)("settings.paywalls.modal.tabs.pricing.empty_state.title"),description:(0,c.t)("settings.paywalls.modal.tabs.pricing.empty_state.description"),onPrimaryClick:n,primaryLabel:(0,c.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})}),(0,p.jsx)(Ot.V.Banner,{title:(0,c.t)("settings.paywalls.modal.tabs.pricing.branded_apps_title")})]}),r()&&(0,p.jsx)(ir,{})]})},Ur=function(){var e=(0,d.Gc)().watch,t=(0,X.E)().isCommunityOnPlus,r=(0,ee.g)(),n=(0,Y.K)(),i=n.data;if(n.isLoading)return(0,p.jsx)(a.a,{});var o=e("currency_id"),s=i.find((function(e){return e.id===parseInt(o)}));return(0,p.jsxs)("div",{className:"flex h-[60vh] flex-col gap-x-5 gap-y-4 !overflow-hidden px-4 pt-8",children:[(0,p.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.title")}),(0,p.jsxs)(te.O.Group,{className:"!overflow-hidden",children:[t&&r&&(0,p.jsxs)(te.O.List,{className:"border-primary border-b",children:[(0,p.jsx)(te.O,{isButtonType:!0,children:(0,c.t)("web")}),(0,p.jsx)(te.O,{isButtonType:!0,children:(0,c.t)("mobile")})]}),(0,p.jsxs)(te.O.Panels,{className:v()("pb-10",{"pt-8":t}),children:[(0,p.jsx)(te.O.Panel,{children:(0,p.jsx)(It,{currency:s,children:(0,p.jsx)(Br,{})})}),t&&r&&(0,p.jsx)(te.O.Panel,{children:(0,p.jsx)(fe,{currency:s,children:(0,p.jsx)(wt,{})})})]})]})]})},Fr=r(35027),zr=r(50952),Vr="settings.paywalls.tracking_js_code",qr=[{group:(0,c.t)([Vr,"group.member"]),label:(0,c.t)([Vr,"variables.member_email"]),value:(0,c.t)([Vr,"variables.member_email"])},{group:(0,c.t)([Vr,"group.charge"]),label:(0,c.t)([Vr,"variables.amount_paid"]),value:(0,c.t)([Vr,"variables.amount_paid"])},{group:(0,c.t)([Vr,"group.coupon"]),label:(0,c.t)([Vr,"variables.coupon_code"]),value:(0,c.t)([Vr,"variables.coupon_code"])},{group:(0,c.t)([Vr,"group.paywall"]),label:(0,c.t)([Vr,"variables.paywall_internal_name"]),value:(0,c.t)([Vr,"variables.paywall_internal_name"])},{group:(0,c.t)([Vr,"group.paywall"]),label:(0,c.t)([Vr,"variables.paywall_display_name"]),value:(0,c.t)([Vr,"variables.paywall_display_name"])},{group:(0,c.t)([Vr,"group.paywall"]),label:(0,c.t)([Vr,"variables.paywall_trial_days"]),value:(0,c.t)([Vr,"variables.paywall_trial_days"])},{group:(0,c.t)([Vr,"group.paywall_price"]),label:(0,c.t)([Vr,"variables.paywall_price_amount"]),value:(0,c.t)([Vr,"variables.paywall_price_amount"])},{group:(0,c.t)([Vr,"group.paywall_price"]),label:(0,c.t)([Vr,"variables.paywall_price_interval"]),value:(0,c.t)([Vr,"variables.paywall_price_interval"])},{group:(0,c.t)([Vr,"group.paywall_price"]),label:(0,c.t)([Vr,"variables.paywall_price_type"]),value:(0,c.t)([Vr,"variables.paywall_price_type"])}],Zr=function(){var e=(0,i.wh)().currentCommunity,t=qr;return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"flex h-[60vh] flex-col px-4",children:[(0,p.jsx)(g,{title:(0,c.t)("settings.paywalls.modal.tabs.tracking.title")}),e.paywall_tracking_code_feature_flag_enabled?(0,p.jsx)(o.l.Item,{name:"conversion_tracking_js_code",translationRoot:"settings.paywalls.modal.tabs.tracking",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.tracking.conversion_tracking_js_code_tooltip"),hideBorder:!0,fullWidth:!1,hideDescription:!0,className:"!flex flex-auto flex-col",children:(0,p.jsx)(Fr.K,{className:"flex-auto",showMenuBar:!0,menuBarOptions:t})}):(0,p.jsx)(zr.S,{PlanFeatureName:(0,c.t)("pricing_plans.feature.conversion_tracking_code")})]})})},Gr=r(9581),Wr=function(){return(0,p.jsx)("div",{className:"h-[60vh] overflow-scroll px-2 pt-3",children:(0,p.jsx)(Gr.k,{category:"paywalls",pageSize:3})})},Hr=function(e){var t=e.isSubmitting,r=e.mutation,n=e.activeTab,i=e.shouldBlockSubmitButton,o=function(e){var t,r,n=e.activeTab,i=e.currentPaywallStatus,o=(0,d.Gc)(),a=o.register,s=o.setValue,u=(0,A.useMemo)((function(){return n===l.eA.TRACKING_TAB}),[n]),p=function(e){a("publish"),s("publish",e)},f=function(){return p(!0)},b={active:{buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save"),variant:"circle",onClick:ie.noop},draft:{onClick:ie.noop,variant:"circle",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save")},inactive:{onClick:ie.noop,variant:"circle",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save")},paywallCreation:{variant:"circle",buttonLabel:u?(0,c.t)("settings.paywalls.modal.footer.publish"):(0,c.t)("settings.paywalls.modal.footer.next"),onClick:function(){return u&&f()}}},h={active:{onClick:function(){p(!1),a("status"),s("status","inactive")},variant:"danger",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.unpublish")},draft:{onClick:f,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.publish")},inactive:{onClick:f,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.publish")},paywallCreation:{onClick:ie.noop,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save_draft")}},v=null!==(t=h[i])&&void 0!==t?t:h.paywallCreation,y=null!==(r=b[i])&&void 0!==r?r:b.paywallCreation;return{isLastStep:u,isEditingMode:(0,m.dR)(i),currentPrimaryButtonState:y,currentSecondaryButtonState:v}}({activeTab:n,currentPaywallStatus:e.currentPaywallStatus}),a=o.isLastStep,s=o.isEditingMode,u=o.currentPrimaryButtonState,f=o.currentSecondaryButtonState;return(0,p.jsxs)("div",{className:"paywall-admin-modal__footer__container border-t-primary border-t",children:[(a||s)&&(0,p.jsx)(W.z,{type:"submit",variant:f.variant,disabled:t||r.isLoading||i,onClick:f.onClick,children:f.buttonLabel}),(0,p.jsx)(W.z,{type:"submit",variant:u.variant,disabled:t||r.isLoading||i,onClick:u.onClick,children:u.buttonLabel})]})};function Qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jr=function(e){var t,r,n=e.activeTab,i=e.setActiveTab,o=e.usePaywallFormContentHook,a=e.mutation,s=e.isSubmitting,c=e.paywallGroupsEnabled,u=e.requiresCurrency,d=e.canChangeCurrency,f=e.currentPaywallStatus,h=e.workflowsEnabled,v=o(n,i),y=v.handleTabClick,g=v.tabOptions,_=v.shouldBlockSubmitButton,x="mx-auto w-full ".concat(n===l.eA.WORKFLOWS_TAB?"max-w-screen-full":"max-w-[720px]"),j=h&&(0,m.j2)(f)?g:g.filter((function(e){return e.label!==l.eA.WORKFLOWS_TAB})),w="paywall-admin-modal__form__fields ".concat(n===l.eA.WORKFLOWS_TAB?"workflows-tab":"");return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"paywall-admin-modal__tabs",children:(0,p.jsx)(b.m,{controlled:!0,activeTab:n,onClick:y,options:j,variant:"underline"})}),(0,p.jsx)("div",{className:w,children:(0,p.jsx)("div",{className:x,children:(t=n,(Qr(r={},l.eA.DETAILS_TAB,(0,p.jsx)(Z,{requiresCurrency:u,canChangeCurrency:d})),Qr(r,l.eA.PRICING_TAB,(0,p.jsx)(Ur,{paywallGroupsEnabled:c,requiresCurrency:u})),Qr(r,l.eA.ACCESS_TAB,(0,p.jsx)(I,{})),Qr(r,l.eA.POST_PURCHASE_TAB,(0,p.jsx)($,{shouldDisplayWorkflowsTab:(0,m.j2)(f),setActiveTab:i})),Qr(r,l.eA.TRACKING_TAB,(0,p.jsx)(Zr,{})),Qr(r,l.eA.WORKFLOWS_TAB,(0,p.jsx)(Wr,{})),r)[t])})}),(0,p.jsx)(Hr,{isSubmitting:s,mutation:a,activeTab:n,shouldBlockSubmitButton:_,currentPaywallStatus:f})]})},Kr=r(64687),$r=r.n(Kr);function Xr(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tn=function(e,t){var r,n=Yr((0,A.useState)(!1),2),i=n[0],o=n[1],a=(0,d.Gc)().control,s=(0,d.qo)({control:a,name:"display_name"}),c=(0,d.qo)({control:a,name:"checkout_path"}),u=(0,d.qo)({control:a,name:"stripe_prices_attributes"}),p=(0,d.qo)({control:a,name:"all_spaces"}),f=(0,d.qo)({control:a,name:"space_group_ids"}),m=(0,d.qo)({control:a,name:"space_ids"}),b=function(t,r){t!==e||i===!r||o(!r)},h=function(){var e=s&&""!==s&&c&&""!==c;return b(l.eA.DETAILS_TAB,e),e},v=function(){var e=u.some((function(e){return!(!e.id||e._destroy)||(!!e.tmp_id||void 0)}));return b(l.eA.PRICING_TAB,e),e},y=[{label:l.eA.DETAILS_TAB,disabled:!h()},{label:l.eA.PRICING_TAB,disabled:e===l.eA.DETAILS_TAB||!h()||!v()},{label:l.eA.ACCESS_TAB,disabled:[l.eA.DETAILS_TAB,l.eA.PRICING_TAB].includes(e)||!h()||!v()||(r=p||f.length>0||m.length>0,b(l.eA.ACCESS_TAB,r),!r)},{label:l.eA.POST_PURCHASE_TAB,disabled:!0},{label:l.eA.TRACKING_TAB,disabled:!0}],g=function(){var e,r=(e=$r().mark((function e(r){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Xr(o,n,i,a,s,"next",e)}function s(e){Xr(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{handleTabClick:g,tabOptions:y,shouldBlockSubmitButton:i}};function rn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var nn=function(e,t){var r=[{label:l.eA.DETAILS_TAB},{label:l.eA.PRICING_TAB},{label:l.eA.ACCESS_TAB},{label:l.eA.POST_PURCHASE_TAB},{label:l.eA.TRACKING_TAB},{label:l.eA.WORKFLOWS_TAB}],n=function(){var e,r=(e=$r().mark((function e(r){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){rn(o,n,i,a,s,"next",e)}function s(e){rn(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{handleTabClick:n,tabOptions:r,shouldBlockSubmitButton:!1}},on=function(e){var t=e.activeTab,r=e.setActiveTab,n=e.mutation,o=e.isSubmitting,a=e.paywallGroupsEnabled,s=e.currentPaywallStatus,l=e.requiresCurrency,c=e.canChangeCurrency,u=(0,i.wh)().currentCommunitySettings,d=s?nn:tn;return(0,p.jsx)(Jr,{activeTab:t,setActiveTab:r,usePaywallFormContentHook:d,mutation:n,isSubmitting:o,paywallGroupsEnabled:a,currentPaywallStatus:s,requiresCurrency:l,canChangeCurrency:c,workflowsEnabled:null===u||void 0===u?void 0:u.upgrade_flows_for_workflows_paywalls_enabled})},an=(0,A.createContext)({onClose:ie.noop});an.displayName="PaywallFormProvider";var sn=function(e){var t=e.children,r={onClose:e.onClose};return(0,p.jsx)(an.Provider,{value:r,children:t})},ln=r(88767),cn=r(74543),un=r(69647),dn=function(e){var t=function(e){var t=(0,un.p)(),r=t.success,i=t.error,o=(0,n.dd)(),a=(0,ln.useMutation)((function(e){return cn.i.updateMemberAccess(e)})),s=a.isLoading;return{isOpen:o.visible,isSubmitting:s,onClose:function(){!a.isLoading&&o.hide()},handleSubmit:function(){a.mutate(e,{onSuccess:function(){r((0,c.t)("settings.paywalls.alerts.success.update_access_member")),o.hide().then((function(){return o.remove()}))},onError:function(){i("settings.paywalls.alerts.error.action_failed"),o.hide().then((function(){return o.remove()}))}})}}}(e.paywallId),r=t.isOpen,i=t.isSubmitting,o=t.onClose,a=t.handleSubmit;return(0,p.jsxs)(j.c,{isOpen:r,title:(0,c.t)("settings.paywalls.modal_update_access_member.title"),onClose:o,cancelText:(0,c.t)("settings.paywalls.modal_update_access_member.only_new_members"),onConfirm:a,confirmVariant:"primary",confirmText:(0,c.t)("settings.paywalls.modal_update_access_member.all_members"),disabled:i,children:[(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal_update_access_member.description")}),(0,p.jsx)("br",{}),(0,p.jsx)(y.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal_update_access_member.description_warning")})]})};function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mn=n.gk.create((function(e){return(0,p.jsx)(dn,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),bn=r(86730);function hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(r),!0).forEach((function(t){yn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gn=function(e){var t={paywall_group_id:null!==e&&void 0!==e&&e.enable_subscription_group?e.paywall_group_id:""};return{publish:e.publish,paywall:vn(vn(vn({},e),t),{},{stripe_prices_attributes:e.stripe_prices_attributes.map((function(e){return e.tmp_id?e:e._destroy?{id:e.id,_destroy:1}:e._updated?{id:e.id,preferred:e.preferred}:null})).filter((function(e){return e}))})}};function _n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(r),!0).forEach((function(t){jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return On(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return On(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kn=function(e){var t,r=e.paywall,o=e.refetchPaywalls,a=e.onClose,s=e.isModalVisible,u=e.initialTab,d=void 0===u?l.eA.DETAILS_TAB:u,p=Sn((0,A.useState)(d),2),f=p[0],m=p[1],b=Sn((0,A.useState)(null===r||void 0===r?void 0:r.status),2),h=b[0],v=b[1],y=(0,n.dd)(mn).show,g=(t=(0,i.nT)().records,{getDefaultValues:function(e){var r,n,i,o,a,s,l={trial_days:0,trial_requires_card:!1,can_be_repurchased:!1,stripe_prices_attributes:[],mobile_price_packages_attributes:[],all_spaces:!1,space_group_ids:[],space_ids:[],redirect_url_enabled:!1,thank_you_page_enabled:!0,post_purchase_email_enabled:!0,self_trial_cancelable:!1,mobile_paywall_resource_attributes:{id:null,processor_id:null},post_purchase_email_message:(0,c.t)("settings.paywalls.form.post_purchase_email_default_message_text"),post_purchase_email_meta:{subject:(0,c.t)("settings.paywalls.form.post_purchase_email_default_subject_text")},currency_id:"",conversion_tracking_js_code:""};return e?xn(xn(xn({},l),e),{},{redirect_url_enabled:!(null===e||void 0===e||!e.redirect_url),enable_trial:(null===e||void 0===e?void 0:e.trial_days)>0,enable_subscription_group:!(null===e||void 0===e||!e.paywall_group_id),space_ids:(o=e.space_ids,a=e.space_group_ids,s=wn(o),t.forEach((function(e){a.includes(e.space_group_id)&&s.push(e.id)})),Array.from(new Set(s))),space_group_ids:null!==(r=e.space_group_ids)&&void 0!==r?r:[],currency_id:null!==(n=null===e||void 0===e||null===(i=e.currency)||void 0===i?void 0:i.id)&&void 0!==n?n:""}):l}}).getDefaultValues;(0,A.useEffect)((function(){s||m(d),v(null===r||void 0===r?void 0:r.status)}),[s]);var _=(0,bn.B)({updateCallback:function(e){o(),v(e.status),e.policies.can_update_all_members_access&&e.access_to_content_changed&&y({paywallId:e.id})},createCallback:function(e){a(),o(),v(e.status)},paywall:r}),x=_.createMutation,j=_.updateMutation,w=r?j:x;return{getDefaultValues:g,activeTab:f,setActiveTab:m,handleSubmit:function(e,t){var r=t.reset;if(!!e.id)return w.mutateAsync(gn(e)).then((function(e){r(g(e))})).catch((function(e){console.error(e)}));if(f===l.eA.DETAILS_TAB)m(l.eA.PRICING_TAB);else if(f===l.eA.PRICING_TAB)m(l.eA.ACCESS_TAB);else if(f===l.eA.ACCESS_TAB)m(l.eA.POST_PURCHASE_TAB);else if(f===l.eA.POST_PURCHASE_TAB)m(l.eA.TRACKING_TAB);else if(f===l.eA.TRACKING_TAB)return w.mutate(gn(e))},mutation:w,currentPaywallStatus:h}};function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var In=function(e){var t,r,c,u,d=e.paywall,m=e.refetchPaywalls,b=e.paywallGroupsEnabled,h=e.initialTab,v=(0,n.dd)(),y=(0,i.wh)(),g=y.currentCommunitySettings,_=y.isLoading,x=function(){v.hide(),v.remove()},j=kn({initialTab:h,paywall:d,refetchPaywalls:m,onClose:x,isModalVisible:v.visible}),w=j.getDefaultValues,O=j.setActiveTab,S=j.activeTab,P=j.handleSubmit,k=j.mutation,C=j.currentPaywallStatus;if(_)return(0,p.jsx)(a.a,{});var N=null!==(t=null===d||void 0===d||null===(r=d.policies)||void 0===r?void 0:r.requires_currency)&&void 0!==t?t:g.currencies_enabled,I=null===(c=null===d||void 0===d||null===(u=d.policies)||void 0===u?void 0:u.can_change_currency)||void 0===c||c,A=S===l.eA.WORKFLOWS_TAB?function(){}:P;return(0,p.jsxs)(s.u_,{isOpen:v.visible,onClose:x,contentPortalId:"paywall-admin-modal",children:[(0,p.jsx)(s.u_.Overlay,{}),(0,p.jsx)(s.u_.Content,{size:"2xl",children:(0,p.jsx)(o.l,{onSubmit:A,"data-testid":"paywall-admin-modal",defaultValues:w(d),children:function(e){var t=e.formState.isSubmitting;return(0,p.jsxs)(sn,{onClose:x,children:[(0,p.jsxs)(s.u_.Header,{className:"!pt-4",children:[(0,p.jsx)(s.u_.Title,{children:(0,p.jsx)(f,{isPaywallNew:!d})}),(0,p.jsx)(s.u_.HeaderActions,{children:(0,p.jsx)(s.u_.CloseButton,{onClick:x,"data-testid":"paywall-admin-modal-close-button"})})]}),(0,p.jsx)(on,{activeTab:S,setActiveTab:O,isSubmitting:t,mutation:k,currentPaywallStatus:C,paywallGroupsEnabled:b,requiresCurrency:N,canChangeCurrency:I})]})}})})]})},An=n.gk.create((function(e){return(0,p.jsx)(In,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),En=function(){return(0,n.dd)(An)}},48247:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(86013),i=r(85893),o=function(e){var t=e.children;return(0,i.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t,(0,i.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.generic.call_support")}})]})}},54558:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(86013),i=r(4848),o=r(14966),a=r(85893),s=function(e){if(!e.paymentProcessor.is_restricted_soon)return null;var t="warning",r=(0,a.jsx)(i.O,{variant:t,children:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.status")}),s=(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.title"),l=(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,a.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.description")}}),(0,a.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.call_support")}})]});return(0,a.jsx)(o.t,{sentiment:t,badge:r,title:s,description:l})}},33048:(e,t,r)=>{"use strict";r.d(t,{q:()=>z});var n=r(86013),i=r(81786),o=r(67687),a=r(11049),s=r(82177),l=r(69647),c="stripe-onboarding-flow-v2",u=["US","BR","GB","AU","CA","DE","FR"],d=["IN","MX","MY","TH"],p=["AL","AG","AR","AM","AT","BS","BH","BE","BO","BA","BG","KH","CL","CO","CR","CI","HR","CY","CZ","DK","DO","EC","EG","SV","EE","ET","FI","GM","GH","GR","GT","GY","HK","HU","IS","ID","IE","IL","IT","JM","JP","JO","KE","KW","LV","LI","LT","LU","MO","MG","MT","MU","MD","MN","MA","NA","NL","NZ","NG","MK","NO","OM","PA","PY","PE","PH","PL","PT","QA","RO","RW","SA","SN","RS","SI","SG","SK","ZA","KR","ES","LK","LC","SE","CH","TW","TZ","TT","TN","TR","AE","UY","UZ","VN"],f=r(88767),m=r(73546),b=function(e){var t=e.onSuccess,r=e.onError,i=(0,n.t)("settings.paywalls.alerts.error.action_failed"),o=(0,l.p)().error,a=(0,f.useMutation)((function(e){return m.p.create(e)})),s=a.mutate,c=a.isLoading,u=a.isSuccess,d=function(e){window.location.href=e.url},p=function(e){o((null===e||void 0===e?void 0:e.message)||i)};return{onSubmit:function(e){s(e,{onSuccess:t||d,onError:r||p})},isLoading:c,isSuccess:u}},h=r(67294),v=r(94184),y=r.n(v),g=r(87536),_=r(78270),x=r(86866),j=r(10161),w=r(84721),O=r(8246),S=r(85893);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N="stripe_onboarding_modal",I=function(e){var t=e.countries,r=e.isDisabled,i=e.defaultValue,a=(0,s.UV)().contentPortalElement;return(0,S.jsxs)("div",{className:"flex flex-col gap-y-4 py-4",children:[(0,S.jsx)(O.Z.BodySm,{color:"text-default",children:(0,S.jsx)(j.w,{content:(0,n.t)([N,"subtitles"])[0]})}),(0,S.jsx)(O.Z.BodySm,{color:"text-default",children:(0,S.jsx)(j.w,{content:(0,n.t)([N,"subtitles"])[1]})}),(0,S.jsx)(o.l.TextSelect,{name:"country",options:t,label:null,initialValue:i,disabled:r,appendTo:a,rules:{validate:{countryIsSupported:function(e){return!d.includes(e.toUpperCase())}}},popperOptions:{modifiers:[k(k({},w.Z),{},{phase:"afterWrite"})]}})]})},A=r(18605),E=r(45144),D=function(e){var t=e.children;return(0,S.jsxs)(E.v,{className:"flex flex-row gap-3",children:[(0,S.jsx)("div",{children:(0,S.jsx)(A.JO,{type:"information-outline",size:24})}),(0,S.jsx)(O.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},T=function(e){var t=e.isDisabled,r=e.onClose;return(0,S.jsx)(s.u_.Footer,{children:(0,S.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,S.jsx)(i.z,{type:"button",variant:"secondary",onClick:r,disabled:t,children:(0,n.t)("cancel")}),(0,S.jsx)(i.z,{form:c,type:"submit",variant:"circle",disabled:t,children:(0,n.t)("continue")})]})})};function L(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R=function(e){var t=e.isLoading,r=e.onClose,i=e.defaultCountry,o=(0,g.Gc)(),a=o.watch,l=o.formState.isSubmitSuccessful,c=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled,f=(0,h.useMemo)((function(){var e=u.map((function(e){return{label:(0,n.t)([x.p,e]),value:e.toLowerCase()}})),t=[].concat(L(p),L(d)).map((function(e){return{label:(0,n.t)([x.p,e]),value:e.toLowerCase()}})).sort((function(e,t){return e.label>=t.label?1:-1}));return[].concat(L(e),L(t))}),[]),m=a("country"),b=d.includes(m.toUpperCase()),v=t||l,w=t||l||b;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(s.u_.Body,{className:y()({"!px-5":c}),children:[(0,S.jsx)(I,{countries:f,isDisabled:v,defaultValue:i}),b&&(0,S.jsx)(D,{children:(0,S.jsx)(j.w,{content:(0,n.t)(["stripe_onboarding_modal","country_not_supported"],{country:(0,n.t)([x.p,m.toUpperCase()])})})})]}),(0,S.jsx)(T,{isDisabled:w,onClose:r})]})},B=function(){var e=(0,a.dd)(),t=(0,l.p)().error,r=b({onError:function(e){t(null===e||void 0===e?void 0:e.message),m()}}),i=r.onSubmit,u=r.isLoading,d=r.isSuccess,p=function(){var e,t,r=null===(e=window)||void 0===e?void 0:e.CLOUDFLARE_COUNTRY_CODE,n="pt"===(null===(t=window)||void 0===t?void 0:t.locale)?"BR":null;return(r||n||"US").toLowerCase()},f=u||d,m=function(){!f&&e.remove()},h={country:p()};return(0,S.jsx)(o.l,{id:c,onSubmit:i,defaultValues:h,children:(0,S.jsxs)(s.u_,{isOpen:e.visible,onClose:m,contentPortalId:"stripe-onboarding-business-modal",children:[(0,S.jsx)(s.u_.Overlay,{}),(0,S.jsxs)(s.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:[(0,S.jsxs)(s.u_.Header,{children:[(0,S.jsx)(s.u_.Title,{size:"md",children:(0,n.t)(["stripe_onboarding_modal","title"])}),(0,S.jsx)(s.u_.HeaderActions,{children:(0,S.jsx)(s.u_.CloseButton,{onClick:m})})]}),(0,S.jsx)(R,{isLoading:u,onClose:m,defaultCountry:p()})]})]})})},U=function(){var e=(0,a.dd)(a.gk.create(B)),t=(0,n.t)("settings.paywalls.processor_status_v2.onboarding.subtitles"),r=b({}).onSubmit;return(0,S.jsxs)(o.l,{onSubmit:r,defaultValues:{forceForm:!0},formClassName:"flex flex-col gap-y-4",children:[(0,S.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[0]}}),(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[1]}}),(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[2]}})]}),(0,S.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,S.jsx)(i.z,{type:"button",variant:"circle","data-testid":"stripe-connect",onClick:function(){e.show()},children:(0,S.jsx)("span",{children:(0,n.t)("settings.paywalls.buttons.connect")})}),(0,S.jsx)(i.z,{type:"button",variant:"secondary",onClick:function(){window.open("https://help.circle.so/c/paywall-setup/","_blank")},children:(0,n.t)("learn_more")})]})]})},F=r(14966),z=function(){var e=(0,n.t)("settings.paywalls.processor_status_v2.onboarding.title");return(0,S.jsxs)("div",{className:"flex h-full w-full flex-col gap-y-4 self-center md:w-3/4",children:[(0,S.jsx)(F.t,{sentiment:"default",title:e,description:(0,S.jsx)(U,{})}),(0,S.jsx)("p",{className:"text-default text-xs",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.onboarding.stripe_regulations_description")}})]})}},19997:(e,t,r)=>{"use strict";r.d(t,{a:()=>p});var n=r(86013),i=r(88767),o=r(73546),a=r(81786),s=r(4848),l=r(69647),c=r(48247),u=r(14966),d=r(85893),p=function(){var e=(0,n.t)("settings.paywalls.alerts.error.action_failed"),t=(0,l.p)().error,r=(0,i.useMutation)((function(){return o.p.refresh()})),p=r.mutate,f=r.isLoading,m="danger",b=(0,d.jsx)(s.O,{variant:m,children:(0,n.t)("settings.paywalls.processor_status_v2.restricted.status")}),h=(0,d.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,d.jsx)(c.d,{children:(0,d.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted.description")}})}),(0,d.jsx)("div",{children:(0,d.jsx)(a.z,{variant:"circle",onClick:function(){p(void 0,{onSuccess:function(e){window.location.href=e.url},onError:function(r){t((null===r||void 0===r?void 0:r.message)||e)}})},disabled:f,children:(0,n.t)("settings.paywalls.buttons.refresh")})})]});return(0,d.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,d.jsx)(u.t,{sentiment:m,title:(0,n.t)("settings.paywalls.processor_status_v2.restricted.title"),badge:b,description:h})})}},67766:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(86013),i=r(98338),o=r(4848),a=r(14966),s=r(85893),l=function(){var e=(0,i.wh)().currentCommunitySettings,t=(0,s.jsx)(o.O,{variant:"warning",children:(0,n.t)("settings.paywalls.processor_status_v2.restricted.status")}),r=(0,s.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.description")}});return null!==e&&void 0!==e&&e.paywalls_for_restricted_country_enabled?null:(0,s.jsx)(a.t,{sentiment:"warning",title:(0,n.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.title"),badge:t,description:r})}},14966:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(94184),i=r.n(n),o=r(8246),a=r(85893),s=function(e){var t=e.sentiment,r=e.title,n=e.badge,s=e.description,l=i()("md:border md:border-primary md:rounded-lg md:p-8 bg-primary",{"flex flex-row":"default"!==t});return(0,a.jsx)("div",{className:l,"data-testid":"payment-processor-status",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[n&&(0,a.jsx)("div",{children:n}),r&&(0,a.jsx)(o.Z.TitleMd,{"data-testid":"title",children:r}),s&&(0,a.jsx)("div",{"data-testid":"description",children:s})]})})}},85641:(e,t,r)=>{"use strict";r.d(t,{t:()=>c});var n=r(86013),i=r(74481),o=r(4848),a=r(48247),s=r(14966),l=r(85893),c=function(e){var t=e.status,r=t==i.Q_.REJECTED?"danger":"warning",c=(0,l.jsx)(o.O,{variant:r,children:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".status"))}),u=(0,l.jsx)(a.d,{children:(0,l.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".description"))}})});return(0,l.jsx)(s.t,{sentiment:r,badge:c,title:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".title")),description:u})}},53103:(e,t,r)=>{"use strict";r.d(t,{eA:()=>i,J6:()=>o,nh:()=>a});var n=r(86013),i={DETAILS_TAB:(0,n.t)("settings.paywalls.modal.tabs.details.title"),PRICING_TAB:(0,n.t)("settings.paywalls.modal.tabs.pricing.title"),ACCESS_TAB:(0,n.t)("settings.paywalls.modal.tabs.access.title"),POST_PURCHASE_TAB:(0,n.t)("settings.paywalls.modal.tabs.post_purchase.title"),TRACKING_TAB:(0,n.t)("settings.paywalls.modal.tabs.tracking.title"),WORKFLOWS_TAB:(0,n.t)("settings.paywalls.modal.tabs.workflows.title")},o={NOT_EXIST:"PAYMENT_PROCESSOR_NOT_EXIST",RESTRICTED:"PAYMENT_PROCESSOR_RESTRICTED",RESTRICED_FOR_APPLICATION_FEES:"PAYMENT_PROCESSOR_RESTRICTED_FOR_APPLICATION_FEES",PENDING:"PAYMENT_PROCESSOR_PENDING",REJECTED:"PAYMENT_PROCESSOR_REJECTED",ENABLED:"PAYMENT_PROCESSOR_ENABLED"},a=[{title:(0,n.t)("settings.paywalls.list.form.display_name_label"),dataIndex:"displayName",key:"displayName"},{title:(0,n.t)("settings.paywalls.list.form.amount_label"),dataIndex:"preferred_price",key:"preferred_price"},{title:(0,n.t)("settings.paywalls.list.form.status_label"),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"},{title:" ",dataIndex:"actionMenu",key:"actionMenu"}]},95982:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var n=r(74481),i=r(53103),o=function(e){var t,r=e.paymentProcessor,o=void 0;return(0,n.$1)(r).some((function(e){o||(o=e())})),{paymentProcessorStatus:null!==(t=o)&&void 0!==t?t:i.J6.ENABLED}}},86730:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n=r(86013),i=r(88767),o=r(74543),a=r(56031),s=r(69647),l=function(e){var t=e.createCallback,r=e.updateCallback,l=e.paywall,c=(0,s.p)(),u=c.success,d=c.error,p=(0,n.t)("settings.paywalls.alerts.error.action_failed"),f=function(e,t,r){u(t),r&&r(e)},m=function(e){var t="string"===typeof(null===e||void 0===e?void 0:e.errorDetails)?null===e||void 0===e?void 0:e.errorDetails:p;d(t,{duration:"long"})},b=function(e){return{publish:e,paywall:{status:e?l.status:a.Tl.INACTIVE}}};return{updateMutation:(0,i.useMutation)((function(e){return o.i.updatePaywall(l.id,e)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.updated"),r)},onError:m}),createMutation:(0,i.useMutation)((function(e){return o.i.createPaywall(e)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.created"),t)},onError:m}),publishMutation:(0,i.useMutation)((function(){return o.i.updatePaywall(l.id,b(!0))}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.published"),r)},onError:m}),archiveMutation:(0,i.useMutation)((function(){return o.i.updatePaywall(l.id,b(!1))}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.archived"),r)},onError:m}),deleteMutation:(0,i.useMutation)((function(){return o.i.deletePaywall(l.id)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.deleted"),r)},onError:m})}}},27414:(e,t,r)=>{"use strict";r.d(t,{u:()=>F,R:()=>U});var n=r(88767),i=r(11049),o=r(90132),a=r(93788),s=r(14856),l=r(69647),c=r(86013),u=r(81786),d=r(8246),p=r(98627),f=r(53103),m=r(85893);var b=function(e){var t,r,n,i,o=e.refetchPaywalls,a=e.paymentProcessorStatus,s=e.paywallGroupsEnabled,l=(0,p.I)(),b=function(){return l.show({paywall:void 0,refetchPaywalls:o,paywallGroupsEnabled:s})},h=null!==(t=(r={},n=f.J6.ENABLED,i=function(){return(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)(d.Z.TitleSm,{weight:"font-semibold",children:(0,c.t)("settings.paywalls.title")}),(0,m.jsx)(u.z,{variant:"circle",onClick:b,children:(0,c.t)("settings.paywalls.buttons.new")})]})},n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r)[a])&&void 0!==t?t:function(){return(0,m.jsx)("div",{className:"flex justify-between",children:(0,m.jsx)(d.Z.TitleSm,{weight:"font-semibold",children:(0,c.t)("settings.paywalls.title")})})};return(0,m.jsx)("div",{className:"paywalls-admin-header__container table-wrapper",children:h()})},h=r(72860),v=r(13288),y=r(56421),g=r(42550),_=r(18605),x=r(67741),j=r(11487),w=function(e){var t=e.paywalls,r=e.refetchPaywalls,n=e.paywallGroupsEnabled,i=(0,p.I)().show;return{showPaywallAdminFormModalToCreate:function(){return i({paywall:void 0,refetchPaywalls:r,paywallGroupsEnabled:n})},dataSource:null===t||void 0===t?void 0:t.map((function(e){var t,o,a={active:{label:(0,c.t)("settings.paywalls.status.active"),variant:"success"},inactive:{label:(0,c.t)("settings.paywalls.status.inactive"),variant:"default"},draft:{label:(0,c.t)("settings.paywalls.status.draft"),variant:"default"},notIdentified:{label:"",variant:"default"}},s=null!==(t=a[e.status])&&void 0!==t?t:a.notIdentified,l=null!==(o=e.stripe_prices_attributes.find((function(e){return e.preferred})))&&void 0!==o?o:e.stripe_prices_attributes[0],u=l?(0,y.Y9)(e.currency,l.interval,l.interval_count,l.amount):(0,c.t)("settings.paywalls.list.form.no_preferred_price_selected"),d=[{key:"edit-paywall",label:(0,c.t)("settings.paywalls.list.form.edit"),onClick:function(){return function(e){return i({paywall:e,refetchPaywalls:r,paywallGroupsEnabled:n})}(e)}}];return{key:e.id,displayName:e.name||e.display_name,preferred_price:u,status:(0,m.jsx)(x.C,{variant:s.variant,children:s.label}),action:(0,m.jsxs)("button",{type:"button",className:"text-[12px]",onClick:function(){return(0,g.p0)(e.checkout_path,"#paywalls-list")},children:[(0,m.jsx)(_.JO,{type:"20-copy",className:"mr-2"}),(0,m.jsx)("span",{children:(0,c.t)("settings.paywalls.list.form.copy_url")})]}),actionMenu:(0,m.jsx)(j.t,{menuItems:d,dropdownSide:"left",shouldCloseOnClickItem:!0})}}))}},O=function(e){var t=e.paywalls,r=e.refetchPaywalls,n=e.isPaywallsLoading,i=e.paywallGroupsEnabled,o=w({paywalls:t,refetchPaywalls:r,paywallGroupsEnabled:i}).dataSource;return n?(0,m.jsx)(v.a,{}):(0,m.jsx)("div",{className:"paywall-coupons-list","data-testid":"paywall-list",children:o.length>0&&(0,m.jsx)(h.w,{columns:f.nh,className:"paywall-coupons-list__table",dataSource:o||[],hasStickyHeader:!0,headerClassName:"top-[116px]"})})},S=r(54558),P=r(33048),k=r(19997),C=r(67766),N=r(85641),I=r(64687),A=r.n(I),E=r(81089),D=r(50732),T=r(95982);function L(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var M=function(e){var t=e.paymentProcessor,r=function(){var e,t=(e=A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.UT)(D.av.paywalls.index()));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),i=(0,n.useQuery)("paywalls",r);return{paywalls:i.data,refetchPaywalls:i.refetch,isPaywallsLoading:i.isLoading,paymentProcessorStatus:(0,T.l)({paymentProcessor:t}).paymentProcessorStatus}};function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=new n.QueryClient(s.Vr),U=function(e){var t,r=e.paymentProcessor,n=e.paywallGroupsEnabled,i=e.shouldHideHeader,o=void 0!==i&&i,a=M({paymentProcessor:r}),s=a.paymentProcessorStatus,l=a.paywalls,c=a.refetchPaywalls,u=a.isPaywallsLoading,d=(R(t={},f.J6.NOT_EXIST,(function(){return null})),R(t,f.J6.REJECTED,(function(){return(0,m.jsx)(N.t,{status:"rejected"})})),R(t,f.J6.PENDING,(function(){return(0,m.jsx)(N.t,{status:"pending"})})),R(t,f.J6.RESTRICED_FOR_APPLICATION_FEES,(function(){return(0,m.jsx)(C.c,{})})),R(t,f.J6.RESTRICTED,(function(){return(0,m.jsx)(k.a,{})})),R(t,f.J6.ENABLED,(function(){return(0,m.jsx)(S.T,{paymentProcessor:r})})),R(t,f.J6.NOT_EXIST,(function(){return(0,m.jsx)(P.q,{})})),t)[s];return(0,m.jsxs)(m.Fragment,{children:[!o&&(0,m.jsx)(b,{refetchPaywalls:c,paymentProcessorStatus:s,paywallGroupsEnabled:n}),d(),s===f.J6.ENABLED&&(0,m.jsx)(O,{refetchPaywalls:c,paywalls:null!==l&&void 0!==l?l:[],isPaywallsLoading:u,paywallGroupsEnabled:n})]})},F=function(e){var t=e.paymentProcessor,r=e.paywallGroupsEnabled;return(0,m.jsx)(o.C,{children:(0,m.jsx)(a.H,{children:(0,m.jsx)(l.V,{children:(0,m.jsx)(n.QueryClientProvider,{client:B,children:(0,m.jsx)(i.yB,{children:(0,m.jsx)(U,{paymentProcessor:t,paywallGroupsEnabled:r})})})})})})}},80388:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(98338),i=function(){var e,t=(0,n.wh)().currentCommunity;return null===t||void 0===t||null===(e=t.policies)||void 0===e?void 0:e.is_paywall_tax_available}},11119:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.className,r=e.children;return(0,o.jsx)("div",{className:i()("border-secondary-200 flex flex-col py-6 empty:hidden",t),children:r})}},60591:(e,t,r)=>{"use strict";r.d(t,{f:()=>c});var n=r(94184),i=r.n(n),o=r(86013),a=r(11119),s=r(21942),l=r(85893),c=function(e){var t=e.className,r=e.preview.first_payment,n=r.due_on_phrase,c=r.formatted_amount_due,u=r.subtotal,d=r.formatted_subtotal,p=r.discount,f=r.formatted_discount,m=r.tax,b=r.formatted_tax,h=r.ending_balance,v=r.formatted_ending_balance;return(0,l.jsxs)(a.g,{className:i()("gap-y-2",t),children:[(0,l.jsx)(s.W,{label:n,labelWeight:"semibold",value:c,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-total"}),(p<0||m>0||h<0)&&(0,l.jsxs)(l.Fragment,{children:[u>=0&&(0,l.jsx)(s.W,{label:(0,o.t)("paywall_checkout.coupon.subtotal"),value:d,dataTestId:"checkout-form-preview-today-payment-subtotal"}),p<0&&(0,l.jsx)(s.W,{label:(0,o.t)("paywall_checkout.coupon.discount"),value:f,valueColor:"text-green-600",dataTestId:"checkout-form-preview-today-discount"}),m>0&&(0,l.jsx)(s.W,{label:(0,o.t)("paywall_checkout.coupon.tax"),value:b,dataTestId:"checkout-form-preview-today-tax"}),h<0&&(0,l.jsx)(s.W,{label:(0,o.t)("paywall_checkout.first_payment.ending_balance"),tooltip:(0,o.t)("paywall_checkout.first_payment.ending_balance_tooltip"),value:v,valueColor:"text-green-600",dataTestId:"checkout-form-preview-carry-over"})]})]})}},34470:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var n=r(86013),i=r(11119),o=r(21942),a=r(85893),s=function(e){var t=e.preview.future_payments;if(!t)return null;var r=t.formatted_total,s=t.start_on_phrase,l=t.formatted_subtotal,c=t.discount,u=t.formatted_discount,d=t.discount_phrase,p=t.tax,f=t.formatted_tax;return(0,a.jsxs)(i.g,{className:"gap-y-2 border-t",children:[(0,a.jsx)(o.W,{label:(0,n.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",value:r,valueWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"}),(0,a.jsx)(o.W,{label:s,value:l,dataTestId:"checkout-form-preview-future-payments-subtotal"}),c<0&&(0,a.jsx)(o.W,{label:(0,n.t)("paywall_checkout.coupon.discount"),value:u,valueColor:"text-green-600",tooltip:d,dataTestId:"checkout-form-preview-future-payments-discount"}),p>0&&(0,a.jsx)(o.W,{label:(0,n.t)("paywall_checkout.coupon.tax"),value:f,dataTestId:"checkout-form-preview-future-payments-tax"})]})}},1522:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(86013),i=r(11119),o=r(21942),a=r(85893),s=function(e){var t=e.preview;return(0,a.jsx)(i.g,{className:"gap-y-3 border-t py-8",children:(0,a.jsx)(o.W,{label:(0,n.t)("paywall_checkout.amount_due"),labelSize:"md",labelWeight:"semibold",value:t.formatted_amount_due_now,valueSize:"lg",valueWeight:"semibold",dataTestId:"checkout-form-preview-total-due-today"})})}},21942:(e,t,r)=>{"use strict";r.d(t,{W:()=>c});var n=r(94184),i=r.n(n),o=r(18605),a=r(46266),s=r(8246),l=r(85893),c=function(e){var t=e.className,r=e.label,n=e.labelSize,c=void 0===n?"sm":n,u=e.labelWeight,d=void 0===u?"normal":u,p=e.tooltip,f=e.value,m=e.valueSize,b=void 0===m?"sm":m,h=e.valueColor,v=void 0===h?"text-primary":h,y=e.valueWeight,g=void 0===y?"normal":y,_=e.dataTestId,x="sm"===c?s.Z.LabelSm:s.Z.LabelMd,j="sm"===b?s.Z.LabelSm:"md"===b?s.Z.LabelMd:s.Z.LabelLg;return(0,l.jsxs)("div",{className:i()(t,"flex flex-row items-center justify-between space-x-2 whitespace-nowrap md:space-x-3"),"data-testid":_,children:[(0,l.jsxs)("div",{className:"flex flex-row gap-x-2 whitespace-normal",children:[(0,l.jsx)(x,{weight:d,children:r}),p&&(0,l.jsx)(a.Y,{dataTestId:"checkout-form-preview-entry-tooltip",className:"inline-flex",content:p,children:(0,l.jsx)(o.JO,{type:"16-question-mark",size:16,color:"text-primary"})})]}),(0,l.jsx)(j,{weight:g,color:v,children:f})]})}},36891:(e,t,r)=>{"use strict";r.d(t,{PC:()=>i,oO:()=>o,C:()=>a,zS:()=>s,IF:()=>l,JV:()=>c,bE:()=>u,Gs:()=>d});var n=r(86013),i={message:(0,n.t)("services.paywalls.failures.internal.generic")},o={message:(0,n.t)("paywall_checkout.form.errors.stripe_connection_failed")},a={message:(0,n.t)("paywall_checkout.form.errors.pix_payment.time_expired"),error_details:"PIX_PAYMENT_EXPIRED"},s={message:(0,n.t)("paywall_checkout.form.errors.pix_payment.pix_modal_closed"),error_details:"PIX_MODAL_CLOSED"},l=function(){var e;return null===(e=window.Rewardful)||void 0===e?void 0:e.referral},c={disablePayButton:!0,type:"danger",existingAccount:!1,hasAlreadyPurchased:!1,message:null},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.loginUrl,o=t.resetPasswordUrl;return{USER_LOGIN_REQUIRED:{disablePayButton:!1,type:"warning",existingAccount:!0,message:(0,n.t)("paywall_checkout.form.errors.existing_account",{sign_in_url:r,reset_password_url:o})},INVALID_COUPON:{message:e.message},PIX_PAYMENT_EXPIRED:a,PIX_MODAL_CLOSED:s}[e.error_details]||i},d=function(e){var t=e.isPaywallActive,r=e.selectedPrice,i=e.preview;return t&&r?null!==r&&void 0!==r&&r.trial_enabled?null!==r&&void 0!==r&&r.trial_requires_upfront_payment?(0,n.t)("paywall_checkout.form.buttons.paid_trial"):(0,n.t)("paywall_checkout.form.buttons.trial"):0===(null===i||void 0===i?void 0:i.amount_due_now)&&null!==r&&void 0!==r&&r.display_interval?(0,n.t)("paywall_checkout.form.buttons.subscribe"):0!==(null===i||void 0===i?void 0:i.amount_due_now)||null!==r&&void 0!==r&&r.display_interval?(null===i||void 0===i?void 0:i.amount_due_now)>0?"".concat((0,n.t)("paywall_checkout.form.buttons.pay")," ").concat(i.formatted_amount_due_now):"".concat((0,n.t)("paywall_checkout.form.buttons.pay")," ").concat(r.display_amount_with_currency):(0,n.t)("paywall_checkout.form.buttons.continue"):(0,n.t)("paywall_checkout.form.buttons.draft_pay")}},6829:(e,t,r)=>{"use strict";r.d(t,{h:()=>Pt});var n=r(67294),i=r(86664),o=r(64593),a=r(87536),s=r(88767),l=r(42658),c=r(50743),u=r(38503),d=r(14856),p=r(68921),f=r(93585),m=r(94184),b=r.n(m),h=r(86013),v=r.n(h),y=r(8246),g=r(85893),_=function(e){var t=e.name,r=e.addon,n=e.className,i=e.childClassName,o=e.children,a=e.optional,s=e.LabelComponent,l=void 0===s?y.Z.LabelSm:s;return(0,g.jsxs)("div",{className:b()(n,"flex flex-col"),children:[(0,g.jsxs)("div",{className:b()(i,"mb-1 flex flex-row items-center"),children:[(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,g.jsx)(l,{weight:"semibold",children:v().t("paywall_checkout.form.fields.".concat(t))}),a&&(0,g.jsxs)(g.Fragment,{children:[" ",(0,g.jsx)(y.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(v().t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),o]})},x=r(18605),j=r(81786),w=r(13288),O=r(42550),S=r(36891),P=r(64687),k=r.n(P),C=r(19647),N=r(13051),I=r(14246),A=r(81089),E=r(50732),D=function(e){return(0,A.t5)(E.av.communityMemberCharge.show({processorId:e}),{method:"GET"})},T=r(94719);function L(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var M=function(e,t){var r,n,i=(null===e||void 0===e?void 0:e.subscription_processor_id)||(null===e||void 0===e?void 0:e.payment_intent_processor_id)||(null===e||void 0===e?void 0:e.invoice_processor_id),o="".concat(t).concat(i);return null===(r=window.webview)||void 0===r||null===(n=r.paymentSuccessful)||void 0===n||n.call(r),window.open(o,"_self")},R=function(){var e,t=(e=k().mark((function e(t,r,n,i,o,a){var s,l,c,u,d,p,f,m,b=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=b.length>6&&void 0!==b[6]&&b[6],l=o.payment_intent_processor_id,c=o.invoice_processor_id,!(a>30)){e.next=5;break}return t(S.PC),e.abrupt("return");case 5:return u=null!==l&&void 0!==l?l:c,e.next=8,D(u);case 8:if(!(d=e.sent).ok){e.next=25;break}return e.next=12,d.json();case 12:if(p=e.sent,!(0,T.Om)(p)){e.next=25;break}if(!s||!n){e.next=24;break}return e.next=17,N.k.complete(o);case 17:if((f=e.sent).ok){e.next=24;break}return e.next=21,f.json();case 21:return m=e.sent,r(m),e.abrupt("return");case 24:return e.abrupt("return",M(o,i));case 25:return e.next=27,new Promise((function(e){return setTimeout(e,2e3)}));case 27:return e.next=29,R(t,r,n,i,o,a+1,s);case 29:return e.abrupt("return",void 0);case 30:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,r,n,i,o,a){return t.apply(this,arguments)}}(),B=r(96486);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){V(o,n,i,a,s,"next",e)}function s(e){V(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Z=function(e){var t,r,n,o,a,l,c=e.stripe,u=e.elements,d=(0,p.Y)(),f=d.currentCommunity,m=d.checkoutConfirmationUrl,b=d.loginUrl,h=d.resetPasswordUrl,v=d.handleError,y=d.setIsProcessingPayment,g=d.getSelectedPrice,_=d.isCardInfoRequired,x=d.isSetupIntentRequired,j=d.arePostCreateActionsRequired,w=d.previewMutation,O=d.isPaywallDigitalWalletEnabled,P=d.setPaywallFailure,A=(l=(0,p.Y)().memberBillingInfo,{paymentMethodDataParams:(0,B.isEmpty)(l)?{}:{payment_method_data:{billing_details:{address:(t=l.address_line1,r=l.address_line2,n=l.address_city,o=l.address_state,a=l.address_postal_code,{line1:t,line2:r,city:n,state:o,country:l.address_country,postal_code:a})}}}}).paymentMethodDataParams,E=function(e){(0,I.kW)(e)?P(e.failure):function(e,t,r,n){e((0,S.bE)(n,{loginUrl:t,resetPasswordUrl:r}))}(v,b,h,e)},D=function(){var e=q(k().mark((function e(t,r){var n,i=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,R(v,E,j,m,t,r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=q(k().mark((function e(){var t,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.submit();case 2:if(t=e.sent,!(r=t.error)){e.next=8;break}return v({message:r.message,disablePayButton:!1}),y(!1),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=g();O&&u&&w.data&&u.update({amount:w.data.amount_due_now});var U=function(){var e=q(k().mark((function e(t){var r,n,o,a,s,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payment_intent_processor_id,n=t.payment_intent_client_secret,o=!1,c&&u){e.next=5;break}return v(S.oO),e.abrupt("return");case 5:if(r||n){e.next=9;break}return e.next=8,D(t,0,o);case 8:return e.abrupt("return");case 9:return e.next=11,c.retrievePaymentIntent(n);case 11:if(!(a=e.sent).error){e.next=15;break}return v({message:a.error.message,disablePayButton:!0}),e.abrupt("return");case 15:if("canceled"!==(s=a.paymentIntent).status){e.next=19;break}return v(S.PC),e.abrupt("return");case 19:if("succeeded"!==s.status){e.next=23;break}return e.next=22,D(t,0,o);case 22:return e.abrupt("return");case 23:if(!O){e.next=35;break}if(!x){e.next=30;break}return e.next=27,T();case 27:if(e.sent){e.next=30;break}return e.abrupt("return");case 30:return e.next=32,c.confirmPayment({elements:u,clientSecret:t.payment_intent_client_secret,confirmParams:F({return_url:window.location.href},A),redirect:"if_required"});case 32:l=e.sent,e.next=38;break;case 35:return e.next=37,c.confirmCardPayment(t.payment_intent_client_secret,{payment_method:{card:u.getElement(i.CardElement)}});case 37:l=e.sent;case 38:if(o=!0,!l.error&&"succeeded"===l.paymentIntent.status){e.next=53;break}if(!o||!j){e.next=50;break}return e.next=43,N.k.cancel(F(F({},t),{},{processor_error:l.error}));case 43:return d=e.sent,e.next=46,d.json();case 46:if(!(p=e.sent).failure){e.next=50;break}return E(p),e.abrupt("return");case 50:v(l.error?{message:l.error.message,disablePayButton:!1}:S.PC),e.next=56;break;case 53:return f=F(F({},t),{},{processor_payment_method_id:l.paymentIntent.payment_method}),e.next=56,D(f,0,o);case 56:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=q(k().mark((function e(t){var r,n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.k.create_DEPRECATED({formData:t});case 2:if(!(r=e.sent).ok){e.next=14;break}return e.next=6,r.json();case 6:if(n=e.sent,!L.trial_enabled||L.trial_requires_upfront_payment){e.next=10;break}return M(n,m),e.abrupt("return");case 10:return e.next=12,U(n);case 12:e.next=18;break;case 14:return e.next=16,r.json();case 16:i=e.sent,E(i);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=(0,s.useMutation)(function(){var e=q(k().mark((function e(t){var r,n,o,a,s,l,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,(0,S.IF)()&&(r.referral_metadata=(0,S.IF)()),y(!0),e.prev=3,!_){e.next=46;break}if(!O){e.next=11;break}return e.next=8,T();case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:if(!x){e.next=46;break}return e.next=14,N.k.prepare_DEPRECATED(f.id,L.id);case 14:if((n=e.sent).ok){e.next=22;break}return e.next=18,n.json();case 18:return o=e.sent,E(o),y(!1),e.abrupt("return");case 22:return e.next=24,n.json();case 24:return a=e.sent,s=a.setup_intent.client_secret,e.next=28,c.retrieveSetupIntent(s);case 28:if((l=e.sent).setupIntent&&"succeeded"===l.setupIntent.status){e.next=39;break}if(!O){e.next=36;break}return e.next=33,c.confirmSetup({elements:u,clientSecret:s,confirmParams:F({return_url:window.location.href},A),redirect:"if_required"});case 33:l=e.sent,e.next=39;break;case 36:return e.next=38,c.confirmCardSetup(s,{payment_method:{card:u.getElement(i.CardElement)}});case 38:l=e.sent;case 39:if(!l.error){e.next=44;break}return console.error("Error: Setup error"),v({message:l.error.message,disablePayButton:!1}),y(!1),e.abrupt("return");case 44:d=l.setupIntent.payment_method,r.payment_method_processor_id=d;case 46:return e.next=48,z(r);case 48:e.next=54;break;case 50:e.prev=50,e.t0=e.catch(3),(0,C.d)(e.t0),v(S.PC);case 54:return y(!1),e.abrupt("return",void 0);case 56:case"end":return e.stop()}}),e,null,[[3,50]])})));return function(t){return e.apply(this,arguments)}}());return{onSubmitMutation:V}},G="requires_action",W="succeeded",H=function(e){return(null===e||void 0===e?void 0:e.status)===G},Q=function(e){return(null===e||void 0===e?void 0:e.status)===W};function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){X(o,n,i,a,s,"next",e)}function s(e){X(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(e){throw new Error(null===e||void 0===e?void 0:e.message,{cause:e.body})};function ne(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var ie=function(e,t,r){var n,i;(null===e||void 0===e||null===(n=e.cause)||void 0===n?void 0:n.error_details)!==S.zS.error_details&&((0,C.d)(e),console.error("Error: unexpected error occurred: ",e),t((0,S.bE)({message:e.message,error_details:(null===e||void 0===e||null===(i=e.cause)||void 0===i?void 0:i.error_details)||S.PC},r)))},oe=function(e){var t=e.stripe,r=e.elements,i=(0,p.Y)(),o=i.handleError,a=i.setIsProcessingPayment,l=i.loginUrl,c=i.resetPasswordUrl,u=Z({stripe:t,elements:r}),d=function(e){var t=e.stripe,r=(0,p.Y)(),i=r.currentCommunity,o=r.checkoutConfirmationUrl,a=(0,s.useMutation)((function(e){return t.confirmPixPayment(e.payment_intent_client_secret,{payment_method:{}})})),l=ee((0,n.useState)({}),2),c=l[0],u=l[1],d=(0,s.useMutation)((function(e){return N.k.prepare(e)})),f=(0,s.useMutation)((function(e){return N.k.create({formData:e})})),m=function(){var e=Y(k().mark((function e(r){var n,o,s,l,p,f,m,b,h,v,y,g,_,x,j;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.name,s=r.email,l=r.payment_method_type,p=r.paywall_price_id,f=r.coupon_code,m=r.coupon_code_applied,b=r.community_member_billing_info_attributes,h={name:o,email:s,payment_method_type:l,paywall_price_id:p,community_id:i.id,coupon_code:m?f:void 0,community_member_billing_info_attributes:b},!(v=JSON.stringify(c)===JSON.stringify(h))){e.next=9;break}return e.next=6,t.retrievePaymentIntent(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.payment_intent_client_secret);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:if(y=e.t0,g=v&&H(null===y||void 0===y?void 0:y.paymentIntent),e.t1=g&&(null===d||void 0===d?void 0:d.data),e.t1){e.next=17;break}return e.next=16,d.mutateAsync(h,{onSuccess:function(){u(h)},onError:re});case 16:e.t1=e.sent;case 17:if(!(_=e.t1)){e.next=29;break}return e.next=21,a.mutateAsync(_);case 21:if(x=e.sent,j=x.paymentIntent,!H(j)){e.next=25;break}throw new Error("Pix modal is closed",{cause:S.zS});case 25:if(Q(j)){e.next=29;break}throw d.reset(),u({}),new Error("Pix payment expired",{cause:S.C});case 29:return e.abrupt("return",_);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Y(k().mark((function e(t,r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.mutateAsync(K(K({},t),{},{payment_intent_id:r.payment_intent_id}),{onError:re});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=(0,s.useMutation)(function(){var e=Y(k().mark((function e(t){var r,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:if(!(r=e.sent)){e.next=9;break}return e.next=6,b(t,r);case 6:return(n=e.sent)&&M(n,o),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return{onSubmitMutation:h,mutations:{prepareMutation:d,checkoutMutation:f,confirmPixPaymentMutation:a}}}({stripe:t}),f={pix:d,card:u},m=function(){var e,t=(e=k().mark((function e(t){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.IF)()&&(t.referral_metadata=(0,S.IF)()),r=f[t.payment_method_type].onSubmitMutation,e.prev=2,a(!0),e.next=6,r.mutateAsync(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),ie(e.t0,o,{loginUrl:l,resetPasswordUrl:c});case 11:return e.prev=11,a(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ne(o,n,i,a,s,"next",e)}function s(e){ne(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{onSubmit:m}},ae=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)(),r=t.currentUser,n=t.hasAlreadyPurchased,o=t.loginUrl,s=t.communityRootUrl,l=t.paywall,c=t.getSelectedPrice,u=t.previewMutation,d=t.paymentError,f=t.isCardInfoValid,m=t.isPaywallActive,b=t.isCardInfoComplete,h=t.setIsCardInfoComplete,v=t.isTaxIdMandatory,y=t.shouldShowTaxIdForm,g=t.setStripePaymentMethodType,_=t.setIsMemberUsingSavedPaymentMethod,x=(0,i.useStripe)(),j=(0,i.useElements)(),w=c(),P=e(),k=P.name,C=P.email,N=P.password,I=P.termsOfService,A=P.community_member_billing_info_address_attributes_complete,E=P.community_member_billing_info_attributes,D=E.tax_id_value,T=E.tax_id_type,L=!A||!r&&(!k||!C||!N||!I)||!f||!m||d.disablePayButton||(0,O.y9)(n,l)||u.isLoading||u.isError||v&&y&&(!D||!T),M=u.data,R=(0,S.Gs)({isPaywallActive:m,selectedPrice:w,preview:M}),B=oe({stripe:x,elements:j}).onSubmit;return{paymentError:d,isSubmitDisabled:L,selectedPrice:w,currentUser:r,stripe:x,loginUrl:o,communityRootUrl:s,payButtonLabel:R,hasAlreadyPurchased:n,handleOnChangeCard:function(e){var t,r;g(e.value.type),e.complete?h(!0):b&&h(!1),_(!(null===(t=e.value)||void 0===t||null===(r=t.payment_method)||void 0===r||!r.id))},handleOnReadyCard:function(e){return r&&e.focus()},onSubmit:B}},se=r(11119),le=r(64422),ce=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.currentCommunityMember||t;return t?(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-2 rounded-lg border border-gray-200 bg-gray-50 px-2.5 py-2","data-testid":"checkout-form-account-details",children:[(0,g.jsx)(le.s,{src:r.avatar_url,name:r.name,size:"10"}),(0,g.jsxs)("div",{className:"flex w-full flex-col justify-between",children:[(0,g.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,g.jsx)(y.Z.LabelSm,{weight:"medium","data-testid":"checkout-form-account-details-name",children:r.name}),(0,g.jsx)(y.Z.LabelXs,{weight:"medium",children:(0,g.jsx)("a",{className:"!text-dark cursor-pointer",href:"".concat((0,E.jE)(),"?redirect_back_url=").concat(window.location.href),children:(0,h.t)("logout")})})]}),(0,g.jsx)(y.Z.LabelXs,{weight:"medium",color:"text-default","data-testid":"checkout-form-account-details-email",children:r.email})]})]}):null},ue=r(52602),de=["className","error"];function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var he=(0,n.forwardRef)((function(e,t){var r=e.className,n=e.error,i=void 0!==n&&n,o=be(e,de);return(0,g.jsx)("input",fe(fe({className:b()(r,{"border-red-600 focus:border-red-600":i},"placeholder:text-light h-11 grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0 placeholder:opacity-100 focus:border focus:border-gray-500 focus:shadow-none focus:outline-0 focus:ring-0")},o),{},{ref:t}))}));function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}he.displayName="CheckoutFormInput";var _e=function(e){var t=e.autoFocus,r=void 0!==t&&t,n=e.className,i=e.name,o=e.placeholder,s=e.options,l=void 0===s?{}:s,c=e.type,u=(0,a.Gc)(),d=u.register,p=u.formState.errors,f=(0,a.U2)(p,i);return(0,g.jsxs)("div",{className:b()(n,"flex flex-col"),children:[(0,g.jsx)(he,ye({autoFocus:r,type:c,error:!!f,placeholder:o},d(i,l))),f&&(0,g.jsx)("div",{className:"mt-2",children:(0,g.jsx)(y.Z.LabelSm,{weight:"semibold",color:"text-red-600",children:(0,h.t)("paywall_checkout.form.errors.".concat(i,"_").concat(String(f.type)))})})]})},xe=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.loginUrl;return t?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(y.Z.BodyXs,{weight:"regular",children:[(0,h.t)("paywall_checkout.have_an_account"),(0,g.jsx)("a",{href:r,"data-testid":"checkout-form-sign-in-link",children:(0,h.t)("paywall_checkout.form.buttons.sign_in")})]}),(0,g.jsx)(_,{name:"email",children:(0,g.jsx)(_e,{type:"text",name:"email",options:{required:!0,pattern:ue.CU}})}),(0,g.jsx)(_,{name:"password",children:(0,g.jsx)(_e,{type:"password",name:"password",options:{required:!0,pattern:ue.zU}})})]})},je=function(){var e=ae().currentUser;return(0,g.jsxs)("div",{className:"flex flex-col gap-y-1 pt-6 md:pb-6 md:pt-12",children:[e?(0,g.jsx)(y.Z.LabelLg,{weight:"semibold",textAlign:"mb-4",children:(0,h.t)("paywall_checkout.your_account")}):(0,g.jsx)(y.Z.LabelLg,{weight:"semibold",children:(0,h.t)("paywall_checkout.create_your_account")}),(0,g.jsx)(se.g,{className:"gap-y-5 !py-0",children:e?(0,g.jsx)(ce,{}):(0,g.jsx)(xe,{})})]})},we=function(){var e=(0,p.Y)(),t=e.paywall,r=e.communityRootUrl,n=e.hasAlreadyPurchased,i=e.paymentError,o=e.paywallFailure,a="",s="";return(0,O.y9)(n,t)?(a="warning",s=(0,h.t)("services.paywalls.failures.paywall.already_purchased",{billing_url:"".concat(r).concat(E.G3.billing.slice(1))})):o?(a=o.level,s=o.message):i&&i.message&&(a=i.type,s=i.message),a&&s?(0,g.jsx)("div",{className:b()("rounded border px-6 py-5",{"border-red-500 bg-red-50 text-red-800":"danger"===a,"border-yellow-500 bg-yellow-50 text-yellow-800":"warning"===a}),dangerouslySetInnerHTML:{__html:s},"data-testid":"checkout-alert"}):null},Oe=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.isMemberAddressRequired,n=e.setMemberAddressAttributes;return!r&&t?null:r?(0,g.jsx)(i.AddressElement,{options:f.kl,onChange:n}):(0,g.jsx)(_,{name:"name",children:(0,g.jsx)(_e,{type:"text",name:"name",options:{required:!0}})})},Se=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)().clearCouponCode,r=e("coupon_code");return(0,g.jsxs)("div",{className:"flex w-fit flex-row items-center rounded-lg bg-gray-100 px-4 py-2","data-testid":"checkout-form-coupon-code",children:[(0,g.jsx)(y.Z.LabelSm,{weight:"medium",children:r}),(0,g.jsxs)(j.z,{small:!0,className:"p-0 text-gray-600",type:"button",variant:"plain",onClick:t,"data-testid":"checkout-form-remove-coupon",children:[(0,g.jsx)("span",{className:"sr-only",children:(0,h.t)("paywall_checkout.form.buttons.remove_coupon")}),(0,g.jsx)(x.JO,{type:"16-close",size:16})]})]})},Pe=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)().applyCouponCode,r=e("coupon_code");return(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,g.jsx)(_e,{className:"grow",type:"text",name:"coupon_code"}),r&&(0,g.jsx)(j.z,{large:!0,type:"button",variant:"secondary",onClick:function(){return t()},"data-testid":"checkout-form-apply-coupon",children:(0,g.jsx)(y.Z.LabelSm,{weight:"medium",children:(0,h.t)("paywall_checkout.form.buttons.apply_coupon")})})]})};function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne=function(){var e,t=(0,a.Gc)().watch,r=(0,p.Y)(),i=r.areCouponsEnabled,o=r.applyCouponCode,s=ke((0,n.useState)(!1),2),l=s[0],c=s[1],u=t().coupon_code_applied,d=(0,p.Y)().previewMutation;return(0,n.useEffect)((function(){var e=(0,E.Ph)("coupon_code");e&&!l&&d.isSuccess&&(c(!0),o(e))}),[o,l,d.isSuccess]),i?(e=u?(0,g.jsx)(Se,{}):(0,g.jsx)(Pe,{}),(0,g.jsx)(_,{name:"coupon_code",optional:!0,children:e})):null},Ie=r(32121);function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te="termsOfService",Le=function(e){var t=e.label,r=void 0===t?(0,h.t)("checkbox"):t,n=(0,a.Gc)().register;return(0,p.Y)().currentUser?null:(0,g.jsx)("div",{className:"flex",children:(0,g.jsxs)("div",{className:"inline-flex items-start gap-3",children:[(0,g.jsx)("input",Ee({type:"checkbox",id:"terms",className:"bg-primary text-circle hover:bg-tertiary disabled:border-selector-inactive disabled:bg-tertiary mt-[3px] h-4 w-4 cursor-pointer rounded border-gray-300"},n(Te,{required:!0}))),(0,g.jsxs)("label",{className:"text-dark mb-0 w-full cursor-pointer",htmlFor:Te,children:[(0,g.jsx)("span",{className:"sr-only",children:r}),(0,g.jsx)(Ie.y,{caller:"paywallCheckout"})]})]})})},Me=r(7404),Re=r(30848);function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=function(e){return{value:e.label,text:e.label}},Ze=Re.A0.reduce((function(e,t){return ze(ze({},e),{},Ve({},t.label,t))}),{}),Ge=function(){var e,t=(0,a.Gc)(),r=t.setValue,i=(0,t.watch)().community_member_billing_info_attributes.address_country,o=(0,p.Y)(),s=o.isMemberAddressRequired,l=o.isTaxIdMandatory,c=o.isBrazilianAccountAndProcessorStripeBr,u=Be((0,n.useState)(l&&c?(0,h.t)("tax_ids.brazil_cpf"):""),2),d=u[0],f=u[1],m=Ze[d],b={required:l},v=(0,n.useCallback)((function(e){var t=e.value;f(t)}),[f]);(0,n.useEffect)((function(){m&&(r("community_member_billing_info_attributes[tax_id_type]",m.enum),s||r("community_member_billing_info_attributes[address_country]",m.countryCode))}),[r,s,m]),(0,n.useEffect)((function(){s&&m&&m.countryCode!==i&&f("")}),[r,s,i,m]);var y=Re.A0.filter((function(e){return!l||!c||l&&c&&"BR"===e.countryCode})).filter((function(e){return!s||!i||e.countryCode===i})),x=Be((0,n.useState)(y.map(qe)),2),j=x[0],w=x[1],O=(0,n.useCallback)((function(e){var t=e.toLowerCase(),r=y.filter((function(e){return e.label.toLowerCase().includes(t)||e.country.toLowerCase().includes(t)})).map(qe);w(r)}),[y,w]);return(0,g.jsxs)(_,{name:"tax_id",optional:!l,children:[(0,g.jsx)(Me.P,{variant:"single",name:"taxIdTypeLabel",data:j,value:d,onChange:v,onSearch:O,hideSelectedItems:!0}),d&&(0,g.jsx)(_e,{className:"mt-2 grow",type:"text",name:"community_member_billing_info_attributes[tax_id_value]",placeholder:m.example,options:ze(ze({},null!==(e=null===m||void 0===m?void 0:m.formOptions)&&void 0!==e?e:{}),b)})]})},We=function(){var e=(0,(0,a.Gc)().watch)().community_member_billing_info_attributes.address_country,t=(0,p.Y)(),r=t.isMemberAddressRequired,n=t.isTaxIdCollectionEnabled,i=t.shouldShowTaxIdForm,o=t.enableTaxIdCollection;return!i||r&&!e?null:n?(0,g.jsx)(Ge,{}):(0,g.jsx)("div",{className:"flex flex-row items-center gap-x-1",children:(0,g.jsxs)(y.Z.LabelSm,{weight:"regular",children:[(0,h.t)("paywall_checkout.form.tax_id.message")," ",(0,g.jsx)("button",{type:"button",className:"cursor-pointer text-blue-600",onClick:o,children:(0,h.t)("paywall_checkout.form.tax_id.cta")})]})})},He=function(){var e=(0,(0,p.Y)().getSelectedPrice)(),t=null!==e&&void 0!==e&&e.trial_enabled?(0,h.t)(["paywall_checkout.get_started.trial_title",e.trial_requires_upfront_payment?"paid":"free"]):(0,h.t)("paywall_checkout.get_started.no_trial_title"),r=null!==e&&void 0!==e&&e.trial_enabled?(0,h.t)("paywall_checkout.get_started.trial_description"):(0,h.t)("paywall_checkout.get_started.no_trial_description");return(0,g.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,g.jsx)(y.Z.TitleMd,{children:t}),(0,g.jsx)(y.Z.LabelSm,{color:"text-secondary-500",children:r})]})},Qe=r(60591),Je=r(34470),Ke=r(1522),$e=function(){var e=(0,p.Y)(),t=e.previewMutation,r=e.hasAlreadyPurchased,n=e.paywall,i=t.data;return t.isLoading?(0,g.jsx)("div",{className:"py-2",children:(0,g.jsx)(w.a,{variant:"default"})}):(0,O.y9)(r,n)||t.isIdle||t.isError||!i?null:(0,g.jsxs)("div",{className:"flex flex-col md:pt-6",children:[(0,g.jsx)("div",{className:"mb-4 flex flex-row items-center",children:(0,g.jsx)("div",{className:"flex flex-row items-center",children:(0,g.jsx)(y.Z.LabelLg,{weight:"semibold",children:(0,h.t)("paywall_checkout.order_summary")})})}),(0,g.jsx)(Qe.f,{className:"!py-0 !pb-6",preview:i}),(0,g.jsx)(Je.N,{preview:i}),(0,g.jsx)(Ke.U,{preview:i})]})},Xe=r(50768),Ye=function(e){var t=e.children,r=e.value,n=e.className;return(0,g.jsx)(Xe.E.Option,{value:r,className:function(e){var t=e.checked;return b()("bg-primary hover:border-secondary relative flex cursor-pointer justify-center rounded-lg border py-3 transition-colors focus:outline-none",{"border-secondary bg-secondary border-1":t,"border-primary":!t},n)},children:(0,g.jsx)("span",{className:"flex flex-row items-center space-x-2",children:t})})},et=function(){var e,t=(0,a.Gc)(),r=t.control,i=t.setValue,o=(0,p.Y)(),s=o.getSelectedPrice,l=o.amountDue,c=s(),u=1===(null===c||void 0===c||null===(e=c.payable_payment_methods)||void 0===e?void 0:e.length),d=l<O.eq.MINIMUM||l>O.eq.MAXIMUM;return(0,n.useEffect)((function(){(u||d)&&i("payment_method_type",O.Lt.CARD)}),[u,l]),u||d?null:(0,g.jsx)(a.Qr,{control:r,name:"payment_method_type",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,g.jsx)(Xe.E,{value:n,onChange:r,children:(0,g.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,g.jsxs)(Ye,{value:O.Lt.CARD,className:"basis-1/2",children:[(0,g.jsx)(x.JO,{type:"credit-card",size:16}),(0,g.jsx)(y.Z.LabelMd,{children:(0,h.t)("paywall_checkout.payment_method_type.card")})]}),(0,g.jsxs)(Ye,{value:O.Lt.PIX,className:"basis-1/2",children:[(0,g.jsx)(x.JO,{type:"20-pix",viewBox:"0 0 24 24",size:24}),(0,g.jsx)(y.Z.LabelMd,{children:(0,h.t)("paywall_checkout.payment_method_type.pix")})]})]})})}})},tt=r(94281),rt=function(e){var t=e.handleOnChangeCard,r=e.handleOnReadyCard,n=(0,(0,p.Y)().getSelectedPrice)();return(0,g.jsx)(_,{name:"payment",addon:n.trial_enabled&&(0,g.jsx)("span",{className:"inline-flex",children:(0,g.jsx)(tt.T,{className:"inline-flex",content:v().t("paywall_checkout.payment_subtitle_tooltip"),children:(0,g.jsx)(x.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),children:(0,g.jsx)("div",{"data-testid":"checkout-form-card-field-wrapper",children:(0,g.jsx)(i.CardElement,{options:f.T4,onChange:t,onReady:r})})})},nt=function(){var e=(0,p.Y)(),t=e.paymentMethodsSupported,r=e.setPaymentMethodsSupported;return function(e){var n,i,o,a;"deferred_intent.payment_method_types"===e.error.param?r(t.filter((function(e){return"link"!==e}))):(n=e,a="Failed to Render PE",console.error(a,n),(0,C.d)(new Error(null!==(i=null===n||void 0===n||null===(o=n.error)||void 0===o?void 0:o.message)&&void 0!==i?i:a)))}};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){at(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var st=function(e){var t,r=e.handleOnChangeCard,n=e.handleOnReadyCard,o=(0,p.Y)().getSelectedPrice,a=function(){var e=(0,p.Y)(),t=e.memberBillingInfo,r=e.isMemberAddressRequired;return{fieldsOption:!(0,B.isEmpty)(t)||r?{fields:{billingDetails:{address:"never"}}}:{}}}(),s=a.fieldsOption,l={defaultValuesOption:(t=(0,p.Y)().currentUser)&&t.email?{defaultValues:{billingDetails:{email:t.email}}}:{}}.defaultValuesOption,c=o(),u=nt();return(0,g.jsx)(_,{name:"payment",childClassName:"!mb-4",LabelComponent:y.Z.LabelLg,addon:c.trial_enabled&&(0,g.jsx)("span",{className:"inline-flex",children:(0,g.jsx)(tt.T,{className:"inline-flex",content:v().t("paywall_checkout.payment_subtitle_tooltip"),children:(0,g.jsx)(x.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),children:(0,g.jsx)("div",{"data-testid":"checkout-form-payment-methods-field-wrapper",children:(0,g.jsx)(i.PaymentElement,{options:ot(ot(ot(ot({},l),s),{layout:{type:"accordion",radios:!1}}),{terms:{card:"never",googlePay:"never",applePay:"never"}}),onChange:r,onReady:n,onLoadError:u})})})},lt=function(e){var t=e.handleOnChangeCard,r=e.handleOnReadyCard,n=(0,p.Y)(),i=n.isCardInfoRequired,o=n.isPaywallDigitalWalletEnabled,s=(0,(0,a.Gc)().watch)("payment_method_type"),l=(0,O.F_)(s)&&i,c=o?st:rt;return(0,g.jsx)(g.Fragment,{children:l&&(0,g.jsx)(c,{handleOnChangeCard:t,handleOnReadyCard:r})})},ct=function(){var e=(0,a.Gc)().handleSubmit,t=(0,p.Y)().isProcessingPayment,r=ae(),n=r.handleOnChangeCard,i=r.handleOnReadyCard,o=r.onSubmit,s=r.payButtonLabel,l=r.stripe,c=r.isSubmitDisabled;return(0,g.jsxs)("div",{"data-testid":"checkout-form-container",children:[t&&(0,g.jsx)(w.a,{variant:"fullscreen"}),(0,g.jsxs)("form",{className:"flex flex-col",onSubmit:e(o),"data-testid":"checkout-form",children:[(0,g.jsx)(He,{}),(0,g.jsx)(je,{}),(0,g.jsxs)(se.g,{className:"gap-y-5",children:[(0,g.jsx)(et,{}),(0,g.jsx)(lt,{handleOnReadyCard:i,handleOnChangeCard:n}),(0,g.jsx)(Oe,{}),(0,g.jsx)(Ne,{}),(0,g.jsx)(We,{})]}),(0,g.jsx)($e,{}),(0,g.jsx)(we,{}),(0,g.jsxs)(se.g,{className:"gap-y-5",children:[(0,g.jsx)(Le,{}),(0,g.jsx)(j.z,{type:"submit",large:!0,variant:"primary",disabled:!l||c,"data-testid":"checkout-form-submit-button",children:s}),(0,g.jsxs)("div",{className:"flex flex-row items-center justify-center","data-testid":"checkout-form-secure-legend-container",children:[(0,g.jsx)(x.JO,{color:"text-secondary-50",size:16,type:"lock-solid"}),(0,g.jsx)(y.Z.LabelXs,{color:"text-secondary-50",children:(0,h.t)("paywall_checkout.payment_secure_legend")})]})]})]})]})},ut=function(){var e=(0,p.Y)().currentCommunity;return(0,g.jsxs)("div",{className:"community-info",children:[e.logo_url&&(0,g.jsx)("img",{loading:"lazy",className:"community-info__logo",src:e.logo_url,alt:""}),!e.logo_url&&e.icon_url&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"community-info__icon",children:(0,g.jsx)("img",{loading:"lazy",src:e.icon_url,alt:""})}),(0,g.jsx)("span",{className:"community-info__name",children:e.name})]}),!e.logo_url&&!e.icon_url&&(0,g.jsx)("span",{className:"community-info__name",children:e.name})]})},dt=r(51215),pt=function(e){var t=e.event,r=(0,u.TC)().isDarkAppearance;if(!t)return null;var n=t.cover_image_url,i=t.cover_image,o=t.cover_image_variants;if(!n||!i)return null;var a=(o||{}).thumbnail,s=r?(0,dt.aP)("dark-mode-cover-thumbnail-2x.png"):(0,dt.aP)("light-mode-cover-thumbnail-2x.png"),l=a||(n||s);return(0,g.jsx)("img",{loading:"lazy",alt:"",src:l,className:"border-primary relative h-full max-h-[112px] w-full max-w-[314px] rounded-lg border object-cover"})},ft=r(85327),mt=r(79627),bt=function(e){var t=e.event;if(null===t||void 0===t||!t.event_setting_attributes)return null;var r=t.event_setting_attributes,n=r.starts_at,i=r.ends_at,o=r.time_zone,a=r.time_zone_abbreviations,s=r.location_type,l=new Date(n),c=new Date(i),u=(0,mt.lo)(l,c,o),d=[{icon:"16-calendar",text:"".concat(u," (").concat(a,")")},{icon:s===ft.Bq.IN_PERSON||s===ft.Bq.TBD?"16-location":"16-video",text:ft.gP[s]}];return(0,g.jsx)("div",{className:"flex flex-col gap-y-2 pb-3",children:d.map((function(e){var t=e.icon,r=e.text;return(0,g.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,g.jsx)(x.JO,{type:t,size:16,className:"text-default !w-4"}),(0,g.jsx)(y.Z.LabelXs,{children:r})]},t)}))})},ht=function(e){var t=e.id,r=e.title,n=e.subtitle,i=e.value,o=e.isSelected,a=e.onSelect;return(0,g.jsxs)("button",{type:"button","aria-pressed":o,className:b()("border-primary bg-primary focus-visible:!outline-secondary flex min-h-[4rem] cursor-pointer flex-row items-center justify-between rounded-md border px-5 py-3 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"border-secondary bg-secondary":o}),"data-testid":"checkout-paywall-price-option",onClick:function(){return a(t)},children:[(0,g.jsxs)("div",{className:"flex flex-col justify-around gap-y-1 py-1 text-left",children:[(0,g.jsx)(y.Z.LabelMd,{weight:"medium",children:r}),n&&(0,g.jsx)(y.Z.LabelXs,{weight:"regular",children:n})]}),(0,g.jsx)("div",{className:"flex flex-col justify-center whitespace-nowrap",children:(0,g.jsx)(y.Z.LabelMd,{weight:"regular",children:i})})]})},vt=function(){var e,t,r,n,i=(0,p.Y)(),o=i.paywall,a=i.getSelectedPrice,s=i.setSelectedPrice,l=function(e){s(e)},c=a(),u=function(e){return c&&c.id==e.id};if(r=null!==(e=o.event)&&void 0!==e&&e.name?o.event.name:o.display_name,o.description)n=o.description;else if(null!==(t=o.event)&&void 0!==t&&t.body){var d;n=null===(d=o.event)||void 0===d?void 0:d.body}return(0,g.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,g.jsx)(pt,{event:o.event}),(0,g.jsxs)("div",{className:"flex flex-col gap-3","data-testid":"checkout-paywall-detail",children:[(0,g.jsx)(y.Z.TitleLg,{children:r}),(0,g.jsx)(bt,{event:o.event}),n&&(0,g.jsx)(y.Z.BodyMd,{children:(0,g.jsx)("span",{className:"whitespace-pre-wrap",children:n})})]}),(0,g.jsx)("div",{className:"flex flex-col gap-4",children:(o.prices||[]).map((function(e){return(0,g.jsx)(ht,{id:e.id,title:e.title,subtitle:e.subtitle,value:e.value,isSelected:u(e),onSelect:l},"paywall_price-".concat(e.id))}))})]})};function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _t=["card","link"];function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(e){var t,r,m,b,h=e.paywall,v=e.currentCommunity,y=e.currentCommunityMemberPaymentProcessorSessionClientSecret,_=e.currentUser,x=e.processorId,j=e.processorKey,w=e.isMemberAddressRequired,O=e.isPaywallDigitalWalletEnabled,S=e.paymentMethodsSupported,P=Ot((r=S,[(m=yt((0,n.useState)(r.filter((function(e){return _t.includes(e)}))),2))[0],m[1]]),2),k=P[0],C=P[1],N=(0,n.useMemo)((function(){return(0,c.O)({stripeAccountId:x,stripePublicKey:j,locale:window.locale})}),[j,x]),I=function(e){var t=e.prices,r=t[0],n=t.find((function(e){return e.preferred}));n&&(r=n);var i=(0,E.Ph)("price_id");if(i){var o=t.find((function(e){return e.id===parseInt(i,10)}));o&&(r=o)}return r}({prices:h.prices}),A=(0,a.cI)({defaultValues:{community_id:v.id,user_id:null===_||void 0===_?void 0:_.id,paywall_price_id:I.id,coupon_code_applied:!1,community_member_billing_info_attributes:{},community_member_billing_info_address_attributes_complete:!w,payment_method_type:"card"}}),D=new s.QueryClient(d.Vr);b=null!==h&&void 0!==h&&null!==(t=h.event)&&void 0!==t&&t.name?h.event.name:h.display_name,(0,l.H)("paywall-checkout");var T=function(e){var t=e.filteredPaymentMethodsSupported,r=e.isPaywallDigitalWalletEnabled,n=e.paywall,i=e.price;return r?{payment_method_types:t,mode:"subscription",setup_future_usage:"off_session",currency:n.currency_code,amount:i.amount}:{}}({filteredPaymentMethodsSupported:k,isPaywallDigitalWalletEnabled:O,paywall:h,price:I});return(0,g.jsx)(i.Elements,{stripe:N,options:jt(jt(jt({},f.jP),T),{},{customerSessionClientSecret:y}),children:(0,g.jsx)(u.hk,{theme:u.v.default,children:(0,g.jsx)(s.QueryClientProvider,{client:D,children:(0,g.jsx)(a.RV,jt(jt({},A),{},{children:(0,g.jsxs)(p.G,jt(jt({},e),{},{paymentMethodsSupported:k,setPaymentMethodsSupported:C,isPaywallDigitalWalletEnabled:O,children:[(0,g.jsx)(o.q,{children:(0,g.jsx)("title",{children:b})}),(0,g.jsx)("div",{className:"paywall-checkout-wrapper",children:(0,g.jsxs)("div",{className:"paywall-checkout-container",children:[(0,g.jsx)("div",{className:"paywall-info",children:(0,g.jsxs)("div",{className:"paywall-info__content",children:[(0,g.jsx)(ut,{}),(0,g.jsx)(vt,{})]})}),(0,g.jsx)("div",{className:"user-info",children:(0,g.jsx)("div",{className:"paywall-info__content",children:(0,g.jsx)(ct,{})})})]})})]}))}))})})},k.join(","))}},15763:(e,t,r)=>{"use strict";r.d(t,{X:()=>B,j:()=>U});var n=r(64687),i=r.n(n),o=r(86664),a=r(86013),s=r.n(a),l=r(11049),c=r(50743),u=r(82177),d=r(93585),p=r(13288),f=r(81786),m=r(67294),b=r(88767),h=r(39320),v=r(69647),y=r(96486),g={address_line1:"",address_line2:"",address_city:"",address_state:"",address_postal_code:"",address_country:""},_=(0,m.createContext)({communityMember:{id:0,name:"",email:""},billingInfo:g,onSuccess:y.noop,asPrerequisite:!1});_.displayName="BillingInfoContext";function x(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(){var e=(0,v.p)(),t=e.success,r=e.error,n=(0,m.useContext)(_),o=n.communityMember,a=n.billingInfo,l=n.onSuccess,c=n.asPrerequisite,u=j((0,m.useState)(!1),2),d=u[0],p=u[1],f=j((0,m.useState)({address_line1:null===a||void 0===a?void 0:a.address_line1,address_line2:null===a||void 0===a?void 0:a.address_line2,address_city:null===a||void 0===a?void 0:a.address_city,address_state:null===a||void 0===a?void 0:a.address_state,address_postal_code:null===a||void 0===a?void 0:a.address_postal_code,address_country:null===a||void 0===a?void 0:a.address_country}),2),y=f[0],g=f[1],w=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.id){e.next=2;break}return e.abrupt("return",h.O.update(o.id,y));case 2:return e.abrupt("return",h.O.create(o.id,y));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),O=(0,b.useMutation)(w,{onSuccess:function(){t(s().t("paywalls.community_members.billing_info_form.success")),l()},onError:function(e){console.error(e),r(e.message)}}),S=O.isLoading;return{communityMember:o,asPrerequisite:c,billingInfo:a,isBillingInfoComplete:d,onStripeElementAddressChangeEvent:function(e){var t=e.value,r=e.complete,n=t.address;g({address_line1:n.line1,address_line2:n.line2,address_city:n.city,address_state:n.state,address_postal_code:n.postal_code,address_country:n.country}),p(r)},onSaveBillingInfoClick:function(){O.mutate()},isUpdatingBillingInfo:S}},S=r(85893);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){var e=O(),t=e.communityMember,r=e.asPrerequisite,n=e.billingInfo,i=e.onStripeElementAddressChangeEvent,a=e.isBillingInfoComplete,l=e.onSaveBillingInfoClick,c=e.isUpdatingBillingInfo;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.u_.Body,{children:(0,S.jsx)(o.AddressElement,{className:"mt-3",options:k(k({},d.kl),{},{defaultValues:{name:(null===t||void 0===t?void 0:t.name)||"",address:{line1:n.address_line1,line2:n.address_line2,city:n.address_city,state:n.address_state,postal_code:n.address_postal_code,country:n.address_country}}}),onChange:i})}),(0,S.jsx)(u.u_.Footer,{children:(0,S.jsx)(f.z,{full:!0,large:!0,variant:"primary",disabled:!a||c,onClick:l,children:s().t("paywalls.community_members.billing_info_form.submit".concat(r?"_as_prerequisite":""))})})]})},I=r(33764),A=function(e){var t=e.communityMember,r=e.onSuccess,n=e.asPrerequisite,i=(0,I.r)(t),o=i.isLoadingBillingInfo,a=i.billingInfo;return o?(0,S.jsx)(p.a,{variant:"default"}):(0,S.jsx)(_.Provider,{value:{communityMember:t,billingInfo:a||g,onSuccess:r,asPrerequisite:n},children:(0,S.jsx)(N,{})})};function E(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){var t=e.communityMember,r=e.onSuccess,n=e.asPrerequisite,i=e.localeRoot,s=void 0===i?"paywalls.community_members.billing_info_form":i,p=(0,l.dd)(),f=function(){p.hide(),p.remove()},m=(0,c.C)().stripePromise;return(0,S.jsxs)(u.u_,{title:(0,a.t)([s,"title"]),isOpen:p.visible,onClose:f,children:[(0,S.jsx)(u.u_.Overlay,{}),(0,S.jsxs)(u.u_.Content,{size:"md",children:[(0,S.jsxs)(u.u_.Header,{children:[(0,S.jsx)(u.u_.Title,{children:(0,a.t)([s,"title"])}),(0,S.jsx)(u.u_.HeaderActions,{children:(0,S.jsx)(u.u_.CloseButton,{onClick:f})})]}),(0,S.jsx)(o.Elements,{stripe:m,options:d.jP,children:(0,S.jsx)(A,{communityMember:t,onSuccess:function(){r(),p.hide(),p.remove()},asPrerequisite:n})})]})]})},R=l.gk.create((function(e){return(0,S.jsx)(M,T({},e))})),B=function(){return(0,l.dd)(R)},U=function(e,t){var r=(0,l.dd)(e),n=B();return T(T({},r),{},{show:function(e){var o,a,s,l=t(e);return null!==l&&void 0!==l&&null!==(o=l.policies)&&void 0!==o&&o.requires_billing_info?n.show({communityMember:l,onSuccess:(a=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.show(e);case 2:case"end":return t.stop()}}),t)})),s=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){E(i,r,n,o,s,"next",e)}function s(e){E(i,r,n,o,s,"throw",e)}o(void 0)}))},function(){return s.apply(this,arguments)}),asPrerequisite:!0}):r.show(e)}})}},33764:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var n=r(88767),i=r(39320),o=r(50732),a=function(e){var t=(0,n.useQuery)(o.av.paywalls.communityMembers.billingInfo.show(e.id),(function(){return i.O.show(e.id)}),{retry:function(e,t){return 404!==t.status},useErrorBoundary:function(e){return 404!==(null===e||void 0===e?void 0:e.status)}});return{isLoadingBillingInfo:t.isLoading,billingInfo:t.data,refetchBillingInfo:t.refetch}}},93585:(e,t,r)=>{"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{jP:()=>o,kl:()=>a,T4:()=>s});var o={appearance:{theme:"stripe",variables:{spacingGridRow:"20px"},rules:(n={},i(n,".Label",{color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"14px",fontWeight:"600",lineHeight:"20px",margin:"0",padding:"0"}),i(n,".Input",{backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(229, 231, 235)",borderColor:"rgb(229, 231, 235)",borderRadius:"8px",borderStyle:"solid",borderWidth:"1px",boxShadow:"none",color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"16px",fontWeight:"400",lineHeight:"18px",margin:"0",marginTop:"4px",outline:"transparent solid 0px",outlineOffset:"0",padding:"12px 16px",transition:"none"}),i(n,".Input:focus",{border:"1px solid rgba(107, 114, 128)",borderColor:"rgba(107, 114, 128)",borderWidth:"1px",boxShadow:"none",outline:"transparent solid 0px",outlineOffset:"0",transition:"none"}),i(n,".TermsText",{fontSize:"0"}),n)}},a={mode:"billing",fields:{phone:"never"},display:{name:"full"}},s={hidePostalCode:!0,classes:{base:"h-11 w-full grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0",focus:"border border-gray-500 shadow-none outline-0 ring-0"}}},22568:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(58533),l=r(81649),c=r(43227),u=r(99412),d=r(85893);function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=m((0,o.useState)(e.posts||[]),2),r=t[0],n=t[1],b=m((0,o.useState)(!1),2),h=b[0],v=b[1],y=m((0,o.useState)(1),2),g=y[0],_=y[1],x=e.space,j=e.current_user,w=function(){var t,o=(t=i().mark((function t(){var o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(l.a.posts.index({spaceId:x.id,params:{page:g,sort:e.sort,iframe:!0}}));case 2:if(!(o=t.sent).ok){t.next=11;break}return t.next=6,o.json();case 6:s=t.sent,n((0,a.uniqBy)([].concat(p(r),p(s.records)),"id")),v(s.has_next_page),_(s.page+1),window.loadOembed();case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,o.useEffect)((function(){w()}),[]),(0,d.jsx)(s.Z,{style:{overflow:"initial"},scrollThreshold:.75,next:w,hasMore:h,loader:(0,d.jsx)(c.m,{}),dataLength:r.length,children:r.map((function(e){return(0,d.jsx)(u.d,{post:e,space:x,current_user:j},e.id)}))})}},99412:(e,t,r)=>{"use strict";r.d(t,{d:()=>b});var n=r(67294),i=r(94184),o=r.n(i),a=r(66007),s=r(86013),l=r(50732),c=r(5479),u=r(89826),d=r(18605),p=r(85893);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t=e.space,r=e.post,i=e.current_user,m=e.show_comments_on_load,b=void 0!==m&&m,h=e.is_shared_post,v=void 0!==h&&h,y=i,g=(0,n.useRef)(null),_=f((0,n.useState)(b&&!v),2),x=_[0],j=_[1],w=f((0,n.useState)(!b),2),O=w[0],S=w[1],P=(0,u.Ro)(),k=f((0,n.useState)(P&&r.comments_count>10),2),C=k[0],N=k[1];(0,n.useEffect)((function(){if(g.current){var e=function(e){var n=g.current.querySelector('[data-action="toggle-comment-with-focus"]'),i=g.current.querySelector('[data-action="toggle-comment"]');if(n&&i){var o=n.contains(e.target);if(o||i.contains(e.target)){if(e.preventDefault(),v){var a=(0,l.LM)({slug:r.slug,spaceSlug:t.slug,params:{notice:(0,s.t)("comments.log_in_to_add_a_comment")}});return void(window.location.href=a)}j(!x),S(!!o)}}};return g.current.addEventListener("click",e),function(){g.current.removeEventListener("click",e)}}}),[g,j,x]);var I=o()("post post--parent",{"post--shared":v,"post--shared__truncated":v&&!y,"is-truncation-disabled":r.is_truncation_disabled,"is-pinned":r.pinned_at_top_of_space,"flagged-for-approval":r.flagged_for_approval_at,"post-name--empty":!r.name,"post-meta--hidden":r.hide_meta_info}),A=!y&&(null===r||void 0===r?void 0:r.is_comments_enabled)||v&&(null===r||void 0===r?void 0:r.show_post_teaser);return(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)("div",{ref:g,children:(0,p.jsx)(a.Z,{html:r.html})}),Boolean(!!x&&!v)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"post__comments trix-v2","data-controller":"comments",id:"all_comments","data-post-id":r.id,children:[Boolean(A&&(null===r||void 0===r?void 0:r.comments_count)>5)&&(0,p.jsx)(a.Z,{html:r.gated_html}),Boolean(C)&&(0,p.jsxs)(p.Fragment,{children:[Boolean((null===r||void 0===r?void 0:r.comments_count)>1)&&(0,p.jsx)("div",{className:"show-all-comments__wrapper",children:(0,p.jsxs)("a",{className:"show-all-comments__link btn btn-secondary",href:"#all_comments",onClick:function(e){e.preventDefault(),N(!1),window.location.hash="#all_comments"},children:[(0,p.jsx)(d.JO,{type:"arrow-solid-top-left"}),(0,s.t)("post.comments_section.show_all_count_comments",{count:r.comments_count})]})}),(0,p.jsx)(c.ZP.CommentHierarchy,{id:P,post:r,space:t,communityMember:y,showReplyForm:!0,autofocusReplyForm:O})]}),Boolean(!C)&&(0,p.jsx)(c.ZP.CommentsList,{post:r,space:t,communityMember:y,showReplyForm:!0,autofocusReplyForm:O})]}),Boolean(A&&(null===r||void 0===r?void 0:r.comments_count)<=5)&&(0,p.jsx)(a.Z,{html:r.gated_html})]})]})}},54503:(e,t,r)=>{"use strict";r.d(t,{P:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["children","className","displayView"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.children,r=e.className,n=e.displayView,s=u(e,a);return(0,o.jsx)("div",l(l({className:i()("space__posts !pb-16 lg:!pb-6",c({},"space__posts--".concat(n),n),r),"data-testid":"post_section"},s),{},{children:t}))}},89940:(e,t,r)=>{"use strict";r.d(t,{v:()=>_});var n=r(67294),i=r(94184),o=r.n(i),a=r(24185),s=r(90789),l=r(50732),c=r(97782),u=r(31979),d=r(66866),p=r(98338),f=r(18701),m=r(1881),b=r(70254);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(){var e,t,r=(0,a.UO)(),i=r.postSlug,v=r.spaceSlug,g=(0,p.wh)(),_=g.currentCommunitySettings,x=g.isLoading,j=(0,p.nT)(),w=(0,a.k6)(),O=(0,d.L)().show,S=(_||{}).quick_post_v2_enabled,P=j.helpers.findBy({slug:v})||{},k=(0,c.t)({spaceId:P.id,spaceSlug:v,postSlug:i}),C=(0,u.D)(),N=(0,f.I)(),I=Boolean(null===P||void 0===P?void 0:P.hide_right_sidebar)&&!(0,s.V5)(P),A=y((0,m.k)(!1),2),E=A[0],D=A[1];(0,n.useEffect)((function(){document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})}),[null===k||void 0===k||null===(e=k.post)||void 0===e?void 0:e.id]);var T=o()("view-space view-space--".concat(null===(t=k.data)||void 0===t?void 0:t.space_id," view-space-in-group view-space-in-group--").concat(P.space_group_id)),L=C||k.isLoading||!k.data;!function(e){var t=e.enabled,r=e.key,i=e.onLoadInEditMode,o=(0,b.t)().edit,a=h((0,n.useState)(!1),2),s=a[0],l=a[1];(0,n.useEffect)((function(){l(!1)}),[r]),(0,n.useEffect)((function(){t&&!s&&"true"===o&&(i(),l(!0))}),[t,s,o,i])}({enabled:!x&&!L,key:"".concat(v).concat(i),onLoadInEditMode:function(){S?O({post:k.data,onPostChange:k.onPostChange}):D()}});var M=k.data?[[k.data.id]]:[];return{isLoading:L,isLoadingAppData:C,isIframeEmbed:N,isQuickPostV2Enabled:S,space:P,postResource:k,bodyClassNames:T,hasRightSidebar:I,shouldShowEditPostModal:E,setShouldShowEditPostModal:D,perPagePostIds:M,onPostDestroy:function(){w.push(l.RZ.show({spaceSlug:v}))},spacesContext:j,spaceSlug:v,postSlug:i}}},93572:(e,t,r)=>{"use strict";r.d(t,{h:()=>x});var n=r(67294),i=r(76001),o=r(74666),a=r(93144),s=r(98338),l=r(23560),c=r.n(l),u=r(36589),d=r(81786),p=r(18605),f=r(85893),m=function(e){var t=e.children,r=e.className,n=e.hasIcon,i=void 0!==n&&n,o=e.id,a=e.isButton,s=void 0!==a&&a,l=e.linkName,m=e.render,b=e.showModal,h=(0,u.I)().isV3Enabled;return c()(m)?(0,f.jsx)(f.Fragment,{children:m({onClick:b})}):s?(0,f.jsxs)(d.z,{type:"button",className:r,id:o,onClick:b,"aria-haspopup":!0,large:h,isFullRounded:h,children:[i&&(0,f.jsx)(p.JO,{type:"plus"}),l||t]}):(0,f.jsx)("a",{className:r,id:o,onClick:b,href:"#new-post","aria-haspopup":!0,children:l||t})},b=r(65631);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t,r=e.bodyForEditor,l=void 0===r?"":r,c=e.children,u=e.className,d=e.currentSpaceId,p=e.hasIcon,h=void 0!==p&&p,y=e.id,_=e.isButton,x=void 0===_||_,j=e.linkName,w=e.maxZIndexEnabled,O=void 0!==w&&w,S=e.onSubmitSuccess,P=e.render,k=e.tiptapBodyForEditor,C=e.title,N=void 0===C?"":C,I=(0,s.wh)(),A=I.currentCommunitySettings,E=I.isViewOnlyMasquerading,D=null===A||void 0===A?void 0:A.quick_post_v2_enabled,T=(0,i.r)(),L=g((0,n.useState)(!1),2),M=L[0],R=L[1],B=(0,s.L2)(),U=d||(null===B||void 0===B||null===(t=B.data)||void 0===t?void 0:t.id),F=(0,a.d)({cacheKey:o._7}).getPersistedFormFieldValues,z=g((0,n.useState)({space_id:U}),2),V=z[0],q=z[1];return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(m,{className:u,hasIcon:h,id:y,isButton:x,linkName:j,render:P,showModal:function(e){if(!E){e.preventDefault();var t=F();q(v(v({},t),{},{name:N||(null===t||void 0===t?void 0:t.name),body_for_editor:l||(null===t||void 0===t?void 0:t.body),space_id:U||(null===t||void 0===t?void 0:t.space_id)})),D?T.show({spaceId:U,onSubmitSuccess:S,bodyForEditor:l,tiptapBodyForEditor:k}):R(!0)}},children:c}),M&&(0,f.jsx)(s.DW,{post:V,onPostChange:q,children:(0,f.jsx)(b.Y,{show:!0,closeModal:function(){R(!1),q({})},currentSpaceId:U,maxZIndexEnabled:O,onSubmitSuccess:S})})]},U)}},84933:(e,t,r)=>{"use strict";r.d(t,{R:()=>_});var n=r(67294),i=r(86013),o=r(88767),a=r(14856),s=r(98338),l=r(97782),c=r(13288),u=r(85893),d=["currentSpaceId","postSlug","children","loaderVariant"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h(e){var t=e.currentSpaceId,r=e.postSlug,n=e.children,i=e.loaderVariant,o=void 0===i?"fullscreen":i,a=b(e,d),p=(0,l.t)({spaceId:t,postSlug:r}),m=p.post;return p.isLoading?(0,u.jsx)(c.a,{variant:o}):(0,u.jsx)(s.DW,f(f({post:m},a),{},{children:n}))}var v=r(65631);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=e.currentSpaceId,r=e.postSlug,l=y((0,n.useState)(!1),2),c=l[0],d=l[1],p=y((0,n.useState)(!1),2)[1];var f=function(){d(!1)},m=new o.QueryClient(a.Vr);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),p(!0),d(!0)},children:[(0,u.jsx)("h4",{children:(0,i.t)("edit_post")}),(0,u.jsx)("div",{className:"dropdown-menu__descriptor",children:(0,i.t)("edit_post_description")})]}),(0,u.jsx)(o.QueryClientProvider,{client:m,children:(0,u.jsx)(s.HB,{children:c&&(0,u.jsx)(h,{currentSpaceId:t,postSlug:r,closeModal:f,onPostChange:function(){f(),window.location.reload()},children:(0,u.jsx)(v.Y,{show:!0,closeModal:f,currentSpaceId:t})})})})]})}},76001:(e,t,r)=>{"use strict";r.d(t,{r:()=>S});var n=r(86013),i=r(96486),o=r(11049),a=r(46037),s=r(74666),l=r(98338),c=r(93144),u=r(85893),d=function(e){var t,r,n=e.spaceId,i=e.bodyForEditor,o=e.tiptapBodyForEditor,d=e.shouldSkipRedirectAfterSubmit,p=e.onSubmitSuccess,f=(0,l.L2)(),m=n||("undefined"!==typeof(null===(t=f)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.id)?f.data.id:void 0),b=(0,(0,c.d)({cacheKey:s._7}).getPersistedFormFieldValues)(),h={id:null,space_id:m||(null===b||void 0===b?void 0:b.space_id),name:null===b||void 0===b?void 0:b.name,body_for_editor:i||(null===b||void 0===b?void 0:b.body),tiptap_body:o||(null===b||void 0===b?void 0:b.tiptap_body),cover_image:null===b||void 0===b?void 0:b.cover_image};return(0,u.jsx)(l.DW,{post:h,children:(0,u.jsx)(a.H,{shouldSkipRedirectAfterSubmit:d,onSubmitSuccess:p})})},p=r(51837),f=r(32611),m=r(26813),b=r(82177),h=r(84710),v=r(93788),y=r(48077),g=r(98843),_=r(69289);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){var t=e.spaceId,r=e.shouldSkipRedirectAfterSubmit,a=e.onSubmitSuccess,s=e.bodyForEditor,l=e.tiptapBodyForEditor,c=(0,o.dd)(),x=(0,p.L)().isDirty,j=(0,m.c)({shouldPrevent:x}),w=(0,g.Z)(),O=(0,_.d)(),S=(0,y.d)(),P=w.visible||O.visible||S.visible;return(0,f.u)({disabled:P,onClose:j}),(0,u.jsxs)(b.u_,{isOpen:c.visible,onClose:i.noop,className:"quick-post-v2-modal w-full max-w-3xl","aria-label":(0,n.t)("quick_post_v2.title"),children:[(0,u.jsx)(b.u_.Overlay,{onClick:j}),(0,u.jsx)(v.H,{children:(0,u.jsx)(h._x,{children:(0,u.jsx)(d,{spaceId:t,bodyForEditor:s,tiptapBodyForEditor:l,shouldSkipRedirectAfterSubmit:r,onSubmitSuccess:a})})})]})},O=o.gk.create((function(e){return(0,u.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),S=function(){return(0,o.dd)(O)}},69976:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(67294),i=r(69647),o=function(e){var t=e.alert,r=e.notice,o=(0,i.p)(),a=o.success,s=o.error;return(0,n.useEffect)((function(){t&&s(t),r&&a(r)}),[]),null}},14360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(77852),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(0,n.forwardRef)((function(e,t){return(0,o.jsx)("div",{children:(0,o.jsx)(i.y,s(s({},e),{},{ref:t}))})}));c.displayName="RichTextInput";const u=c},22769:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var n=r(86013),i=r(90697),o=r(8246),a=r(85893),s=function(){return(0,a.jsx)(i.b,{className:"lg:-mt-16",leftContent:(0,a.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,a.jsx)("a",{className:"text-dark",href:"/",children:(0,n.t)("settings.analytics.title")})})})}},21756:(e,t,r)=>{"use strict";r.d(t,{Y:()=>p});var n=r(67294),i=r(96486),o=r(88767),a=r(98338),s=r(81089),l=r(39068),c=r(30427),u=r(50732),d=r(85893);function p(){var e=(0,a.wh)().currentCommunityMember,t=(0,l.vb)(e),r=(0,o.useInfiniteQuery)(["member-tags"],(function(e){var t=e.pageParam,r=void 0===t?1:t;return(0,s.UT)(u.av.memberTags.index({params:{page:r}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),p=r.data,f=r.fetchNextPage,m=r.hasNextPage,b=r.isLoading;return(0,n.useEffect)((function(){m&&f()}),[p]),{isLoading:b,memberTags:(0,n.useMemo)((function(){var e=(0,i.flatten)(null===p||void 0===p?void 0:p.pages.map((function(e){return e.records}))),r=function(e){return{label:e.name,richLabel:(0,d.jsxs)("span",{className:"flex gap-1.5",children:[e.custom_emoji_url?(0,d.jsx)("img",{loading:"lazy",className:"mt-[3px] block h-4",src:e.custom_emoji_url,alt:e.name}):(0,d.jsx)("span",{children:e.emoji}),(0,d.jsx)("span",{children:e.name})]}),value:e.id.toString()}};return t?e.map(r):(0,c.U)({memberTags:e}).map(r)}),[p,t])}}},56058:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)(),t=e.currentCommunity;return!(e.isLoading||null===t||void 0===t||!t.analytics_filters_feature_flag_enabled)}},30636:(e,t,r)=>{"use strict";r.d(t,{OH:()=>p,q_:()=>f,X5:()=>m,vQ:()=>b});var n=r(86013),i=r(88767),o=r(81089),a=r(50732),s=r(69647);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=["internal_api","community_bot","agents"],p=function(e){var t=e.currentPage;return(0,i.useQuery)({queryKey:d,queryFn:function(){return(0,o.UT)(a.av.communityBot.agents.index({params:{page:t,per_page:10}}))}})},f=function(e){var t=e.id;return(0,i.useQuery)({queryKey:[].concat(d,[t]),queryFn:function(){return(0,o.UT)(a.av.communityBot.agents.show({id:t}))}})},m=function(){var e=(0,i.useQueryClient)(),t=(0,s.p)(),r=t.success,l=t.error;return(0,i.useMutation)((function(){return(0,o.Cu)(a.av.communityBot.agents.create())}),{onSuccess:function(){e.invalidateQueries([].concat(d)),r((0,n.t)("changes_saved"))},onError:function(){l((0,n.t)("request_failure_message"))}})},b=function(e){var t=e.id,r=(0,i.useQueryClient)(),l=(0,s.p)(),u=l.success,p=l.error;return(0,i.useMutation)((function(e){return(0,o.aU)(a.av.communityBot.agents.update({id:t}),{community_bot_profile:c({},e)})}),{onSuccess:function(e){r.invalidateQueries([].concat(d,[e.id])),u((0,n.t)("changes_saved"))},onError:function(){p((0,n.t)("request_failure_message"))}})}},20781:(e,t,r)=>{"use strict";r.d(t,{o:()=>ye});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(24185),l=r(88767),c=r(81089),u=r(81649),d=function(e){return e.inbox.messages},p=r(59887),f=r(35102),m=r(13288),b=r(50732),h=r(56179);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e){var t=e.id,r=e.params,n=void 0===r?{per_page:20}:r,i=(0,f.Dk)(),d=i.setMessages,p=i.appendMessage,m=i.setScrollAction,v=i.setCurrentChatId,g=(0,s.TH)().pathname,_=(0,s.k6)(),x=g.startsWith("/messages/new");(0,o.useEffect)((function(){v(t)}),[t,v]);var j=(0,l.useInfiniteQuery)(["community-inbox","chat-room","messages",t],(function(e){var r,i=e.pageParam;return r=void 0===i?1:i,(0,c.UT)(u.a.communityInbox.fetchMessages({id:t,params:y({page:r},n)}))}),{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,a.flatten)(r.map((function(e){return e.records}))),pageParams:r.map((function(e){return e.page})),pagesList:r}},enabled:!!t,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){d(e.pages)}}),w=j.isLoading,O=j.fetchNextPage,S=j.hasNextPage,P=j.isFetching;return{isMessagesLoading:w,createMessage:(0,l.useMutation)((function(e){return(0,c.Cu)(u.a.communityInbox.createMessage({id:t}),y({},e))}),{onSuccess:function(e){m(h.aO.NEW_MESSAGE),p(e),x&&_.push((0,b.Gr)({id:String(t)}))},onError:function(e){console.error("Error while creating message",e)}}).mutateAsync,hasNextPage:S,fetchNextPage:O,isFetching:P}},x=r(94184),j=r.n(x),w=r(33437),O=r(52463),S=r(88884),P=r(86013),k=r(67687),C=r(66422),N=r(94281),I=r(20434),A=r(85893),E=function(e){var t=e.isSubmitting,r=e.isUploading,n=e.editorHasNoContent,i=e.handleSubmit;return(0,A.jsx)(N.T,{placement:"top",interactive:!1,content:(0,P.t)("community_inbox.send_message"),children:(0,A.jsx)(I.o,{type:"submit",onClick:i,disabled:t||n()||r,id:"tiptap-send","aria-label":(0,P.t)("community_inbox.send_message"),icon:t||r?"loader":"20-send",isLight:!n(),shouldAnimateSpin:r||t})})},D={body:{type:"doc",content:[]}},T=function(e){var t=e.onSubmit;return(0,A.jsx)(k.l,{onSubmit:t,defaultValues:D,children:function(){return(0,A.jsx)(C.T,{menuBarComponent:E,placeholder:(0,P.t)("community_inbox.message_bot"),className:"!mb-2 !flex-row justify-between",onSubmit:function(e){t({body:e})}})}})},L=r(18605),M=r(64422),R=r(67142),B=r(69870),U=function(e){var t=e.name;return(0,A.jsx)(R.sJ,{isFullRounded:!0,name:t,size:"9",src:B})},F=function(e){var t=e.message,r=t.author_type,n=t.community_bot_profile,i=t.community_member,o=t.is_processing,a="community_member"===r,s=a?(null===i||void 0===i?void 0:i.name)||"":(null===n||void 0===n?void 0:n.name)||"",l=a?(null===i||void 0===i?void 0:i.avatar_url)||"":(null===n||void 0===n?void 0:n.avatar_url)||"",c=!a&&!(null!==n&&void 0!==n&&n.avatar_url);return o?(0,A.jsx)(U,{name:s}):c?(0,A.jsx)(L.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px]"}):(0,A.jsx)(M.s,{src:l,name:s,size:"9",isFullRounded:!0})},z=r(8246),V=r(1881),q=r(81786);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=function(e){var t=e.sources,r=Z((0,V.k)(!1),2),n=r[0],i=r[1],o=t.length;if(!n){var a=1===o?(0,P.t)("community_inbox.messages.sources.count_singular"):(0,P.t)("community_inbox.messages.sources.count_plural",{count:o});return(0,A.jsx)(q.z,{variant:"secondary-light",type:"button",onClick:i,small:!0,children:(0,A.jsxs)("span",{className:"flex items-center gap-2",children:[(0,A.jsx)(L.JO,{type:"16-ai-sources",size:16}),a]})})}return(0,A.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,A.jsx)("div",{className:"flex flex-col gap-2",children:t.map((function(e){return(0,A.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-sm font-normal text-[#52525B] underline hover:text-[#52525B]",children:e.title||e.url},"source-".concat(e.url))}))}),(0,A.jsx)(q.z,{variant:"secondary-light",type:"button",onClick:i,small:!0,children:(0,A.jsxs)("span",{className:"flex items-center gap-2",children:[(0,A.jsx)(L.JO,{type:"16-ai-sources",size:16}),(0,P.t)("community_inbox.messages.sources.hide")]})})]})},H=function(e){var t=e.authorName,r=e.timestamp,n=e.body,i=e.sources,o=(0,S.H)(r).time;return(0,A.jsxs)("div",{className:"min-w-0 grow",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,A.jsx)(z.Z.LabelSm,{weight:"semibold",color:"text-darkest",truncate:!0,children:t}),(0,A.jsx)("div",{className:"min-w-fit",children:(0,A.jsx)(z.Z.LabelSm,{weight:"medium",color:"text-lightest",children:o})})]}),(0,A.jsx)("div",{className:"text-dark whitespace-pre-line text-sm font-normal",children:(0,A.jsx)(C.T,{editable:!1,rich_text_body:n})}),i&&(0,A.jsx)("div",{className:"mt-4",children:(0,A.jsx)(W,{sources:i})})]})},Q=function(){var e=(0,f.Dk)().currentBotProfile;return(0,A.jsxs)("div",{className:"mb-5",children:[(0,A.jsx)(L.JO,{type:"48-ai-bot",size:48,className:"mb-2 !h-[3rem] !w-[3rem]"}),(0,A.jsx)(z.Z.TitleSm,{as:"h2",weight:"semibold",children:(0,P.t)("messaging.start_conversation")}),(0,A.jsx)(z.Z.BodySm,{color:"text-default",children:(0,P.t)("messaging.bot_start_conversation",{name:null===e||void 0===e?void 0:e.name})})]})},J=function(){var e=(0,f.Dk)().currentBotProfile;if(!e)return null;var t=e.name,r=e.bio;return(0,A.jsxs)("div",{className:"mb-5",children:[(0,A.jsx)(L.JO,{type:"48-ai-bot",size:48,className:"mb-2 !h-[3rem] !w-[3rem]"}),(0,A.jsx)(z.Z.TitleSm,{as:"h2",weight:"semibold",children:t}),r&&(0,A.jsx)("div",{className:"text-dark whitespace-pre-line text-sm font-normal",children:(0,A.jsx)(C.T,{editable:!1,rich_text_body:r})})]})},K=function(e){var t=e.messages,r=e.createMessage,n=e.isDms,i=e.fetchNextPage,s=e.hasNextPage,l=e.isLoading,c=e.isNewConversation,u=e.isPreviewMode,d=(0,o.useRef)(null),p=u&&!(null!==t&&void 0!==t&&t.length);return(0,A.jsxs)("div",{className:j()("bg-primary flex w-full flex-col justify-between",c||u?"h-full":"h-[calc(100dvh-64px)] lg:h-[calc(100%-64px)]"),children:[s&&(0,A.jsx)(O.Z,{componentId:h.Or,fetchNewPage:i,onEvent:"scrollUp",messageId:null,isLoading:l}),(0,A.jsx)("div",{id:h.Or,className:"overflow-auto",children:t.map((function(e){var t=e.created_at,r=e.updated_at,n=e.id,i=e.body,o=e.author_type,s=e.community_bot_profile,l=e.community_member,c=e.sources,p="community_member"===o?(null===l||void 0===l?void 0:l.name)||"":(null===s||void 0===s?void 0:s.name)||"",f="".concat(n,"-").concat(r),m=(0,S.H)(t).day,b=(null===d||void 0===d?void 0:d.current)!==m;return d&&!(0,a.isFunction)(d)&&(d.current=m),(0,A.jsxs)(A.Fragment,{children:[!u&&(0,A.jsx)(w.J,{showDateChangeLine:b,day:m}),(0,A.jsx)("div",{className:"px-4 py-3",id:n.toString(),children:(0,A.jsxs)("div",{className:"flex w-full items-start justify-start gap-3",children:[(0,A.jsx)("div",{className:"pt-1.5",children:(0,A.jsx)(F,{message:e})}),(0,A.jsx)(H,{authorName:p,timestamp:t,body:i,sources:c})]})},f)]})}))}),n&&(0,A.jsxs)("div",{className:"px-4 py-3",children:[c&&(0,A.jsx)(Q,{}),p&&(0,A.jsx)(J,{}),(0,A.jsx)(T,{onSubmit:r})]})]})},$=function(e){var t=e.isDms,r=e.children;return(0,A.jsx)("div",{className:j()("bg-primary flex h-full w-full flex-row",{"max-h-[calc(100vh-64px)]":!t}),children:r})},X=r(54030),Y=r(84432),ee=r(41320),te=r(39997),re=r(66438),ne=r(86732),ie=r(49142),oe=r(43760),ae=function(e){var t=e.profile;return(0,A.jsxs)(A.Fragment,{children:[!t.avatar_url&&(0,A.jsx)(L.JO,{type:"120-ai-bot",size:120,className:"mb-4 !h-[7.5rem] !w-[7.5rem]"}),t.avatar_url&&(0,A.jsx)("img",{src:t.avatar_url,alt:t.name,className:"mb-4 !h-[7.5rem] !w-[7.5rem] rounded-full",loading:"lazy"})]})},se=function(e){var t=e.botProfile,r=(0,ie.T)(),n=r.ref,i=r.height;return(0,A.jsxs)(ne.x,{children:[(0,A.jsx)("div",{ref:n,children:(0,A.jsx)(oe.S0.Header,{className:"!min-h-[4rem]",children:(0,A.jsx)(re.h,{title:(0,P.t)("profile"),isDirect:!0})})}),(0,A.jsx)(oe.S0.Content,{noPadding:!0,heightGap:i,children:(0,A.jsxs)("div",{className:"px-6 py-5",children:[(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsx)(ae,{profile:t}),(0,A.jsx)(z.Z.TitleSm,{weight:"semibold",children:t.name})]}),(0,A.jsxs)("div",{className:"mb-5 flex flex-col gap-y-2",children:[(0,A.jsx)(z.Z.LabelSm,{weight:"semibold",children:(0,P.t)("community_inbox.profile.bio")}),(0,A.jsx)("div",{className:"text-sm font-normal leading-5 tracking-tighter",children:(0,A.jsx)(C.T,{editable:!1,rich_text_body:t.bio})})]})]})})]})},le=r(336),ce=r(42599),ue=r(69733),de={page_name:ce.$q.PROFILE_VIEW},pe=function(e){var t=e.communityMember,r=void 0===t?{}:t,n=(0,ue.P)({publicId:null===r||void 0===r?void 0:r.public_uid,params:de}).getProfileInfoQuery,i=n.data,o=void 0===i?{}:i,a=n.isLoading,s=(0,ie.T)(),l=s.ref,c=s.height;return(0,A.jsxs)(ne.x,{children:[(0,A.jsx)("div",{ref:l,children:(0,A.jsx)(oe.S0.Header,{className:"!min-h-[4rem]",children:(0,A.jsx)(re.h,{title:(0,P.t)("profile"),isDirect:!0})})}),(0,A.jsx)(oe.S0.Content,{noPadding:!0,heightGap:c,children:a?(0,A.jsx)(m.a,{center:!0}):(0,A.jsx)(le.N,{memberPublicId:null===r||void 0===r?void 0:r.public_uid,member:o,isFullPageProfile:!1,isRenderedOnRailBar:!0,shouldHideMessageButton:!0,shouldHideBadge:!0})})]})},fe=function(e){var t=e.author,r=void 0===t?{}:t;return e.isDms?(0,A.jsx)(se,{botProfile:r}):(0,A.jsx)(pe,{communityMember:r})},me=function(e){var t,r,n=e.chatRoomId,i=e.isDms,o=(t=n,{chat:(r=(0,l.useQuery)(["community-inbox","chat-room",t],(function(){return(0,c.UT)(u.a.communityInbox.show({id:t}))}))).data,isChatLoading:r.isLoading}),a=o.chat,d=void 0===a?{}:a,p=o.isChatLoading,f=(0,ee.x)(),m=f.shouldShowRailBar,h=f.toggleShowRailBar,v=(0,s.k6)(),y=(0,X.BT)(),g=d.community_member,_=d.community_bot_profile,x=i?_:g;return(0,A.jsxs)("div",{className:"border-primary bg-primary h-16 w-full border-b px-6 py-4",children:[p?(0,A.jsx)(te.RN,{full:!0,children:(0,A.jsx)(te.X2,{xxl:!0,extraLong:!0})}):(0,A.jsxs)("div",{className:j()("flex items-center",y?"justify-start":"justify-between"),children:[y&&(0,A.jsx)("button",{className:"mr-2",type:"button",onClick:function(){return v.push((0,b.yg)())},children:(0,A.jsx)(L.JO,{type:"20-arrow-left",size:20})}),(0,A.jsx)(Y.y,{children:null===x||void 0===x?void 0:x.name}),(0,A.jsx)("button",{type:"submit",className:"mt-0.5 hidden lg:block",onClick:h,children:(0,A.jsx)(L.JO,{"aria-label":m?(0,P.t)("chat_space.header.collapse_railbar"):(0,P.t)("chat_space.header.expand_railbar"),className:"text-dark",useWithFillCurrentColor:!0,type:m?"rail-collapse-right":"rail-collapse-left"})})]}),m&&(0,A.jsx)(fe,{author:x,isDms:i})]})};function be(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ye=function(e){var t=e.isDms,r=void 0!==t&&t,n=e.isNewConversation,b=void 0!==n&&n,v=e.previewId,y=Boolean(v),g=he((0,o.useState)(null),2),x=g[0],j=g[1],w=(0,s.UO)().id,O=null!==v&&void 0!==v?v:Number(w||x),S=(0,h.vO)(),P=S.setFirstMessage,k=S.setScrollAction,C=S.adjustScroller,N=_({id:O}),I=N.createMessage,E=N.fetchNextPage,D=N.hasNextPage,T=N.isFetching,L={createChat:(0,l.useMutation)((function(e){return(0,c.Cu)(u.a.communityInbox.create({params:{community_bot_profile_id:e.id}}))}),{onError:function(e){console.error("Error while creating chat",e)}}).mutateAsync}.createChat,M=(0,f.Dk)(),R=M.setCurrentChatId,B=M.currentBotProfile,U=M.adminMarkAsRead,F=M.memberMarkAsRead,z=r?F:U;(0,o.useEffect)((function(){O&&R(O)}),[O,R]),(0,o.useEffect)((function(){return z(O),function(){return z(O)}}),[O,z]);var V=(0,p.aK)(d),q=(0,o.useMemo)((function(){return null!==V&&void 0!==V&&V.length?(0,a.sortBy)(V||[],"created_at"):[]}),[V]);(0,o.useLayoutEffect)((function(){!T&&q.length>0&&C()}),[q,T,C]);var Z=function(){var e,t=(e=i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=5;break}return e.next=3,L(B);case 3:r=e.sent,j(r.id);case 5:I(t);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){be(o,n,i,a,s,"next",e)}function s(e){be(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(T)return(0,A.jsx)($,{isDms:r,children:(0,A.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,A.jsx)(m.a,{})})});var G=!y&&!b;return(0,A.jsx)(p.G5,{children:(0,A.jsxs)($,{isDms:r,children:[(0,A.jsxs)("div",{className:"w-full",children:[G&&(0,A.jsx)(me,{chatRoomId:O,isDms:r}),(0,A.jsx)(K,{messages:b?[]:q,createMessage:Z,isDms:r,fetchNextPage:function(){T||(P(q[0]),k(h.aO.PAGINATION),E())},hasNextPage:Boolean(D),isLoading:T,isNewConversation:b,isPreviewMode:y})]}),G&&(0,A.jsx)("div",{id:"rail-bar-header"})]})})}},48856:(e,t,r)=>{"use strict";r.d(t,{z:()=>b});var n=r(94184),i=r.n(n),o=r(86013),a=r(96486),s=r(40160),l=r(18802),c=r(73890),u=r(18605),d=r(8246),p=r(64514),f=r(85893),m=function(e){var t,r,n=e.isDirect,o=e.chatRoomName,a=e.timestamp,s=e.lastMessage,l=e.isUnread,c=!(0,p.Z)(new Date(s.created_at));return(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)("span",{className:i()("shrink-0",c?"max-w-[106px]":"max-w-[130px]"),children:(0,f.jsx)(d.Z.BodySm,{truncate:!0,weight:"font-medium",children:o})}),(0,f.jsx)("span",{className:"mt-[-1px] min-w-fit shrink-0",children:(0,f.jsx)(d.Z.BodyXs,{as:"time",weight:"font-medium",color:"text-light",children:a})}),l&&(0,f.jsx)("span",{className:"flex grow justify-end",children:(0,f.jsx)(u.JO,{type:"16-inbox-unread",size:16})})]}),(0,f.jsx)("div",{className:"mt-0.5",children:(0,f.jsx)("p",{className:"text-default !line-clamp-1 flex items-center overflow-hidden hyphens-auto break-all text-sm",children:"".concat(n?"":"".concat(null===(r=s.sender)||void 0===r?void 0:r.name,": ")).concat((null===(t=s.body)||void 0===t?void 0:t.circle_ios_fallback_text)||"")})})]})},b=function(e){var t=e.chat,r=e.path,n=e.isBotType,p=void 0!==n&&n,b=e.shouldHightlightChat,h=void 0!==b&&b,v=e.isUnread,y=void 0!==v&&v,g=t.community_bot_profile,_=t.community_member,x=t.last_message,j=void 0===x?{}:x,w=t.id,O=p?g:_,S=p&&!O.avatar_url;return(0,a.isNull)(j)?null:(0,f.jsxs)(s.OL,{className:i()("hover:bg-tertiary block cursor-pointer py-3",h?"-mx-2 bg-[#674FD90A]/[.04] px-6":"rounded-lg px-4"),activeClassName:"bg-tertiary",to:r,"data-testid":"chat-room-dm-list",children:[h&&(0,f.jsxs)("div",{className:"-mt-1",children:[(0,f.jsx)(u.JO,{type:"20-ai-bot-gradient",size:20,className:"mt-1"}),(0,f.jsx)(d.Z.LabelXs,{weight:"semibold",as:"span",textTransform:"uppercase",color:"bg-gradient-to-t from-[#6C47D2] to-[#516DF1] bg-clip-text text-transparent",children:(0,o.t)("messaging.agent")})]}),(0,f.jsx)("div",{className:"flex w-full items-start justify-between",children:(0,f.jsxs)("div",{className:"flex w-full items-center space-x-3",children:[S?(0,f.jsx)(u.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px] shrink-0"}):(0,f.jsx)(l.q,{isDirect:!0,otherParticipants:[O]}),(0,f.jsx)(m,{isDirect:!0,chatRoomName:O.name,timestamp:(0,c.TF)(j.created_at,{format:"short"}),lastMessage:j,isUnread:y})]})})]},w)}},81162:(e,t,r)=>{"use strict";r.d(t,{j:()=>y});var n=r(31059),i=r(78417),o=r(58533),a=r(50732),s=r(35102),l=r(13288),c=r(47807),u=r(98338),d=r(34914),p=r(48856),f=r(86013),m=r(8246),b=r(85893),h=function(){return(0,b.jsxs)("div",{className:"flex h-[calc(100dvh-176px)] flex-col items-center justify-center",children:[(0,b.jsx)(m.Z.LabelMd,{weight:"semibold",children:(0,f.t)("community_inbox.chats.no_conversations")}),(0,b.jsx)(m.Z.LabelSm,{children:(0,f.t)("community_inbox.chats.no_conversations_description")})]})},v=function(){var e=(0,c.c)(),t=e.isChatsLoading,r=e.hasNextPage,n=e.fetchNextPage,i=(0,s.Dk)().chats;return function(){var e=(0,u.wh)().currentCommunity,t=null===e||void 0===e?void 0:e.id,r=(0,s.Dk)(),n=r.appendMessage,i=r.updateMessage,o=r.destroyMessage,a=r.appendChat,l=r.updateChat,c=r.destroyChat;(0,d.s)({channel:"CommunityInbox::AdminChannel",community_id:t,canCreateConnection:!!t,onMessageReceive:function(e){switch(e.event){case"createMessage":n(e.json_message,"admin");break;case"updateMessage":i(e.json_message);break;case"destroyMessage":o(e.json_message.id);break;case"createChat":a(e.json_message);break;case"updateChat":l(e.json_message);break;case"destroyChat":c(e.json_message.id)}}},[t])}(),t?(0,b.jsx)("div",{className:"h-full overflow-auto p-2",children:(0,b.jsx)(l.a,{})}):0==i.length?(0,b.jsx)(h,{}):(0,b.jsx)(o.Z,{className:"!h-[calc(100dvh-128px)] overflow-auto p-2",style:{overflow:"auto"},scrollThreshold:.8,next:n,height:600,hasMore:Boolean(r),dataLength:i.length,loader:(0,b.jsx)(l.a,{center:!0}),children:i.map((function(e){return(0,b.jsx)(p.z,{chat:e,path:(0,a.Av)({id:e.id.toString()}),isUnread:e.has_unread_messages_for_admin},e.id)}))})},y=function(){return(0,b.jsx)(i.S,{renderFunc:n.$,children:(0,b.jsx)(v,{})})}},43493:(e,t,r)=>{"use strict";r.d(t,{h:()=>d});var n=r(86013),i=r(18605),o=r(27025),a=r(8246),s=r(85893),l=function(e){var t=e.className,r=e.items,l=e.activeItem,c=e.localeScope,u=e.onItemClick;return(0,s.jsx)(o.Lt,{direction:"bottom-end",className:t,buttonClassName:"w-full",button:(0,s.jsxs)(o.Lt.MenuButton,{className:"hover:bg-tertiary border-primary flex justify-between rounded-md border px-2 py-1 transition-colors",children:[(0,s.jsx)(a.Z.LabelSm,{children:(0,n.t)([c,l])}),(0,s.jsx)(i.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:r.map((function(e){return(0,s.jsx)(o.Lt.Item,{onClick:function(){return u(e)},children:(0,s.jsx)(o.Lt.ItemLink,{type:"button",active:l===e,children:(0,n.t)([c,e])})},e)}))})},c={OLDEST:"oldest",LATEST:"latest"},u={ALL:"all",AI_PAUSED:"ai_paused"},d=function(){return(0,s.jsxs)("div",{className:"bg-primary sticky top-0 z-10 flex h-16 items-center gap-2 border-b px-2",children:[(0,s.jsx)(l,{className:"w-[40%]",items:Object.values(u),activeItem:u.ALL,localeScope:"community_inbox.filters",onItemClick:function(){}}),(0,s.jsx)(l,{className:"grow",items:Object.values(c),activeItem:c.LATEST,localeScope:"community_inbox.filters",onItemClick:function(){}})]})}},47807:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(96486),i=r(88767),o=r(35102),a=r(81089),s=r(81649);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filter:"",per_page:20},t=(0,o.Dk)().setChats,r=(0,i.useInfiniteQuery)(["community-inbox",e.filter,e.per_page],(function(t){var r,n=t.pageParam;return r=void 0===n?1:n,(0,a.UT)(s.a.communityInbox.index({params:c({page:r},e)}))}),{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,n.flatten)(r.map((function(e){return e.records}))),pageParams:r.map((function(e){return e.page})),pagesList:r}},getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(r){"mine"!=e.filter&&t((null===r||void 0===r?void 0:r.pages)||[])}}),l=r.data,u=r.isLoading,d=r.hasNextPage,p=r.fetchNextPage;return{chats:(null===l||void 0===l?void 0:l.pages)||[],isChatsLoading:u,hasNextPage:d,fetchNextPage:p}}},77180:(e,t,r)=>{"use strict";r.d(t,{T:()=>p});var n=r(86013),i=r(88767),o=r(81089),a=r(50732),s=r(8097),l=r(98338),c=r(69647),u=r(8246),d=r(85893),p=function(e){var t=e.show,r=e.onClose,p=(0,c.p)(),f=(0,l.N3)(),m=f.active_paywall_subscriptions,b=f.active_but_non_cancelable_paywall_subscriptions,h=a.av.communityMembers.deactivateAccount({id:f.id}),v=(0,i.useMutation)((function(){return(0,o.pC)(h)}),{onSuccess:function(){p.success((0,n.t)("deactivate_account_confirmation_modal.successfully_deactivated")),r(),window.location.href=(0,a.jE)()},onError:function(){p.error((0,n.t)("deactivate_account_confirmation_modal.error_deactivated"))}}),y=v.mutateAsync,g=v.isLoading;return b?(0,d.jsx)(s.W,{title:(0,n.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account-not-allowed",actionVariant:"primary",actionText:(0,n.t)("deactivate_account_confirmation_modal.not_allowed_action"),onAction:r,disabled:g,children:(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.not_allowed_description")})}):(0,d.jsxs)(s.W,{title:(0,n.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account",actionVariant:"danger",actionText:(0,n.t)("deactivate_account_confirmation_modal.deactivate"),onAction:y,disabled:g,children:[m&&(0,d.jsx)("div",{className:"pb-3",children:(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.description_with_subscription")})}),(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.description")})]})}},72874:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(67294),i=r(98338),o=function(){var e=(0,i.wh)().currentCommunity;return{isApiFeatureEnabled:(0,n.useMemo)((function(){return!(null===e||void 0===e||!e.api_access_feature_flag_enabled)}),[e])}}},61150:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(86013),i=r(96486),o=r(11049),a=r(44032),s=r(58294),l=r(5604),c=r(85893),u=(0,i.uniqueId)("broadcast-settings-form-"),d=function(e){var t=e.confirmText,r=e.onSuccess,i=(0,o.dd)();return(0,c.jsx)(a.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",confirmText:t||(0,n.t)("save"),title:(0,n.t)([l.jD,"can_you_tell_bit_more"]),onCancel:i.hide,formId:u,size:"xl",titleSize:"md",headerClassName:"!pb-4 !border-solid !border-b",footerClassName:"border border-t",children:(0,c.jsx)(s.e,{className:"py-6",formId:u,shouldShowSaveButton:!1,modal:i,onSuccess:r})})},p=o.gk.create((function(e){var t=e.confirmText,r=e.onSuccess;return(0,c.jsx)(d,{confirmText:t,onSuccess:r})})),f=function(){return(0,o.dd)(p)}},58294:(e,t,r)=>{"use strict";r.d(t,{e:()=>Y});var n=r(64687),i=r.n(n),o=r(94184),a=r.n(o),s=r(28536),l=r(13288),c=r(25036),u=r(86013),d=r(96486),p=r(88767),f=r(59687),m=r(69647),b=r(5604),h=r(50732),v=r(10161),y=r(87536),g=r(98338),_=r(52255),x=function(e){return["marketing-email-address-settings","footer-html",e]},j=r(85893),w=function(){var e,t,r=(0,g.wh)().currentCommunity,n=(r=void 0===r?{}:r).root_url,i=(0,y.Gc)().watch,o={rootUrl:n,addressLine1:i("address_line_1"),addressCity:i("address_city"),addressPostalCode:i("address_postal_code"),addressCountryCode:i("address_country"),addressState:i("address_state")},a=(0,_.c)(o,500),s=((e=a,t=(0,m.p)(),(0,p.useQuery)({queryKey:x(e),queryFn:function(){return f.G.footerHtml({root_url:e.rootUrl,address_line_1:e.addressLine1,address_city:e.addressCity,address_postal_code:e.addressPostalCode,address_country:e.addressCountryCode,address_state:e.addressState||""})},onError:function(){return t.error((0,u.t)("error"))},keepPreviousData:!0})).data||{footer_html:""}).footer_html;return(0,j.jsx)(v.w,{content:s})},O=r(8246),S=function(e){var t=e.children,r=e.title,n=e.description,i=e.childrenClassName,o=e.shouldHideMarginBottom,s=void 0!==o&&o;return(0,j.jsxs)("div",{className:a()({"mb-12":!s}),children:[(0,j.jsx)(O.Z.TitleSm,{weight:"bold",children:r}),(0,j.jsx)("div",{className:"mt-2",children:(0,j.jsx)(O.Z.BodyMd,{color:"text-default",children:n})}),(0,j.jsx)("div",{className:a()("mt-2",i),children:t})]})},P=function(e){var t=e.shouldHideBottomMargin,r=void 0===t||t;return(0,j.jsx)(S,{title:(0,u.t)([b.jD,"footer"]),description:(0,j.jsx)(v.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,u.t)([b.jD,"footer_description"],{url:(0,h.UN)()})}),childrenClassName:"mt-7",shouldHideMarginBottom:r,children:(0,j.jsx)(w,{})})},k=r(67687),C=function(e){var t=e.children,r=e.name,n=e.label,i=e.tooltipText;return(0,j.jsx)(k.l.Item,{className:"grow basis-0 !pt-4",hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,labelClassName:"mb-2",errorClassName:"mt-1 text-v2-danger text-sm",name:r,label:n,tooltipText:i,children:t||(0,j.jsx)(k.l.Input,{})})},N=r(42991);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e){var t=D((0,(0,y.Gc)().getValues)(["sender_email_domain"]),1)[0];return(0,j.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,j.jsx)(k.l.Input,A({suffix:(0,j.jsx)("div",{className:"whitespace-nowrap py-1",children:(0,j.jsx)(O.Z.LabelMd,{color:"text-light",children:"@".concat(t)})}),suffixWrapperClassName:"!bg-selector-active"},e)),(0,j.jsx)(O.Z.LabelXs,{color:"text-default",children:(0,N.t)([b.jD,"sender_email_description"])})]})}var M=function(){var e=(0,(0,y.Gc)().watch)(b.r_);return(0,j.jsxs)(S,{title:(0,u.t)([b.jD,"from_address"]),description:(0,u.t)([b.jD,"from_address_description"]),children:[(0,j.jsx)(C,{name:"sender_name",label:(0,u.t)([b.jD,"sender_name"])}),(0,j.jsx)(C,{name:"sender_email",label:(0,u.t)([b.jD,"sender_email"]),tooltipText:(0,u.t)([b.jD,"sender_email_tooltip"]),children:(0,j.jsx)(L,{})}),(0,j.jsx)(k.l.Item,{className:"!flex flex-row-reverse !pt-4",labelClassName:"text-base text-default !font-normal ml-4",translationRoot:b.jD,hideDescription:!0,hideBorder:!0,fullWidth:!0,inline:!0,name:b.r_,id:b.r_,children:(0,j.jsx)(k.l.ToggleSwitch,{id:b.r_,wrapperClass:"!ml-0",name:b.r_,variant:"small"})}),e&&(0,j.jsx)(C,{name:"reply_to_email",label:(0,u.t)([b.jD,"reply_to_email"]),tooltipText:(0,u.t)([b.jD,"reply_to_email_tooltip"])})]})},R=r(67294),B=r(49429),U=r(86866);function F(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(){var e=(0,R.useMemo)((function(){return e=b.i4.map((function(e){return{label:(0,u.t)([U.p,e]),value:e.toLowerCase()}})),t=b.Q9.map((function(e){return{label:(0,u.t)([U.p,e]),value:e.toLowerCase()}})).sort((function(e,t){return e.label>=t.label?1:-1})),[].concat(F(e),F(t));var e,t}),[]);return(0,j.jsx)(B.N,{wrapperClassName:"form-group no-border grow basis-0 !pt-4",name:"address_country",label:(0,u.t)([b.jD,"address_country"]),options:e,placeholder:(0,u.t)([b.jD,"select_country"])})},q=function(){return(0,j.jsxs)(S,{title:(0,u.t)([b.jD,"postal_address"]),description:(0,u.t)([b.jD,"postal_address_description"]),childrenClassName:"mt-3",children:[(0,j.jsx)(C,{name:"address_line_1",label:(0,u.t)([b.jD,"address_line_1"])}),(0,j.jsxs)("div",{className:"grid gap-3 sm:grid-cols-1 md:grid-cols-2",children:[(0,j.jsx)(C,{name:"address_city",label:(0,u.t)([b.jD,"address_city"])}),(0,j.jsx)(C,{name:"address_state",label:(0,u.t)([b.jD,"address_state"])}),(0,j.jsx)(C,{name:"address_postal_code",label:(0,u.t)([b.jD,"address_postal_code"])}),(0,j.jsx)(V,{})]})]})},Z=r(81786),G=function(){var e=(0,y.Gc)().formState.isSubmitting;return(0,j.jsx)("div",{className:"text-right",children:(0,j.jsx)(Z.z,{variant:"circle",className:"float-right",large:!0,disabled:e,children:e?(0,u.t)([b.jD,"saving_changes"]):(0,u.t)([b.jD,"save_changes"])})})},W=r(87561),H="settings.emails.settings.errors",Q=W.Ry().shape({sender_name:W.Z_().required((0,u.t)([H,"sender_name_is_required"])),sender_email:W.Z_().matches(b.lb,{message:(0,u.t)([H,"please_enter_valid_email_address"])}).required((0,u.t)([H,"sender_email_is_required"])),reply_to_email:W.Z_().when(b.r_,{is:!0,then:W.Z_().email((0,u.t)([H,"please_enter_valid_email_address"])).required((0,u.t)([H,"reply_to_email_is_required"]))}),address_country:W.Z_().required((0,u.t)([H,"country_is_required"])),address_line_1:W.Z_().required((0,u.t)([H,"address_is_required"])),address_city:W.Z_().required((0,u.t)([H,"city_is_required"])),address_postal_code:W.Z_().required((0,u.t)([H,"zip_code_is_required"]))});function J(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y=function(e){var t,r,n=e.shouldShowSaveButton,o=void 0===n||n,h=e.formId,v=e.modal,y=e.onSuccess,g=e.className,_=void 0===g?"":g,x=function(e){var t=e.modal,r=e.onSuccess,n=(0,p.useQueryClient)(),i=(0,m.p)();return(0,p.useMutation)({mutationFn:function(e){return f.G.upsert(e)},onSuccess:function(){i.success((0,u.t)([b.jD,"settings_updated"])),n.invalidateQueries(c.E),null===t||void 0===t||t.remove(),(0,d.isFunction)(r)&&r()},onError:function(){i.error((0,u.t)("unexpected_error"))}})}({modal:v,onSuccess:y}),w=x.mutateAsync,O=(0,c.F)(),S=O.data;return O.isLoading?(0,j.jsx)(l.a,{}):(0,j.jsxs)(s.l,{id:h,className:a()("flex flex-col",_),defaultValues:$($({},S),{},{sender_email:(t=null===S||void 0===S?void 0:S.sender_email,null===t||void 0===t?void 0:t.substring(0,null!==(r=t.indexOf("@"))&&void 0!==r?r:t.length))}),validationSchema:Q,onSubmit:function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){J(o,n,i,a,s,"next",e)}function s(e){J(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),children:[(0,j.jsx)(M,{}),(0,j.jsx)(q,{}),(0,j.jsx)(P,{shouldHideBottomMargin:!o}),o&&(0,j.jsx)(G,{})]})}},5604:(e,t,r)=>{"use strict";r.d(t,{jD:()=>n,r_:()=>i,lb:()=>o,i4:()=>a,Q9:()=>s});var n="settings.emails.settings",i="use_custom_reply_to_email",o=/^[A-Z0-9._%+-]+$/i,a=["US","BR","GB","AU","CA","DE","FR"],s=["AE","AG","AL","AM","AR","AT","BA","BE","BG","BH","BO","BS","CH","CI","CL","CO","CR","CY","CZ","DK","DO","EC","EE","EG","ES","ET","FI","GH","GM","GR","GT","GY","HK","HR","HU","ID","IE","IL","IN","IS","IT","JM","JO","JP","KE","KH","KR","KW","LC","LI","LK","LT","LU","LV","MA","MD","MG","MK","MN","MO","MT","MU","MX","MY","NA","NG","NL","NO","NZ","OM","PA","PE","PH","PL","PT","PY","QA","RO","RS","RW","SA","SE","SG","SK","SN","SV","TH","TN","TR","TT","TW","TZ","UY","UZ","VN","ZA"]},91293:(e,t,r)=>{"use strict";r.d(t,{y:()=>o});var n=r(67294),i=r(37578),o=function(){var e=(0,i.Rf)().data;return{shouldShowEmailNotices:(0,n.useMemo)((function(){return!!(0,i.su)(e)}),[e]),isSendingMarketingEmailsAllowed:(0,n.useMemo)((function(){return!(0,i.su)(e)||e.limits.allowance>0}),[e]),marketingHubData:(0,n.useMemo)((function(){return(0,i.su)(e)?e:null}),[e])}}},64235:(e,t,r)=>{"use strict";r.d(t,{Z4:()=>a,uf:()=>s,SL:()=>l,lJ:()=>c,D8:()=>u,V9:()=>d,Ut:()=>p,DA:()=>f,MS:()=>h});var n,i=r(86013);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={ALL:"all",DRAFT:"draft",SENT:"sent",PROCESSING:"processing",SCHEDULED:"scheduled",FAILED:"failed"},s={TRIAL_LIMIT_REACHED:"trial_limit_reached",LIMIT_REACHED:"limit_reached",SYSTEM_UNAVAILABLE:"system_unavailable",MARKETING_HUB_NOT_ENABLED:"marketing_hub_not_enabled",BLOCKED:"blocked",UNKNOWN:"unknown"},l={standard:"standard",workflow:"workflow"},c=[a.ALL,a.SENT,a.DRAFT,a.SCHEDULED],u=(o(n={},a.DRAFT,"default"),o(n,a.SENT,"success"),o(n,a.PROCESSING,"info"),o(n,a.SCHEDULED,"warning"),o(n,a.FAILED,"danger"),n),d="status",p=[a.PROCESSING,a.SENT,a.FAILED],f=15e3,m=(0,i.t)("dynamic_vars_groups.member"),b=(0,i.t)("dynamic_vars_groups.community"),h=[{group:m,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:m,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:m,label:"{{member.name}}",value:"{{member.name}}"},{group:m,label:"{{member.email}}",value:"{{member.email}}"},{group:m,label:"{{member.public_uid}}",value:"{{member.public_uid}}"},{group:b,label:"{{community.name}}",value:"{{community.name}}"},{group:b,label:"{{community.url}}",value:"{{community.url}}"}]},31415:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var n=r(86013),i=r(88767),o=r(79544),a=r(69647),s=function(){var e=(0,a.p)();return(0,i.useMutation)({mutationFn:function(e){return o.w.create(e)},onError:function(){return e.error((0,n.t)(["settings.emails.broadcasts.new_broadcast_modal","error_saving"]))}})}},71303:(e,t,r)=>{"use strict";r.d(t,{R:()=>p,S:()=>f});var n=r(67294),i=r(38776),o=r(15242),a=r(79530),s=r(85893);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,n.createContext)(null);d.displayName="BuilderBlockContext";var p=function(){var e=(0,n.useContext)(d);return(0,i.Z)(e,"useBuilderBlockContext must be used within a BuilderBlockContextProvider"),e};function f(e){var t,r,i,u,p,f,m,b,h,v=e.children,y=(0,o.u)().data,g=(null===y||void 0===y||null===(t=y.broadcast_audience)||void 0===t?void 0:t.audience_count)||0,_=(0,n.useMemo)((function(){var e,t,r,n,i,o,s,l,c;return new Map([["to",(c=null===y||void 0===y||null===(n=y.broadcast_audience)||void 0===n||null===(i=n.filter_rules)||void 0===i?void 0:i.rule_type,c===a.g.ALL_MEMBERS||c===a.g.ALL_CONTACTS||c===a.g.CUSTOM_FILTERS&&!(null===y||void 0===y||null===(o=y.broadcast_audience)||void 0===o||null===(s=o.filter_rules)||void 0===s||null===(l=s.rules)||void 0===l||!l.length))],["subject",!(null===y||void 0===y||null===(e=y.broadcast_content)||void 0===e||!e.subject)],["preview_text",!(null===y||void 0===y||null===(t=y.broadcast_content)||void 0===t||!t.preview_text)],["email_content",!(null===y||void 0===y||null===(r=y.broadcast_content)||void 0===r||!r.email_content)],["schedule",!(null===y||void 0===y||!y.send_type)]])}),[null===y||void 0===y||null===(r=y.broadcast_audience)||void 0===r||null===(i=r.filter_rules)||void 0===i?void 0:i.rule_type,null===y||void 0===y||null===(u=y.broadcast_audience)||void 0===u||null===(p=u.filter_rules)||void 0===p||null===(f=p.rules)||void 0===f?void 0:f.length,null===y||void 0===y||null===(m=y.broadcast_content)||void 0===m?void 0:m.email_content,null===y||void 0===y||null===(b=y.broadcast_content)||void 0===b?void 0:b.preview_text,null===y||void 0===y||null===(h=y.broadcast_content)||void 0===h?void 0:h.subject,null===y||void 0===y?void 0:y.send_type]),x=(0,n.useMemo)((function(){var e,t=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(_);try{for(t.s();!(e=t.n()).done;){var r=l(e.value,2),n=r[0];if(!r[1])return n}}catch(i){t.e(i)}finally{t.f()}return"to"}),[_]),j=l((0,n.useState)(x),2),w=j[0],O=j[1],S=(0,n.useMemo)((function(){return{activeSection:w,setActiveSection:O,filledStatus:_,audienceCount:g}}),[w,O,_,g]);return(0,s.jsx)(d.Provider,{value:S,children:v})}},79530:(e,t,r)=>{"use strict";r.d(t,{g:()=>o,V:()=>a});var n=r(86013),i="settings.emails.builder",o={ALL_CONTACTS:"all_contacts",ALL_MEMBERS:"all_members",CUSTOM_FILTERS:"custom_filters",SELECTED_MEMBERS:"selected_members"},a=[{text:(0,n.t)([i,"all_contacts"]),value:o.ALL_CONTACTS},{text:(0,n.t)([i,"all_members"]),value:o.ALL_MEMBERS},{text:(0,n.t)([i,"custom_filters"]),value:o.CUSTOM_FILTERS}]},53620:(e,t,r)=>{"use strict";r.d(t,{Mb:()=>n,gv:()=>i,b:()=>o});var n=255,i=140,o=140},32028:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(86013),i=r(88767),o=r(50688),a=r(69647),s=function(e){var t=e.id,r=(0,a.p)();return(0,i.useQuery)({queryKey:["forms","show",t],queryFn:function(){return o.G.show(t)},onError:function(){return r.error((0,n.t)("error"))},enabled:void 0!==t})}},22285:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(42991),i=r(10161),o=r(8246),a=r(85893),s=function(){return(0,a.jsx)("div",{className:"py-5",children:(0,a.jsx)(o.Z.BodyMd,{color:"text-default",children:(0,a.jsx)(i.w,{content:(0,n.t)(["settings.emails.view_broadcast","please_wait_processing_recipient_list"])})})})}},13292:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var n=function(e){var t=e.value,r=e.total,n=e.precision,i=void 0===n?1:n,o=e.fallbackValue,a=void 0===o?"0.0%":o;return t&&r&&r>0&&t>=0?"".concat((t/r*100).toFixed(i),"%"):a}},73749:(e,t,r)=>{"use strict";r.d(t,{r:()=>i});var n=r(25036),i=function(){var e=(0,n.F)(),t=e.data,r=e.isLoading;return{areMarketingSettingsAvailable:Boolean(null===t||void 0===t?void 0:t.id),isLoading:r}}},89514:(e,t,r)=>{"use strict";r.d(t,{x:()=>d,t:()=>p});var n=r(86013),i=r(88767),o=r(79544),a=r(69647),s=["id"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){return["broadcasts","show",e]},p=function(e){var t=e.id,r=u(e,s),p=(0,a.p)();return(0,i.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryKey:d(t),queryFn:function(){return o.w.show({id:t})},onError:function(){return p.error((0,n.t)("error"))},enabled:!!t},r))}},42374:(e,t,r)=>{"use strict";r.d(t,{w:()=>c});var n=r(86013),i=r(88767),o=r(79544),a=r(69647),s=r(64235),l=function(e){return["broadcasts",e,"report"]},c=function(e){var t=e.id,r=(0,a.p)();return(0,i.useQuery)({queryKey:l(t),queryFn:function(){return o.w.report({id:t})},onError:function(){return r.error((0,n.t)("error"))},refetchInterval:s.DA})}},25036:(e,t,r)=>{"use strict";r.d(t,{E:()=>s,F:()=>l});var n=r(86013),i=r(88767),o=r(59687),a=r(69647),s=["marketing-email-address-settings"],l=function(){var e=(0,a.p)();return(0,i.useQuery)({queryKey:s,queryFn:function(){return o.G.show()},onError:function(){return e.error((0,n.t)("error"))}})}},51769:(e,t,r)=>{"use strict";r.d(t,{F:()=>O});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(24185),l=r(79544),c=r(15242),u=r(69647),d=r(61150),p=r(92385),f=r(11049),m=r(98338),b=r(8097),h=r(13288),v=r(8246),y=r(85893),g="settings.emails.builder",_=function(e){var t=e.handleSendTestEmail,r=(0,f.dd)(),n=(0,m.wh)(),i=n.currentUser;return n.isLoading?(0,y.jsx)(h.a,{}):(0,y.jsxs)(b.W,{isOpen:r.visible,onClose:function(){r.hide()},actionVariant:"circle",actionText:(0,o.t)([g,"send"]),onAction:t,title:(0,o.t)([g,"send_test_email_modal.send_test_email"]),children:[(0,y.jsx)("div",{className:"mb-1",children:(0,y.jsx)(p.I,{value:i.email,disabled:!0})}),(0,y.jsx)("div",{className:"leading-tight",children:(0,y.jsx)(v.Z.LabelXs,{color:"text-default",children:(0,o.t)([g,"send_test_email_modal.description"])})})]})},x=f.gk.create((function(e){var t=e.handleSendTestEmail;return(0,y.jsx)(_,{handleSendTestEmail:t})})),j=r(73749);function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var O=function(){var e,t=(0,u.p)(),r=(0,c.u)().data,n=(0,s.UO)().id,p=null!==(e=null===r||void 0===r?void 0:r.id)&&void 0!==e?e:Number(n),m=(0,j.r)(),b=m.isLoading,h=m.areMarketingSettingsAvailable,v=(0,d.Z)(),y=(0,f.dd)(x),g=(0,a.useMutation)((function(){return l.w.sendTestEmail({id:p})}),{onSuccess:function(){t.success((0,o.t)("settings.emails.builder.send_test_email_modal.test_email_sent"))},onError:function(){t.error((0,o.t)("request_failure_message"))}}),_=g.mutate,O=g.isLoading,S=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return",P());case 2:return e.next=4,v.show({confirmText:(0,o.t)(["settings.emails.builder","save_and_send"]),onSuccess:_});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(){y.show({handleSendTestEmail:function(){_(),y.hide()}})};return{isSending:O,isLoadingMarketingSettings:b,handleTestEmail:S}}},1133:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var n=r(86013),i=r(88767),o=r(79544),a=r(69647),s=r(89514),l=function(e){var t=e.id,r=(0,i.useQueryClient)(),l=(0,a.p)();return(0,i.useMutation)({mutationFn:function(e){var r=e.body;return o.w.update({id:t,body:{internal_name:r.internal_name,broadcast_content_attributes:r.broadcast_content,broadcast_audience_attributes:r.broadcast_audience,scheduled_at:r.scheduled_at,send_type:r.send_type}})},onSuccess:function(){r.invalidateQueries((0,s.x)(t))},onError:function(e){if(e.message)return l.error(e.message);l.error((0,n.t)("unexpected_error"))}})}},9495:(e,t,r)=>{"use strict";r.d(t,{x:()=>c});var n=r(94184),i=r.n(n),o=r(96486),a=r(67687),s=r(85893),l=function(e){var t=e.children;return(0,s.jsx)("div",{className:"w-full",children:t})},c=function(e){var t=e.name,r=e.translationRoot,n=e.id,c=e.label,u=e.description,d=e.childrenWrapper,p=void 0===d?l:d,f=e.isHorizontal,m=void 0!==f&&f,b=e.hideLabel,h=void 0!==b&&b,v=e.placeholder,y=e.hidePlaceholder,g=void 0!==y&&y,_=e.hideDescription,x=void 0!==_&&_,j=e.rules,w=e.className,O=e.fullWidth,S=e.children,P=e.isDisabled,k=void 0!==P&&P,C=e.tooltipText,N=e.inlineReverse,I=void 0!==N&&N;return(0,s.jsx)(a.l.Item,{id:null!==n&&void 0!==n?n:(0,o.uniqueId)("".concat(t,"-")),name:t,translationRoot:r,label:c,description:u,className:i()("flex gap-4",{"flex-col":!m},w),labelWrapperClassName:"!w-full !order-none !p-0",placeholder:v,hidePlaceholder:g,hideBorder:!0,hideLabel:h,hideDescription:x,childrenWrapper:p,rules:j,fullWidth:O,isDisabled:k,tooltipText:C,inlineReverse:I,children:S})}},45941:(e,t,r)=>{"use strict";r.d(t,{L:()=>c,F:()=>u});var n=r(67294),i=r(88767),o=r(34334);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=20,u=function(e){var t,r,a,l,u,d=null!==e&&void 0!==e?e:{},p=d.query,f=void 0===p?"":p,m=d.perPage,b=void 0===m?c:m,h=d.initialPage,v=void 0===h?1:h,y=d.options,g=["settings","invitation-links",f,b,v],_=s({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===y?{}:y),x=(0,i.useInfiniteQuery)(g,(function(e){var t=e.pageParam,r=void 0===t?v:t,n=1;r>0&&(n=r);var i=s({page:n,per_page:b},f&&{query:f});return o.bC.list({params:i})}),_),j=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=x.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=x.data)||void 0===t?void 0:t.pages]),w=null!==(r=null===(a=j[0])||void 0===a?void 0:a.count)&&void 0!==r?r:0,O=null!==(l=null===(u=j[0])||void 0===u?void 0:u.per_page)&&void 0!==l?l:b;return s(s({},x),{},{queryKey:g,totalInvitationLinks:w,pageSize:O,pages:j})}},30431:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"form-wrapper !mt-6",children:t})}},86308:(e,t,r)=>{"use strict";r.d(t,{S:()=>P,l:()=>k});var n=r(67294),i=r(94184),o=r.n(i),a=r(24185),s=r(77180),l=r(3383),c=r(1881),u=r(64329),d=r(98338),p=r(98838),f=r(4404),m=r(85893);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e=b((0,c.k)(!1),2),t=e[0],r=e[1],n=(0,a.TH)().pathname.includes(p.L.community_inbox.index),i=(0,d.wh)();return i.isLoading?(0,m.jsx)(f.gi,{variant:"community-sidebar-v2"}):(0,l.h)(i)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.T,{show:t,onClose:r}),(0,m.jsx)("div",{className:"sidebar sidebar--left","data-testid":"sidebar-left",children:(0,m.jsx)("div",{className:o()("fixed h-full w-full",n?"!max-w-[24rem]":"!max-w-[23rem]"),"data-draggable":"false",children:(0,m.jsx)(u.R,{})})})]}):(0,m.jsx)(a.l_,{to:"/"})},y=(0,n.memo)(v);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=(0,n.createContext)({config:{},setConfig:function(){}});O.displayName="LayoutContext";var S={disableRightSidebar:!1,renderLeftSidebar:function(){return(0,m.jsx)(y,{})},disableSidebar:!1,hideAppBar:!1},P=function(e){var t=e.children,r=j((0,n.useState)(S),2),i=r[0],o=r[1],a={config:i,setConfig:o,resetToDefault:function(){o(S)},mergeConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(_(_({},i),e))}};return(0,m.jsx)(O.Provider,{value:a,children:t})},k=function(){return(0,n.useContext)(O)}},20354:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var n=r(67294),i=r(45697),o=r.n(i),a=r(96486),s=r(86308),l=function(e){var t=(0,s.l)(),r=t.mergeConfig,i=t.resetToDefault;return(0,n.useEffect)((function(){return(0,a.isFunction)(r)&&r(e),function(){(0,a.isFunction)(i)&&i()}}),[]),null};l.propTypes={disableRightSidebar:o().bool.isRequired,renderLeftSidebar:o().func,disableSidebar:o().func}},26799:(e,t,r)=>{"use strict";r.d(t,{L:()=>_});var n=r(28379),i=r(88767),o=r(86308),a=r(40569),s=r(98338),l=r(69271),c=r(14856),u=r(78417),d=r(69647),p=r(85893),f=["notice","alert","display_community_switcher","children"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=new i.QueryClient(c.Vr),g=(0,u.P)((function(e){var t=e.notice,r=e.alert,n=e.display_community_switcher,a=e.children,c=v(e,f);return(0,p.jsx)(i.QueryClientProvider,{client:y,children:(0,p.jsx)(l.i,{backendProps:b({notice:t,alert:r,display_community_switcher:n},c),children:(0,p.jsx)(s.HB,{children:(0,p.jsx)(d.V,{children:(0,p.jsx)(o.S,{children:a})})})})})}),(function(){return(0,p.jsx)(a.D,{})})),_=function(){return(0,p.jsx)(g,{children:(0,p.jsx)(n.LiveStreamSettings,{hideHeader:!0})})}},28379:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LiveStreamSettings:()=>Te,default:()=>Le});var n=r(86013),i=r(3004),o=r(59506),a=r(76079),s=r(54778),l=r(98338),c=r(35639),u=r(43227),d=r(58253),p=r(13502),f=r(28736),m=r(8246),b=r(79016),h=r(82111),v=r(13288),y=r(85893),g=function(e){var t=e.title,r=e.children,i=e.isLoading,o=e.canPurchaseMore,a=void 0===o||o,s=e.onPurchase,l=(0,b.E)().isCommunityOnTrial,c=(0,h.v)();return(0,y.jsx)("div",{className:"bg-primary border-primary relative shrink-0 grow rounded-lg border px-5 py-4","data-testid":"live-main-status",children:i?(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(v.a,{})}):(0,y.jsxs)("div",{className:"flex h-full flex-col",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,y.jsx)(m.Z.LabelSm,{children:t}),!l&&a&&(0,y.jsx)("button",{type:"button",className:"cursor-pointer text-sm",onClick:function(){c.show({onSuccess:s})},children:(0,n.t)("live_streams.dashboard.limits.add_more")})]}),(0,y.jsx)("div",{className:"relative grow",children:r})]})})},_=function(e){var t=e.hosts,r=e.participants,i=e.onPurchase,o=e.isLoading,a=(0,b.E)().isCommunityOnEnterprise;return(0,y.jsx)(g,{isLoading:o,canPurchaseMore:!a,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.hosts"),children:(0,y.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"text-dark text-base font-bold",children:t})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z.LabelSm,{children:(0,n.t)("live_streams.dashboard.limits.participants")}),(0,y.jsx)("div",{className:"text-dark text-base font-bold",children:r})]})]})})},x=function(e){return Math.trunc(100*e)/100},j=function(e){var t=e.usage,r=e.limit,n=e.color,i=void 0===n?"red":n,o=e.label,a={width:"".concat(r?Math.min(t/r*100,100):0,"%"),backgroundColor:i},s="".concat(x(t)," / ").concat(x(r));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"relative mb-2 h-1 w-full rounded-sm bg-gray-300",children:(0,y.jsx)("div",{className:"absolute h-full rounded-sm",style:a})}),(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[o&&(0,y.jsx)(m.Z.LabelXs,{children:o}),(0,y.jsx)(m.Z.LabelXs,{children:s})]})]})},w=function(e){var t=e.limit,r=e.usage,i=e.onPurchase,o=e.isLoading;if(!t)return null;var a=r/t*100;return(0,y.jsxs)(g,{isLoading:o,canPurchaseMore:!0,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.video_storage"),children:[(0,y.jsx)("div",{className:"mb-5",children:(0,y.jsx)(m.Z.TitleMd,{children:x(r)})}),(0,y.jsx)(j,{usage:r,limit:t,label:(0,n.t)("live_streams.dashboard.limits.storage_limit"),color:a>75?"red":"green"})]})},O=function(e){var t=e.limit,r=e.usage,i=e.onPurchase,o=e.isLoading;if(!t)return null;var a=r/t*100;return(0,y.jsxs)(g,{isLoading:o,canPurchaseMore:!0,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.hours_this_month"),children:[(0,y.jsx)("div",{className:"mb-5",children:(0,y.jsx)(m.Z.TitleMd,{children:x(r)})}),(0,y.jsx)(j,{usage:r,limit:t,label:(0,n.t)("live_streams.dashboard.limits.monthly_limit"),color:a>75?"red":"green"})]})},S=function(){var e=(0,l.wh)().currentCommunity,t=(0,f.lQ)(),r=t.monthlyHourLimit,n=t.monthlyHourUsage,i=t.storageLimit,o=t.storageUsage,a=t.hostLimit,s=t.participantLimit,c=t.isLoading,u=t.refetchAddons;return e.supports_live_streams?(0,y.jsxs)("div",{className:"mb-4 flex w-full flex-col gap-4 md:flex-row",children:[(0,y.jsx)(O,{isLoading:c,limit:r,usage:n,onPurchase:u}),(0,y.jsx)(w,{isLoading:c,limit:i,usage:o,onPurchase:u}),(0,y.jsx)(_,{isLoading:c,hosts:a,participants:s,onPurchase:u})]}):null},P=r(57435),k=r(56128),C=function(){var e=(0,P.t)();return(0,y.jsx)(k.u,{header:(0,n.t)("live_streams.dashboard.table.no_live_records"),description:(0,n.t)("live_streams.dashboard.table.engage_with_live"),primaryLabel:(0,n.t)("live_streams.now_live.go_live"),onPrimaryClick:function(){return e.show()}})},N=r(81786),I=function(e){var t=e.startRecordNumber,r=e.endRecordNumber,i=e.totalRecordCount,o=e.page,a=e.fetchPrevPage,s=e.hasNextPage,l=e.fetchNextPage;return(0,y.jsxs)("div",{className:"flex flex-row-reverse items-center justify-end space-x-4 space-x-reverse",children:[(0,y.jsxs)("div",{className:"text-dark text-sm font-medium",children:[t,"-",r," ",(0,n.t)("live_streams.dashboard.pagination.of")," ",i]}),(0,y.jsxs)("div",{className:"ml-2 space-x-2",children:[(0,y.jsx)(N.z,{variant:"secondary",disabled:1===o,onClick:a,type:"button",children:(0,n.t)("live_streams.dashboard.pagination.prev")}),(0,y.jsx)(N.z,{variant:"secondary",disabled:!s,onClick:l,type:"button",children:(0,n.t)("live_streams.dashboard.pagination.next")})]})]})},A=r(67294),E=r(94184),D=r.n(E),T=r(39639),L=r(27903),M=r(72860),R=r(93572),B=r(68971),U=r(85239),F=r(88767),z=r(3571),V=r(69647),q=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success;return{deleteRecording:(0,F.useMutation)((function(){return z.Q.deleteRoomRecording({roomId:null===e||void 0===e?void 0:e.id,id:null===e||void 0===e?void 0:e.recording_id})}),{onSuccess:function(){o((0,n.t)("live_streams.delete_recording.success"),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){i((0,n.t)("live_streams.delete_recording.error"))}}).mutate}},Z=r(22837),G=r(57290);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(e){var t=e.room,r=(0,l.wh)().currentCommunitySettings,n=null===r||void 0===r?void 0:r.tiptap_post_enabled;return{trixBodyWithRecording:(0,A.useMemo)((function(){if(n||!t.recording_url)return"";var e=t.recording_blob,r=new Z.default.Attachment(H(H({},e),{},{url:t.recording_url,sgid:e.attachable_sgid,filesize:e.byte_size,contentType:"video/mp4",content:t.video_container_tag})),i=Z.default.Text.textForAttachmentWithAttributes(r),o=[new Z.default.Block(i)];if(t.description){var a=new Z.default.StringPiece(t.description),s=new Z.default.Text([a]);o.unshift(new Z.default.Block(s))}var l=new Z.default.Document(o),c=new Z.default.DocumentView(l).render(),u="";return c.forEach((function(e){var t=e.pop();u+=t.outerHTML})),u}),[n,t]),tiptapBodyWithRecording:n&&t.recording_attachment?(0,G.Ln)({bodyContent:[t.description?(0,G.Z9)({text:t.description}):(0,G.H9)(),(0,G.Om)({file:t.recording_attachment})],inlineAttachments:[t.recording_attachment]}):null}},K=function(e){var t=e.room,r=e.refetch,i=e.setCurrentRoom,o=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success;return{endRoom:(0,F.useMutation)((function(){return z.Q.endStream({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){o((0,n.t)("live_streams.room.".concat((0,U.vX)(e),".end_success")),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){return i((0,n.t)("live_streams.room.".concat((0,U.vX)(e),".end_error")))}}).mutate}}(t,r),a=o.endRoom,s=(0,U.vX)(t),c=q(t,r).deleteRecording,u=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success,a=(0,l.wh)().currentUser;return{chatTranscript:(0,F.useMutation)((function(){return z.Q.chatTranscript({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){o((0,n.t)("live_streams.room.chat_transcript_success",{name:null===e||void 0===e?void 0:e.name,email:null===a||void 0===a?void 0:a.email})),t()},onError:function(){return i((0,n.t)("live_streams.room.chat_transcript_error"))}}).mutate}}(t,r),p=u.chatTranscript,f=(0,B.tv)({title:(0,n.t)("live_streams.".concat(s,"_ended.confirm")),onConfirm:a}),m=f.confirmModal,b=f.onConfirmButtonClick,h=(0,B.tv)({title:(0,n.t)("live_streams.chat_transcript.confirm"),onConfirm:p,sentiment:"primary"}),v=h.confirmModal,g=h.onConfirmButtonClick,_=(0,B.tv)({title:(0,n.t)("live_streams.delete_recording.confirm"),onConfirm:c,description:(0,n.t)("live_streams.delete_recording.confirm_description")}),x=_.confirmModal,j=_.onConfirmButtonClick,w=J({room:t}),O=w.trixBodyWithRecording,S=w.tiptapBodyWithRecording,P=[{key:"view-details",label:(0,n.t)("live_streams.dashboard.table.actions.view_details"),onClick:function(){return i(t)}}];if((0,U.UT)(t)||P.unshift({key:"end-stream",label:(0,n.t)("live_streams.dashboard.table.actions.".concat(s,".end")),onClick:b}),t.recording_url&&P.push({key:"post-to-space",linkComponent:function(e){return(0,y.jsx)(R.h,{hasIcon:!1,isButton:!1,render:function(e){var t=e.onClick;return(0,y.jsx)(d.w.Actions.Item,{onClick:t,children:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")})},bodyForEditor:O,tiptapBodyForEditor:S,title:t.name},e)},label:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")}),t.chat_transcript&&P.push({key:"chat-transcript",label:(0,n.t)("live_streams.dashboard.table.actions.chat_transcript"),onClick:g}),t.recording_url){P.push({key:"download-recording",label:(0,n.t)("live_streams.dashboard.table.actions.download_recording"),onClick:function(){window.open(t.recording_url,"_blank")}})}if(t.transcript_url){P.push({key:"download-transcript",label:(0,n.t)("live_streams.dashboard.table.actions.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}})}return t.recording_url&&P.push({key:"delete-recording",label:(0,n.t)("live_streams.dashboard.table.actions.delete_recording"),hasDanger:!0,onClick:j}),(0,y.jsxs)(y.Fragment,{children:[m,x,v,(0,y.jsx)(d.w.Actions,{children:P.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick,o=e.linkComponent;return"post-to-space"===t?o(t):(0,y.jsx)(d.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))})]})},$=r(47839),X=r(62557),Y=r(18605),ee=r(46266),te=r(11487),re=r(97611),ne=function(){return(0,y.jsx)(ee.Y,{content:(0,n.t)("live_streams.dashboard.details.actions"),children:(0,y.jsx)(Y.JO,{type:"menu-dots-vertical"})})},ie=function(e){var t=e.room,r=e.refetch,i=(0,l.wh)().currentCommunitySettings,o=q(t,r).deleteRecording,a=J({room:t}),s=a.trixBodyWithRecording,c=a.tiptapBodyWithRecording,u=(0,B.tv)({title:(0,n.t)("live_streams.delete_recording.confirm"),onConfirm:o,description:(0,n.t)("live_streams.delete_recording.confirm_description"),maxIndex:!0}),d=u.confirmModal,p=u.onConfirmButtonClick,f=[{key:"download",label:(0,n.t)("live_streams.dashboard.details.download"),href:t.recording_url},{key:"delete",label:(0,n.t)("live_streams.dashboard.details.delete"),onClick:p},{key:"post-to-space",linkComponent:(0,y.jsx)(R.h,{hasIcon:!1,isButton:!1,linkName:(0,n.t)("live_streams.dashboard.table.actions.post_to_space"),bodyForEditor:s,tiptapBodyForEditor:c,title:t.name,maxZIndexEnabled:!0}),label:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")}];if(t.transcript_url){f.splice(1,0,{key:"download-transcript",label:(0,n.t)("live_streams.dashboard.details.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}})}return(0,y.jsxs)("div",{children:[(0,y.jsx)(re.Y,{rounded:!0,src:t.recording_url,type:"video/mp4",mediaTranscriptId:t.transcript_id,variant:null!==i&&void 0!==i&&i.community_ai_settings_enabled?"enhanced":"default"}),(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsx)("div",{className:"text-dark mb-1 mt-4 text-lg font-semibold",children:t.recording_name}),d,(0,y.jsx)(te.t,{renderButton:function(){return(0,y.jsx)(ne,{})},menuItems:f,dropdownSide:"left",shouldCloseOnClickItem:!0})]})]})},oe=function(e){var t=e.recording_duration;return(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.duration")}),(0,y.jsx)("p",{children:t})]})},ae=function(e){var t=e.room,r=e.refetch,i=(0,T.ie)(t.created_at,{year:"numeric",month:"short",day:"numeric"});return(0,y.jsxs)("div",{className:"stream-details__details",children:[t.recording_url&&(0,y.jsx)(ie,{room:t,refetch:r}),t.description&&(0,y.jsx)("div",{className:"mb-6",children:(0,y.jsx)("p",{className:"break-words pr-12",children:t.description})}),(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.room_id")}),(0,y.jsx)("p",{children:t.id})]}),(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.created_at")}),(0,y.jsx)("p",{children:i})]}),t.recording_duration&&(0,y.jsx)(oe,{recording_duration:t.recording_duration}),(0,U.L6)(t)&&(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("div",{className:"text-darkest font-medium",children:(0,n.t)("live_streams.dashboard.details.guests_count")}),(0,y.jsx)("p",{children:t.guests_count})]})]})},se=function(e){var t=e.onClickDownload;return(0,y.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium",children:[(0,y.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.csv")}),(0,y.jsx)(Y.JO,{type:"download",className:D()("cursor-pointer"),onClick:t})]})},le=r(68698),ce=function(e){var t=e.record;return(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsxs)("div",{className:"flex w-1/2 items-center py-2",children:[(0,y.jsx)("div",{className:"relative mr-3 h-10 w-10",children:(0,y.jsx)(le.u,{name:t.name,src:t.avatar_url})}),(0,y.jsx)(m.Z.LabelSm,{weight:"semibold",children:t.name})]}),(0,y.jsx)("div",{className:"w-1/2",children:t.email})]})},ue=function(e){var t=e.onSearchChange;return(0,y.jsxs)("div",{className:"grow",children:[(0,y.jsx)(Y.JO,{type:"search"}),(0,y.jsx)("input",{type:"text",name:"textSearch",placeholder:I18n.t("live_streams.dashboard.participants.placeholder"),onChange:t,className:"bg-primary placeholder:text-light mr-2 w-10/12 border-transparent placeholder:opacity-100 focus:border-transparent focus:ring-0"})]})};function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=e.onClickSort,r=de((0,A.useState)(!1),2),n=r[0],i=r[1];return(0,y.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium text-gray-800",children:[(0,y.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.sort")}),(0,y.jsx)(Y.JO,{type:"caret-down",className:D()("cursor-pointer fill-gray-800",{"rotate-180":n}),onClick:function(){i(!n),t(n)}})]})},me=r(50732);function be(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t=e.roomId,r=e.participantsCount,i=function(e){var t={per_page:2e3,sort:"oldest"},r=(0,F.useQuery)(me.av.liveStreams.participants({roomId:e,params:t})),n=r.data,i=r.isLoading,o=null===n||void 0===n?void 0:n.records;return{records:o&&be(new Map(o.map((function(e){return[e.email,e]}))).values()),isLoading:i}}(t),o=i.records,a=i.isLoading,s=ve((0,A.useState)(""),2),c=s[0],u=s[1],d=ve((0,A.useState)(!1),2),p=d[0],f=d[1],m=function(e){var t=(0,V.p)(),r=t.success,i=t.error,o=(0,l.wh)().currentCommunityMember,a=null===o||void 0===o?void 0:o.email;return{onDownloadCSV:function(){return fetch(me.av.liveStreams.downloadParticipantsCSV({roomId:e})).then((function(e){e.ok?r((0,n.t)("export_member_csv.message",{email:a})):i((0,n.t)("export_member_csv.error_message"))})).catch((function(e){i((0,n.t)("export_member_csv.error_message")),console.error(null===e||void 0===e?void 0:e.message)}))}}}(t),b=m.onDownloadCSV,h=o&&o.filter((function(e){return e.name.toLowerCase().includes(c.toLocaleLowerCase())}))||[];return h=p?h.sort((function(e,t){return t.name.localeCompare(e.name)})):h.sort((function(e,t){return e.name.localeCompare(t.name)})),(0,y.jsxs)("div",{className:"stream-details__participants",children:[(0,y.jsxs)("div",{className:"border-primary mb-6 flex items-center justify-between border-b-[1px] pb-1.5",children:[(0,y.jsx)(ue,{onSearchChange:function(e){u(e.target.value)}}),(0,y.jsx)(fe,{onClickSort:function(e){f(!e)}}),(0,y.jsx)(se,{onClickDownload:b})]}),!a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"stream-details__participants__label",children:(0,n.t)("live_streams.dashboard.participants.participant_count",{count:r})}),h&&h.length>0&&(0,y.jsx)("div",{className:"stream-details__participants__list",children:h.map((function(e){return(0,y.jsx)(ce,{record:e},e.id)}))})]})]})};function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var je=function(e){var t=e.isOpen,r=e.onClose,i=e.room,o=e.refetch,a=Object.freeze({DETAILS:(0,n.t)("live_streams.dashboard.details.tabs.details"),PARTICIPANTS:(0,n.t)("live_streams.dashboard.details.tabs.participants")}),s=Object.values(a).map((function(e){return{label:e}})),l=_e((0,A.useState)(a.DETAILS),2),c=l[0],u=l[1],d=(null===i||void 0===i?void 0:i.room_type)||U.H0.STREAM;return i?(0,y.jsxs)($.u,{variant:"large",show:t,onClose:r,className:"stream-details",children:[(0,y.jsx)("div",{className:"stream-details__title",children:(0,n.t)("live_streams.dashboard.details.".concat(d,".title"))}),(0,y.jsx)(X.m,{controlled:!0,activeTab:c,onClick:u,options:s,variant:"underline"}),c===a.DETAILS&&(0,y.jsx)(ae,{room:i,refetch:o}),c===a.PARTICIPANTS&&(0,y.jsx)(ge,{roomId:null===i||void 0===i?void 0:i.id,participantsCount:null===i||void 0===i?void 0:i.total_participants})]}):null};function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e){var t,r=e.status,i=(we(t={},U.LV.INITIALIZING,(0,n.t)("live_streams.status.initializing")),we(t,U.LV.BACKSTAGE,(0,n.t)("live_streams.status.backstage")),we(t,U.LV.LIVE,(0,n.t)("live_streams.status.live")),we(t,U.LV.ENDED,(0,n.t)("live_streams.status.finished")),we(t,U.LV.CLOSING,(0,n.t)("live_streams.status.closing")),t);return(0,y.jsxs)("div",{className:"live-stream-status",children:[[U.LV.BACKSTAGE,U.LV.LIVE,U.LV.ENDED].includes(r)?(0,y.jsx)("div",{className:D()("live-stream-status__icon",{"live-stream-status__icon--backstage":r===U.LV.BACKSTAGE,"live-stream-status__icon--live":r===U.LV.LIVE,"live-stream-status__icon--ended":r===U.LV.ENDED}),children:(0,y.jsx)(Y.JO,{size:6,type:"middot"})}):null,i[r]||""]})};function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ie=function(e){var t=e.records,r=e.refetch,i=e.className,o=Ce((0,A.useState)(null),2),a=o[0],s=o[1],l=[{title:(0,n.t)("live_streams.dashboard.table.name"),dataIndex:"name",key:"name",variant:"uppercase"},{title:(0,n.t)("live_streams.dashboard.table.status"),dataIndex:"status",key:"status",variant:"uppercase",className:L.M.sm,tdClassName:L.M.sm},{title:(0,n.t)("live_streams.dashboard.table.date"),dataIndex:"live_at",key:"live_at",variant:"uppercase",className:L.M.xl,tdClassName:L.M.xl},{title:(0,n.t)("live_streams.dashboard.table.recording"),dataIndex:"recording",key:"recording",variant:"uppercase"},{title:(0,n.t)("live_streams.dashboard.table.participants"),dataIndex:"total_participants",key:"total_participants",variant:"uppercase",className:L.M.md,tdClassName:L.M.md},{title:(0,n.t)("live_streams.dashboard.table.type"),dataIndex:"type",key:"type",variant:"uppercase",className:L.M.xl,tdClassName:L.M.xl},{title:" ",dataIndex:"actions",key:"actions",variant:"actions"}],c=(null===t||void 0===t?void 0:t.map((function(e){return Pe(Pe({},e),{},{key:e.id,name:(0,y.jsx)("button",{type:"button",className:"max-w-[240px] cursor-pointer truncate",title:e.name,onClick:function(){s(e)},children:e.name}),status:(0,y.jsx)(Oe,{status:e.status}),live_at:(0,T.ie)(e.live_at,{year:"numeric",month:"short",day:"numeric"}),recording:(0,y.jsx)("a",{className:D()("text-dark inline max-w-sm truncate hover:text-black",{"cursor-text":!e.recording_url}),title:(0,n.t)("live_streams.dashboard.table.actions.download"),href:e.recording_url,download:!0,target:"_blank",rel:"noreferrer",children:e.recording_url?(0,n.t)("live_streams.dashboard.table.actions.download"):"-"}),type:"conference"==e.room_type?(0,n.t)("live_streams.dashboard.table.room"):(0,n.t)("live_streams.dashboard.table.stream"),actions:(0,y.jsx)(K,{room:e,refetch:r,setCurrentRoom:s}),rowClassName:"group"})})))||[];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(je,{isOpen:!!a,onClose:function(){s(null)},room:a,refetch:r}),(0,y.jsx)(M.w,{columns:l,dataSource:c,className:i})]})},Ae=r(81649);function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Te=function(e){var t=e.hideHeader,r=void 0!==t&&t,f=(0,l.wh)().currentCommunity,m=(f=void 0===f?{}:f).supports_live_streams,b=(0,c.R)().liveStreamsLimitsEnabled,h=function(){var e=Ee((0,A.useState)(1),2),t=e[0],r=e[1],n=(0,F.useQuery)(Ae.a.liveStreams.index({params:{page:t,per_page:10}}),{keepPreviousData:!0}),i=n.isLoading,o=n.isFetching,a=n.data,s=n.refetch,l=(null===a||void 0===a?void 0:a.records)||[],c=null===a||void 0===a?void 0:a.count,u=null===a||void 0===a?void 0:a.page_count,d=c?Math.ceil(c/10):0,p=!(null===a||void 0===a||!a.has_next_page),f=10*(t-1)+1;return{page:t,records:l,totalRecordCount:c,pageRecordCount:u,pageCount:d,hasNextPage:p,startRecordNumber:f,endRecordNumber:f+u-1,isLoading:i,isFetching:o,refetch:s,fetchNextPage:function(){r(t+1)},fetchPrevPage:function(){r(Math.max(t-1,1))}}}(),v=h.records,g=h.page,_=h.hasNextPage,x=h.totalRecordCount,j=h.startRecordNumber,w=h.endRecordNumber,O=h.isLoading,P=h.refetch,k=h.fetchNextPage,N=h.fetchPrevPage,E=x>0;return(0,y.jsxs)("div",{className:"bg-primary h-full",children:[r?(0,y.jsx)(i.S,{title:(0,n.t)("live_streams_settings")}):(0,y.jsx)(o.b,{pageTitle:(0,n.t)("live_streams_settings"),rightContent:(0,y.jsx)(s.G,{inSettings:!0}),hasBorder:!0}),(0,y.jsxs)(p.T,{maxWidth:"none",children:[m&&(0,y.jsx)(y.Fragment,{children:O?(0,y.jsx)(u.m,{}):(0,y.jsxs)(y.Fragment,{children:[b&&E&&(0,y.jsx)(S,{}),x>0&&(0,y.jsx)(d.w.Headline,{className:"!px-0",children:(0,y.jsx)(d.w.Headline.Title,{children:(0,n.t)("live_streams.count",{count:x})})}),E?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ie,{records:v,refetch:P,className:"live-stream-settings__table",totalRecordCount:x}),(0,y.jsx)(I,{startRecordNumber:j,endRecordNumber:w,totalRecordCount:x,page:g,fetchPrevPage:N,hasNextPage:_,fetchNextPage:k})]}):(0,y.jsx)(C,{})]})}),!m&&(0,y.jsx)("div",{className:"border-primary bg-primary border p-6 text-center lg:rounded-lg lg:p-36",children:(0,y.jsx)(a.s,{})})]})]})};const Le=Te},5182:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(73445).Ue)((function(e){return{manageMemberQueryParams:{},setManageMemberQueryParams:function(t){return e({manageMemberQueryParams:t})},resetManageMemberQueryParams:function(){return e({manageMemberQueryParams:void 0})}}}))},89733:(e,t,r)=>{"use strict";r.d(t,{v:()=>u});var n=r(67294),i=r(24185),o=r(50732),a=r(70254);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="page",u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,a.t)(),l=Number(r[c]||e),u=s((0,n.useState)(l),2),d=u[0],p=u[1],f=(0,i.k6)();return(0,n.useEffect)((function(){t&&f.push({search:(0,o.m_)(c,String(d))})}),[d,f]),{page:d,setPage:p,initialPage:l}}},24478:(e,t,r)=>{"use strict";r.d(t,{L:()=>c,D:()=>u});var n=r(67294),i=r(88767),o=r(91609);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=20,u=function(e){var t,r,a,l,u,d=(0,o.M)().list,p=null!==e&&void 0!==e?e:{},f=p.query,m=void 0===f?"":f,b=p.perPage,h=void 0===b?c:b,v=p.initialPage,y=void 0===v?1:v,g=p.options,_=void 0===g?{}:g,x=p.status,j=void 0===x?"inbox":x,w=["flagged-content",m,h,y,j],O=s({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},_),S=(0,i.useInfiniteQuery)(w,(function(e){var t=e.pageParam,r=void 0===t?y:t,n=1;r>0&&(n=r);var i=s({page:n,per_page:h,status:j},m&&{query:m});return d({params:i})}),O),P=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=S.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=S.data)||void 0===t?void 0:t.pages]),k=null!==(r=null===(a=P[0])||void 0===a?void 0:a.count)&&void 0!==r?r:0,C=null!==(l=null===(u=P[0])||void 0===u?void 0:u.per_page)&&void 0!==l?l:h;return s(s({},S),{},{queryKey:w,totalRecords:k,pageSize:C,pages:P})}},7470:(e,t,r)=>{"use strict";r.d(t,{vC:()=>n,dW:()=>i,V9:()=>o,GI:()=>a});var n={INBOX:"inbox",APPROVED:"approved",REJECTED:"rejected"},i=["inbox","approved","rejected"],o="status",a={POST:"post",COMMENT:"comment"}},91609:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(81089),i=r(50732),o=function(){return{list:function(e){var t=e.params,r=void 0===t?{}:t;return(0,n.UT)(i.av.flaggedContent.index({params:r}))},get:function(e){return(0,n.UT)(i.av.flaggedContent.show({id:e}))},approve:function(e){return(0,n.gN)(i.av.flaggedContent.approve({id:e}))},reject:function(e){return(0,n.gN)(i.av.flaggedContent.reject({id:e}))}}}},844:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(24478),i=r(7470),o=function(){var e=(0,n.D)({status:i.vC.INBOX}).totalRecords,t=(0,n.D)({status:i.vC.APPROVED}).totalRecords,r=(0,n.D)({status:i.vC.REJECTED}).totalRecords;return{inboxCount:e,approvedCount:t,rejectedCount:r,totalReports:e+t+r}}},23557:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(88767),i=r(81089),o=r(50732),a=function(e){var t=e.id;return(0,n.useQuery)(["community","header-nav-items"],(function(){return(0,i.UT)(o.av.settings.navigation.list())}),{enabled:!!t})}},82111:(e,t,r)=>{"use strict";r.d(t,{v:()=>J});var n=r(86013),i=r.n(n),o=r(88767),a=r(11049),s=r(82177),l=r(69647),c=r(64687),u=r.n(c),d=r(52749),p=r(67687),f=r(13288),m=r(33740),b=r(85893),h=["serverErrors"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var x=function(e){var t=e.serverErrors,r=_(e,h),n=t.title,i=t.errors,o=t.topExtraInfo,a=t.bottomExtraInfo;return(0,b.jsx)("div",y(y({className:"server-errors"},r),{},{children:(0,b.jsxs)("div",{className:"server-errors__wrapper",children:[(0,b.jsx)("div",{className:"server-errors__close-icon",children:(0,b.jsx)(m.Z,{className:"server-errors__icon-svg"})}),(0,b.jsxs)("div",{className:"server-errors__container",children:[n&&(0,b.jsx)("h3",{className:"server-errors__title",children:n}),o&&(0,b.jsx)("p",{className:"server-errors__extra-info",children:o}),i&&Array.isArray(i)&&(0,b.jsx)("div",{className:"server-errors__content",children:(0,b.jsx)("ul",{className:"server-errors__list",children:i.map((function(e){return(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"server-errors__error-title",children:e.title}),":"," ",(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})]},e.title)}))})}),a&&(0,b.jsx)("p",{className:"server-errors__extra-info",children:a})]})]})}))},j=r(67294),w=r(538),O=function(e,t,r,n){return n?e?t:0:e*t/r};function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)}))}}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=(0,j.createContext)();A.displayName="AddOnsSettingsContext";var E=function(e){var t=e.onSuccess,r=e.onCloseModal,a=e.children,s=e.refetchCurrentPlan,c=N((0,j.useState)(),2),d=c[0],p=c[1],f=N((0,j.useState)([]),2),m=f[0],h=f[1],v=N((0,j.useState)(),2),y=v[0],g=v[1],_=N((0,j.useState)(),2),x=_[0],S=_[1],I=N((0,j.useState)(!0),2),E=I[0],D=I[1],T=N((0,j.useState)(),2),L=T[0],M=T[1],R=N((0,j.useState)(),2),B=R[0],U=R[1],F=function(e){var t=e.handleOnSuccess,r=void 0===t?null:t,i=e.setServerErrors,a=void 0===i?null:i,s=e.onCloseModal,c=void 0===s?null:s,u=e.refetchCurrentPlan,d=void 0===u?null:u,p=(0,l.p)();return{handleAddonsMutation:(0,o.useMutation)((function(e){return w.z.create(e)}),{onSuccess:function(){r?r():(d&&d(),p.success((0,n.t)("settings.billing.add_ons.changes_succeeded")),c&&c())},onError:function(e){console.error(e),a&&a({title:null===e||void 0===e?void 0:e.message,errors:null===e||void 0===e?void 0:e.errorDetails})}})}}({handleOnSuccess:t,setServerErrors:M,onCloseModal:r,refetchCurrentPlan:s}),z=F.handleAddonsMutation,V=function(e){return"boolean"===typeof e},q=function(e){return e.map((function(e){return e.step=e.unit_size,e.toggleable=V(e.quantity),e}))},Z=function(e){var t={};return e.map((function(e){t[e.slug]=O(e.quantity,e.base_amount,e.unit_size,V(e.quantity))})),t},G=function(e){return e.filter((function(e){return e.is_grandfathered})).map((function(e){return e.name})).join(", ")},W=function(e){var t={};return e.map((function(e){t[e.slug]=e.quantity})),t},H=function(e){return m.find((function(t){return t.slug===e}))},Q=function(){var e=P(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.z.index();case 2:if(!(t=e.sent).ok){e.next=14;break}return e.next=6,t.json();case 6:r=e.sent,g(W(r)),h(q(r)),U(G(r)),S(Z(r)),D(!1),e.next=15;break;case 14:M({title:i().t("something_went_wrong")});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=P(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},Object.keys(t).forEach((function(e){var n=H(e);r[n.id.toString()]=t[e]})),z.mutate(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){Q()}),[]),(0,j.useEffect)((function(){!function(){var e=0;x&&(Object.keys(x).forEach((function(t){e+=x[t]})),p(e))}()}),[x]);var K={getPlanInterval:function(){return m[0].interval},getPlanCurrency:function(){return m[0].price_currency},total:d,addOnsData:m,defaultValues:y,isLoading:E,handleAddonsMutation:z,serverErrors:L,getAddOnPrice:function(e,t){var r=H(e);return O(t,r.base_amount,r.unit_size,r.toggleable)},updateTotalPrice:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},x);r[e]=t,S(r)},onSubmit:J,grandfatheredAddonNames:B};return(0,b.jsx)(A.Provider,{value:K,children:a})},D=function(){return(0,j.useContext)(A)},T=r(24850),L=r(68957),M=["name","interval","monthlyAmount","step","toggleable","maxPurchasableQuantity","priceCurrency","unitSize"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var q=function(e){var t=e.name,r=e.interval,i=e.monthlyAmount,o=e.step,a=void 0===o?1:o,s=e.toggleable,l=void 0!==s&&s,c=e.maxPurchasableQuantity,u=e.priceCurrency,d=e.unitSize,f=V(e,M),m=D(),h=m.defaultValues,v=m.getAddOnPrice,y=m.updateTotalPrice,g=F((0,j.useState)(),2),_=g[0],x=g[1],w=function(e){var r=O(e);y(t,r)},O=function(e){var r=v(t,e);return x(r),r};return(0,j.useEffect)((function(){O(h[t])}),[]),(0,b.jsx)(p.l.Item,B(B({name:t,hideBorder:!0,isFirstChild:!0,label:(0,n.t)("settings.billing.add_ons.manage.".concat(t)),description:(0,n.t)("settings.billing.add_ons.manage.".concat(r,".").concat(t,"_description"),{amount:i,quantity:d})},f),{},{children:(0,b.jsxs)("div",{className:"form-input manage-add-ons__item",children:[l&&(0,b.jsx)("div",{className:"manage-add-ons__item-button",children:(0,b.jsx)(T.R,{name:t,onChange:w})}),!l&&(0,b.jsx)("div",{className:"manage-add-ons__item-button",children:(0,b.jsx)(L.A,{name:t,step:a,onChange:w,max:c})}),(0,b.jsx)("div",{className:"manage-add-ons__item-price",children:(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:u+_})," ",(0,n.t)("separator_slash")," ",r.charAt(0)]})})]})}))};function Z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var G=function(e){var t=e.onAfterSubmit,r=D(),i=r.isLoading,o=r.handleAddonsMutation,a=r.addOnsData,s=r.defaultValues,l=r.onSubmit,c=r.total,m=r.serverErrors,h=r.getPlanInterval,v=r.getPlanCurrency,y=r.grandfatheredAddonNames,g=function(){var e,r=(e=u().mark((function e(){var r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.apply(void 0,r),t&&t();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Z(o,n,i,a,s,"next",e)}function s(e){Z(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[i&&(0,b.jsx)("div",{className:"manage-add-ons__loader",children:(0,b.jsx)(f.a,{})}),!i&&(0,b.jsxs)("div",{children:[y&&(0,b.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,n.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:y})}})}),(0,b.jsx)(p.l,{onSubmit:g,defaultValues:s,children:(0,b.jsxs)("div",{className:"manage-add-ons__fields-wrapper text-dark",children:[m&&(0,b.jsx)(x,{serverErrors:m}),a.map((function(e){return(0,b.jsx)("div",{className:"mb-1",children:(0,b.jsx)(q,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:e.toggleable,interval:e.interval,maxPurchasableQuantity:e.max_purchasable_quantity,unitSize:e.unit_size,priceCurrency:e.price_currency})},e.slug)})),(0,b.jsxs)("div",{className:"manage-add-ons__total",children:[(0,b.jsx)("div",{className:"manage-add-ons__total-label",children:(0,n.t)("settings.billing.add_ons.manage.total_purchase")}),(0,b.jsxs)("div",{className:"manage-add-ons__total-value",children:[(0,b.jsx)("b",{children:v()+c})," ",(0,n.t)("separator_slash")," ",h().charAt(0)]})]}),(0,b.jsx)("div",{className:"form-actions",children:(0,b.jsx)(d._,{type:"submit",variant:"primary",full:!0,submitting:o.isLoading,children:(0,n.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},W=new o.QueryClient,H=function(e){var t=e.onSuccess,r=e.refetchCurrentPlan,i=(0,l.p)(),c=(0,a.dd)(),u=function(){c.hide(),c.remove()};return(0,b.jsx)(o.QueryClientProvider,{client:W,children:(0,b.jsx)(E,{onSuccess:t,onCloseModal:u,refetchCurrentPlan:r,children:(0,b.jsxs)(s.u_,{isOpen:c.visible,onClose:u,className:"manage-add-ons__modal",title:(0,n.t)("settings.billing.add_ons.manage_addons"),children:[(0,b.jsx)(s.u_.Overlay,{}),(0,b.jsxs)(s.u_.Content,{size:"lg",children:[(0,b.jsx)(s.u_.Header,{children:(0,b.jsx)(s.u_.Title,{size:"sm",children:(0,n.t)("settings.billing.add_ons.manage_addons")})}),(0,b.jsx)(s.u_.Body,{children:(0,b.jsx)(G,{onAfterSubmit:function(){t&&(u(),i&&i.success((0,n.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},Q=a.gk.create((function(e){var t=e.onSuccess,r=e.refetchCurrentPlan;return(0,b.jsx)(H,{onSuccess:t,refetchCurrentPlan:r})})),J=function(){return(0,a.dd)(Q)}},10245:(e,t,r)=>{"use strict";r.d(t,{k:()=>p});var n=r(87561),i=r(14838),o=r(57637),a=r(11300),s=["page"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.t)(n.Ry()),r=t.page,l=d(t,s),u=Number(r)||1,p=c(c({status:o.MG},l),e),f={page:u,filter:p};"scheduled"===p.status&&(f.sort="scheduled_at");var m=(0,a.D)(f);return{posts:m.posts,postsCount:m.postsCount,isLoadingPosts:m.isLoadingPosts,filter:p,page:u}}},80371:(e,t,r)=>{"use strict";r.d(t,{L8:()=>d,V6:()=>p,hE:()=>f,Gg:()=>m});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(64666);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=20,p="segments",f="all",m=function(e){var t,r,i,l,u=e.perPage,m=void 0===u?d:u,b=e.initialPage,h=void 0===b?1:b,v=e.options,y=void 0===v?{}:v,g=[p,f,m,h],_=(0,a.useInfiniteQuery)(g,(function(e){var t=e.pageParam,r=void 0===t?h:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,per_page:m};return s.W.list({params:i})}),c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},y)),x=(0,n.useMemo)((function(){var e;return(null===(e=_.data)||void 0===e?void 0:e.pages)||[]}),[null===(t=_.data)||void 0===t?void 0:t.pages]),j=(null===(r=x[0])||void 0===r?void 0:r.per_page)||m,w=null!==(i=null===(l=x[0])||void 0===l?void 0:l.count)&&void 0!==i?i:0,O=(0,n.useMemo)((function(){return o()(x.map((function(e){return e.records})))}),[x]);return c(c({},_),{},{queryKey:g,segments:O,pageSize:j,pages:x,count:w})}},13502:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var n=r(94184),i=r.n(n),o=r(86013),a=r(36589),s=r(85893),l=function(e){var t=e.maxWidth,r=void 0===t?"md":t,n=e.className,l=e.children,c=(0,a.I)().isV3Enabled,u={md:"max-w-4xl",lg:"max-w-[1152px]",xl:"max-w-8xl",none:"max-w-none"}[r]||"";return(0,s.jsx)("main",{"aria-label":(0,o.t)("main_content"),className:i()("settings-app text-dark mx-auto p-4 lg:py-12",u,n,{"lg:px-6":!c,"lg:px-9":c}),children:l})}},59506:(e,t,r)=>{"use strict";r.d(t,{b:()=>b});var n=r(3004),i=r(90697),o=r(20354),a=r(4110),s=r(48976),l=r(84432),c=r(98338),u=r(68997),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){var t=e.pageTitle,r=e.layoutConfigProps,p=e.pageMetaProps,m=e.rightContent,b=e.leftContent,h=e.filters,v=e.headline,y=e.hasBorder,g=e.children,_=window.innerWidth<=768?".no-header":".header__inside",x=(0,c.wh)().currentCommunity,j=!(0,u.Aq)(x);return(0,a.$)(_),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.S,f({title:t},p)),(0,d.jsx)(o.y,f({disableRightSidebar:!1},r)),j&&(0,d.jsxs)(s.n,{children:[(0,d.jsx)(i.b,{leftContent:b||(0,d.jsx)(l.y,{children:t}),rightContent:m,filters:h,headline:v,hasBorder:y}),g]})]})}},65221:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var n=r(66007),i=r(86013),o=r(18605),a=r(45144),s=r(85893),l=function(){return(0,s.jsxs)(a.v,{className:"flex gap-x-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(o.JO,{type:"20-info",size:24,"aria-hidden":"true"})}),(0,s.jsx)(n.Z,{html:(0,i.t)("settings_sso_add_members_suggestion")})]})}},30534:(e,t,r)=>{"use strict";r.d(t,{a:()=>K,V:()=>J});var n=r(64687),i=r.n(n),o=r(67294),a=r(78387),s=r(31476),l=r(86013),c=r(87536),u=r(33106),d=r(30199),p=r(15117),f=r(76647),m=r(15242),b=r(87742),h=r(13288),v=r(67643),y=r(85893);function g(){return(0,m.u)().isLoading?(0,y.jsx)(h.a,{}):(0,y.jsx)("div",{className:"flex flex-col gap-y-6",children:(0,y.jsx)(v.h,{hideViewEmailModal:!0})})}var _=r(72584);function x(){var e=((0,b.B2)().action||{}).api_params,t=null===e||void 0===e?void 0:e.broadcast_id;return t?(0,y.jsx)(m.X,{id:Number(t),children:(0,y.jsx)(g,{})}):(0,y.jsx)(_.Z,{internalName:null===e||void 0===e?void 0:e.internal_name,subject:null===e||void 0===e?void 0:e.subject,inlinePreviewComponent:(0,y.jsx)(f.j,{})})}var j=r(97593),w=r(92617),O=r(84570),S=r(39013),P=r(37207),k=["id","children","onAddClick","onDeleteClick","hasBottomConnection","actionType","title","isApplicableToMembersOnly"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var E=function(e){var t=e.id,r=e.children,n=e.onAddClick,i=e.onDeleteClick,a=e.hasBottomConnection,s=void 0===a||a,u=e.actionType,p=e.title,f=e.isApplicableToMembersOnly,m=A(e,k),b=function(e,t){var r=(0,c.Gc)().formState.errors,n=(0,o.useMemo)((function(){return d.U0.reduce((function(e,t){var r=t||{},n=r.value,i=r.isCompactView,o=r.compactViewTitlePrefix;return e.set(n,{isCompactView:i,compactViewTitlePrefix:o}),e}),new Map)}),[]).get(e);return{compactViewTitle:null!==n&&void 0!==n&&n.isCompactView&&null!==n&&void 0!==n&&n.compactViewTitlePrefix?(0,y.jsxs)("div",{className:"flex gap-3",children:[n.compactViewTitlePrefix,(0,y.jsx)("span",{className:"text-base font-semibold",children:t})]}):void 0,isCompactView:(null===n||void 0===n?void 0:n.isCompactView)&&!!r}}(u,p),h=b.isCompactView,v=b.compactViewTitle;return(0,y.jsx)(P.F,N(N({id:t,title:p,description:(0,l.t)("settings.workflows.action"),isApplicableToMembersOnly:f,onAddNewConnection:n,hasBottomConnection:s,className:"m-auto",actions:[{label:(0,l.t)("settings.workflows.delete_step"),onClick:i}],isCompactView:h,compactViewTitle:v},m),{},{children:r}))},D=r(79748),T=r(48913),L=r(96486),M=r(74113),R=r(98338),B=r(77162),U=r(49429),F=r(8246);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=function(e){var t=e.index,r=void 0===t?0:t,n="actions.".concat(r,".action_type"),i="actions.".concat(r,".api_params"),a=(0,c.Gc)(),s=a.watch,u=a.setValue,p=a.clearErrors,f=a.resetField,m=z((0,o.useState)(!1),2),b=m[0],h=m[1],v=(0,o.useMemo)((function(){return d.U0.reduce((function(e,t){var r=t.value,n=t.formComponent;return e.set(r,n),e}),new Map)}),[]),g=s(n),_=v.get(g),x=(0,d.LK)().eligibleActions,j=(0,B.w)(),w=(0,R.wh)().currentCommunity,O=(void 0===w?{}:w).current_plan_tier;(0,o.useEffect)((function(){var e=d.U0.find((function(e){return e.value===g}));e&&k(e,O)&&P(g,e),h(!0)}),[g,O]);var S=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},P=function(e,t){"string"!==typeof t.label&&(t.label=(0,l.t)("settings.workflows.form.actions.".concat(e)))},k=function(e,t){return!e.eligiblePlanTiers||e.eligiblePlanTiers.includes(t)};return(0,y.jsxs)("div",{className:"mb-9 flex flex-col gap-9",children:[b&&(0,y.jsx)(U.N,{name:n,groupBy:function(e){return e.group},label:(0,y.jsx)(F.Z.LabelSm,{weight:"semibold",children:(0,l.t)("settings.workflows.form.choose_an_action")}),labelClassName:"!mb-2 !text-sm",rules:{required:(0,l.t)("settings.workflows.form.errors.required")},options:x,onChange:function(e){p(n),p(i),u(i,{});var t=d.U0.find((function(t){return t.value===e}));if(k(t,O))P(e,t);else{var r=t.eligiblePlanTiers[0];j.show({planTier:r,source:(0,M.yf)(),subheading:(0,l.t)("settings.workflows.view.actions.".concat(e,".plan_upgrade.subheader"),{planName:S(r)}),onSuccess:function(){j.hide()},successButtonLabel:(0,l.t)("settings.workflows.upgrade_modal.done"),usedForWorkflows:!0,showPlanDetails:!0}),(0,L.delay)((function(){f(n)}))}}}),_&&(0,y.jsx)(_,{})]})},Z=r(88157);function G(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){G(o,n,i,a,s,"next",e)}function s(e){G(o,n,i,a,s,"throw",e)}a(void 0)}))}}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=function(e){var t=e.actionType,r=e.apiParams,n=d.U0.find((function(e){return e.value===t}));return n&&"getActionTitle"in n?n.getActionTitle(r):(0,l.t)("settings.workflows.view.actions.".concat(t,".title"),{defaultValue:(0,l.t)("settings.workflows.form.add_an_action")})},K=function(e){var t=e.hasBottomConnection,r=void 0===t||t,n=e.onAddClick,l=e.onDeleteClick,f=(0,Z.o)(),m=f.isUpdatingAction,b=f.doesActionhasServerId,h=(0,D.B)(),v=h.index,g=h.action,_=h.path,P=(0,S.l)(_),k=P.isCompleted,C=P.hasError,N=P.statusMessage,I=P.revalidate,A=P.hasValue,L=(0,s.j)().result,M=(0,a.Lz)(),R=H((0,o.useState)(""),2),B=R[0],U=R[1],F=null===g||void 0===g?void 0:g.action_type,z=null===g||void 0===g?void 0:g.api_params,V=d.U0.find((function(e){return e.value===F})),G=(0,(0,c.Gc)().getValues)("trigger.trigger_type"),Q={webhook_test:{url:null===z||void 0===z?void 0:z.url,trigger_type:G}},K=(0,u.I)(g,I),$=K.isTestingWebhook,X=K.isWebhookTestSuccessful,Y=K.isWebhookTested,ee=K.isWebhookUrlChanged,te=K.testWebhookResult,re=K.handleTestWebhook,ne=(0,o.useCallback)((function(){U(J({actionType:F,apiParams:z}))}),[F,z]);(0,o.useEffect)((function(){ne()}),[ne]);var ie=function(){var e=W(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(g)&&L){e.next=4;break}return e.next=3,l(t);case 3:return e.abrupt("return");case 4:return e.next=6,M.show({onConfirm:function(){var e=W(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.hide(),l(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){M.hide()}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)(E,{id:(null===g||void 0===g?void 0:g.id)||v+1,actionType:F,hasBottomConnection:r,onAddClick:W(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:n(v);case 6:case"end":return e.stop()}}),e)}))),onDeleteClick:function(){ie(v)},hasError:C,hasSuccess:k,statusMessage:N,title:B,isApplicableToMembersOnly:null===V||void 0===V?void 0:V.isApplicableToMembersOnly,collapsedViewMetaComponent:F===p.Cz.value&&(0,y.jsx)(x,{}),children:[(0,y.jsx)(q,{index:v}),Y&&te&&(0,y.jsx)(O.j,{isWebhookTestSuccessful:X,webhookTestResult:te}),F!==j.l.value||X&&!ee?(0,y.jsx)(T.Z,{onSubmit:ne}):(0,y.jsx)(w.p,{handleTestWebhook:function(){return re(Q)},isDisabled:m||!A||$||!G||""===G,isTestingWebhook:$,isWebhookTestSuccessful:X,isWebhookUrlChanged:ee,isWebhookTested:Y,triggerType:G})]},g.id)}},79748:(e,t,r)=>{"use strict";r.d(t,{B:()=>a,t:()=>s});var n=r(67294),i=r(85893),o=(0,n.createContext)(null);o.displayName="CurrentActionContext";var a=function(){var e=(0,n.useContext)(o);if(!e)throw new Error("useCurrentAction must be used within a Action");return e},s=function(e){var t=e.action,r=e.index,n=void 0===r?0:r,a=e.children,s=e.isViewOnlyMode,l=void 0!==s&&s,c="actions.".concat(n),u="".concat(c,".api_params"),d=Boolean(null===t||void 0===t?void 0:t.id);return(0,i.jsx)(o.Provider,{value:{action:t,index:n,isSaved:d,paramsPath:u,path:c,isViewOnlyMode:l},children:a})}},48913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(64687),i=r.n(n),o=r(86013),a=r(20290),s=r(92321),l=r(15117),c=r(95312),u=r(39013),d=r(79748),p=r(88157),f=r(61150),m=r(73749),b=r(6379);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var v=function(e){var t,r,n=(0,m.r)(),o=n.areMarketingSettingsAvailable,a=n.isLoading,s=(0,f.Z)(),l=(0,b.q)(null!==(t=null===e||void 0===e||null===(r=e.api_params)||void 0===r?void 0:r.broadcast_id)&&void 0!==t?t:null).onUpsert,c=function(){var e,t=(e=i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.continueAction,!o){e.next=8;break}return e.next=4,l();case 4:return e.next=6,r();case 6:e.next=10;break;case 8:return e.next=10,s.show({onSuccess:function(){r()}});case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{handleEmailActionContinue:c,isLoadingMarketingSettings:a}},y=r(85893);function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))}}const x=function(e){var t,r=e.onSubmit,n=e.onSuccess,f=(0,a.h)(),m=(0,s.l)((function(e){return{setActionNodeUpdateParams:e.setActionNodeUpdateParams}})).setActionNodeUpdateParams,b=(0,p.o)(),h=b.saveActions,g=b.isSavingActions,x=(0,d.B)(),j=x.action,w=x.path,O=(0,u.l)(w),S=O.value,P=O.revalidate,k=O.hasValue,C=v(j),N=C.handleEmailActionContinue,I=C.isLoadingMarketingSettings,A=f?S.action_type:null===j||void 0===j?void 0:j.action_type;t=g?(0,o.t)("settings.workflows.form.saving"):f||k?(0,o.t)("settings.workflows.form.continue"):(0,o.t)("settings.workflows.form.fill_all_fields_to_continue");var E=A===l.Cz.value,D=g||!k||E&&I,T=function(){var e=_(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(m({nodeId:S.id,isUpdating:!0}),t=function(){var e=_(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:null===r||void 0===r||r();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!E){e.next=12;break}return e.next=10,N({continueAction:t});case 10:e.next=14;break;case 12:return e.next=14,t();case 14:m({nodeId:"",isUpdating:!1});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)(c.f,{disabled:D,onClick:T,children:t})}},30143:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n=r(86013),i=r(18605),o=r(85893),a=function(e){var t=e.label,r=e.showUpgradeButton;return(0,o.jsxs)("div",{className:"group relative flex items-center",children:[t,r&&(0,o.jsx)("div",{className:"absolute right-0 hidden group-hover:block",children:(0,o.jsxs)("span",{className:"text-default border-dark bg-primary inline-flex h-5 items-center gap-1 rounded-2xl border px-1.5 py-[3px] text-[0.6rem] font-medium",children:[(0,o.jsx)(i.JO,{type:"12-arrow-up",size:12,className:"!h-3 !w-3",useWithFillCurrentColor:!0,"aria-hidden":!0}),(0,n.t)("upgrade")]})})]})}},78387:(e,t,r)=>{"use strict";r.d(t,{Lz:()=>u});var n=r(86013),i=r(11049),o=r(44032),a=r(85893),s="settings.workflows.edit.confirm_delete_action_modal",l=function(e){var t=e.onConfirm,r=e.onCancel,l=e.disabled,c=void 0!==l&&l,u=(0,i.dd)();return(0,a.jsx)(o.c,{isOpen:u.visible,onClose:u.hide,confirmVariant:"danger",confirmText:(0,n.t)("".concat(s,".confirm_text")),title:(0,n.t)("".concat(s,".title")),cancelText:(0,n.t)("".concat(s,".cancel_text")),onConfirm:t,onCancel:r,disabled:c,children:(0,n.t)("".concat(s,".body"))})},c=i.gk.create((function(e){var t=e.onConfirm,r=e.onCancel,n=e.disabled,i=void 0!==n&&n;return(0,a.jsx)(l,{onConfirm:t,onCancel:r,disabled:i})})),u=function(){return(0,i.dd)(c)}},87742:(e,t,r)=>{"use strict";r.d(t,{Es:()=>f,ol:()=>u.o,B2:()=>c.B});var n=r(64687),i=r.n(n),o=r(67294),a=r(5182),s=r(31372),l=r(30534),c=r(79748),u=r(88157),d=r(85893);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var f=function(){var e=(0,u.o)(),t=e.itemsIds,r=e.formActions,n=e.isFirstRender,f=e.addActionAfterPosition,m=e.removeActionAtPosition,b=(0,a.Z)().manageMemberQueryParams,h=(0,s.d)().setActiveItemId;return(0,o.useEffect)((function(){null!==b&&void 0!==b&&b.queryParams&&!n&&h(t.at(-1).id)}),[n]),(0,d.jsx)(d.Fragment,{children:r.map((function(e,t){return(0,d.jsx)(c.t,{action:e,index:t,children:(0,d.jsx)(l.a,{onAddClick:function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({index:t});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onDeleteClick:m,hasBottomConnection:t!==r.length-1})},e.id)}))})}},88157:(e,t,r)=>{"use strict";r.d(t,{a:()=>Z,o:()=>G});var n=r(64687),i=r.n(n),o=r(67294),a=r(82332),s=r(80041),l=r(87536),c=r(88767),u=r(34334);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,l.Gc)().watch)("id"),r=(0,c.useQueryClient)();return(0,c.useMutation)((function(e){return function(e,t){return u.nH.deleteAction({workflowId:e,id:t})}(t,e)}),p(p({},e),{},{onSuccess:function(n,i,o){var a;r.invalidateQueries(["workflows",t]),null===(a=e.onSuccess)||void 0===a||a.call(e,n,i,o)}}))},b=r(23996),h=r(53885),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,l.Gc)().watch)("id");return(0,c.useMutation)((function(e){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){var t={action_type:e.action_type,api_params:e.api_params};return e.id&&!e.id.startsWith("action")&&(t.id=e.id),t}));return u.nH.upsertActions({workflowId:e,body:{actions:t}})}(t,e)}),e)},y=r(86013),g=r(96486),_=r(23560),x=r.n(_),j=r(95390),w=r(20758),O=r(74113),S=r(98338),P=r(31372),k=r(77162),C=r(69647),N=r(61284),I=r(20866),A=r(23921);function E(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T={id:"0"};function L(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){M(o,n,i,a,s,"next",e)}function s(e){M(o,n,i,a,s,"throw",e)}a(void 0)}))}}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z="actions",G=function(){var e=z((0,o.useState)(!0),2),t=e[0],r=e[1],n=(0,P.d)(),c=n.onCloseItemAndOpenNext,u=n.setActiveItemId,d=(0,C.p)(),p=(0,a.hp)(),f=(0,l.Gc)(),_=f.watch,D=f.setError,M=f.trigger,B=f.setValue,F=f.resetField,V=f.formState,q=function(){var e=(0,(0,l.Gc)().watch)(Z,[]).map((function(e,t){return{id:(null===e||void 0===e?void 0:e.id)||t+1}}));return{itemsIds:[T].concat(E(e)),actionsIds:e}}(),G=q.actionsIds,W=q.itemsIds,H=V.dirtyFields,Q=V.touchedFields,J=V.defaultValues,K=_(Z,[]),$=K.length>0,X=Object.keys(V.errors).length>0,Y=(0,l.Dq)({name:Z}),ee=Y.remove,te=Y.replace,re=(0,s.D)(),ne=re.status,ie=re.id,oe=(0,b.m)({workflowId:ie}).refetch,ae=(0,S.wh)().currentCommunity.current_plan_tier,se=(0,k.w)(),le=(0,S.wh)().refetch;(0,o.useEffect)((function(){t&&!$&&(r(!1),te(null===J||void 0===J?void 0:J.actions))}),[null===J||void 0===J?void 0:J.actions,$,t,te]);var ce=m(),ue=ce.mutate,de=ce.isLoading,pe=(0,h.H)(),fe=pe.mutateAsync,me=pe.isLoading,be=pe.isError,he=function(){var e=R(i().mark((function e(){var t,r,n=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>1?n[1]:void 0,r=(n.length>0&&void 0!==n[0]?n[0]:[]).map((function(e){return(0,g.omit)(e,"errors")})),te(r),F(Z,{defaultValue:r}),x()(t)?t():c(),e.prev=6,e.next=9,oe();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),ve=function(e){var t,r;return((null===e||void 0===e||null===(t=e.body)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.actions)||[]).forEach((function(e,t){for(var r in e)D("".concat(Z,"[").concat(t,"].").concat(r),{type:"server",message:e[r]})})),(0,j.h)(e)||(0,j.w)(e)?function(e){var t;se.show(U(U({},(0,j.h)(e)&&{planTier:(0,w.gq)(ae)}),{},{subheading:e.body.message,isMarketingHubRequired:(0,j.w)(e),source:(0,O.yf)(),onSuccess:(t=R(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),successButtonLabel:(0,y.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0}))}(e):d.error(e.message)},ye=v({onSuccess:he,onError:ve}),ge=ye.mutateAsync,_e=ye.isLoading,xe=ye.isError,je=function(e,t){var r;te(e),F(Z,{defaultValue:e});var n=null===(r=e[t])||void 0===r?void 0:r.id;u(n)},we=function(){var e=R(i().mark((function e(t){var r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.index,n=(0,N.Ep)(),o=_(Z,[]),a=[].concat(L(o.slice(0,r+1)),[n],L(o.slice(r+1))),je(a,r+1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e){return(0,g.isString)(null===e||void 0===e?void 0:e.id)&&!e.id.startsWith("action")},Se=function(){var e=R(i().mark((function e(t){var r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=_(Z,[]),n=r[t],o=Oe(n),ee(t),a=_(Z,[]),F(Z,{defaultValue:a}),o){e.next=9;break}return e.abrupt("return");case 9:if(ue(n.id),0!==a.length||ne!==N.qN.ACTIVE){e.next=16;break}return B("status",N.qN.INACTIVE),e.next=14,oe();case 14:return e.next=16,p.show({i18nBase:"settings.workflows.edit.incomplete_workflow_no_actions_modal",onAction:function(){p.hide()}});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0),d.error(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),Pe=K.some((function(e,t){var r="".concat(Z,"[").concat(t,"]"),n=(0,g.get)(H,r,null);return(0,A.p)(n)})),ke=K.some((function(e,t){var r="".concat(Z,"[").concat(t,"]"),n=(0,g.get)(Q,r,null);return(0,A.p)(n)})),Ce=K.every((function(e){return(0,I.a)(e)})),Ne=K.every((function(e){return(0,g.isString)(null===e||void 0===e?void 0:e.id)&&!e.id.startsWith("action")})),Ie=Ce&&!Pe&&Ne,Ae=function(){var e=R(i().mark((function e(){var t,r,n,o,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:g.noop,e.next=3,M(Z);case 3:if(r=e.sent,Ce){e.next=7;break}return K.forEach((function(e,t){(0,I.a)(e)||D("actions[".concat(t,"]"),{type:"manual",message:(0,y.t)("settings.workflows.form.step_incomplete")})})),e.abrupt("return");case 7:if(r&&Ce){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,n=_(Z)||[],e.next=13,ge(n);case 13:o=e.sent,he(o,t),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),ve(e.t0);case 20:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=R(i().mark((function e(t){var r,n,o,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.action,o=t.skipOpenNext,a=void 0!==o&&o,e.prev=1,e.next=4,fe(n);case 4:s=e.sent,B(r,s),F(r,{defaultValue:s}),a?u(s.id):c(),oe(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return{actionsIds:G,isFirstRender:t,addActionAfterPosition:we,addActionAtStart:function(){var e=(0,N.Ep)(),t=_(Z,[]),r=[e].concat(L(t));je(r,0)},formActions:K,hasActions:$,hasErrors:X,isActionError:be,doesActionhasServerId:Oe,isActionsError:xe,isSavingActions:_e,isUpdatingAction:me,itemsIds:W,isActionDeleting:de,removeActionAtPosition:Se,saveAction:Ee,saveActions:Ae,areAllActionsFilled:Ce,areSomeActionsDirty:Pe,areSomeActionsTouched:ke,areAllActionsWithServerIds:Ne,areAllActionsSaved:Ie}}},23481:(e,t,r)=>{"use strict";r.d(t,{P:()=>s});var n=r(94184),i=r.n(n),o=r(85893),a=r(8246),s=Object.assign((function(e){var t=e.className,r=e.children;return(0,o.jsx)("div",{className:i()("flex flex-col gap-6",t),children:r})}),{Section:function(e){var t=e.className,r=e.children;return(0,o.jsx)("div",{className:i()("flex flex-col gap-2",t),children:r})},Title:function(e){var t=e.children;return(0,o.jsx)("div",{children:(0,o.jsx)(a.Z.LabelSm,{weight:"semibold",children:t})})}})},45512:(e,t,r)=>{"use strict";r.d(t,{t:()=>x,I:()=>j});var n=r(86013),i=r(18605),o=r(67294),a=r(87536),s=r(9495),l=r(61284),c=r(28524),u=r(67687),d=r(45144),p=r(8246),f=r(49429),m=r(87742),b=r(85893),h="settings.workflows.form.time_delay",v=[{value:"hours",label:(0,n.t)([h,"time_unit_options.hours_label"]),rules:{minValue:1,maxValue:999}},{value:"days",label:(0,n.t)([h,"time_unit_options.days_label"]),rules:{minValue:1,maxValue:365}},{value:"weeks",label:(0,n.t)([h,"time_unit_options.weeks_label"]),rules:{minValue:1,maxValue:52}}],y=r(36298),g=function(e,t){var r=t.time_unit,n=x[r]||1,i=t.time_unit_amount*n;return(0,y.w)({dateTime:new Date(new Date(e).getTime()+1e3*i),format:"short_date_at_short_time"})},_={cancelled:{time:function(e){return(0,b.jsx)(p.Z.LabelSm,{children:(0,y.w)({dateTime:new Date(null===e||void 0===e?void 0:e.updated_at),format:"short_date_at_short_time"})})},title:(0,b.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,n.t)("settings.workflows.view.actions.time_delay.cancelled")}),statusTitle:(0,b.jsx)(p.Z.LabelSm,{weight:"medium",color:"text-v2-danger",children:(0,n.t)("settings.workflows.table.result.cancelled")})},in_progress:{time:function(e,t){return(0,b.jsx)(p.Z.LabelSm,{children:(0,b.jsx)("i",{children:g(null===e||void 0===e?void 0:e.created_at,t)})})},title:(0,b.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,b.jsx)("i",{children:(0,n.t)("settings.workflows.view.actions.time_delay.expected_end")})}),statusTitle:(0,b.jsx)(p.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,n.t)("settings.workflows.table.result.in_progress")})},success:{time:function(e){return(0,b.jsx)(p.Z.LabelSm,{children:(0,y.w)({dateTime:new Date(e.updated_at),format:"short_date_at_short_time"})})},title:(0,b.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,n.t)("settings.workflows.view.actions.time_delay.ended")}),statusTitle:(0,b.jsx)(p.Z.LabelSm,{color:"text-v2-success",children:(0,n.t)("settings.workflows.table.result.success")})}},x={hours:3600,days:86400,weeks:604800},j={label:(0,n.t)("settings.workflows.form.actions.time_delay"),value:"time_delay",group:(0,n.t)("settings.workflows.form.action_groups.flow"),leftAddon:(0,b.jsx)(i.JO,{type:"16-workflow-time-delay",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t,r=(0,m.B2)(),y=r.paramsPath,g=r.action,_=(0,m.ol)().doesActionhasServerId,x=(0,a.Gc)(),j=x.watch,w=x.setValue,O=x.clearErrors,S=x.trigger,P=(0,c.wh)().currentCommunitySettings,k=(0,(0,a.Gc)().getValues)("status")===l.qN.DRAFT,C=j("".concat(y,".time_unit")),N=null!==(e=null===(t=v.find((function(e){return e.value===C})))||void 0===t?void 0:t.rules)&&void 0!==e?e:{minValue:1,maxValue:999},I=N.minValue,A=N.maxValue;return(0,o.useEffect)((function(){C||(w("".concat(y,".time_unit_amount"),1),w("".concat(y,".time_unit"),"days",{shouldValidate:!0}))}),[y,w,C]),(0,o.useEffect)((function(){O("".concat(y,".time_unit_amount")),S("".concat(y,".time_unit_amount"))}),[C,O,y,S]),!(null!==P&&void 0!==P&&P.edit_time_delays_enabled)&&_(g)&&!k?(0,b.jsx)(d.v,{className:"flex justify-between !py-3",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i.JO,{className:"mr-3",type:"20-info",size:20}),(0,b.jsx)(p.Z.LabelSm,{children:(0,n.t)([h,"cannot_edit_time_delay"])})]})}):(0,b.jsxs)("div",{className:"react-form",children:[(0,b.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,n.t)([h,"time_unit_amount"])}),(0,b.jsxs)("div",{className:"mt-2 flex flex-row gap-5",children:[(0,b.jsx)("div",{className:"flex flex-1",children:(0,b.jsx)(s.x,{className:"w-full !p-0",name:"".concat(y,".time_unit_amount"),hideLabel:!0,placeholder:(0,n.t)([h,"time_unit_amount_placeholder"]),translationRoot:h,hideDescription:!0,rules:{required:(0,n.t)([h,"errors.time_unit_amount.required"]),min:{value:I,message:(0,n.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:I,end:A})},max:{value:A,message:(0,n.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:I,end:A})}},children:(0,b.jsx)(u.l.Input,{type:"number",name:"".concat(y,".time_unit_amount"),"data-testid":"time_unit_amount"})})}),(0,b.jsx)("div",{className:"flex flex-1",children:(0,b.jsx)(f.N,{wrapperClassName:"w-full",name:"".concat(y,".time_unit"),label:"",options:v,rules:{required:(0,n.t)([h,"errors.time_unit.required"])}})})]})]})},viewComponent:function(e){var t,r=(e.action||{}).api_params;return(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsxs)("div",{className:"border-dark flex h-[60px] w-[360px] justify-center gap-3 rounded-xl border px-5 py-[18px]",children:[(0,b.jsx)(i.JO,{type:"20-time-delay",size:20,useWithFillCurrentColor:!0,"aria-hidden":!0}),(0,b.jsx)(p.Z.LabelMd,{weight:"semibold",children:null===(t=j.getActionTitle)||void 0===t?void 0:t.call(j,r)})]})})},isCompactView:!0,compactViewTitlePrefix:(0,b.jsx)(i.JO,{type:"24-workflow-time-delay",size:24,className:"!h-5 !w-5"}),historyDetailViewComponent:function(e){var t,r=e.apiParams,i=e.log,o=e.status,a=i.message.status===l.bI.IN_PROGRESS&&o===l.bI.IN_PROGRESS?l.bI.IN_PROGRESS:i.message.status===l.bI.SUCCESS?l.bI.SUCCESS:(null===i||void 0===i?void 0:i.created_at)===(null===i||void 0===i?void 0:i.updated_at)&&"task_action_completed"===(null===i||void 0===i?void 0:i.action)||"cancelled"===i.message.status?"cancelled":"in_progress",s=_[a],c=(0,y.w)({dateTime:new Date(i.created_at),format:"short_date_at_short_time"});return(0,b.jsxs)("div",{className:"flex flex-col rounded-lg",children:[(0,b.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-1 rounded-t-lg border-b px-6 py-5",children:[(0,b.jsx)(p.Z.LabelMd,{weight:"semibold",children:"".concat((0,n.t)("settings.workflows.view.actions.time_delay.delay")," ").concat(null===(t=j.getActionTitle)||void 0===t?void 0:t.call(j,r))}),s.statusTitle]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 px-6 py-5",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Z.LabelSm,{weight:"medium",children:(0,n.t)("settings.workflows.view.actions.time_delay.started")}),(0,b.jsx)(p.Z.LabelSm,{children:c})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[s.title,(0,b.jsx)(p.Z.LabelSm,{children:s.time(i,r)})]})]})]})},getActionTitle:function(e){var t=e.time_unit_amount,r=e.time_unit;return t&&r?(0,n.t)("settings.workflows.view.actions.time_delay.title_with_units",{time_unit_amount:t,time_unit:(0,n.t)("settings.workflows.view.actions.time_delay.options.".concat(r),{count:Number(t)})}):(0,n.t)("settings.workflows.view.actions.time_delay.title")},icon:"clock",isCompactHistoryView:!0,isApplicableToMembersOnly:!1}},64842:(e,t,r)=>{"use strict";r.d(t,{s:()=>m});var n=r(86013),i=r(9495),o=r(87742),a=r(67687),s=r(85893),l="settings.workflows.form.award_points",c=r(8246),u=r(23481),d="settings.workflows.view",p=r(75357),f=r(18605),m={label:(0,n.t)("settings.workflows.form.actions.award_points"),value:"award_points",group:(0,n.t)("settings.workflows.form.action_groups.gamification"),leftAddon:(0,s.jsx)(f.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,o.B2)().paramsPath;return(0,s.jsxs)("div",{children:[(0,s.jsx)(i.x,{name:"".concat(e,".points"),hideDescription:!0,label:(0,n.t)([l,"points.label"]),placeholder:(0,n.t)([l,"points.placeholder"]),translationRoot:l,rules:{required:(0,n.t)([l,"errors.points.required"]),min:{value:1,message:(0,n.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})},max:{value:500,message:(0,n.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})}},children:(0,s.jsx)(a.l.Input,{type:"number",name:"".concat(e,".points"),"data-testid":"points"})}),(0,s.jsx)(i.x,{name:"".concat(e,".reason"),label:(0,n.t)([l,"reason.label"]),hideDescription:!0,placeholder:(0,n.t)([l,"reason.placeholder"]),translationRoot:l,rules:{maxLength:{value:255,message:(0,n.t)([l,"errors.reason.max_length"])}},children:(0,s.jsx)(a.l.Input,{type:"text",name:"".concat(e,".reason"),"data-testid":"reason"})})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.points,i=t.reason;return(0,s.jsxs)(u.P,{children:[(0,s.jsxs)(u.P.Section,{children:[(0,s.jsx)(u.P.Title,{children:(0,n.t)([d,"points"])}),(0,s.jsx)("div",{children:(0,s.jsx)(c.Z.LabelSm,{children:r})})]}),i&&(0,s.jsxs)(u.P.Section,{children:[(0,s.jsx)(u.P.Title,{children:(0,n.t)([d,"reason"])}),(0,s.jsx)("div",{children:(0,s.jsx)(c.Z.LabelSm,{children:i})})]})]})},historyDetailViewComponent:function(e){var t=e.points;return(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"md:flex",children:[(0,s.jsx)("div",{className:"w-1/4",children:(0,s.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.award_points.points")})}),(0,s.jsx)("div",{className:"w-3/4",children:(0,s.jsx)(c.Z.LabelSm,{weight:"semibold",children:t})})]})})},icon:"user",isApplicableToMembersOnly:!0,released:p.S}},15117:(e,t,r)=>{"use strict";r.d(t,{KY:()=>ge,TQ:()=>ye,Ah:()=>me,MK:()=>fe,Cz:()=>Ye,zW:()=>ve});var n,i=r(86013),o=r(18605),a=r(67294),s=r(87536),l=r(98338),c=r(67687),u=r(87742),d=r(80041),p=r(78354),f=r(42020),m=r(81786),b=r(13288),h=r(8246),v=r(88767),y=r(34334),g=r(90404),_=r(44677),x=r(50701),j=r(81595),w=r(88059),O=r(44577),S=r(94141),P=r(43500),k=r(84837),C=r(95934),N=r(57295),I=r(20567);function A(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T="event",L="space",M="space_group",R="member_tag",B="post",U=["paywall","paywall_price","currency"],F=(D(n={},_.Zo.value,[T]),D(n,_.PJ.value,[T]),D(n,_.OC.value,[T]),D(n,N.G.value,[T]),D(n,_.BP.value,[T]),D(n,_.Q4.value,[T]),D(n,C.aD.value,[L]),D(n,C.D1.value,[L]),D(n,g.ey.value,[L]),D(n,g.ES.value,[L]),D(n,g.dP.value,[L]),D(n,I._.value,[M]),D(n,I.d.value,[M]),D(n,x.m.value,[R]),D(n,x.E.value,[R]),D(n,k.dO.value,[B]),D(n,k.fT.value,[B]),D(n,k.Qw.value,["comment"]),D(n,w.u.value,U),D(n,O.H.value,U),D(n,S.j.value,U),D(n,P.j.value,U),D(n,j.x.value,U),n),z=r(41255),V=r(11049),q=r(66422),Z=r(64422),G=r(82177),W=r(85893),H=function(e){var t=e.children,r=(0,V.dd)();return(0,W.jsxs)(G.u_,{title:(0,i.t)("settings.workflows.form.preview_message.modal_title"),isOpen:r.visible,onClose:r.hide,contentPortalId:"",children:[(0,W.jsx)(G.u_.Overlay,{}),(0,W.jsxs)(G.u_.Content,{size:"lg",children:[(0,W.jsxs)(G.u_.Header,{children:[(0,W.jsx)(G.u_.Title,{className:"text-left",children:(0,i.t)("settings.workflows.form.preview_message.modal_title")}),(0,W.jsx)(G.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,W.jsx)(G.u_.CloseButton,{onClick:r.hide})})]}),(0,W.jsxs)(G.u_.Body,{className:"pt-0",children:[(0,W.jsx)("p",{className:"text-default mb-6 text-sm",children:(0,i.t)("settings.workflows.form.preview_message.modal_description")}),(0,W.jsx)("div",{className:"border-primary mb-6 flex rounded border px-4 py-6",children:t})]})]})]})},Q=r(96486),J=r(50732);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=function(e){var t=e.body,r=e.communityMemberId,n=e.resourceAttributes,o=e.localSgidToObjectMap,a=void 0===o?{}:o,s=function(e){var t=e.communityMemberId,r=e.body,n=e.resourceAttributes,i=(0,v.useQuery)(["workflows-fetch-interpolated-preview-message",t,r,n],(function(){return y.nH.fetchInterpolatedPreviewMessage({body:{rich_text_body:r,mappings:n}})}),{enabled:!(0,Q.isEmpty)(n)}),o=i.data,a=(o=void 0===o?{}:o).interpolated_body,s=void 0===a?{}:a,l=i.isLoading,c=(0,v.useQuery)(J.av.communityMembers.show({id:t}),{enabled:!!t}),u=c.data;return{isLoadingPreviewMessageBody:l,isLoadingCommunityMember:c.isLoading,interpolatedBody:s,communityMember:u}}({body:t,communityMemberId:r,resourceAttributes:n}),l=s.interpolatedBody,c=s.isLoadingCommunityMember,u=s.isLoadingPreviewMessageBody,d=s.communityMember;if(c||u||!d)return(0,W.jsx)(H,{children:(0,W.jsx)(b.a,{})});var p=d.name,f=d.avatar_url;return(0,W.jsxs)(H,{children:[(0,W.jsx)("div",{className:"px-2",children:(0,W.jsx)(Z.s,{size:"10",src:f,name:p})}),Object.keys(l).length>0&&(0,W.jsxs)("div",{className:"max-w-[calc(100%-3rem)] px-2",children:[(0,W.jsxs)("div",{className:"mb-2 flex items-center gap-x-2",children:[(0,W.jsx)(h.Z.LabelMd,{weight:"semibold",children:p}),(0,W.jsx)(h.Z.LabelXs,{color:"text-light",weight:"medium",children:(0,i.t)("settings.workflows.form.preview_message.placeholder_time")})]}),(0,W.jsx)(q.T,{rich_text_body:{body:l,sgids_to_object_map:a},editable:!1})]})]})},Y=V.gk.create((function(e){return(0,W.jsx)(X,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),ee=r(81089),te=r(76748),re=function e(t,r){return Object.values(t||{}).some((function(t){return"object"===typeof t?Array.isArray(t)?t.some((function(t){return e(t,r)})):e(t,r):"string"===typeof t&&r.test(t)}))},ne=function(){var e=(0,s.Gc)(),t=e.watch,r=e.getValues,n=(0,u.B2)().paramsPath,i=(0,V.dd)(Y),o=(0,z.Z)(),a=r("trigger.trigger_type"),l=function(e){var t=e.triggerType,r=e.shouldSupportTriggerVariables,n=["dynamic_variables",t];return(0,v.useQuery)(n,(function(){return(0,ee.UT)(te.v.fetchDynamicVariables({params:{trigger_type:t,support_trigger_variables:r}}))}))}({triggerType:a,shouldSupportTriggerVariables:o}),c=l.data,d=(c=void 0===c?{}:c).supported_variables,p=void 0===d?[]:d,f=l.isLoading,m=t("".concat(n,".rich_text_body")),b=function(e){var t=e.triggerType,r=[].concat(["community_member","community"],A(F[t]||"")).filter(Boolean);return(0,v.useQuery)(["workflows-fetch-preview-attributes",t],(function(){return y.nH.fetchPreviewAttributes({params:{resource_names:r}})}))}({triggerType:a}),h=b.data,g=b.isSuccess,_=re(m||{},/{{[^{}]+}}/g)&&g;return{paramsPath:n,triggerType:a,dynamicVariables:p,isLoadingDynamicVariables:f,shouldShowPreviewDmButton:_,handlePreviewDmClick:function(){i.show({body:r("".concat(n,".rich_text_body")).body,communityMemberId:r("".concat(n,".from")),localSgidToObjectMap:r("".concat(n,".rich_text_body")).localSgidToObjectMap,resourceAttributes:h})}}},ie=function(){var e=(0,u.B2)().isViewOnlyMode,t=ne(),r=t.paramsPath,n=t.triggerType,o=t.isLoadingDynamicVariables,a=t.dynamicVariables,s=t.shouldShowPreviewDmButton,l=t.handlePreviewDmClick;return o?(0,W.jsx)(b.a,{}):(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.message_body")}),(0,W.jsx)(p._,{placeholder:(0,i.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(r,".rich_text_body"),submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",menuBarComponent:f.D,menubarProps:{dynamicVariables:a},type:"workflow",disabled:e},n),s&&(0,W.jsx)(m.z,{variant:"circle-plain",type:"button",className:"max-w-fit !px-2",onClick:l,children:(0,i.t)("settings.workflows.form.preview_message.button_label")})]})};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le=function(e,t){var r=(0,s.Gc)(),n=r.getValues,i=r.setValue;(0,a.useEffect)((function(){n(e)||i(e,t)}),[e,i,n,t])},ce=r(51168),ue=r(87436),de=r(23481),pe="settings.workflows.view",fe={label:(0,i.t)("settings.workflows.form.actions.send_dm"),value:"send_dm",group:(0,i.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,W.jsx)(o.JO,{type:"16-messages",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,u.B2)().paramsPath,t=(0,s.Gc)().register,r=(0,d.D)().isBulkAction,n=(0,l.N3)().id,o=r?void 0:"initiator";return le("".concat(e,".from"),n),le("".concat(e,".to"),o),(0,W.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,W.jsx)(c.l.Item,{name:"".concat(e,".from"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.from"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,W.jsx)(c.l.CommunityMemberSelect,{defaultValue:n,name:"".concat(e,".from"),filters:{role:"admin_or_moderator",messaging_enabled:!0}})}),(0,W.jsx)("div",{className:"hidden",children:(0,W.jsx)("input",ae({type:"hidden"},t("".concat(e,".to"))))}),(0,W.jsx)(ie,{})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.from,n=t.rich_text_body;return r&&n?(0,W.jsxs)(de.P,{children:[(0,W.jsxs)(de.P.Section,{children:[(0,W.jsx)(de.P.Title,{children:(0,i.t)([pe,"from"])}),(0,W.jsx)("div",{children:(0,W.jsx)(ce.q,{communityMemberId:r})})]}),(0,W.jsxs)(de.P.Section,{children:[(0,W.jsx)(de.P.Title,{children:(0,i.t)([pe,"to"])}),(0,W.jsx)("div",{children:(0,W.jsx)(ue.C,{icon:(0,W.jsx)(o.JO,{type:"12-lightning",size:12,className:"!text-default !h-3 !w-3"}),text:(0,i.t)("settings.workflows.view.initiator")})})]}),(0,W.jsxs)(de.P.Section,{children:[(0,W.jsx)(de.P.Title,{children:(0,i.t)([pe,"message_body"])}),(0,W.jsx)("div",{className:"text-default text-sm",children:(0,W.jsx)(q.T,{type:"workflow",rich_text_body:{body:n.body,sgids_to_object_map:n.localSgidToObjectMap},editable:!1},(0,Q.uniqueId)("tiptap_"))})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.executor_member_id,n=t.receiver_member_id,o=t.rich_text_body;return(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_dm.from")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(ce.q,{communityMemberId:r})})]}),(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_dm.to")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(ce.q,{communityMemberId:n})})]}),(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_dm.message")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(q.T,{editable:!1,rich_text_body:o,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"chat",isApplicableToMembersOnly:!0},me={label:(0,i.t)("settings.workflows.form.actions.remove_community_member_from_community"),value:"remove_community_member_from_community",group:(0,i.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,W.jsx)(o.JO,{type:"16-workflow-user-remove-outline",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.url,r=new URL(t).pathname.split("/").pop();return(0,W.jsx)("div",{className:"flex flex-col gap-2",children:(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(ce.q,{communityMemberId:r})})]})})},icon:"user-remove",isApplicableToMembersOnly:!0},be=r(4079),he="settings.workflows.view",ve={label:(0,i.t)("settings.workflows.form.actions.send_notification_to_member"),value:"send_notification_to_member",group:(0,i.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,W.jsx)(o.JO,{type:"16-mobile",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,u.B2)(),t=e.paramsPath,r=e.isViewOnlyMode,n=(0,l.wh)().currentCommunity.root_url,o=(0,s.Gc)(),d=o.getValues,f=o.setValue,m=d("".concat(t,".path"));(0,a.useEffect)((function(){if(m)if(m.match(/^\//)){var e=m.replace(/^\//,"");f("".concat(t,".path"),e)}else{var r=m.split("://");if(!(r.length<=1)){var n=r[1].split("/");if(n.length<=1)f("".concat(t,".path"),"");else{var i=n.slice(1).join("/");f("".concat(t,".path"),i)}}}}),[m]);var b="".concat(n,"/");return(0,W.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,W.jsx)(c.l.Item,{name:"".concat(t,".path"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.path.placeholder"),rules:{pattern:{value:be.i4,message:(0,i.t)("settings.workflows.form.path.error")}},children:(0,W.jsx)(c.l.Input,{prefix:(0,W.jsx)("div",{className:"whitespace-nowrap pl-4 pr-2",children:(0,W.jsx)(h.Z.LabelMd,{children:b})})})}),(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.message_body")}),(0,W.jsx)(p._,{placeholder:(0,i.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(t,".message"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",maxLength:150,disabled:r,type:"workflow"})]})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.path,n=t.message,o=(0,l.wh)().currentCommunity.root_url;return n?(0,W.jsxs)(de.P,{children:[r&&(0,W.jsxs)(de.P.Section,{children:[(0,W.jsx)(de.P.Title,{children:(0,i.t)([he,"path"])}),(0,W.jsx)("div",{children:(0,W.jsx)(h.Z.LabelSm,{children:"https://".concat(o,"/").concat(r)})})]}),(0,W.jsxs)(de.P.Section,{children:[(0,W.jsx)(de.P.Title,{children:(0,i.t)([he,"message_body"])}),(0,W.jsx)("div",{className:"text-default text-sm",children:(0,W.jsx)(q.T,{rich_text_body:n,editable:!1},(0,Q.uniqueId)("tiptap_"))})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.path,n=t.message,o=(0,l.wh)().currentCommunity.root_url;return(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_notification_to_member.path")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(h.Z.LabelSm,{children:"https://".concat(o,"/").concat(r)})})]}),(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_notification_to_member.message")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(q.T,{editable:!1,rich_text_body:n,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"notification",isApplicableToMembersOnly:!0},ye={label:(0,i.t)("settings.workflows.form.actions.enable_messaging_on_member"),value:"enable_messaging_on_member",group:(0,i.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,W.jsx)(o.JO,{type:"16-enable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.body.community_member_id;return(0,W.jsx)("div",{className:"flex flex-col gap-2",children:(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(ce.q,{communityMemberId:t})})]})})},icon:"chat",isApplicableToMembersOnly:!0},ge={label:(0,i.t)("settings.workflows.form.actions.disable_messaging_on_member"),value:"disable_messaging_on_member",group:(0,i.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,W.jsx)(o.JO,{type:"16-disable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.url,r=new URL(t).pathname.split("/").pop();return(0,W.jsx)("div",{className:"flex flex-col gap-2",children:(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,W.jsx)("div",{className:"w-3/4",children:(0,W.jsx)(ce.q,{communityMemberId:r})})]})})},icon:"chat",isApplicableToMembersOnly:!0},_e=r(53620),xe=r(89514),je=r(42991),we=r(15242),Oe=r(61935),Se=r(37329),Pe=r(64687),ke=r.n(Pe),Ce=r(24185),Ne=r(38776),Ie=r(51769),Ae=r(20290),Ee=r(77022),De=r(4404),Te=r(78296),Le=r(39013),Me=r(6379);function Re(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Be(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Re(o,n,i,a,s,"next",e)}function s(e){Re(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Ue="settings.workflows.form";function Fe(){var e=(0,Ae.h)(),t=(0,s.Gc)(),r=t.watch,n=t.setValue,i=(0,u.B2)().paramsPath,o=(0,Ce.k6)(),l=(0,Ie.F)(),c=l.handleTestEmail,d=l.isSending,p=r("".concat(i,".email_content")),f=r("".concat(i,".broadcast_id")),b=(0,Me.q)(f?Number(f):null).onUpsert,v=(0,u.ol)(),y=v.doesActionhasServerId,g=v.saveAction,_=(0,u.B2)(),x=_.action,j=_.path,w=(0,Le.l)(j).value,O=(0,Ce.$B)().url;(0,a.useEffect)((function(){var t=function(){var t=Be(ke().mark((function t(){var r,o,a;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(y(x)&&p&&!f)){t.next=11;break}return t.next=4,b();case 4:return r=t.sent,o=null===r||void 0===r?void 0:r.id,(0,Ne.Z)(o,"Broadcast ID is required to start writing email"),a=e?w:x,n("".concat(i,".broadcast_id"),o),t.next=11,g({path:j,action:a,skipOpenNext:!0});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var S=function(){var e=Be(ke().mark((function e(){var t,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,r=null===t||void 0===t?void 0:t.id,(0,Ne.Z)(r,"Broadcast ID is required to start writing email"),n("".concat(i,".broadcast_id"),r),o.push((0,Te.d)({path:O.replace(/\/$/,""),broadcastId:r}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e?(0,W.jsxs)("div",{className:"w-full space-y-4",children:[(0,W.jsxs)("div",{className:"flex justify-between",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",color:"text-very-dark",children:(0,je.t)([Ue,"email_content"])}),(0,W.jsx)(h.Z.LabelXs,{color:"text-default",children:(0,je.t)([Ue,"email_content_description"])})]}),(0,W.jsxs)("div",{className:"flex gap-2",children:[p&&(0,W.jsx)(m.z,{variant:"secondary-light",type:"button",onClick:c,disabled:d,children:(0,je.t)("workflows_v2.action_selector.email.send_a_test")}),(0,W.jsx)(m.z,{variant:"secondary-light",type:"button",onClick:S,disabled:d,children:p?(0,je.t)("edit"):(0,je.t)([Ue,"start_writing"])})]})]}),(0,W.jsx)("div",{className:"bg-secondary rounded-lg px-6 py-5",children:(0,W.jsx)("div",{className:"bg-primary w-full max-w-[24rem] rounded-lg p-6 shadow",children:p?(0,W.jsx)(Ee.C,{content:p}):(0,W.jsx)(De.gi,{variant:"email-preview"})})})]}):(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsxs)("div",{className:"border-primary flex justify-between rounded-b-none rounded-t-lg border px-5 py-4",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",color:"text-very-dark",children:(0,je.t)([Ue,"email_content"])}),(0,W.jsx)(h.Z.LabelXs,{color:"text-default",children:(0,je.t)([Ue,"email_content_description"])})]}),(0,W.jsx)("div",{children:(0,W.jsx)(m.z,{variant:"secondary",type:"button",onClick:S,children:p?(0,je.t)("edit"):(0,je.t)([Ue,"start_writing"])})})]}),(0,W.jsx)("div",{className:"bg-secondary border-primary h-64 overflow-y-auto rounded-b-lg border-x border-b py-6",children:(0,W.jsx)("div",{className:"bg-primary mx-auto max-w-[500px] rounded-lg p-8 shadow-sm",children:p?(0,W.jsx)(Ee.C,{content:p}):(0,W.jsx)(De.gi,{variant:"email-preview"})})})]})}var ze="settings.workflows.action_messages.send_email",Ve=r(97567),qe=r(30143),Ze=function(){var e=(0,Ve.t)();return(0,W.jsx)(qe.g,{showUpgradeButton:!e,label:(0,i.t)("settings.workflows.form.actions.send_email")})},Ge=r(42691),We=r(74846),He=r(2582),Qe=r(5027),Je=r(67643);function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(){var e=(0,Ge.U)().isLoading,t=Ke((0,We.Z)(!1),2),r=t[0],n=t[1];return e?(0,W.jsx)(b.a,{}):(0,W.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,W.jsx)(Je.h,{}),(0,W.jsx)(He.J,{onFullReportClick:n}),(0,W.jsx)(Qe.L,{isOpen:r,onClose:n})]})}var Ye={label:(0,W.jsx)(Ze,{}),textLabel:(0,i.t)("settings.workflows.form.actions.send_email"),value:"send_email",group:(0,i.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,W.jsx)(o.JO,{type:"16-email",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,u.B2)().paramsPath,t=(0,s.Gc)(),r=t.watch,n=t.setValue,i=r("".concat(e,".broadcast_id"));return(0,xe.t)({id:i,enabled:!!i,onSuccess:function(t){var r,i,o;n("".concat(e,".internal_name"),t.internal_name),n("".concat(e,".subject"),null===(r=t.broadcast_content)||void 0===r?void 0:r.subject),n("".concat(e,".preview_text"),null===(i=t.broadcast_content)||void 0===i?void 0:i.preview_text),n("".concat(e,".email_content"),null===(o=t.broadcast_content)||void 0===o?void 0:o.email_content)}}),(0,W.jsxs)("div",{className:"react-form flex flex-col gap-y-7",children:[(0,W.jsx)(c.l.Item,{name:"".concat(e,".internal_name"),label:(0,je.t)(["settings.workflows.form","internal_name"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,isFirstChild:!0,rules:{maxLength:{value:_e.Mb,message:(0,je.t)(["settings.emails.broadcasts","internal_name_too_long"])}},children:(0,W.jsx)(c.l.Input,{})}),(0,W.jsx)(Se.O,{fieldName:"".concat(e,".subject")}),(0,W.jsx)(Oe.W,{fieldName:"".concat(e,".preview_text")}),(0,W.jsx)(we.X,{id:i,children:(0,W.jsx)(Fe,{})})]})},viewComponent:function(e){var t=(e.action||{}).api_params,r=function(){if(t&&"broadcast_id"in t)return Number(t.broadcast_id);(0,Ne.Z)(!1,"Broadcast ID is required for send_email action")};return(0,W.jsx)(we.X,{id:r(),children:(0,W.jsx)(Ge.x,{id:r(),children:(0,W.jsx)(Xe,{})})})},historyDetailViewComponent:function(e){var t,r,n=e.apiParams.broadcast_id,o=(0,xe.t)({id:Number(n)}),a=o.data;return o.isLoading?(0,W.jsx)(b.a,{}):(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)([ze,"internal_name"])})}),(0,W.jsx)("div",{className:"w-3/4",children:null===a||void 0===a?void 0:a.internal_name})]}),(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)([ze,"subject"])})}),(0,W.jsx)("div",{className:"w-3/4",children:null===a||void 0===a||null===(t=a.broadcast_content)||void 0===t?void 0:t.subject})]}),(0,W.jsxs)("div",{className:"md:flex",children:[(0,W.jsx)("div",{className:"w-1/4",children:(0,W.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)([ze,"preview_text"])})}),(0,W.jsx)("div",{className:"w-3/4",children:null===a||void 0===a||null===(r=a.broadcast_content)||void 0===r?void 0:r.preview_text})]})]})},icon:"email",isApplicableToMembersOnly:!1}},2582:(e,t,r)=>{"use strict";r.d(t,{J:()=>b});var n=r(94184),i=r.n(n),o=r(42991),a=r(20290),s=r(42691),l=r(5288),c=r(18605),u=r(8246),d=r(49242),p=r(51508),f=r(85893),m="settings.workflows.view";function b(e){var t=e.onFullReportClick,r=(0,s.U)().data,n=(0,a.h)();if(!r)return null;var b=r.delivered,h=r.opened,v=r.clicked,y=r.recipient_count,g=r.sent||y;return(0,f.jsxs)("div",{className:"flex flex-col gap-y-2",children:[!n&&(0,f.jsx)(l.V,{recipient_type:"all_recipients",className:i()("flex items-center gap-x-1",{"mt-2":n}),children:(0,f.jsx)(d.u,{recipientCount:y})}),(0,f.jsxs)("div",{className:i()("overflow-hidden rounded-lg border",{"border-hover bg-secondary mt-3":n,"border-primary bg-primary":!n}),children:[(0,f.jsxs)("div",{className:i()("divide-primary flex items-center justify-around divide-x text-center",{"py-6":!n,"py-3":n}),children:[(0,f.jsx)(p.j,{total:g,label:(0,o.t)([m,"delivered"]),value:b}),(0,f.jsx)(p.j,{total:g,label:(0,o.t)([m,"opened"]),value:h}),(0,f.jsx)(p.j,{total:g,label:(0,o.t)([m,"clicked"]),value:v})]}),!n&&(0,f.jsxs)("button",{type:"button",onClick:function(e){t(),e.stopPropagation()},className:"bg-secondary hover:bg-tertiary flex w-full items-center justify-center gap-x-2 py-2.5",children:[(0,f.jsx)(c.JO,{type:"20-analytics",size:16}),(0,f.jsx)(u.Z.LabelSm,{weight:"medium",color:"text-very-dark",children:(0,o.t)([m,"show_full_report"])})]})]})]})}},5027:(e,t,r)=>{"use strict";r.d(t,{L:()=>y});var n=r(42991),i=r(42691),o=r(54236),a=r(9999),s=r(13288),l=r(82177),c=r(86013),u=r(38776),d=r(36298),p=r(5288),f=r(8246),m=r(49242),b=r(85893),h="settings.workflows.view",v=function(){var e=(0,i.U)().data;(0,u.Z)(e,"Broadcast data must be present");var t=e.subject,r=void 0===t?"":t,n=e.first_delivery_at,o=void 0===n?null:n,a=e.recipient_count,s=void 0===a?null:a;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-1 gap-y-1",children:[(0,b.jsxs)("div",{className:"flex gap-x-1",children:[(0,b.jsx)(f.Z.LabelSm,{weight:"semibold",color:"text-default",children:(0,c.t)([h,"subject"])}),(0,b.jsx)(f.Z.LabelSm,{color:"text-default",children:r})]}),(0,b.jsxs)("div",{className:"flex gap-x-1",children:[(0,b.jsx)(f.Z.LabelSm,{weight:"semibold",color:"text-default",as:"div",children:(0,c.t)([h,"first_delivery"])}),(0,b.jsx)(f.Z.LabelSm,{color:"text-default",as:"div",children:o?(0,c.t)([h,"sent_on_date_time"],{datetime:(0,d.w)({dateTime:new Date(o),format:d.f.short_date_at_short_time})}):(0,c.t)("n/a")})]})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(p.V,{recipient_type:"all_recipients",className:"text-dark flex items-center gap-x-1 decoration-current decoration-dashed underline-offset-2",children:(0,b.jsx)(m.u,{recipientCount:s})})})]})};function y(e){var t=e.isOpen,r=e.onClose,c=(0,i.U)().isLoading;return(0,b.jsxs)(l.u_,{isOpen:t,onClose:r,children:[(0,b.jsx)(l.u_.Overlay,{}),(0,b.jsxs)(l.u_.Content,{size:"2xl",shouldCloseOnOutsideClick:!0,children:[(0,b.jsxs)(l.u_.Header,{children:[(0,b.jsx)(l.u_.Title,{children:(0,n.t)("settings.workflows.view.email_report")}),(0,b.jsx)(l.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,b.jsx)(l.u_.CloseButton,{onClick:r})})]}),(0,b.jsx)(l.u_.Body,{className:"pb-6 pt-4",children:c?(0,b.jsx)(s.a,{}):(0,b.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,b.jsx)(v,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(a.o,{}),(0,b.jsx)(o.H,{})]})]})})]})]})}},49242:(e,t,r)=>{"use strict";r.d(t,{u:()=>c});var n=r(42991),i=r(62618),o=r(20290),a=r(8246),s=r(85893),l="settings.workflows.view",c=function(e){var t=e.recipientCount,r=(0,o.h)()?a.Z.LabelXs:a.Z.LabelSm;return null===t?(0,s.jsx)(r,{weight:"semibold",color:"text-default",children:(0,n.t)([l,"no_recipients"])}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{weight:"semibold",color:"text-default",children:(0,i.HA)(t)}),(0,s.jsx)(r,{weight:"semibold",color:"text-very-dark",children:(0,n.t)([l,"recipients"])})]})}},51508:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(13292),i=r(62618),o=r(8246),a=r(85893);function s(e){var t=e.value,r=e.total,s=e.label;return(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-y-1.5",children:[(0,a.jsx)(o.Z.LabelMd,{weight:"bold",color:"text-very-dark",children:(0,n.M)({total:r,value:t})}),(0,a.jsxs)("div",{className:"flex justify-center gap-x-1",children:[(0,a.jsx)(o.Z.LabelXs,{weight:"medium",color:"text-default",children:s}),(0,a.jsx)(o.Z.LabelXs,{weight:"medium",color:"text-default",children:t?(0,i.HA)(t):0})]})]})}},67643:(e,t,r)=>{"use strict";r.d(t,{h:()=>y});var n=r(74846),i=r(42991),o=r(15242),a=r(81786),s=r(25153),l=r(13288),c=r(82177),u=r(85893);function d(e){var t=e.isOpen,r=e.onClose,n=(0,o.u)(),a=n.data,d=n.isLoading;return(0,u.jsxs)(c.u_,{isOpen:t,onClose:r,children:[(0,u.jsx)(c.u_.Overlay,{}),(0,u.jsxs)(c.u_.Content,{size:"xl",shouldCloseOnOutsideClick:!0,className:"grid grid-rows-[auto,_1fr]",children:[(0,u.jsxs)(c.u_.Header,{children:[(0,u.jsx)(c.u_.Title,{children:(0,i.t)("settings.workflows.view.view_email")}),(0,u.jsx)(c.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,u.jsx)(c.u_.CloseButton,{onClick:r})})]}),(0,u.jsx)(c.u_.Body,{className:"pb-6 pt-4",children:d||!a?(0,u.jsx)(l.a,{}):(0,u.jsx)("div",{className:"border-primary h-full overflow-hidden rounded-xl border",children:(0,u.jsx)(s.M,{})})})]})]})}var p=r(77022);function f(){var e,t=(0,o.u)(),r=t.data,n=t.isLoading,i=null===r||void 0===r||null===(e=r.broadcast_content)||void 0===e?void 0:e.email_content;return n||!i?null:(0,u.jsx)("div",{className:"border-primary pointer-events-none relative aspect-square h-14 w-14 cursor-default select-none overflow-hidden rounded-md border",children:(0,u.jsx)("div",{className:"absolute h-[560px] w-[560px] origin-top-left scale-[10%] px-8 py-4",children:(0,u.jsx)(p.C,{content:i})})})}var m=r(72584);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v="settings.workflows.view";function y(e){var t,r=e.hideViewEmailModal,s=void 0!==r&&r,l=(0,o.u)().data,c=b((0,n.Z)(!1),2),p=c[0],h=c[1];return(0,u.jsxs)("div",{className:"flex justify-between gap-x-2",children:[(0,u.jsx)(m.Z,{inlinePreviewComponent:(0,u.jsx)(f,{}),internalName:null===l||void 0===l?void 0:l.internal_name,subject:null===l||void 0===l||null===(t=l.broadcast_content)||void 0===t?void 0:t.subject}),!s&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(a.z,{variant:"secondary-light",type:"button",onClick:h,children:(0,i.t)([v,"view_email"])})}),(0,u.jsx)(d,{isOpen:p,onClose:h})]})]})}},72584:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(86013),i=r(8246),o=r(85893),a="settings.workflows.view";const s=function(e){var t=e.inlinePreviewComponent,r=e.internalName,s=e.subject;return(0,o.jsxs)("div",{className:"flex flex-1 items-center gap-x-4",children:[t,(0,o.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,o.jsx)(i.Z.LabelSm,{weight:"semibold",children:r||(0,n.t)([a,"untitled_email"])}),(0,o.jsxs)("div",{className:"flex gap-x-1",children:[(0,o.jsx)(i.Z.LabelXs,{weight:"medium",children:(0,n.t)([a,"subject"])}),(0,o.jsx)(i.Z.LabelXs,{children:s||(0,n.t)([a,"no_subject_line"])})]})]})]})}},6379:(e,t,r)=>{"use strict";r.d(t,{q:()=>f});var n=r(87536),i=r(64235),o=r(31415),a=r(1133),s=r(87742);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=(0,s.B2)().paramsPath,r=(0,n.Gc)().getValues,l=(0,o.b)(),u=l.data,p=l.mutateAsync,f=Number(null!==e&&void 0!==e?e:null===u||void 0===u?void 0:u.id),m=(0,a.j)({id:f}).mutateAsync;return{onUpsert:function(){var e=d(r(["".concat(t,".internal_name"),"".concat(t,".subject"),"".concat(t,".preview_text"),"".concat(t,".email_content")]),4),n=e[0],o=e[1],a=e[2],s=e[3],l={internal_name:n,broadcast_type:i.SL.workflow};return f?m({body:c(c({},l),{},{broadcast_content:{subject:o,preview_text:a,email_content:s}})}):p(c(c({},l),{},{broadcast_content_attributes:{subject:o,preview_text:a,email_content:s}}))},broadcastId:f}}},53799:(e,t,r)=>{"use strict";r.d(t,{m:()=>g,T:()=>F});var n=r(86013),i=r(18605),o=r(80971),a=r(49429),s=r(13288),l=r(8246),c=r(87742),u=r(85893),d="settings.workflows.form",p=r(51168),f=r(41609),m=r.n(f),b=r(27823),h=r(87436),v=function(e){var t=e.id,r=(0,b.a)(t),i=r.data,o=void 0===i?{}:i;return r.isLoading?(0,u.jsx)(h.C,{isLoading:!0}):m()(o)?(0,u.jsx)(l.Z.LabelSm,{children:(0,n.t)("settings.workflows.view.deleted_paywall")}):(0,u.jsx)(l.Z.LabelSm,{children:o.name||o.display_name})},y=r(23481),g={label:(0,n.t)("settings.workflows.form.actions.cancel_community_member_paywall_subscription"),value:"cancel_community_member_paywall_subscription",group:(0,n.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,u.jsx)(i.JO,{type:"16-remove-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,c.B2)().paramsPath,t=(0,o.g)(),r=t.activePaywalls,i=t.isLoading,p=t.isSuccess,f=r.map((function(e){var t=e.id,r=e.name,n=e.display_name;return{value:t,label:r||n}}));return i?(0,u.jsx)(s.a,{center:!0}):p?(0,u.jsx)(a.N,{name:"".concat(e,".paywall_id"),label:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)([d,"select_paywall"])}),options:f,rules:{required:(0,n.t)([d,"errors.required"])},emptyMessage:(0,n.t)([d,"errors.paywalls.not_found"])}):(0,u.jsx)(l.Z.LabelXs,{children:(0,u.jsx)("span",{className:"text-v2-danger",children:(0,n.t)([d,"paywalls.fetch_failed"])})})},viewComponent:function(e){var t=((e.action||{}).api_params||{}).paywall_id,r=(0,b.a)(t),i=r.data,o=void 0===i?{}:i,a=r.isLoading;return o||a?(0,u.jsx)(y.P,{children:(0,u.jsxs)(y.P.Section,{children:[(0,u.jsx)(y.P.Title,{children:(0,n.t)(["settings.workflows.view","resources.paywall"])}),(0,u.jsx)("div",{children:a?(0,u.jsx)(h.C,{isLoading:!0}):(0,u.jsx)(l.Z.LabelSm,{children:o.name||o.display_name})})]})}):null},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,i=t.community_member_id,o=r.paywall_id;return(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("div",{className:"md:flex",children:[(0,u.jsx)("div",{className:"w-1/4",children:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.paywall")})}),(0,u.jsx)("div",{className:"w-3/4",children:(0,u.jsx)(v,{id:o})})]}),(0,u.jsxs)("div",{className:"md:flex",children:[(0,u.jsx)("div",{className:"w-1/4",children:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.member")})}),(0,u.jsx)("div",{className:"w-3/4",children:(0,u.jsx)(p.q,{communityMemberId:i})})]})]})},isApplicableToMembersOnly:!0},_=r(87536),x=r(56031),j=r(67687),w="settings.workflows.form",O=function(){var e=(0,c.B2)().paramsPath;return(0,u.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)([w,"notify_member"])}),(0,u.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,u.jsx)(j.l.ToggleSwitch,{name:"".concat(e,".send_notification_subscription_created_by_admin"),variant:"small"}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("span",{children:(0,n.t)([w,"send_notification_subscription_created_by_admin"])})})]})]})},S=r(76296),P="settings.workflows.form",k=function(e){var t=e.paywallPrices,r=(0,c.B2)().paramsPath,i=(0,S.PI)(t).map((function(e){return{value:e.id,label:e.display_name}}));return(0,u.jsx)(a.N,{name:"".concat(r,".paywall_price_id"),label:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)([P,"select_paywall_price"])}),options:i,hidePlaceholder:!0,rules:{required:(0,n.t)([P,"errors.required"])},emptyMessage:(0,n.t)([P,"errors.paywalls.not_found"])})},C=r(15649),N="settings.workflows.form",I=function(e){var t=e.disabled,r=e.name,i={pattern:{value:/^[0-9]+$/,message:(0,n.t)("create_paywall_subscription_modal.warning.only_number_are_allowed")},required:(0,n.t)("create_paywall_subscription_modal.warning.only_number_are_allowed"),min:{value:C.dy,message:(0,n.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:C.ut,message:(0,n.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}};return(0,u.jsx)(j.l.Item,{name:r,hideDescription:!0,label:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)([N,"trial_days"])}),hideBorder:!0,isFirstChild:!0,hiddenField:!0,className:"flex flex-1 flex-col gap-1",errorClassName:"text-red-500 text-xs",rules:i,placeholder:(0,n.t)([N,"trial_days_placeholder"]),children:(0,u.jsx)(j.l.Input,{name:"trial_days",inputMode:"numeric",suffix:(0,n.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:t})})};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D="settings.workflows.form",T=r(88767),L=r(76748),M=function(e){var t=e.paywallId,r=e.priceId,n=(0,T.useQuery)(L.v.paywallPrices.show({paywallId:t,id:r})),i=n.data;return{paywallPrice:void 0===i?{}:i,isLoading:n.isLoading,isSuccess:n.isSuccess}},R=function(e){var t=e.paywallId,r=e.paywallPriceId,i=M({paywallId:t,priceId:r}),o=i.paywallPrice,a=void 0===o?{}:o;return i.isLoading?(0,u.jsx)(h.C,{isLoading:!0}):m()(a)?(0,u.jsx)(l.Z.LabelSm,{children:(0,n.t)("settings.workflows.view.deleted_paywall_price")}):(0,u.jsxs)(l.Z.LabelSm,{children:[a.paywall_name," - ",a.display_name]})},B="settings.workflows.view",U=function(e){return e?(0,n.t)("yes"):(0,n.t)("no")},F={label:(0,n.t)("settings.workflows.form.actions.subscribe_community_member_to_paywall_trial"),value:"subscribe_community_member_to_paywall_trial",group:(0,n.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,u.jsx)(i.JO,{type:"16-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,c.B2)().paramsPath,t=(0,o.g)(),r=t.isLoading,i=t.isSuccess,d=t.activePaywalls,p=(0,(0,_.Gc)().watch)("".concat(e,".paywall_id")),f=[],m={};return(0,x.Jy)(d).forEach((function(e){f.push({value:e.id,label:e.name||e.display_name}),m[e.id]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)})),r?(0,u.jsx)(s.a,{center:!0}):i?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.N,{name:"".concat(e,".paywall_id"),label:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)([D,"select_paywall"])}),options:f,rules:{required:(0,n.t)([D,"errors.required"])},emptyMessage:(0,n.t)([D,"errors.paywalls.not_found"])}),p&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,u.jsx)(k,{paywallPrices:m[p].stripe_prices_attributes}),(0,u.jsx)(I,{name:"".concat(e,".trial_days"),disabled:r})]}),(0,u.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,u.jsx)(O,{})})]})]}):(0,u.jsx)(l.Z.LabelXs,{children:(0,u.jsx)("span",{className:"text-v2-danger",children:(0,n.t)([D,"errors.paywall_prices.fetch_failed"])})})},viewComponent:function(e){var t=(e.action||{}).api_params,r=(t=void 0===t?{}:t).paywall_price_id,i=t.paywall_id,o=t.trial_days,a=t.send_notification_subscription_created_by_admin,s=M({paywallId:i,priceId:r}),c=s.paywallPrice,d=s.isLoading;return c||d?(0,u.jsxs)(y.P,{children:[(0,u.jsxs)(y.P.Section,{children:[(0,u.jsx)(y.P.Title,{children:(0,n.t)([B,"resources.paywall"])}),(0,u.jsx)("div",{children:d?(0,u.jsx)(h.C,{isLoading:!0}):(0,u.jsx)(l.Z.LabelSm,{children:m()(c)?(0,n.t)("settings.workflows.view.deleted_paywall"):c.paywall_name||c.paywall_display_name})})]}),(0,u.jsxs)(y.P.Section,{children:[(0,u.jsx)(y.P.Title,{children:(0,n.t)([B,"resources.paywall_price"])}),(0,u.jsx)("div",{children:d?(0,u.jsx)(h.C,{isLoading:!0}):(0,u.jsx)(l.Z.LabelSm,{children:m()(c)?(0,n.t)("settings.workflows.view.deleted_paywall_price"):c.display_name})})]}),(0,u.jsxs)(y.P.Section,{children:[(0,u.jsx)(y.P.Title,{children:(0,n.t)([B,"trial_days"])}),(0,u.jsx)("div",{children:d?(0,u.jsx)(h.C,{isLoading:!0}):(0,u.jsx)(l.Z.LabelSm,{children:o})})]}),(0,u.jsxs)(y.P.Section,{children:[(0,u.jsx)(y.P.Title,{children:(0,n.t)([B,"send_notification_subscription_created_by_admin"])}),(0,u.jsx)("div",{children:d?(0,u.jsx)(h.C,{isLoading:!0}):(0,u.jsx)(l.Z.LabelSm,{children:U(a)})})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,i=t.community_member_id,o=t.trial_days,a=null!==r&&void 0!==r?r:{},s=a.paywall_id,c=a.paywall_price_id;return(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("div",{className:"md:flex",children:[(0,u.jsx)("div",{className:"w-1/4",children:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.paywall_price")})}),(0,u.jsx)("div",{className:"w-3/4",children:(0,u.jsx)(R,{paywallId:s,paywallPriceId:c})})]}),(0,u.jsxs)("div",{className:"md:flex",children:[(0,u.jsx)("div",{className:"w-1/4",children:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.member")})}),(0,u.jsx)("div",{className:"w-3/4",children:(0,u.jsx)(p.q,{communityMemberId:i})})]}),(0,u.jsxs)("div",{className:"md:flex",children:[(0,u.jsx)("div",{className:"w-1/4",children:(0,u.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.trial_days")})}),(0,u.jsx)("div",{className:"w-3/4",children:o})]})]})},isApplicableToMembersOnly:!0}},92617:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var n=r(86013),i=r(20290),o=r(81786),a=r(85893),s=function(e){var t,r,s=e.handleTestWebhook,l=e.isDisabled,c=e.isTestingWebhook,u=e.isWebhookTestSuccessful,d=e.isWebhookUrlChanged,p=e.isWebhookTested,f=e.triggerType,m=(0,i.h)();return(0,a.jsx)(o.z,{disabled:l,onClick:s,large:!m,variant:"circle",type:"button",children:(t=!f||""===f,r=(!u||d)&&p,c?(0,n.t)("settings.workflows.form.testing_webhook"):r?(0,n.t)("settings.workflows.form.test_again"):t?(0,n.t)("settings.workflows.form.select_entry_rule"):(0,n.t)("settings.workflows.form.test_webhook"))})}},84570:(e,t,r)=>{"use strict";r.d(t,{j:()=>O});var n=r(64687),i=r.n(n),o=r(86013),a=r(96629),s=r(8246),l=r(11049),c=r(82177),u=r(67294),d=r(36298),p=r(6952),f=r(61510),m=r(65242),b=r(85893),h=function(e){var t=e.testResult,r=e.onClose,n=function(e){try{return JSON.stringify(e,null,2)}catch(t){return console.error("Error parsing JSON:",t),""}},i=(0,u.useMemo)((function(){return{request:n(t.request_body),response:n(t.response_body)}}),[t]),a=(0,d.w)({dateTime:new Date(t.date_time),format:"short_date_at_short_time"});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.u_.Header,{children:[(0,b.jsx)(c.u_.Title,{children:(0,o.t)("settings.workflows.action_messages.send_to_webhook.webhook_test_result")}),(0,b.jsx)(c.u_.HeaderActions,{children:(0,b.jsx)(c.u_.CloseButton,{onClick:r})})]}),(0,b.jsxs)(c.u_.Body,{children:[(0,b.jsx)("div",{className:"flex flex-col",children:(0,b.jsx)("div",{className:"border-dark rounded-lg border",children:(0,b.jsxs)(p.O.Group,{children:[(0,b.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,b.jsx)("div",{className:"flex flex-col gap-1",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,b.jsx)(m.x,{result:null!==t&&void 0!==t&&t.success?"success":"failed",isBadge:!1}),(0,b.jsx)(s.Z.LabelSm,{color:"text-default",as:"time",children:a})]})}),(0,b.jsxs)(p.O.List,{children:[(0,b.jsx)(p.O,{children:(0,o.t)("settings.workflows.action_messages.send_to_webhook.webhook_url")}),(0,b.jsx)(p.O,{children:(0,o.t)("settings.workflows.action_messages.send_to_webhook.request_body")}),(0,b.jsx)(p.O,{children:(0,o.t)("settings.workflows.action_messages.send_to_webhook.response_body")})]})]}),(0,b.jsxs)(p.O.Panels,{children:[(0,b.jsx)(p.O.Panel,{className:"px-6 py-5",children:t.url}),(0,b.jsx)(p.O.Panel,{className:"p-2",children:(0,b.jsx)(f.X,{code:i.request})}),(0,b.jsx)(p.O.Panel,{className:"p-2",children:(0,b.jsx)(f.X,{code:i.response})})]})]})})}),(0,b.jsx)("div",{className:"mt-5"})]})]})};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.testResult,r=(0,l.dd)();return(0,b.jsxs)(c.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,b.jsx)(c.u_.Overlay,{}),(0,b.jsx)(c.u_.Content,{size:"lg",children:(0,b.jsx)(h,{testResult:t,onClose:r.hide})})]})},_=l.gk.create((function(e){return(0,b.jsx)(g,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}));function x(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var j={type:"success",title:(0,o.t)("settings.workflows.action_messages.send_to_webhook.test_success"),description:(0,o.t)("settings.workflows.action_messages.send_to_webhook.success_support_text")},w={type:"alert",title:(0,o.t)("settings.workflows.action_messages.send_to_webhook.test_failed"),description:(0,o.t)("settings.workflows.action_messages.send_to_webhook.error_support_text")},O=function(e){var t=e.isWebhookTestSuccessful,r=e.webhookTestResult,n=(0,l.dd)(_),c=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.show({testResult:r});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),u=t?j:w,d=u.type,p=u.title,f=u.description,m=(0,b.jsxs)("span",{className:"flex gap-x-1",children:[(0,b.jsx)(s.Z.LabelSm,{children:f}),(0,b.jsx)("button",{type:"button",className:"border-light hover:border-darkest border-b border-dashed",onClick:c,children:(0,b.jsx)(s.Z.LabelSm,{weight:"medium",children:(0,o.t)("settings.workflows.action_messages.send_to_webhook.show_test_data_output")})})]});return(0,b.jsx)("div",{className:"mb-9",children:(0,b.jsx)(a.b,{type:d,title:p,description:m})})}},97593:(e,t,r)=>{"use strict";r.d(t,{l:()=>n.l});var n=r(69522)},69522:(e,t,r)=>{"use strict";r.d(t,{l:()=>x,E:()=>j});var n=r(86013),i=r(18605),o=r(61284),a=r(78354),s=r(4079),l=r(67687),c=r(8246),u=r(87742),d=r(85893),p=function(){var e=(0,u.B2)(),t=e.paramsPath,r=e.isViewOnlyMode;return(0,d.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,d.jsx)(l.l.Item,{name:"".concat(t,".url"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.t)("settings.workflows.form.webhook_path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,n.t)("settings.workflows.form.webhook_path.placeholder"),rules:{pattern:{value:s.lu,message:(0,n.t)("settings.workflows.form.webhook_path.error")}},children:(0,d.jsx)(l.l.Input,{})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.optional_description")}),(0,d.jsx)(a._,{placeholder:(0,n.t)("settings.workflows.form.optional_description_placeholder"),name:"".concat(t,".description.body"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",type:"workflow",disabled:r})]})]})},f=function(e){var t=e.url;return(0,d.jsx)("div",{className:"flex flex-col gap-2",children:(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.action_messages.send_to_webhook.url")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:t})})]})})},m=r(98338),b=r(30143),h=function(){var e=(0,m.wh)().currentCommunity,t=(void 0===e?{}:e).current_plan_tier,r=o.Db.includes(t);return(0,d.jsx)(b.g,{showUpgradeButton:!r,label:(0,n.t)("settings.workflows.form.actions.send_to_webhook")})},v=r(66422),y=r(23481),g="settings.workflows.view",_=function(e){var t=(e.action||{}).api_params||{},r=t.url,i=t.description;return(0,d.jsxs)(y.P,{children:[r&&(0,d.jsxs)(y.P.Section,{children:[(0,d.jsx)(y.P.Title,{children:(0,n.t)([g,"webhook.url"])}),(0,d.jsx)("div",{children:(0,d.jsx)(c.Z.LabelSm,{children:r})})]}),(0,d.jsxs)(y.P.Section,{children:[(0,d.jsx)(y.P.Title,{children:(0,n.t)([g,"webhook.description"])}),i?(0,d.jsx)("div",{className:"text-default text-sm",children:(0,d.jsx)(v.T,{rich_text_body:i,editable:!1})}):(0,d.jsx)(c.Z.LabelSm,{children:(0,n.t)([g,"webhook.empty_description"])})]})]})},x={label:(0,d.jsx)(h,{}),textLabel:(0,n.t)("settings.workflows.form.action_groups.webhook.send_to_webhook"),value:"send_to_webhook",group:(0,n.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,d.jsx)(i.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:p,viewComponent:_,historyDetailViewComponent:f,availability:["dynamic"],eligiblePlanTiers:o.Db,isApplicableToMembersOnly:!0},j={label:(0,n.t)("settings.workflows.form.actions.send_to_webhook"),textLabel:(0,n.t)("settings.workflows.form.actions.send_to_webhook"),value:"send_to_webhook",group:(0,n.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,d.jsx)(i.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:p,viewComponent:_,historyDetailViewComponent:f,availability:["dynamic"],eligiblePlanTiers:o.Db,isApplicableToMembersOnly:!0}},55006:(e,t,r)=>{"use strict";r.d(t,{U:()=>ue});var n=r(64842),i=r(86013),o=r(18605),a=r(7288),s=r(49429),l=r(13288),c=r(8246),u=r(87742),d=r(85893),p="settings.workflows.form",f=r(51168),m=r(88767),b=r(57594),h=["eventId"];function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=function(e){var t=e.eventId,r=v(e,h);return(0,m.useQuery)(["event",t],(function(){return b.S.fetchEvent({id:t})}),r)},g=function(e){var t=e.id,r=y({eventId:t}),n=r.data;return r.isLoading?(0,d.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,d.jsx)("span",{children:n.name})},_=r(87436),x=r(23481),j={label:(0,i.t)("settings.workflows.form.actions.rsvp_member_to_event"),value:"rsvp_member_to_event",group:(0,i.t)("settings.workflows.form.action_groups.events"),leftAddon:(0,d.jsx)(o.JO,{type:"16-calendar-join-date",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,u.B2)().paramsPath,t=(0,a.i)({per_page:100}),r=t.data,n=t.isLoading,o=t.isError,f=(r||{}).records,m=(void 0===f?[]:f).map((function(e){var t=e.recurring?"".concat(e.name," ").concat((0,i.t)([p,"recurring_label"])):e.name,r=e.paid_event?"".concat(e.space_name," \u2022 ").concat(e.start_date," \u2022 ").concat(e.ticket_price):"".concat(e.space_name," \u2022 ").concat(e.start_date);return{label:t,value:e.id,description:r}}));return n?(0,d.jsx)(l.a,{center:!0}):o?(0,d.jsx)(c.Z.LabelXs,{children:(0,d.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([p,"errors.upcoming_events.fetch_failed"])})}):(0,d.jsx)(s.N,{name:"".concat(e,".event_id"),label:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)([p,"which_event"])}),options:m,rules:{required:(0,i.t)([p,"errors.required"])},emptyMessage:(0,i.t)([p,"errors.upcoming_events.not_found"])})},viewComponent:function(e){var t=((e.action||{}).api_params||{}).event_id,r=y({eventId:t}),n=r.data,o=r.isLoading;return n||o?(0,d.jsx)(x.P,{children:(0,d.jsxs)(x.P.Section,{children:[(0,d.jsx)(x.P.Title,{children:(0,i.t)(["settings.workflows.view","event"])}),(0,d.jsx)("div",{children:o?(0,d.jsx)(_.C,{isLoading:!0}):(0,d.jsx)(c.Z.LabelSm,{children:n.name})})]})}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.event_id,n=t.community_member_id;return(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.event")})}),(0,d.jsx)(g,{id:r})]}),(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(f.q,{communityMemberId:n})})]})]})},icon:"event",isApplicableToMembersOnly:!0},w=r(45512),O=r(15117),S=r(57269),P="settings.workflows.form",k=function(){var e=(0,u.B2)().paramsPath,t=(0,S.t)(),r=t.memberTags,n=void 0===r?[]:r,o=t.isLoading,a=t.isError,p=n.map((function(e){return{value:e.id,label:e.name}}));return o?(0,d.jsx)(l.a,{center:!0}):a?(0,d.jsx)(c.Z.LabelXs,{children:(0,d.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([P,"member_tags.fetch_failed"])})}):(0,d.jsx)(s.N,{name:"".concat(e,".member_tag_id"),label:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)([P,"select_tag"])}),options:p,rules:{required:(0,i.t)([P,"errors.required"])},emptyMessage:(0,i.t)([P,"errors.member_tags.not_found"])})},C=r(19898),N=r(41609),I=r.n(N),A=function(e){var t=e.memberTagId,r=(0,C.u)({id:t}),n=r.data;return r.isLoading?(0,d.jsx)(_.C,{isLoading:!0}):I()(n)?(0,d.jsx)(c.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_member_tag")}):(0,d.jsx)(c.Z.LabelSm,{children:n.name})},E=function(e){var t=e.body,r=t.member_tag_id,n=t.community_member_id,o=t.contact_id;return(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.tag")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(A,{memberTagId:r})})]}),(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(f.q,{communityMemberId:n||o})})]})]})},D="settings.workflows.view",T=function(e){var t=((e.action||{}).api_params||{}).member_tag_id,r=(0,C.u)({id:t}),n=r.data,o=void 0===n?{}:n,a=r.isLoading;if(!o)return null;var s=I()(o)?(0,i.t)([D,"deleted_member_tag"]):o.name;return(0,d.jsx)(x.P,{children:(0,d.jsxs)(x.P.Section,{children:[(0,d.jsx)(x.P.Title,{children:(0,i.t)([D,"member_tag"])}),(0,d.jsx)("div",{children:a?(0,d.jsx)(_.C,{isLoading:!0}):o&&(0,d.jsx)(_.C,{text:s})})]})})},L={label:(0,i.t)("settings.workflows.form.actions.add_tag"),value:"add_tag_to_community_member",group:(0,i.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,d.jsx)(o.JO,{type:"16-tag",size:16,className:"!h-4 !w-4"}),formComponent:k,viewComponent:T,historyDetailViewComponent:E,icon:"tag",isApplicableToMembersOnly:!1},M={label:(0,i.t)("settings.workflows.form.actions.remove_tag"),value:"remove_tag_from_community_member",group:(0,i.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,d.jsx)(o.JO,{type:"16-remove-tags",size:16,className:"!h-4 !w-4"}),formComponent:k,viewComponent:T,historyDetailViewComponent:E,icon:"tag",isApplicableToMembersOnly:!1},R=r(53799),B=r(92739),U="settings.workflows.form",F=function(){var e=(0,u.B2)().paramsPath,t=(0,B.r)(),r=t.data,n=t.isLoading,o=t.isError,a=(r||{}).records,p=(void 0===a?[]:a).map((function(e){return{value:e.id,label:e.name}}));return n?(0,d.jsx)(l.a,{center:!0}):o?(0,d.jsx)(c.Z.LabelXs,{children:(0,d.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([U,"spaces.fetch_failed"])})}):(0,d.jsx)(s.N,{name:"".concat(e,".space_id"),label:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)([U,"select_space"])}),options:p,rules:{required:(0,i.t)([U,"errors.required"])},emptyMessage:(0,i.t)([U,"errors.spaces.not_found"])})},z=r(50732),V=r(81089);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){var t=e.id,r=e.options,n=void 0===r?{}:r;return(0,m.useQuery)(["space",t],(function(){return(0,V.UT)(z.av.spaces.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},n))},W=r(90789),H=function(e){var t=e.id,r=G({id:t}),n=r.data;return r.isLoading?(0,d.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,d.jsxs)("div",{className:"post__space",children:[(0,W.xt)(n)&&(0,d.jsx)("span",{children:n.emoji}),(0,d.jsx)("span",{children:n.name})]})},Q=function(e){var t=e.body,r=e.url,n=t.executor_member_id,o=new URL(r).pathname.split("/")[5];return(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.space")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(H,{id:o})})]}),(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(f.q,{communityMemberId:n})})]})]})},J=r(98338),K=function(e){var t=((e.action||{}).api_params||{}).space_id,r=(0,J.T4)({spaceId:t}),n=r.data,o=r.isLoading;return n||o?(0,d.jsx)(x.P,{children:(0,d.jsxs)(x.P.Section,{children:[(0,d.jsx)(x.P.Title,{children:(0,i.t)(["settings.workflows.view","space"])}),(0,d.jsx)("div",{children:o?(0,d.jsx)(_.C,{isLoading:!0}):(0,d.jsx)(c.Z.LabelSm,{children:n.name})})]})}):null},$={label:(0,i.t)("settings.workflows.form.actions.add_community_member_to_space"),value:"add_community_member_to_space",group:(0,i.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,d.jsx)(o.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:F,viewComponent:K,historyDetailViewComponent:Q,icon:"user",isApplicableToMembersOnly:!0},X={label:(0,i.t)("settings.workflows.form.actions.remove_community_member_from_space"),value:"remove_community_member_from_space",group:(0,i.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,d.jsx)(o.JO,{type:"16-space-directory-remove",size:16,className:"!h-4 !w-4"}),formComponent:F,viewComponent:K,historyDetailViewComponent:Q,icon:"user-remove",isApplicableToMembersOnly:!0},Y="settings.workflows.form",ee=function(){var e=(0,u.B2)().paramsPath,t=(0,J.e2)(),r=t.records,n=t.isLoading,o=t.isError,a=r.map((function(e){return{value:e.id,label:e.name}}));return n?(0,d.jsx)(l.a,{center:!0}):o?(0,d.jsx)(c.Z.LabelXs,{children:(0,d.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([Y,"space_groups.fetch_failed"])})}):(0,d.jsx)(s.N,{name:"".concat(e,".space_group_id"),label:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)([Y,"select_space_group"])}),options:a,rules:{required:(0,i.t)([Y,"errors.required"])},emptyMessage:(0,i.t)([Y,"errors.space_groups.not_found"])})};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(e){var t=e.id,r=e.options,n=void 0===r?{}:r;return(0,m.useQuery)(["space-group",t],(function(){return(0,V.UT)(z.av.spaceGroups.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},n))},ie=function(e){var t=e.id,r=ne({id:t}),n=r.data;return r.isLoading?(0,d.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,d.jsx)("span",{children:n.name})},oe=function(e){var t=e.body,r=e.url,n=t.executor_member_id,o=new URL(r).pathname.split("/")[5];return(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.space_group")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(ie,{id:o})})]}),(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(f.q,{communityMemberId:n})})]})]})},ae=function(e){var t=((e.action||{}).api_params||{}).space_group_id,r=(0,J.p7)(t),n=r.data,o=void 0===n?{}:n,a=r.isLoading;return o||a?(0,d.jsx)(x.P,{children:(0,d.jsxs)(x.P.Section,{children:[(0,d.jsx)(x.P.Title,{children:(0,i.t)(["settings.workflows.view","space_group"])}),(0,d.jsx)("div",{children:a?(0,d.jsx)(_.C,{isLoading:!0}):(0,d.jsx)(c.Z.LabelSm,{children:o.name})})]})}):null},se={label:(0,i.t)("settings.workflows.form.actions.add_community_member_to_space_group"),value:"add_community_member_to_space_group",group:(0,i.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,d.jsx)(o.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:ee,viewComponent:ae,historyDetailViewComponent:oe,icon:"user",isApplicableToMembersOnly:!0},le={label:(0,i.t)("settings.workflows.form.actions.remove_community_member_from_space_group"),value:"remove_community_member_from_space_group",group:(0,i.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,d.jsx)(o.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:ee,viewComponent:ae,historyDetailViewComponent:oe,icon:"user-remove",isApplicableToMembersOnly:!0},ce=r(97593),ue=[O.Cz,O.MK,L,M,O.Ah,$,X,se,le,ce.l,R.m,R.T,j,O.zW,O.TQ,O.KY,w.I,n.s]},30199:(e,t,r)=>{"use strict";r.d(t,{U0:()=>i.U,mR:()=>a,LK:()=>n.L});var n=r(59355),i=r(55006),o=i.U.reduce((function(e,t){return e.set(t.value,t.icon),e}),new Map),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return o.get(e)||t}},59355:(e,t,r)=>{"use strict";r.d(t,{f:()=>a,L:()=>s});var n=r(41255),i=r(80041),o=r(55006),a=function(e){return void 0===e||("function"===typeof e?e():e)},s=function(){var e=(0,n.Z)(),t=(0,i.D)().type,r=e?o.U:o.U.filter((function(e){return a(e.released)}));return{eligibleActions:r=r.filter((function(e){return!e.availability||e.availability.includes(t)}))}}},79052:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var n=r(96486),i=r(89674),o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).filters;return(void 0===e?[]:e).filter((function(e){return!(0,i.N)(e)})).map((function(e){return(0,n.omit)(e,["isInitialOpen"])}))}},46394:(e,t,r)=>{"use strict";r.d(t,{Y:()=>m});var n=r(96486),i=r(87536),o=r(44742),a=r(95721),s=r(2480),l=r(11745),c=r(79052),u=["totalQueryAudience"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var m=function(e){var t=(0,(0,i.Gc)().watch)("audience.filter_rules")||{},r=(0,c.k)(t);e&&r.push({key:"name",filter_type:"contains",value:e});var m=!(0,n.isEmpty)(r),b=(0,a.J)(),h=(0,o._)({filters:r,scope:{status:b?s.vC.ALL:s.vC.ACTIVE,exclude_empty_name:!1,exclude_empty_profiles:!1},options:{keepPreviousData:!0}}),v=h.totalQueryAudience,y=f(h,u);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hasFilters:m,formattedCount:(0,l.V)(v),count:v},y)}},51168:(e,t,r)=>{"use strict";r.d(t,{q:()=>l});var n=r(86013),i=r(96486),o=r(67474),a=r(64422),s=r(85893),l=function(e){var t=e.communityMemberId,r=e.withDeleted,l=void 0===r||r,c=(0,o.y)({ids:[t],withDeleted:l,enabled:!!t}),u=c.data,d=(c.isLoading,(0,i.head)(null===u||void 0===u?void 0:u.records));if(!d)return(0,s.jsx)("span",{className:"text-sm",children:(0,n.t)("deactivated_member")});var p=d.name,f=d.avatar_url;return d.is_deleted?(0,s.jsxs)("span",{className:"break-normal text-sm",children:[(0,n.t)("deactivated_member")," (",p,")"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"pl-2",children:(0,s.jsx)("div",{className:"float-left",children:(0,s.jsx)(a.s,{size:"6",src:f,name:p})})}),(0,s.jsx)("span",{className:"break-normal text-sm",children:p})]})}},87436:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var n=r(94184),i=r.n(n),o=r(8246),a=r(85893),s=function(e){var t=e.icon,r=e.text,n=e.isLoading;return(0,a.jsxs)("span",{className:i()("inline-flex h-6 items-center gap-1 rounded-full border px-2",{"bg-tertiary border-tertiary w-20 animate-pulse":n,"border-dark":!n}),children:[t&&(0,a.jsx)("span",{className:"flex",children:t}),r&&(0,a.jsx)(o.Z.LabelXs,{weight:"medium",color:"text-default",children:r})]})}},78296:(e,t,r)=>{"use strict";r.d(t,{X:()=>b,d:()=>m});var n=r(24185),i=r(64687),o=r.n(i),a=r(88767),s=r(89514),l=r(1133),c=r(15242),u=r(22090),d=r(85893);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function f(){var e=(0,n.UO)(),t=e.broadcastId,r=e.id,i=(0,a.useQueryClient)(),f=(0,n.k6)(),m=(0,l.j)({id:Number(t)}),b=(0,n.$B)().path,h=function(){var e,a=(e=o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.invalidateQueries((0,s.x)(Number(t)));case 2:a=b.replace("send-email/:broadcastId",""),f.push((0,n.Gn)(a,{id:r}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return a.apply(this,arguments)}}();return(0,d.jsx)(c.X,{id:Number(t),children:(0,d.jsx)(u.W,{update:m,onClose:h})})}var m=function(e){var t=e.path,r=e.broadcastId,n=void 0===r?":broadcastId":r;return"".concat(t,"/send-email/").concat(n)};function b(e){var t=e.children,r=(0,n.$B)().path;return(0,d.jsxs)(d.Fragment,{children:[t,(0,d.jsx)(n.AW,{path:m({path:r}),children:(0,d.jsx)(f,{})})]})}},16925:(e,t,r)=>{"use strict";r.d(t,{WX:()=>l,le:()=>c,I:()=>u});var n=r(67294),i=r(67474),o=r(85893);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=(0,n.createContext)(null);l.displayName="CommunityMembersListContext";var c=function(){var e=(0,n.useContext)(l);return console.assert(e,"useCommunityMembersListContext is being used outside context provider."),e},u=function(e){var t=e.ids,r=e.children,n=(0,i.y)({ids:a(new Set(t)),withDeleted:!0,enabled:!(null===t||void 0===t||!t.length)});return(0,o.jsx)(l.Provider,{value:n,children:r})}},78367:(e,t,r)=>{"use strict";r.d(t,{Xg:()=>l,I:()=>a.I,le:()=>a.le});var n=r(86013),i=r(64422),o=r(13288),a=r(16925),s=r(85893),l=function(e){var t=e.id,r=e.isAvatarHidden,l=e.isLastNameHidden,c=(0,a.le)();if(!c)return(0,s.jsx)(o.a,{center:!0,className:"p-0"});var u=c.data;if(c.isLoading)return(0,s.jsx)(o.a,{center:!0,className:"!p-0"});var d=null===u||void 0===u?void 0:u.records.find((function(e){return e.id===t}));if(!d)return(0,s.jsx)("span",{className:"break-normal text-sm",children:(0,n.t)("deactivated_member")});var p=d.first_name,f=d.name,m=d.avatar_url;return(0,s.jsxs)(s.Fragment,{children:[!r&&(0,s.jsx)("span",{className:"pl-3",children:(0,s.jsx)("div",{className:"float-left",children:(0,s.jsx)(i.s,{size:"6",src:m,name:f})})}),(0,s.jsx)("span",{className:"break-normal text-sm",children:l?p:f})]})}},64298:(e,t,r)=>{"use strict";r.d(t,{C:()=>S});var n=r(67294),i=r(86013),o=r(88767),a=r(87561),s=r(34334),l=r(36298),c=r(67687),u=r(82177),d=r(69647),p=r(25856),f=r(87536),m=r(81786),b=r(8246),h=r(2298),v=r(85893),y="settings.workflows.one_time_schedule_modal",g=function(){var e=(0,f.Gc)().watch,t=Boolean(e("scheduler.last_run_at")),r=e("scheduler.last_run_at");return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(u.u_.Body,{children:[(0,v.jsx)(b.Z.LabelMd,{weight:"semibold",children:(0,i.t)([y,"date_and_time"])}),(0,v.jsx)("div",{className:"flex flex-col",children:(0,v.jsx)(c.l.Item,{name:"scheduler.last_run_at",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:" ",children:(0,v.jsx)(h.q,{name:"scheduler.last_run_at",datePlaceholder:(0,i.t)([y,"date"]),timePlaceholder:(0,i.t)([y,"time"]),minDate:new Date,dataTestId:"last_run_at"})})}),r&&(0,v.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,v.jsx)(b.Z.LabelSm,{weight:"medium",children:(0,i.t)("".concat(y,".summary"),{runAt:(0,l.w)({dateTime:new Date(r),format:"date_time_with_short_timezone"})})})})]}),(0,v.jsx)(u.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,v.jsx)(m.z,{variant:"circle",disabled:!t,children:(0,i.t)("".concat(y,".submit"))})})]})};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t,r,f=e.workflowId,m=e.onCancel,b=e.setIsConfirmContent,h=e.hasRuns,y=e.schedule,_=(0,d.p)(),j="settings.workflows.one_time_schedule_modal",O=w((0,n.useState)(!1),2),S=O[0],P=O[1],k=w((0,n.useState)({}),2),C=k[0],N=k[1],I=y.id,A=y.isReschedule,E=(0,o.useMutation)((function(e){return function(e,t,r){var n=new Date(r.scheduler.last_run_at).toISOString();return I?A?s.nH.reschedule({workflowId:e,id:I,body:{last_run_at:n,schedule_type:"one_time",do_not_skip_tasks:r.do_not_skip_tasks}}):s.nH.updateOneTimeSchedule({workflowId:e,id:I,body:{last_run_at:n,do_not_skip_tasks:r.do_not_skip_tasks}}):s.nH.createOneTimeSchedule({workflowId:e,body:{last_run_at:n}})}(f,0,e)}),{onSuccess:function(){b(!0)},onError:function(e){"message"in e&&_.error(null===e||void 0===e?void 0:e.message)}}),D=E.mutate,T=A?"":null===y||void 0===y?void 0:y.last_run_at;return S?(0,v.jsx)(p.R,{onSubmit:function(e){D(x(x({},C),e))},doNotSkipTasks:null!==(t=null===y||void 0===y||null===(r=y.do_not_skip_tasks)||void 0===r?void 0:r.toString())&&void 0!==t?t:"false",onCancel:m}):(0,v.jsxs)(u.u_.Content,{size:"md",children:[(0,v.jsxs)(u.u_.Header,{children:[(0,v.jsx)(u.u_.Title,{size:"md",children:(0,i.t)([j,"title"])}),(0,v.jsx)(u.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,v.jsx)(u.u_.CloseButton,{onClick:m})})]}),(0,v.jsx)(c.l,{defaultValues:{scheduler:{last_run_at:T}},validationSchema:a.Ry().shape({scheduler:a.Ry().shape({last_run_at:a.hT().required().min(new Date,(0,i.t)([j,"past_error"],{currentDateTime:(0,l.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})}),onSubmit:function(e){N(e),h?P(!0):D(e)},children:(0,v.jsx)(g,{})})]})}},25856:(e,t,r)=>{"use strict";r.d(t,{R:()=>u});var n=r(86013),i=r(96486),o=r(82177),a=r(81786),s=r(67687),l=r(18713),c=r(85893),u=function(e){var t=e.doNotSkipTasks,r=e.onCancel,u=e.onSubmit,d=e.onBack,p={do_not_skip_tasks:null!==t&&void 0!==t?t:"false"};return(0,c.jsxs)(o.u_.Content,{onClose:r,children:[(0,c.jsxs)(o.u_.Header,{children:[(0,c.jsx)(o.u_.Title,{children:(0,n.t)("settings.workflows.recurring_schedule_modal.rerun_settings")}),(0,c.jsx)(o.u_.CloseButton,{onClick:r}),(0,i.isFunction)(d)&&(0,c.jsx)(o.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,c.jsx)(o.u_.BackButton,{onClick:d})})]}),(0,c.jsx)(s.l,{defaultValues:p,onSubmit:u,children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,c.jsx)(l.n,{}),(0,c.jsx)(o.u_.Footer,{children:(0,c.jsx)(a.z,{variant:"circle",full:!0,large:!0,type:"submit",children:(0,n.t)("settings.workflows.rerun_modal.continue")})})]})})]})}},38695:(e,t,r)=>{"use strict";r.d(t,{L:()=>we});var n=r(67294),i=r(83894),o=r(87536),a=r(88767),s=r(38776),l=r(34334),c=r(42991),u=r(1881),d=r(39974),p=r(82177),f=r(69647),m=r(98338),b=function(){var e=(0,m.wh)().currentCommunitySettings;return Boolean(null===e||void 0===e?void 0:e.modify_schedule_enabled)},h=r(49546),v=r(96486),y=r(36298),g=r(18605),_=r(81786),x=r(8246),j=r(86013),w=r(67687),O=r(85893);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=e.name,r=e.label,n=e.value,i=(0,o.Gc)().register;return(0,O.jsxs)("label",{children:[(0,O.jsx)("input",P({type:"checkbox",value:n,className:"peer sr-only"},i(t))),(0,O.jsx)("span",{className:"border-disabled peer-checked:border-secondary peer-checked:bg-secondary flex flex-wrap items-center justify-center rounded-md border px-3 py-2 uppercase",children:(0,O.jsx)(x.Z.LabelXxs,{weight:"semibold",children:r})})]})}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=function(e){var t=e.days,r=A((0,n.useState)(!1),2),i=r[0],o=r[1];return(0,n.useEffect)((function(){o(!0)}),[]),i?(0,O.jsx)(w.l.Item,{name:"days_of_week",label:(0,j.t)(["settings.workflows.recurring_schedule_modal","repeats_every"]),hideBorder:!0,hideDescription:!0,labelClassName:"mb-2",children:(0,O.jsx)("div",{className:"flex flex-wrap justify-between gap-y-2",children:t.map((function(e){return(0,O.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:"days_of_week"},e),e.value)}))})}):null},T=r(49429),L=r(2298),M=r(94184),R=r.n(M),B=r(9198),U=r.n(B),F=r(1100),z=["minDate","maxDate","name","disabled","placeholder"],V=["value","ref"];function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function H(e){var t=e.minDate,r=e.maxDate,i=e.name,a=e.disabled,s=e.placeholder,l=W(e,z),c=(0,n.useRef)(null),u=(0,n.useRef)((0,v.uniqueId)("date-picker-portal-"));return(0,O.jsx)(o.Qr,{name:i,render:function(e){var n=e.field,i=n.value,o=n.ref,d=W(n,V),p=i?new Date(i):null,f=(0,F.l)([o,c]);return(0,O.jsxs)("div",{className:"relative mr-1",children:[(0,O.jsx)(U(),Z(Z({selected:p,dateFormat:"MMM d, yyyy",minDate:t,maxDate:r,disabled:a,placeholderText:s,ref:f,portalId:u,popperClassName:"!z-[1080] !w-auto",className:R()({"!bg-secondary !border-primary":a})},d),l)),(0,O.jsx)(g.JO,{type:"cheveron-down",className:"hover:text-darkest absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer",onClick:function(){var e,t;null===(e=c.current)||void 0===e||null===(t=e.input)||void 0===t||t.focus()}})]})}})}var Q="settings.workflows.recurring_schedule_modal",J="never",K=[{label:(0,j.t)([Q,J]),value:J},{label:(0,j.t)([Q,"on"]),value:"on"}],$=function(){var e=new Date;return e.setDate(e.getDate()-1),e};function X(){var e,t=(0,o.Gc)(),r=t.watch,i=t.setValue,a=b(),s=r("first_run_at"),l=r("last_run_at"),c=r("ends_on"),u=r("has_schedule_run_before"),d=(0,n.useMemo)((function(){return s?new Date(s):new Date}),[s]);(0,n.useEffect)((function(){c===J&&i("last_run_at",null)}),[c,i]);var p=u&&a;return(0,O.jsxs)("div",{className:"flex flex-col",children:[p?(0,O.jsx)(w.l.Item,{name:"next_run_at",label:(0,j.t)([Q,"time"]),hideDescription:!0,hideBorder:!0,children:(0,O.jsx)(L.q,{name:"next_run_at",timePlaceholder:(0,j.t)([Q,"select_time"]),maxDate:l?new Date(l):void 0,classNameDate:"hidden",classNameTime:"ml-[-0.25rem] w-full",minDate:$()})}):(0,O.jsx)(w.l.Item,{name:"first_run_at",label:(0,j.t)([Q,"first_run"]),hideDescription:!0,isDisabled:u,hideBorder:!0,children:(0,O.jsx)(L.q,{name:"first_run_at",datePlaceholder:(0,j.t)([Q,"select_date"]),timePlaceholder:(0,j.t)([Q,"select_time"]),maxDate:l?new Date(l):void 0,disabled:u})}),(0,O.jsxs)("div",{className:"flex gap-x-2",children:[(0,O.jsx)(w.l.Item,{name:"ends_on",label:(0,j.t)("settings.workflows.recurring_schedule_modal.ends"),hideDescription:!0,hideBorder:!0,className:"flex-1",children:(0,O.jsx)(T.N,{name:"ends_on",label:null,options:K})}),(0,O.jsx)(w.l.Item,{name:"last_run_at",emptyLabel:!0,hideDescription:!0,hideBorder:!0,placeholder:(0,j.t)([Q,"select_date"]),className:"flex-1",children:(0,O.jsx)(H,{name:"last_run_at",minDate:d,disabled:c===(null===(e=(0,v.head)(K))||void 0===e?void 0:e.value)})})]})]})}var Y="settings.workflows.recurring_schedule_modal",ee=function(e){var t=b();return{prefix:e&&t?(0,j.t)("".concat(Y,".workflow_already_started")):(0,j.t)("".concat(Y,".workflow_will_start_running")),midSection:e&&t?(0,j.t)("".concat(Y,".workflow_will_now_run")):(0,j.t)("".concat(Y,".once_started_workflow_will_run"))}},te="settings.workflows.recurring_schedule_modal",re=[{value:"monday",label:(0,j.t)([te,"mon"])},{value:"tuesday",label:(0,j.t)([te,"tue"])},{value:"wednesday",label:(0,j.t)([te,"wed"])},{value:"thursday",label:(0,j.t)([te,"thu"])},{value:"friday",label:(0,j.t)([te,"fri"])},{value:"saturday",label:(0,j.t)([te,"sat"])},{value:"sunday",label:(0,j.t)([te,"sun"])}];var ne={daily:"every_day_at_until",weekly:"every_week_on_until",monthly:"every_month_on_until",yearly:"every_year_on_until"},ie={daily:"every_day_at",weekly:"every_week_on",monthly:"every_month_on",yearly:"every_year_on"},oe=function(e){var t=e.data,r=e.onBack,n=e.onCancel,i=e.onPublish,o="true"==(null===t||void 0===t?void 0:t.do_not_skip_tasks)?(0,c.t)("settings.workflows.rerun_modal.all_members"):(0,c.t)("settings.workflows.rerun_modal.only_new_members"),a=t.ends_on,l=t.frequency,u=t.first_run_at,d=t.last_run_at,f=t.days_of_week,m=t.next_run_at,b=t.has_schedule_run_before,j=ee(b),w=j.prefix,S=j.midSection,P=b&&m?new Date(m):new Date(u),k=[{message:function(){var e=("on"===a?ne:ie)[l];(0,s.Z)(e,"Message by frequency should be selected.");var t=null;if("weekly"===l){var r=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),n=f.map((function(e){var t,r=null===(t=re.find((function(t){return t.value===e})))||void 0===t?void 0:t.label;return(0,v.capitalize)(r)}));t=r.format(n)}return(0,c.t)(["settings.workflows.recurring_schedule_modal",e],{start_time_at:(0,y.w)({dateTime:new Date(u),format:"date_time_with_short_timezone"}),end_time_at:(0,y.w)({dateTime:new Date(d),format:"long_date"}),day_of_month:u?(0,h.default)(new Date(u),"do"):null,repeat_days:t,prefix:w,mid_section:S,recurring_time:u?(0,y.w)({dateTime:new Date(u),format:"short_month_and_date"}):null,recurring_hour_minutes:(0,y.w)({dateTime:P,format:"short_time"})})}(),icon:"16-clock"},{message:o,icon:"16-members"}],C=b?(0,c.t)("settings.workflows.confirm_modal.modify_schedule"):(0,c.t)("settings.workflows.confirm_modal.schedule");return(0,O.jsxs)(p.u_.Content,{size:"md",children:[(0,O.jsxs)(p.u_.Header,{children:[(0,O.jsx)(p.u_.Title,{size:"md",children:(0,c.t)("settings.workflows.confirm_modal.schedule_summary")}),(0,O.jsx)(p.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,O.jsx)(p.u_.CloseButton,{onClick:n})}),(0,v.isFunction)(r)&&(0,O.jsx)(p.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,O.jsx)(p.u_.BackButton,{onClick:r})})]}),(0,O.jsx)(p.u_.Body,{children:(0,O.jsxs)("div",{className:"flex flex-col gap-y-5 pt-5",children:[(0,O.jsx)(x.Z.LabelMd,{weight:"semibold",children:(0,c.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,O.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:k.map((function(e){var t=e.message,r=e.icon;return(0,O.jsxs)("li",{className:"text-default flex items-center gap-x-2",children:[(0,O.jsx)(g.JO,{type:r,size:16,className:"mt-1 !h-4 !w-4 shrink-0 !self-start"}),(0,O.jsx)(x.Z.BodySm,{weight:"font-medium",children:t})]},t)}))})]})}),(0,O.jsx)(p.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,O.jsx)(_.z,{variant:"circle",onClick:i,children:C})})]})},ae=r(87561);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e){var t=e.i18n,r=e.isMessageVisible,n=e.variables,i=void 0===n?{}:n,a=(0,o.Gc)().watch,s=a("first_run_at"),l=a("last_run_at"),c=a("next_run_at"),u=a("ends_on"),d=a("has_schedule_run_before"),p=d?new Date(c):new Date(s),f=null!==r&&void 0!==r?r:!!s&&!("on"===u&&!l),m=ee(d),b=m.prefix,h=m.midSection;return(0,O.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,O.jsx)(X,{}),f&&(0,O.jsx)(x.Z.LabelSm,{weight:"medium",children:(0,j.t)(t,le({start_time_at:(0,y.w)({dateTime:new Date(s),format:"date_time_with_short_timezone"}),end_time_at:(0,y.w)({dateTime:new Date(l),format:"long_date"}),prefix:b,mid_section:h,recurring_hour_minutes:(0,y.w)({dateTime:p,format:"short_time"})},i))})]})}var de=function(e,t){return"on"===(0,(0,o.Gc)().watch)("ends_on")?e:t};var pe={daily:function(){var e=de("every_day_at_until","every_day_at");return(0,O.jsx)(ue,{i18n:["settings.workflows.recurring_schedule_modal",e]})},weekly:function(){var e=(0,o.Gc)().watch,t=e("first_run_at"),r=e("last_run_at"),i=e("next_run_at"),a=e("days_of_week"),s=e("ends_on"),l=e("has_schedule_run_before"),c=l?new Date(i):new Date(t),u="on"===s?"every_week_on_until":"every_week_on",d=ee(l),p=d.prefix,f=d.midSection,m=(0,n.useMemo)((function(){if(null===a||void 0===a||!a.length)return"";var e=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),t=a.map((function(e){var t,r=null===(t=re.find((function(t){return t.value===e})))||void 0===t?void 0:t.label;return(0,v.capitalize)(r)}));return e.format(t)}),[a]);return(0,O.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,O.jsxs)("div",{className:"flex flex-col",children:[(0,O.jsx)(D,{days:re}),(0,O.jsx)(X,{})]}),!!t&&!!a.length&&!("on"===s&&!r)&&(0,O.jsx)(x.Z.LabelSm,{weight:"medium",children:(0,j.t)([te,u],{start_time_at:(0,y.w)({dateTime:new Date(t),format:"date_time_with_short_timezone"}),end_time_at:(0,y.w)({dateTime:new Date(r),format:"long_date"}),repeat_days:m,prefix:p,mid_section:f,recurring_hour_minutes:(0,y.w)({dateTime:c,format:"short_time"})})})]})},monthly:function(){var e=(0,(0,o.Gc)().watch)("first_run_at"),t=de("every_month_on_until","every_month_on");return(0,O.jsx)(ue,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{day_of_month:e?(0,h.default)(new Date(e),"do"):null}})},yearly:function(){var e=(0,(0,o.Gc)().watch)("first_run_at"),t=de("every_year_on_until","every_year_on");return(0,O.jsx)(ue,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{recurring_time:e?(0,y.w)({dateTime:new Date(e),format:"short_month_and_date"}):null}})}};function fe(){var e=(0,(0,o.Gc)().watch)("frequency"),t=pe[e];return(0,O.jsx)(t,{})}var me=[{value:"daily",label:(0,j.t)("settings.workflows.recurring_schedule_modal.every_day")},{value:"weekly",label:(0,j.t)("settings.workflows.recurring_schedule_modal.every_week")},{value:"monthly",label:(0,j.t)("settings.workflows.recurring_schedule_modal.every_month")},{value:"yearly",label:(0,j.t)("settings.workflows.recurring_schedule_modal.every_year")}];function be(){var e=(0,o.Gc)().watch,t=e("frequency"),r=e("first_run_at"),i=e("last_run_at"),a=e("days_of_week"),s=e("ends_on"),l=(0,n.useMemo)((function(){return!!t&&(!("weekly"===t&&!a.length)&&(!("on"===s&&!i)&&Boolean(r)))}),[t,r,i,s,a]);return(0,O.jsxs)("div",{className:"flex flex-col gap-y-10",children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(w.l.Item,{name:"frequency",label:(0,j.t)("settings.workflows.recurring_schedule_modal.frequency"),hideDescription:!0,hideBorder:!0,children:(0,O.jsx)(T.N,{name:"frequency",label:null,options:me})}),(0,O.jsx)(fe,{})]}),(0,O.jsx)(_.z,{type:"submit",variant:"circle",disabled:!l,children:(0,j.t)("continue")})]})}var he=function(e){var t=e.schedule,r=e.formState,i=e.onSubmit,o=e.onCancel,a=t.isReschedule,s=(0,n.useMemo)((function(){return ae.Ry().shape({first_run_at:ae.Vo((function(){return null!==t&&void 0!==t&&t.has_run_but_not_completed?ae.hT().required():ae.hT().required().min(new Date,(0,j.t)(["settings.workflows.one_time_schedule_modal","past_error"],{currentDateTime:(0,y.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))}))})}),[null===t||void 0===t?void 0:t.has_run_but_not_completed]);return(0,O.jsxs)(p.u_.Content,{onClose:o,children:[(0,O.jsxs)(p.u_.Header,{children:[(0,O.jsx)(p.u_.Title,{children:(0,j.t)("".concat("settings.workflows.recurring_schedule_modal",".title"))}),(0,O.jsx)(p.u_.CloseButton,{onClick:o})]}),(0,O.jsx)(p.u_.Body,{className:"pb-6",children:(0,O.jsx)(w.l,{defaultValues:a?{frequency:"weekly",days_of_week:[],ends_on:"never"}:r||{frequency:(null===t||void 0===t?void 0:t.frequency)||"weekly",days_of_week:(null===t||void 0===t?void 0:t.days_of_week)||[],ends_on:null!==t&&void 0!==t&&t.last_run_at?"on":"never",first_run_at:null===t||void 0===t?void 0:t.first_run_at,last_run_at:null===t||void 0===t?void 0:t.last_run_at,next_run_at:null===t||void 0===t?void 0:t.next_run_at,has_schedule_run_before:null===t||void 0===t?void 0:t.has_run_but_not_completed},onSubmit:i,validationSchema:s,children:(0,O.jsx)(be,{})})})]})},ve=r(25856);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function we(e){var t,r,m,h=e.workflowId,v=e.onCancel,y=e.schedule,g=e.onPublish,_=e.isLoading,x=(0,f.p)(),j=(0,a.useQueryClient)(),w=(0,o.Gc)(),S=y.id,P=y.isReschedule,k=xe((0,n.useState)(!1),2),C=k[0],N=k[1],I=xe((0,n.useState)(null),2),A=I[0],E=I[1],D=xe((0,n.useState)(null),2),T=D[0],L=D[1],M=xe((0,u.k)(!1),2),R=M[0],B=M[1],U=b(),F=(0,a.useMutation)((function(e){return function(e,t){var r=t.last_run_at?(0,i.default)(new Date(t.last_run_at)).toISOString():null,n=t.next_run_at?new Date(t.next_run_at).toISOString():null,o=new Date(t.first_run_at).toISOString(),a=Intl.DateTimeFormat().resolvedOptions().timeZone,s=t.frequency,c=t.days_of_week,u=t.do_not_skip_tasks;return S?P?l.nH.reschedule({workflowId:e,id:S,body:{last_run_at:r,first_run_at:o,frequency:s,days_of_week:c,schedule_type:"recurring",do_not_skip_tasks:u,tz:a}}):l.nH.updateRecurringSchedule({workflowId:e,id:S,body:ge({last_run_at:r,first_run_at:o,frequency:s,days_of_week:c,do_not_skip_tasks:u,tz:a},U&&{next_run_at:n})}):l.nH.createRecurringSchedule({workflowId:e,body:{last_run_at:r,first_run_at:o,frequency:s,days_of_week:c,do_not_skip_tasks:u,tz:a}})}(h,e)}),{onSuccess:function(e){B(),w.setValue("schedule",e),j.invalidateQueries(["workflows",h])},onError:function(e){"message"in e&&x.error(null===e||void 0===e?void 0:e.message)}}).mutate,z=function(e){L(e),(0,s.Z)(A,"formData should be defined on rerun submit"),F(ge(ge({},A),e))};if(_)return(0,O.jsx)(p.u_.Content,{children:(0,O.jsx)(p.u_.Body,{className:"w-full !px-10 !py-16",children:(0,O.jsx)(d.u,{title:(0,c.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,c.t)("settings.workflows.we_are_preparing")})})});if(null!==A&&void 0!==A&&A.has_schedule_run_before&&U){var V=y.do_not_skip_tasks?"true":"false";return(0,O.jsx)(oe,{onCancel:v,onBack:v,onPublish:function(){z({do_not_skip_tasks:V}),g()},data:ge(ge({},A),{},{do_not_skip_tasks:V})})}return R&&T&&A?(0,O.jsx)(oe,{onCancel:v,onBack:B,onPublish:g,data:ge(ge({},A),T)}):C&&A?(0,O.jsx)(ve.R,{doNotSkipTasks:null!==(t=null!==(r=null===T||void 0===T?void 0:T.do_not_skip_tasks)&&void 0!==r?r:null===(m=y.do_not_skip_tasks)||void 0===m?void 0:m.toString())&&void 0!==t?t:"false",onCancel:v,onSubmit:z,onBack:function(){N(!1),L(null)}}):(0,O.jsx)(he,{schedule:y,formState:A,onCancel:v,onSubmit:function(e){E(e),N(!0)}})}},18713:(e,t,r)=>{"use strict";r.d(t,{n:()=>m});var n=r(86013),i=r(87536),o=r(99882),a=r(82177),s=r(28895),l=r(8246),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="settings.workflows.rerun_modal.form",f=[{value:"true",label:(0,n.t)([p,"include_all_members.title"]),description:(0,n.t)([p,"include_all_members.description"])},{value:"false",label:(0,n.t)([p,"only_new_members.title"]),description:(0,n.t)([p,"only_new_members.description"])}],m=function(){var e=(0,i.Gc)().register;return(0,c.jsxs)(a.u_.Body,{children:[(0,c.jsx)(l.Z.LabelMd,{weight:"semibold",children:(0,n.t)([p,"title"])}),(0,c.jsx)("div",{className:"flex flex-col pt-5",children:(0,c.jsx)(o.p,{children:f.map((function(t){var r=t.value,n=t.label,i=t.description;return(0,c.jsx)(s.Y,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"rerunbody-radio-".concat(r),label:n,description:i,value:r},e("do_not_skip_tasks")),r)}))})})]})}},2298:(e,t,r)=>{"use strict";r.d(t,{q:()=>d});var n=r(67294),i=r(96486),o=r(58249),a=r(85893),s=["name","minDate"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d(e){var t=e.name,r=e.minDate,d=void 0===r?new Date:r,p=u(e,s),f=(0,n.useRef)((0,i.uniqueId)("date-time-picker-portal-")).current;return(0,a.jsx)(o.x,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:t,portalId:f,popperClassName:"!z-[1080] !w-auto",minDate:d},p))}},13976:(e,t,r)=>{"use strict";r.d(t,{W:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.className;return(0,o.jsx)("main",{className:i()("bg-primary flex h-full flex-col",r),children:t})}},37223:(e,t,r)=>{"use strict";r.d(t,{H:()=>F});var n=r(94184),i=r.n(n),o=r(24185),a=r(86013),s=r(50732),l=r(18605),c=r(8246),u=r(85893),d=function(e){var t=e.shouldTruncate,r=void 0===t||t,n=e.children,i=r?{display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical",overflow:"hidden"}:{};return(0,u.jsx)("div",{style:i,children:(0,u.jsx)(c.Z.LabelLg,{weight:"semibold",children:n})})},p=r(67294),f=r(23560),m=r.n(f),b=r(20290);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=function(e){var t=e.children,r=e.onClick,n=e.centerContent,o=void 0!==n&&n,a=m()(r),s=(0,b.h)(),l=a?{role:"button",onClick:r}:{};return(0,u.jsx)("div",v(v({className:i()("bg-primary border-primary hover:shadow-xs hover:border-secondary flex w-full max-w-xs flex-col gap-5 border p-5 transition-colors duration-75",{"cursor-pointer":a,"items-center justify-center text-center":o,"h-[205px] rounded-lg":!s,"h-auto w-[314px] rounded-xl":s})},l),{},{children:t}))};var _,x=function(){var e=(0,o.k6)();return(0,u.jsxs)(g,{onClick:function(){e.push(s.o0.select_type())},centerContent:!0,children:[(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("div",{className:"text-default bg-secondary flex h-10 min-w-[2.5rem] cursor-pointer items-center justify-center rounded-full",children:(0,u.jsx)(l.JO,{type:"plus-v2",size:16,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})})}),(0,u.jsx)("div",{className:"flex",children:(0,u.jsx)(d,{children:(0,a.t)("settings.onboarding.tabs.workflows.actions.create_custom")})})]})},j=r(44579),w=r(87763),O=r(21439),S=r(61284),P=r(94281);function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C="settings.workflows.templates",N=(k(_={},S.nQ.DYNAMIC,{color:"text-[#9F15E0]",backgroundColor:"bg-[#9F15E00F]"}),k(_,S.nQ.BULK_ACTION,{color:"text-[#0A7A9D]",backgroundColor:"bg-[#0A7A9D14]"}),k(_,"default",{color:"text-default",backgroundColor:"bg-tertiary"}),_),I=function(e){var t=e.type,r=void 0===t?"":t,n=N[r]||N.default,o=n.color,s=n.backgroundColor;return(0,u.jsx)(P.T,{content:"".concat((0,a.t)([C,"workflow_type"]),": ").concat((0,a.t)([C,r],{defaultValue:r})),placement:"top",children:(0,u.jsxs)("span",{className:i()("inline-flex items-center gap-1 rounded py-0.5 pl-1 pr-1.5",s),children:[(0,u.jsx)("span",{className:"flex",children:(0,u.jsx)(l.JO,{type:"12-lightning",size:12,className:i()("!h-3 !w-3",o)})}),(0,u.jsx)("span",{className:i()("flex items-center text-[0.7rem] font-semibold uppercase",o),children:(0,a.t)([C,r],{defaultValue:r})})]})})},A=function(e){var t=e.name,r=e.templateType,n=e.trigger,i=e.audience,o=e.actions,a=void 0===o?[]:o,s=e.onClick,l=(0,O.Q)(a),c=l.length>0;return(0,u.jsxs)(g,{onClick:s,children:[(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)(w.$,{trigger:n,audience:i,workflowType:r}),c&&(0,u.jsx)(j.W,{actions:l})]}),(0,u.jsxs)("div",{className:"flex h-full flex-col justify-between gap-2",children:[(0,u.jsx)("div",{className:"flex",children:(0,u.jsx)(d,{children:t})}),r&&(0,u.jsx)("div",{className:"flex h-5",children:(0,u.jsx)(I,{type:r})})]})]})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){var t=e.id,r=e.category,n=e.title,a=e.description,s=e.includeCreateButton,l=e.templates,d=void 0===l?[]:l,p=e.className,f=(0,o.k6)();return(0,u.jsxs)("div",{id:t,className:i()("flex max-w-[62rem] flex-col gap-7",p),children:[!r&&(0,u.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,u.jsx)("div",{children:(0,u.jsx)(c.Z.TitleMd,{children:n})}),a&&(0,u.jsx)("div",{children:(0,u.jsx)(c.Z.LabelMd,{color:"text-default",children:a})})]}),(0,u.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[s&&(0,u.jsx)(x,{}),d.map((function(e){return(0,u.jsx)(A,D(D({},e),{},{templateType:e.template_type,onClick:function(){return t=e.id,r="/settings/workflows/new/preview/".concat(t),void f.push(r);var t,r}}),e.id)}))]})]})},M=r(91389),R="settings.workflows.templates";function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){var t,r=e.category,n=e.includeCreateButton,i=void 0!==n&&n,o=(t=(0,M.r)().templates,{templateGroups:(0,p.useMemo)((function(){var e=t.filter((function(e){return e.recommended})),r={id:"category-recommended",title:(0,a.t)([R,"categories","recommended"]),templates:e};return t.reduce((function(e,t){var r=t.category,n=e.find((function(e){return e.id==="category-".concat(r)}));return n?n.templates.push(t):e.push({id:"category-".concat(r),title:(0,a.t)([R,"categories",r],{defaultValue:r}),templates:[t]}),e}),[r])}),[t])}),s=o.templateGroups,l=r?s.filter((function(e){return e.id==="category-".concat(r)})):s;return(0,u.jsx)("div",{className:"flex flex-col pb-12",children:l.map((function(e){return(0,u.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({category:r,includeCreateButton:i,className:"pt-8 md:pt-16 md:first:pt-6"},e),e.id)}))})}},91389:(e,t,r)=>{"use strict";r.d(t,{N:()=>p,r:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(34334),l=r(41255),c=function(e){var t=(0,l.Z)(),r=(0,a.useInfiniteQuery)("workflow-templates-list",(function(t){var r,n=t.pageParam;return r={page:void 0===n?1:n,per_page:100,v2_2_enabled:!0},e&&(r.category=e),s.nH.templates({params:r})}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),n=r.data,i=r.isLoading,c=r.fetchNextPage,u=(null===n||void 0===n?void 0:n.pages)||[],d=o()(u.map((function(e){return e.records})));return{templates:t?d:d.filter((function(e){return e.released})),isLoading:i,fetchNextPage:c}},u=r(85893),d=(0,n.createContext)({templates:[],isLoadingTemplates:!1,selectedTemplateId:void 0});d.displayName="WorkflowFormData";var p=function(e){var t=e.children,r=e.category,n=c(r),i=n.templates,o=n.isLoading;return(0,u.jsx)(d.Provider,{value:{templates:i,isLoadingTemplates:o},children:t})};p.defaultProps={category:void 0};var f=function(){return(0,n.useContext)(d)}},87092:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var n=r(67294),i=r(86013),o=r(17758),a=r(85893),s="settings.workflows.view.header",l=function(e){var t=e.isDisabled,r=e.isLoading,l=e.isWorkflowActive,c=e.hasNoActions,u=e.hasActionsUnsaved,d=e.isDraft,p=void 0!==d&&d,f=e.onChange,m=(0,n.useCallback)((function(){return u?(0,i.t)([s,"incomplete_actions_message"]):p?(0,i.t)([s,"disabled_tooltip"]):c?(0,i.t)([s,"has_no_actions_message"]):(0,i.t)([s,"off_tooltip"])}),[u,c,p]),b=(0,n.useCallback)((function(e){null===f||void 0===f||f(e)}),[f]);return(0,a.jsx)(o.J,{isChecked:l,checkedLabel:(0,i.t)([s,"on_value"]),uncheckedLabel:(0,i.t)([s,"off_value"]),tooltipCheckedLabel:(0,i.t)([s,"on_tooltip"]),tooltipUncheckedLabel:m(),tooltipPlacement:"bottom",isLoading:r,isDisabled:t,onChange:b,containerClassName:"mx-auto",className:""})}},85309:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var n=r(61284),i=function(e){return e===n.qN.IN_PROGRESS||e===n.qN.ACTIVE}},31476:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(85309),i=r(56339),o=r(80041),a=function(){var e=(0,o.D)(),t=e.id,r=e.isDynamic,a=e.status,s=(0,i.C)({workflowId:r?void 0:t,disableRefetching:!0}),l=s.areAllRunsCompleted,c=s.isLoading;return r?{result:(0,n.H)(a)}:{result:!l,isLoading:c}}},74327:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var n=r(13288),i=r(8246),o=r(87436),a=r(94184),s=r.n(a),l=r(85893),c=function(e){var t=e.className,r=e.children;return(0,l.jsx)("div",{className:s()("flex flex-col gap-6",t),children:r})};c.Section=function(e){var t=e.className,r=e.children;return(0,l.jsx)("div",{className:s()("flex flex-col gap-2",t),children:r})},c.Title=function(e){var t=e.children;return(0,l.jsx)("div",{children:(0,l.jsx)(i.Z.LabelSm,{weight:"semibold",children:t})})};var u=function(e){var t=e.label,r=e.value,n=e.isLoading,i=e.shouldRepresentAsBadge,o=void 0!==i&&i;return(0,l.jsx)(c,{children:(0,l.jsxs)(c.Section,{children:[(0,l.jsx)(c.Title,{children:t}),(0,l.jsx)("div",{children:o?(0,l.jsx)(d,{value:r,isLoading:n}):(0,l.jsx)(p,{value:r,isLoading:n})})]})})},d=function(e){var t=e.value;return e.isLoading?(0,l.jsx)(o.C,{isLoading:!0}):(0,l.jsx)(o.C,{text:t})},p=function(e){var t=e.value;return e.isLoading?(0,l.jsx)(n.a,{}):(0,l.jsx)(i.Z.LabelSm,{children:t})}},92060:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(86013),i=r(74327),o=r(85893),a=function(e){var t=e.resourceId,r=String(t);return(0,o.jsx)(i.i,{label:(0,n.t)("settings.workflows.form.events.community_member_joined_community.community_id"),value:r})}},95679:(e,t,r)=>{"use strict";r.d(t,{E:()=>u});var n=r(67294),i=r(87536),o=r(98338),a=r(85893);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){var e=(0,i.Gc)(),t=e.register,r=e.getValues,s=e.setValue,c=(0,o.wh)(),u=c.currentCommunity,d=c.isLoading,p=r("trigger.resource_id");return(0,n.useEffect)((function(){d||p||(s("trigger.resource_type","Community"),s("trigger.resource_id",u.id))}),[u,d,s,p]),d?null:(0,a.jsxs)("div",{className:"hidden",children:[(0,a.jsx)("input",l({type:"hidden"},t("trigger.resource_type"))),(0,a.jsx)("input",l({type:"hidden"},t("trigger.resource_id")))]})}},15562:(e,t,r)=>{"use strict";r.d(t,{T:()=>l,d:()=>u});var n=r(86013),i=r(49429),o=r(8246),a=r(85893),s="settings.workflows.form",l="all_contacts",c=[{value:"members",label:(0,n.t)([s,"audience_type_options.members"])},{value:"non_members",label:(0,n.t)([s,"audience_type_options.non_members"])},{value:l,label:(0,n.t)([s,"audience_type_options.all_contacts"])}],u=function(){return(0,a.jsx)(i.N,{name:"trigger.contact_type",options:c,initialValue:l,label:(0,a.jsx)(o.Z.LabelSm,{weight:"semibold",children:(0,n.t)([s,"audience_type"])})})}},90404:(e,t,r)=>{"use strict";r.d(t,{ey:()=>s,ES:()=>f,dP:()=>v,UP:()=>C,NB:()=>P,NX:()=>I});var n=r(86013),i=r(61284),o=r(40154),a=r(96642),s={label:(0,n.t)("settings.workflows.form.events.community_member_completed_course.title"),value:"community_member_completed_course",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_course.description"),resource:i.uN.COURSE,formComponent:o.u,viewComponent:a.A,icon:"course"},l=r(39863),c=r(44275),u=r(85893),d="settings.workflows.form.entity_type.lesson",p=[{value:i.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])},{value:i.uN.LESSON,label:(0,n.t)([d,"specific_lesson.title"]),description:(0,n.t)([d,"specific_lesson.description"])}],f={label:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.title"),value:"community_member_completed_lesson",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.description"),resource:i.uN.LESSON,formComponent:function(){return(0,u.jsx)(c.X,{entityTypeOptions:p,resourceType:i.S7.COURSE})},viewComponent:l.k,icon:"course"},m="settings.workflows.form.entity_type.section",b=[{value:i.uN.COMMUNITY,label:(0,n.t)([m,"community.title"]),description:(0,n.t)([m,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([m,"space_group.title"]),description:(0,n.t)([m,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([m,"space.title"]),description:(0,n.t)([m,"space.description"])},{value:i.uN.SECTION,label:(0,n.t)([m,"specific_section.title"]),description:(0,n.t)([m,"specific_section.description"])}],h="settings.workflows.form",v={label:(0,n.t)([h,"events.community_member_completed_section.title"]),value:"community_member_completed_section",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([h,"events.community_member_completed_section.description"]),resource:i.uN.SECTION,formComponent:function(){return(0,u.jsx)(c.X,{entityTypeOptions:b,resourceType:i.S7.COURSE})},viewComponent:l.k,icon:"course"},y=r(88767),g=r(50732),_=r(74327),x=function(e){var t=e.resourceId,r=(0,y.useQuery)(g.av.settings.courses.lessons.show({id:t})),i=r.data,o=r.isLoading;return(0,u.jsx)(_.i,{label:(0,n.t)("settings.workflows.view.resources.quiz"),value:null===i||void 0===i?void 0:i.name,isLoading:o})},j="settings.workflows.form.entity_type.quiz",w=[{value:i.uN.COMMUNITY,label:(0,n.t)([j,"community.title"]),description:(0,n.t)([j,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([j,"space_group.title"]),description:(0,n.t)([j,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([j,"space.title"]),description:(0,n.t)([j,"space.description"])},{value:i.uN.QUIZ,label:(0,n.t)([j,"specific_quiz.title"]),description:(0,n.t)([j,"specific_quiz.description"])}],O=function(){return(0,u.jsx)(c.X,{entityTypeOptions:w,resourceType:i.S7.COURSE,isQuizSelector:!0})},S="settings.workflows.form",P={label:(0,n.t)([S,"events.community_member_passed_quiz.title"]),value:"community_member_passed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([S,"events.community_member_passed_quiz.description"]),resource:i.uN.QUIZ,formComponent:O,viewComponent:x,icon:"course",released:!0},k="settings.workflows.form",C={label:(0,n.t)([k,"events.community_member_failed_quiz.title"]),value:"community_member_failed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([k,"events.community_member_failed_quiz.description"]),resource:i.uN.QUIZ,formComponent:O,viewComponent:x,icon:"course",released:!0},N="settings.workflows.form",I={label:(0,n.t)([N,"events.community_member_submitted_quiz.title"]),value:"community_member_submitted_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([N,"events.community_member_submitted_quiz.description"]),resource:i.uN.QUIZ,formComponent:O,viewComponent:x,icon:"course",released:!0}},39863:(e,t,r)=>{"use strict";r.d(t,{k:()=>x});var n,i=r(61284),o=r(92060),a=r(86013),s=r(88767),l=r(50732),c=r(74327),u=r(85893),d=r(81236),p=r(76748),f=r(96642),m=r(8277),b=["resourceType"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(g(n={},i.uN.COMMUNITY,o.H),g(n,i.uN.SPACE_GROUP,m.T),g(n,i.uN.SPACE,f.A),g(n,i.uN.POST_BASIC,(function(e){var t=e.resourceId,r=(0,s.useQuery)(p.v.posts.show({id:String(t)})),n=r.data,i=r.isLoading;return(0,u.jsx)(c.i,{label:(0,a.t)("settings.workflows.view.resources.post"),value:null===n||void 0===n?void 0:n.name,isLoading:i})})),g(n,i.uN.EVENT,d.B),g(n,i.uN.LESSON,(function(e){var t=e.resourceId,r=(0,s.useQuery)(l.av.settings.courses.lessons.show({id:t})),n=r.data,i=r.isLoading;return(0,u.jsx)(c.i,{label:(0,a.t)("settings.workflows.view.resources.lesson"),value:null===n||void 0===n?void 0:n.name,isLoading:i})})),g(n,i.uN.SECTION,(function(e){var t=e.resourceId,r=(0,s.useQuery)(l.av.settings.courses.sections.show({id:t})),n=r.data,i=r.isLoading;return(0,u.jsx)(c.i,{label:(0,a.t)("settings.workflows.view.resources.section"),value:null===n||void 0===n?void 0:n.name,isLoading:i})})),n),x=function(e){var t=e.resourceType,r=y(e,b),n=_[t]||null;return(0,u.jsx)(u.Fragment,{children:n&&(0,u.jsx)(n,v({resourceType:t},r))})}},44275:(e,t,r)=>{"use strict";r.d(t,{X:()=>oe});var n=r(86013),i=r(61284),o=r(49429),a=r(8246),s=r(95679),l=r(87536),c=r(67294),u=r(96486),d=r(23279),p=r.n(d),f=r(88767),m=r(81089),b=r(50732),h=r(69647);function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){return{label:e.name,value:e.id,description:"".concat(e.course_name," \u2022 ").concat(e.section_name)}},j=function(e){var t,r=e.selectedLessonId,i=e.onlyQuizzes,o=void 0!==i&&i,a=y((0,c.useState)(""),2),s=a[0],l=a[1],d=function(e){var t=e.name,r=e.onlyQuizzes,i=void 0!==r&&r,o=(0,h.p)().error;return(0,f.useQuery)(["workflows","list","lessons",t],(function(){return(0,m.UT)(i?b.av.settings.courses.quizzes.index({params:{name:t}}):b.av.settings.courses.lessons.index({params:{name:t}}))}),{onError:function(){return o((0,n.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))}})}({name:s,onlyQuizzes:o}),g=d.data,_=d.isLoading,j=function(e){var t=e.lessonId,r=(0,h.p)().error;return(0,f.useQuery)(["workflows","list","lessons",t],(function(){return(0,m.UT)(b.av.settings.courses.lessons.show({id:t}))}),{onError:function(){return r((0,n.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))},enabled:!!t})}({lessonId:r}),w=j.data,O=j.isLoading,S=j.isSuccess,P=(null!==(t=null===g||void 0===g?void 0:g.records)&&void 0!==t?t:[]).map(x);return w&&!O&&S&&(P=(0,u.uniqBy)([].concat(v(P),[x(w)]),"value")),{isLoading:_||O,lessonOptions:P,handleLessonTitleChange:p()((function(e){return l(e)}),500)}},w=r(85893);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N=function(e){return{label:e.name,value:e.id,description:e.course_name}},I=function(e){var t,r=e.selectedSectionId,i=k((0,c.useState)(""),2),o=i[0],a=i[1],s=function(e){var t=e.name,r=(0,h.p)().error;return(0,f.useQuery)(["workflows","list","sections",t],(function(){return(0,m.UT)(b.av.settings.courses.sections.index({params:{name:t}}))}),{onError:function(){return r((0,n.t)(["settings.workflows.form","errors","sections","fetch_failed"]))}})}({name:o}),l=s.data,u=s.isLoading,d=function(e){var t=e.sectionId,r=(0,h.p)().error;return(0,f.useQuery)(["workflows","list","sections",t],(function(){return(0,m.UT)(b.av.settings.courses.sections.show({id:t}))}),{onError:function(){return r((0,n.t)(["settings.workflows.form","errors","sections","fetch_failed"]))},enabled:!!t})}({sectionId:r}),v=d.data,y=d.isLoading,g=d.isSuccess,_=(null!==(t=null===l||void 0===l?void 0:l.records)&&void 0!==t?t:[]).map(N);return v&&!y&&g&&_.push(N(v)),{isLoading:u||y,sectionOptions:_,handleSectionTitleChange:p()((function(e){return a(e)}),500)}};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T="settings.workflows.form",L=r(7288),M=r(13288);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=r(10245),z=r(76748);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){return{label:e.display_title,value:e.id,description:"".concat(e.space_name," \u2022 ").concat(e.community_member.name)}},G=function(e){var t,r,n=e.selectedPostId,i=V((0,c.useState)(""),2),o=i[0],a=i[1],s=(0,F.k)({title:o}),l=s.posts,u=s.isLoadingPosts,d=(t=n,{post:(r=(0,f.useQuery)(["post",t],(function(){return(0,m.UT)(z.v.posts.show({id:t}))}),{enabled:!!t})).data,isLoadingPost:r.isLoading,isPostLoaded:r.isSuccess}),b=d.post,h=d.isLoadingPost,v=d.isPostLoaded,y=l.map(Z);return b&&!h&&v&&y.push(Z(b)),{isLoading:u||h,postOptions:y,handlePostTitleChange:p()((function(e){return a(e)}),500)}};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J,K=r(40154),$=r(73267),X=r(54447),Y=["entityTypeOptions"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=(ne(J={},i.uN.COMMUNITY,s.E),ne(J,i.uN.SPACE_GROUP,X.D),ne(J,i.uN.SPACE,$.r),ne(J,i.uN.COURSE_SPACE,K.u),ne(J,i.uN.POST_BASIC,(function(){var e,t=(0,l.Gc)(),r=t.formState.touchedFields,i=t.register,s=t.getValues,c=(null===(e=r.trigger)||void 0===e?void 0:e.resource_type)?null:s("trigger.resource_id"),u=G({selectedPostId:c}),d=u.isLoading,p=u.postOptions,f=u.handlePostTitleChange;return d?(0,w.jsx)(M.a,{center:!0}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",H({type:"hidden",className:"hidden"},i("trigger.resource_type"))),(0,w.jsx)(o.N,{name:"trigger.resource_id",label:(0,w.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_post"])}),options:p,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.posts.not_found"),onSearchChange:f})]})})),ne(J,i.uN.EVENT,(function(){var e,t=(0,l.Gc)().register,r=(0,L.i)({per_page:100}),i=r.data,s=r.isLoading,c=r.isError,u=null===i||void 0===i||null===(e=i.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,i=e.start_date,o=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,n.t)("settings.workflows.form.recurring_label")):e.name,value:o,description:e.paid_event?"".concat(String(r)," \u2022 ").concat(String(i)," \u2022 ").concat(e.ticket_price):"".concat(String(r)," \u2022 ").concat(String(i))}}));return s?(0,w.jsx)(M.a,{center:!0}):c?(0,w.jsx)(a.Z.LabelXs,{children:(0,w.jsx)("span",{className:"text-v2-danger",children:(0,n.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"hidden",children:(0,w.jsx)("input",B({type:"hidden"},t("trigger.resource_type")))}),(0,w.jsx)(o.N,{name:"trigger.resource_id",label:(0,w.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_event")}),options:u,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})})),ne(J,i.uN.LESSON,(function(e){var t,r=e.isQuizSelector,i=(0,l.Gc)(),s=i.formState.touchedFields,c=i.register,u=i.getValues,d=(null===(t=s.trigger)||void 0===t?void 0:t.resource_type)?null:u("trigger.resource_id"),p=j({selectedLessonId:d,onlyQuizzes:r}),f=p.lessonOptions,m=p.handleLessonTitleChange;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",S({type:"hidden",className:"hidden"},c("trigger.resource_type"))),(0,w.jsx)(o.N,{name:"trigger.resource_id",label:(0,w.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form",r?"choose_quiz":"choose_lesson"])}),options:f,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)(r?"settings.workflows.form.errors.quizzes.not_found":"settings.workflows.form.errors.lessons.not_found"),onSearchChange:m})]})})),ne(J,i.uN.SECTION,(function(){var e,t=(0,l.Gc)(),r=t.formState.touchedFields,i=t.register,s=t.getValues,c=(null===(e=r.trigger)||void 0===e?void 0:e.resource_type)?null:s("trigger.resource_id"),u=I({selectedSectionId:c}),d=u.sectionOptions,p=u.handleSectionTitleChange;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",E({type:"hidden",className:"hidden"},i("trigger.resource_type"))),(0,w.jsx)(o.N,{name:"trigger.resource_id",label:(0,w.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.t)([T,"choose_section"])}),options:d,rules:{required:(0,n.t)([T,"errors.required"])},emptyMessage:(0,n.t)([T,"errors.sections.not_found"]),onSearchChange:p})]})})),J),oe=function(e){var t,r,i,s=e.entityTypeOptions,c=re(e,Y),u=(t=(0,l.Gc)(),r=t.watch,i=t.setValue,{resourceType:r("trigger.resource_type"),handleEntitySelectorChange:function(){i("trigger.resource_id",null)}}),d=u.handleEntitySelectorChange,p=ie[u.resourceType]||null;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.N,{name:"trigger.resource_type",options:s,label:(0,w.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_entity"])}),onChange:d}),p&&(0,w.jsx)(p,te({},c))]})}},44677:(e,t,r)=>{"use strict";r.d(t,{BP:()=>h,OC:()=>b,Q4:()=>P,Zo:()=>m,PJ:()=>D});var n=r(86013),i=r(39863),o=r(61284),a=r(44275),s=r(27941),l=r(85893);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u,d="settings.workflows.form.entity_type.event",p=[].concat(function(e){if(Array.isArray(e))return c(e)}(u=s.L)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(u)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{value:o.uN.EVENT,label:(0,n.t)([d,"event.title"]),description:(0,n.t)([d,"event.description"])}]),f=function(){return(0,l.jsx)(a.X,{entityTypeOptions:p,resourceType:o.S7.EVENT})},m={label:(0,n.t)("settings.workflows.form.events.community_member_rsvps_to_event.title"),value:"community_member_rsvps_to_event",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.community_member_rsvps_to_event.description"),formComponent:f,viewComponent:i.k,icon:"event"},b={label:(0,n.t)("settings.workflows.form.events.event_starts_in_an_hour.title"),value:"event_starts_in_an_hour",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.event_starts_in_an_hour.description"),formComponent:f,viewComponent:i.k,icon:"event"},h={label:(0,n.t)("settings.workflows.form.events.event_ended_for_member.title"),value:"event_ended_for_member",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.event_ended_for_member.description"),formComponent:f,viewComponent:i.k,icon:"event",released:!0},v=r(7288),y=r(87536),g=r(49429),_=r(13288),x=r(8246);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=r(81236),P={label:(0,n.t)("settings.workflows.form.events.community_member_attended_live_event.title"),value:"community_member_attended_live_event",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.community_member_attended_live_event.description"),resource:o.uN.EVENT,formComponent:function(){var e,t=(0,y.Gc)().register,r=(0,v.i)({per_page:100,location_type:"live"}),i=r.data,o=r.isLoading,a=r.isError,s=null===i||void 0===i||null===(e=i.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,i=e.start_date,o=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,n.t)("settings.workflows.form.recurring_label")):e.name,value:o,description:e.paid_event?"".concat(String(r)," \u2022 ").concat(String(i)," \u2022 ").concat(e.ticket_price):"".concat(String(r)," \u2022 ").concat(String(i))}}));return o?(0,l.jsx)(_.a,{center:!0}):a?(0,l.jsx)(x.Z.LabelXs,{children:(0,l.jsx)("span",{className:"text-v2-danger",children:(0,n.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden",children:(0,l.jsx)("input",w({type:"hidden"},t("trigger.resource_type")))}),(0,l.jsx)(g.N,{name:"trigger.resource_id",label:(0,l.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_event")}),options:s,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:S.B,icon:"event",released:!0},k=r(88767),C=r(76748),N=r(74327);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D={label:(0,n.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.title"),value:"community_member_rsvps_to_recurring_event",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.description"),resource:o.uN.RECURRING_EVENT_SETTING,formComponent:function(){var e,t=(0,y.Gc)().register,r=(0,v.i)({per_page:100,location_type:"recurring"}),i=r.data,o=r.isLoading,a=r.isError,s=null===i||void 0===i||null===(e=i.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,n=e.start_date;return{label:t,value:e.recurring_event_setting_id,description:e.paid_event?"".concat(String(r)," \u2022 ").concat(String(n)," \u2022 ").concat(e.ticket_price):"".concat(String(r)," \u2022 ").concat(String(n))}}));return o?(0,l.jsx)(_.a,{center:!0}):a?(0,l.jsx)(x.Z.LabelXs,{children:(0,l.jsx)("span",{className:"text-v2-danger",children:(0,n.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden",children:(0,l.jsx)("input",A({type:"hidden"},t("trigger.resource_type")))}),(0,l.jsx)(g.N,{name:"trigger.resource_id",label:(0,l.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_event")}),options:s,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,k.useQuery)(C.v.recurringEventSettings.show({id:String(t)})),i=r.data,o=r.isLoading;return(0,l.jsx)(N.i,{label:(0,n.t)("settings.workflows.view.resources.event"),value:null===i||void 0===i?void 0:i.name,isLoading:o})},icon:"event"}},27941:(e,t,r)=>{"use strict";r.d(t,{L:()=>l,d:()=>c});var n=r(86013),i=r(61284),o=r(44275),a=r(85893),s="settings.workflows.form.entity_type.event",l=[{value:i.uN.COMMUNITY,label:(0,n.t)([s,"community.title"]),description:(0,n.t)([s,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([s,"space_group.title"]),description:(0,n.t)([s,"space_group.description"])},{value:i.uN.SPACE,label:(0,n.t)([s,"space.title"]),description:(0,n.t)([s,"space.description"])}],c=function(){return(0,a.jsx)(o.X,{entityTypeOptions:l,resourceType:i.S7.EVENT})}},81236:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n=r(86013),i=r(88767),o=r(76748),a=r(74327),s=r(85893),l=function(e){var t=e.resourceId,r=(0,i.useQuery)(o.v.events.show({id:String(t)})),l=r.data,c=r.isLoading;return(0,s.jsx)(a.i,{label:(0,n.t)("settings.workflows.view.resources.event"),value:null===l||void 0===l?void 0:l.name,isLoading:c})}},50701:(e,t,r)=>{"use strict";r.d(t,{m:()=>w,E:()=>O});var n=r(86013),i=r(61284),o=r(57269),a=r(87536),s=r(95721),l=r(49429),c=r(13288),u=r(8246),d=r(15562),p=r(85893);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(){var e=(0,a.Gc)().register,t=(0,o.t)(),r=t.memberTags,i=t.isLoading,f=(0,s.J)();if(i)return(0,p.jsx)(c.a,{center:!0});var b=r.map((function(e){return{label:e.name,value:e.id}}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"hidden",children:(0,p.jsx)("input",m({type:"hidden"},e("trigger.resource_type")))}),(0,p.jsx)(l.N,{name:"trigger.resource_id",label:(0,p.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_tag")}),options:b,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.member_tags.not_found")}),f&&(0,p.jsx)(d.d,{})]})},v=r(19898),y=r(41609),g=r.n(y),_=r(74327),x="settings.workflows.view",j=function(e){var t=e.resourceId,r=e.contactType,i=(0,v.u)({id:t}),o=i.data,a=void 0===o?{}:o,l=i.isLoading,c=(0,s.J)();if(!a)return null;var u=g()(a)?(0,n.t)([x,"deleted_member_tag"]):a.name;return(0,p.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,p.jsx)(_.i,{label:(0,n.t)([x,"resources.member_tag"]),value:u,isLoading:l,shouldRepresentAsBadge:!0}),c&&(0,p.jsx)(_.i,{label:(0,n.t)([x,"resources.contact_type"]),value:(0,n.t)(["settings.workflows.form.audience_type_options",r])})]})},w={label:(0,n.t)("settings.workflows.form.events.contact_tagged.title"),value:"contact_tagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_tagged.description"),resource:i.uN.MEMBER_TAG,formComponent:h,viewComponent:j,icon:"tag"},O={label:(0,n.t)("settings.workflows.form.events.contact_untagged.title"),value:"contact_untagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_untagged.description"),resource:i.uN.MEMBER_TAG,formComponent:h,viewComponent:j,icon:"tag"}},81595:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var n=r(86013),i=r(61284),o=r(93763),a=r(71358),s={label:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.title"),value:"community_member_ended_trial_without_subscription",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},88059:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(86013),i=r(61284),o=r(93763),a=r(71358),s={label:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.title"),value:"community_member_purchases_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},44577:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});var n=r(86013),i=r(61284),o=r(93763),a=r(71358),s={label:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.title"),value:"community_member_subscribed_to_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},94141:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(86013),i=r(61284),o=r(93763),a=r(71358),s={label:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.title"),value:"community_member_unsubscribed_from_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},93763:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var n=r(86013),i=r(27823),o=r(74327),a=r(85893),s=function(e){var t=e.resourceId,r=(0,i.a)(String(t)),s=r.data,l=void 0===s?{}:s,c=r.isLoading;return(0,a.jsx)(o.i,{label:(0,n.t)("settings.workflows.view.resources.paywall"),value:l.display_name,isLoading:c})}},71358:(e,t,r)=>{"use strict";r.d(t,{Q:()=>f});var n=r(86013),i=r(87536),o=r(80971),a=r(49429),s=r(13288),l=r(8246),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){var e=(0,i.Gc)().register,t=(0,o.g)(),r=t.activePaywalls,u=t.isLoading,p=t.isSuccess,f=r.map((function(e){return{label:e.display_name,value:e.id}}));return u?(0,c.jsx)(s.a,{center:!0}):p?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",d({type:"hidden"},e("trigger.resource_type")))}),(0,c.jsx)(a.N,{name:"trigger.resource_id",label:(0,n.t)("settings.workflows.form.which_paywall"),options:f,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.paywalls.not_found")})]}):(0,c.jsx)(l.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,n.t)("settings.workflows.form.errors.paywalls.fetch_failed")})})}},43500:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(86013),i=r(61284),o=r(93763),a=r(71358),s={label:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.title"),value:"community_member_started_paywall_trial",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},84837:(e,t,r)=>{"use strict";r.d(t,{Qw:()=>f,fT:()=>y,dO:()=>u});var n=r(86013),i=r(39863),o=r(61284),a=r(44275),s=r(85893),l="settings.workflows.form.entity_type.post",c=[{value:o.uN.COMMUNITY,label:(0,n.t)([l,"community.title"]),description:(0,n.t)([l,"community.description"])},{value:o.uN.SPACE_GROUP,label:(0,n.t)([l,"space_group.title"]),description:(0,n.t)([l,"space_group.description"])},{value:o.uN.SPACE,label:(0,n.t)([l,"space.title"]),description:(0,n.t)([l,"space.description"])}],u={label:(0,n.t)("settings.workflows.form.events.post_published.title"),value:"post_published",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_published.description"),formComponent:function(){return(0,s.jsx)(a.X,{entityTypeOptions:c,resourceType:o.S7.BASIC})},viewComponent:i.k,icon:"post"},d="settings.workflows.form.entity_type.comment",p=[{value:o.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:o.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:o.uN.SPACE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])},{value:o.uN.POST_BASIC,label:(0,n.t)([d,"post.title"]),description:(0,n.t)([d,"space.description"])}],f={label:(0,n.t)("settings.workflows.form.events.post_comment_created.title"),value:"post_comment_created",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_comment_created.description"),formComponent:function(){return(0,s.jsx)(a.X,{entityTypeOptions:p,resourceType:o.S7.BASIC})},viewComponent:i.k,icon:"post"};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b,h="settings.workflows.form.entity_type.post",v=[].concat(function(e){if(Array.isArray(e))return m(e)}(b=c)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||function(e,t){if(e){if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{value:o.uN.POST_BASIC,label:(0,n.t)([h,"specific_post.title"]),description:(0,n.t)([h,"specific_post.description"])}]),y={label:(0,n.t)("settings.workflows.form.events.post_liked.title"),value:"post_liked",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_liked.description"),formComponent:function(){return(0,s.jsx)(a.X,{entityTypeOptions:v,resourceType:o.S7.BASIC})},viewComponent:i.k,icon:"post"}},57295:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(86013),i=r(39863),o=r(27941),a={label:(0,n.t)("settings.workflows.form.events.event_published.title"),value:"event_published",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.event_published.description"),formComponent:o.d,viewComponent:i.k,icon:"event",released:!0}},95934:(e,t,r)=>{"use strict";r.d(t,{_:()=>c.G,aD:()=>s,D1:()=>l});var n=r(86013),i=r(61284),o=r(96642),a=r(73267),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space.title"),value:"community_member_joined_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.title"),value:"community_member_leaves_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},c=r(57295)},40154:(e,t,r)=>{"use strict";r.d(t,{u:()=>m});var n=r(86013),i=r(87536),o=r(92739),a=r(62057),s=r(67687),l=r(13288),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="settings.workflows.form",m=function(){var e=(0,i.Gc)().register,t=(0,o.r)(),r=t.data,u=t.isLoading,p=(r||{}).records,m=(void 0===p?[]:p).filter((function(e){return"course"===e.post_type}));return u?(0,c.jsx)(l.a,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",d({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,c.jsx)(s.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.t)([f,"choose_course"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,n.t)([f,"search_course"]),className:"!py-0",children:u?(0,c.jsx)(l.a,{center:!0}):(0,c.jsx)(a.M,{spaces:m,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",defaultButtonLabel:(0,n.t)([f,"select_course"]),placeholder:(0,n.t)([f,"search_course"]),name:"space-select"})})]})}},96642:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(86013),i=r(98338),o=r(74327),a=r(85893),s=function(e){var t=e.resourceId,r=(0,i.T4)({spaceId:t}),s=r.data,l=r.isLoading;return(0,a.jsx)(o.i,{label:(0,n.t)("settings.workflows.view.resources.space"),value:null===s||void 0===s?void 0:s.name,isLoading:l})}},73267:(e,t,r)=>{"use strict";r.d(t,{r:()=>m});var n=r(86013),i=r(87536),o=r(92739),a=r(62057),s=r(67687),l=r(13288),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="settings.workflows.form",m=function(e){var t=e.resourceType,r=void 0===t?"":t,u=(0,i.Gc)().register,p=(0,o.r)(),m=p.data,b=p.isLoading,h=(m||{}).records,v=(void 0===h?[]:h).filter((function(e){var t=e.post_type;return!r||t===r}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",d({type:"hidden",className:"hidden"},u("trigger.resource_type"))),(0,c.jsx)(s.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.t)([f,"choose_space"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,n.t)([f,"search_space"]),rules:{required:(0,n.t)("settings.workflows.form.errors.required")},className:"!py-0",children:b?(0,c.jsx)(l.a,{center:!0}):(0,c.jsx)(a.M,{spaces:v,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,n.t)("settings.workflows.form.errors.required")}})})]})}},20567:(e,t,r)=>{"use strict";r.d(t,{_:()=>s,d:()=>l});var n=r(86013),i=r(61284),o=r(8277),a=r(54447),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.title"),value:"community_member_joined_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.title"),value:"community_member_leaves_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"}},8277:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(86013),i=r(98338),o=r(74327),a=r(85893),s=function(e){var t=e.resourceId,r=(0,i.p7)(t),s=r.data,l=r.isLoading;return(0,a.jsx)(o.i,{label:(0,n.t)("settings.workflows.view.resources.space_group"),value:null===s||void 0===s?void 0:s.name,isLoading:l})}},54447:(e,t,r)=>{"use strict";r.d(t,{D:()=>b});var n=r(86013),i=r(87536),o=r(35192),a=r(98338),s=r(67687),l=r(13288),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="settings.workflows.form",m=function(){var e=(0,i.Gc)().register,t=(0,a.e2)(),r=t.records,u=t.isLoading;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",d({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,c.jsx)(s.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.t)([f,"choose_space_group"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,n.t)([f,"search_space_group"]),className:"!py-0",children:u?(0,c.jsx)(l.a,{center:!0}):(0,c.jsx)(o.V,{spaceGroups:r,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,n.t)("settings.workflows.form.errors.required")}})})]})},b=function(){return(0,c.jsx)(a.CM,{children:(0,c.jsx)(m,{})})}},50271:(e,t,r)=>{"use strict";r.d(t,{rG:()=>K,UH:()=>ae,p$:()=>ie});var n=r(86013),i=r(61284),o=r(32028),a=r(74327),s=r(42991),l=r(85893),c=r(87536),u=r(15562),d=r(50732),p=r(44154),f=r(49429),m=r(13288),b=r(8246);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={label:(0,n.t)("settings.workflows.form.events.received_form_submission.title"),value:"received_form_submission",group:(0,n.t)("settings.workflows.form.event_groups.forms"),description:(0,n.t)("settings.workflows.form.events.received_form_submission.description"),formComponent:function(){var e=(0,c.Gc)().register,t=(0,p.U)({api:d.av.forms.index,key:"forms",useParamsWrapper:!1}),r=t.records,i=void 0===r?[]:r;if(t.isLoading)return(0,l.jsx)(m.a,{center:!0});var o=[];return i&&(o=i.map((function(e){var t=e.id,r=e.name;return{value:t,label:null!==r&&void 0!==r?r:""}}))),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",v({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,l.jsx)("input",v({type:"hidden",className:"hidden"},e("trigger.contact_type",{value:u.T}))),(0,l.jsx)(f.N,{name:"trigger.resource_id",label:(0,l.jsx)(b.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","events.received_form_submission.choose"])}),options:o,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.received_form_submission.error")})]})},resource:i.uN.FORM,viewComponent:function(e){var t=e.resourceId,r=(0,o.u)({id:t}),n=r.data,i=r.isLoading;return(0,l.jsx)(a.i,{label:(0,s.t)("settings.workflows.form.events.received_form_submission.form"),value:null===n||void 0===n?void 0:n.name,isLoading:i})},icon:"email"},_=r(92060),x=r(95679),j={label:(0,n.t)("settings.workflows.form.events.community_member_joined_community.title"),value:"community_member_joined_community",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_community.description"),formComponent:x.E,resource:i.uN.COMMUNITY,viewComponent:_.H,icon:"user",hasNoVisibleFormFields:!0},w={label:(0,n.t)("settings.workflows.form.events.community_member_email_changed.title"),value:"community_member_email_changed",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_email_changed.description"),formComponent:x.E,resource:i.uN.COMMUNITY,viewComponent:_.H,icon:"email",hasNoVisibleFormFields:!0},O=r(59651),S=r(83860);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N={label:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.title"),value:"community_member_profile_field_updated",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.description"),formComponent:function(){var e=(0,c.Gc)().register,t=(0,S.N)().getOptions,r=t.data;if(t.isLoading)return(0,l.jsx)(m.a,{center:!0});var i=null===r||void 0===r?void 0:r.map((function(e){return{value:e.id,label:e.label}}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",k({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,l.jsx)(f.N,{name:"trigger.resource_id",label:(0,l.jsx)(b.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_profile_field"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.profile_fields.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,O.Yw)({fieldId:t}).getOptions,i=r.data,o=void 0===i?{}:i,s=r.isLoading;return(0,l.jsx)(a.i,{label:(0,n.t)("settings.workflows.view.resources.profile_field"),value:o.label,isLoading:s})},resource:i.uN.PROFILE_FIELD,icon:"user",released:!0},I=r(90404),A=r(44677),E=r(75715);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M,R=function(){var e=(0,c.Gc)().register,t=(0,E.c8)(),r=t.data;if(t.isLoading||!r)return(0,l.jsx)(m.a,{center:!0});var i=[];return r.levels&&(i=r.levels.map((function(e){var t=e.id,r=e.name;return{value:t,label:null!==r&&void 0!==r?r:""}}))),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",T({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,l.jsx)(f.N,{name:"trigger.resource_id",label:(0,l.jsx)(b.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_level"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.error")})]})},B=function(e){var t,r,i=e.resourceId,o=(0,E.c8)(),s=o.data,c=o.isLoading,u=null===s||void 0===s||null===(t=s.levels)||void 0===t||null===(r=t.find((function(e){return e.id===i})))||void 0===r?void 0:r.name;return(0,l.jsx)(a.i,{label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.level"),value:u,isLoading:c})},U={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.title"),value:"gamification_member_leveled_down",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.description"),formComponent:R,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:B,icon:"email"},F={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.title"),value:"gamification_member_leveled_up",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.description"),formComponent:R,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:B,icon:"email"},z=r(50701),V=r(88059),q=r(44577),Z=r(94141),G=r(43500),W=r(81595),H=r(84837),Q=r(95934),J=r(20567),K=[j,A.Zo,A.PJ,Q.aD,Q.D1,J._,J.d,V.u,z.m,z.E,A.BP,H.dO,H.Qw,H.fT,I.ey,I.ES,I.dP,q.H,Z.j,G.j,W.x,A.OC,Q._,A.Q4,N,w,F,U,g,I.NB,I.UP,I.NX],$=r(41255),X=r(98338),Y=r(95721);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=(re(M={},z.m.value,{labelKey:"settings.workflows.form.events.contact_tagged.title_new",descriptionKey:"settings.workflows.form.events.contact_tagged.description_new"}),re(M,z.E.value,{labelKey:"settings.workflows.form.events.contact_untagged.title_new",descriptionKey:"settings.workflows.form.events.contact_untagged.description_new"}),M),ie=function(){var e=(0,$.Z)(),t=(0,X.wh)().currentCommunitySettings,r=(0,E.c8)().data,i=null===t||void 0===t?void 0:t.gamification_enabled,o=null===t||void 0===t?void 0:t.gamification_custom_point_awards_enabled,a=(null===r||void 0===r?void 0:r.enabled)&&i,s=(null===r||void 0===r?void 0:r.enabled)&&i&&o,l=(0,Y.J)(),c=K;return a||(c=c.filter((function(e){return"gamification_member_leveled_up"!==e.value}))),s||(c=c.filter((function(e){return"gamification_member_leveled_down"!==e.value}))),l&&(c=c.map((function(e){var t=ne[e.value];return t?te(te({},e),{},{label:(0,n.t)(t.labelKey),description:(0,n.t)(t.descriptionKey)}):e}))),{releasedEvents:e?c:c.filter((function(e){return void 0===(t=e.released)||("function"===typeof t?t():t);var t}))}},oe=K.reduce((function(e,t){return e.set(t.value,t.icon),e}),new Map),ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return oe.get(e)||t}},94342:(e,t,r)=>{"use strict";r.d(t,{h:()=>c});var n=r(86013),i=r(24185),o=r(50732),a=r(81786),s=r(59506),l=r(85893),c=function(e){var t=e.title,r=e.showAddNewButton,c=void 0===r||r,u=e.showBottomBorder,d=void 0===u||u,p=e.children,f=(0,i.k6)();return(0,l.jsx)(s.b,{pageTitle:t,layoutConfigProps:{disableRightSidebar:!0},hasBorder:d,rightContent:c&&(0,l.jsx)(a.z,{onClick:function(){f.push(o.o0.new())},variant:"circle",children:(0,n.t)(["settings.workflows","new_workflow"])}),children:p})}},61510:(e,t,r)=>{"use strict";r.d(t,{X:()=>k});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(85893);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=(0,n.forwardRef)((function(e,t){var r=e.isExpanded,n=void 0!==r&&r,i=e.isTruncationEnabled,a=void 0!==i&&i,l=e.children;return(0,s.jsx)("div",{ref:t,className:o()("w-full",{"max-h-56 overflow-hidden":!n}),style:c({},a&&!n&&{WebkitMaskImage:"linear-gradient(180deg,#000 80%,transparent)",maskImage:"linear-gradient(180deg,#000 80%,transparent)"}),children:l})}));d.displayName="Container";var p=r(64687),f=r.n(p),m=r(64593),b=r(38503);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var v=function(){var e,t=(e=f().mark((function e(){var t,n,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve().then(r.bind(r,30837));case 3:return t=e.sent,n=t.default,e.next=7,r.e(4262).then(r.bind(r,54766));case 7:i=e.sent,o=i.default,n.registerLanguage("json",o),n.configure({languages:["json"]}),n.highlightAll(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),y=function(){var e=(0,b.TC)().isDarkAppearance;return(0,n.useEffect)((function(){v()}),[e]),e?(0,s.jsx)(m.q,{children:(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css",integrity:"sha512-rO+olRTkcf304DQBxSWxln8JXCzTHlKnIdnMUwYvQa9/Jd4cQaNkItIUj6Z4nvW1dqK0SKXLbn9h4KwZTNtAyw==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})}):(0,s.jsx)(m.q,{children:(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css",integrity:"sha512-0aPQyyeZrWj9sCA46UlmWgKOP0mUipLQ6OZXu8l4IcAmD2u31EPEy9VcIMvl7SoAaKe8bLXZhYoMaE/in+gcgA==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})})},g=["children","className"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O=function(e){var t=e.children,r=e.className,n=w(e,g);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{}),(0,s.jsx)("pre",{className:"bg-tertiary m-0 !rounded-md border-none px-4 py-3",children:(0,s.jsx)("code",x(x({className:o()("!bg-transparent !p-0 text-xs leading-4",r)},n),{},{children:t}))})]})};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.code,r=e.className,i=(0,n.useRef)(null),l=function(e){var t=e.containerRef,r=S((0,n.useState)(!1),2),i=r[0],o=r[1],a=S((0,n.useState)(!1),2),s=a[0],l=a[1];return(0,n.useLayoutEffect)((function(){var e=null===t||void 0===t?void 0:t.current;if(e){var r=e.querySelector("pre");if(r){var n=e.clientHeight;r.clientHeight>n&&l(!0)}}}),[t]),{isTruncationEnabled:s,isExpanded:i,toggleExpand:function(){o((function(e){return!e}))}}}({containerRef:i}),c=l.isTruncationEnabled,u=l.isExpanded,p=l.toggleExpand;return(0,s.jsxs)("div",{className:o()("flex flex-col items-start gap-1",r),children:[(0,s.jsx)(d,{ref:i,isExpanded:u,isTruncationEnabled:c,children:(0,s.jsx)(O,{children:t})}),c&&(0,s.jsx)("div",{className:"px-1",children:(0,s.jsx)("button",{type:"submit",className:"text-default hover:text-dark text-xs transition-colors",onClick:p,children:u?(0,a.t)("show_less"):(0,a.t)("show_more")})})]})}},69249:(e,t,r)=>{"use strict";r.d(t,{H:()=>H});var n=r(11049),i=r(82177),o=r(86013),a=r(88767),s=r(34334),l=r(13288),c=r(94184),u=r.n(c),d=r(85893),p=function(e){var t=e.className;return(0,d.jsx)("div",{className:u()("border-dark m-1 h-4 w-[1px] border-l",t)})},f=r(67294),m=r(96486),b=r(36298),h=r(95721),v=r(94281),y=r(94353),g=r(6952),_=r(8246),x=r(30199),j=r(65242),w=r(61510),O=x.U0.reduce((function(e,t){return e.set(t.value,t.historyDetailViewComponent),e}),new Map),S=function(e){var t=e.log,r=e.status,n=t.message.action,i=t.message.request_details||{},o=i.body,a=void 0===o?{}:o,s=i.url,l=void 0===s?"":s,c=(n||{}).api_params,u=void 0===c?{}:c,p=O.get(null===n||void 0===n?void 0:n.action_type)||function(){return null};return(0,d.jsx)(p,{body:a,url:l,apiParams:u,log:t,status:r})},P=function(e){var t,r,n,i=e.log,a=e.status,s=(0,h.J)(),l=i.message,c=i.created_at,u=void 0===c?"":c,p=l.request_details,O=void 0===p?{}:p,P=l.response_details,k=void 0===P?{}:P,C=(0,f.useMemo)((function(){return x.U0.find((function(e){var t;return e.value===(null===l||void 0===l||null===(t=l.action)||void 0===t?void 0:t.action_type)}))}),[null===l||void 0===l||null===(t=l.action)||void 0===t?void 0:t.action_type]),N=(0,f.useMemo)((function(){var e,t;return null!==(e=null===C||void 0===C?void 0:C.label)&&void 0!==e?e:null===l||void 0===l||null===(t=l.action)||void 0===t?void 0:t.action_type}),[null===l||void 0===l||null===(r=l.action)||void 0===r?void 0:r.action_type,null===C||void 0===C?void 0:C.label]),I=(0,f.useMemo)((function(){var e=(0,m.omit)(O,["url"]);return{request:JSON.stringify(e,null,2),response:JSON.stringify(k,null,2)}}),[O,k]);if(null===l||void 0===l||null===(n=l.action)||void 0===n||!n.action_type)return null;var A=(0,b.w)({dateTime:new Date(u),format:"short_date_at_short_time"});return null!==C&&void 0!==C&&C.isCompactHistoryView?(0,d.jsx)("div",{className:"border-dark rounded-lg border",children:(0,d.jsx)(S,{log:i,status:a})}):(0,d.jsx)("div",{className:"border-dark rounded-lg border",children:(0,d.jsxs)(g.O.Group,{children:[(0,d.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z.LabelMd,{weight:"semibold",children:N})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,d.jsx)(j.x,{result:null===l||void 0===l?void 0:l.status,isBadge:!1}),(0,d.jsx)(_.Z.LabelSm,{color:"text-default",as:"time",children:A})]})]}),(0,d.jsx)("div",{children:s&&(null===C||void 0===C?void 0:C.isApplicableToMembersOnly)&&(0,d.jsx)(v.T,{content:(0,o.t)("settings.workflows.members_only_tooltip"),interactive:!1,children:(0,d.jsx)(y.g,{textSizeClassName:"text-xs",label:(0,o.t)("settings.workflows.members_only")})})})]}),(0,d.jsxs)(g.O.List,{children:[(0,d.jsx)(g.O,{children:(0,o.t)("settings.workflows.history.info")}),(0,d.jsx)(g.O,{children:(0,o.t)("settings.workflows.history.data_in")}),(0,d.jsx)(g.O,{children:(0,o.t)("settings.workflows.history.data_out")})]})]}),(0,d.jsxs)(g.O.Panels,{children:[(0,d.jsx)(g.O.Panel,{className:"px-6 py-5",children:(0,d.jsx)(S,{log:i,status:a})}),(0,d.jsx)(g.O.Panel,{className:"p-2",children:(0,d.jsx)(w.X,{code:null===I||void 0===I?void 0:I.request})}),(0,d.jsx)(g.O.Panel,{className:"p-2",children:(0,d.jsx)(w.X,{code:null===I||void 0===I?void 0:I.response})})]})]})})},k=function(e){var t=e.log,r=t.action_to_s,n=void 0===r?"":r,i=t.created_at,o=void 0===i?"":i,a=t.message,s=void 0===a?{}:a,l=(0,b.w)({dateTime:new Date(o),format:"short_date_at_short_time"});return(0,d.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,d.jsx)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z.LabelMd,{weight:"semibold",children:n})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,d.jsx)(j.x,{result:"failed",isBadge:!1}),(0,d.jsx)(_.Z.LabelSm,{color:"text-default",as:"time",dateTime:o,children:l})]})]})}),(0,d.jsx)("div",{className:"px-6 py-5",children:(0,d.jsx)(_.Z.LabelSm,{children:null===s||void 0===s?void 0:s.error})})]})},C=function(e){var t=e.log,r=e.noMessage,n=void 0!==r&&r,i=t.action_to_s,o=void 0===i?"":i,a=t.created_at,s=void 0===a?"":a,l=t.message,c=void 0===l?{}:l,p=(0,b.w)({dateTime:new Date(s),format:"short_date_at_short_time"});return(0,d.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,d.jsx)("div",{className:u()("bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg px-6 py-5",{"border-b":!n,"rounded-b-lg":n}),children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z.LabelMd,{weight:"semibold",children:o})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,d.jsx)(j.x,{result:(null===c||void 0===c?void 0:c.status)||"success",isBadge:!1,textSize:"text-sm"}),(0,d.jsx)(_.Z.LabelSm,{color:"text-default",as:"time",dateTime:s,children:p})]})]})}),!n&&(0,d.jsx)("div",{className:"p-2",children:(0,d.jsx)(w.X,{code:JSON.stringify(c,null,2)})})]})},N=function(e){var t=e.log,r=t.action_to_s,n=void 0===r?"":r,i=t.created_at,o=void 0===i?"":i,a=t.message,s=void 0===a?{}:a,l=(0,b.w)({dateTime:new Date(o),format:"short_date_at_short_time"});return(0,d.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,d.jsx)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z.LabelMd,{weight:"semibold",children:n})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,d.jsx)(j.x,{result:"skipped",isBadge:!1}),(0,d.jsx)(_.Z.LabelSm,{color:"text-default",as:"time",dateTime:o,children:l})]})]})}),(0,d.jsx)("div",{className:"px-6 py-5",children:(0,d.jsx)(_.Z.LabelSm,{children:null===s||void 0===s?void 0:s.reason})})]})},I=r(51168),A=r(50271),E=function(e){var t,r,n=e.log,i=e.text,o=n.action_to_s,a=void 0===o?"":o,s=n.created_at,l=void 0===s?"":s,c=n.message,u=void 0===c?{}:c,p=(0,b.w)({dateTime:new Date(l),format:"short_date_at_short_time"});return(0,d.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,d.jsx)("div",{className:"border-dark bg-secondary flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z.LabelMd,{weight:"semibold",children:(r=A.rG.find((function(e){return e.value===(null===u||void 0===u?void 0:u.trigger_type)})),null!==(t=null===r||void 0===r?void 0:r.label)&&void 0!==t?t:a)})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,d.jsx)(j.x,{result:"success",isBadge:!1}),(0,d.jsx)(_.Z.LabelSm,{color:"text-default",as:"time",dateTime:l,children:p})]})]})}),(0,d.jsx)("div",{className:"px-6 py-5",children:(0,d.jsxs)("div",{className:"md:flex",children:[(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)(_.Z.LabelSm,{weight:"semibold",children:i})}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsx)(I.q,{communityMemberId:null===u||void 0===u?void 0:u.initiator_id})})]})})]})},D=function(e){var t=e.log,r=e.status;switch(t.action){case"event_triggered":return(0,d.jsx)(E,{log:t,text:(0,o.t)("settings.workflows.trigger.event")});case"run_triggered":return(0,d.jsx)(E,{log:t,text:(0,o.t)("settings.workflows.trigger.run")});case"task_execution_completed":case"run_completed":case"trigger_execution_check_failed":return(0,d.jsx)(C,{log:t,noMessage:!0});case"task_action_completed":case"task_action_failed":return(0,d.jsx)(P,{log:t,status:r});case"fetching_audience_members_failed":case"run_failed":case"task_execution_failed":return(0,d.jsx)(k,{log:t});case"task_skipped":return(0,d.jsx)(N,{log:t});default:return(0,d.jsx)(C,{log:t})}},T=r(64687),L=r.n(T),M=r(40160),R=r(50732),B=r(18605),U=r(69647),F=r(41982);function z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var V="settings.workflows.history",q=function(e){var t=e.task,r=t.status,n=t.id,i=t.workflow.id,a=(0,U.p)(),s=function(){var e,t=(e=L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:a.success((0,o.t)([V,"copy_success"])),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.error((0,o.t)([V,"copy_error"]));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){z(o,n,i,a,s,"next",e)}function s(e){z(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),l="".concat((0,o.t)([V,"task_id"]),": ").concat(n);return(0,d.jsxs)("div",{className:"mt-3 flex flex-col items-start gap-3 md:flex-row md:items-center",children:[(0,d.jsx)(j.x,{result:r}),(0,d.jsxs)("span",{className:"flex max-w-[15rem] cursor-pointer items-center",children:[(0,d.jsx)(F.Y,{tooltipOptions:{content:n},children:(0,d.jsx)(_.Z.LabelSm,{children:l})}),(0,d.jsxs)("button",{className:"hover:bg-secondary rounded-md transition",type:"button",onClick:s,children:[(0,d.jsx)("span",{className:"sr-only",children:(0,o.t)("copy")}),(0,d.jsx)("span",{className:"flex h-6 w-6 items-center justify-center",children:(0,d.jsx)(B.JO,{type:"16-copy",size:16})})]})]}),(0,d.jsxs)(M.rU,{to:R.o0.view({workflowId:i}),className:"text-default hover:text-dark flex items-center",children:[(0,d.jsx)(_.Z.LabelSm,{children:(0,o.t)([V,"view_workflow"])}),(0,d.jsx)(B.JO,{type:"16-arrow",useWithFillCurrentColor:!0,viewBox:"0 0 16 16","aria-hidden":!0})]})]})},Z=function(e){var t,r=e.taskId,n=e.onClose,c=(0,a.useQuery)(["task-detail",r],(function(){return s.nH.taskDetail({taskId:r})})),u=c.data;if(c.isLoading)return(0,d.jsx)(l.a,{center:!0});var f=u.workflow,m=u.logs,b=u.status;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.u_.Header,{children:[(0,d.jsx)(i.u_.Title,{children:null!==(t=f.name)&&void 0!==t?t:(0,o.t)("settings.workflows.detailed_history")}),(0,d.jsx)(i.u_.HeaderActions,{children:(0,d.jsx)(i.u_.CloseButton,{onClick:n})})]}),(0,d.jsxs)(i.u_.Body,{children:[(0,d.jsx)(q,{task:u}),(0,d.jsx)("div",{className:"mt-5 flex flex-col",children:m.map((function(e,t){return(0,d.jsxs)("div",{children:[(0,d.jsx)(D,{log:e,status:b}),t<m.length-1&&(0,d.jsx)(p,{className:"ml-[3.3rem]"}),t===m.length-1&&(0,d.jsx)("div",{className:"m-1 h-4"})]},t)}))})]})]})},G=function(e){var t=e.taskId,r=(0,n.dd)();return(0,d.jsxs)(i.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,d.jsx)(i.u_.Overlay,{}),(0,d.jsx)(i.u_.Content,{size:"lg",children:(0,d.jsx)(Z,{taskId:t,onClose:r.hide})})]})},W=n.gk.create((function(e){var t=e.taskId;return(0,d.jsx)(G,{taskId:t})})),H=function(){return(0,n.dd)(W)}},9467:(e,t,r)=>{"use strict";r.d(t,{a:()=>c});var n=r(94184),i=r.n(n),o=r(46266),a=r(20290),s=r(85893),l={md:"w-8 h-8",lg:"min-w-[2.5rem] h-10"},c=function(e){var t=e.tooltipContent,r=e.size,n=void 0===r?"lg":r,c=e.className,u=e.children,d=(0,a.h)(),p=function(){return(0,s.jsx)("div",{className:i()("flex items-center justify-center",{"border-dark text-default bg-primary rounded-full border":!d},!d&&l[n],c,{"cursor-pointer":t}),children:u})};return t?(0,s.jsx)(o.Y,{placement:"top",content:t,children:(0,s.jsx)(p,{})}):(0,s.jsx)(p,{})}},87763:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var n=r(20290),i=r(18605),o=r(9467),a=r(34739),s=r(85893),l=function(e){var t=e.trigger,r=e.audience,l=e.workflowType,c=(0,a.b)({trigger:t,audience:r,workflowType:l}),u=(0,n.h)();if(!c)return null;var d=c||{},p=d.title,f=d.iconType,m=d.size,b=void 0===m?"lg":m;return u?(0,s.jsx)(o.a,{size:b,tooltipContent:p,children:(0,s.jsx)("div",{className:"bg-tertiary flex h-8 max-h-8 w-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,s.jsx)(i.JO,{type:f,size:16,className:"text-dark !h-4 !w-4 shrink-0"})})}):(0,s.jsx)(o.a,{size:b,tooltipContent:p,children:(0,s.jsx)(i.JO,{type:"24-workflow-".concat(f),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})})}},34739:(e,t,r)=>{"use strict";r.d(t,{b:()=>f});var n=r(67294),i=r(86013),o=r(61284),a=r(20290),s=r(31002),l=r(50271);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="settings.workflows.form",f=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=r.workflowType,d=r.trigger,f=r.audience,m=c===o.nQ.DYNAMIC,b=c===o.nQ.BULK_ACTION,h=(0,a.h)(),v=(d||{}).trigger_type,y=(0,n.useMemo)((function(){var e,t;return(null!==(e=null===f||void 0===f||null===(t=f.filter_rules)||void 0===t?void 0:t.filters)&&void 0!==e?e:[]).find((function(e){return"role"===e.key}))}),[f]);if(!(m&&!v||b&&!y)){var g={iconType:h?s.d[v]:(0,l.UH)(v),title:(0,i.t)([p,"events",v,"title"]),description:(0,i.t)([p,"events",v,"description"])};if(m)return u(u({},g),{},{title:"".concat((0,i.t)([p,"event"]),": ").concat(g.title)});var _=((null===f||void 0===f||null===(e=f.filter_rules)||void 0===e?void 0:e.filters)||[]).map((function(e){return(0,i.t)(["settings.workflows.view","audience_filters",e.key])})).join(", "),x={iconType:h?"16-workflows-v2-add-audience":null!==(t=o.yJ[y.value])&&void 0!==t?t:"user",title:_,description:(0,i.t)([p,"audience_types","default"])};return b?u(u({},x),{},{title:"".concat((0,i.t)([p,"audience_filters"]),": ").concat(x.title)}):void 0}}},21439:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});var n=r(1469),i=r.n(n),o=function(e){return i()(e)?e.filter((function(e){return e.action_type})).map((function(e){return e.action_type})):[]}},30089:(e,t,r)=>{"use strict";r.d(t,{a:()=>c});var n=r(94184),i=r.n(n),o=r(46266),a=r(20290),s=r(85893),l={md:"w-8 h-8",lg:"min-w-[2.5rem] h-10"},c=function(e){var t=e.tooltipContent,r=e.size,n=void 0===r?"lg":r,c=e.className,u=e.children,d=(0,a.h)(),p=function(){return(0,s.jsx)("div",{className:i()("flex items-center justify-center",{"border-dark text-default bg-primary rounded-full border":!d},!d&&l[n],c,{"cursor-pointer":t}),children:u})};return t?(0,s.jsx)(o.Y,{placement:"top",content:t,children:(0,s.jsx)(p,{})}):(0,s.jsx)(p,{})}},44579:(e,t,r)=>{"use strict";r.d(t,{W:()=>v});var n=r(94184),i=r.n(n),o=r(20290),a=r(18605),s=r(8246),l=r(30089),c=r(67294),u=r(86013),d=r(56181),p=r(30199),f="settings.workflows",m=function(e){var t=e.actions,r=e.truncationLimit,n="".concat((0,u.t)([f,"action"]),": "),i=(0,o.h)(),a=(0,c.useMemo)((function(){return t.filter((function(e){return""!==e})).map((function(e){var t=i?function(e){return d.Z[e]}(e):(0,p.mR)(e);return{title:"".concat(n).concat((0,u.t)([f,"action_types",e],{defaultValue:(0,u.t)([f,"action_types","unknown"])})),icon:t}}))}),[t,n,i]),s=(0,c.useMemo)((function(){return t.slice(r).map((function(e){return"".concat(n).concat((0,u.t)([f,"action_types",e],{defaultValue:(0,u.t)([f,"action_types","unknown"])}))})).join(", ")}),[t,r,n]),l=t.length-r;return{actions:l>1?a.slice(0,r):a,remainingActionsCount:l,remainingItemsTooltip:s}},b=r(85893),h={md:16,lg:24},v=function(e){var t=e.actions,r=void 0===t?[]:t,n=e.size,c=void 0===n?"lg":n,u=e.truncationLimit,d=void 0===u?2:u,p=e.className,f=m({actions:r,truncationLimit:d}),v=f.actions,y=f.remainingActionsCount,g=f.remainingItemsTooltip,_=(0,o.h)(),x=h[c]||h.lg;if(0===r.length||d<1)return(0,b.jsx)("div",{className:"py-[25px] leading-none",children:"-"});var j="+".concat(y);return(0,b.jsxs)("div",{className:i()("flex items-center",{"gap-1":"md"===c,"gap-2":"lg"===c},p),children:[v.map((function(e,t){var r=e.title,n=e.icon;return(0,b.jsx)(l.a,{tooltipContent:r,size:c,children:_?(0,b.jsx)("div",{className:"bg-tertiary flex h-8 max-h-8 w-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,b.jsx)(a.JO,{type:n,size:16,className:"text-dark !h-4 !w-4 shrink-0"})}):(0,b.jsx)(a.JO,{type:"".concat(x,"-workflow-").concat(n),size:x,useWithFillCurrentColor:!0,className:i()({"!w-4":"md"===c,"!w-6":"lg"===c})})},"".concat(n,"-").concat(t))})),y>1&&(0,b.jsx)(l.a,{tooltipContent:g,size:c,children:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(s.Z.LabelSm,{weight:"semibold",children:(0,b.jsx)("span",{className:i()("text-default flex",{"text-xxs":"md"===c}),children:j})})})})]})}},88427:(e,t,r)=>{"use strict";r.d(t,{o:()=>R});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(24185),l=r(34334),c=r(95390),u=r(20758),d=r(74113),p=r(98338),f=r(50732),m=r(70254),b=r(77162),h=r(69647),v=r(61284),y=r(11049),g=r(44032),_=r(85893),x=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)();return(0,_.jsx)(g.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",confirmText:(0,o.t)("settings.workflows.table.actions.archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_title"),onConfirm:r,disabled:n,children:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")})})},j=y.gk.create((function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,_.jsx)(x,{name:t,onConfirm:r,disabled:n})})),w=r(10161),O=r(8097),S=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)(),a=(0,o.t)("settings.workflows.table.actions.archive_confirm_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")}),s=(0,_.jsx)(w.w,{content:a});return(0,_.jsx)(O.W,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,o.t)("settings.workflows.table.actions.archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_title"),onAction:r,disabled:n,children:s})},P=y.gk.create((function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,_.jsx)(S,{name:t,onConfirm:r,disabled:n})})),k=function(e){var t=e.onConfirm,r=e.disabled,n="settings.workflows.table.actions.cancel",i=(0,y.dd)();return(0,_.jsx)(O.W,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,o.t)("".concat(n,".title")),title:(0,o.t)("".concat(n,".confirm_title")),onAction:t,disabled:r,children:(0,o.t)("".concat(n,".description"))})},C=y.gk.create((function(e){var t=e.onConfirm,r=e.disabled;return(0,_.jsx)(k,{onConfirm:t,disabled:r})})),N=function(e){var t=e.onConfirm,r=e.disabled,n=(0,y.dd)();return(0,_.jsx)(O.W,{isOpen:n.visible,onClose:n.hide,actionVariant:"danger",actionText:(0,o.t)("settings.workflows.table.actions.delete"),title:(0,o.t)("settings.workflows.table.actions.delete_confirm_title"),onAction:t,disabled:r,children:(0,o.t)("settings.workflows.table.actions.delete_confirm_description")})},I=y.gk.create((function(e){var t=e.onConfirm,r=e.disabled;return(0,_.jsx)(N,{onConfirm:t,disabled:r})}));function A(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){A(o,n,i,a,s,"next",e)}function s(e){A(o,n,i,a,s,"throw",e)}a(void 0)}))}}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M="settings.workflows.table.actions",R=function(e){var t,r,n,g,_=e.workflowId,x=e.type,w=e.status,O=e.name,S=e.refetch,k=(0,s.k6)(),N=(0,h.p)(),A=N.success,D=N.error,L=(0,a.useQueryClient)(),R=(0,m.t)(),B=(0,y.dd)(I),U=(0,y.dd)(C),F=(0,y.dd)(P),z=(0,y.dd)(j),V=(0,b.w)(),q=(0,p.wh)().currentCommunity.current_plan_tier,Z=w===v.qN.ACTIVE?z:F,G=(0,a.useMutation)((function(){return l.nH.createRun({workflowId:_})}),{onSuccess:function(){A((0,o.t)([M,"run_in_progress"]),{messageComplete:(0,o.t)([M,"run_success"]),onComplete:function(){return k.push({pathname:f.o0.history(),search:"workflow_type=bulk_action"})}})},onError:function(e){(0,c.h)(e)||(0,c.w)(e)?W(e):D(e.message)}}).mutate,W=function(e){return V.show(T(T({},(0,c.h)(e)&&{planTier:(0,u.gq)(q)}),{},{subheading:e.body.message,source:(0,d.yf)(),isMarketingHubRequired:(0,c.w)(e),onSuccess:function(){V.hide(),G()},successButtonLabel:(0,o.t)("settings.workflows.upgrade_modal.run_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0}))},H=(0,a.useMutation)((function(){return l.nH.deleteWorkflow({id:_})}),{onSuccess:(t=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B.hide(),A((0,o.t)([M,"deleting_workflow"]),{messageComplete:(0,o.t)([M,"deletion_successful"])}),e.next=4,null===S||void 0===S?void 0:S();case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onError:function(e){return D(e.message)}}),Q=H.mutate,J=H.isLoading,K=(0,a.useMutation)((function(){return l.nH.inactivate({id:_})}),{onSuccess:(r=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.hide(),A((0,o.t)([M,"cancel","cancelling_schedule"]),{messageComplete:(0,o.t)([M,"cancel","cancellation_successful"])}),e.next=4,null===S||void 0===S?void 0:S();case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),onError:function(e){return D(e.message)}}),$=K.mutate,X=K.isLoading,Y=(0,a.useMutation)((function(){return l.nH.archiveWorkflow({id:_})}),{onSuccess:(n=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z.hide(),A((0,o.t)([M,"archiving_workflow"]),{messageComplete:(0,o.t)([M,"archive_successful"]),onComplete:function(){L.invalidateQueries({queryKey:["totalArchivedWorkflows"]})}}),e.next=4,null===S||void 0===S?void 0:S();case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),onError:function(e){return D(e.message)}}),ee=Y.mutate,te=Y.isLoading,re=R.page,ne=R.status,ie=(0,a.useMutation)((function(){return l.nH.duplicateWorkflow({id:_})}),{onSuccess:(g=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A((0,o.t)([M,"duplicating_workflow"]),{messageComplete:(0,o.t)([M,"duplication_successful"])}),ne!==v.qN.ARCHIVED&&1===Number(re)){e.next=5;break}k.push({pathname:f.o0.index(),search:"workflow_type=".concat(x,"&page=1")}),e.next=7;break;case 5:return e.next=7,null===S||void 0===S?void 0:S();case 7:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)}),onError:function(e){return D(e.message)}}),oe=ie.mutate;return{onDelete:Q,onDuplicate:oe,handleDeleteWithConfirmation:function(){B.show({disabled:J,onConfirm:Q})},handleArchiveWithConfirmation:function(){Z.show({name:O,disabled:te,onConfirm:ee})},handleCancelWithConfirmation:function(){U.show({name:O,disabled:X,onConfirm:$})}}}},26329:(e,t,r)=>{"use strict";r.d(t,{ou:()=>m,GE:()=>M,ud:()=>p,f2:()=>R});var n=r(67294),i=r(86013),o=r(49789),a=r(58253),s=(r(61284),r(78367)),l=r(69249),c=r(77363),u=r(85893),d="settings.workflows.table",p=function(e){var t=e.columns,r=e.workflowType,p=(0,c.x)({workflowType:r}),f=p.infiniteQuery,m=p.isLoading,b=p.totalWorkflows,h=p.initialPage,v=p.defaultPageSize,y=p.setPage,g=(0,l.H)(),_=(0,n.useMemo)((function(){var e=f.isLoading,t=f.tasks,r=f.isError;return e||r?null:t.map((function(e){return e.community_member_id}))}),[f]);return(0,u.jsx)(s.I,{ids:_,children:(0,u.jsxs)(o.J,{columns:t,infiniteQuery:f,pageSize:v,initialPage:h,totalCountPath:"total_count",onChangePage:y,onClickRow:function(e){var t=e.original.id;g.show({taskId:t})},children:[!m&&(0,u.jsx)(a.w.Headline,{children:(0,u.jsx)(a.w.Headline.Title,{children:(0,i.t)([d,"workflows_runs"],{count:b})})}),(0,u.jsxs)(a.w.TableWrapper,{children:[(0,u.jsxs)(a.w.Table,{children:[(0,u.jsxs)("colgroup",{children:[(0,u.jsx)("col",{"data-testid":"workflow-history-name-column"}),(0,u.jsx)("col",{"data-testid":"workflow-history-member-column"}),(0,u.jsx)("col",{"data-testid":"workflow-history-status-column",className:"min-w-[10rem]"}),(0,u.jsx)("col",{"data-testid":"workflow-history-steps-column"}),(0,u.jsx)("col",{"data-testid":"workflow-history-run-at-column"})]}),(0,u.jsx)(a.w.Header,{className:"z-10"}),(0,u.jsx)(a.w.Loader,{}),(0,u.jsx)(a.w.NoRecords,{text:(0,i.t)([d,"no_runs_found"])}),(0,u.jsx)(a.w.Body,{})]}),(0,u.jsx)(a.w.Pagination,{align:"left",direction:"reverse"})]})]})})},f=r(36298),m=function(e){var t=e.dateTime;if(!t)return null;var r=(0,f.w)({dateTime:new Date(t),format:"short_date_at_short_time"});return(0,u.jsx)("time",{dateTime:t,className:"break-normal",children:r})},b=r(96486),h=r(88767),v=r(81089),y=r(50732),g=function(e){return function(){return(0,v.UT)(y.av.communityMember.show({memberId:e}))}},_=r(70425),x=r(20426),j=r(81407),w=r(81786),O=r(67687);var S=function(){var e,t,r,n="member-filter",o=(0,j.j)(),a=o.selectedText,s=o.onApply,l=(0,x.r)();return(0,u.jsx)(O.l,{defaultValues:(e={},t=n,r=+a,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e),onSubmit:function(e,t){var r=t.reset;s(e[n]),r()},children:(0,u.jsxs)("div",{className:"flex flex-col gap-y-4 p-4",children:[(0,u.jsx)(O.l.CommunityMemberSelect,{name:n,includeInactive:!0,direction:"down",autoFocus:!0}),(0,u.jsx)(w.z,{variant:l,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},P="settings.workflows.history.filters",k="member_id",C="settings.workflows.history.filters",N="settings.workflows.history.filters",I="settings.workflows",A=[{label:(0,i.t)([I,"table.result.success"]),value:"success"},{label:(0,i.t)([I,"table.result.failed"]),value:"failed"},{label:(0,i.t)([I,"table.result.partial_success"]),value:"partial_success"},{label:(0,i.t)([I,"table.result.skipped"]),value:"skipped"},{label:(0,i.t)([I,"table.result.in_progress"]),value:"in_progress"},{label:(0,i.t)([I,"table.result.duplicate_skipped"]),value:"duplicate_skipped"},{label:(0,i.t)([I,"table.result.cancelled"]),value:"cancelled"}],E=r(94184),D=r.n(E),T=r(36589),L=r(53297),M=function(e){var t=e.filtersConfig,r=(0,T.I)().isV3Enabled;return(0,u.jsx)(L.x,{className:D()("border-stroke-background relative border-b px-6 py-3",{"lg:px-9":r}),children:t.map((function(e){var t=e.name,r=e.component;return(0,u.jsx)(r,{},t)}))})},R={NameFilter:function(e){var t=e.isInitialOpen,r=e.onApply,n=e.changeUrl,o=void 0===n||n,a=e.value,s=(0,_.Xt)(),l=s.queryParams,c=s.updateUrl;return(0,u.jsx)(_.wn,{chip:(0,i.t)([C,"name"]),title:(0,i.t)([C,"name_title"]),selectedText:a||l.workflow_name,isInitialOpen:t,onApply:function(e){o&&c("workflow_name",e),(0,b.isFunction)(r)&&r(e)},shouldUsePortal:!0,children:(0,u.jsx)(_.xo,{name:"name-filter",placeholder:(0,i.t)([C,"name_placeholder"])})})},StatusFilter:function(e){var t=e.onApply,r=(0,_.Xt)(),n=r.queryParams,o=r.updateUrl;return(0,u.jsx)(_.wn,{chip:(0,i.t)([I,"history.filters.status"]),title:(0,i.t)([I,"history.filters.status"]),selectedText:n.status,renderSelectedText:function(e){var t,r=e.selectedText;if(!r)return null;var n=A.find((function(e){return e.value===r}));return null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:r},onApply:function(e){o("status",e),(0,b.isFunction)(t)&&t(e)},shouldUsePortal:!0,children:(0,u.jsx)(_.dQ,{options:A,legend:(0,i.t)([I,"history.filters.status_legend"]),name:"status-filter"})})},RunIdFilter:function(e){var t=e.onApply,r=(0,_.Xt)(),n=r.queryParams,o=r.updateUrl;return(0,u.jsx)(_.wn,{chip:(0,i.t)([N,"run_id"]),title:(0,i.t)([N,"run_id_title"]),selectedText:n.run_id,onApply:function(e){o("run_id",e),(0,b.isFunction)(t)&&t(e)},shouldUsePortal:!0,children:(0,u.jsx)(_.xo,{name:"run-id-filter",placeholder:(0,i.t)([N,"run_id_placeholder"])})})},CommunityMemberFilter:function(e){var t=e.onApply,r=(0,_.Xt)(),n=r.queryParams,o=r.updateUrl,a=n[k],s=function(e){var t=e.memberId;return{communityMemberQuery:(0,h.useQuery)(["community-member-show",t],g(t),{enabled:!!t})}}({memberId:a}),l=s.communityMemberQuery.data;return(0,u.jsx)(_.wn,{chip:(0,i.t)([P,"member"]),title:(0,i.t)([P,"member_title"]),selectedText:a,renderSelectedText:function(){if(l)return l.name},onApply:function(e){o(k,null===e||void 0===e?void 0:e.toString()),(0,b.isFunction)(t)&&t(e)},shouldUsePortal:!0,children:(0,u.jsx)(S,{defaultValue:l})})}}},77363:(e,t,r)=>{"use strict";r.d(t,{x:()=>j});var n=r(27361),i=r.n(n),o=r(70425),a=r(89733),s=r(67294),l=r(85564),c=r.n(l),u=r(88767),d=r(34334),p=["perPage","initialPage","options","workflowType"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v=["member_id"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j=function(e){var t=e.workflowType,r=(0,o.Xt)().queryParams,n=(0,a.v)(),l=n.setPage,f=n.initialPage,b=r.member_id,y=g(g({},x(r,v)),{},{perPage:20,initialPage:f,workflowType:t,options:{keepPreviousData:!1}});b&&(y.community_member_ids=b);var _=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.perPage,o=void 0===i?20:i,a=n.initialPage,l=void 0===a?1:a,f=n.options,b=void 0===f?{}:f,v=n.workflowType,y=h(n,p),g=["workflows-history",v,o,y],_=m({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},b),x=(0,u.useInfiniteQuery)(g,(function(e){var t=e.pageParam,r=void 0===t?l:t,n=1;"number"===typeof r&&r>0&&(n=r);var i=m(m({},y),{},{page:n,workflow_type:v,per_page:o});return d.nH.listHistory({params:i})}),_),j=(0,s.useMemo)((function(){var e;return(null===(e=x.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=x.data)||void 0===e?void 0:e.pages]),w=(null===(t=j[0])||void 0===t?void 0:t.total_count)||0,O=(null===(r=j[0])||void 0===r?void 0:r.per_page)||o,S=(0,s.useMemo)((function(){return c()(j.map((function(e){return e.records})))}),[j]);return m(m({},x),{},{queryKey:g,totalTasks:w,tasks:S,pageSize:O,pages:j})}(y);return{infiniteQuery:_,totalWorkflows:i()(null===_||void 0===_?void 0:_.pages[0],"total_count",0),isLoading:null===_||void 0===_?void 0:_.isLoading,setPage:l,initialPage:f,defaultPageSize:20}}},65242:(e,t,r)=>{"use strict";r.d(t,{x:()=>b});var n,i,o=r(86013),a=r(61284),s=r(4848),l=r(43211),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(p(n={},a.Ii.SUCCESS,"success"),p(n,a.Ii.PARTIAL_SUCCESS,"warning"),p(n,a.Ii.FAILED,"danger"),p(n,a.Ii.IN_PROGRESS,"info"),n),m=(p(i={},a.Ii.SUCCESS,"success"),p(i,a.Ii.PARTIAL_SUCCESS,"warning"),p(i,a.Ii.FAILED,"danger"),p(i,a.Ii.CANCELLED,"danger"),p(i,a.Ii.IN_PROGRESS,"info"),i),b=function(e){var t=e.result,r=e.isBadge,n=void 0===r||r,i=Object.values(a.Ii).includes(t),u=n?f[t]:m[t],p=n?s.O:l.r;return(0,c.jsx)(p,d(d({variant:u},!i&&{textTransform:"capitalize"}),{},{children:(0,o.t)(["settings.workflows.table.result",t],{defaultValue:t||"\u2500"})}))}},36722:(e,t,r)=>{"use strict";r.d(t,{W:()=>o});var n=r(8246),i=r(85893),o=function(e){var t=e.children;return(0,i.jsx)(n.Z.LabelSm,{weight:"medium",children:(0,i.jsx)("span",{className:"break-normal",children:t})})}},58866:(e,t,r)=>{"use strict";r.d(t,{ud:()=>_.ud,yG:()=>g});var n=r(67294),i=r(86013),o=r(24185),a=r(61284),s=r(50732),l=r(49789),c=r(58253),u=r(78367),d=r(27361),p=r.n(d),f=r(81468),m=r(70425),b=r(46681),h=r(89733),v=r(85893),y="settings.workflows.table",g=function(e){var t=e.columns,r=e.colgroup,d=function(e){var t=e.workflowType,r=e.status,n=(0,m.Xt)().queryParams,i=(0,b._)(),o=i.pageSize,a=void 0===o?f.L8:o,s=i.category,l=(0,h.v)(1,!s),c=l.setPage,u=l.initialPage,d=p()(n,"query",""),v=(0,f.mA)({perPage:a,sort:f.zw.LATEST,workflowType:t,status:r,initialPage:u,query:d,options:{keepPreviousData:!1}});return{infiniteQuery:v,totalWorkflows:p()(null===v||void 0===v?void 0:v.pages[0],"total_count",0),isLoading:null===v||void 0===v?void 0:v.isLoading,setPage:c,initialPage:u,defaultPageSize:a}}({workflowType:e.workflowType,status:e.status}),g=d.infiniteQuery,_=d.isLoading,x=d.totalWorkflows,j=d.initialPage,w=d.defaultPageSize,O=d.setPage,S=(0,o.k6)(),P=(0,n.useMemo)((function(){var e=g.isLoading,t=g.workflows,r=g.isError;return e||r?null:t.map((function(e){return e.created_by_community_member_id}))}),[g]);return(0,v.jsx)(u.I,{ids:P,children:(0,v.jsxs)(l.J,{columns:t({refetch:g.refetch}),infiniteQuery:g,pageSize:w,initialPage:j,totalCountPath:"total_count",onChangePage:function(e){O(e)},onClickRow:function(e){var t=e.original||{},r=t.id,n=t.status;if(r){var i={pathname:n===a.qN.DRAFT?s.o0.edit({workflowId:r}):s.o0.view({workflowId:r}),state:{from:{path:S.location.pathname,query:S.location.search}}};S.push(i)}},children:[!_&&(0,v.jsx)(c.w.Headline,{children:(0,v.jsx)(c.w.Headline.Title,{children:(0,i.t)([y,"workflows_count"],{count:x})})}),(0,v.jsxs)(c.w.TableWrapper,{children:[(0,v.jsxs)(c.w.Table,{children:[r&&(0,v.jsx)(v.Fragment,{children:r}),(0,v.jsx)(c.w.Header,{className:"z-10"}),(0,v.jsx)(c.w.Loader,{}),(0,v.jsx)(c.w.NoRecords,{text:(0,i.t)([y,"no_workflows_found"])}),(0,v.jsx)(c.w.Body,{})]}),(0,v.jsx)(c.w.Pagination,{align:"left",direction:"reverse"})]})]})})},_=r(26329)},92319:(e,t,r)=>{"use strict";r.d(t,{PF:()=>c});var n=r(86013),i=r(11049),o=r(44032),a=r(85893),s=function(e){var t=e.onConfirm,r=e.onCancel,s=e.disabled,l=void 0!==s&&s,c=e.title,u=e.body,d=(0,i.dd)();return(0,a.jsx)(o.c,{isOpen:d.visible,onClose:d.hide,confirmVariant:"circle",confirmText:(0,n.t)("settings.workflows.continue_to_edit"),title:c,cancelText:(0,n.t)("settings.workflows.cancel"),onConfirm:t,onCancel:r,disabled:l,children:u})},l=i.gk.create((function(e){var t=e.onConfirm,r=e.onCancel,n=e.disabled,i=void 0!==n&&n,o=e.title,l=e.body;return(0,a.jsx)(s,{onConfirm:t,onCancel:r,disabled:i,title:o,body:l})})),c=function(){return(0,i.dd)(l)}},82332:(e,t,r)=>{"use strict";r.d(t,{hp:()=>u});var n=r(86013),i=r(11049),o=r(8097),a=r(8246),s=r(85893),l=function(e){var t=e.onAction,r=e.i18nBase,l=void 0===r?"settings.workflows.edit.incomplete_workflow_modal":r,c=(0,i.dd)();return(0,s.jsx)(o.W,{isOpen:c.visible,onClose:c.hide,actionVariant:"circle",actionText:(0,n.t)([l,"confirm_text"]),onAction:t,titleClassName:"!text-left !px-0",title:(0,n.t)([l,"title"]),children:(0,s.jsx)("div",{children:(0,s.jsx)(a.Z.BodyMd,{color:"text-default",children:(0,n.t)([l,"body"])})})})},c=i.gk.create((function(e){var t=e.onAction,r=e.i18nBase;return(0,s.jsx)(l,{onAction:t,i18nBase:r})})),u=function(){return(0,i.dd)(c)}},56339:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var n=r(67924),i=function(e){var t=e.workflowId,r=e.disableRefetching,i=(0,n.RC)({workflowId:t,disableRefetching:r});return{areAllRunsCompleted:i.areAllRunsCompleted,isLoading:i.isLoading}}},91455:(e,t,r)=>{"use strict";r.d(t,{q:()=>x});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(34334),l=r(95390),c=r(20758),u=r(74113),d=r(98338),p=r(58837),f=r(77162),m=r(69647);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)}))}}var _="settings.workflows.view.header",x=function(e){var t,r,n=e.workflowId,b=e.isActive,v=(0,a.useQueryClient)(),y=(0,m.p)(),x=y.success,j=y.error,w=function(){var e=g(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.invalidateQueries(["workflows",n]);case 2:return e.next=4,v.invalidateQueries(["all-workflows"]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=(0,d.wh)().currentCommunity.current_plan_tier,S=(0,f.w)(),P=(0,a.useMutation)((function(){return(0,p.Cp)(s.nH.activate({id:n}))}),{onSuccess:(t=g(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:r.onSuccessCallback?r.onSuccessCallback():x((0,o.t)([_,"workflow_activated"]));case 3:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)}),onError:function(e){return(0,l.h)(e)||(0,l.w)(e)?function(e){S.show(h(h({},(0,l.h)(e)&&{planTier:(0,c.gq)(O)}),{},{subheading:e.body.message,isMarketingHubRequired:(0,l.w)(e),source:(0,u.yf)(),onSuccess:function(){S.hide(),k({})},successButtonLabel:(0,o.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0}))}(e):j((0,o.t)([_,"workflow_activation_error"]))}}),k=P.mutate,C=P.isLoading,N=(0,a.useMutation)((function(){return s.nH.inactivate({id:n})}),{onSuccess:(r=g(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:x((0,o.t)([_,"workflow_deactivated"]));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),onError:function(){return j((0,o.t)([_,"workflow_deactivation_error"]))}}),I=N.mutate,A=N.isLoading;return{onActivateWorkflow:k,onDeactivateWorkflow:I,onChangeActiveStatus:function(){b?I():k({})},isLoading:C||A}}},37207:(e,t,r)=>{"use strict";r.d(t,{F:()=>P,k:()=>k});var n=r(16053),i=(r(67294),r(94184)),o=r.n(i),a=r(69250),s=r(18605),l=r(27025),c=r(86013),u=r(94281),d=r(85893),p="settings.workflows.form",f=function(e){var t=e.hasError;return(0,d.jsx)("span",{className:"flex items-center",children:t?(0,d.jsx)(s.JO,{type:"20-alert",size:20,className:"!text-v2-danger","aria-label":(0,c.t)([p,"step_incomplete"])}):(0,d.jsx)(s.JO,{type:"20-checkmark-circle-fill-thin",size:20,"aria-label":(0,c.t)([p,"step_complete"])})})},m=function(e){var t=e.hasError,r=void 0!==t&&t,n=e.hasSuccess,i=void 0!==n&&n,o=e.statusMessage;return r||i?o?(0,d.jsx)(u.T,{content:o,className:"cursor-pointer",children:(0,d.jsx)(f,{hasError:r})}):(0,d.jsx)(f,{hasError:r}):null},b=function(e){var t=e.hasSuccess,r=e.hasError,n=e.statusMessage,i=e.actions,o=e.children,c=(0,a.h)().isOpen;return(0,d.jsxs)("div",{className:"flex items-center gap-3 px-8 pl-4 pr-6",children:[!c&&o,(0,d.jsx)(m,{hasSuccess:t,hasError:r,statusMessage:n}),i&&(0,d.jsx)(l.Lt,{buttonWrapperClassName:"flex",linkType:"button",button:(0,d.jsx)(l.Lt.MenuButton,{className:"hover:bg-tertiary rounded !p-0.5 transition-colors",children:(0,d.jsx)("span",{className:"flex items-center",children:(0,d.jsx)(s.JO,{type:"20-menu-dots-horizontal",size:20,className:"text-default"})})}),options:i})]})},h=r(95721),v=r(94353),y=r(8246),g=function(e){var t=e.title,r=e.description,n=e.isApplicableToMembersOnly,i=(0,h.J)();return(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)(y.Z.LabelSm,{color:"text-default",children:r})}),(0,d.jsx)("div",{children:(0,d.jsx)(y.Z.TitleSm,{weight:"semibold",children:t})})]}),i&&n&&(0,d.jsx)(u.T,{content:(0,c.t)("settings.workflows.members_only_tooltip"),interactive:!1,className:"flex",children:(0,d.jsx)(v.g,{textSizeClassName:"text-xs",label:(0,c.t)("settings.workflows.members_only")})})]})},_=function(e){var t=e.title,r=e.isApplicableToMembersOnly,i=e.actions,s=e.hasSuccess,l=e.hasError,c=e.statusMessage,u=e.children,p=e.description,f=e.isCompactView,m=e.compactViewTitle,h=e.actionComponents,v=e.collapsedViewMetaComponent,y=(0,a.h)().isOpen,_=!!f&&!y;return(0,d.jsxs)(n.h.Content,{className:o()({"!w-fit":_}),children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)(n.h.Button,{className:"pr-0",children:(0,d.jsx)(g,{title:_?m:t,description:_?void 0:p,isApplicableToMembersOnly:r})}),(0,d.jsx)(b,{actions:i,hasSuccess:s,hasError:l,statusMessage:c,children:h})]}),!y&&v&&(0,d.jsx)("div",{className:"mx-8 border-t py-5",children:v}),(0,d.jsx)(n.h.Panel,{panelClassName:o()("max-h-fit ease-in-out",{"h-0":!y,"h-auto":y}),children:u})]})},x=["title","description","actions","isApplicableToMembersOnly","hasSuccess","hasError","statusMessage","children","actionComponents","isCompactView","compactViewTitle","collapsedViewMetaComponent"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t=e.title,r=e.description,i=e.actions,o=e.isApplicableToMembersOnly,a=e.hasSuccess,s=e.hasError,l=e.statusMessage,c=e.children,u=e.actionComponents,p=e.isCompactView,f=e.compactViewTitle,m=e.collapsedViewMetaComponent,b=S(e,x);return(0,d.jsxs)(n.h.Item,w(w({},b),{},{children:[(0,d.jsx)(_,{title:t,isApplicableToMembersOnly:o,actions:i,hasSuccess:a,hasError:s,statusMessage:l,actionComponents:u,description:r,isCompactView:p,compactViewTitle:f,collapsedViewMetaComponent:m,children:c}),(0,d.jsx)(n.h.Connector,{})]}))},k=function(e){var t=e.items,r=void 0===t?[]:t,i=e.children;return(0,d.jsx)(n.h,{items:r,children:i})}},95312:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(96486),i=r(20290),o=r(81786),a=r(85893),s=["onClick","children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.onClick,r=e.children,l=d(e,s),u=(0,i.h)();return(0,a.jsx)(o.z,c(c({large:!u,variant:"circle",type:"button",onClick:function(){(0,n.isFunction)(t)&&t()}},l),{},{children:r}))}},64625:(e,t,r)=>{"use strict";r.d(t,{g:()=>h});var n=r(67294),i=r(41609),o=r.n(i),a=r(87536),s=r(95721),l=r(20290),c=r(39240),u=r(61284),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={filter_rules:{filters:[(0,c.G9)({key:"role",value:"Member"})]}},h=function(e){var t,r,i=e.workflow,c=e.children,p=(0,l.h)(),m=!o()(null===i||void 0===i?void 0:i.actions),h=(0,n.useMemo)((function(){return p&&!m?[]:m?i.actions:[(0,u.Ep)()]}),[p,m,null===i||void 0===i?void 0:i.actions]),v=(0,s.J)(),y="bulk_action"===(null===i||void 0===i?void 0:i.workflow_type),g="scheduled"===(null===i||void 0===i?void 0:i.workflow_type),_=(null===i||void 0===i||null===(t=i.audience)||void 0===t||null===(r=t.filter_rules)||void 0===r?void 0:r.filters)&&!o()(i.audience.filter_rules.filters)&&Object.values(i.audience.filter_rules.filters).some(Boolean),x=(0,n.useMemo)((function(){return(y||g)&&_?i.audience:v?{filter_rules:{filters:[]}}:b}),[_,y,v,g,i.audience]),j=g?i.schedule:{},w=(0,a.cI)({mode:"onChange",reValidateMode:"onChange",defaultValues:f(f({},i),{},{actions:h,audience:x,schedule:j})});return(0,d.jsx)(a.RV,f(f({},w),{},{children:c}))}},20866:(e,t,r)=>{"use strict";r.d(t,{a:()=>d});var n=r(96486),i=r(53620),o=r(64842),a=r(45512),s=r(15117),l=r(53799),c=r(97593),u=r(79950),d=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.action_type,d=void 0===i?"":i,b=r.api_params,h=void 0===b?{}:b;return d===s.Cz.value?p(h):d===s.MK.value?f(h):d===s.Ah.value||(d===s.TQ.value||(d===s.KY.value||(d===s.zW.value?m(null===h||void 0===h||null===(e=h.message)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.content):d===c.l.value?(0,u.Y)(null===h||void 0===h?void 0:h.url):d===l.T.value?(0,u.Y)((0,n.omit)(h,"send_notification_subscription_created_by_admin")):d===a.I.value?(0,u.Y)((0,n.omit)(h,"time_delay")):d===o.s.value?(0,u.Y)(null===h||void 0===h?void 0:h.points):(0,u.Y)(h))))},p=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!(r.internal_name&&r.subject&&r.broadcast_id)&&(!(r.subject.length>i.gv||(null===(e=r.preview_text)||void 0===e?void 0:e.length)>i.b||(0,n.isEmpty)(r.email_content))&&!(0,n.isEmpty)(null===r||void 0===r||null===(t=r.email_content)||void 0===t?void 0:t.body.content))},f=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!(0,n.isNumber)(null===r||void 0===r?void 0:r.from)||(0,n.isEmpty)(null===r||void 0===r?void 0:r.rich_text_body))&&m(null===r||void 0===r||null===(e=r.rich_text_body)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.content)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(0,n.isEmpty)(e)&&e.some((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t,i=e.content,o=void 0===i?[]:i,a=e.text,s=void 0===a?"":a;return"text"===r?!(0,n.isEmpty)(s):"paragraph"===r?o.some((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text,t=void 0===e?"":e;return!(0,n.isEmpty)(t)})):void 0}))}},57641:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(96486),i=r(79052),o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).filter_rules,t=void 0===e?{}:e,r=(0,i.k)(t);return!(0,n.isEmpty)({filters:r})}},23921:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(96486),i=function e(t){return(0,n.isObject)(t)?Object.values(t).some((function(t){return e(t)})):Boolean(t)}},79950:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(96486),i=function e(t){return(0,n.isObject)(t)?!(0,n.isEmpty)(t)&&Object.values(t).every((function(t){return e(t)})):Boolean(t)}},23833:(e,t,r)=>{"use strict";r.d(t,{H:()=>Te});var n=r(67294),i=r(94184),o=r.n(i),a=r(20290),s=r(64687),l=r.n(s),c=r(88767),u=r(69647),d=r(80041),p=r(87536),f=r(34334),m=r(58837);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,(0,p.Gc)().watch)("id");return(0,c.useMutation)((function(){return(0,m.Cp)(f.nH.activate({id:r,params:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e)}},e))};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,p.Gc)().watch)("id");return(0,c.useMutation)((function(){return(0,m.Cp)(f.nH.createRun({workflowId:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e)}},e))};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)}))}}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,d.D)().isBulkAction,r=(0,u.p)(),n=v().mutateAsync,i=_().mutateAsync;return(0,c.useMutation)(O(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!t){e.next=5;break}return e.next=5,i();case 5:case"end":return e.stop()}}),e)}))),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){r.error(e.message)}},e))},P=r(96486),k=r(95390),C=r(20758),N=r(11049),I=r(74113),A=r(98338),E=r(77162),D=r(82177),T=r(61284),L=r(64625),M=r(86013),R=r(39974),B=r(81786),U=r(18605),F=r(8246),z=r(87742),V=r(15117),q=r(46394),Z=r(30199),G=r(85893),W=function(){var e=((0,(0,p.Gc)().watch)("actions")||[]).map((function(e){return null===e||void 0===e?void 0:e.action_type})).filter(Boolean).map((function(e){return{title:(0,M.t)(["settings.workflows.view.actions",e,"title"],{defaultValue:(0,M.t)("settings.workflows.form.add_an_action")}),icon:(0,Z.mR)(e)}}));return(0,G.jsx)(G.Fragment,{children:e.map((function(e,t){var r=e.title,n=e.icon;return(0,G.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,G.jsx)(U.JO,{type:"24-workflow-".concat(n),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"}),(0,G.jsx)(F.Z.BodySm,{children:r})]},t)}))})},H=function(){var e=(0,q.Y)(),t=e.count,r=e.formattedCount,n=(0,M.t)("settings.workflows.confirm_modal.members_match_right_now",{count:t}),i=t>0?"".concat(r," ").concat(n):n;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,G.jsx)(U.JO,{type:"24-workflow-audience",size:24,className:"!h-5 !w-5"}),(0,G.jsx)(F.Z.BodySm,{children:i})]}),(0,G.jsx)(W,{})]})},Q=function(){var e=(0,q.Y)(),t=e.isLoading,r=e.hasFilters,n=(0,z.ol)().formActions.find((function(e){return e.action_type===V.Ah.value})),i=n?(0,M.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_title"):(0,M.t)("settings.workflows.confirm_modal.workflow_summary");return(0,G.jsxs)(D.u_.Body,{children:[(0,G.jsx)(F.Z.LabelMd,{weight:"semibold",children:i}),(0,G.jsx)("div",{className:"pt-5",children:(0,G.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:r&&(0,G.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[t&&(0,G.jsx)("div",{className:"flex flex-row items-center gap-3",children:(0,G.jsx)(U.JO,{type:"loader",size:16,className:"!h-4 !w-4"})}),(0,G.jsx)(H,{})]})})}),n&&(0,G.jsx)("div",{className:"pt-5",children:(0,G.jsx)(F.Z.LabelSm,{children:(0,M.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_description")})})]})},J=function(){return(0,G.jsx)(D.u_.Body,{children:(0,G.jsx)(F.Z.BodyMd,{children:(0,M.t)("settings.workflows.confirm_modal.are_you_sure_you_want_to_publish_your_workflow")})})},K=function(e){var t=e.rerunParams,r="true"==(null===t||void 0===t?void 0:t.do_not_skip_tasks)?(0,M.t)("settings.workflows.rerun_modal.all_members"):(0,M.t)("settings.workflows.rerun_modal.only_new_members");return(0,G.jsxs)(D.u_.Body,{children:[(0,G.jsx)(F.Z.LabelMd,{weight:"semibold",children:(0,M.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,G.jsx)("div",{className:"pt-5",children:(0,G.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:(0,G.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[(0,G.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,G.jsx)("div",{children:(0,G.jsx)(U.JO,{type:"24-workflow-audience",size:24,className:"!h-6 !w-6"})}),(0,G.jsx)(F.Z.BodySm,{children:r})]}),(0,G.jsx)(W,{})]})})})]})},$=function(e){var t=e.isBulkAction,r=e.isScheduled,n=e.isRerun,i=e.rerunParams;return t&&n?{title:(0,M.t)("settings.workflows.confirm_modal.rerun_summary"),body:(0,G.jsx)(K,{rerunParams:i}),successButtonLabel:(0,M.t)("settings.workflows.upgrade_modal.rerun_this_workflow")}:t?{title:(0,M.t)("settings.workflows.confirm_modal.run_this_workflow"),body:(0,G.jsx)(Q,{}),successButtonLabel:(0,M.t)("settings.workflows.upgrade_modal.run_this_workflow")}:r?{title:(0,M.t)("settings.workflows.confirm_modal.schedule_this_workflow"),body:(0,G.jsx)(Q,{}),successButtonLabel:(0,M.t)("settings.workflows.upgrade_modal.schedule_this_workflow")}:{title:(0,M.t)("settings.workflows.confirm_modal.publish_your_workflow"),body:(0,G.jsx)(J,{}),successButtonLabel:(0,M.t)("settings.workflows.upgrade_modal.activate_this_workflow")}},X=function(e){var t=e.onCancel,r=e.onPublish,n=e.isLoading,i=void 0!==n&&n,o=e.isRerun,a=e.rerunParams,s=e.onBack,l=(0,d.D)(),c=l.isBulkAction,u=l.isScheduled;if(i)return(0,G.jsx)(D.u_.Content,{children:(0,G.jsx)(D.u_.Body,{className:"w-full !px-10 !py-16",children:(0,G.jsx)(R.u,{title:(0,M.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,M.t)("settings.workflows.we_are_preparing")})})});var p=$({isBulkAction:c,isScheduled:u,isRerun:o,rerunParams:a}),f=p.title,m=p.body;return(0,G.jsxs)(D.u_.Content,{size:"md",children:[(0,G.jsxs)(D.u_.Header,{children:[(0,G.jsx)(D.u_.Title,{size:"md",children:f}),(0,G.jsx)(D.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,G.jsx)(D.u_.CloseButton,{onClick:t})}),(0,P.isFunction)(s)&&(0,G.jsx)(D.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,G.jsx)(D.u_.BackButton,{onClick:s})})]}),m,(0,G.jsx)(D.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,G.jsx)(B.z,{variant:c?"danger":"circle",onClick:r,children:c?(0,M.t)("settings.workflows.confirm_modal.confirm_and_run"):u?(0,M.t)("settings.workflows.confirm_modal.schedule"):(0,M.t)("settings.workflows.confirm_modal.publish_and_enable")})})]})},Y=r(64298),ee=r(38695);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,(0,p.Gc)().watch)("id"),n=(0,u.p)();return(0,c.useMutation)((function(){return(0,m.Cp)(f.nH.createRun({workflowId:r,params:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){n.error(e.message)}},e))},ie=r(42991),oe=r(1881),ae=r(67687),se=function(e){var t=e.onCancel,r=e.onPublish,n=e.rerunParams,i=e.onBack,o=(0,d.D)(),a=o.isBulkAction,s=o.isScheduled,l=$({isBulkAction:a,isScheduled:s,isRerun:!0,rerunParams:n}),c=l.title,u=l.body;return(0,G.jsxs)(D.u_.Content,{size:"md",children:[(0,G.jsxs)(D.u_.Header,{children:[(0,G.jsx)(D.u_.Title,{size:"md",children:c}),(0,G.jsx)(D.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,G.jsx)(D.u_.CloseButton,{onClick:t})}),(0,G.jsx)(D.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,G.jsx)(D.u_.BackButton,{onClick:i})})]}),u,(0,G.jsx)(D.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,G.jsx)(B.z,{variant:"danger",onClick:r,children:(0,M.t)("settings.workflows.confirm_modal.confirm_and_run")})})]})},le=r(18713),ce="settings.workflows.rerun_modal",ue=function(e){var t=e.onCancel;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(D.u_.Header,{children:[(0,G.jsx)(D.u_.Title,{size:"md",children:(0,M.t)([ce,"title"])}),(0,G.jsx)(D.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,G.jsx)(D.u_.CloseButton,{onClick:t})})]}),(0,G.jsx)(le.n,{}),(0,G.jsx)(D.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,G.jsx)(B.z,{variant:"circle",type:"submit",children:(0,M.t)([ce,"continue"])})})]})};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(e){var t=e.hasRuns,r=e.onPublish,i=e.onCancel,o=e.additionalRerunParams,a=me((0,n.useState)(null),2),s=a[0],l=a[1],c=me((0,oe.k)(!1===t),2),u=c[0],d=c[1],p=ne({onError:P.noop},pe(pe({},s),o)),f=p.mutateAsync;return p.isLoading?(0,G.jsx)(D.u_.Content,{children:(0,G.jsx)(D.u_.Body,{className:"w-full !px-10 !py-16",children:(0,G.jsx)(R.u,{title:(0,ie.t)("settings.workflows.rerunning_your_workflow"),subtitle:(0,ie.t)("settings.workflows.we_are_preparing")})})}):u?(0,G.jsx)(se,{rerunParams:s,onBack:d,onCancel:i,onPublish:function(){return r(f)}}):(0,G.jsx)(D.u_.Content,{size:"md",children:(0,G.jsx)(ae.l,{defaultValues:{do_not_skip_tasks:(null===s||void 0===s?void 0:s.do_not_skip_tasks)||"false"},onSubmit:function(e){l(e),d()},children:(0,G.jsx)(ue,{onCancel:i})})})};function ve(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ye(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ve(o,n,i,a,s,"next",e)}function s(e){ve(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe="dismissed",Se="error",Pe="closed_after_success",ke=function(e){var t=e.isRerun,r=void 0!==t&&t,i=(0,N.dd)(),o=(0,I.yf)(),a=(0,d.D)(),s=a.saveWorkflowName,c=a.hasName,p=a.placeholderName,f=a.isBulkAction,m=a.isScheduled,b=a.schedule,h=a.hasRuns,v=a.id,y=je((0,n.useState)(!(r||m)),2),g=y[0],_=y[1],x=S({onError:P.noop}),j=x.mutateAsync,w=x.isLoading,O=(0,A.wh)().currentCommunity.current_plan_tier,L=(0,E.w)(),M=(0,u.p)(),R=$({isBulkAction:f,isRerun:r}).successButtonLabel,B=function(){i.resolve(Oe),i.hide()},U=function(){L.hide(),i.show()},F=function(){var e=ye(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:i.resolve(Pe),e.next=16;break;case 6:if(e.prev=6,e.t0=e.catch(0),!(0,k.h)(e.t0)&&!(0,k.w)(e.t0)){e.next=14;break}return i.hide(),e.next=12,r=e.t0,L.show(_e(_e({},(0,k.h)(r)&&{planTier:(0,C.gq)(O)}),{},{subheading:r.body.message,isMarketingHubRequired:(0,k.w)(r),onSuccess:U,successButtonLabel:R,usedForWorkflows:!0,showPlanDetails:!0,source:o}));case 12:e.next=15;break;case 14:M.error(e.t0.message);case 15:i.resolve(Se);case 16:return e.prev=16,i.hide(),e.finish(16);case 19:case"end":return e.stop()}var r}),e,null,[[0,6,16,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,G.jsxs)(D.u_,{isOpen:i.visible,onClose:B,children:[(0,G.jsx)(D.u_.Overlay,{}),g?(0,G.jsx)(X,{isLoading:w,onPublish:function(){return F(ye(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return e.next=3,s(p);case 3:return e.next=5,j();case 5:case"end":return e.stop()}}),e)}))))},onCancel:B}):m?function(){switch(null===b||void 0===b?void 0:b.schedule_type){case T.By.ONE_TIME:return(0,G.jsx)(Y.C,{workflowId:v,setIsConfirmContent:_,onCancel:B,schedule:b,hasRuns:h});case T.By.RECURRING:return(0,G.jsx)(ee.L,{workflowId:v,onCancel:B,schedule:b,isLoading:w,onPublish:function(){return F(ye(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return e.next=3,s(p);case 3:return e.next=5,j();case 5:case"end":return e.stop()}}),e)}))))}});case"run_now":return(0,G.jsx)(he,{hasRuns:h,onCancel:B,onPublish:F,additionalRerunParams:{schedule_run_now:!0}})}return null}():r?(0,G.jsx)(he,{onPublish:F,onCancel:B}):null]})},Ce=function(e){var t=e.isRerun;return(0,N.dd)(function(e){var t=e.isRerun;return N.gk.create((function(e){var r=e.workflow;return(0,G.jsx)(L.g,{workflow:r,children:(0,G.jsx)(ke,{isRerun:t})})}))}({isRerun:t}))},Ne=r(24185),Ie=r(50732);function Ae(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var Ee=function(e){var t=e.isRerun,r=(0,Ne.k6)(),n=Ce({isRerun:t}),i=(0,c.useQueryClient)(),o=(0,u.p)(),a=(0,p.Gc)(),s=a.handleSubmit,d=a.getValues,f=function(){var e,t=(e=l().mark((function e(){var t,o,a,s,c,u,p,f=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,n.show({workflow:d()});case 3:if((o=e.sent)!==Oe&&o!==Se){e.next=6;break}return e.abrupt("return");case 6:if(a=t.id,s=t.workflow_type,c=t.schedule,u=s===T.nQ.BULK_ACTION,p="run_now"===(null===c||void 0===c?void 0:c.schedule_type),i.removeQueries(["workflows",a]),!u&&!p){e.next=13;break}return r.push(Ie.o0.runs({workflowId:a})),e.abrupt("return");case 13:r.push(Ie.o0.view({workflowId:a}));case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ae(o,n,i,a,s,"next",e)}function s(e){Ae(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return{submitWorkflow:s(f,(function(){o.error((0,M.t)("settings.workflows.form.errors.fill_all_required_fields"))}))}},De=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.className,i=e.isRerun,s=Ee({isRerun:i}).submitWorkflow,l=(0,a.h)();return(0,G.jsx)("form",{ref:t,className:o()("flex h-full flex-col",{"w-full":l},n),onSubmit:s,children:r})}));De.displayName="Form";var Te=function(e){var t=e.workflow,r=e.formRef,n=e.children,i=e.isRerun;return(0,G.jsx)(L.g,{workflow:t,children:(0,G.jsx)(De,{ref:r,isRerun:i,className:"w-auto",children:n})})}},39013:(e,t,r)=>{"use strict";r.d(t,{l:()=>d});var n=r(86013),i=r(87536),o=r(96486),a=r(20866),s=r(57641),l=r(23921),c=r(79950),u=function(e){var t=(0,i.Gc)(),r=t.getFieldState,n=t.formState,u=(0,t.watch)(e),d=r(e,n).error,p=n.dirtyFields,f=n.touchedFields,m=(0,o.get)(p,e,null),b=(0,l.p)(m),h=(0,o.get)(f,e,null),v=(0,l.p)(h),y=Boolean(null===u||void 0===u?void 0:u.id),g=Boolean(d),_=function(e,t){return e.startsWith("actions")?(0,a.a)(t):e.startsWith("audience")?(0,s.$)(t):(0,c.Y)(t)}(e,u);return{isDirty:b,isTouched:v,hasError:g,hasValue:_,hasId:y,value:u}},d=function(e){var t=(0,i.Gc)().trigger,r=u(e),o=r.isDirty,a=r.isTouched,s=r.hasError,l=r.hasValue,c=r.hasId,d=r.value,p=c&&l&&!o&&!a&&!s;return{hasError:s,hasValue:l,isCompleted:p,revalidate:function(){return t(e)},statusMessage:s?(0,n.t)("settings.workflows.form.step_incomplete"):p?(0,n.t)("settings.workflows.form.step_complete"):"",wasSaved:c,value:d}}},80041:(e,t,r)=>{"use strict";r.d(t,{D:()=>v});var n=r(64687),i=r.n(n),o=r(67294),a=r(87536),s=r(88767),l=r(34334),c=r(69647);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.Gc)().watch,r=(0,c.p)(),n=t("id");return(0,s.useMutation)((function(e){return l.nH.update({id:n,body:e})}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e),r.error(e.message)}},e))},f=r(86013);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e=(0,s.useQueryClient)(),t=p(),r=t.mutate,n=t.mutateAsync,l=t.isLoading,c=t.isError,u=(0,a.Gc)(),d=u.watch,h=u.setValue,v=u.formState,y=d("id"),g=d("name"),_=d("schedule"),x=b((0,o.useState)(g),2),j=x[0],w=x[1],O=Boolean(g),S=(0,f.t)("settings.workflows.form.untitled_workflow"),P=d("status"),k=function(){var t,r=(t=i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==j){t.next=2;break}return t.abrupt("return");case 2:if(""!==r.trim()){t.next=5;break}return h("name",j),t.abrupt("return");case 5:return t.next=7,n({name:r});case 7:e.invalidateQueries({queryKey:["workflows",y]}),w(r);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),C=v.defaultValues,N=null===C||void 0===C?void 0:C.workflow_type,I="dynamic"===N,A="bulk_action"===N,E="scheduled"===N,D=(null===C||void 0===C?void 0:C.runs_count)>0;return{id:y,hasRuns:D,name:g,type:N,placeholderName:S,hasName:O,status:P,saveWorkflowName:k,updateWorkflow:r,updateWorkflowAsync:n,isBulkAction:A,isDynamic:I,isScheduled:E,schedule:_,isSavingWorkflow:l,isWorkflowError:c}}},65154:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n={title:"md:w-1/3 xl:w-1/4",steps:"hidden xl:table-cell min-w-[11rem]",user:"hidden md:table-cell min-w-[9rem] max-w-[16rem] truncate text-ellipsis",status:"min-w-[9rem]",workflowType:"min-w-[8rem]",scheduleType:"min-w-[8rem]",dateShort:"hidden 2xl:table-cell min-w-[8rem]",dateLong:"hidden 2xl:table-cell min-w-[12rem]",number:"hidden xl:table-cell min-w-[6rem]",toggleInput:"2xl:max-w-auto 2xl:min-w-[6rem]",uuid:"hidden 2xl:table-cell max-w-[12rem]"}},61284:(e,t,r)=>{"use strict";r.d(t,{qN:()=>o,bI:()=>a,nQ:()=>s,By:()=>l,I3:()=>c,$m:()=>u,yJ:()=>d,Ii:()=>p,Ep:()=>f,uN:()=>m,S7:()=>b,Db:()=>h});var n=r(96486),i=r(20758),o={ALL:"all",ACTIVE:"active",INACTIVE:"inactive",DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived",IN_PROGRESS:"in_progress"},a={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",FAILED:"failed",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped"},s={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ALL:"all"},l={ONE_TIME:"one_time",RECURRING:"recurring"},c={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ARCHIVED:"archived"},u=[c.DYNAMIC,c.BULK_ACTION,c.SCHEDULED,c.ARCHIVED],d={member:"user"},p={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped",FAILED:"failed",CANCELLED:"cancelled"},f=function(e){return{action_type:null!==e&&void 0!==e?e:"",id:(0,n.uniqueId)("action_"),api_params:{}}},m={SPACE:"Space",PAYWALL:"Paywall",EVENT:"Posts::Event",MEMBER_TAG:"MemberTag",SPACE_GROUP:"SpaceGroup",POST_BASIC:"Posts::Basic",COMMUNITY:"Community",COURSE:"Space",PROFILE_FIELD:"ProfileField",RECURRING_EVENT_SETTING:"RecurringEventSetting",LESSON:"Lesson",QUIZ:"Lesson",SECTION:"Section",GAMIFICATION_LEVEL:"Gamification::Level",FORM:"Form"},b={BASIC:"basic",EVENT:"event",MEMBERS:"members",COURSE:"course",CHAT:"chat"},h=[i.Gb.enterprise,i.Gb.plus]},46681:(e,t,r)=>{"use strict";r.d(t,{_:()=>s,C:()=>l});var n=r(67294),i=r(81468),o=r(85893),a=(0,n.createContext)({pageSize:i.L8});a.displayName="WorkflowsData";var s=function(){return(0,n.useContext)(a)},l=function(e){var t=e.children,r=e.pageSize,n={pageSize:void 0===r?i.L8:r,category:e.category};return(0,o.jsx)(a.Provider,{value:n,children:t})}},19898:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var n=r(88767),i=r(50732),o=r(81089);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){var t=e.id,r=e.options,l=void 0===r?{}:r;return(0,n.useQuery)(["member-tag",t],(function(){return(0,o.UT)(i.av.memberTags.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},l))}},92739:(e,t,r)=>{"use strict";r.d(t,{r:()=>c});var n=r(86013),i=r(88767),o=r(34334),a=r(69647),s=["per_page"];function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{per_page:100},t=e.per_page,r=l(e,s),c=(0,a.p)().error;return(0,i.useQuery)(["workflows","list","spaces"],(function(){return o.rb.list({params:{per_page:t}})}),{onError:function(){return c((0,n.t)(["settings.workflows.form","errors","spaces","fetch_failed"]))}},r)}},7288:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(88767),i=r(57594),o=["per_page","location_type"];function a(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=function(e){var t=e.per_page,r=e.location_type,s=void 0===r?"":r,l=a(e,o);return(0,n.useQuery)(["workflows","list","upcomingEvents"],(function(){return i.S.fetchUpcomingEvents({params:{per_page:t,location_type:s}})}),l)}},23996:(e,t,r)=>{"use strict";r.d(t,{m:()=>l});var n=r(88767),i=r(34334),o=r(58837),a=["workflowId"];function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=function(e){var t=e.workflowId,r=s(e,a);return(0,n.useQuery)(["workflows",t],(function(){return(0,o.Cp)(i.nH.fetch({id:t,params:{v2_2_enabled:!0}}))}),r)}},57269:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(50732),i=r(44154),o=function(){var e=(0,i.U)({api:n.av.memberTags.index}),t=e.records;return{memberTags:void 0===t?[]:t,isLoading:e.isLoading}}},74113:(e,t,r)=>{"use strict";r.d(t,{ko:()=>c,yf:()=>u,Kg:()=>d});var n=r(67294),i=r(24185),o=r(17551),a=r(50732),s=r(31293),l="workflowSource",c=function(){var e=(0,i.TH)(),t=(0,o.U)();(0,n.useMemo)((function(){var r;if(e.pathname.includes(a.lA.paywalls.index)?r=s.f.PAYWALLS_WORKFLOWS_MODAL:e.pathname.includes(a.lA.members.onboarding)?r=s.f.ONBOARDING_WORKFLOWS_MODAL:t&&(r=s.f.SPACE_WORKFLOWS_MODAL),r)try{sessionStorage.setItem(l,r)}catch(n){console.error("Failed to set workflow source in sessionStorage",n)}}),[e,t])},u=function(){try{return sessionStorage.getItem(l)||s.f.WORKFLOWS_UPGRADE_MODAL}catch(e){return console.error("Failed to get workflow source from sessionStorage",e),s.f.WORKFLOWS_UPGRADE_MODAL}},d=function(){return{shouldGoBack:u()!==s.f.WORKFLOWS_UPGRADE_MODAL}}},67924:(e,t,r)=>{"use strict";r.d(t,{RC:()=>v});var n=r(67294),i=r(85564),o=r.n(i),a=r(81763),s=r.n(a),l=r(88767),c=r(34334),u=r(61284);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e,t){return!e&&(!t&&5e3)},v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=m((0,n.useState)(!1),2),i=r[0],a=r[1],d=t.query,f=void 0===d?"":d,b=t.workflowId,v=t.perPage,y=void 0===v?20:v,g=t.initialPage,_=void 0===g?1:g,x=t.disableRefetching,j=void 0!==x&&x,w=t.options,O=void 0===w?{refetchInterval:h(j,i),enabled:!!b}:w,S=["workflows",b,"runs",f,y],P=p({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},O),k=(0,l.useInfiniteQuery)(S,(function(e){var t=e.pageParam,r=void 0===t?_:t,n=1;s()(r)&&r>0&&(n=r);var i={page:n,per_page:y};return f&&(i.query=f),c.nH.fetchRuns({workflowId:b,params:i})}),P),C=(0,n.useMemo)((function(){var e;return(null===(e=k.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=k.data)||void 0===e?void 0:e.pages]),N=(0,n.useMemo)((function(){return o()(C.map((function(e){return e.records})))}),[C]);return(0,n.useEffect)((function(){if(!k.isLoading){var e=N.every((function(e){return(null===e||void 0===e?void 0:e.status)!==u.bI.IN_PROGRESS}));a(e)}}),[N,k.isLoading]),p(p({},k),{},{queryKey:S,runs:N,areAllRunsCompleted:i})}},53885:(e,t,r)=>{"use strict";r.d(t,{p:()=>a,H:()=>s});var n=r(87536),i=r(88767),o=r(34334),a=function(e,t){var r=t.id,n=t.action_type,i=t.api_params,a=t.position,s=void 0===a?1:a;return!r||r.startsWith("action")?o.nH.createAction({workflowId:e,body:{action_type:n,api_params:i,position:s}}):o.nH.updateAction({workflowId:e,id:r,body:{action_type:n,api_params:i,position:s}})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,n.Gc)().watch)("id");return(0,i.useMutation)((function(e){return a(t,e)}),e)}},33106:(e,t,r)=>{"use strict";r.d(t,{I:()=>b});var n=r(64687),i=r.n(n),o=r(67294),a=r(88767),s=r(34334),l=r(69647);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){var t=e.setIsTestingWebhook,r=e.setIsWebhookTestSuccessful,n=e.setIsWebhookTested,i=e.setTestWebhookResult,o=e.setIsWebhookUrlChanged,d=e.options,p=void 0===d?{}:d,f=(0,l.p)();return(0,a.useMutation)((function(e){return s.nH.testWebhook({body:e})}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:function(e){r(null===e||void 0===e?void 0:e.success),t(!1),n(!0),i(e),o(!1)},onError:function(e){console.error(e),f.error(e.message)}},p))};function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e,t){var r,n=f((0,o.useState)(!1),2),a=n[0],s=n[1],l=f((0,o.useState)(!1),2),c=l[0],u=l[1],m=f((0,o.useState)(!1),2),b=m[0],h=m[1],v=f((0,o.useState)(!1),2),y=v[0],g=v[1],_=f((0,o.useState)(null),2),x=_[0],j=_[1],w=d({setIsTestingWebhook:s,setIsWebhookTestSuccessful:u,setIsWebhookTested:h,setTestWebhookResult:j,setIsWebhookUrlChanged:g}).mutate;(0,o.useEffect)((function(){var t;g(b&&(null===e||void 0===e||null===(t=e.api_params)||void 0===t?void 0:t.url)!==(null===x||void 0===x?void 0:x.url))}),[null===e||void 0===e||null===(r=e.api_params)||void 0===r?void 0:r.url]);var O=function(){var e,r=(e=i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:s(!0),w(r);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{isTestingWebhook:a,isWebhookTestSuccessful:c,isWebhookTested:b,isWebhookUrlChanged:y,testWebhookResult:x,handleTestWebhook:O}}},9581:(e,t,r)=>{"use strict";r.d(t,{k:()=>pt});var n=r(67294),i=r(38776),o=r(37578),a=r(85893),s=(0,n.createContext)(null);s.displayName="MarketingHubStatusContext";var l=function(e){var t=e.children,r=(0,o.Rf)();return(0,a.jsx)(s.Provider,{value:r,children:t})},c=r(13976),u=r(94184),d=r.n(u),p=r(86013),f=r(52353),m=r.n(f),b=r(61284),h=r(74113),v=r(95721),y=r(13288),g=r(6952),_=r(46681),x=r(94342),j=r(24185),w=r(50732),O=r(79016),S=r(73468),P=r(18605),k=r(37004),C=r(36584),N=r(90312),I=r(5375),A=r(67764),E=r(74402),D=r(84731),T=r(31842),L=r(19338),M="settings.workflows.landing_page",R=function(){return(0,a.jsxs)(S.e.FeatureCards.Container,{children:[(0,a.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(N," 663w, ").concat(k," 812w, ").concat(C," 2000w"),src:N,bgColor:"#CFD8FE",imgClassName:"max-w-full max-h-full xl:max-w-[406px]",children:(0,a.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,a.jsx)(P.JO,{type:"20-lightning",size:20}),title:(0,p.t)([M,"card_1.title"]),subtitle:(0,p.t)([M,"card_1.subtitle"]),checkedList:[(0,p.t)([M,"card_1.bullet_1"]),(0,p.t)([M,"card_1.bullet_2"]),(0,p.t)([M,"card_1.bullet_3"])],bgColor:"#F4F6FF",accentColor:"#CFD8FE"})}),(0,a.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(E," 663w, ").concat(I," 812w, ").concat(A," 2000w"),src:E,bgColor:"#B0EBD9",imgClassName:"max-w-full max-h-full xl:max-w-[423px]",children:(0,a.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,a.jsx)(P.JO,{type:"20-rocket",size:20}),title:(0,p.t)([M,"card_2.title"]),subtitle:(0,p.t)([M,"card_2.subtitle"]),checkedList:[(0,p.t)([M,"card_2.bullet_1"]),(0,p.t)([M,"card_2.bullet_2"]),(0,p.t)([M,"card_2.bullet_3"])],bgColor:"#EBFAF5",accentColor:"#B0EBD9"})}),(0,a.jsx)(S.e.FeatureCards.Card,{srcSet:"".concat(L," 663w, ").concat(D," 812w, ").concat(T," 2000w"),src:L,bgColor:"#FFC9D3",imgClassName:"max-w-full max-h-full xl:max-w-[360px] self-end mb-[-7px]",children:(0,a.jsx)(S.e.FeatureCards.CardDescription,{mainIconEl:(0,a.jsx)(P.JO,{type:"20-clock",size:20}),title:(0,p.t)([M,"card_3.title"]),subtitle:(0,p.t)([M,"card_3.subtitle"]),checkedList:[(0,p.t)([M,"card_3.bullet_1"]),(0,p.t)([M,"card_3.bullet_2"]),(0,p.t)([M,"card_3.bullet_3"])],bgColor:"#FFF1F3",accentColor:"#FFC9D3"})})]})},B="settings.workflows.landing_page",U=function(){var e=(0,j.k6)(),t=(0,O.E)(),r=t.isCommunityOnTrial,n=t.isCommunityOnBasic,i=t.isCommunityOnProfessional,o=r||n||i,s=function(){e.push(w.o0.new())};return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)(S.e.HelloBar,{to:(0,w.xn)(),children:(0,p.t)([B,"upgrade_your_plan_to_start_using_workflows"])}),(0,a.jsx)(x.h,{title:(0,p.t)("settings.workflows.workflows")}),(0,a.jsx)(S.e.HeroSection,{title:(0,p.t)([B,"hero_title"]),subtitle:(0,p.t)([B,"hero_subtitle"]),buttonText:(0,p.t)([B,"action_button"]),onActionButtonClick:s,children:(0,p.t)([B,"hero_description"])}),(0,a.jsx)(R,{}),(0,a.jsx)(S.e.FooterAction,{title:(0,p.t)([B,"hero_title"]),buttonText:(0,p.t)([B,"action_button"]),onActionButtonClick:s,children:(0,p.t)([B,"footer_description"])})]})},F=r(78367),z=r(44579),V=r(58866),q=r(58253),Z=r(27025),G=function(e){var t=e.onClick;return(0,a.jsx)(Z.Lt.ItemWithLink,{onClick:t,children:(0,p.t)("settings.workflows.table.actions.archive")})},W=function(e){var t=e.onClick;return(0,a.jsx)(Z.Lt.ItemWithLink,{hasDanger:!0,onClick:t,children:(0,p.t)("settings.workflows.table.actions.delete")})},H=function(e){var t=e.onClick;return(0,a.jsx)(Z.Lt.ItemWithLink,{onClick:t,children:(0,p.t)(["settings.workflows.table.actions","duplicate"])})},Q=r(56339),J=r(92319),K=function(e){var t=e.workflowId,r=e.isAutomation,n=e.isActive,i=e.isBulkOrScheduled,o=e.isInProgress,s=(0,J.PF)(),l=(0,Q.C)({workflowId:t,disableRefetching:!0}).areAllRunsCompleted,c=(0,j.k6)();return(0,a.jsx)(Z.Lt.ItemWithLink,{onClick:function(){var e="";r&&n&&(e="settings.workflows.edit.continue_edit_automation_confirmation_modal"),!i||!o&&l||(e="settings.workflows.edit.continue_edit_running_workflow_confirmation_modal"),e?s.show({title:(0,p.t)([e,"title"]),body:(0,p.t)([e,"body"]),onConfirm:function(){s.hide(),c.push({pathname:w.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}})},onCancel:function(){s.hide()}}):c.push({pathname:w.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}})},children:(0,p.t)(["settings.workflows.table.actions","edit"])})},$=r(96486),X=r(88767),Y=r(34334),ee=r(23833),te=function(e){var t=e.workflowId,r=e.hideRerunModal,i=(0,n.useRef)(null),o=(0,X.useQuery)(["workflow-detail",t],(function(){return Y.nH.fetch({id:t})}),{onSuccess:function(){(0,$.defer)((function(){i.current&&i.current.dispatchEvent(new Event("submit",{cancelable:!0}))}))}}),s=o.data,l=o.isLoading;return(0,n.useEffect)((function(){return function(){r()}}),[r]),l?null:(0,a.jsx)(ee.H,{formRef:i,workflow:s,isRerun:!0})},re=function(e){var t=e.showRerunConfirmation;return(0,a.jsx)(Z.Lt.ItemWithLink,{onClick:t,children:(0,p.t)("settings.workflows.table.actions.rerun")})},ne=function(e){var t=e.workflowId,r=(0,j.k6)();return(0,a.jsx)(Z.Lt.ItemWithLink,{onClick:function(){r.push({pathname:w.o0.view({workflowId:t}),state:{from:{path:r.location.pathname,query:r.location.search}}})},children:(0,p.t)(["settings.workflows.table.actions","view"])})},ie=r(88427);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){var t=e.workflow,r=e.refetch,i=t.id,o=t.name,s=t.workflow_type,l=t.status,c=t.steps,u=void 0===c?[]:c,d=(0,ie.o)({workflowId:i,name:o,type:s,status:l,refetch:r}),p=d.onDuplicate,f=d.handleArchiveWithConfirmation,m=d.handleDeleteWithConfirmation,h=oe((0,n.useState)(!1),2),v=h[0],y=h[1];if(l===b.qN.ARCHIVED)return(0,a.jsx)("div",{className:"min-w-[2rem]",children:(0,a.jsx)(q.w.Actions,{children:(0,a.jsx)(H,{onClick:p})})});var g=s===b.nQ.BULK_ACTION||s===b.nQ.SCHEDULED,_=s===b.nQ.BULK_ACTION,x=s===b.nQ.DYNAMIC,j=l===b.qN.ACTIVE,w=l===b.qN.DRAFT,O=l===b.bI.IN_PROGRESS,S=u.length>0,P=_&&!O&&S&&!w;return(0,a.jsxs)("div",{className:"min-w-[2rem]",children:[(0,a.jsxs)(q.w.Actions,{children:[(0,a.jsx)(ne,{workflowId:i}),P&&(0,a.jsx)(re,{showRerunConfirmation:function(){y(!0)}}),(0,a.jsx)(K,{workflowId:i,isAutomation:x,isActive:j,isBulkOrScheduled:g,isInProgress:O}),!w&&(0,a.jsx)(G,{onClick:f}),(0,a.jsx)(H,{onClick:p}),w&&(0,a.jsx)(W,{onClick:m})]}),v&&(0,a.jsx)(te,{workflowId:i,hideRerunModal:function(){return y(!1)}})]})},le=r(36298),ce=function(e){var t=e.date,r=e.shouldIncludeTime?le.f.short_date_at_short_time:le.f.long_date;return(0,a.jsx)("span",{className:"break-normal",children:t?(0,le.w)({dateTime:new Date(t),format:r}):"-"})},ue=r(36722),de=r(65154),pe="settings.workflows.table",fe=function(e){return function(t){var r=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,p.t)([pe,"name"]),thClassName:de.y.title,cellClassName:de.y.title,cell:function(e){return(0,a.jsx)(ue.W,{children:e.getValue()||(0,p.t)([pe,"untitled_workflow"])})}},{accessorKey:"workflow_type",header:(0,p.t)([pe,"type.title"]),thClassName:de.y.workflowType,cellClassName:de.y.workflowType,cell:function(e){return(0,a.jsx)("span",{className:"break-normal",children:(0,p.t)([pe,"type",e.getValue()||"unknown"])})}},{accessorKey:"steps",header:(0,p.t)([pe,"steps"]),thClassName:de.y.steps,cellClassName:d()("!py-0",de.y.steps),cell:function(e){return(0,a.jsx)(z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,p.t)([pe,"created_by"]),thClassName:de.y.user,cellClassName:de.y.user,cell:function(e){return(0,a.jsx)(F.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,p.t)([pe,"created_on"]),thClassName:de.y.dateShort,cellClassName:de.y.dateShort,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,p.t)([pe,"last_run"]),thClassName:de.y.dateLong,cellClassName:de.y.dateLong,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,a.jsx)(se,{workflow:r.original,refetch:t})}}]}({refetch:t.refetch});if(!e)return r;var n=["name","workflow_type","created_by_community_member_id"];return r.filter((function(e){return n.includes(e.accessorKey)}))}},me=function(){var e=(0,_._)().category;return(0,a.jsx)(V.yG,{columns:fe(e),workflowType:b.nQ.ALL,status:b.qN.ARCHIVED})},be=r(87092),he=r(91455),ve=function(e){var t=e.workflow,r=t.id,n=t.status,i=t.steps,o=Boolean(null===i||void 0===i?void 0:i.length),s=n===b.qN.ACTIVE,l=n===b.qN.DRAFT,c=(0,he.q)({workflowId:r,isActive:s}),u=c.onChangeActiveStatus,d=c.isLoading;return(0,a.jsx)(be.p,{isWorkflowActive:s,isDisabled:!o||l,hasNoActions:!o,isDraft:l,isLoading:d,onChange:u})},ye="settings.workflows.table",ge=function(){var e,t=(0,_._)().category;return(0,a.jsx)(V.yG,{columns:(e=t,function(t){var r=t.refetch,n={name:{accessorKey:"name",header:(0,p.t)([ye,"name"]),thClassName:de.y.title,cellClassName:de.y.title,cell:function(e){return(0,a.jsx)(ue.W,{children:e.getValue()||(0,p.t)([ye,"untitled_workflow"])})}},steps:{accessorKey:"steps",header:(0,p.t)([ye,"steps"]),thClassName:de.y.steps,cellClassName:d()("!py-0",de.y.steps),cell:function(e){return(0,a.jsx)(z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},createdBy:{accessorKey:"created_by_community_member_id",header:(0,p.t)([ye,"created_by"]),thClassName:de.y.user,cellClassName:de.y.user,cell:function(e){return(0,a.jsx)(F.Xg,{id:e.getValue(),isLastNameHidden:!0})}},createdAt:{accessorKey:"created_at",header:(0,p.t)([ye,"created_on"]),thClassName:de.y.dateShort,cellClassName:de.y.dateShort,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue()})}},lastRunAt:{accessorKey:"last_run_at",header:(0,p.t)([ye,"last_run"]),thClassName:de.y.dateLong,cellClassName:de.y.dateLong,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue(),shouldIncludeTime:!0})}},tasksCount:{accessorKey:"tasks_count",header:(0,p.t)([ye,"total_runs"]),thClassName:de.y.number,thInnerClassName:"justify-end",cellClassName:d()("text-right",de.y.number),cell:function(e){return(0,a.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},active:{header:(0,p.t)([ye,"active"]),thClassName:de.y.toggleInput,thInnerClassName:"justify-center",cellClassName:d()("!py-4 cursor-default",de.y.toggleInput),onClick:function(e){return e.event.stopPropagation()},cell:function(e){return(0,a.jsx)(ve,{workflow:e.row.original})}},actions:{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var t=e.row;return(0,a.jsx)(se,{workflow:t.original,refetch:r})}}};return(e?["name","createdBy","tasksCount","active"]:["name","steps","createdBy","createdAt","lastRunAt","tasksCount","active","actions"]).map((function(e){return n[e]}))}),workflowType:b.nQ.DYNAMIC,status:b.qN.ALL})},_e=function(e){var t=e.status;return(0,a.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,a.jsx)("span",{className:"break-normal capitalize",children:(0,p.t)(["settings.workflows.table.status",t],{defaultValue:t||"\u2500"})})})},xe="settings.workflows.table",je=function(e){return function(t){var r=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,p.t)([xe,"name"]),thClassName:de.y.title,cellClassName:de.y.title,cell:function(e){return(0,a.jsx)(ue.W,{children:e.getValue()||(0,p.t)([xe,"untitled_workflow"])})}},{accessorKey:"status",header:(0,p.t)([xe,"status.title"]),thClassName:de.y.status,cellClassName:de.y.status,cell:function(e){return(0,a.jsx)(_e,{status:e.getValue()})}},{accessorKey:"steps",header:(0,p.t)([xe,"steps"]),thClassName:de.y.steps,cellClassName:d()("!py-0",de.y.steps),cell:function(e){return(0,a.jsx)(z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,p.t)([xe,"created_by"]),thClassName:de.y.user,cellClassName:de.y.user,cell:function(e){return(0,a.jsx)(F.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,p.t)([xe,"created_on"]),thClassName:de.y.dateShort,cellClassName:de.y.dateShort,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,p.t)([xe,"last_run"]),thClassName:de.y.dateLong,cellClassName:de.y.dateLong,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,p.t)([xe,"total_runs"]),thClassName:de.y.number,thInnerClassName:"justify-end",cellClassName:d()("text-right",de.y.number),cell:function(e){return(0,a.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,a.jsx)(se,{workflow:r.original,refetch:t})}}]}({refetch:t.refetch});if(!e)return r;var n=["name","status","created_by_community_member_id"];return r.filter((function(e){return n.includes(e.accessorKey)}))}},we=function(){var e=(0,_._)().category;return(0,a.jsx)(V.yG,{columns:je(e),workflowType:b.nQ.BULK_ACTION,status:b.qN.ALL})},Oe=r(37223),Se=r(91389),Pe=r(8246),ke=function(e){var t=e.category;return(0,a.jsx)(Se.N,{category:t,children:(0,a.jsxs)("div",{className:"px-6",children:[(0,a.jsx)(Pe.Z.TitleSm,{weight:"bold",children:(0,p.t)("settings.workflows.workflows")}),(0,a.jsx)(Oe.H,{category:t,includeCreateButton:!0})]})})},Ce=r(39639),Ne=r(45759),Ie="settings.workflows.table.notices.marketing_hub_access_ending_soon",Ae=function(e){var t=e.accessEndDate;return(0,a.jsx)("div",{className:"bg-primary px-6 pt-5",children:(0,a.jsx)(Ne.W,{iconEl:(0,a.jsx)(P.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(Pe.Z.LabelSm,{weight:"bold",children:(0,p.t)("".concat(Ie,".title"))}),(0,a.jsx)(Pe.Z.LabelSm,{children:(0,p.t)("".concat(Ie,".description"),{accessEndDate:(0,Ce.ie)(t)})})]})})})};function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(e){var t,r=e.scheduleType,n="settings.workflows.schedule_types",i=(Ee(t={},b.By.ONE_TIME,(0,p.t)("".concat(n,".one_time"))),Ee(t,b.By.RECURRING,(0,p.t)("".concat(n,".recurring"))),t);return(0,a.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,a.jsx)("span",{className:"break-normal",children:i[r]})})},Te=r(94281),Le=r(23855),Me=r(7069),Re=r(42699),Be=r(313),Ue=r(98338),Fe=function(){var e,t=(e=(0,n.useContext)(s),(0,i.Z)(e,"useMarketingHubStatus must be used within a MarketingHubStatusProvider"),e),r=t.data,o=t.isLoading,a=(0,Ue.wh)().currentCommunity;if(!r||!("plan"in r)||o)return{isLoading:o,accessEndDate:null};var l=r.enabled,c=r.trialing,u=r.plan;return l?c?{isLoading:o,accessEndDate:a.trial_ends_at}:u.cancel_at_period_end&&u.current_period_end?{isLoading:o,accessEndDate:u.current_period_end}:{isLoading:o,accessEndDate:null}:{isLoading:o,accessEndDate:null}},ze=function(){var e=Fe(),t=e.isLoading,r=e.accessEndDate;return{isLoading:t,hasAccessToRunOnDate:function(e){return!r||new Date(r)>=new Date(e)},isMarketingHubAccessEndingSoon:function(){if(!r)return!1;var e=new Date,t=(0,Le.default)(r),n=(0,Me.default)(t,7);return(0,Re.default)(e,n)&&(0,Be.default)(e,t)},accessEndDate:r}},Ve="settings.workflows.table",qe=function(e){var t=e.date,r=e.steps,n=(0,v.J)(),i=ze(),o=i.hasAccessToRunOnDate;if(i.isLoading)return(0,a.jsx)(y.a,{});var s=r.some((function(e){return"send_email"===e}));return n&&s&&t&&!o(t)?(0,a.jsx)(Te.T,{content:(0,p.t)([Ve,"requires_marketing_hub_tooltip"]),children:(0,p.t)([Ve,"requires_marketing_hub"])}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ce,{date:t,shouldIncludeTime:!0}),t&&(0,a.jsx)(P.JO,{type:"16-clock",className:"ml-2 pt-1"})]})},Ze="settings.workflows.table",Ge=function(e){return function(t){var r=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,p.t)([Ze,"name"]),thClassName:de.y.title,cellClassName:de.y.title,cell:function(e){return(0,a.jsx)(ue.W,{children:e.getValue()||(0,p.t)([Ze,"untitled_workflow"])})}},{accessorKey:"steps",header:(0,p.t)([Ze,"steps"]),thClassName:de.y.steps,cellClassName:d()("!py-0",de.y.steps),cell:function(e){return(0,a.jsx)(z.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"schedule_type",header:(0,p.t)([Ze,"schedule_type"]),thClassName:de.y.scheduleType,cellClassName:de.y.scheduleType,cell:function(e){return(0,a.jsx)(De,{scheduleType:e.getValue()})}},{accessorKey:"created_by_community_member_id",header:(0,p.t)([Ze,"created_by"]),thClassName:de.y.user,cellClassName:de.y.user,cell:function(e){return(0,a.jsx)(F.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,p.t)([Ze,"created_on"]),thClassName:de.y.dateShort,cellClassName:de.y.dateShort,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue()})}},{accessorKey:"next_run_at",header:(0,p.t)([Ze,"next_run"]),thClassName:de.y.dateLong,cellClassName:de.y.dateLong,cell:function(e){return(0,a.jsx)(qe,{date:e.getValue(),steps:e.row.original.steps})}},{accessorKey:"last_run_at",header:(0,p.t)([Ze,"last_run"]),thClassName:de.y.dateLong,cellClassName:de.y.dateLong,cell:function(e){return(0,a.jsx)(ce,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,p.t)([Ze,"total_runs"]),thClassName:de.y.number,thInnerClassName:"justify-end",cellClassName:d()("text-right",de.y.number),cell:function(e){return(0,a.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,a.jsx)(se,{workflow:r.original,refetch:t})}}]}({refetch:t.refetch});if(!e)return r;var n=["name","schedule_type","created_by_community_member_id"];return r.filter((function(e){return n.includes(e.accessorKey)}))}},We=function(){var e=(0,_._)().category;return(0,a.jsx)(V.yG,{columns:Ge(e),workflowType:b.nQ.SCHEDULED,status:b.qN.ALL})},He=r(91293),Qe=r(62618),Je=r(10161),Ke=function(){var e=(0,He.y)(),t=e.shouldShowEmailNotices,r=e.isSendingMarketingEmailsAllowed,n=e.marketingHubData;if(!t||!n||r)return null;var i=n.trialing?"settings.workflows.table.notices.trialing_limit_exhausted":"settings.workflows.table.notices.marketing_hub_limit_exceeded";return(0,a.jsx)("div",{className:"bg-primary px-6 pt-6",children:(0,a.jsx)(Ne.W,{iconEl:(0,a.jsx)(P.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,a.jsx)(Je.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,p.t)("".concat(i),{limit:(0,Qe.HA)(n.limits.marketing_email_limit)})})})})},$e=r(70254),Xe=r(24355),Ye=function(){return Y.nH.list({per_page:1})};function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ot="workflow_type",at="status",st=function(){var e,t=(0,Xe.K)(),r=(0,$e.t)(),i=(0,j.k6)(),o=nt((0,n.useState)(),2),a=o[0],s=o[1],l=nt((0,n.useState)(0),2),c=l[0],u=l[1],d=(0,X.useQuery)("totalWorkflows",Ye),f=d.data,m=(f=void 0===f?{meta:{}}:f).total_count,h=f.meta,v=(h=void 0===h?{}:h).counts_by_workflow_type,y=(v=void 0===v?{}:v).dynamic,g=v.bulk_action,_=v.scheduled,x=v.archived,O=h.has_active_marketing_hub_workflows,S=d.isLoading,P=(rt(e={},b.I3.DYNAMIC,y),rt(e,b.I3.BULK_ACTION,g),rt(e,b.I3.SCHEDULED,_),rt(e,b.I3.ARCHIVED,x),e),k=(0,n.useMemo)((function(){var e;return rt(e={},b.I3.DYNAMIC,(0,p.t)("settings.workflows.table.type.automations")),rt(e,b.I3.BULK_ACTION,(0,p.t)("settings.workflows.table.type.bulk_actions")),rt(e,b.I3.SCHEDULED,(0,p.t)("settings.workflows.table.type.scheduled")),rt(e,b.I3.ARCHIVED,(0,p.t)("settings.workflows.table.type.archived")),e}),[]),C=r.status,N=r.workflow_type;return(0,n.useEffect)((function(){if(!S){var e=x>0,t=C===b.qN.ARCHIVED&&e?b.I3.ARCHIVED:N||b.I3.DYNAMIC,r=b.$m.findIndex((function(e){return e===t}));s(e),u(r)}}),[S,a,C,N,x,k]),{isWorkflowExecutionEnabled:t,hasArchivedWorkflows:a,isLoading:S,totalWorkflows:m,hasActiveMarketingHubWorkflows:O,tabsCountersMap:P,selectedTabIndex:c,handleTabChange:function(e){u(e);var t=e===b.$m.length-1,r=tt(tt({},t&&rt({},at,b.qN.ARCHIVED)),!t&&rt({},ot,b.$m[e]));i.push({search:(0,w.WB)(r)})},tabNames:b.$m,tabLabels:k}},lt=function(){var e=st(),t=e.isLoading,r=e.totalWorkflows,n=e.hasArchivedWorkflows,i=e.isWorkflowExecutionEnabled,s=e.tabsCountersMap,l=e.selectedTabIndex,c=e.handleTabChange,u=e.tabNames,f=e.tabLabels,j=e.hasActiveMarketingHubWorkflows,w=(0,_._)().category;(0,h.ko)();var O=ze(),S=O.isLoading,P=O.isMarketingHubAccessEndingSoon,k=O.accessEndDate,C=(0,o.Rf)(),N=C.isLoading,I=C.data,A=(0,v.J)();return t||S||N||m()(l)?(0,a.jsx)(y.a,{}):t||0!==r&&(i||null!==I&&void 0!==I&&I.enabled)?(0,a.jsx)("div",{className:"bg-primary h-full",children:(0,a.jsxs)(g.O.Group,{selectedIndex:l,onChange:c,className:"!h-auto overflow-visible",children:[(0,a.jsxs)(x.h,{showBottomBorder:!1,title:(0,p.t)("settings.workflows.workflows"),children:[(0,a.jsx)(g.O.ListWrapper,{children:(0,a.jsx)(g.O.List,{children:u.map((function(e){return(0,a.jsxs)(g.O,{className:d()({hidden:e===b.I3.ARCHIVED&&!n}),children:[f[e],(0,a.jsx)(g.O.Counter,{children:s[e]})]},e)}))})}),A&&j&&P()&&(0,a.jsx)(Ae,{accessEndDate:k})]}),(0,a.jsx)(Ke,{}),(0,a.jsxs)(g.O.Panels,{children:[(0,a.jsx)(g.O.Panel,{children:(0,a.jsx)(ge,{})}),(0,a.jsx)(g.O.Panel,{children:(0,a.jsx)(we,{})}),(0,a.jsx)(g.O.Panel,{children:(0,a.jsx)(We,{})}),n&&(0,a.jsx)(g.O.Panel,{children:(0,a.jsx)(me,{})})]})]})}):w?(0,a.jsx)(ke,{category:w}):(0,a.jsx)(U,{})};function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pt=function(e){return(0,a.jsx)(_.C,ut(ut({},e),{},{children:(0,a.jsx)(l,{children:(0,a.jsx)(c.W,{children:(0,a.jsx)(lt,{})})})}))}},95390:(e,t,r)=>{"use strict";r.d(t,{h:()=>n,w:()=>i});var n=function(e){var t,r;return Boolean(null===e||void 0===e||null===(t=e.body)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.plan_limits_reached)},i=function(e){var t,r;return Boolean(null===e||void 0===e||null===(t=e.body)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.marketing_hub_required)}},3159:(e,t,r)=>{"use strict";r.d(t,{x:()=>y});var n=r(64687),i=r.n(n),o=r(86013),a=r(23560),s=r.n(a),l=r(88767),c=r(34334),u=r(10161),d=r(98338),p=r(35007),f=r(28849),m=r(69647),b=r(8246),h=r(85893);function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var y=function(e){var t,r,n=e.show,a=e.spaceGroupId,y=e.onClose,g=e.onSuccess,_=(0,m.p)(),x=_.error,j=_.success,w=(0,p.C)().goToCommunityRootPath,O=(0,d.nT)(),S=O.records,P=O.actions.refresh,k=(0,d.e2)(),C=k.actions.refresh,N=k.helpers.findById,I=(0,l.useMutation)((function(){return c.iD.destroy(a)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j((0,o.t)("space_groups.form.delete.success")),e.next=3,Promise.all([P(),C()]);case 3:w(),s()(y)&&y(),s()(g)&&g();case 6:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){x((0,o.t)("space_groups.form.delete.failed"))}}),A=I.mutate,E=I.isLoading,D=S.filter((function(e){return e.space_group_id===a})),T=N(a);return(0,h.jsxs)(f.V,{title:(0,o.t)("space_groups.delete.title"),confirmUserPrompt:(0,o.t)("space_groups.delete.confirm_prompt"),isOpen:n,onClose:y,onCancel:y,onConfirm:A,confirmVariant:"danger",isDisabled:E,confirmText:E?(0,o.t)("deleting"):(0,o.t)("confirm"),children:[(0,h.jsx)(u.w,{content:(0,o.t)("space_groups.delete.description",{space_name:(null===T||void 0===T?void 0:T.name)||""})})," ",Boolean(D.length)&&(0,h.jsxs)(h.Fragment,{children:[(0,o.t)("space_groups.delete.this_includes"),(0,h.jsxs)("div",{className:"border-primary mt-4 rounded-md border",children:[(0,h.jsx)("div",{className:"bg-secondary border-primary rounded-t-md border-b px-4 py-1",children:(0,h.jsx)(b.Z.LabelXs,{weight:"semibold",children:(0,o.t)("space_groups.delete.spaces_count",{count:D.length})})}),(0,h.jsx)("ul",{className:"max-h-56 w-full list-inside overflow-y-scroll p-4",children:D.map((function(e){return(0,h.jsx)("li",{className:"truncate",children:e.name},e.id)}))})]})]})]})}},55133:(e,t,r)=>{"use strict";r.d(t,{a:()=>u});var n=r(86013),i=r(67687),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={translationRoot:"space_groups.form.create",hiddenField:!0,hideDescription:!0,className:"flex flex-row-reverse justify-end m-0",labelClassName:"ml-4 mb-0",labelWrapperClassName:"flex items-center",shouldToggleValueOnLabelClick:!0},u=function(){return(0,o.jsxs)("div",{className:"mt-8 space-y-5",children:[(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"hide_members_count",tooltipText:(0,n.t)("space_groups.form.create.hide_members_count_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"is_hidden_from_non_members",tooltipText:(0,n.t)("space_groups.form.create.is_hidden_from_non_members_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"hide_non_member_spaces_from_sidebar",tooltipText:(0,n.t)("space_groups.form.create.hide_non_member_spaces_from_sidebar_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"allow_members_to_create_spaces",tooltipText:(0,n.t)("space_groups.form.create.allow_members_to_create_spaces_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"automatically_add_members_to_new_spaces",tooltipText:(0,n.t)("space_groups.form.create.automatically_add_members_to_new_spaces_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},c),{},{name:"add_members_to_space_group_on_space_join",tooltipText:(0,n.t)("space_groups.form.create.add_members_to_space_group_on_space_join_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})}))]})}},21825:(e,t,r)=>{"use strict";r.d(t,{K:()=>b});var n=r(67294),i=r(86013),o=r(87536),a=r(31304),s=r.n(a),l=r(67687),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0},m={translationRoot:"space_groups.form.create",hideBorder:!0,hideDescription:!0,fullWidth:!1},b=function(){var e=(0,o.Gc)(),t=e.watch,r=e.setValue,a=e.formState,u=t("name"),p=Boolean(a.dirtyFields.name),b=Boolean(a.dirtyFields.slug);return(0,n.useEffect)((function(){u&&!b&&p&&r("slug",s()(u,f))}),[r,u,b,p]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"w-full",children:(0,c.jsx)(l.l.Item,d(d({},m),{},{isFirstChild:!0,name:"name",rules:{required:(0,i.t)("space_groups.form.create.name_is_required"),maxLength:255},variant:"extra-bottom-margin",children:(0,c.jsx)(l.l.Input,{})}))}),(0,c.jsx)(l.l.Item,d(d({},m),{},{name:"slug",rules:{maxLength:255},variant:"extra-bottom-margin",transformValue:function(e){return s()(e,f)},tooltipText:(0,i.t)("space_groups.form.create.slug_tooltip",{host:window.location.origin}),children:(0,c.jsx)(l.l.Input,{})}))]})}},28338:(e,t,r)=>{"use strict";r.d(t,{X:()=>f});var n=r(86013),i=r.n(n),o=r(87561),a=r(3046),s=r(94347),l=r(67687),c=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){var t=e.space,r=e.isEdit,u=e.bookmark,p=e.renderFooter,f=e.isFolder,m=void 0!==f&&f,b=e.folderId,h=e.onAfterCreateOrUpdate,v=(0,s.k)(),y=o.Ry().shape(d({name:o.Z_().required(i().t("spaces.bookmarks.form.errors.name_required"))},!m&&{url:o.Z_().url(i().t("spaces.bookmarks.form.errors.url_format")).required(i().t("spaces.bookmarks.form.errors.url_required"))})),g=(0,a.S)({space:t,bookmark:u,onAfterCreateOrUpdate:h}),_=g.createBookmark,x=g.isCreatingBookmark,j=g.updateBookmark,w=g.isUpdatingBookmark;return(0,c.jsxs)(l.l,{id:"bookmark-form",onSubmit:function(e){return r?j(e):_(e)},validationSchema:y,autoComplete:"off",defaultValues:r?d({},u):d(d({display_type:m?"folder":"link",space_id:t.id,name:""},!m&&{url:"",emoji:"",folder_id:b}),!m&&b&&{folder_id:b}),children:[(0,c.jsx)(l.l.Item,{name:"name",variant:"extra-bottom-margin",label:(0,n.t)("spaces.bookmarks.form.name"),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(l.l.Input,{ref:v,prefix:!m&&(0,c.jsx)(l.l.EmojiPickerV3Wrapper,{record:u})})}),!m&&(0,c.jsx)(l.l.Item,{variant:"extra-bottom-margin",name:"url",label:(0,n.t)("spaces.bookmarks.form.url"),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(l.l.Input,{})}),null===p||void 0===p?void 0:p({isSubmitting:x||w})]})}},3046:(e,t,r)=>{"use strict";r.d(t,{S:()=>p});var n=r(64687),i=r.n(n),o=r(88767),a=r(28521),s=r(81089),l=r(50732),c=r(90789),u=r(36589);function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var p=function(e){var t=e.space,r=e.bookmark,n=e.onAfterCreateOrUpdate,p=(0,a.z)(),f=(0,u.I)().isV3Enabled,m=(0,o.useQuery)(l.av.spaces.bookmarks.index({spaceId:null===t||void 0===t?void 0:t.id,params:{per_page:40}}),{enabled:!(null===t||void 0===t||!t.id),refetchOnWindowFocus:!1}),b=m.data,h=m.isLoading,v=m.refetch,y=(null===b||void 0===b?void 0:b.records)||[],g=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===n||void 0===n||n(),e.next=3,v();case 3:return e.next=5,p.hide();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),_=(0,o.useMutation)((function(e){return(0,s.Cu)(l.av.spaces.bookmarks.create({spaceId:null===t||void 0===t?void 0:t.id}),{bookmark:e})}),{onSuccess:g}),x=_.mutate,j=_.isLoading,w=(0,o.useMutation)((function(e){return(0,s.aU)(l.av.spaces.bookmarks.update({spaceId:null===t||void 0===t?void 0:t.id,id:null===r||void 0===r?void 0:r.id}),{bookmark:e})}),{onSuccess:g}),O=w.mutate,S=w.isLoading,P=(0,o.useMutation)((function(e){var r=e.bookmarks_order;return(0,s.aU)(l.av.spaces.update({id:null===t||void 0===t?void 0:t.id}),{space:{bookmarks_order:r}})})).mutate,k=(0,o.useMutation)((function(){return(0,s.pC)(l.av.spaces.bookmarks.destroy({spaceId:null===t||void 0===t?void 0:t.id,id:null===r||void 0===r?void 0:r.id}))}),{onSuccess:v}),C=k.mutate,N=k.isLoading,I=Boolean(null===y||void 0===y?void 0:y.length),A=t&&((0,c.k8)(t)||I);return{records:y,isLoading:h,createBookmark:x,isCreatingBookmark:j,updateBookmark:O,isUpdatingBookmark:S,updateBookmarksOrder:P,deleteBookmark:C,isDeleting:N,shouldShowBookmarks:Boolean(f?t&&I:A)}}},31059:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(86013),i=r(85893),o=function(){return(0,i.jsx)("div",{className:"text-dark px-8 font-medium",children:(0,n.t)("chat_space.error_message")})}},27274:(e,t,r)=>{"use strict";r.d(t,{T:()=>A});var n=r(67294),i=r(86013),o=r(98338),a=r(18605),s=r(81786),l=r(13288),c=r(8246),u=r(64687),d=r.n(u),p=r(27117),f=r(88767),m=r(81089),b=r(50732);r(90789);var h=r(44032),v=r(52749),y=r(82177),g=r(69647),_=r(624),x=r(67687),j=r(85893),w="edit-course-type-form",O=function(e){var t=e.defaultValues,r=e.onSubmit;return(0,j.jsx)(x.l,{id:w,onSubmit:r,defaultValues:t,validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,j.jsx)(_.q,{hideLabel:!0})})};function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t,r,a,l=e.space,c=e.isOpen,u=e.onClose,_=(null===(t=l.course_setting)||void 0===t?void 0:t.course_type)||p.t,x={course_setting:{course_type:_}},k=P((0,n.useState)(!1),2),C=k[0],N=k[1],I=P((0,n.useState)(!1),2),A=I[0],E=I[1],D=P((0,n.useState)(!0),2),T=D[0],L=D[1],M=P((0,n.useState)(x),2),R=M[0],B=M[1],U=(0,g.p)(),F=U.error,z=U.success,V=function(){u(),setTimeout((function(){N(!1),L(!0),E(!1)}),100)},q=(0,o.T4)({spaceId:l.id}).refetch,Z=function(e){var t=e.space,r=e.options,n=void 0===r?{}:r,i=b.av.courses.settings({courseId:t.id});return(0,f.useMutation)((function(e){return(0,m.aU)(i,e)}),n)}({space:l,options:{onSuccess:(r=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:z((0,i.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),V();case 4:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)}),onError:function(){F((0,i.t)("spaces.form.create.course_types.save_error")),N(!1)}}}),G=Z.mutate,W=R.course_setting.course_type,H=(0,i.t)("spaces.form.create.course_types.".concat(W,"_confirmation"));return(0,j.jsxs)(y.u_,{isOpen:c,onClose:u,contentPortalId:"course-type-picker-portal",children:[(0,j.jsx)(y.u_.Overlay,{}),(0,j.jsxs)(y.u_.Content,{size:"md",children:[(0,j.jsxs)(y.u_.Header,{children:[(0,j.jsx)(y.u_.Title,{size:"sm",children:(0,i.t)("spaces.form.create.course_types.label")}),(0,j.jsx)(y.u_.HeaderActions,{children:(0,j.jsx)(y.u_.CloseButton,{onClick:u})})]}),(0,j.jsxs)(y.u_.Body,{className:"px-2",children:[T&&(0,j.jsx)(O,{defaultValues:x,onSubmit:function(e){_===e.course_setting.course_type?(z((0,i.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),V()):(B(e),E(!0),L(!1))}}),(0,j.jsx)(h.c,{title:(0,i.t)("spaces.form.create.course_types.are_you_sure"),confirmText:(0,i.t)("save"),cancelText:(0,i.t)("cancel"),confirmVariant:"circle",disabled:C,isOpen:A,onCancel:function(){L(!0),E(!1)},onClose:function(){L(!0),E(!1)},onConfirm:function(){N(!0),G(R)},children:(0,j.jsx)("p",{children:H})})]}),(0,j.jsxs)(y.u_.Footer,{className:"flex justify-end",children:[!C&&(0,j.jsx)(s.z,{type:"button",variant:"secondary",className:"mr-2",onClick:u,children:(0,i.t)("cancel")}),(0,j.jsx)(v._,{type:"submit",variant:"circle",form:w,submitting:C,children:(0,i.t)("save")})]})]})]})};function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t,r=e.space,u=N((0,n.useState)(!1),2),d=u[0],f=u[1],m=(0,o.T4)({spaceId:null===r||void 0===r?void 0:r.id}),b=m.data,h=m.isLoading,v=(0,o.wh)().isViewOnlyMasquerading;if(h)return(0,j.jsx)(l.a,{});if(!b)return null;var y=(null===(t=b.course_setting)||void 0===t?void 0:t.course_type)||p.t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C,{space:b,isOpen:d,onClose:function(){f(!1)}}),(0,j.jsxs)(c.Z.BodySm,{weight:"font-medium",children:[(0,j.jsx)(a.JO,{type:"16-book",size:16,className:"align-text-bottom"})," ",(0,i.t)("spaces.form.create.course_types.label"),":"," ",(0,j.jsx)(s.z,{variant:"plain",className:"hover:bg-tertiary !text-dark !px-1 !py-0.5 !font-semibold underline decoration-dashed decoration-1 underline-offset-2",onClick:function(){return f(!0)},disabled:v,children:(0,i.t)("spaces.form.create.course_types.".concat(y))})]})]})}},624:(e,t,r)=>{"use strict";r.d(t,{q:()=>l});var n=r(86013),i=r(18605),o=r(67687),a=r(85893),s=[{label:(0,n.t)("spaces.form.create.course_types.self_paced"),value:"self_paced",description:(0,n.t)("spaces.form.create.course_types.self_paced_info")},{label:(0,n.t)("spaces.form.create.course_types.structured"),value:"structured",description:(0,n.t)("spaces.form.create.course_types.structured_info")},{label:(0,n.t)("spaces.form.create.course_types.scheduled"),value:"scheduled",description:(0,n.t)("spaces.form.create.course_types.scheduled_info")}],l=function(e){var t=e.hideLabel;return(0,a.jsx)(o.l.Item,{name:"course_setting[course_type]",hideDescription:!0,rules:{required:(0,n.t)("spaces.form.create.choose_course_type"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",label:(0,n.t)("spaces.form.create.course_types.label"),hideLabel:t,children:(0,a.jsx)(o.l.RadioGroup,{variant:"box",name:"visibility",options:s,optionAlignment:"left",checkedIcon:(0,a.jsx)(i.JO,{type:"20-checkmark-circle",size:16})})})}},27117:(e,t,r)=>{"use strict";r.d(t,{d:()=>n,t:()=>i});var n={self_paced:"self_paced",scheduled:"scheduled",structured:"structured"},i=n.self_paced},33583:(e,t,r)=>{"use strict";r.d(t,{a:()=>ce});var n=r(16765),i=r(50732),o=r(94184),a=r.n(o),s=r(85893),l=["href","children","className","rel"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.href,r=e.children,n=e.className,i=e.rel,o=void 0===i?"noopener noreferrer":i,c=p(e,l);return(0,s.jsx)("a",u(u({},c),{},{href:t,rel:o,className:a()("focus-visible:!outline-secondary bg-brand text-brand-button inline-block rounded-md px-[18px] py-[6px] text-sm font-bold leading-5 transition-colors duration-150 hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",n),children:r}))},m=function(e){var t=e.heading,r=void 0===t?"":t,o=e.description,a=void 0===o?"":o,l=e.button_label,c=void 0===l?"":l,u=e.button_link,d=void 0===u?"":u,p=e.background_image,m=void 0===p?"":p,b=e.overlay_color,h=void 0===b?"#191B1F":b,v=e.heading_color,y=void 0===v?"#FFFFFF":v,g=e.text_color,_=void 0===g?"#FFFFFF":g,x=e.button_background_color,j=void 0===x?"#2B2E33":x,w=e.button_text_color,O=void 0===w?"#FFFFFF":w,S=(0,n.Vi)(h).alpha(.75).toRgbString(),P="";if(m)try{P=new URL(m).href}catch(k){P=(0,i.C9)({signed_id:m})}return(0,s.jsx)("div",{className:"flex w-full flex-col items-center bg-cover bg-center py-14 bg-blend-multiply",style:{backgroundImage:"url(".concat(P,")"),backgroundColor:S},children:(0,s.jsxs)("div",{className:"max-w-3xl px-5 text-center",children:[Boolean(r)&&(0,s.jsx)("h2",{className:"mb-3 text-4xl font-bold leading-10",style:{color:y},children:r}),Boolean(a)&&(0,s.jsx)("p",{className:"mb-5 text-base leading-6 tracking-tighter",style:{color:_},children:a}),Boolean(c)&&(0,s.jsx)(f,{href:d,style:{backgroundColor:j,color:O},children:c})]})})};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=r(67294),y=r(96486),g=r(7074);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=r(66007),w=r(86013),O=r(70254),S=r(8246),P=(r(30384),r(18605)),k=r(25676),C=function(e){var t=e.locked_page_heading,r=void 0===t?"":t,n=e.locked_page_description,i=void 0===n?{}:n,o=e.locked_button_url,a=void 0===o?"":o,l=e.locked_button_label,c=void 0===l?"":l,u=(0,O.t)().invited,d=Boolean(u),p=Boolean(c&&a),f=i.rendered_html_with_layout,m=void 0===f?"":f,b=Boolean(m);return(0,s.jsx)("div",{className:"flex h-full w-full justify-center p-0 md:h-auto md:p-6","data-testid":"locked-space",children:(0,s.jsxs)("div",{className:"border-primary bg-primary h-full w-full max-w-5xl rounded-none border-0 px-10 py-20 text-center md:h-auto md:rounded-lg md:border",children:[(0,s.jsx)(P.JO,{type:"lock",className:"mb-5 !w-14"}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,w.t)("please_check_your_email")}),(0,s.jsx)(S.Z.BodyMd,{children:(0,w.t)("please_check_your_email_description")})]}),!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(S.Z.TitleSm,{weight:"semibold",children:r||(0,w.t)("this_space_is_private")})}),(0,s.jsxs)("div",{className:"mb-4",children:[b&&(0,s.jsx)("div",{className:"text-dark flex justify-center",children:(0,s.jsx)(j.Z,{html:m})}),!b&&(0,s.jsx)(S.Z.BodyMd,{children:(0,w.t)("this_space_is_private_description")})]}),p&&(0,s.jsx)(k.Q,{variant:"brand",href:a,children:c})]})]})})},N=r(27862),I=r(40770),A=r(25882),E=r(42550),D=r(81786),T=Object.assign((function(){return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(S.Z.TitleXl,{children:(0,w.t)("paywalls.lock_screen.preview.empty_block.price")}),(0,s.jsx)(S.Z.LabelSm,{color:"text-default",children:"USD"})]}),(0,s.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,s.jsx)(S.Z.LabelXs,{children:(0,w.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:"$0"})})})]})}),{validateToRender:function(e){return!(null!==e&&void 0!==e&&e.id)}}),L=r(76296),M=r(31018),R="paywalls.lock_screen.preview.price.installment_payment",B="paywalls.lock_screen.preview.price.free_trial",U="paywalls.lock_screen.preview.price.once_payment",F={trial_then_upfront_then_value:{free_trial_label:B,once_payment:U,installment_payment:R},upfront_then_trial_then_value:{once_payment:U,free_trial_label:"paywalls.lock_screen.preview.price.trial",installment_payment:R},trial_then_value:{free_trial_label:B,installment_payment:R},upfront_then_value:{once_payment:"paywalls.lock_screen.preview.price.today_payment",installment_payment:R},value:{installment_payment:R}},z=Object.assign((function(e){var t=e.price,r=e.currency,n=F[null===t||void 0===t?void 0:t.scenario]||F.value,i=(0,M.I)(r,null===t||void 0===t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(S.Z.TitleXl,{size:"text-4xl",children:i||(null===t||void 0===t?void 0:t.amount_formatted)}),(0,s.jsx)(S.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,s.jsx)("div",{className:"flex flex-col gap-y-2",children:Object.keys(n).length>0&&(0,s.jsx)(S.Z.LabelXs,{color:"text-default",children:(0,y.compact)(Object.keys(n).map((function(e){return n[e]}))).map((function(e){return(0,w.t)(e,{once_payment_amount:(0,M.I)(r,null===t||void 0===t?void 0:t.upfront_payment_amount),installment_count:null===t||void 0===t?void 0:t.installments_count,installment_amount:(0,M.I)(r,null===t||void 0===t?void 0:t.installment_amount),interval_qualifier:(0,w.t)(["settings.paywall_prices.price_types","as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null===t||void 0===t?void 0:t.trial_days})})).join((0,w.t)("paywalls.lock_screen.preview.price.separator"))})})]})}),{validateToRender:function(e){return(0,L.t3)(e)}}),V=Object.assign((function(e){var t=e.price,r=e.currency,n=(0,M.I)(r,null===t||void 0===t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(S.Z.TitleXl,{size:"text-4xl",children:n}),(0,s.jsx)(S.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,s.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,s.jsx)(S.Z.LabelXs,{children:(0,w.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:n})})})]})}),{validateToRender:function(e){return(0,L.ZN)(e)}}),q="paywalls.lock_screen.preview.price.recurring_payment",Z="settings.paywall_prices.price_types",G="paywalls.lock_screen.preview.price.free_trial",W="paywalls.lock_screen.preview.price.today_payment",H={web:{trial_then_upfront_then_value:{free_trial_label:G,once_payment:"paywalls.lock_screen.preview.price.once_payment",recurring_payment:q},upfront_then_trial_then_value:{once_payment:W,free_trial_label:"paywalls.lock_screen.preview.price.trial",recurring_payment:q},trial_then_value:{free_trial_label:G,recurring_payment:q},upfront_then_value:{once_payment:W,recurring_payment:q},value:{}},mobile:{trial_then_upfront_then_value:{free_trial_label:G},trial_then_value:{free_trial_label:G},value:{}}},Q=[T,V,Object.assign((function(e){var t=e.price,r=e.currency,n=(0,I.B)().previewMode,i=(0,A.h)(n)?"web":"mobile",o=H[i][null===t||void 0===t?void 0:t.scenario]||H[i].value,l=(0,M.I)(r,null===t||void 0===t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0}),c=0===Object.keys(o).length;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)(S.Z.TitleXl,{size:"text-4xl",children:l}),(0,s.jsx)(S.Z.LabelSm,{color:"text-default",textTransform:"lowercase",children:"/ ".concat((0,w.t)([Z,"when_advertising",t.interval,t.interval_count]))})]}),(0,s.jsx)("div",{className:a()("flex flex-col gap-y-2",{invisible:c}),children:(0,s.jsx)(S.Z.LabelXs,{color:"text-default",children:(0,y.compact)(Object.keys(o).map((function(e){return o[e]}))).map((function(e){return(0,w.t)(e,{once_payment_amount:(0,M.I)(r,null===t||void 0===t?void 0:t.upfront_payment_amount),recurring_payment_amount:(0,M.I)(r,null===t||void 0===t?void 0:t.amount),interval_qualifier:(0,w.t)([Z,"as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null===t||void 0===t?void 0:t.trial_days})})).join((0,w.t)("paywalls.lock_screen.preview.price.separator"))||"."})})]})}),{validateToRender:function(e){return(0,L.QT)(e)}}),z],J=function(e){var t=e.price,r=e.currency,n=Q.find((function(e){return e.validateToRender(t)}));return n?(0,s.jsx)(n,{price:t,currency:r}):null},K=r(87536),$=function(){var e=(0,K.Gc)(),t=[];if(e){var r,n,i=e.formState.errors,o=null===i||void 0===i||null===(r=i.lock_screen_blocks)||void 0===r?void 0:r.find((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paywalls}));(0,y.compact)((null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.paywalls)||[]).forEach((function(e){var r,n,i,o,a;if(null!==e&&void 0!==e&&null!==(r=e.id)&&void 0!==r&&null!==(n=r.ref)&&void 0!==n&&n.name){var s=parseInt(e.id.ref.name.match(/paywalls.(\d).id+/)[1]);t[s]=!0}if(null!==e&&void 0!==e&&null!==(i=e.web_paywall_price)&&void 0!==i&&null!==(o=i.id)&&void 0!==o&&null!==(a=o.ref)&&void 0!==a&&a.name){var l=parseInt(e.web_paywall_price.id.ref.name.match(/paywalls.(\d).web_paywall_price+/)[1]);t[l]=!0}}))}return{paywallWithErrorsByIndex:t,isEditing:!!e,isPreviewing:!e}};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee=Object.assign((function(e){var t=e.children,r=v.Children.count(t);return(0,s.jsx)("div",{className:a()("grid w-full max-w-[960px] grid-cols-1 gap-y-4 px-6 md:mx-4",{"md:w-1/3 md:w-[332px]":1===r,"md:w-[680px] md:grid-cols-2 md:gap-x-4":2===r,"md:w-[960px] md:grid-cols-3 md:gap-x-4":r>2}),children:t})}),{Body:function(e){var t=e.children,r=e.isHighlighted,n=e.isError,i=e.isEmpty,o=e.hasFavorites;return(0,s.jsxs)("div",{className:a()("flex flex-col",{"opacity-40":i}),children:[o&&(0,s.jsx)("div",{className:a()("bg-brand flex flex-col items-center py-1",{"rounded-t-lg border-x border-t":r,"hidden md:invisible md:flex":!r,"border-feedback-error":n,"border-primary":!n}),children:(0,s.jsx)(S.Z.LabelXs,{weight:"bold",color:"text-brand-button",textTransform:"uppercase",children:(0,w.t)("paywalls.lock_screen.preview.featured")})}),(0,s.jsx)("div",{className:a()("bg-primary flex h-full flex-col gap-y-4 border p-5",{"rounded-b-lg":r,"rounded-lg":!r,"border-feedback-error":n,"border-primary":!n}),children:t})]})},Content:function(e){var t=e.paywall,r=e.description,n=$().isEditing,i=t.web_paywall_price,o=n?t.display_name||(0,w.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,l=r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:a()("flex flex-col gap-y-5 pb-5",{"border-primary border-b":!!l}),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(S.Z.LabelLg,{truncate:!0,children:o}),(0,s.jsx)(J,{price:i,currency:t.currency})]}),(0,s.jsx)("div",{children:(0,s.jsx)(D.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return function(e){var t=new URL("".concat((0,E.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",i.id),window.open(t,"_blank")}(t)},children:(0,w.t)("join")})})]}),l&&(0,s.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,s.jsx)(S.Z.BodySm,{color:a()({"text-lightest":n&&!t.description}),children:(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:l})})})]})},MobileContent:function(e){var t=e.paywall,r=e.description,n=$().isEditing,i=t.mobile_paywall_price,o=n?t.display_name||(0,w.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,l=r;return(0,s.jsxs)("div",{className:a()("flex flex-col gap-y-5"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(S.Z.LabelLg,{truncate:!0,children:o}),(0,s.jsx)(J,{price:i,currency:t.currency})]}),l&&(0,s.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,s.jsx)(S.Z.BodySm,{color:a()({"text-lightest":n&&!t.description}),children:(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:l})})}),(0,s.jsx)("div",{children:(0,s.jsx)(D.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return function(e){var t=new URL("".concat((0,E.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",i.id),window.open(t,"_blank")}(t)},children:(0,w.t)("join")})})]})},ContentResolver:function(e){var t=(0,I.B)().previewMode,r=(0,A.h)(t)?ee.Content:ee.MobileContent;return(0,s.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}}),te=function(){return(0,s.jsx)(ee,{children:(0,s.jsxs)(ee.Body,{isHighlighted:!1,isError:!1,isEmpty:!0,children:[(0,s.jsxs)("div",{className:"border-primary flex flex-col gap-y-2 border-b pb-4",children:[(0,s.jsx)(S.Z.LabelLg,{truncate:!0,children:(0,w.t)("paywalls.lock_screen.preview.empty_block.name")}),(0,s.jsx)(J,{price:null,currency:null})]}),(0,s.jsxs)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:[(0,s.jsx)(S.Z.BodySm,{color:"text-lightest",children:(0,w.t)("paywalls.lock_screen.preview.empty_block.description")}),(0,s.jsx)(D.z,{variant:"primary",type:"button",children:(0,w.t)("join")})]})]})})},re=function(){var e=(0,w.t)("terms_of_service"),t=(0,w.t)("privacy_policy"),r=(0,w.t)("separator_dot");return(0,s.jsx)(S.Z.LabelSm,{weight:"medium",children:[e,r,t].join(" ")})},ne=r(56031),ie=function(e){var t;return e.id&&(null===e||void 0===e||null===(t=e.web_paywall_price)||void 0===t?void 0:t.id)},oe=function(e){var t;return e.id&&(null===e||void 0===e||null===(t=e.mobile_paywall_price)||void 0===t?void 0:t.id)};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le={banner:m,description:function(e){var t=e.description_tiptap,r=void 0===t?{}:t,n=e.sgids_to_object_map,i=void 0===n?{}:n,o=e.inline_attachments,a=void 0===o?[]:o,l=_((0,v.useState)((0,y.uniqueId)("description_block_")),2),c=l[0],u=l[1];return(0,v.useEffect)((function(){u((0,y.uniqueId)("description_block_"))}),[r]),(0,s.jsx)("div",{className:"bg-primary flex w-full flex-col items-center",children:(0,s.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,s.jsx)(g.R,{readOnly:!0,value:r,sgidToObjectMap:i,inlineAttachments:a,editorClassName:"break-words",disabledExtensions:["mention","poll","ai_copilot"]})})},c)},call_to_action:function(e){return(0,s.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},lessons:function(e){var t=e.isMember,r=void 0!==t&&t,n=e.sections,i=void 0===n?[]:n;return(0,s.jsx)("div",{className:"bg-primary flex w-full flex-col items-center py-10",children:(0,s.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,s.jsx)(N.V,{isMember:r,sections:i})})})},legacy_lock_screen:function(e){var t=e.locked_page_heading,r=void 0===t?"":t,n=e.locked_page_description,i=void 0===n?{}:n,o=e.locked_button_url,a=void 0===o?"":o,l=e.locked_button_label,c=void 0===l?"":l;return(0,s.jsx)("div",{className:"bg-secondary text-dark h-full",children:(0,s.jsx)(C,{locked_page_heading:r,locked_page_description:i,locked_button_url:a,locked_button_label:c})})},paywalls:function(e){var t=e.paywalls,r=$(),n=r.paywallWithErrorsByIndex,i=r.isEditing,o=(0,I.B)().previewMode,l=(0,A.h)(o)?ie:oe,c=t.some((function(e){return function(e,t){return(0,ne.zh)(e)&&t(e)}(e,l)}));if(!c&&!i)return null;if(!c&&i)return(0,s.jsx)("div",{className:a()("bg-primary flex w-full flex-col items-center"),children:(0,s.jsx)(te,{})});var u=t.some((function(e){return e.paywall_highlighted})),d=function(e){return i&&(0,A.h)(o)?e.description||(0,w.t)("paywalls.lock_screen.preview.empty_block.description"):e.description};return(0,s.jsxs)("div",{className:a()("bg-primary flex w-full flex-col items-center gap-y-3"),children:[(0,s.jsx)(ee,{children:t.filter((function(e){return l(e)||i})).map((function(e,t){return(0,s.jsx)(ee.Body,{isHighlighted:e.paywall_highlighted,isError:!!n[t],isEmpty:!l(e),hasFavorites:u,children:(0,s.jsx)(ee.ContentResolver,{paywall:e,description:d(e)})},e.id)}))}),(0,A.h)(o)?null:(0,s.jsx)(re,{})]})}},ce=function(e){var t=e.block,r=void 0===t?{}:t,n=r.type,i=r.data,o=le[n];return(0,s.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i))}},75039:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(86013),i=r(16823),o=r(61263),a=r(47705),s=r(33583),l=r(85893),c=function(e){var t=e.blocks,r=void 0===t?[]:t,c=e.previewMode,u=void 0===c?"web":c;return Array.isArray(r)&&r.some((function(e){return!(null!==e&&void 0!==e&&e.hidden)}))?(0,l.jsx)("div",{className:"bg-primary text-dark flex h-full flex-col gap-y-10",children:r.filter((function(e){return!e.hidden})).map((function(e){return(0,l.jsx)("div",{className:"pointer-events-none select-none",children:(0,l.jsx)(s.a,{block:e})},e.id)}))}):"web"===u?(0,l.jsx)(i.F.Body,{hasPaddingTopMobile:!1,children:(0,l.jsx)(o.R,{})}):(0,l.jsx)(a._.Page,{title:(0,n.t)(["spaces_directory","card","private"]),subtitle:(0,n.t)(["this_space_is_private_description"])})}},59038:(e,t,r)=>{"use strict";r.d(t,{oF:()=>d,sE:()=>f,i4:()=>m});var n=r(67294),i=r(87536),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=Object.freeze({DESKTOP:"desktop",MOBILE:"mobile"}),p=(0,n.createContext)(null);p.displayName="FormBlocksContext";var f=function(){var e=(0,n.useContext)(p);if(!e)throw new Error("useFormBlocks must be used within a FormBlocksProvider");return e},m=function(e){var t=e.children,r=e.name,a=void 0===r?"blocks":r,l=c((0,n.useState)(null),2),u=l[0],f=l[1],m=(0,i.Gc)().watch,b=(0,i.Dq)({name:a}),h=b.fields,v=b.update,y=b.replace,g=c((0,n.useState)(d.DESKTOP),2),_=g[0],x=g[1],j=m(a),w=h.map((function(e,t){return s(s({},e),j[t])})),O=Boolean(u),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return-1;var t=w.find((function(t){return t.id===e}));return t?w.indexOf(t):-1};return(0,o.jsx)(p.Provider,{value:{blocks:w,isEditingBlock:O,blockBeingEdited:u,getBlockIndex:S,removeBlockBeingEdited:function(){x("desktop"),f(null)},setBlockBeingEdited:f,toggleBlockHidden:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=w.find((function(t){return t.id===e}));if(t){var r=w.indexOf(t);if(-1!==r){var n=s(s({},t),{},{hidden:!t.hidden});v(r,n)}}}},getBlockDataPath:function(){var e=S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return-1===e?"":"".concat(a,".").concat(e,".data")},replaceBlocks:function(e){return y(e)},previewMode:_,setPreviewMode:x},children:t})}},40770:(e,t,r)=>{"use strict";r.d(t,{B:()=>d,_:()=>p});var n=r(67294),i=r(96486),o=r(52238),a=r(79016),s=r(59038),l=r(25882),c=r(85893),u=(0,n.createContext)({previewMode:"desktop",setPreviewMode:i.noop,isInAppEnabled:!1,isCommunityOnPlus:!1,shouldShowBrandedAppBanner:!0});u.displayName="PaywallBlockContext";var d=function(){return(0,n.useContext)(u)},p=function(e){var t=e.children,r=(0,a.E)().isCommunityOnPlus,i=(0,s.sE)(),d=i.previewMode,p=i.setPreviewMode,f=(0,o.g)(),m=(0,n.useMemo)((function(){return(0,l.g)(d)&&r&&!f||(0,l.g)(d)&&!r}),[l.g,d,r,f]);return(0,c.jsx)(u.Provider,{value:{previewMode:d,setPreviewMode:p,isInAppEnabled:f,isCommunityOnPlus:r,shouldShowBrandedAppBanner:m},children:t})}},25882:(e,t,r)=>{"use strict";r.d(t,{h:()=>i,g:()=>o});var n=r(59038),i=function(e){return e===n.oF.DESKTOP},o=function(e){return e===n.oF.MOBILE}},93260:(e,t,r)=>{"use strict";r.d(t,{z:()=>C,U:()=>k});var n=r(67294),i=r(96486),o=r(86013);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={type:"banner",hidden:!1,data:{heading:(0,o.t)("courses.lockscreen.default.banner_heading"),description:(0,o.t)("courses.lockscreen.default.banner_description"),button_label:(0,o.t)("courses.lockscreen.default.buy_now"),button_link:"",background_image:"",overlay_color:"#191B1F",heading_color:"#FFFFFF",text_color:"#FFFFFF",button_background_color:"#2B2E33",button_text_color:"#FFFFFF"}},u={type:"description",hidden:!1,data:{description_tiptap:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:(0,o.t)("courses.lockscreen.default.description")}]}]},sgids_to_object_map:{},inline_attachments:[]}},d={type:"lessons",hidden:!0,data:{sections:[]}},p={type:"call_to_action",hidden:!1,data:s(s({},c.data),{},{overlay_color:"#2C3341",heading:(0,o.t)("courses.lockscreen.default.call_to_action_heading"),description:(0,o.t)("courses.lockscreen.default.call_to_action_description")})},f={type:"paywalls",hidden:!1,data:{paywalls:[]}},m=[c,u,d,f,p];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(){var e=["banner","description","paywalls","call_to_action"];return{event:[].concat(e,["legacy_lock_screen"]),basic:[].concat(e,["legacy_lock_screen"]),chat:[].concat(e,["legacy_lock_screen"]),course:[].concat(e,["lessons"])}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).post_type,n=e[void 0===r?"basic":r]||e.basic;return t.filter((function(e){return n.includes(e.type)}))},j=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return e.some((function(e){return e.type===t.type}))||e.push(t),e}),[])},w=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),r=e.locked_page_heading,n=void 0===r?"":r,i=e.locked_page_description,o=void 0===i?{}:i,a=e.locked_button_label,s=void 0===a?"":a,l=e.locked_button_url,c=void 0===l?"":l,u=e.post_type,d=void 0===u?"basic":u,p=o.rendered_html_with_layout;return Boolean(n||s||c||(void 0===p?"":p))&&"course"!==d?t.some((function(e){return"legacy_lock_screen"===e.type}))?t.map((function(e){return"legacy_lock_screen"===e.type?h(h({},e),{},{data:{locked_page_heading:n,locked_page_description:o,locked_button_url:c,locked_button_label:s}}):e})):(t.unshift({type:"legacy_lock_screen",hidden:!1,data:{locked_page_heading:n,locked_page_description:o,locked_button_url:c,locked_button_label:s}}),t.map((function(e){return"legacy_lock_screen"===e.type?e:h(h({},e),{},{hidden:!0})}))):t},O=function(e){return e.map((function(e){return h(h({},e),{},{id:(0,i.uniqueId)("block_")})}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).course_sections,r=void 0===t?[]:t,n=Array.isArray(r)?r:[];return e.map((function(e){return"lessons"!==e.type?e:h(h({},e),{},{data:h(h({},e.data),{},{sections:n})})}))},P=function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:m,a=_(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).post_type,i=void 0===n?"basic":n,o=y(r);return(e[i]||e.basic).forEach((function(e,r){"legacy_lock_screen"!==e&&(o.some((function(t){return t.type===e}))||(o=[].concat(y(o.slice(0,r)),[t[e]],y(o.slice(r)))))})),o}(a,{banner:c,description:u,call_to_action:p,lessons:d,paywalls:f},x(a,o,r),r),l=j(s),b=w(l,r),h=O(b);return S(h,r)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useMemo)((function(){return function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:[],a=_(),s=x(a,o,r),l=j(s),c=w(l,r),u=O(c);return S(u,r)}({space:e})}),[e])},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useMemo)((function(){return P({space:e})}),[e])}},83421:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});var n=r(86013),i=r(18605),o=r(85893),a=function(e){var t=e.isSpaceMember,r=e.isDripped,a=e.isCompleted,s="lock",l="lesson_locked";return t&&r&&(s=a?"16-checked-green":"16-unchecked",l=a?"lesson_completed":"lesson_incomplete"),(0,o.jsx)(i.JO,{className:"text-default flex-none",size:16,type:s,"aria-label":(0,n.t)(["courses.lessons",l])})}},27862:(e,t,r)=>{"use strict";r.d(t,{V:()=>C});var n=r(86013);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t=e.reduce((function(e,t){var r=i(t.split(":").reverse(),3),n=r[0],o=r[1],a=r[2];return e+(parseInt(n)+60*parseInt(o)+3600*parseInt(null!==a&&void 0!==a?a:0))}),0);return{hours:Math.floor(t/3600),minutes:Math.floor(t%3600/60),seconds:t%60}},s=function(e){var t=e.hours,r=e.minutes;return t>0?(0,n.t)("courses.summary.content.hr_min_duration",{hours:t,minutes:r}):(0,n.t)("courses.summary.content.min_duration",{minutes:r})},l=r(81786),c=r(8246),u=r(94184),d=r.n(u),p=r(18605),f=r(40160),m=r(24185),b=r(83421),h=r(90332),v=r(50732),y=r(94281),g=r(85893),_=function(e){var t,r=e.lesson,n=void 0===r?{}:r,i=e.isMember,o=e.section,a=(0,m.UO)(),s=null===a||void 0===a?void 0:a.spaceSlug;return(0,g.jsx)(f.OL,{onClick:function(e){i||e.preventDefault()},to:v.H4.showLesson({spaceSlug:s,lessonId:n.id,sectionId:o.id}),className:d()("flex w-full items-center space-x-2 p-4",i?"cursor-pointer":"cursor-default"),children:(0,g.jsxs)(y.T,{content:(0,h.t)({drippedAt:o.dripped_at,dripDelay:o.drip_delay,needsToCompletePreviousLesson:n.needs_to_complete_previous_lesson}),placement:"bottom-start",disabled:n.is_dripped,arrow:!1,className:"flex w-full items-center",dataTestId:"lesson-content-tittle",children:[(0,g.jsx)(b.v,{isDripped:n.is_dripped,isSpaceMember:i,isCompleted:n.completed}),(0,g.jsx)("div",{className:"ml-3 flex-1",children:(0,g.jsx)(c.Z.BodySm,{children:n.name})}),(null===(t=n.featured_media)||void 0===t?void 0:t.duration)&&(0,g.jsx)(c.Z.BodySm,{children:n.featured_media.duration})]})},n.id)},x=function(e){var t=e.section,r=void 0===t?{}:t,i=e.isMember,o=e.hasBorder,l=void 0!==o&&o,u=e.open,f=e.onToggle,m=a(r.lessons.map((function(e){var t;return null===(t=e.featured_media)||void 0===t?void 0:t.duration})).filter(Boolean)),b=(0!==m.hours||0!==m.minutes)&&" ".concat((0,n.t)("separator_dot")," ").concat(s(m)),h=r.lessons.length;return(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{type:"button",onClick:f,className:d()("bg-secondary flex w-full justify-between p-4 text-left",{"border-primary border-b":u||l}),children:[(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(p.JO,{type:u?"16-chevron-down":"16-chevron-right",className:"mr-2",size:16}),(0,g.jsx)(c.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:r.name})]}),(0,g.jsxs)(c.Z.LabelSm,{children:[(0,n.t)("courses.summary.content.lessons_count",{count:h}),b]})]}),u&&(0,g.jsx)("div",{className:"divide-primary divide-y",children:r.lessons.map((function(e){return(0,g.jsx)(_,{lesson:e,isMember:i,section:r},e.id)}))})]},r.id)},j=r(67294);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.isMember,r=void 0!==t&&t,i=e.sections,o=void 0===i?[]:i,u=function(e){var t=e.sections,r=P((0,j.useState)(Object.fromEntries(t.map((function(e){return[e.id,!0]})))),2),n=r[0],i=r[1];return{hasExpandedSections:function(){return Object.values(n).some(Boolean)},isSectionExpanded:function(e){return n[e.id]},toggleSectionExpanded:function(e){i((function(t){return O(O({},t),{},S({},e.id,!t[e.id]))}))},expandAllSections:function(){i(Object.fromEntries(t.map((function(e){return[e.id,!0]}))))},collapseAllSections:function(){i(Object.fromEntries(t.map((function(e){return[e.id,!1]}))))}}}({sections:o}),d=u.hasExpandedSections,p=u.isSectionExpanded,f=u.toggleSectionExpanded,m=u.expandAllSections,b=u.collapseAllSections;if(0===(null===o||void 0===o?void 0:o.length))return null;var h=o.length,v=o.reduce((function(e,t){return e+t.lessons.length}),0),y=a(o.map((function(e){return e.lessons})).flat().map((function(e){var t;return null===(t=e.featured_media)||void 0===t?void 0:t.duration})).filter(Boolean)),_=(0!==y.hours||0!==y.minutes)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z.LabelSm,{children:(0,n.t)("separator_dot")}),(0,g.jsx)(c.Z.LabelSm,{children:s(y)})]});return(0,g.jsxs)("div",{className:"flex w-full flex-col","data-testid":"summary-course-content",children:[(0,g.jsx)(c.Z.TitleSm,{as:"h2",weight:"semibold",color:"text-darkest",children:(0,n.t)("courses.summary.content.title")}),(0,g.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,g.jsxs)("div",{className:"text-dark flex items-center space-x-1",children:[(0,g.jsx)(c.Z.LabelSm,{children:(0,n.t)("courses.summary.content.sections_count",{count:h})}),(0,g.jsx)("span",{children:(0,n.t)("separator_dot")}),(0,g.jsx)(c.Z.LabelSm,{children:(0,n.t)("courses.summary.content.lessons_count",{count:v})}),_]}),(0,g.jsx)(l.z,{className:"!p-0",variant:"plain",onClick:function(){d()?b():m()},children:(0,g.jsx)(c.Z.LabelSm,{children:d()?(0,n.t)("courses.summary.content.collapse_all_sections"):(0,n.t)("courses.summary.content.expand_all_sections")})})]}),(0,g.jsx)("div",{className:"border-primary overflow-hidden rounded-md border",children:o.map((function(e,t){var n=t===h-1;return(0,g.jsx)(x,{section:e,isMember:r,hasBorder:!n,open:p(e),onToggle:function(){return f(e)}},e.id)}))})]})}},96075:(e,t,r)=>{"use strict";r.d(t,{l:()=>O});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(96486),l=r(52175),c=r(39723),u=r(54030),d=r(46266),p=r(6298),f=r(47839),m=r(18605),b=r(85893),h=function(e){var t=e.onClick;return(0,b.jsx)("a",{href:"#create-space",className:"block-header__action action--add-space","data-testid":"create-space",onClick:t,children:(0,b.jsx)(m.JO,{type:"circle-add"})})},v=["spaceGroupId","type","size","useDrawerFlow","children"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O=function(e){var t=e.spaceGroupId,r=e.type,i=e.size,m=void 0===i?"md":i,y=e.useDrawerFlow,_=e.children,j=w(e,v),O=x((0,n.useState)(!1),2),S=O[0],P=O[1],k=(0,u.a7)(),C=function(){P(!1)},N=function(e){e.preventDefault(),P(!0)};return(0,b.jsxs)(b.Fragment,{children:[!r&&(0,b.jsx)("a",g(g({href:"#create-space",onClick:N},j),{},{children:_})),"icon"===r&&(k?(0,b.jsx)(d.Y,{content:(0,a.t)("create_a_space"),delay:0,arrow:!0,size:"regular",animation:"fade",children:(0,b.jsx)(h,{onClick:N})}):(0,b.jsx)(h,{onClick:N})),"link"===r&&(0,b.jsx)("button",g(g({type:"submit",className:o()({"create-space-btn--md":"md"===m,"create-space-btn--lg":"lg"===m}),onClick:N},j),{},{children:(0,a.t)("create_a_space")})),y?(0,b.jsx)(p.d,{hideHeader:!0,open:S,noWrapperPadding:!0,children:(0,b.jsx)(c._,{open:S,onClose:C,currentSpaceGroupId:t})}):(0,b.jsx)(f.u,{variant:"fullscreen",title:(0,a.t)("create_a_space"),show:S,onClose:s.noop,hideCloseButton:!0,hideTitle:!0,children:(0,b.jsx)(l.J,{space_group_id:t,onModalClose:C})})]})}},67397:(e,t,r)=>{"use strict";r.d(t,{Nn:()=>d,Jr:()=>p});var n=r(86013),i=(r(90789),"!h-6 !w-6 !text-dark"),o="spaces.form.edit.customize.layout",a=[{label:(0,n.t)([o,"feed"]),icon:{type:"feed-thumbnail",viewBox:"0 0 75 78"},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"list-thumbnail",viewBox:"0 0 75 77"},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"card-thumbnail",viewBox:"0 0 75 77"},value:"cards"}],s=[{label:(0,n.t)([o,"feed"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"20-card-view-mobile",viewBox:"0 0 25 24",className:i},value:"cards"}],l=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"support-widget-calendar",viewBox:"0 0 24 24",className:i},value:"calendar"}],c=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"event-layout-thumbnail",viewBox:"0 0 118 84"},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"event-layout-list",viewBox:"0 0 118 90"},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"event-layout-calendar",viewBox:"0 0 120 90"},value:"calendar"}],u=[{label:(0,n.t)([o,"feed"]),icon:{type:"20-feed",viewBox:"-2 -1 25 24",className:i},value:"feed"},{label:(0,n.t)([o,"masonry"]),icon:{type:"20-masonry",viewBox:"-2 -1 25 24",className:i},value:"masonry"},{label:(0,n.t)([o,"grid"]),icon:{type:"20-grid",viewBox:"-2 -1 25 24",className:i},value:"grid"}],d=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?c:"image"===n?u:a).filter((function(e){return!r.includes(e.value)}))},p=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?l:"image"===n?u:s).filter((function(e){return!r.includes(e.value)}))}},7895:(e,t,r)=>{"use strict";r.d(t,{Hr:()=>d,fj:()=>p,$o:()=>m});var n=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){return[].concat(s("all"==e.default_notification_setting?["default_notification_setting"]:[]),s("all"==e.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),s("all"==e.default_mobile_notification_setting?["default_mobile_notification_setting"]:[]))},u=function(e){return e.all_notifications_enabled?"all":e.mention_notifications_enabled?"mentions":e.notifications_off?"never":void 0},d=function(e){var t=e.visible_tabs;return Object.keys(t).filter((function(e){return t[e]}))},p=function(e){var t;return o(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","moderator_ids"])),{},{notification_type:"chat"===e.post_type?u(e):c(e),show_right_sidebar:!e.hide_right_sidebar,allow_members_to_create_posts:!e.is_post_disabled,allow_members_to_add_others:!e.prevent_members_from_adding_others,allow_post_title:!e.hide_post_settings,allow_cover_images:!e.disable_member_post_covers,show_sorting:!e.hide_sorting,show_to_logged_out_visitors:!e.is_hidden,visible_tabs:d(e),locked_page_description:null===(t=e.locked_page_description)||void 0===t?void 0:t.trix_html})},f=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t},m=function(e){var t,r=e.show_right_sidebar,i=e.allow_members_to_create_posts,a=e.allow_members_to_add_others,s=e.allow_post_title,l=e.allow_cover_images,c=e.show_to_logged_out_visitors,u=e.meta_tag_attributes,d=e.notification_type,p=e.visible_tabs,m=e.show_sorting;return o(o(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","show_right_sidebar","allow_members_to_create_posts","allow_members_to_add_others","allow_post_title","allow_cover_images","show_to_logged_out_visitors","customize_lock_screen","policies","is_space_owner","is_space_member","meta_tag_attributes","show_sorting","moderator_ids"])),{},{hide_right_sidebar:!r,is_post_disabled:!i,prevent_members_from_adding_others:!a,hide_post_settings:!s,disable_member_post_covers:!l,is_hidden:!c,hide_sorting:!m,visible_tabs:f(p)},function(e){return{default_notification_setting:e.includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:e.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:e.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:e.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:e.includes("default_mention_in_app_notification_setting")?"all":"never"}}("chat"===e.post_type?(t=d).includes("all")?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:t.includes("mentions")?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:d)),{},{meta_tag_attributes:o({},(0,n.omit)(u,"opengraph_image_id"))})}},33939:(e,t,r)=>{"use strict";r.d(t,{c:()=>de});var n=r(67294),i=r(86013),o=r.n(i),a=r(98338),s=r(69647),l=r(64687),c=r.n(l),u=r(24185),d=r(34334),p=r(18605),f=r(6298),m=r(90789),b=r(3951),h=r(81786),v=r(67687),y=r(94184),g=r.n(y),_=r(87536),x=r(48088),j=r(23127),w=r(67397),O=r(85893),S=function(e){var t,r,o,s=e.space,l=e.isShownInRailBar,c=void 0!==l&&l,u=((0,a.wh)().currentCommunitySettings||{}).space_directory_enabled,d=(0,_.Gc)(),p=d.watch,f=d.setValue,b="open"!==p("visibility"),h=p("visible_tabs"),y=p("default_tab"),S=p("show_tab_bar"),P=p("display_view"),k=p("locked_page_description"),C=(0,m.H3)(s),N=p("hide_member_sidebar"),I=null===h||void 0===h?void 0:h.includes("posts"),A="cards"===P;(h.includes(y)||f("default_tab",h[0]),h.length>1&&!S&&f("show_tab_bar",!0),b&&null!==s&&void 0!==s&&null!==(t=s.locked_page_description)&&void 0!==t&&t.trix_html&&!k)&&f("locked_page_description",null===s||void 0===s||null===(o=s.locked_page_description)||void 0===o?void 0:o.trix_html);(0,n.useEffect)((function(){h.includes("members")?f("hide_member_sidebar",!0):f("hide_member_sidebar",!1)}),[s]),(0,n.useEffect)((function(){C&&f("visible_tabs",N?["posts","members"]:["posts"])}),[N,C]);var E=!A,D=!(0,m.Ug)(s)||(0,m.Ug)(s)&&u;return(0,O.jsxs)("div",{className:g()({"edit-space__container":!c}),children:[(0,m.H3)(s)&&(0,O.jsxs)(O.Fragment,{children:[I&&(0,O.jsx)(v.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,O.jsx)(v.l.RadioGroup,{fullWidth:!1,labelOutside:!0,options:(0,w.Nn)({postType:s.post_type})})}),E&&(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.customize.right_sidebar"),name:"show_right_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(v.l.ToggleSwitch,{variant:"small"})})]}),!(0,m.Ug)(s)&&(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,label:(0,i.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,i.t)("spaces.form.edit.customize.cover_image_description"),children:(0,O.jsx)(x.a,{name:"cover_image",aspectRatio:43/9})}),(0,m.Ug)(s)&&(0,O.jsx)("div",{className:"mb-4",children:(0,O.jsx)(v.l.Item,{name:"chat_room_description",hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.customize.add_description"),placeholder:(0,i.t)("spaces.form.edit.customize.description_placeholder"),variant:"extra-bottom-margin",children:(0,O.jsx)(v.l.TextArea,{})})}),D&&(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,label:(0,i.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,i.t)("spaces.form.edit.customize.thumbnail_image_description"),children:(0,O.jsx)(x.a,{name:"thumbnail_image",aspectRatio:16/9})}),C&&(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.customize.show_sidebar_members_block"),name:"hide_member_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(v.l.ToggleSwitch,{variant:"small"})}),b&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(v.l.Item,{name:"customize_lock_screen",inline:!0,hideBorder:!0,hideDescription:!0,tooltipText:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.description"),label:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.label")}),(0,O.jsxs)("div",{className:"customize-lock-screen",children:[(0,O.jsx)(v.l.Input,{name:"locked_page_heading",placeholder:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.title")}),(0,O.jsx)("div",{className:"trix-v2",children:(0,O.jsx)(j.O,{value:k,className:"locked-page-description",id:"locked_page_description",name:"locked_page_description",placeholder:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.description")},null===s||void 0===s||null===(r=s.locked_page_description)||void 0===r?void 0:r.trix_html)}),(0,O.jsx)(v.l.Input,{name:"locked_button_label",placeholder:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_text")}),(0,O.jsx)(v.l.Input,{name:"locked_button_url",placeholder:(0,i.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_link")})]})]})]})},P=r(79808),k=r(92768),C=r(97292),N=r(42207),I=function(){return(0,O.jsxs)("div",{className:"edit-space__container",children:[(0,O.jsx)(P.Z,{}),(0,O.jsx)(N.Z,{}),(0,O.jsx)(C.V,{}),(0,O.jsx)(k.Z,{})]})},A=r(62557),E={DETAILS:"Details",CUSTOMIZE:"Customize",OPTIONS:"Options"};const D=function(e){var t=e.activeTab,r=e.setActiveTab,n=(0,_.Gc)(),i=n.reset,o=n.formState.dirtyFields,a=!!Object.keys(o).length;return(0,O.jsx)(A.m,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:function(e){a?confirm("Are you sure you want to navigate away from this page?\nAll your unsaved changes will be lost.")&&(i(),r(e)):r(e)},options:Object.values(E).map((function(e){return{label:e}})),variant:"underline"})};var T=r(250),L=function(){return(0,O.jsx)(T.z,{title:(0,i.t)("spaces.form.edit.options.labels.label"),children:(0,O.jsx)("div",{className:"edit-space__container",children:(0,O.jsx)(v.l.Item,{hideBorder:!0,label:(0,i.t)("spaces.form.edit.options.labels.pinned_posts.label"),description:(0,i.t)("spaces.form.edit.options.labels.pinned_posts.description"),name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,O.jsx)(v.l.Input,{placeholder:(0,i.t)("spaces.form.pinned_posts")})})})})};const M=function(){return(0,O.jsx)(T.z,{title:o().t("spaces.form.edit.options.moderators.label"),children:(0,O.jsx)("div",{className:"edit-space__container",children:(0,O.jsx)(v.l.Item,{variant:"extra-bottom-margin",label:o().t("spaces.form.edit.options.moderators.space_moderators.label"),description:o().t("spaces.form.edit.options.moderators.space_moderators.description"),name:"moderator_ids",hideBorder:!0,children:(0,O.jsx)(v.l.CommunityMemberSelect,{placeholder:o().t("spaces.form.edit.options.moderators.space_moderators.placeholder"),variant:"tags",direction:"down",valueField:"id",excludeAdmins:!0})})})})};var R=r(68997);function B(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const F=function(e){var t=e.space,r=[];(0,m.V5)(t)&&(r=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,m.Ug)(t)&&(r=["chat_room_show_history"]),(0,m.H3)(t)&&(r=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]);var n=(0,a.wh)().currentCommunity;(0,R.v)(n)||(0,m.Ug)(t)||(r=[].concat(B(r),["show_to_logged_out_visitors"]));var i=function(e){return"allow_members_to_create_posts"!==e?(0,m.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e};return(0,O.jsx)(T.z,{title:o().t("spaces.form.edit.options.permissions.label"),children:(0,O.jsx)("div",{className:"edit-space__container",children:r.map((function(e){return(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:o().t("spaces.form.edit.options.permissions.".concat(i(e))),name:e,children:(0,O.jsx)(v.l.ToggleSwitch,{variant:"small"})},e)}))})})};var z=r(31304),V=r.n(z),q=r(74666),Z=r(74338),G=r(10647);const W=function(e){var t=e.setImageToDelete,r=[{name:"slug",label:o().t("spaces.form.edit.options.seo.slug"),description:o().t("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return V()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:o().t("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:o().t("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:o().t("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:o().t("spaces.form.edit.options.seo.opengraph_description")}],n=(0,_.Gc)().getValues;return(0,O.jsx)(T.z,{title:o().t("spaces.form.edit.options.seo.label"),children:(0,O.jsxs)("div",{className:"edit-space__container",children:[r.map((function(e){var t=e.name,r=e.label,n=e.description,i=e.transformValue;return(0,O.jsx)(v.l.Item,{hideBorder:!0,hideDescription:!n,label:r,name:t,transformValue:i,description:n,variant:"extra-bottom-margin",children:(0,O.jsx)(v.l.Input,{})},t)})),(0,O.jsxs)("div",{className:"edit-space__image-upload",children:[(0,O.jsx)(v.l.Label,{hideBorder:!0,label:o().t("spaces.form.edit.options.seo.opengraph_image.label")}),(0,O.jsx)(G.D,{name:"meta_tag_attributes[opengraph_image]",alt:"",className:"relative",showAddCoverBtn:!0,aspectRatio:q.pI.OPEN_GRAPH,changeImageText:o().t("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){return t(n("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,O.jsx)(Z.Z,{title:o().t("spaces.form.edit.options.seo.opengraph_image.add"),description:o().t("spaces.form.edit.options.seo.opengraph_image.description")})})]})]})})};function H(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const J=function(e){var t=e.space,r={LATEST:{label:(0,i.t)("latest"),value:"latest"},OLDEST:{label:(0,i.t)("oldest"),value:"oldest"},POPULAR:{label:(0,i.t)("popular"),value:"popular"},LIKES:{label:(0,i.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,i.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,i.t)("alphabetical"),value:"alphabetical"}},n=[{name:"default_comment_sort",options:[r.LATEST,r.OLDEST]}];return(0,m.V5)(t)||(n=[].concat(H(n),[{name:"default_sort",options:Object.values(r)},{name:"default_member_sort",options:[r.LATEST,r.OLDEST]}])),(0,O.jsx)(T.z,{title:(0,i.t)("spaces.form.edit.options.sort.label"),children:(0,O.jsxs)("div",{className:"edit-space__container",children:[(0,O.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",children:(0,O.jsx)(v.l.ToggleSwitch,{variant:"small"})}),n.map((function(e){var t=e.name,r=e.options;return(0,O.jsx)(v.l.Item,{hideBorder:!0,label:(0,i.t)("spaces.form.edit.options.sort.".concat(t,".label")),description:(0,i.t)("spaces.form.edit.options.sort.".concat(t,".description")),name:t,variant:"extra-bottom-margin",children:(0,O.jsx)(v.l.SelectNative,{options:r})},t)}))]})})};const K=function(e){var t=e.setImageToDelete,r=e.space;return(0,O.jsxs)("div",{className:"edit-space__container edit-space__container--no-padding",children:[!(0,m.Ug)(r)&&(0,O.jsx)(M,{}),(0,O.jsx)(F,{space:r}),(0,m.H3)(r)&&(0,O.jsx)(L,{}),(0,O.jsx)(W,{setImageToDelete:t}),!(0,m.Ug)(r)&&(0,O.jsx)(J,{space:r})]})};var $=r(7895);function X(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te=function(e){var t=e.spaceId,r=e.spaceGroupId,i=e.refetch,l=e.refreshSidebarSpaces,y=(0,b.m)(),g=y.fetchSpace,_=y.space,x=(0,m.fO)(),j=Y((0,n.useState)(!1),2),w=j[0],P=j[1],k=Y((0,n.useState)(E.DETAILS),2),C=k[0],N=k[1],A=Y((0,n.useState)(null),2),T=A[0],L=A[1],M=(0,a.wh)().currentCommunityMember;(0,n.useEffect)((function(){g(t)}),[]);var R=(0,b.m)().updateSpace,B=(0,s.p)(),U=(0,u.k6)(),F=function(){var e,r=(e=c().mark((function e(r,n){var a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.reset,e.prev=1,P(!0),s=(0,$.$o)(r),!T){e.next=8;break}return e.next=7,d.UK.deleteOpenGraphImage(T);case 7:L(!1);case 8:return e.next=10,R(s,t);case 10:return u=e.sent,e.next=13,Promise.all([i(),l()]);case 13:a((0,$.fj)(u)),U.push(x(u,M)),B.success(o().t("spaces.form.edit.success")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),B.error(o().t("spaces.form.edit.error"));case 21:return e.prev=21,P(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){X(o,n,i,a,s,"next",e)}function s(e){X(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),z=(0,n.useMemo)((function(){return _&&(0,$.fj)(_)}),[_]);return _&&z?(0,O.jsxs)(v.l,{onSubmit:F,defaultValues:z,className:"form__wrapper edit-space edit-space__form",children:[(0,O.jsx)(D,{activeTab:C,setActiveTab:N,space:_}),function(){switch(C){case E.DETAILS:return(0,O.jsx)(I,{currentSpaceGroup:r});case E.CUSTOMIZE:return(0,O.jsx)(S,{space:_});case E.OPTIONS:return(0,O.jsx)(K,{space:_,setImageToDelete:L})}}(),(0,O.jsx)(f.d.Footer,{sticky:!0,children:(0,O.jsx)(h.z,{disabled:w,type:"submit",full:!0,variant:"primary",children:w?o().t("spaces.form.edit.apply_changes_button_saving"):o().t("spaces.form.edit.apply_changes_button")})})]}):(0,O.jsx)("div",{className:"edit-space__loader",children:(0,O.jsx)(p.JO,{type:"loader"})})};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oe=function(e){return(0,O.jsx)(s.V,{children:(0,O.jsx)(a.Br,{children:(0,O.jsx)(a.CM,{children:(0,O.jsx)(a.BD,{children:(0,O.jsx)(te,ne({},e))})})})})};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var de=function(e){var t=ce((0,n.useState)(!1),2),r=t[0],i=t[1],a=ce((0,n.useState)(!1),2),s=a[0],l=a[1];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("button",{type:"submit",onClick:function(){return i(!0)},className:"edit-space-button",children:o().t("spaces.form.edit.edit_button_label")}),(0,O.jsx)(f.d,{noWrapperPadding:!0,fixedHeader:!0,maskClosable:!1,title:o().t("spaces.form.edit.edit_drawer_header"),open:r,onClose:function(){i(!1),s&&window.location.reload()},children:(0,O.jsx)(oe,se(se({},e),{},{open:r,setSubmitted:l}))})]})}},2339:(e,t,r)=>{"use strict";r.d(t,{r:()=>R});var n=r(86013),i=r(58533),o=r(43227),a=r(22735),s=r(8246),l=r(18605),c=r(85893),u=function(e){var t=e.onAdd;return(0,c.jsxs)("button",{type:"button",className:"hover:bg-secondary flex h-12 w-full flex-row items-center rounded-lg",onClick:t,children:[(0,c.jsx)("div",{className:"bg-secondary ml-4 mr-3 inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-600",children:(0,c.jsx)(l.JO,{type:"16-account",size:16})}),(0,c.jsx)(s.Z.LabelSm,{weight:"semibold",children:(0,n.t)("spaces.form.edit.members.add_members")})]})},d=r(54030),p=r(27025),f=function(e){var t=e.member,r=e.cellVariant,i=e.onEdit,o=e.onRemove,s=e.tableVariant,u=t.id;return(0,c.jsx)(a.pj,{variant:r,className:"w-12 pr-4 text-right",children:(0,c.jsxs)(p.Lt,{direction:"bottom-end",button:(0,c.jsx)(p.Lt.MenuButton,{className:"invisible group-hover:visible",children:(0,c.jsx)(l.JO,{type:"20-menu-dots-horizontal",size:20,className:"text-dark"})}),children:[(0,c.jsx)(p.Lt.Item,{children:(0,c.jsx)(p.Lt.ItemLink,{type:"button",onClick:function(){return i(t)},children:(0,n.t)("spaces.form.edit.members.edit_member")})}),(0,c.jsx)(p.Lt.Item,{onClick:function(){return o(u)},children:(0,c.jsx)(p.Lt.ItemLink,{type:"button",children:"space-group-members"==s?(0,n.t)("space_groups.form.edit.members.remove_from_space_group"):(0,n.t)("spaces.form.edit.members.remove_from_space")})})]})})},m=r(36298),b=function(e){var t,r=e.member,n=e.cellVariant;if(e.hideColumn)return null;var i=null!==r&&void 0!==r&&null!==(t=r.currentSpaceMember)&&void 0!==t&&t.created_at?(0,m.w)({dateTime:new Date(r.currentSpaceMember.created_at),format:"long_date"}):"";return(0,c.jsx)(a.pj,{variant:n,className:"",children:(0,c.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:i})})},h=function(e){var t=e.member,r=e.cellVariant;if(e.hideColumn)return null;var n=null!==t&&void 0!==t&&t.lastActive?(0,m.w)({dateTime:new Date(t.lastActive),format:"long_date"}):"";return(0,c.jsx)(a.pj,{variant:r,className:"",children:(0,c.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:n})})},v=r(90789),y=r(388),g=r(98338),_=r(39068),x=r(64422),j=r(94353),w=function(e){var t=e.member,r=t.id,i=t.name,o=t.email,l=t.avatarUrl,u=t.role,d=t.publicUid,p=e.cellVariant,f=(0,g.L2)();return(0,c.jsx)(a.pj,{variant:p,className:"w-80",children:(0,c.jsxs)("div",{className:"inline-flex items-center",children:[(0,c.jsx)(y.C,{communityMemberId:r,name:i,publicUid:d,avatarURL:l,children:(0,c.jsx)(x.s,{name:i,src:l,size:"10"})}),(0,c.jsxs)("div",{className:"w-60 pl-3",children:[(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)(s.Z.LabelSm,{truncate:!0,weight:"semibold",color:"text-selector-active",children:i}),(0,v.H)(null===f||void 0===f?void 0:f.data)&&(0,_.RN)(u)&&(0,c.jsx)(j.g,{label:(0,n.t)("spaces.form.edit.members.waitlist"),square:!0})]}),(0,c.jsx)("div",{className:"w-60 truncate",children:(0,c.jsx)(s.Z.LabelSm,{color:"text-default",children:o})})]})]})})},O=r(81571),S=function(e){var t=e.cellVariant,r=e.member,n=e.onRoleChange,i=r.role,o=r.id;return(0,c.jsx)(a.pj,{variant:t,className:"w-32",children:(0,c.jsx)(O.D,{id:o,role:i,onRoleChange:n})})},P=function(e){var t,r,n,i=e.member,o=e.cellVariant,u=e.hideColumn,d=null===i||void 0===i||null===(t=i.currentSpaceMember)||void 0===t?void 0:t.community_member_paywall_content_granted;if(u)return null;var p=(null===d||void 0===d||null===(r=d.paywall)||void 0===r?void 0:r.name)||(null===d||void 0===d||null===(n=d.paywall)||void 0===n?void 0:n.display_name),f=Boolean(p),m=(0,c.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,c.jsx)(l.JO,{type:"20-payments",className:"text-selector-active !w-4",size:20}),(0,c.jsx)("div",{className:"w-36 truncate",children:(0,c.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:p})})]});return(0,c.jsx)(a.pj,{variant:o,className:"",children:f?m:"-"})},k=function(e){var t=e.member,r=e.onRemove,n=e.onEdit,i=e.onRoleChange,o=e.cellVariant,s=void 0===o?"no-padding":o,l=e.tableVariant,u=e.columns,p=(0,d.kK)();return(0,c.jsxs)(a.SC,{className:"border-primary hover:bg-secondary group h-14 border-b",children:[(0,c.jsx)(w,{member:t,cellVariant:s}),(0,c.jsx)(S,{member:t,cellVariant:s,onRoleChange:i}),(0,c.jsx)(b,{member:t,cellVariant:s,hideColumn:!u.joinedAt||p}),(0,c.jsx)(P,{member:t,cellVariant:s,hideColumn:!u.paywall}),(0,c.jsx)(h,{member:t,cellVariant:s,hideColumn:!u.lastActive||p}),(0,c.jsx)(f,{member:t,cellVariant:s,onEdit:n,onRemove:r,tableVariant:l})]})},C=function(e){var t=e.columnsToRender,r=e.shouldShowHeader;return void 0!==r&&r?(0,c.jsx)(a.FE,{children:Object.keys(t).map((function(e){var r,n=t[e];return n&&(0,c.jsx)(a.dc,{className:"!px-0 ".concat(null!==(r=n.className)&&void 0!==r?r:""),children:(0,c.jsx)(s.Z.LabelXs,{leading:"leading-tight",color:"text-default",weight:"semibold",children:n.title.toUpperCase()})},n.key)}))}):null},N=r(81786),I=function(e){var t=e.onAddMember;return(0,c.jsxs)("div",{className:"flex min-h-[600px] flex-col items-center pt-44",children:[(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,n.t)("spaces.form.edit.members.no_members")})}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsx)(s.Z.BodySm,{children:(0,n.t)("spaces.form.edit.members.there_are_no_members")})}),(0,c.jsx)(N.z,{type:"button",variant:"secondary",large:!0,onClick:t,children:(0,n.t)("spaces.form.edit.members.add_members")})]})},A=r(67294),E=["dataLength","members","onAdd","onEdit","onRemove","onRoleChange","searchTerm","shouldHideAddMemberButton","shouldShowHeader","cellVariant","variant"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var R=function(e){var t=e.dataLength,r=e.members,l=e.onAdd,p=e.onEdit,f=e.onRemove,m=e.onRoleChange,b=e.searchTerm,h=void 0===b?"":b,v=e.shouldHideAddMemberButton,y=void 0!==v&&v,g=e.shouldShowHeader,_=void 0!==g&&g,x=e.cellVariant,j=void 0===x?"no-border":x,w=e.variant,O=void 0===w?"space-members":w,S=M(e,E),P=function(e){var t=e.dataLength,r=e.searchTerm,i=e.members,o=e.shouldHideAddMemberButton,a=0===t,s=0===i.length&&!r,l=0===i.length&&r,c=!r&&!o,u=(0,d.kK)(),p=i[0];return{isSpaceMembersEmpty:a,isResultEmpty:s,isResultEmptyWithSearch:l,shouldShowAddMember:c,columnsToRender:(0,A.useMemo)((function(){var e=null===p||void 0===p?void 0:p.currentSpaceMember,t=(null===p||void 0===p?void 0:p.currentSpaceMember)&&!u,r=(null===p||void 0===p?void 0:p.lastActive)&&!u;return{member:{title:(0,n.t)("spaces.form.edit.members.columns.name"),key:"name",className:"w-80"},memberRole:{title:(0,n.t)("spaces.form.edit.members.columns.role"),key:"memberRole"},joinedAt:t?{title:(0,n.t)("spaces.form.edit.members.columns.joined"),key:"joinedAt"}:null,paywall:e?{title:(0,n.t)("spaces.form.edit.members.columns.paywall"),key:"paywall"}:null,lastActive:r?{title:(0,n.t)("spaces.form.edit.members.columns.last_active"),key:"lastActive"}:null,dropdown:{title:"",key:"dropdown",className:"w-12"}}}),[p,u])}}({dataLength:t,members:r,searchTerm:h,shouldHideAddMemberButton:y}),N=P.isSpaceMembersEmpty,D=P.isResultEmpty,L=P.isResultEmptyWithSearch,R=P.shouldShowAddMember,B=P.columnsToRender;return N||D?(0,c.jsx)(I,{onAddMember:l}):L?(0,c.jsx)(s.Z.BodyMd,{children:(0,n.t)("spaces.form.edit.members.no_members_found_for_term",{member_search_term:h})}):(0,c.jsxs)(i.Z,T(T({loader:(0,c.jsx)(o.m,{}),dataLength:t,style:{overflow:"initial"},scrollThreshold:.5},S),{},{children:[R&&(0,c.jsx)(u,{onAdd:l}),(0,c.jsxs)(a.iA,{variant:"no-border",className:"w-full min-w-[600px]",tableClassName:"w-full table-fixed",children:[(0,c.jsx)(C,{columnsToRender:B,shouldShowHeader:_}),(0,c.jsx)(a.RM,{variant:"no-divider",children:r.map((function(e){return(0,c.jsx)(k,{cellVariant:j,member:e,onEdit:p,onRemove:f,onRoleChange:m,columns:B,tableVariant:O},e.id)}))})]})]}))}},11407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(85893),i=function(){return(0,n.jsx)("div",{className:"border-primary my-1 border-t"})}},92561:(e,t,r)=>{"use strict";r.d(t,{X:()=>L});var n=r(86013),i=r(96486),o=r(11049),a=r(54030),s=r(82177),l=r(98338),c=r(39068),u=r(90789),d=r(18605),p=r(8246),f=r(44769),m=r(1395),b=r(9405),h=r(59887),v=r(13288),y=r(85893),g=function(e){var t=e.space,r=(0,h.uk)(t.chat_room_uuid),a=r.chatParticipants,l=r.isLoading,c=r.refetchChatParticipants,u=r.hasNextPage,d=r.fetchNextPage,f=r.totalCount,m=(0,o.dd)(),g=t.chat_room_description;return(0,y.jsxs)(s.u_,{isOpen:m.visible,onClose:m.visible?m.hide:i.noop,children:[(0,y.jsx)(s.u_.Overlay,{}),(0,y.jsxs)(s.u_.Content,{children:[(0,y.jsxs)(s.u_.Header,{children:[(0,y.jsxs)(s.u_.Title,{size:"sm",children:[(0,n.t)("chat_space.details")," (",!l&&f,")"]}),(0,y.jsx)(s.u_.HeaderActions,{children:(0,y.jsx)(s.u_.CloseButton,{onClick:m.visible?m.hide:i.noop})})]}),(0,y.jsxs)(s.u_.Body,{className:"flex flex-col gap-4 !px-5 !py-2",children:[g&&(0,y.jsx)(p.Z.BodySm,{children:g}),l?(0,y.jsx)(v.a,{center:!0}):(0,y.jsx)(b.V,{spaceMembers:a,hasMoreSpaceMembers:u,space:t,refetchSpaceMembers:c,fetchNextPage:d})]})]})]})},_=o.gk.create((function(e){var t=e.space;return(0,y.jsx)(g,{space:t})})),x=r(11407),j=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.isAdmin,a=(0,u.Y_)(t),s=(0,u.J$)(t),l=(0,o.dd)(_);return(0,y.jsxs)(y.Fragment,{children:[s&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return l.show({space:t})},children:[(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)(d.JO,{type:"16-info",size:16,className:"text-default"}),(0,y.jsx)(p.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("chat_space.details")})]}),(0,y.jsx)(d.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}),(0,y.jsx)(x.Z,{})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(x.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},w=function(e){var t=e.space,r=e.isAdmin,n=e.setIsAddMemberOpen,i=(0,u.Y_)(t);return(0,y.jsxs)(y.Fragment,{children:[i&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(x.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:r})]})},O=r(970),S=r(75667),P=function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage,i=e.isAdmin,o=(0,u.Y_)(t),a=(0,u.J$)(t);return(0,y.jsxs)(y.Fragment,{children:[a&&(0,y.jsx)("div",{className:"md:hidden",children:(0,y.jsx)(O.v,{space:t})}),(0,y.jsx)(x.Z,{}),o&&(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:n}),!i&&a&&(0,u.P8)(t)&&(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(x.Z,{}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},k=r(84146),C=function(e){var t=e.space,r=e.isAdmin,n=e.setIsAddMemberOpen,i=(0,u.J$)(t);return(0,y.jsxs)(y.Fragment,{children:[i&&(0,u.JW)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k.t,{space:t}),(0,y.jsx)(x.Z,{})]}),(0,u.Y_)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(x.Z,{})]}),!r&&i&&(0,u.P8)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(x.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:r})]})},N=r(64510),I=r(18757),A=function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage,i=e.isAdmin,o=(0,u.JW)(t),a=(0,u.Y_)(t),s=(0,u.J$)(t);return(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)(N.m,{space:t}),(0,y.jsx)(x.Z,{}),o&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I.J,{space:t}),(0,y.jsx)(x.Z,{})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:n}),(0,y.jsx)(x.Z,{})]}),!i&&s&&(0,u.P8)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(x.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},E=function(e){var t=e.space,r=e.onClickAddCoverImage,n=e.setIsAddMemberOpen,i=(0,l.wh)().currentCommunityMember,o=(0,c.vb)(i);return t?(0,u.H3)(t)||(0,u.Ds)(t)?(0,y.jsx)(A,{space:t,setIsAddMemberOpen:n,onClickAddCoverImage:r,isAdmin:o}):(0,u.Ug)(t)?(0,y.jsx)(j,{space:t,setIsAddMemberOpen:n,isAdmin:o}):(0,u.V5)(t)?(0,y.jsx)(P,{space:t,setIsAddMemberOpen:n,onClickAddCoverImage:r,isAdmin:o}):(0,u.qy)(t)?(0,y.jsx)(C,{space:t,setIsAddMemberOpen:n,isAdmin:o}):(0,u.EG)(t)?(0,y.jsx)(w,{space:t,isAdmin:o,setIsAddMemberOpen:n}):null:null},D=function(e){var t=e.space,r=e.setIsAddMemberOpen,l=e.onClickAddCoverImage,c=(0,o.dd)();return!(0,a.kK)()&&c.visible&&c.hide(),(0,y.jsxs)(s.u_,{isOpen:c.visible,onClose:c.visible?c.hide:i.noop,children:[(0,y.jsx)(s.u_.Overlay,{}),(0,y.jsxs)(s.u_.Content,{size:"lg",children:[(0,y.jsxs)(s.u_.Header,{className:"!px-5 !py-4",children:[(0,y.jsx)(s.u_.Title,{size:"sm",children:(0,n.t)("space_settings")}),(0,y.jsx)(s.u_.HeaderActions,{children:(0,y.jsx)(s.u_.CloseButton,{onClick:c.visible?c.hide:i.noop})})]}),(0,y.jsx)(s.u_.Body,{className:"!px-0 !py-1",children:(0,y.jsx)(E,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:l})})]})]})},T=o.gk.create((function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage;return(0,y.jsx)(D,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:n})})),L=function(){return(0,o.dd)(T)}},10099:(e,t,r)=>{"use strict";r.d(t,{$:()=>g});var n=r(94184),i=r.n(n),o=r(86013),a=r(24185),s=r(39068),l=r(62969),c=r(71094),u=r(98338),d=r(26334),p=r(36589),f=r(94281),m=r(27025),b=r(90647),h=r(4404),v=r(66191),y=r(85893),g=function(e){var t=e.space,r=(0,a.k6)(),n=(0,u.wh)().currentCommunityMember,g=(0,l.g)({spaces:t.slug}),_=g.members,x=g.isLoading,j=g.canSeeMembersDirectory,w=(0,c.u)().show,O=(0,p.I)().isV3Enabled,S=(0,v.m)(t),P=(0,d.I)({spaceId:t.id,enabled:!S}),k=P.count,C=P.isLoading;return S?null:C||x?(0,y.jsx)(h.gi,{variant:"members-avatar-row"}):(0,y.jsx)(f.T,{content:(0,o.t)("see_all_members"),disabled:!j,children:(0,y.jsxs)("button",{type:"button",disabled:!j,onClick:function(){if((0,s.vb)(n))return w({spaceId:t.id,initialSection:(0,o.t)("customize_space.members")});j&&r.push("/members?filter[spaces]=".concat(t.slug))},className:i()({"focus-visible:outline-secondary rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2":O}),children:[(0,y.jsx)("div",{className:"md:hidden",children:(0,y.jsx)(m.Lt.Header,{children:(0,o.t)("members")})}),(0,y.jsx)(b.n,{members:_,amountToShow:3,totalCount:k})]})})}},66191:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(98338),i=r(62969),o=function(e){var t=(0,i.g)({spaces:e.slug}).canSeeMembersAvatarRow,r=(0,n.T4)({spaceId:e.id}),o=r.data;return r.isLoading||Boolean(null===o||void 0===o?void 0:o.hide_members_count)||!t}},970:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(10099),i=r(85893),o=function(e){var t=e.space;return(0,i.jsx)(n.$,{space:t})}},81735:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(86901),i=r(90789),o=r(98338),a=function(e){var t=e.space,r=(0,o.wh)(),a=r.currentCommunitySettings,s=r.currentCommunity,l=(a||{}).chat_notification_preferences_enabled,c=s.ios_app_enabled||s.has_branded_app,u=!(0,i.Ug)(t)||l&&c,d=(0,n.N)({space:t});return{updateSpaceMemberNotificationPreferences:d.updateSpaceMemberNotificationPreferences,updateChatSpaceMemberNotificationPreferences:d.updateChatSpaceMemberNotificationPreferences,notificationState:d.notificationState,shouldShowNotificationsSection:!(0,i.qy)(t)&&(0,i.J$)(t)&&u}}},64510:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(10099),i=r(85893),o=function(e){var t=e.space;return(0,i.jsx)(n.$,{space:t})}},67158:(e,t,r)=>{"use strict";r.d(t,{X:()=>w,p:()=>O});var n=r(27025),i=r(40160),o=r(24185),a=r(78270),s=r(46128),l=r(92561),c=r(67294),u=r(86013),d=r(91966),p=r.n(d),f=r(50732),m=r(70254),b=["sort"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var _=["latest","new_activity","oldest","popular","likes","alphabetical"],x=function(e){var t=e.defaultSort,r=void 0===t?"latest":t,n=e.include,i=void 0===n?_:n,o=e.exclude,a=void 0===o?[]:o,s=_.includes(r)?r:i[0],l=(0,m.t)(),d=l.sort,h=void 0===d?s:d,y=g(l,b);return{sort:h,sortingOptions:(0,c.useMemo)((function(){var e=p()(i,a);return r=r||e[0],e.map((function(e){return{value:e,label:(0,u.t)("sorting_options.".concat(e)),pathTo:"?".concat((0,f.UK)(v(v({},y),{},{sort:e})))}}))}),[r,i,a,y,h])}},j=r(85893),w=function(e){var t=e.defaultSort,r=e.include,i=e.exclude,o=e.shouldOpenToLeft,a=void 0!==o&&o,s=e.onChange,l=e.button,c=x({defaultSort:t,exclude:i,include:r}),u=c.sort,d=c.sortingOptions,p=u?String(u):void 0;return(0,j.jsx)(n.Lt,{direction:a?"bottom-start":"bottom-end",options:d,activeOptionValue:p,onChange:s,button:l})},O=function(e){var t=e.defaultSort,r=e.include,n=e.exclude,c=x({defaultSort:t,include:r,exclude:n}).sortingOptions,u=(0,a.v)().isMobileWebNewSpaceCustomizationUIEnabled,d=(0,l.X)(),p=(0,o.TH)(),f=new URLSearchParams(p.search).get("sort")||t;return u?(0,j.jsx)("div",{children:c.map((function(e){var t=e.value,r=e.label,n=e.pathTo;return(0,j.jsx)(i.OL,{className:"text-light block px-5 py-2 text-sm font-medium",to:n,onClick:d.hide,isActive:function(){return f===t},activeClassName:"!text-dark",children:r},t)}))}):(0,j.jsx)(j.Fragment,{children:c.map((function(e){var t=e.value,r=e.label,n=e.pathTo;return(0,j.jsx)(s.F,{forceClose:!0,to:n,children:r},t)}))})}},84432:(e,t,r)=>{"use strict";r.d(t,{y:()=>o});var n=r(8246),i=r(85893),o=function(e){var t=e.children,r=e.truncate,o=void 0!==r&&r;return(0,i.jsx)(n.Z.TitleSm,{as:"h1","data-testid":"space-title-name",weight:"semibold",truncate:o,children:t})}},62052:(e,t,r)=>{"use strict";r.d(t,{M:()=>v});var n=r(94184),i=r.n(n),o=r(38503),a=r(98338),s=r(39068),l=r(36589),c=r(9951),u=r(18605),d=r(75149),p=r(85893),f=function(e){var t=e.space,r=e.className,n=(0,o.TC)().currentAppearance,f=(0,a.wh)().currentCommunityMember,m=(0,s.vb)(f),b=(0,d.$)({shouldShowLockIconForNonMembers:t.show_lock_icon_for_non_members&&!t.is_space_member,isPrivate:t.is_private,isAdmin:m}),h=(0,l.I)().isV3Enabled;return(0,p.jsx)(c.S,{className:i()("title-emoji",r,{"!w-6":!h,"w-5":h}),emoji:t.emoji,appearance:n,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url,shouldUseLockIcon:b,lockIcon:(0,p.jsx)(u.JO,{type:"lock",className:"text-dark"}),dataTestId:"title-emoji"})},m=r(8246),b=r(26334),h=r(84432),v=function(e){var t=e.space,r=e.shouldShowMembersCount,n=void 0!==r&&r,o=(0,b.I)({spaceId:t.id,enabled:n}),a=o.count,s=o.isLoading,c=(0,l.I)().isV3Enabled;return(0,p.jsxs)("div",{className:i()("flex items-center truncate",{"gap-4":!c,"gap-2":c}),children:[(0,p.jsx)(f,{className:i()({"text-2xl":!c,"justify-center text-sm":c}),space:t}),(0,p.jsxs)("div",{className:"flex truncate",children:[(0,p.jsx)(h.y,{truncate:!0,children:t.name}),n&&(0,p.jsx)("div",{className:"ml-1",children:(0,p.jsx)(m.Z.BodyLg,{weight:"semibold",tracking:"tracking-normal",children:!s&&"(".concat(a,")")})})]})]})}},75667:(e,t,r)=>{"use strict";r.d(t,{B:()=>m});var n=r(86013),i=r(96486),o=r(98338),a=r(90789),s=r(36589),l=r(78270),c=r(18605),u=r(27025),d=r(8246),p=r(81383),f=r(85893),m=function(e){var t=e.space,r=e.onInviteMember,m=(0,o.wh)().isViewOnlyMasquerading,b=(0,l.v)().isMobileWebNewSpaceCustomizationUIEnabled,h=(0,s.I)().iconSize,v=(0,a.H)(t)?(0,n.t)("customize_space.add_waitlist"):(0,n.t)("space_header.invite_member"),y=(0,p.o)().inviteMemberIcon;return b?(0,f.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:r,children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[(0,f.jsx)(c.JO,{type:y,size:h,className:"text-default"}),(0,f.jsx)(d.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("space_header.invite_member")})]}),(0,f.jsx)(c.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}):(0,f.jsx)(u.Lt.IconWithBadgeList,{options:[{value:(0,n.t)("space_header.invite_member"),label:v,onClick:m?i.noop:r,icon:y,iconSize:h}]})}},44769:(e,t,r)=>{"use strict";r.d(t,{B:()=>P});var n=r(86013),i=r(31385),o=r(16047),a=r(17551),s=r(98338),l=function(){var e=(0,a.U)();return{space:(0,s.nT)().helpers.findBy({slug:e})}},c=r(11049),u=r(85893),d=function(){var e=l().space,t=(0,c.dd)();return(0,u.jsx)(s.mE,{spaceId:null===e||void 0===e?void 0:e.id,children:(0,u.jsx)(o.k,{show:t.visible,space:e,onClose:t.hide})})},p=c.gk.create((function(){return(0,u.jsx)(d,{})})),f=function(){return(0,c.dd)(p)},m=r(90789),b=r(36589),h=r(78270),v=r(18605),y=r(27025),g=r(8246),_=r(81735),x=r(81383),j=function(){var e=(0,i.Y)(),t=l().space,r=(0,b.I)().isV3Enabled,o=(0,x.o)().deleteSpaceIcon;return(0,u.jsx)(y.Lt.ItemWithLink,{onClick:function(){return e.show({space:t,onSuccess:function(){window.location.href="/"}})},children:(0,u.jsx)(y.Lt.IconContainer,{children:r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"h-5 w-5",children:(0,u.jsx)(v.JO,{type:o,className:"text-v2-danger",size:20})}),(0,u.jsx)(g.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.JO,{type:o,className:"text-v2-danger",size:16}),(0,u.jsx)(g.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]})})},(0,n.t)("space_header.delete_space"))},w=r(75667),O=r(96486),S=function(){var e=f(),t=(0,s.wh)().isViewOnlyMasquerading,r=(0,b.I)().isV3Enabled,i=(0,x.o)().leaveSpaceIcon;return(0,u.jsx)(y.Lt.ItemWithLink,{onClick:t?O.noop:e.show,children:(0,u.jsx)(y.Lt.IconContainer,{children:r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"h-5 w-5",children:(0,u.jsx)(v.JO,{type:i,className:"text-v2-danger",size:20})}),(0,u.jsx)(g.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.JO,{type:i,className:"text-v2-danger",size:16}),(0,u.jsx)(g.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]})})},(0,n.t)("space_header.leave_space"))},P=function(e){var t=e.space,r=e.isAdmin,o=e.onInviteMember,a=(0,h.v)().isMobileWebNewSpaceCustomizationUIEnabled,s=(0,m.J$)(t),l=(0,m.D)(t),c=(0,i.Y)(),d=f(),p=(0,b.I)(),O=p.isV3Enabled,P=p.iconSize,k=(0,x.o)(),C=k.leaveSpaceIcon,N=k.deleteSpaceIcon,I=(0,m.EG)(t),A=O&&(0,m.P8)(t)&&!!o,E=s&&!l,D=(0,_.c)({space:t}).shouldShowNotificationsSection,T=O&&(r||A||D&&!I);return a?(0,u.jsxs)(u.Fragment,{children:[s&&!l&&(0,u.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return d.show()},children:[(0,u.jsx)(v.JO,{type:C,className:"text-v2-danger",size:P}),(0,u.jsx)(g.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]}),r&&(0,u.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return c.show({space:t,onSuccess:function(){window.location.href="/"}})},children:[(0,u.jsx)(v.JO,{type:N,className:"text-v2-danger",size:P}),(0,u.jsx)(g.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]})]}):(0,u.jsxs)(u.Fragment,{children:[!O&&r&&(0,u.jsx)(y.Lt.Separator,{}),T&&(0,u.jsx)(y.Lt.Separator,{}),A&&(0,u.jsx)(w.B,{space:t,onInviteMember:o}),E&&(0,u.jsx)(S,{}),r&&(0,u.jsx)(j,{})]})}},1395:(e,t,r)=>{"use strict";r.d(t,{j:()=>Z});var n=r(86013),i=r(71094),o=r(11049),a=r(67294),s=r(25362),l=r(28338),c=r(29614),u=r(81786),d=r(82177),p=r(52749),f=r(85893),m=function(e){var t=e.isSubmitting,r=void 0!==t&&t,i=e.onClickCancel,o=void 0===i?function(){}:i;return(0,f.jsxs)(d.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,f.jsx)(u.z,{type:"button",variant:"secondary",large:!0,onClick:o,children:(0,n.t)("back")}),(0,f.jsx)(p._,{type:"submit",form:"bookmark-form",variant:"circle",large:!0,submitting:r,children:(0,n.t)("save")})]})};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=[{label:(0,n.t)("add_a_link"),value:"link",icon:"16-link",iconSize:16},{label:(0,n.t)("add_a_folder"),value:"folder",icon:"16-folder",iconSize:16}],y=function(e){var t=e.space,r=(0,s.dd)(),i=b((0,a.useState)("link"),2),o=i[0],p=i[1],h=b((0,a.useState)(!1),2),y=h[0],g=h[1];return(0,a.useEffect)((function(){r.visible||(p("link"),g(!1))}),[r.visible]),(0,f.jsxs)(d.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,f.jsx)(d.u_.Overlay,{}),(0,f.jsxs)(d.u_.Content,{children:[(0,f.jsxs)(d.u_.Header,{children:[(0,f.jsx)(d.u_.Title,{size:"md",children:(0,n.t)("add_space_links")}),(0,f.jsx)(d.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,f.jsx)(d.u_.CloseButton,{onClick:r.hide})})]}),(0,f.jsx)(d.u_.Body,{children:y?(0,f.jsx)(l.X,{space:t,isEdit:!1,isFolder:"folder"===o,renderFooter:function(e){var t=e.isSubmitting;return(0,f.jsx)(m,{isSubmitting:t,onClickCancel:function(){return g(!1)}})},onAfterCreateOrUpdate:r.hide},o):(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)(c.S,{name:"spaceLinkType",defaultChecked:o,options:v,size:"sm",onChange:function(e){p(e)},hasRadioCheckmarks:!0}),(0,f.jsxs)(d.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,f.jsx)(u.z,{type:"button",variant:"secondary",large:!0,onClick:r.hide,children:(0,n.t)("cancel")}),(0,f.jsx)(u.z,{type:"button",variant:"circle",large:!0,onClick:function(){return g(!0)},children:(0,n.t)("next")})]})]})})]})]})},g=o.gk.create((function(e){var t=e.space;return(0,f.jsx)(y,{space:t})})),_=r(98338),x=r(36589),j=r(78270),w=r(18605),O=r(27025),S=r(8246),P=r(11407),k=r(23560),C=r.n(k),N=r(90789),I=r(54030),A=r(26334),E=r(62618),D=r(81383),T=(0,n.t)("customize_space.customize"),L=(0,n.t)("customize_space.options"),M=(0,n.t)("customize_space.paywalls.title"),R=(0,n.t)("customize_space.members"),B=(0,n.t)("customize_space.lessons"),U=(0,n.t)("customize_space.lock_screen"),F=(0,n.t)("customize_space.set_welcome_banner"),z=(0,n.t)("customize_space.workflows"),V=(0,n.t)("add_space_links"),q=function(e){var t=e.space,r=e.onInviteMemberClick,i=e.onAddCoverClick,o=e.openCustomizeModal,a=e.openAddSpaceLinksModal,s=(0,_.wh)().currentCommunitySettings||{},l=s.space_description_enabled,c=s.upgrade_flows_for_workflows_spaces_enabled,u=(0,N.EG)(t),d=C()(i),p=C()(r),f=u,m=(0,N.V5)(t),b=(0,I.a7)(),h=function(e){var t=e.space,r=null!==t&&void 0!==t?t:{},i=r.cover_image_url,o=r.cover_image_visible;return i||o?(0,n.t)("update_cover"):(0,n.t)("add_cover")}({space:t}),v=function(e){var t=e.space,r=(0,A.I)({spaceId:null===t||void 0===t?void 0:t.id}),n=r.count;return{customizeMembersBadge:""+(r.isLoading?"":(0,E.HA)(n))}}({space:t}),y=v.customizeMembersBadge,g=(0,x.I)(),j=g.isV3Enabled,w=g.iconSize,O=(0,D.o)(),S=O.coverImageIcon,P=O.customizeLessonsIcon,k=O.welcomeBannerIcon,q=O.customizeIcon,Z=O.creditCardIcon,G=O.customizeLockScreenIcon,W=O.customizeMembersIcon,H=O.inviteMemberIcon,Q=O.customizeOptionsIcon,J=O.addSpaceLinksIcon,K=[];if(d&&K.push({value:(0,n.t)("add_cover_image"),label:h,onClick:i,icon:S,iconSize:w}),!j||(0,N.Ds)(t)||(0,N.qy)(t)||K.push({value:V,label:V,onClick:function(){return a()},icon:J,iconSize:w}),f&&K.push({value:B,label:B,onClick:function(){return o({initialSection:B})},icon:P,iconSize:w}),l&&m&&K.push({value:T,label:F,onClick:function(){return o({initialSection:T,scrollToId:"space-welcome-banner"})},icon:k,iconSize:w}),K.push({value:T,label:T,onClick:function(){return o({initialSection:T})},icon:q,iconSize:w},{value:M,label:M,onClick:function(){return o({initialSection:M})},icon:Z,iconSize:w},{value:U,label:U,onClick:function(){return o({initialSection:U})},icon:G,iconSize:w},{value:R,label:R,badge:y,onClick:function(){return o({initialSection:R})},icon:W,iconSize:w}),p&&(!j||!b)){var $=(0,N.H)(t)?(0,n.t)("customize_space.add_waitlist"):(0,n.t)("space_header.invite_member");K.push({value:(0,n.t)("space_header.invite_member"),label:$,onClick:r,icon:H,iconSize:w})}return K.push({value:L,label:L,onClick:function(){return o({initialSection:L})},icon:Q,iconSize:w}),c&&K.push({value:z,label:z,onClick:function(){return o({initialSection:z})},icon:"lightning"}),K},Z=function(e){var t=e.space,r=e.onInviteMember,a=e.onAddCoverImage,s=t.id,l=(0,i.u)().show,c=(0,_.L2)().refetch,u=(0,j.v)().isMobileWebNewSpaceCustomizationUIEnabled,d=(0,x.I)(),p=d.isV3Enabled,m=d.iconSize,b=(0,o.dd)(g),h=function(e){var t=e.initialSection,r=e.scrollToId;l({spaceId:s,refetch:function(){c()},initialSection:t,scrollToId:r})},v=[{value:(0,n.t)("customize_space.access"),label:(0,n.t)("customize_space.access"),icon:p?"20-locker-open-v3":"16-lock-unlocked",iconSize:m,badge:p&&"open"===t.visibility?(0,n.t)("spaces.form.create.visibility_types.public"):(0,n.t)("spaces.form.create.visibility_types.".concat(t.visibility)),badgeVariant:"plain",onClick:function(){return h({initialSection:(0,n.t)("customize_space.customize")})}}],y=q({space:t,onInviteMemberClick:r,onAddCoverClick:a,openCustomizeModal:h,openAddSpaceLinksModal:function(){b.show({space:t})}});return u?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return h({initialSection:(0,n.t)("customize_space.customize")})},children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[(0,f.jsx)(w.JO,{type:"16-lock-unlocked",size:16,className:"text-default"}),(0,f.jsx)(S.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("customize_space.access")})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(S.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,n.t)("spaces.form.create.visibility_types.".concat(t.visibility))}),(0,f.jsx)(w.JO,{type:"16-chevron-right",size:16,className:"text-default"})]})]}),(0,f.jsx)(P.Z,{}),y.map((function(e){return(0,f.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:e.onClick,children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[e.icon&&(0,f.jsx)(w.JO,{type:e.icon,size:m,className:"text-default"}),(0,f.jsx)(S.Z.LabelSm,{color:"text-light",weight:"medium",children:e.label})]}),(0,f.jsx)(w.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.value)}))]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(O.Lt.IconWithBadgeList,{options:v}),(0,f.jsx)(O.Lt.Separator,{}),(0,f.jsx)(O.Lt.Header,{children:(0,n.t)("space")}),(0,f.jsx)(O.Lt.IconWithBadgeList,{options:y})]})}},84146:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(86013),i=r(67158),o=r(27025),a=r(85893),s=function(e){var t=e.space;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Lt.Header,{children:(0,n.t)("space_header.sort_order")}),(0,a.jsx)(i.p,{defaultSort:t.default_member_sort||"latest",showDescription:!1,include:["latest","oldest","alphabetical"]})]})}},18757:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(86013),i=r(67158),o=r(27025),a=r(85893),s=function(e){var t=e.space;return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Lt.Header,{children:(0,n.t)("space_header.sort_order")}),(0,a.jsx)(i.p,{defaultSort:(null===t||void 0===t?void 0:t.default_sort)||"latest",showDescription:!1})]})}},81383:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});var n=r(67294),i=r(36589),o={coverImageIcon:"16-file-image",customizeLessonsIcon:"16-document-text",welcomeBannerIcon:"16-welcome-banner",customizeIcon:"16-customize",creditCardIcon:"credit-card",customizeLockScreenIcon:"16-lock",customizeMembersIcon:"members-v2",inviteMemberIcon:"16-invite-member",customizeOptionsIcon:"16-info",leaveSpaceIcon:"16-exit",deleteSpaceIcon:"16-trash-bin"},a={coverImageIcon:"20-image-v3",customizeLessonsIcon:"20-doc-v3",welcomeBannerIcon:"20-welcome-banner-v3",customizeIcon:"20-customize-v3",creditCardIcon:"20-card-v3",customizeLockScreenIcon:"20-locker-closed-v3",customizeMembersIcon:"20-users-v3",inviteMemberIcon:"20-user-plus-v3",customizeOptionsIcon:"20-info-v3",leaveSpaceIcon:"20-sign-out-v3",deleteSpaceIcon:"20-bin-v3",addSpaceLinksIcon:"20-book-v3"},s=function(){var e=(0,i.I)().isV3Enabled;return(0,n.useMemo)((function(){return e?a:o}),[e])}},86901:(e,t,r)=>{"use strict";r.d(t,{N:()=>v});var n=r(67294),i=r(88767),o=r(81089),a=r(50732),s=r(64687),l=r.n(s);function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var u="space-members",d=function(){var e,t,r=(0,i.useQueryClient)();return(0,i.useMutation)((function(e){var t=e.spaceMember,r=e.updates;return(0,o.aU)(a.av.spaceMembers.update({spaceId:t.space_id,memberId:t.community_member_id}),{space_member:r})}),{onMutate:(e=l().mark((function e(t){var n,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spaceMember,i=[u,n.community_member_id],e.next=4,r.cancelQueries(i);case 4:return o=r.getQueryData(i),r.setQueryData(i,n),e.abrupt("return",{previousData:o,spaceMember:n});case 7:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return t.apply(this,arguments)}),onSuccess:function(e){r.setQueryData([u,e.community_member_id],e)}})},p=r(98338);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b="never",h="all",v=function(e){var t=e.space,r=d().mutate,s=f((0,n.useState)(null),2),l=s[0],c=s[1],m=(0,p.wh)().currentCommunityMember,v=function(e){var t=e.spaceId,r=e.memberId;return(0,i.useQuery)([u,r],(function(){return(0,o.UT)(a.av.spaceMembers.show({spaceId:t,memberId:r}))}))}({spaceId:t.id,memberId:null===m||void 0===m?void 0:m.id}),y=v.data,g=v.isLoading,_=(0,n.useCallback)((function(e){return e===h}),[]);(0,n.useEffect)((function(){y&&c({notification_type:_(null===y||void 0===y?void 0:y.notification_type),in_app_notification_setting:_(null===y||void 0===y?void 0:y.in_app_notification_setting),mobile_notification_setting:_(null===y||void 0===y?void 0:y.mobile_notification_setting),all:null===y||void 0===y?void 0:y.all_notifications_enabled,mentions:null===y||void 0===y?void 0:y.mention_notifications_enabled,never:null===y||void 0===y?void 0:y.notifications_off})}),[y,g,_]);var x=(0,n.useCallback)((function(e){var t,n,i,o=e.fieldKey,a=e.shouldEnable;return r({spaceMember:y,updates:(t={},n=o,i=a?h:b,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t)})}),[y,g]),j=(0,n.useCallback)((function(e){var t=e.fieldKey;return r({spaceMember:y,updates:w(t)})}),[y,r]),w=function(e){return"all"==e?{mobile_notification_setting:h,mention_mobile_notification_setting:h,mention_in_app_notification_setting:h}:"mentions"==e?{mobile_notification_setting:b,mention_mobile_notification_setting:h,mention_in_app_notification_setting:h}:"never"==e?{mobile_notification_setting:b,mention_mobile_notification_setting:b,mention_in_app_notification_setting:b}:void 0};return{updateSpaceMemberNotificationPreferences:x,updateChatSpaceMemberNotificationPreferences:j,isNotificationTypeEnabled:_,notificationState:l,isLoading:g}}},16047:(e,t,r)=>{"use strict";r.d(t,{k:()=>g});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(81089),l=r(50732),c=r(43990),u=r(10161),d=r(98338),p=r(90789),f=r(35007),m=r(28849),b=r(69647),h=r(85893);function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var y="spaces.leave",g=function(e){var t=e.show,r=e.onClose,n=e.space,g=(0,f.C)().goToCommunityRootPath,_=(0,d.wh)().currentCommunityMember,x=(0,d.e2)().actions.refresh,j=(0,d.nT)().actions.refresh,w=(0,d.T4)({spaceId:null===n||void 0===n?void 0:n.id}),O=w.space,S=void 0===O?{}:O,P=w.refetch,k=(0,b.p)(),C=k.error,N=k.success,I=(0,c.m)(S.chat_room_uuid).refetchChatRoom,A=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(),j(),(0,p.$n)(n)||P(),(0,p.Ug)(n)&&I();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),E=(0,a.useMutation)((function(){return(0,s.pC)(l.av.spaceMembers.leaveSpace({spaceId:null===n||void 0===n?void 0:n.id,memberId:null===_||void 0===_?void 0:_.id}))}),{onSuccess:function(){N((0,o.t)("leave_space_success",{name:n.name}),{duration:"short",shouldUseProgress:!1}),A(),r(),(0,p.$n)(n)&&g()},onError:function(){C((0,o.t)("leave_space_error"))}}),D=E.mutate,T=E.isLoading;return(0,h.jsxs)(m.V,{title:(0,o.t)([y,"title"]),confirmUserPrompt:(0,o.t)([y,"confirm_prompt"]),isOpen:t,onClose:r,onCancel:r,onConfirm:D,confirmVariant:"danger",isDisabled:T,confirmText:T?(0,o.t)("leaving"):(0,o.t)("confirm"),children:[(0,h.jsx)(u.w,{content:(0,o.t)([y,"description"],{space_name:(null===n||void 0===n?void 0:n.name)||""})})," ",!(0,p.Y_)(n)&&((0,p.$n)(n)||(0,p.WB)(n))&&(0,o.t)([y,"private_space"])]})}},61263:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var n=r(86013),i=r(8246),o=r(18605),a=r(85893),s=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z.TitleSm,{weight:"semibold",children:(0,n.t)("please_check_your_email")}),(0,a.jsx)(i.Z.BodyMd,{children:(0,n.t)("please_check_your_email_description")})]})},l=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(i.Z.TitleSm,{weight:"semibold",children:(0,n.t)("this_space_is_private")})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.Z.BodyMd,{children:(0,n.t)("this_space_is_private_description")})})]})},c=function(e){var t=e.isInvited;return(0,a.jsxs)("div",{className:"border-primary bg-primary h-full rounded-none border-0 px-10 py-20 text-center sm:h-auto sm:rounded-lg sm:border","data-testid":"locked-space",children:[(0,a.jsx)(o.JO,{type:"lock",className:"mb-5 !w-14"}),t?(0,a.jsx)(s,{}):(0,a.jsx)(l,{})]})}},52175:(e,t,r)=>{"use strict";r.d(t,{J:()=>V});var n=r(98338),i=r(64687),o=r.n(i),a=r(67294),s=r(47031),l=r(3951),c=r(67687),u=r(69647),d=r(86013),p=r(87536),f=r(7409),m=r(35466),b=r(35192),h=r(54030),v=r(55355),y=r(85893),g=function(){var e=(0,n.e2)().records,t=(0,h.Be)(),r=[{label:(0,d.t)("spaces.form.create.space_type_basic_post_label"),name:"basic",description:(0,d.t)("spaces.form.create.space_type_basic_post_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},multi:!1},{label:(0,d.t)("spaces.form.create.space_type_event_post_label"),name:"event",description:(0,d.t)("spaces.form.create.space_type_event_post_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},multi:!1}],i=[{label:(0,d.t)("spaces.form.create.visibility_open_label"),name:"open",description:(0,d.t)("spaces.form.create.visibility_open_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},alertTitle:(0,d.t)("spaces.form.create.visibility_open_alert_title"),multi:!1},{label:(0,d.t)("spaces.form.create.visibility_private_label"),name:"private",description:(0,d.t)("spaces.form.create.visibility_private_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},alertTitle:(0,d.t)("spaces.form.create.visibility_private_alert_title"),multi:!1},{label:(0,d.t)("spaces.form.create.visibility_secret_label"),name:"secret",description:(0,d.t)("spaces.form.create.visibility_secret_description"),icon:{default:"space-members-only",selected:"space-members-only-active",viewBox:"0 0 80 80"},multi:!1}];return(0,y.jsxs)("div",{className:"new-space-form__step new-space-form__basic-info",children:[(0,y.jsxs)("div",{className:"new-space-form__space-group",children:[(0,y.jsxs)("h2",{className:"heading-h2",children:[1===e.length&&(0,d.t)("spaces.form.create.space_type_step_title_no_spaces"),e.length>1&&(0,d.t)("spaces.form.create.space_type_step_title")]}),e.length>1&&(0,y.jsx)(b.V,{variant:"large",name:"space_group_id",spaceGroups:e})]}),(0,y.jsxs)("div",{className:"new-space-form__name",children:[(0,y.jsx)(c.l.Item,{name:"emoji",hideBorder:!0,hideDescription:!0,label:(0,d.t)("spaces.form.create.icon"),children:(0,y.jsx)(c.l.EmojiPicker,{name:"emoji",placement:"bottom-start",emojiSize:23,defaultEmoji:"hash_prefix"})}),(0,y.jsx)(c.l.Item,{name:"name",hideBorder:!0,hideDescription:!0,translationRoot:"spaces.form",rules:{required:"Name is required!",maxLength:255},placeholder:(0,d.t)("spaces.form.create.name_your_space"),fullWidth:!0,children:(0,y.jsx)(c.l.Input,{label:(0,d.t)("spaces.form.create.space_name"),className:"form-control form-control--lg",autoFocus:!0})})]}),(0,y.jsxs)("div",{className:"new-space-form__type",children:[(0,y.jsx)("h3",{className:"heading-h3",children:(0,d.t)("spaces.form.create.space_type_label")}),(0,y.jsx)(v.X,{id:"post_type",name:"post_type",variant:"box",direction:t?"horizontal":"vertical",list:r})]}),(0,y.jsxs)("div",{className:"new-space-form__visibility",children:[(0,y.jsx)("label",{children:(0,d.t)("spaces.form.create.visibility_step_title")}),(0,y.jsx)(v.X,{id:"visibility",name:"visibility",variant:"box",direction:t?"horizontal":"vertical",list:i})]})]})},_=r(94347),x=r(23127),j=function(){var e=(0,_.k)(),t="spaces.form.create";return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h2",{className:"heading-h2",children:I18n.t("".concat(t,".private_space_lock_screen_step_title"))}),(0,y.jsxs)("div",{className:"new-space-form__locked-screen",children:[(0,y.jsx)(c.l.Item,{name:"locked_page_heading",rules:{},hideBorder:!0,hideDescription:!0,translationRoot:t,fullWidth:!0,children:(0,y.jsx)(c.l.Input,{autoFocus:!0})}),(0,y.jsxs)("div",{className:"form-group form-group--column no-border trix-v2",children:[(0,y.jsx)("label",{children:I18n.t("spaces.form.create.locked_page_description")}),(0,y.jsx)(x.O,{ref:e,id:"locked_page_description",name:"locked_page_description",placeholder:I18n.t("".concat(t,".locked_page_content_placeholder")),preventAccidentalLeave:!1,tabIndex:0,className:"w-full"})]}),(0,y.jsx)(c.l.Item,{name:"locked_button_label",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,y.jsx)(c.l.Input,{})}),(0,y.jsx)(c.l.Item,{name:"locked_button_url",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,y.jsx)(c.l.Input,{})})]})]})},w=function(){var e=(0,h.a7)(),t=[{label:(0,d.t)("spaces.notification_email_label"),description:(0,d.t)("spaces.notification_email_description"),name:"default_notification_setting",icon:{default:"notifications-email",selected:"notifications-email-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.notification_in_app_label"),description:(0,d.t)("spaces.notification_in_app_description"),name:"default_in_app_notification_setting",icon:{default:"notifications-app",selected:"notifications-app-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.notification_mobile_label"),description:(0,d.t)("spaces.notification_mobile_description"),name:"default_mobile_notification_setting",icon:{default:"notifications-mobile",selected:"notifications-mobile-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.no_notification_label"),description:(0,d.t)("spaces.no_notification_description"),name:"none",icon:{default:"notifications-none",selected:"notifications-none-active",viewBox:"0 0 88 88"},multi:!1}];return(0,y.jsxs)("div",{className:"new-space-form__notification",children:[(0,y.jsx)("h2",{className:"heading-h2 heading-max-width",children:I18n.t("spaces.form.create.notification_step_title")}),(0,y.jsx)("div",{className:"new-space-form__notification-options",children:(0,y.jsx)(v.X,{id:"notification_preferences",name:"notification_preferences",variant:"box",direction:e?"horizontal":"vertical",list:t,multi:!0})})]})},O=function(e){var t=e.currentSpaceGroupId,r=e.isPrivateSpaceWithLockedScreen,n=(0,p.Gc)().watch,i=(0,a.useContext)(f.l).steps,o=n("name"),s=n("visibility"),l=n("notification_preferences");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.h,{sequence:i.basicInformation.sequence,title:i.basicInformation.title,status:i.basicInformation.status,displayNext:!0,isNextStepDisabled:!o||!s,children:(0,y.jsx)(g,{spaceGroupId:t})}),(0,y.jsx)(m.h,{sequence:i.notificationPreferences.sequence,title:i.notificationPreferences.title,status:i.notificationPreferences.status,displaySubmit:!0,isNextStepDisabled:!l,children:(0,y.jsx)(w,{})}),(0,y.jsx)(m.h,{sequence:i.lockScreen.sequence,title:i.lockScreen.title,status:i.lockScreen.status,displayNext:!0,displaySkip:!0,children:(0,y.jsx)(j,{isPrivateSpaceWithLockedScreen:r})})]})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.currentSpaceGroupId,r=e.onModalClose,n=(0,p.Gc)(),i=n.watch,s=n.trigger,l=i("visibility"),c={basicInformation:{sequence:1,title:(0,d.t)("name_and_type"),status:"active"},lockScreen:{sequence:2,title:(0,d.t)("lock_screen"),status:"upcoming"},notificationPreferences:{sequence:3,title:(0,d.t)("notification"),status:"upcoming"}},u=N((0,a.useState)(c),2),m=u[0],b=u[1],h=function(){return null===l||void 0===l?void 0:l.includes("private")},v=function(){var e,t=(e=o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===m.basicInformation.sequence?3:e.t0===m.lockScreen.sequence?8:13;break;case 3:return e.next=5,s("name");case 5:return e.sent&&(r=P(P({},m),{},{basicInformation:P(P({},m.basicInformation),{},{status:"completed"})}),r=!0===h()?P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"active"})}):P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"inactive"}),notificationPreferences:P(P({},m.notificationPreferences),{},{status:"active"})}),b(r)),e.abrupt("break",13);case 8:return e.next=10,s("locked_page_heading");case 10:return e.sent&&(n=P(P({},m),{},{lockScreen:P(P({},m.lockScreen),{},{status:"completed"}),notificationPreferences:P(P({},m.notificationPreferences),{},{status:"active"})}),b(n)),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){C(o,n,i,a,s,"next",e)}function s(e){C(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return m?(0,y.jsx)(f.O,{steps:m,onNextClick:v,onPreviousClick:function(e){switch(e){case m.lockScreen.sequence:var t=P(P({},m),{},{lockScreen:P(P({},m.lockScreen),{},{status:"upcoming"}),basicInformation:P(P({},m.basicInformation),{},{status:"active"})});b(t);break;case m.notificationPreferences.sequence:var r=P(P({},m),{},{notificationPreferences:P(P({},m.notificationPreferences),{},{status:"upcoming"})});r=!0===h()?P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"active"})}):P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"upcoming"}),basicInformation:P(P({},m.basicInformation),{},{status:"active"})}),b(r)}},onClose:r,stepPanelContainer:(0,y.jsx)(O,{currentSpaceGroupId:t,isPrivateSpaceWithLockedScreen:h})}):null},E=r(81786),D=r(47839),T=function(e){var t=e.show,r=e.onModalClose,n=e.spaceRootUrl;return(0,y.jsxs)(D.u,{show:t,onClose:r,showIcon:!1,children:[(0,y.jsx)("p",{className:"text-sm text-gray-500",children:I18n.t("spaces.form.create.success_message")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/invite")},variant:"secondary",children:I18n.t("spaces.invite_members")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/new")},variant:"secondary",children:I18n.t("spaces.create_post")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/settings")},variant:"secondary",children:I18n.t("spaces.customize")})]})};function L(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t=e.space_group_id,r=e.onModalClose,i=(0,l.m)().createSpace,d=(0,n.c6)(),p=(0,n.e2)(),f=d.helpers.isDataLoaded()&&p.helpers.isDataLoaded(),m=M((0,a.useState)(!1),1)[0],b=M((0,a.useState)(""),1)[0],h=(0,u.p)(),v=function(e){var t={};return Object.entries(e).forEach((function(e){var r=M(e,2),n=r[0],i=r[1];["visibility","post_type"].includes(n)?t[n]=i[0]:"notification_preferences"===n?["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].forEach((function(e){i.includes("none")?t[e]="never":t[e]=i.includes(e)?"all":"never"})):t[n]=i})),t},g=function(){var e,t=(e=o().mark((function e(t){var r,n,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(v(t));case 3:(r=e.sent)&&r.root_url&&(window.location=r.root_url),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),n=e.t0.firstErrorDetail,a=e.t0.errorDetails,s=n||a,h.error(s);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,y.jsx)(s.u.Root,{show:f,as:a.Fragment,children:(0,y.jsxs)("div",{className:"new-space-form",children:[(0,y.jsx)(c.l,{onSubmit:g,defaultValues:{space_group_id:t,emoji:"#"},children:(0,y.jsx)(A,{currentSpaceGroupId:t,onModalClose:function(){r.redirect_to?window.location=r.redirect_to:r()}})}),(0,y.jsx)(T,{show:m,onModalClose:function(){window.location="/"},spaceRootUrl:b})]})})};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function(e){return(0,y.jsx)(n.Br,{children:(0,y.jsx)(n.CM,{children:(0,y.jsx)(B,F({},e))})})}},79808:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(35192),i=r(98338),o=r(94347),a=r(67687),s=r(82177),l=r(85893);const c=function(){var e=(0,o.k)(),t=(0,i.e2)().records,r=(0,s.UV)().contentPortalElement;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:"Name is required!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,l.jsx)(a.l.Input,{ref:e,prefix:(0,l.jsx)(a.l.EmojiPickerV3Wrapper,{})})}),(0,l.jsx)(a.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:"Please choose a space group!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,l.jsx)(n.V,{variant:"form-input",spaceGroups:t,name:"space_group_id",appendTo:r})})]})}},92768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(86013),i=r.n(n),o=r(87536),a=r(67687),s=r(85893);function l(){return"event"!==(0,(0,o.Gc)().watch)("post_type")?null:(0,s.jsx)(a.l.Item,{name:"event_auto_rsvp_enabled",label:i().t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,s.jsx)(a.l.ToggleSwitch,{variant:"small"})})}},97292:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(86013),i=r(87536),o=r(83333),a=r(98338),s=r(67687),l=r(85893),c=function(){var e=(0,i.qo)({name:"post_type"}),t=(0,a.wh)(),r=t.currentCommunitySettings,c=t.currentCommunity,u=Boolean(null===r||void 0===r?void 0:r.chat_notification_preferences_enabled),d=Boolean((null===c||void 0===c?void 0:c.ios_app_enabled)||(null===c||void 0===c?void 0:c.has_branded_app));if("chat"==e&&(!u||!d)||"course"==e||"members"==e)return null;var p=[{label:(0,n.t)("spaces.form.create.notification_types.email"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".email_description")),value:"default_notification_setting"},{label:(0,n.t)("spaces.form.create.notification_types.inapp"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".inapp_description")),value:"default_in_app_notification_setting"},{label:(0,n.t)("spaces.form.create.notification_types.mobile"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".mobile_description")),value:"default_mobile_notification_setting"}],f="chat"==e?(0,n.t)("spaces.form.create.notification_types.chat_label"):(0,n.t)("spaces.form.create.notification_types.label");return(0,l.jsx)(s.l.Item,{name:"notification_type",label:f,hideDescription:!0,hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:"chat"==e?(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(s.l.RadioGroup,{variant:"radio",name:"notification_type",verticalSpacing:"normal",options:o.M})}):(0,l.jsx)(s.l.CheckboxGroup,{name:"notification_type",options:p})})}},8927:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(86013),i=r(67687),o=r(85893);function a(e){var t=e.disabled,r=void 0!==t&&t,a=e.isCoursesEnabled,s=void 0!==a&&a,l=e.hideLabel,c=void 0!==l&&l,u=[{label:(0,n.t)("spaces.form.create.space_types.post_label"),icon:{type:"post-2",viewBox:"0 0 20 20"},value:"basic"},{label:(0,n.t)("spaces.form.create.space_types.event_label"),icon:{type:"event",viewBox:"0 0 20 20"},value:"event"},{label:(0,n.t)("spaces.form.create.space_types.chat_label"),icon:{type:"chat-2",viewBox:"0 0 20 20"},value:"chat"}];return s&&u.push({label:(0,n.t)("spaces.form.create.space_types.course_label"),icon:{type:"book",viewBox:"0 0 20 20"},value:"course"}),u.push({label:(0,n.t)("spaces.form.create.space_types.members_label"),icon:{type:"20-space-picker-members",viewBox:"0 0 20 20"},value:"members"}),u.push({label:(0,n.t)("spaces.form.create.space_types.image_label"),icon:{type:"20-images",viewBox:"0 0 20 20"},value:"image"}),(0,o.jsx)(i.l.Item,{name:"post_type",hideLabel:c,label:(0,n.t)("spaces.form.create.space_types.label"),hideDescription:!0,rules:{required:"Please choose an access type!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,o.jsx)(i.l.RadioGroup,{className:"create-space__form__grid-type",disabled:r,variant:"box",fullWidth:!1,name:"space_type",options:u})})}},42207:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(86013),i=r.n(n),o=r(87536),a=r(90789),s=r(67687),l=r(85893);const c=function(){var e=[{label:i().t("spaces.form.create.visibility_types.open"),value:"open",info:i().t("spaces.form.create.visibility_types.open_info")},{label:i().t("spaces.form.create.visibility_types.private"),value:"private",info:i().t("spaces.form.create.visibility_types.private_info"),infoSubText:i().t("spaces.form.create.visibility_types.private_info_subtext")},{label:i().t("spaces.form.create.visibility_types.secret"),value:"secret",info:i().t("spaces.form.create.visibility_types.secret_info"),infoSubText:i().t("spaces.form.create.visibility_types.secret_info_subtext")}],t=(0,o.qo)({name:"post_type"}),r=(0,o.qo)({name:"visibility"}),n=(0,o.Gc)().setValue;return(0,a.EG)({post_type:t})?("draft"!=r&&n("visibility","draft"),(0,l.jsx)(s.l.Item,{hideBorder:!0,name:"visibility",label:i().t("courses.access"),description:i().t("courses.access_description")})):(0,l.jsx)(s.l.Item,{name:"visibility",hideDescription:!0,label:i().t("spaces.form.create.visibility_types.label"),rules:{required:"Please choose a visibility!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,l.jsx)(s.l.RadioGroup,{fullWidth:!1,variant:"box",name:"visibility",options:e})})}},88320:(e,t,r)=>{"use strict";r.d(t,{e:()=>q,F:()=>Z});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(96486),l=r(24185),c=r(27117),u=r(19647),d=r(20758),p=r(98338),f=r(50732),m=r(3951),b=r(43227),h=r(77162),v=r(31293),y=r(67687),g=r(38013),_=r(69647),x=r(87536),j=r(94281),w=r(90789),O=r(85893),S=function(e){var t=e.spaceGroupMemberCount,r=e.chatSpaceMemberLimit,n=(0,p.e2)().helpers.findBy,i=(0,x.Gc)(),s=i.watch,l=i.setValue,c=s("space_group_id"),u=s("post_type"),d=n({id:c});(0,o.useEffect)((function(){d&&l("add_members_from_space_group",d.automatically_add_members_to_new_spaces)}),[c]);var f=(0,w.Ug)({post_type:u})&&t>r;return(0,O.jsx)(j.T,{content:(0,a.t)("members_in_space_group_limit_reached"),disabled:!f,children:(0,O.jsx)(y.l.Item,{name:"add_members_from_space_group",label:I18n.t("spaces.form.add_members_from_space_this_group"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,isDisabled:f,children:(0,O.jsx)(y.l.ToggleSwitch,{variant:"small",disabled:f})})})},P=r(79808),k=r(81786),C=r(6298),N=function(e){var t=e.isLoading,r=void 0!==t&&t;return(0,O.jsx)(C.d.Footer,{sticky:!0,children:(0,O.jsx)(k.z,{type:"submit",variant:"circle",full:!0,disabled:r,form:q,children:r?(0,a.t)("creating"):(0,a.t)("create_space")})})},I=r(18605),A=function(e){var t=e.onClose;return(0,O.jsx)(C.d.Header,{addHeaderPadding:!0,title:(0,a.t)("spaces.form.create.title"),fixed:!0,Actions:(0,O.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,O.jsx)(I.JO,{type:"close"}),(0,O.jsx)("span",{className:"sr-only",children:(0,a.t)("drawer.close_panel")})]})})},E=r(92768),D=r(97292),T=r(8927),L=r(42207);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){U(o,n,i,a,s,"next",e)}function s(e){U(o,n,i,a,s,"throw",e)}a(void 0)}))}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q="create-space-form",Z=function(e){var t=e.onClose,r=e.currentSpaceGroupId,n=e.post_type,x=void 0===n?"basic":n,j=e.courseSetting,w=void 0===j?{course_type:c.t}:j,k=e.renderHeader,C=void 0===k?A:k,I=e.renderFooter,M=void 0===I?N:I,B=e.hideSpaceTypePicker,U=void 0!==B&&B,V=e.setExternalLoadingState,Z=void 0===V?s.noop:V,G=(0,l.k6)(),W=(0,p.nT)().actions.refresh,H=z((0,o.useState)(!1),2),Q=H[0],J=H[1],K=(0,m.m)(),$=K.createSpace,X=K.maxSpaceLimit,Y=(0,p.wh)(),ee=Y.currentCommunity,te=Y.currentCommunitySettings,re=Y.currentCommunityMember,ne=!(null===re||void 0===re||!re.is_admin),ie=(0,_.p)(),oe=(0,h.w)(),ae=!(null===te||void 0===te||!te.courses_enabled)&&(null===ee||void 0===ee?void 0:ee.courses_feature_flag_enabled),se=(0,p.e2)().helpers,le=se.isDataLoading,ce=se.findBy,ue=ee.current_plan_tier,de=ce({id:r}),pe={space_group_id:r,post_type:ne?x:"basic",visibility:"open",course_setting:w,emoji:"#",custom_emoji:g.j,notification_type:["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"],is_post_disabled:!0,add_members_from_space_group:null===de||void 0===de?void 0:de.automatically_add_members_to_new_spaces,default_comment_sort:"latest",default_member_sort:"latest",default_sort:"latest",hide_right_sidebar:"basic"===x};if("chat"==x&&(pe.notification_type="never"),le())return(0,O.jsx)(b.m,{});var fe=!(0,d.kw)(ue)&&!(0,d.gR)(ue)&&Boolean(null===re||void 0===re?void 0:re.is_admin)&&Boolean(null===te||void 0===te?void 0:te.upgrade_flows_for_space_creation_enabled),me=function(){var e=F(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fe){e.next=3;break}return e.next=3,X(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=F(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),G.push(f.lA.content.spaces),e.next=4,oe.hide();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=F(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!1),Z(!1),e.next=4,oe.show({planTier:(0,d.FZ)(ue)||void 0,onSuccess:be,subheading:t.body.message,successButtonLabel:(0,a.t)("pricing_plans.upgrade_modal.actions.go_to_spaces"),source:v.f.SPACE_LIMIT_UPGRADE_MODAL,showPlanDetails:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){return R(R(R(R({},(0,s.omit)(e,"notification_type","course_setting")),function(e){return{default_notification_setting:e.includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:e.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:e.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:e.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:e.includes("default_mention_in_app_notification_setting")?"all":"never"}}("chat"===e.post_type?"all"==(t=e.notification_type)?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:"mentions"==t?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:e.notification_type)),"course"===e.post_type?{course_setting:e.course_setting}:{}),{},{is_post_disabled:"event"===e.post_type&&e.is_post_disabled});var t},ye=function(){var e=F(i().mark((function e(r){var n,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),Z(!0),e.prev=2,e.next=5,me(r.space_group_id);case 5:return n=ve(r),e.next=8,$(n);case 8:return o=e.sent,e.next=11,W();case 11:t(),G.push((0,f._v)({spaceSlug:o.slug})),e.next=27;break;case 15:if(e.prev=15,e.t0=e.catch(2),(0,u.d)(e.t0),console.error(e.t0),a=e.t0.firstErrorDetail,s=e.t0.errorDetails,l=a||s,i=e.t0,c=void 0,d=void 0,!(null===(c=i.body)||void 0===c||null===(d=c.error_details)||void 0===d?void 0:d.max_space_limit)||!fe){e.next=26;break}return e.next=24,he(e.t0);case 24:e.next=27;break;case 26:ie.error(l);case 27:return e.prev=27,Z(!1),e.finish(27);case 30:case"end":return e.stop()}var i,c,d}),e,null,[[2,15,27,30]])})));return function(t){return e.apply(this,arguments)}}();return(0,O.jsxs)(y.l,{id:q,onSubmit:ye,defaultValues:pe,className:"create-space__form",children:[C({onClose:t}),(0,O.jsxs)("div",{children:[(0,O.jsx)(P.Z,{}),(0,O.jsx)(S,{spaceGroupMemberCount:(null===de||void 0===de?void 0:de.space_group_members_count)||0,chatSpaceMemberLimit:(null===ee||void 0===ee?void 0:ee.chat_space_members_limit)||0}),ne&&!U&&(0,O.jsx)(T.m,{isCoursesEnabled:ae}),(0,O.jsx)(L.Z,{}),(0,O.jsx)(D.V,{}),(0,O.jsx)(E.Z,{})]}),M({isLoading:Q})]})}},39723:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var n=r(98338),i=r(88320),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return(0,o.jsx)(n.Br,{children:(0,o.jsx)(n.CM,{children:(0,o.jsx)(i.F,s({},e))})})}},69472:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.className;return(0,o.jsx)("div",{className:i()("react-page-space-show h-full w-full",r),children:t})}},72268:(e,t,r)=>{"use strict";r.d(t,{K:()=>yt});var n=r(64687),i=r.n(n),o=r(67294),a=r(62748),s=r(31979),l=r(98338),c=r(81089),u=r(82486),d=r(90789),p=r(66965),f=r(87160),m=r(36589),b=r(54030),h=r(94184),v=r.n(h),y=r(86013),g=r.n(y),_=r(10140),x=r(18605),j=function(e){return e.type.toLowerCase().includes("touch")},w=r(96486),O=r(77803),S=r(39068),P=r(11049),k=r(88767),C=r(87561),N=r(82177),I=r(50732),A=r(81786),E=r(67687),D=r(85893);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=C.Ry().shape({name:C.Z_().required(g().t("link_name_required")),url:C.Vo((function(e){return e.startsWith("mailto:")?C.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,g().t("link_url_invalid")).required(g().t("link_url_required")):C.Z_().url(g().t("link_url_invalid")).required(g().t("link_url_required"))}))}),B=function(e){var t=e.isEdit,r=e.link,n=(0,l.wh)().refetch,i=z(),o=function(){n(),i.hide()},a=(0,k.useMutation)((function(e){return(0,c.Cu)(I.av.communities.communityLinks.create(),e)}),{onSuccess:o}),s=a.mutate,u=a.isLoading,d=(0,k.useMutation)((function(e){return(0,c.aU)(I.av.communities.communityLinks.update({communityLinkId:r.id}),e)}),{onSuccess:o}),p=d.mutate,f=d.isLoading;return(0,D.jsxs)(E.l,{onSubmit:function(e){t?p(e):s(e)},validationSchema:R,defaultValues:t?L({},r):{name:"",url:""},children:[(0,D.jsxs)(N.u_.Body,{children:[(0,D.jsx)(E.l.Item,{name:"name",variant:"extra-bottom-margin",label:g().t("link_name"),description:g().t("link_name_description"),hideBorder:!0,children:(0,D.jsx)(E.l.Input,{})}),(0,D.jsx)(E.l.Item,{variant:"extra-bottom-margin",name:"url",label:g().t("link_url"),description:g().t("link_url_description"),hideBorder:!0,children:(0,D.jsx)(E.l.Input,{})})]}),(0,D.jsx)(N.u_.Footer,{children:t?(0,D.jsx)(A.z,{full:!0,disabled:f,type:"submit",variant:"primary",children:f?g().t("link_updating"):g().t("link_update")}):(0,D.jsx)(A.z,{full:!0,disabled:u,type:"submit",variant:"primary",children:u?g().t("link_creating"):g().t("link_create")})})]})},U=function(e){var t=e.isEdit,r=void 0!==t&&t,n=e.link,i=(0,P.dd)();return(0,D.jsxs)(N.u_,{title:(0,y.t)("add_link"),isOpen:i.visible,onClose:i.hide,children:[(0,D.jsx)(N.u_.Overlay,{}),(0,D.jsxs)(N.u_.Content,{children:[(0,D.jsxs)(N.u_.Header,{children:[(0,D.jsx)(N.u_.Title,{className:"text-center",size:"md",children:(0,y.t)("add_link")}),(0,D.jsx)(N.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,D.jsx)(N.u_.CloseButton,{onClick:i.hide})})]}),(0,D.jsx)(B,{isEdit:r,link:n})]})]})},F=P.gk.create((function(e){var t=e.isEdit,r=e.link;return(0,D.jsx)(U,{isEdit:t,link:r})})),z=function(){return(0,P.dd)(F)},V=r(43535),q=function(){var e=z(),t=(0,m.I)().isV3Enabled;return(0,D.jsx)(V.T,{children:(0,D.jsxs)("button",{type:"button",className:v()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover flex w-full items-center px-2",{"rounded-md py-1.5 text-sm":!t,"text-xs-plus h-8.5 rounded-lg px-4 font-medium transition-colors duration-200":t}),onClick:function(){return e.show()},children:[(0,D.jsx)(x.JO,{type:"16-add-new",size:16}),(0,D.jsx)("span",{className:"ml-2",children:(0,y.t)("add_link")})]})})},Z=r(27025),G=r(1881),W=r(44032),H=function(e){var t=e.isOpen,r=e.onClose,n=e.link,i=(0,l.wh)().refetch,o=(0,k.useMutation)((function(e){return(0,c.pC)(I.av.communities.communityLinks.delete({communityLinkId:n.id}),e)}),{onSuccess:function(){i(),r()}}),a=o.mutate,s=o.isLoading;return(0,D.jsx)(W.c,{isOpen:t,title:(0,y.t)("delete_link"),onClose:r,onCancel:r,onConfirm:a,cancelText:(0,y.t)("cancel"),confirmText:s?(0,y.t)("deleting"):(0,y.t)("delete"),disabled:s,confirmVariant:"danger",children:(0,y.t)("delete_link_confirmation",{name:n.name})})};function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=(0,O.W8)((function(e){var t=e.link,r=e.isAdmin,n=Q((0,G.k)(!1),2),i=n[0],o=n[1],a=Q((0,G.k)(!1),2),s=a[0],l=a[1],c=(0,b.en)(),u=z(),d=(0,m.I)().isV3Enabled;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",draggable:"false",title:t.name,className:v()("text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar active:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover group flex w-full items-center gap-2 px-2",{"my-px rounded-md py-1.5 text-sm font-normal":!d,"text-xs-plus h-8.5 !m-0 rounded-lg px-4 font-medium transition-colors duration-200":d}),children:[(0,D.jsx)("span",{className:v()({"flex !h-5 !w-5 items-center justify-center":d}),children:(0,D.jsx)(x.JO,{type:"16-external-link",className:v()({"!h-4 !w-4":d}),size:16})}),(0,D.jsx)("h4",{className:v()("truncate text-current",{"w-full max-w-full text-sm font-normal":!d,"text-xs-plus flex-1 font-medium":d}),children:t.name}),(0,D.jsx)("button",{type:"button",className:v()("flex gap-0.5",{"hidden group-hover:flex":c&&s}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":(0,y.t)("community_sidebar.view_sidebar_link_options"),children:r&&(0,D.jsxs)(Z.Lt,{buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 transition-colors",button:(0,D.jsx)(x.JO,{type:"16-menu-dots-horizontal",size:16}),onToggle:l,appendTo:document.body,children:[(0,D.jsx)(Z.Lt.ItemWithLink,{onClick:function(){u.show({isEdit:!0,link:t})},children:(0,y.t)("edit")}),(0,D.jsx)(Z.Lt.ItemWithLink,{onClick:o,children:(0,y.t)("delete")})]})})]},t.url),(0,D.jsx)(H,{link:t,isOpen:i,onClose:o})]})})),$=(0,O.JN)((function(e){var t=e.links,r=(0,l.wh)().currentCommunityMember,n=(0,S.vb)(r),i=(0,m.I)().isV3Enabled,o=(0,b.a7)(),a=!n||!o;return(0,D.jsxs)("div",{className:v()({"space-y-px":!i,"flex flex-col gap-y-1":i}),children:[t.map((function(e,t){return(0,D.jsx)(K,{index:t,disabled:a,isAdmin:n,link:e},(0,w.uniqueId)(String(t)))})),n&&(0,D.jsx)(q,{})]})}));function X(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(){var e=function(){var e=(0,l.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,n=Y((0,G.k)(!0),2),i=n[0],a=n[1],s=Y((0,o.useState)(t.links),2),u=s[0],d=s[1],p=(0,S.vb)(r),f=(0,k.useMutation)((function(e){var t=e.links_order_array;return(0,c.aU)(I.av.communities.communityLinks.reorder(),{links_order_array:t})})).mutate;return(0,o.useEffect)((function(){var e=t.links,r=u;e.length===r.length?(e.some((function(e){return e.name!==r.find((function(t){return t.id===e.id})).name}))||e.some((function(e){return e.url!==r.find((function(t){return t.id===e.id})).url})))&&d(t.links):d(t.links)}),[t.links,u]),{canSeeLinks:p||t.links.length>0,shouldShowLinks:i,toggleLinks:a,orderedList:u,onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex,n=X((0,O.Rp)(u,t,r)),i=n.map((function(e){return e.id.toString()}));d(n),f({links_order_array:i})}}}(),t=e.canSeeLinks,r=e.shouldShowLinks,n=e.toggleLinks,i=e.orderedList,a=e.onSortEnd,s=(0,b.en)(),u=(0,m.I)().isV3Enabled,d=(0,_.a)();return t?(0,D.jsxs)("div",{id:"links-section",className:v()("mb-8 px-3",{"mt-4":!u,"!mb-16":d,"mt-6 flex flex-col gap-1 lg:px-6":u}),children:[(0,D.jsxs)("button",{type:"button",className:v()("text-c-sidebar hover:bg-c-sidebar-hover focus-visible:bg-c-sidebar-hover group flex w-full items-center space-x-px py-1.5 text-sm font-semibold transition-colors",{"my-px rounded-md px-2":!u,"rounded-lg px-4 transition-colors duration-200":u}),onClick:n,children:[(0,D.jsx)("span",{children:(0,y.t)("links")}),(0,D.jsx)("div",{className:v()("flex rounded py-0.5 transition-transform",{"hidden group-hover:flex":s,"rotate-0":!r,"rotate-90":r}),"aria-label":r?(0,y.t)("community_sidebar.expand_group",{group_name:"links"}):(0,y.t)("community_sidebar.collapse_group",{group_name:"links"}),children:(0,D.jsx)(x.JO,{type:"cheveron-right",size:16})})]}),r&&(0,D.jsx)($,{links:i,distance:5,lockAxis:"y",onSortEnd:a,shouldCancelStart:function(e){return j(e)}})]}):null},ne=r(24185),ie=r(36845),oe=r(40433),ae=r(87439),se=["children"];function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var pe=function(e){var t=e.children,r=de(e,se);return(0,D.jsx)("button",ce(ce({type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex cursor-pointer items-center justify-start rounded-md px-2 py-1.5 text-sm"},r),{},{children:t}))};function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=function(e){return(0,D.jsxs)(pe,me(me({},e),{},{children:[(0,D.jsx)(x.JO,{size:16,type:"16-add-new"}),(0,D.jsx)("span",{"data-testid":"add-space",className:"mx-2",children:(0,y.t)("add_space")})]}))},ve=function(e){var t=e.spaceGroupId,r=(0,ie.G)();return(0,D.jsx)(he,{onClick:function(){r.show({spaceGroupId:t})}})};function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}var je=function(e){var t=xe({},e);return(0,D.jsxs)(pe,ge(ge({},t),{},{children:[(0,D.jsx)(x.JO,{size:16,type:"16-add-new"}),(0,D.jsx)("span",{className:"mx-2",children:(0,y.t)("join_a_space")})]}))},we=function(e){var t=e.spaceGroupSlug,r=(0,ne.k6)();return(0,D.jsx)(je,{onClick:function(){r.push("/s/".concat(t))}})},Oe=function(e){var t=e.spaceGroup;return(0,u.yG)({spaceGroup:t})?(0,D.jsx)(ve,{spaceGroupId:t.id}):t.hide_non_member_spaces_from_sidebar?(0,D.jsx)(we,{spaceGroupSlug:t.slug}):null},Se=r(14692),Pe=r(12568);const ke=(0,O.W8)((function(e){var t=e.space,r=(0,l.wh)().currentCommunityMember,n=(0,d.fO)()(t,r),i=(0,Se.h4)().spaces.find((function(e){return e.id===t.id}));return(0,D.jsx)(Pe.z,{space:t,buttonLink:n,spaceNotificationDetail:i})}));var Ce=r(24592),Ne=(0,O.JN)((function(e){var t=e.spaceGroup,r=e.listId,n=(0,l.wh)().currentCommunityMember,i=t.spaces,o=i.length>0,a=(0,b.a7)(),s=!(0,S.vb)(n)||!a;return(0,D.jsx)(Ce.I,{id:r,children:o?i.map((function(e,t){return(0,D.jsx)(ke,{index:t,space:e,disabled:s},e.id)})):(0,D.jsx)(Oe,{spaceGroup:t})})}));Ne.displayName="SpaceList";var Ie=r(44935);function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=(0,O.W8)((function(e){var t=e.spaceGroup,r=e.onSpaceSortEnd,n=e.position,i=e.spaceGroupDragProperties,o=(0,l.wh)(),a=o.currentCommunityMember,s=o.currentCommunitySettings,d=Ae((0,G.k)(t.collapsed),2),p=d[0],f=d[1],m=(0,oe.a)(),b=(0,ne.k6)(),h=(0,ie.G)(),v=(0,ae.I)().toggleSpaceGroupDrawer,y=(0,k.useMutation)((function(){return(0,c.Cu)(I.Ts.toggleVisibility({spaceGroupId:String(t.id)}))})).mutate,g=(0,S.vb)(a),_=(0,u.wh)({spaceGroup:t}),x=(null===s||void 0===s?void 0:s.new_space_group_creation_flow_enabled)?function(){return m.show({spaceGroup:t,tab:"Details"})}:function(){return b.push(I.Ts.edit({spaceGroupId:String(t.id)}))},w=t.slug,O="".concat(t.slug,"-list");return(0,D.jsx)(Ie.I,{id:w,listId:O,position:n,isCollapsed:!!Boolean(n===(null===i||void 0===i?void 0:i.index)&&(null===i||void 0===i?void 0:i.isDragging))||p,isDragging:null===i||void 0===i?void 0:i.isDragging,canManage:_,onCollapseToggle:function(){f(),y()},spaceGroup:t,onEditSpaceGroupClick:x,onCreateSpaceClick:function(){return h.show({spaceGroupId:t.id})},onCreateSpaceGroupClick:v,isAdmin:g,onAddMembersClick:function(){return m.show({spaceGroup:t,tab:"Members"})},children:(0,D.jsx)(Ne,{listId:O,distance:10,lockAxis:"y",shouldCancelStart:function(e){return j(e)},onSortEnd:function(e){var n=e.oldIndex,i=e.newIndex;return r({oldIndex:n,newIndex:i,spaceGroup:t})},spaceGroup:t})})})),Te=r(14318),Le=(0,O.JN)((function(e){var t=e.spaceGroupWithSpaces,r=e.onSpaceSortEnd,n=e.spaceGroupDragProperties,i=(0,l.wh)().currentCommunityMember,o=(0,S.vb)(i),a=(0,b.a7)(),s=!o||!a;return(0,D.jsx)(Te.E,{children:t.map((function(e,t){return(0,D.jsx)(De,{index:t,disabled:s,isAdmin:o,position:t,spaceGroup:e,spaceGroupDragProperties:n,onSpaceSortEnd:r},e.id)}))})})),Me=r(21579),Re=r(54940),Be=r(70815),Ue=r(75715),Fe=r(37447),ze=r(59887),Ve=r(78208),qe=r(78596),Ze=r(71434),Ge=r(6766),We=function(){var e,t,r=(0,ne.k6)(),n=(0,qe.d)(),i=n.links,o=n.adminVisiblePlatformLinks,a=n.memberVisiblePlatformLinks,s=(0,ae.I)(),l=s.shouldShowOnboarding,c=s.isOnboardingActive,u=s.hideOnboardingConfirmationModal,d=s.currentCommunity,p=s.currentCommunitySettings,f=s.currentCommunityMember,b=s.showSpotlightSearch,h=s.shouldShowAllEventsPage,v=(0,Ge.R)(),y=v.newNotificationCount,g=v.toggleNotificationDrawer,_=v.resetNewNotificationsCount,x=(0,ze.rZ)().unreadThreadsCount,j=(0,ze.K$)().unreadChatCount,w=(0,m.I)().isV3Enabled,O=(0,Ue.c8)().data,P=(0,S.vb)(f),k=(0,Ve.gq)().shouldShowMessagingRoutes,C=(null===f||void 0===f||null===(e=f.policies)||void 0===e?void 0:e.can_access_threads_tab)||x>0,N=P?o:a,I=function(e){return N.some((function(t){return t.kind===e}))},A=(0,S.VP)(f,p)&&I("members"),E=(null===d||void 0===d||null===(t=d.policies)||void 0===t?void 0:t.can_view_courses_directory)&&I("courses"),T=h&&I("events"),L=w&&(null===p||void 0===p?void 0:p.gamification_enabled)&&((null===O||void 0===O?void 0:O.enabled)||P)&&I("leaderboard");return(0,D.jsx)(Ze.x,{allDMsBadgeText:String(j),hasCurrentCommunityMember:!!f,isHomePageEnabled:null===d||void 0===d?void 0:d.home_page_enabled,isMessagingEnabled:k,isOnboardingActive:c,notificationBadgeText:String(y),onGettingStartedClick:function(){return r.push(Fe.Fy.onboarding())},onGettingStartedClose:u.show,onNotificationClick:function(){g(),_()},onSearchClick:b,shouldShowMemberDirectory:A,shouldShowOnboarding:l,shouldShowSpaceDirectory:null===p||void 0===p?void 0:p.space_directory_enabled,shouldShowCoursesDirectory:E,shouldShowChatThreadsTab:C,resetNewNotificationsCount:_,unreadThreadsCount:x,shouldShowAllEventsPage:T,shouldShowLeaderboard:L,links:i})},He=r(91776),Qe=r(57435),Je=function(e){var t=e.variant,r=void 0===t?"primary":t,n=e.small,i=void 0===n||n,o=(0,l.wh)(),a=o.currentCommunityMember,s=o.isLoading,c=(0,Qe.t)();return s||!(0,S.vb)(a)?null:(0,D.jsx)(A.z,{variant:r,onClick:function(){c.show()},small:i,children:(0,D.jsx)("span",{children:(0,y.t)("live_streams.now_live.go_live")})})},Ke=r(50117),$e=r(64660),Xe=function(e){var t=e.headline,r=void 0===t?"":t,n=e.name,i=void 0===n?"":n;return(0,D.jsxs)("div",{className:"flex max-w-[128px] flex-col text-left",children:[(0,D.jsx)("span",{className:"text-c-sidebar truncate text-sm font-medium",children:i}),(0,D.jsx)("span",{className:"text-c-sidebar truncate text-sm font-normal",children:r})]})},Ye=r(64422),et={strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,8]}}]},tt=function(e){var t=e.imageUrl,r=void 0===t?"":t,n=e.name,i=void 0===n?"":n,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=void 0===s?"":s,c=e.headline,u=void 0===c?"":c,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b,v=(0,ne.TH)(),g=(0,$e.r)().show,_=[];return _.push({value:(0,y.t)("view_profile"),label:(0,y.t)("view_profile"),onClick:function(){return g({memberPublicId:l})},icon:"16-account",dataTestId:"profile-link"},{value:(0,y.t)("edit_profile"),label:(0,y.t)("edit_profile"),onClick:function(){return(0,w.isFunction)(o)&&o()},icon:"16-edit",dataTestId:"edit-profile-link"},{value:(0,y.t)("notification"),label:(0,y.t)("notification"),pathTo:I.du.notifications(v),icon:"sidebar-bell",dataTestId:"notification-link"}),m&&_.push({value:(0,y.t)("authentication"),label:(0,y.t)("authentication"),pathTo:I.du.authentication(v),icon:"16-lock-unlocked",dataTestId:"authentication-link"}),p&&_.push({value:(0,y.t)("billing"),label:(0,y.t)("billing"),pathTo:I.du.billing(v),icon:"credit-card",dataTestId:"member-billing-link"}),h&&_.push({value:(0,y.t)("member_profile_modal.affiliate_dashboard.title"),label:(0,y.t)("member_profile_modal.affiliate_dashboard.title"),pathTo:I.du.affiliate(v),icon:"16-paywalls-affiliates",dataTestId:"member-affiliate-link"}),_.push({value:"separator"},{value:(0,y.t)("sign_out"),label:(0,y.t)("sign_out"),onClick:function(){return(0,w.isFunction)(a)&&a()},icon:"16-sign-out"}),(0,D.jsx)(Z.Lt,{size:"full",direction:"top-start",dataTestId:"user-profile-dropdown",className:"inline-flex",buttonWrapperClassName:"inline-flex",button:(0,D.jsxs)("div",{className:"flex items-center gap-[14px]","data-testid":"user-profile-button",children:[(0,D.jsx)(Ye.s,{name:i,src:r,size:"10"}),(0,D.jsx)(Xe,{headline:u,name:i})]}),popperOptions:et,children:(0,D.jsxs)("div",{"data-testid":"user-profile-menu",children:[(0,D.jsx)(Z.Lt.Header,{children:(0,y.t)("sidebar_account")}),(0,D.jsx)(Z.Lt.IconWithBadgeList,{options:_})]})})},rt=function(e){var t=e.headline,r=void 0===t?"":t,n=e.imageUrl,i=void 0===n?"":n,o=e.name,a=void 0===o?"":o,s=e.onEditProfileClick,l=e.onSignOutClick,c=e.publicUid,u=void 0===c?"":c,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b;return(0,D.jsx)(tt,{imageUrl:i,headline:r,name:a,onEditProfileClick:s,onSignOutClick:l,publicUid:u,showMemberBilling:p,canAccessAuthenticationPage:m,canShowPaywallsAffiliate:h})},nt=r(166),it=function(e){var t=e.children,r=e.className,n=(0,nt.RE)();return(0,D.jsx)("div",{className:v()("border-c-sidebar bg-c-sidebar bottom-0 w-[inherit] border-t px-4 py-3",r),"data-testid":"profile-section",style:n,children:(0,D.jsx)("div",{className:"flex items-center justify-between",children:t})})},ot=function(e){var t=e.headline,r=void 0===t?"":t,n=e.imageUrl,i=void 0===n?"":n,o=e.name,a=void 0===o?"":o,s=e.onEditProfileClick,l=e.onSignOutClick,c=e.publicUid,u=void 0===c?"":c,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b,v=e.children,y=e.className;return(0,D.jsxs)(it,{className:y,children:[(0,D.jsx)(rt,{headline:r,imageUrl:i,name:a,onEditProfileClick:s,onSignOutClick:l,publicUid:u,showMemberBilling:p,canAccessAuthenticationPage:m,canShowPaywallsAffiliate:h}),v]})},at=function(){var e=(0,ne.k6)(),t=(0,ne.TH)(),r=(0,l.wh)().currentCommunityMember,n=(null===r||void 0===r?void 0:r.policies)||{},i=(0,Ke.W)().room;if(!r)return null;return(0,D.jsx)(ot,{headline:r.headline,imageUrl:r.avatar_url,name:r.name,onEditProfileClick:function(){return e.push(I.du.profile(t))},onSignOutClick:function(){window.location.href=(0,I.jE)()},publicUid:null===r||void 0===r?void 0:r.public_uid,showMemberBilling:null===n||void 0===n?void 0:n.can_access_billing,canAccessAuthenticationPage:null===n||void 0===n?void 0:n.can_access_authentication_page,canShowPaywallsAffiliate:null===n||void 0===n?void 0:n.can_show_paywalls_affiliate,children:!i&&(0,D.jsx)("div",{className:"ml-5",children:(0,D.jsx)(Je,{})})})},st=r(83728),lt=r(54778),ct=r(23259),ut=function(e){var t=e.onSortEnd,r=e.spaceGroupWithSpaces,n=e.onSpaceSortEnd,i=e.updateBeforeSortStart,a=e.spaceGroupDragProperties,s=(0,l.wh)(),c=s.currentCommunity,u=s.currentCommunityMember,d=(0,b.j)(),f=(0,b.ac)("(max-width: 1023px)"),h=(0,m.I)().isV3Enabled,v=f||!f&&!h,y=d&&h,g=(0,p.L)().refetchSpaceNotifications;return(0,o.useEffect)((function(){u&&g()}),[u,g]),!u&&c.is_private?null:(0,D.jsxs)(ct.F,{children:[(!h||!d)&&(0,D.jsx)(Be.J,{}),(0,D.jsxs)(Re.S,{children:[v&&(0,D.jsx)(We,{}),y&&(0,D.jsx)(He.C,{}),(0,D.jsx)(Le,{distance:25,lockAxis:"y",onSortEnd:t,spaceGroupWithSpaces:r,onSpaceSortEnd:n,updateBeforeSortStart:i,spaceGroupDragProperties:a,shouldCancelStart:function(e){return j(e)},helperClass:"!pointer-events-auto"}),(0,D.jsx)(re,{})]}),(0,D.jsxs)(st.G,{children:[(0,D.jsx)(lt.g,{}),!d&&(0,D.jsx)(at,{}),(0,D.jsx)(Me.Q,{})]})]})};function dt(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function pt(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){dt(o,n,i,a,s,"next",e)}function s(e){dt(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yt=function(){var e=ht((0,o.useState)({index:null,isDragging:!1}),2),t=e[0],r=e[1],n=(0,l.e2)(),m=n.helpers.isDataLoading,b=n.records,h=n.actions.refresh,v=(0,l.nT)(),y=v.helpers,g=y.isDataLoading,_=y.spaceVisibleOnSidebar,x=v.actions.refresh,j=(0,l.wh)(),w=j.currentCommunityMember,O=j.isLoading,S=ht((0,o.useState)([]),2),P=S[0],k=S[1],C=_(),N=g()||m()||O,I=(0,p.L)().refetchSpaceNotifications;(0,o.useEffect)((function(){w&&I()}),[w,I]),(0,o.useEffect)((function(){if(!N){var e=b.map((function(e){var t=C.filter((function(t){return t.space_group_id===e.id&&(0,d.l7)({space:t,spaceGroup:e})}));return mt(mt({},e),{},{collapsed:(0,u.zb)({currentCommunityMember:w,spaceGroupId:e.id}),spaces:t})})).filter((function(e){return e.spaces.length>0||e.hide_non_member_spaces_from_sidebar||(0,u.yG)({spaceGroup:e})}));k(e)}}),[N,C,b,w]);var A=function(){var e=pt(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceGroupId,n=t.orderedSpaceIds,e.prev=1,e.next=4,(0,c.t5)("/space_groups/".concat(r,"/reorder_spaces"),{method:"POST",body:JSON.stringify({order_array:n})});case 4:x(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error while reordering space: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=pt(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.t5)("/space_groups/reorder",{method:"POST",body:JSON.stringify({order_array:t})});case 3:r({index:null,isDragging:!1}),h(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error while reordering space groups: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T=(0,s.D)();return N||T?(0,D.jsx)(f.H,{}):(0,D.jsx)(ut,{onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex,n=(0,a.q)(P,t,r);k(n),E(n.map((function(e){return e.id.toString()})))},spaceGroupWithSpaces:P,onSpaceSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=e.spaceGroup,o=P.map((function(e){if(e.id==i.id){var t=(0,a.q)(i.spaces,r,n);return mt(mt({},e),{},{spaces:t})}return e}));k(o);var s=null===(t=o.find((function(e){return e.id===i.id})))||void 0===t?void 0:t.spaces.map((function(e){return e.id}));A({spaceGroupId:i.id,orderedSpaceIds:s})},spaceGroupDragProperties:t,updateBeforeSortStart:function(e){r((function(t){return mt(mt({},t),{},{index:e.index,isDragging:!0})}))}})}},14318:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var n=r(94184),i=r.n(n),o=r(36589),a=r(85893),s=function(e){var t=e.children,r=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",{className:i()("bg-c-sidebar mt-4 flex flex-col px-3",{"space-y-4":!r,"gap-y-6 lg:mt-6 lg:px-6":r}),children:t})}},44935:(e,t,r)=>{"use strict";r.d(t,{I:()=>E});var n=r(67294),i=r(94184),o=r.n(i),a=r(82486),s=r(50732),l=r(54030),c=r(86013),u=r(43535),d=r(18605),p=r(27025),f=r(85893),m=function(e){var t=e.position,r=e.isAdmin,n=e.canCreateSpaces,i=e.onCreateSpace,o=e.onCreateSpaceGroup,a=e.onToggle;if(!r&&!n)return null;return(0,f.jsx)(u.T,{children:(0,f.jsxs)(p.Lt,{className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,c.t)("community_sidebar.add_space_or_space_group"),button:(0,f.jsx)(d.JO,{type:"16-add-new",size:16,"aria-hidden":"true",useWithFillCurrentColor:!0}),onToggle:a,appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-add-wrapper",children:[n&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:i,children:(0,c.t)("add_space")}),r&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:function(){o(t)},children:(0,c.t)("add_space_group")})]})})},b=function(e){var t=e.isActive,r=void 0!==t&&t,n=e.isCollapsed,i=void 0!==n&&n,a=(0,l.en)();return(0,f.jsx)("div",{className:o()("ml-1 mr-auto flex h-5 w-5 rounded py-0.5 transition-transform",{"hidden group-hover:flex":a,"hover:bg-c-sidebar-hover":!r,"rotate-0":i,"rotate-90":!i}),"aria-label":i?(0,c.t)("community_sidebar.expand_group",{group_name:"space"}):(0,c.t)("community_sidebar.collapse_group",{group_name:"space"}),children:(0,f.jsx)(d.JO,{type:"cheveron-right",size:16,"aria-hidden":!0})})};function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t,r=e.isDropdownOpen,n=e.canManage,i=e.children,a=(0,l.en)(),s=n?"max-w-[calc(100%-56px)]":"max-w-[calc(100%-32px)]",c=n?"group-hover:max-w-[calc(100%-56px)]":"group-hover:max-w-[calc(100%-32px)]";return(0,f.jsx)("div",{className:o()("flex w-full space-x-px",(t={},h(t,c,!r),h(t,s,r||!a),t)),children:i})},y=function(e){var t=e.isDropdownOpen,r=e.spaceGroup,n=e.isCollapsed,i=e.canManage;return(0,f.jsxs)(v,{isDropdownOpen:t,canManage:i,children:[(0,f.jsx)("h3",{className:"truncate text-sm font-semibold leading-5 text-current","data-id":r.id,"data-testid":"spaces-left-sidebar",title:r.name,children:r.name}),(0,f.jsx)(b,{isCollapsed:n})]})},g=r(96486),_=r(98338),x=["onAddMembersClick","onEditSpaceGroupClick","seeMembersLink","seeSpacesLink","onToggle","canManage"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t=e.onAddMembersClick,r=e.onEditSpaceGroupClick,n=e.seeMembersLink,i=e.seeSpacesLink,o=e.onToggle,a=e.canManage,s=void 0!==a&&a,l=S(e,x),u=(0,_.wh)().isViewOnlyMasquerading;return(0,f.jsxs)(p.Lt,w(w({className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,c.t)("space_groups.view_space_group_options"),button:(0,f.jsx)(d.JO,{type:"16-menu-dots-horizontal",size:16,useWithFillCurrentColor:!0}),onToggle:o,popperOptions:{modifiers:[{name:"offset",options:{offset:[4,0]}}]},appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-options-wrapper",buttonDataTestId:"spacegroup-options-button"},l),{},{children:[(0,f.jsx)(p.Lt.ItemWithLink,{to:i,role:"menuitem",children:(0,c.t)("space_groups.see_spaces")}),s&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Lt.ItemWithLink,{to:n,role:"menuitem",children:(0,c.t)("space_groups.see_members")}),!u&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:function(){return(0,g.isFunction)(t)&&t()},role:"menuitem",children:(0,c.t)("space_groups.add_members")}),!u&&(0,f.jsx)(p.Lt.ItemWithLink,{role:"menuitem",onClick:function(){return(0,g.isFunction)(r)&&r()},children:(0,c.t)("space_groups.edit_space_group")})]})]}))},k=r(39068),C=r(36589),N=function(e){var t=e.listId,r=void 0===t?"":t,n=e.isCollapsed,i=void 0!==n&&n,a=e.children,s=e.onCollapseToggle,l=e.isDragging,c=(0,_.wh)().currentCommunityMember,u=(0,C.I)().isV3Enabled;return(0,f.jsx)("button",{type:"button",className:o()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus-visible:text-c-sidebar focus-visible:bg-c-sidebar-hover focus-visible:outline-secondary mb-1 flex w-full select-none items-center justify-between text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"cursor-grab":!l&&(0,k.vb)(c),"cursor-grabbing":l,"rounded-md px-2 py-1.5":!u,"rounded-lg px-4 py-1.5 transition-colors duration-200":u}),"data-testid":"space-group",onClick:s,"aria-expanded":!i,"aria-controls":r,children:a})};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.canManage,r=void 0!==t&&t,i=e.children,c=e.id,u=e.isAdmin,d=void 0!==u&&u,p=e.isCollapsed,b=void 0!==p&&p,h=e.isDragging,v=void 0!==h&&h,g=e.listId,_=e.onAddMembersClick,x=void 0===_?function(){}:_,j=e.onCollapseToggle,w=void 0===j?function(){}:j,O=e.onCreateSpaceClick,S=void 0===O?function(){}:O,k=e.onCreateSpaceGroupClick,C=void 0===k?function(){}:k,A=e.onEditSpaceGroupClick,E=void 0===A?function(){}:A,D=e.position,T=e.shouldDisplayOptions,L=void 0===T||T,M=e.spaceGroup,R=(0,l.en)(),B=I((0,n.useState)(!1),2),U=B[0],F=B[1];return(0,f.jsxs)("div",{draggable:"false",id:c,className:"group relative",children:[(0,f.jsx)(N,{onCollapseToggle:w,isDragging:v,isCollapsed:b,listId:g,children:(0,f.jsx)(y,{isDropdownOpen:U,canManage:r,spaceGroup:M,isCollapsed:b})}),L&&(0,f.jsxs)("div",{className:o()("text-c-sidebar absolute right-[1rem] top-[0.375rem] ml-1 flex gap-1",{"invisible group-focus-within:visible group-hover:visible":R&&!U}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"data-testid":"space-group-actions",children:[(0,f.jsx)(P,{onAddMembersClick:x,onEditSpaceGroupClick:E,seeMembersLink:s.Ts.members({spaceGroupSlug:M.slug}),seeSpacesLink:s.Ts.show({spaceGroupSlug:M.slug}),onToggle:F,canManage:r}),((0,a.yG)({spaceGroup:M})||d)&&(0,f.jsx)(m,{position:D,isAdmin:d,onCreateSpace:S,onCreateSpaceGroup:C,canCreateSpaces:(0,a.yG)({spaceGroup:M}),onToggle:F})]}),!b&&i]})}},24592:(e,t,r)=>{"use strict";r.d(t,{I:()=>p});var n=r(94184),i=r.n(n),o=r(36589),a=r(85893),s=["children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=d(e,s),n=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",c(c({className:i()("flex flex-col",{"gap-y-1":n})},r),{},{children:t}))}},12568:(e,t,r)=>{"use strict";r.d(t,{z:()=>g});var n=r(94184),i=r.n(n),o=r(24185),a=r(40160),s=r(38503),l=r(63569),c=r(75149),u=r(18605),d=r(98338),p=r(95287),f=r(39068),m=r(36589),b=r(66965),h=r(9951),v=r(2631),y=r(85893),g=function(e){var t,r=e.space,n=e.buttonLink,g=void 0===n?"/":n,_=e.spaceNotificationDetail,x=void 0===_?{unread_content_count:0,unread_notifications_count:0}:_,j=(0,v.i)(),w=j.getActiveInactiveClasses,O=j.getUnreadClasses,S=(0,d.wh)().currentCommunityMember,P=(0,f.vb)(S),k=(0,s.TC)().currentAppearance,C=(0,m.I)().isV3Enabled,N=(0,o.TH)().state,I=(null!==N&&void 0!==N?N:{}).prevLocation,A=Boolean(I)&&!(null!==I&&void 0!==I&&null!==(t=I.pathname)&&void 0!==t&&t.startsWith("/c")),E=null!==x&&void 0!==x?x:{},D=E.unread_content_count,T=E.unread_notifications_count,L=void 0===T?0:T,M=D>0,R=L>0,B=(0,c.$)({shouldShowLockIconForNonMembers:r.show_lock_icon_for_non_members&&!r.is_space_member,isPrivate:r.is_private,isAdmin:P}),U=(0,b.d)([r.id]).resetUnreadCount;return(0,y.jsx)("div",{draggable:"false",children:(0,y.jsxs)(a.OL,{className:function(e){return i()("focus-visible:outline-secondary group flex items-center gap-2 py-1.5 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",w(e,A),O(M),{"my-px px-2":!C,"h-8.5 !rounded-lg px-4 transition-colors duration-75":C})},draggable:"false","data-id":r.id,to:g||{},onClick:function(e){(0,p.n2)(e)&&U()},children:[(0,y.jsx)("span",{className:"flex",children:(0,y.jsx)(h.S,{className:"flex !h-5 !max-h-5 !w-5 max-w-none items-center leading-none",emojiClassName:C?"text-sm justify-center":"text-lg",emoji:r.emoji,appearance:k,customEmojiUrl:r.custom_emoji_url,customEmojiDarkUrl:r.custom_emoji_dark_url,shouldUseLockIcon:B,lockIcon:(0,y.jsx)(u.JO,{size:16,type:"lock-v2"})})}),(0,y.jsx)("span",{className:"truncate",children:(0,y.jsx)("h4",{className:i()("truncate",{"text-sm":!C,"text-xs-plus":C,"font-normal":!M&&!C,"font-medium":!M&&C,"font-semibold":M}),"data-testid":"space-name",children:r.name})}),(M||R)&&(0,y.jsx)(l.l,{isGray:!R,children:L>0?L:D>99?"99+":D})]})})}},2631:(e,t,r)=>{"use strict";r.d(t,{i:()=>c});var n=r(54876),i=r(38503),o="bg-transparent text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar cursor-pointer hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover rounded-md",a="bg-brand rounded-md text-brand-button focus:text-brand-button hover:text-brand-button cursor-default",s="bg-c-active-item-color rounded-md text-c-active-item-text-color focus:text-c-active-item-text-color hover:text-c-active-item-text-color cursor-default",l="rounded-md font-semibold",c=function(){var e=(0,n.q1)(),t=(0,i.TC)().currentTheme,r=e&&"custom"===t;return{getActiveInactiveClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&t||e&&!t?r?s:a:o},getUnreadClasses:function(e){return e?l:""}}}},21579:(e,t,r)=>{"use strict";r.d(t,{Q:()=>b});var n=r(98338),i=r(36589),o=r(54030),a=r(79994),s=r(54778),l=r(10326),c=r(94184),u=r.n(c),d=r(69076),p=r(166),f=r(85893),m=function(e){var t=e.communitySlug,r=(0,p.RE)(),n=(0,i.I)().isV3Enabled;return(0,f.jsx)(d.t,{className:u()("bg-c-sidebar",{"border-c-sidebar border-t":!n,"justify-center !p-0":n}),communitySlug:t,styles:r})},b=function(e){var t=e.isPreviewMode,r=void 0!==t&&t,c=(0,i.I)().isV3Enabled,u=(0,p.RE)(),d=(0,l.F)(),b=(0,a.K)().shouldShowBranding,h=(0,o.BT)(),v=(0,n.wh)().currentCommunity,y=(null!==v&&void 0!==v?v:{}).slug;return d||b?c?(0,f.jsxs)("div",{style:u,className:"border-c-sidebar bg-c-sidebar flex w-full flex-col gap-2 border-t px-6 pb-3.5 pt-4",children:[!h&&(0,f.jsx)(s.G,{isPreviewMode:r}),b&&(0,f.jsx)(m,{communitySlug:y})]}):(0,f.jsxs)("div",{className:"flex w-full flex-col",children:[!h&&(0,f.jsx)(s.G,{isPreviewMode:r}),b&&(0,f.jsx)(m,{communitySlug:y})]}):null}},54940:(e,t,r)=>{"use strict";r.d(t,{S:()=>b});var n=r(94184),i=r.n(n),o=r(30380),a=r(41793),s=r(28736),l=r(36589),c=r(62113),u=r(54030),d=r(79994),p=r(10326),f=function(){var e=(0,u.j)(),t=(0,a.k)().shouldShowTrialBanner,r=(0,s.Wk)().room,n=(0,d.K)().shouldShowBranding,i=(0,l.I)().isV3Enabled,o=(0,p.F)(),f=(0,c.f)(),m=function(){var e=(0,l.I)().isV3Enabled,t=(0,p.F)(),r=(0,d.K)().shouldShowBranding;return{goLiveButtonHeight:e?39:64,poweredByHeight:e?16:37,extraContainerSpacing:(e&&(r||t)?31:0)+(e&&r&&t?8:0)}}(),b=m.goLiveButtonHeight,h=m.poweredByHeight,v=m.extraContainerSpacing;return{paddingBottom:[f?48:0,e?i?63:48:0,e&&i?0:63,e&&t?48:0,e&&o?b:0,Boolean(r)?168:0,e?0:65,n?h:0,v].reduce((function(e,t){return e+t}),0)}},m=r(85893),b=function(e){var t=e.children,r=f();return(0,m.jsx)("div",{className:i()("h-full"),style:r,children:(0,m.jsx)(o.E,{className:"h-full",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:t})})}},50020:(e,t,r)=>{"use strict";r.d(t,{v:()=>m});var n=r(94184),i=r.n(n),o=r(96486),a=r(36589),s=r(86013),l=r(85893),c=function(e){var t=e.name,r=e.src,n=e.className,o=(0,a.I)().isV3Enabled;return(0,l.jsx)("img",{loading:"eager",id:"community-logo",alt:(0,s.t)("community_logo_alt",{community_name:t}),className:i()({"max-w-[14.375rem]":o,"max-h-6":!o,"max-h-9":o},n),src:r})};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="logo",m=function(e){var t=e.communityName,r=e.logoType,n=e.logoUrl,s=e.as,u=void 0===s?"button":s,p=e.onLogoClick,m=u,b=(0,a.I)().isV3Enabled;return(0,l.jsx)(m,d(d({className:"w-full min-w-0",id:"community-logo-wrapper",onClick:function(){return(0,o.isFunction)(p)&&p()}},"button"===u&&{buttonProps:{type:"button"}}),{},{children:r===f&&n?(0,l.jsx)(c,{name:t,src:n}):(0,l.jsxs)("div",{className:i()("flex items-center gap-2",{"text-c-sidebar":!b,"text-c-header":b}),children:[n&&(0,l.jsx)("div",{children:(0,l.jsx)(c,{name:t,src:n})}),(0,l.jsx)("div",{className:"w-full min-w-0",children:(0,l.jsx)("h1",{"data-testid":"title-name",className:i()("truncate text-left text-xl font-semibold normal-case leading-7 tracking-normal",{"text-c-sidebar":!b,"text-c-header":b}),children:t})})]})}))}},24425:(e,t,r)=>{"use strict";r.d(t,{e:()=>$});var n=r(96486),i=r(86013),o=r(94184),a=r.n(o),s=r(166),l=r(8246),c=r(85893),u=function(e){var t,r=e.logoUrl,n=e.iconUrl,i=e.bgColor,o=e.name,u=void 0===o?"":o,d=e.rootUrl,p=e.isActive,f=void 0!==p&&p,m=e.notificationCount,b=void 0===m?0:m,h=(0,s.Gf)().backgroundColor,v=Boolean(r),y=Boolean(n);return(0,c.jsx)("a",{href:d,children:(0,c.jsxs)("div",{className:a()("relative flex items-center justify-center p-3",{"bg-tertiary rounded":f}),children:[(0,c.jsxs)("div",{className:"flex w-full items-center gap-6",children:[(0,c.jsx)("div",{className:"text-badge flex h-[40px] w-[40px] min-w-[40px] cursor-pointer items-center justify-center rounded uppercase",style:v||y?{}:{backgroundColor:i},children:(t=u.charAt(0),v?(0,c.jsx)("img",{loading:"lazy",src:r,alt:""}):y?(0,c.jsx)("img",{loading:"lazy",src:n,style:{width:"40",height:"40"},alt:""}):t)}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.Z.LabelMd,{weight:"semibold",children:u})}),(0,c.jsx)(l.Z.LabelSm,{color:"text-light",children:d})]})]}),b>0&&(0,c.jsx)("span",{className:"text-badge flex h-[20px] min-w-[20px] items-center justify-center rounded-full bg-red-500 font-bold",style:{borderColor:h},children:(0,c.jsx)(l.Z.LabelSm,{color:"#fff",children:b})})]})})},d=r(96685),p=function(e){var t=e.onClickDone,r=(0,d.U)().communities;return(0,c.jsxs)("div",{className:"relative flex h-full w-full flex-col gap-1 py-1.5",children:[(0,c.jsxs)("div",{className:"mb-3.5 flex w-full cursor-pointer items-center justify-end px-3",children:[(0,c.jsx)("div",{className:"w-full flex-1",children:(0,c.jsx)(l.Z.LabelLg,{weight:"semibold",children:(0,i.t)("mobile_community_switcher.my_communities")})}),(0,c.jsx)("button",{type:"submit",onClick:t,children:(0,c.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("mobile_community_switcher.done")})})]}),r.map((function(e){return(0,c.jsx)(u,{isActive:e.is_current_community,rootUrl:e.root_url,notificationCount:e.notificationCount,logoUrl:e.logo_attachment_url,iconUrl:e.icon_attachment_url,bgColor:e.brand_color,name:e.name},e.id)}))]})},f=r(11049),m=r(82177),b=function(){var e=(0,f.dd)();return(0,c.jsxs)(m.u_,{isOpen:e.visible,onClose:e.hide,contentPortalId:"mobile-community-switcher-modal",title:(0,i.t)("community_switcher_title"),children:[(0,c.jsx)(m.u_.Overlay,{}),(0,c.jsx)(m.u_.Content,{size:"xl",children:(0,c.jsx)(m.u_.Body,{className:"!px-3",children:(0,c.jsx)(p,{onClickDone:e.hide})})})]})},h=f.gk.create((function(){return(0,c.jsx)(b,{})})),v=r(54030),y=r(38503),g=r(53729),_=r(36589),x=r(18605),j=r(27025);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={direction:"bottom-end",transitionWrapperClassName:"mt-2 md:-mt-2"},k={direction:"bottom-start",transitionWrapperClassName:"mt-1 lg:-mt-2 !w-[16.25rem] !left-[1.65rem] lg:!-left-2.5",menuWrapperClassName:"!px-0 !mt-0"},C=function(e){var t=e.children,r=e.hasFullWidth,n=void 0===r||r,o=e.dropDownOptions,s=void 0===o?[]:o,l=(0,_.I)().isV3Enabled,u=l?k:P;return(0,c.jsx)(j.Lt,O(O({},u),{},{size:"full",popperOptions:{strategy:"absolute"},className:a()("h-full",{"w-full":n}),buttonWrapperClassName:"flex w-full h-full px-4 py-3",buttonClassName:"w-full focus-visible:outline-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 rounded-md group",button:(0,c.jsxs)("div",{className:"flex w-full items-center justify-between",children:[t,l&&(0,c.jsx)("div",{className:"group-hover:bg-c-header-active text-c-header group-hover:text-c-header-active ml-1.5 flex h-5 w-5 flex-col items-center justify-center rounded-full transition-colors duration-150",children:(0,c.jsx)(x.JO,{size:12,type:"12-chevron-down",className:"!transition-none"})}),!l&&(0,c.jsx)(x.JO,{className:"text-c-sidebar",size:16,type:"caret-down-bold"})]}),buttonDataTestId:"community-menu",children:(0,c.jsxs)("div",{"data-testid":"community-dropdown-menu",children:[!l&&(0,c.jsx)(j.Lt.Header,{children:(0,i.t)("community_header_dropdown.title")}),(0,c.jsx)(j.Lt.IconWithBadgeList,{options:s})]})}))},N=r(50020),I=r(39068),A=r(50732),E=r(67294),D={membersIcon:"members-v2",postsIcon:"16-text-square",marketingHubIcon:"16-send",spacesCrudIcon:"all-spaces",moderationIcon:"settings-moderation",liveStreamIcon:"live-stream-settings",workflowsIcon:"lightning",paywallsIcon:"16-paywalls",plansIcon:"16-plans",analyticsIcon:"16-analytics",affiliatesIcon:"16-paywalls-affiliates",settingsIcon:"16-settings",customizeThemeIcon:"16-palette",toggleThemeLightIcon:"16-moon",toggleThemeDarkIcon:"16-sun",viewAsIcon:"16-eye-open",inviteMemberIcon:"16-invite-member",keyboardShortcutsIcon:"16-keyboard-shortcuts"},T={membersIcon:"20-users-v3",postsIcon:"20-doc-v3",marketingHubIcon:"16-send",spacesCrudIcon:"20-spaces-v3",moderationIcon:"20-shield-v3",liveStreamIcon:"20-live-v3",workflowsIcon:"20-flash-v3",paywallsIcon:"20-currency-v3",plansIcon:"20-card-v3",analyticsIcon:"20-analytics-v3",affiliatesIcon:"20-affiliates-v3",settingsIcon:"20-settings-v3",toggleThemeIcon:"20-moon-v3",toggleThemeLightIcon:"20-moon-v3",toggleThemeDarkIcon:"20-moon-v3",customizeThemeIcon:"20-color-palette-v3",viewAsIcon:"20-open-eye-v3",inviteMemberIcon:"20-user-plus-v3",keyboardShortcutsIcon:"20-keyboard-shortcuts"},L=function(){var e=(0,_.I)().isV3Enabled;return(0,E.useMemo)((function(){return e?T:D}),[e])},M=r(98338),R=r(79016),B=r(42393),U=r(24185),F=r(72874),z=r(98838),V={value:"separator"};function q(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=r(11642);function Q(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t,r,o,a,s,l=e.isAdmin,c=e.isModerator,u=e.memberCount,d=e.moderationCount,p=e.showToggleTheme,f=e.showCustomizeTheme,m=e.isWorkflowsEnabled,b=(0,y.TC)(),h=b.currentAppearance,g=b.toggleAppearance,x=(t=L().keyboardShortcutsIcon,r=(0,_.I)(),o=r.iconSize,a=r.isV3Enabled,s=(0,H.v)(),a?{value:(0,i.t)("header_v3.keyboard_shortcuts"),label:(0,i.t)("header_v3.keyboard_shortcuts"),onClick:function(){s.show()},icon:t,iconSize:o}:null),j=function(e){var t=e.showToggleTheme,r=e.currentAppearance,o=e.toggleAppearance,a=void 0===o?n.noop:o,s=L(),l=s.toggleThemeLightIcon,c=s.toggleThemeDarkIcon,u=(0,_.I)().iconSize;return t?[{value:r,label:r===y.OR.LIGHT?(0,i.t)("sidebar_switch_to_dark_mode"):(0,i.t)("sidebar_switch_to_light_mode"),onClick:a,icon:r===y.OR.LIGHT?l:c,iconSize:u}]:[]}({currentAppearance:h,toggleAppearance:g,showToggleTheme:p}),w=(0,B.Vu)(),O=w.isBannerVisible,S=function(e){var t=e.showBanner;return{icon:L().viewAsIcon,iconSize:(0,_.I)().iconSize,label:(0,i.t)("view_as"),onClick:function(){setTimeout((function(){t()}),0)},value:"viewAs"}}({showBanner:w.showBanner}),P=function(e){var t=L().moderationIcon,r=(0,_.I)().iconSize,n={value:(0,i.t)("sidebar_moderation"),label:(0,i.t)("sidebar_moderation"),pathTo:"/settings/moderation",icon:t,iconSize:r};return e&&(n.badge=String(e)),n}(d),k=function(){var e=(0,M.wh)().currentCommunityMember,t=(0,_.I)().iconSize,r=(0,v.ef)(),n=L().postsIcon,o=Boolean(!r&&((0,I.vb)(e)||(0,I.I$)(e))),a=(0,i.t)("settings.posts.title");return{isVisible:o,link:A.qk.postsDashboard.index(),icon:n,iconSize:t,title:a}}(),C=function(e){var t=e.isVisible,r=e.link,n=e.icon,i=e.iconSize,o=e.title;return t?[{value:o,label:o,pathTo:r,icon:n,iconSize:i}]:[]}(k),N=(0,R.E)().isCommunityOnPlus,E=(0,M.wh)(),D=E.currentCommunitySettings,T=E.currentCommunity,Z=function(e){var t=e.memberCount,r=e.showCustomizeTheme,n=e.moderation,o=e.toggleTheme,a=e.viewAs,s=e.post,l=e.isCommunityOnPlus,c=e.isWorkflowsEnabled,u=e.isSpacesCrudEnabled,d=e.isAffiliatesEnabled,p=e.isBannerVisible,f=e.shortcutsModalButton,m=L(),b=m.membersIcon,h=m.marketingHubIcon,v=m.spacesCrudIcon,y=m.liveStreamIcon,g=m.workflowsIcon,x=m.paywallsIcon,j=m.plansIcon,w=m.analyticsIcon,O=m.affiliatesIcon,S=m.settingsIcon,P=m.customizeThemeIcon,k=m.inviteMemberIcon,C=(0,F.b)().isApiFeatureEnabled,N=(0,_.I)(),I=N.iconSize,E=N.isV3Enabled,D=(0,U.TH)().pathname,T=[],M={value:"members",label:(0,i.t)("section_audience"),pathTo:A.Gp.index(),icon:b,iconSize:I};return t&&(M.badge=String(t)),T.push(M),T.push({value:(0,i.t)("sidebar_email"),label:(0,i.t)("sidebar_email"),pathTo:A.lA.email.broadcast,icon:h,iconSize:I}),T.push.apply(T,q(s)),u&&T.push({value:(0,i.t)("settings.spaces.title"),label:(0,i.t)("settings.spaces.title"),pathTo:(0,A.vB)(),icon:v,iconSize:I}),T.push(n),T.push({value:(0,i.t)("sidebar_live_streams"),label:(0,i.t)("sidebar_live_streams"),pathTo:"/settings/live_streams",icon:y,iconSize:I}),c&&T.push({value:(0,i.t)("sidebar_workflows"),label:(0,i.t)("sidebar_workflows"),pathTo:"/settings/workflows",icon:g,iconSize:I}),T.push({value:(0,i.t)("sidebar_paywalls"),label:(0,i.t)("sidebar_paywalls"),pathTo:"/settings/paywalls",icon:x,iconSize:I}),T.push({value:(0,i.t)("pricing_plans.title"),label:l?(0,i.t)("settings.billing.plans.plus"):(0,i.t)("settings.billing.plans.title"),pathTo:(0,A.xn)(),icon:j,iconSize:I}),T.push({value:(0,i.t)("analytics.analytics"),label:(0,i.t)("analytics.analytics"),pathTo:"/settings/analytics",icon:w,iconSize:I}),d&&T.push({value:(0,i.t)("sidebar_paywalls_affiliates"),label:(0,i.t)("sidebar_paywalls_affiliates"),pathTo:"/settings/affiliates_settings",icon:O,iconSize:I}),E&&T.push({label:(0,i.t)("settings_nav_v3.site.label"),value:(0,i.t)("settings_nav_v3.site.label"),icon:"20-display",pathTo:z.L.site.index,iconSize:I}),C&&T.push({label:(0,i.t)("settings_nav_v3.developers.title"),value:(0,i.t)("settings_nav_v3.developers.title"),icon:"20-code-tag",pathTo:z.L.developers.overview,iconSize:I}),T.push({value:(0,i.t)("sidebar_settings"),label:(0,i.t)("sidebar_settings"),pathTo:"/settings",icon:S,iconSize:I}),T.push(V),T.push.apply(T,q(o)),r&&T.push({value:(0,i.t)("customize_theme.title"),label:(0,i.t)("customize_theme.title"),pathTo:"/settings/theme",icon:P,iconSize:I}),f&&T.push(f),T.push(V),p||T.push(a),T.push({value:(0,i.t)("sidebar_invite_member"),label:(0,i.t)("sidebar_invite_member"),pathTo:"".concat(A.lA.members.invite,"?from=").concat(D),icon:k,iconSize:I}),T}({memberCount:u,showCustomizeTheme:f,toggleTheme:j,viewAs:S,moderation:P,post:C,isCommunityOnPlus:N,isWorkflowsEnabled:m,isSpacesCrudEnabled:Boolean(D&&D.spaces_crud_enabled),isAffiliatesEnabled:Boolean(null===T||void 0===T?void 0:T.affiliates_feature_flag_enabled),isBannerVisible:O,shortcutsModalButton:x});return l?Z:c?function(e){var t=e.moderation,r=e.showToggleTheme,n=e.toggleTheme,i=e.post,o=e.shortcutsModalButton;return[].concat(G(i),[t],G(r?[V]:[]),G(n),G(o?[o]:[]))}({moderation:P,showToggleTheme:p,toggleTheme:j,post:C,shortcutsModalButton:x}):[].concat(Q(x?[x]:[]),Q(j))},$=function(e){var t=e.communityName,r=void 0===t?"":t,i=e.isAdmin,o=void 0!==i&&i,a=e.isModerator,s=void 0!==a&&a,l=e.logoType,u=void 0===l?"icon":l,d=e.logoUrl,p=e.onLogoClick,m=e.showToggleTheme,b=void 0!==m&&m,_=e.showCustomizeTheme,x=void 0!==_&&_,j=e.memberCount,w=e.moderationCount,O=(0,v.ac)("(max-width: 1023px)"),S=(0,f.dd)(h),P=(0,y.wC)().display_community_switcher,k=(0,g.I)(),I=K({isAdmin:o,isModerator:s,memberCount:j,moderationCount:w,showToggleTheme:b,showCustomizeTheme:x,isWorkflowsEnabled:k}),A=O&&P;return A?(0,c.jsxs)("div",{className:"flex w-full items-center px-4",id:"community-logo-mobile-community-switcher",children:[(0,c.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,onLogoClick:function(){S.show()}}),(0,c.jsx)(C,{hasFullWidth:!1,dropDownOptions:I})]}):(0,n.isEmpty)(I)?(0,c.jsx)("div",{className:"px-4",id:"community-logo-no-dropdown",children:(0,c.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,onLogoClick:function(){if(A)return S.show();p&&p()}})}):(0,c.jsx)(C,{dropDownOptions:I,children:(0,c.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,as:"div"})})}},84513:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var n=r(94184),i=r.n(n),o=r(43535),a=r(36589),s=r(166),l=r(85893),c=function(e){var t=e.hasBorder,r=void 0!==t&&t,n=e.hasPadding,c=void 0===n||n,u=e.isSticky,d=void 0===u||u,p=e.children,f=e.className,m=(0,s.RE)(),b=(0,a.I)().isV3Enabled;return(0,l.jsx)(o.T,{children:(0,l.jsx)("div",{className:i()(f,"top-0 z-30 flex h-16 min-h-[4rem] items-center justify-between gap-2",{"border-c-sidebar border-b":r&&!b,"px-4":c,sticky:d,"bg-c-sidebar":!b}),"data-testid":"top_section_container",style:m,children:p})})}},70815:(e,t,r)=>{"use strict";r.d(t,{J:()=>f});var n=r(68997),i=r(98338),o=r(39068),a=r(54876),s=r(35007),l=r(54030),c=r(38503),u=r(24425),d=r(84513),p=r(85893),f=function(){var e=(0,i.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,f=e.currentCommunitySettings,m=void 0===f?{}:f,b=(0,s.C)().goToCommunityRootPath,h=(0,c.TC)().currentAppearance,v=(0,a.q1)(),y=(0,o.vb)(r),g=(0,o.I$)(r),_=(0,n._v)(t),x=_.url,j=_.type,w=m.dark_mode_enabled,O=(0,l.ef)(),S=(0,a.PN)(),P=null!==t&&void 0!==t?t:{},k=P.member_count,C=P.moderation_count,N=P.dark_icon_url,I=P.dark_logo_url,A=Boolean(w),E=x;return h===c.OR.DARK&&S&&("logo"===j&&I?E=I:"icon"===j&&N&&(E=N)),(0,p.jsx)(d.F,{hasBorder:!0,hasPadding:!1,children:(0,p.jsx)(u.e,{communityName:null===t||void 0===t?void 0:t.name,isAdmin:y,isModerator:g,logoType:j,logoUrl:E,showToggleTheme:A,showCustomizeTheme:v&&!O,onLogoClick:b,memberCount:k,moderationCount:C})})}},71434:(e,t,r)=>{"use strict";r.d(t,{x:()=>W});var n=r(86013),i=r(96486),o=r(37447),a=r(36589),s=r(54030),l=r(18605),c=r(24185),u=r(78208),d=r(46266),p=r(8246),f=r(67294),m=r(58533),b=r(40160),h=r(74666),v=r(34914),y=r(98338),g=r(95287),_=r(73890),x=r(50732),j=r(27434),w=r(25680),O=r(78417),S=r(13288),P=r(38704),k=r(67142),C=r(94184),N=r.n(C),I=r(85893),A=function(e){var t=e.user1,r=e.user2,n=e.className,i=void 0===n?"":n,o=(0,a.I)().isV3Enabled,s=[{name:(null===t||void 0===t?void 0:t.name)||"",src:(null===t||void 0===t?void 0:t.avatar_url)||""},{name:(null===r||void 0===r?void 0:r.name)||"",src:(null===r||void 0===r?void 0:r.avatar_url)||""}];return(0,I.jsx)("div",{className:N()("border-tertiary group-hover:border-hover mr-2.5",i),children:(0,I.jsx)(k.Lt,{users:s,isFullRounded:o})})},E=function(){return(0,I.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,I.jsx)("div",{className:"text-darkest mb-2 text-xl font-semibold",children:(0,n.t)("messaging.no_messages")}),(0,I.jsx)("div",{className:"text-default text-sm",children:(0,n.t)("messaging.type_name")})]})},D=function(){var e=(0,c.UO)().uuid,t=(0,P.wO)().onClose,r=(0,y.wh)(),i=r.currentCommunityMember,o=r.isLoading,a=(0,j.T)({openChatRoomUuid:e&&"new"!==e?e:null}),s=a.chatRooms,u=a.hasNextPage,d=a.isLoading,p=a.onEventReceive,O=a.fetchNextPage;(0,v.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){p(e,null===i||void 0===i?void 0:i.id)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:!0},[s]);var k=o||d,C=(0,f.useMemo)((function(){return s.filter((function(e){return e.last_message}))}),[s]);if(k)return(0,I.jsx)(S.a,{center:!0});if(!C.length)return(0,I.jsx)("div",{className:"h-[532px] 2xl:h-[592px]",children:(0,I.jsx)(E,{})});return(0,I.jsx)("div",{id:"scrollableDmsDiv",className:"h-[532px] overflow-auto 2xl:h-[592px]",children:(0,I.jsx)(m.Z,{style:{height:"100%",overflow:"hidden"},scrollThreshold:.8,next:O,hasMore:u,dataLength:C.length,scrollableTarget:"scrollableDmsDiv",loader:(0,I.jsx)(S.a,{center:!0}),children:C.map((function(e){var r,o,a,s,c=e.chat_room_name,u=e.chat_room_kind,d=e.last_message,p=e.current_participant,f=void 0===p?{}:p,m=e.other_participants_preview,v=void 0===m?[]:m,y=e.id,j=e.unread_messages_count,O=e.uuid,S=u===h.g8;return(0,I.jsx)(b.rU,{className:"chat-room-item hover:bg-tertiary block cursor-pointer px-5 py-2.5",onClick:function(e){(0,g.n2)(e)||t()},to:(0,x.so)({uuid:O}),"data-testid":"chat-room-dm-list",children:(0,I.jsxs)("div",{className:"flex items-start justify-between",children:[(0,I.jsxs)("div",{className:"flex",children:[S?(0,I.jsx)("div",{className:"isolate mr-4 mt-1",children:(0,I.jsx)(w.g,{src:null===(r=v[0])||void 0===r?void 0:r.avatar_url,name:null===(o=v[0])||void 0===o?void 0:o.name,alt:(0,n.t)("alt_avatar"),status:null===(a=v[0])||void 0===a?void 0:a.status,size:"8"})}):(0,I.jsx)(A,{user1:v[0],user2:v[1]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"flex items-center space-x-2",children:(0,I.jsx)("p",{className:"text-darkest truncate text-sm font-medium",children:c})}),(0,I.jsx)("div",{className:"mt-0.5",children:(0,I.jsxs)("p",{className:"message-body chat-message-word-wrap",children:[d.sender.community_member_id===(null===i||void 0===i?void 0:i.id)?(0,n.t)("messaging.you"):d.sender.name,": ",d.body||(null===(s=d.rich_text_body)||void 0===s?void 0:s.circle_ios_fallback_text)]})})]})]}),(0,I.jsxs)("div",{className:"flex h-full flex-col items-end justify-start",children:[(0,I.jsx)("p",{className:"text-default flex min-w-[86px] items-end justify-end text-xs",children:(0,_.TF)(d.sent_at)}),(0,I.jsx)("div",{className:"mr-1 flex",children:f.muted?(0,I.jsx)("div",{className:"chat-room__mute",children:(0,I.jsx)(l.JO,{type:"mute-notifications"})}):j>0&&(0,I.jsx)("span",{className:"rounded font-semibold leading-none text-white text-xxs bg-v2-danger p-[3px] min-w-[20px] text-center mt-1 mr-0.5","data-testid":"unread-messages-count",children:j})})]})]})},y)}))})})},T=function(){return(0,I.jsx)("div",{className:"chat-room__error",children:(0,n.t)("chat_space.error_message")})},L=function(){return(0,I.jsx)(O.S,{renderFunc:T,children:(0,I.jsx)(D,{})})},M=function(){var e=(0,u.z1)(),t=(0,c.k6)();return(0,I.jsxs)("div",{className:"h-full w-full","data-testid":"chat-dropdown",children:[(0,I.jsxs)("div",{className:"border-primary flex h-16 items-center justify-between border-b px-6",children:[(0,I.jsx)(p.Z.TitleSm,{weight:"bold",children:(0,n.t)("sidebar_all_dms")}),e&&(0,I.jsx)(d.Y,{content:(0,n.t)("new_message"),children:(0,I.jsx)("button",{type:"submit",onClick:function(){t.push("/messages/new")},children:(0,I.jsx)(l.JO,{type:"plus-big",className:"cursor-pointer","data-testid":"new-message"})})})]}),(0,I.jsx)(L,{})]})},R=r(61417),B=r(48637),U=r(2631),F=r(63569),z=function(e){var t=e.badgeText,r=e.dataTestId,n=e.iconName,o=e.isActive,a=void 0!==o&&o,s=e.label,c=e.onClick,u=e.rightSideContent,d=e.isGray,p=void 0!==d&&d,f=e.shouldBold,m=void 0!==f&&f,b=e.ariaLabel,h=(0,U.i)().getActiveInactiveClasses,v=!(0,i.isUndefined)(t)&&Number(t)>0&&!u;return(0,I.jsxs)("button",{type:"button","data-testid":r,onClick:c,className:N()("my-px flex w-full items-center px-2 py-1.5 text-sm",h(a)),"aria-labelledby":s,children:[(0,I.jsx)(l.JO,{type:n,size:16,"aria-hidden":!0}),(0,I.jsx)("div",{className:"ml-2 flex-1 text-left",children:(0,I.jsx)("h3",{className:N()("max-w-full truncate text-sm text-current",{"font-normal":!m,"font-bold":m}),children:s})}),v&&(0,I.jsx)(F.l,{ariaLabel:b,isGray:p,children:t}),!t&&u&&u]})},V=function(e){var t=e.allDMsBadgeText,r=e.disabled,o=e.isMessagingEnabled,a=e.notificationBadgeText,l=e.onNotificationClick,u=e.resetNewNotificationsCount,d=e.shouldShowChatThreadsTab,p=e.unreadThreadsCount,f=(0,c.k6)(),m=f.location.pathname,b=(0,s.Fs)(),h=(0,s.j)(),v=(0,s.BT)(),y=m.includes((0,x.yg)()),g=m.includes((0,x.Ng)()),_=m.includes((0,x.Rj)()),j=m.includes((0,x.AM)());return(0,I.jsxs)(I.Fragment,{children:[!h&&(0,I.jsx)(P.i9,{button:(0,I.jsx)(z,{dataTestId:"notifications-menu",label:(0,n.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:a,ariaLabel:(0,n.t)("community_sidebar.unread_notifications",{count:Number(a)}),onClick:function(){b&&(0,i.isFunction)(l)&&!r&&l()},isActive:_}),onOpen:u,disabled:r||!(0,i.isFunction)(l),children:(0,I.jsx)("div",{className:"flex h-full w-full flex-col","data-testid":"notifications-drawer",children:(0,I.jsx)(R.u,{containerElement:"dropdown",isDropdown:!0})})}),o&&!h&&(v?(0,I.jsx)(P.i9,{button:(0,I.jsx)(z,{dataTestId:"chat-menu",label:(0,n.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:t,ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(t)}),onClick:function(){return b&&f.push((0,x.yg)())},isActive:y}),disabled:r,children:(0,I.jsx)(M,{})}):(0,I.jsx)(z,{dataTestId:"chat-menu",label:(0,n.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:t,ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(t)}),onClick:function(){return f.push((0,x.co)({url:(0,x.yg)()}))},isActive:y})),d&&!h&&(0,I.jsx)(z,{dataTestId:"chat-threads-menu",label:(0,n.t)("chat_threads"),iconName:"16-chat-threads",onClick:function(){return f.push((0,x.Ng)())},isActive:g,badgeText:String(p),ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(p)})}),b&&(0,I.jsx)(P.i9,{button:(0,I.jsx)(z,{dataTestId:"bookmarks-menu",label:(0,n.t)("header_v3.bookmarks"),iconName:"16-bookmark",onClick:function(){return f.push((0,x.AM)())},isActive:j}),disabled:r,children:(0,I.jsx)(B.BookmarksList,{})})]})},q=function(e){var t=e.badgeText,r=e.isGrayBadge,n=void 0!==r&&r,i=e.show,o=void 0===i||i,a=e.dataTestId,s=e.iconName,c=e.label,u=e.linkTo,d=e.disabled,p=void 0!==d&&d,f=e.isActive,m=void 0!==f&&f,h=(0,U.i)().getActiveInactiveClasses;return o?(0,I.jsxs)(b.OL,{"data-testid":a,to:u,className:function(e){return N()("my-px flex w-full cursor-pointer items-center px-2 py-1.5 text-sm",h(e||m))},onClick:function(e){p&&e.preventDefault()},title:c,children:[(0,I.jsx)(l.JO,{type:s,size:16,"aria-hidden":!0}),(0,I.jsx)("div",{className:"ml-2 flex-1",children:(0,I.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:c})}),t&&(0,I.jsx)(F.l,{isGray:n,children:t})]}):null},Z=function(e){var t=e.dataTestId,r=e.disabled,n=void 0!==r&&r,i=e.iconName,o=e.label,a=e.linkTo,s=e.show;return void 0===s||s?(0,I.jsxs)("a",{"data-testid":t,href:a,className:"text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex w-full cursor-pointer items-center rounded-md bg-transparent px-2 py-1.5 text-sm",onClick:function(e){n&&e.preventDefault()},title:o,children:[(0,I.jsx)(l.JO,{type:i,size:16,"aria-hidden":!0}),(0,I.jsx)("div",{className:"ml-2 flex-1",children:(0,I.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:o})})]}):null},G=function(e){var t=e.link,r=e.disabled,i=e.isHomePageEnabled,a=e.shouldShowActiveHomeLink,s=e.shouldShowMemberDirectory,l=e.shouldShowAllEventsPage,c=e.shouldShowCoursesDirectory,u=e.shouldShowLeaderboard;return"home"===t.kind?(0,I.jsx)(q,{label:(0,n.t)("feed"),linkTo:"/feed",iconName:"home-v2",disabled:r,isActive:a,show:i}):"members"===t.kind?(0,I.jsx)(q,{label:t.label||(0,n.t)("members_directory.menu.title"),linkTo:(0,o.UI)(),iconName:"members-v2",disabled:r,show:s}):"events"===t.kind?(0,I.jsx)(q,{label:t.label||(0,n.t)("events.title"),linkTo:"/events",iconName:"16-calendar",disabled:r,show:l}):"courses"===t.kind?(0,I.jsx)(q,{label:t.label||(0,n.t)("courses.directory.title"),linkTo:"/courses",iconName:"16-book",disabled:r,isGrayBadge:!0,show:c}):"leaderboard"===t.kind?(0,I.jsx)(q,{label:t.label||(0,n.t)("leaderboard.title"),linkTo:"/leaderboard?period=7_days",iconName:"16-analytics",disabled:r,isGrayBadge:!0,show:u}):"custom"===t.kind?(0,I.jsx)(Z,{disabled:r,iconName:"16-site-link",label:t.label,linkTo:t.linkTo,show:!t.isDisabled}):null},W=function(e){var t=e.allDMsBadgeText,r=void 0===t?"":t,c=e.disabled,u=void 0!==c&&c,d=e.hasCurrentCommunityMember,p=void 0!==d&&d,f=e.isHomePageEnabled,m=void 0!==f&&f,b=e.isMessagingEnabled,h=void 0!==b&&b,v=e.isOnboardingActive,y=void 0!==v&&v,g=e.notificationBadgeText,_=void 0===g?"":g,x=e.onGettingStartedClick,j=e.onGettingStartedClose,w=e.onNotificationClick,O=e.onSearchClick,S=e.resetNewNotificationsCount,P=e.shouldShowActiveHomeLink,k=void 0!==P&&P,C=e.shouldShowAllEventsPage,N=void 0!==C&&C,A=e.shouldShowChatThreadsTab,E=void 0!==A&&A,D=e.shouldShowCoursesDirectory,T=void 0!==D&&D,L=e.shouldShowLeaderboard,M=void 0!==L&&L,R=e.shouldShowMemberDirectory,B=void 0!==R&&R,U=e.shouldShowOnboarding,F=void 0!==U&&U,Z=e.shouldShowSpaceDirectory,W=void 0!==Z&&Z,H=e.unreadThreadsCount,Q=e.links,J=(0,s.j)(),K=(0,a.I)().isV3Enabled;return(0,I.jsxs)("div",{className:"mt-2.5 px-3",children:[!J&&(0,I.jsx)(z,{label:(0,n.t)("search_item"),onClick:function(){return(0,i.isFunction)(O)&&O()},iconName:"16-search"}),F&&(0,I.jsx)(z,{label:(0,n.t)("getting_started"),iconName:"lightning",isActive:y,onClick:function(){(0,i.isFunction)(x)&&!u&&x()},rightSideContent:(0,I.jsx)("button",{type:"button",className:"flex h-5 w-5 rounded py-0.5 transition-colors hover:bg-black/10 focus:bg-black/10",onClick:function(){(0,i.isFunction)(j)&&!u&&j()},"aria-label":(0,n.t)("close"),children:(0,I.jsx)(l.JO,{type:"16-close",size:16})})}),!K&&m&&(0,I.jsx)(q,{label:(0,n.t)("home_page.title"),linkTo:"/home",iconName:"home-v2",disabled:u,isActive:k}),p&&(0,I.jsx)(V,{notificationBadgeText:_,onNotificationClick:w,disabled:u,resetNewNotificationsCount:S,allDMsBadgeText:r,isMessagingEnabled:h,unreadThreadsCount:H,shouldShowChatThreadsTab:E}),W&&(0,I.jsx)(q,{label:(0,n.t)("sidebar_spaces"),linkTo:"/spaces",iconName:"all-spaces",disabled:u}),!K&&(0,I.jsxs)(I.Fragment,{children:[B&&(0,I.jsx)(q,{label:(0,n.t)("members_directory.menu.title"),linkTo:(0,o.UI)(),iconName:"members-v2",disabled:u}),N&&(0,I.jsx)(q,{label:(0,n.t)("events.title"),linkTo:"/events",iconName:"16-calendar",disabled:u}),T&&(0,I.jsx)(q,{label:(0,n.t)("courses.directory.title"),linkTo:"/courses",iconName:"16-book",disabled:u,isGrayBadge:!0}),M&&(0,I.jsx)(q,{label:(0,n.t)("leaderboard.title"),linkTo:"/leaderboard?period=7_days",iconName:"16-analytics",disabled:u,isGrayBadge:!0})]}),K&&Q.map((function(e){return(0,I.jsx)(G,{link:e,disabled:u,isHomePageEnabled:m,shouldShowActiveHomeLink:k,shouldShowMemberDirectory:B,shouldShowAllEventsPage:N,shouldShowCoursesDirectory:T,shouldShowLeaderboard:M},e.linkTo)}))]})}},63569:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.isGray,n=void 0!==r&&r,a=e.ariaLabel;return(0,o.jsx)("div",{className:i()("ml-auto min-w-[1.75rem] rounded px-1.5 py-1 text-center text-[11px] font-semibold leading-[11px]",{"bg-c-sidebar-badge text-c-sidebar-badge-text":!n,"border-primary bg-primary group-hover:bg-primary text-dark my-[-1px] border":n}),"data-testid":"unread-count","aria-label":a,children:t})}},6766:(e,t,r)=>{"use strict";r.d(t,{R:()=>g});var n=r(67294),i=r(96486),o=r(86013),a=r(11049),s=r(6298),l=r(50732),c=r(51792),u=r(43333),d=r(47544),p=r(36325),f=r(51215),m=r(61417),b=r(85893),h=function(e){var t=e.containerElement,r=e.communityMemberId,i=e.newNotificationCount,h=(0,a.dd)(),v=(0,d.f)(f.dL),y=v.newNotificationCount,g=v.setNewNotificationCount,_=v.onNotificationEventReceive,x=v.resizeNotificationWindow,j=(0,c.j)(),w=j.prependTitle,O=j.resetTitleToOriginal;return(0,n.useEffect)((function(){g(i)}),[i]),(0,u.I)(r,_),(0,p.w)(x),(0,n.useEffect)((function(){document.title=y?w("(".concat(y,") ")):O()}),[y]),(0,b.jsx)(s.d,{maskClosable:!0,hideHeader:!0,noWrapperPadding:!0,open:h.visible,onClose:h.hide,children:(0,b.jsxs)("div",{className:"notifications__wrapper--drawer",id:t+"NotificationWrapperOuter","data-testid":"notifications-drawer",children:[(0,b.jsx)(m.u,{handleClose:h.hide,containerElement:"drawer"},"notification-".concat(h.visible)),(0,b.jsx)("div",{className:"notifications__footer",children:(0,b.jsx)("span",{children:(0,b.jsx)("a",{href:(0,l.Rj)(),children:(0,b.jsx)("div",{children:(0,o.t)("view_all_notifications")})})})})]})})},v=a.gk.create((function(e){var t=e.containerElement,r=e.communityMemberId,n=e.newNotificationCount;return(0,b.jsx)(h,{containerElement:t,communityMemberId:r,newNotificationCount:n})})),y=r(98338),g=function(){var e=(0,y.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,o=(0,d.f)(),s=o.newNotificationCount,l=o.fetchNewNotificationsCount,c=o.resetNewNotificationsCount,p=o.onNotificationEventReceive;(0,u.I)(null===r||void 0===r?void 0:r.id,p),(0,n.useEffect)((function(){r&&l(t.id)}),[t.id,r]);var f=(0,a.dd)(v),m=(0,n.useCallback)((function(){(0,i.isEmpty)(r)||(0,i.isEmpty)(t)||f.show({communityMemberId:r.id,newNotificationCount:s})}),[r,t,f]);return{newNotificationCount:s,toggleNotificationDrawer:m,resetNewNotificationsCount:c}}},87439:(e,t,r)=>{"use strict";r.d(t,{I:()=>d});var n=r(24185),i=r(52228),o=r(21653),a=r(73826),s=r(39068),l=r(45238),c=r(98338),u=r(37447),d=function(){var e=(0,i.kc)().isOnboardingAvailable,t=(0,c.wh)(),r=t.currentCommunity,d=t.currentCommunityMember,p=t.currentCommunitySettings,f=(0,l.m)(),m=Boolean((0,n.$B)(u.Fy.onboarding())),b=(0,o.S)(),h=Boolean((0,s.vb)(d)),v=Boolean(h&&e),y=(0,a.D)(),g=h||(null===p||void 0===p?void 0:p.public_events_page);return{shouldShowOnboarding:v,isOnboardingActive:m,hideOnboardingConfirmationModal:b,currentCommunity:r,currentCommunitySettings:p,currentCommunityMember:d,isAdmin:h,spotlightSearch:y,toggleSpaceGroupDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f.show({position:e})},showSpotlightSearch:function(){y.show()},shouldShowAllEventsPage:g}}},91776:(e,t,r)=>{"use strict";r.d(t,{C:()=>x});var n=r(64687),i=r.n(n),o=r(86013),a=r(98338),s=r(37447),l=r(94184),c=r.n(l),u=r(40160),d=r(24185),p=r(2631),f=r(18605),m=r(85893),b=function(e){var t=e.text,r=e.linkTo,n=e.icon,i=e.isActive,o=void 0!==i&&i,a=e.isDisabled,l=void 0!==a&&a,b=e.onClose,h=(0,p.i)().getActiveInactiveClasses,v=(0,d.TH)(),y=(0,d.$B)({path:r,exact:!0}),g=v.state,_=(null!==g&&void 0!==g?g:{}).prevLocation,x=!!_&&!_.pathname.startsWith("/c"),j=r.includes(s.Fy.feed()),w=h(Boolean(y)||o,x,j);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(u.OL,{to:r,title:t,className:c()("h-8.5 flex w-full items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-200",w),onClick:function(e){l&&e.preventDefault()},"aria-disabled":l,children:[(0,m.jsx)(f.JO,{type:n,size:20}),(0,m.jsx)("h4",{className:"text-xs-plus max-w-full truncate font-medium text-current",children:t})]}),b&&(0,m.jsx)("button",{className:c()("focus-visible:outline-secondary absolute right-2 top-1/2 flex h-5 w-5 -translate-y-1/2 rounded focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",w),type:"button",onClick:b,children:(0,m.jsx)(f.JO,{type:"16-close",size:16})})]})},h=r(21653),v=r(39068),y=r(52228);function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))}}var x=function(e){var t,r,n,l=e.isDisabled,c=void 0!==l&&l,u=e.isFeedLinkActive,d=void 0!==u&&u,p=(t=(0,a.wh)().currentCommunityMember,r=(0,y.kc)().isOnboardingAvailable,n=Boolean((0,v.vb)(t)),{shouldShowOnboarding:Boolean(n&&r),hideOnboardingModal:(0,h.S)()}),f=p.shouldShowOnboarding,g=p.hideOnboardingModal,x=(0,a.wh)().currentCommunity,j=(null!==x&&void 0!==x?x:{}).home_page_enabled;return f||j?(0,m.jsx)("nav",{"aria-label":(0,o.t)("secondary_navigation_bar"),children:(0,m.jsxs)("ul",{className:"bg-c-sidebar mt-4 flex list-none flex-col gap-y-1 px-3 lg:mt-6 lg:px-6",children:[f&&(0,m.jsx)("li",{className:"relative",children:(0,m.jsx)(b,{text:(0,o.t)("getting_started"),linkTo:s.Fy.onboarding(),icon:"20-todo-list-v3",isDisabled:c,onClose:_(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.show();case 2:case"end":return e.stop()}}),e)})))})}),j&&(0,m.jsx)("li",{className:"relative",children:(0,m.jsx)(b,{text:(0,o.t)("feed"),linkTo:s.Fy.feed(),icon:"20-feed-v3",isDisabled:c,isActive:d})})]})}):null}},83728:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.className;return(0,o.jsx)("div",{className:i()("fixed bottom-0 flex w-[inherit] flex-col items-center bg-transparent sm:max-w-[21.25rem] md:max-w-[18.5rem]",r),children:t})}},54778:(e,t,r)=>{"use strict";r.d(t,{G:()=>h,g:()=>x});var n=r(94184),i=r.n(n),o=r(86013),a=r(28736),s=r(57435),l=r(98338),c=r(39068),u=r(36589),d=r(18605),p=r(81786),f=r(166),m=r(10326),b=r(85893),h=function(e){var t=e.isPreviewMode,r=void 0!==t&&t,n=e.inSettings,h=void 0!==n&&n,v=(0,a.IO)(),y=v.isLoading,g=v.isMonthlyHourLimitReached,_=v.isStorageLimitReached,x=g||_,j=(0,s.t)(),w=(0,f.RE)(),O=(0,m.F)(),S=(0,u.I)().isV3Enabled,P=(0,l.wh)(),k=P.currentCommunityMember,C=P.isViewOnlyMasquerading,N=!(0,c.vb)(k)&&(y||x);return O?(0,b.jsx)("div",{className:i()("flex w-full items-center justify-between",{"pl-4 pr-0":h,"bg-c-sidebar":!h,"cursor-not-allowed":C,"border-c-sidebar border-t px-4 py-3":!S}),style:w,children:(0,b.jsx)(p.z,{full:!0,onClick:function(){j.show()},variant:"secondary-light",disabled:N,className:i()("!border-dark hover:bg-secondary px-4 py-[8.5px] font-medium transition-colors duration-150 ease-in-out",{"pointer-events-none":r||C}),children:(0,b.jsxs)("div",{className:"text-selector-active flex items-center justify-center",children:[(0,b.jsx)(d.JO,{type:"16-go-live",size:16,className:"text-default mr-2"}),(0,o.t)("sidebar_footer_v3.go_live")]})})}):null},v=r(68971),y=r(85239),g=r(64422),_=r(8246),x=function(){var e,t,r,n=(0,a.Wk)(),s=n.room,l=n.canManage,c=n.handleNavigateToRoom,f=n.handleEndStream,m=(0,u.I)().isV3Enabled,h=(0,v.tv)({title:(0,o.t)("live_streams.".concat((0,y.vX)(s),"_ended.confirm")),onConfirm:f}),x=h.confirmModal,j=h.onConfirmButtonClick;return s?(0,b.jsxs)("div",{className:i()("bg-sidebar-footer-live-indicator w-full p-4",{"mb-4 max-w-[272px] rounded-md":!m,"mb-1 max-w-[256px] rounded-xl":m}),children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.s,{size:"6",src:null===s||void 0===s||null===(e=s.creator)||void 0===e?void 0:e.avatar_url,name:null===s||void 0===s||null===(t=s.creator)||void 0===t?void 0:t.name}),(0,b.jsx)(_.Z.BodySm,{color:"text-white max-w-[15ch]",truncate:!0,children:null===s||void 0===s||null===(r=s.creator)||void 0===r?void 0:r.name}),(0,b.jsx)(d.JO,{type:"24-live-waveform",size:24})]}),(0,b.jsx)("div",{className:"bg-c-sidebar-badge flex items-center justify-center rounded-[4px] px-2 py-1",children:(0,b.jsx)("span",{className:"text-xxs font-bold uppercase leading-3 text-white",children:(0,o.t)("sidebar_footer_v3.live")})})]}),(0,b.jsx)(_.Z.BodyMd,{color:"text-white line-clamp-2",weight:"font-semibold",children:null===s||void 0===s?void 0:s.name}),(0,b.jsx)(p.z,{full:!0,className:"!bg-circle mt-4",onClick:c,children:(0,o.t)("sidebar_footer_v3.join")}),l&&(0,b.jsxs)(_.Z.BodyXs,{color:"text-white mt-2",children:[(0,o.t)("live_streams.room.cant_join"),(0,b.jsx)("button",{type:"button",className:"ml-1 cursor-pointer text-xs font-semibold text-white",onClick:j,children:(0,o.t)("live_streams.room.".concat((0,y.vX)(s),".end"))})]}),x]}):null}},10326:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(28736),i=r(98338),o=r(39068),a=function(){var e=(0,i.wh)(),t=e.isLoading,r=e.currentCommunityMember,a=(0,n.Wk)().room;return!t&&(0,o.U8)(r)&&!a}},23259:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var n=r(94184),i=r.n(n),o=r(36589),a=r(85893),s=function(e){var t=e.children,r=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",{className:i()("bg-c-sidebar fixed flex h-full max-h-full flex-col",{"w-sidebar":!r,"w-sidebar-v3":r}),children:t})}},166:(e,t,r)=>{"use strict";r.d(t,{Gf:()=>s,RE:()=>l});var n=r(16765),i=r(28934),o=r(38503),a=function(){var e,t,r,i=(0,o.TC)(),a=i.customColors,s=i.isCustomTheme,l=i.currentTheme,c=i.currentAppearance,u=(null===(e=a[c])||void 0===e?void 0:e.sidebar_background_color)||"#fff",d=(null===o.v||void 0===o.v||null===(t=o.v[l])||void 0===t||null===(r=t[c])||void 0===r?void 0:r["--color-community-sidebar-background"])||"#fff";return s?(0,n.Vi)(u):(0,n.Vi)(d)},s=function(){var e=a().toHex();return(0,i.W)()?{backgroundColor:e}:{}},l=function(){var e,t=(e=a()).isDark()?e.lighten(.1).toHex():e.darken(.1).toHex();return(0,i.W)()?{borderColor:t}:{}}},12510:(e,t,r)=>{"use strict";r.d(t,{lV:()=>s,Bb:()=>l,zo:()=>c});var n=r(86013),i=r(98338),o="space_access_management",a=function(e,t){return t&&"private"===e?(0,n.t)([o,"tooltip_icon.private"]):t&&"secret"===e?(0,n.t)([o,"tooltip_icon.secret"]):(0,n.t)([o,"tooltip_icon.open"])},s=function(e){return{id:e.id,name:e.name,icon:(t=e.visibility,r=e.is_private,r&&"private"===t?"16-lock":r&&"secret"===t?"16-eye-closed":"16-members-bis"),tooltipText:a(e.visibility,e.is_private)};var t,r},l=function(e){return{id:e.id,name:e.name,spaces:[]}},c=function(e){var t=e.serializeSpaceGroup,r=e.serializeSpace,n=(0,i.nT)(),o=n.records,a=n.isLoading,s=(0,i.e2)(),l=s.records,c=s.isLoading,u=[],d={},p={};return l.forEach((function(e){var r=t(e);u.push(r),d[e.id]=r})),o.forEach((function(e){var t,n=r(e);null===(t=d[e.space_group_id])||void 0===t||t.spaces.push(n),p[n.id]=n})),{options:u,spaceGroupIndex:d,spaceIndex:p,spaceRecords:o,spaceGroupRecords:l,isLoading:a||c}}},13359:(e,t,r)=>{"use strict";r.d(t,{i:()=>se});var n=r(67294),i=r(86013),o=r(1712),a=r(85893);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(94184),u=r.n(c),d=r(87536),p="space_access_management",f=function(e){e()};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,n.createContext)(null);h.displayName="SpaceAccessManagementContext";var v=function(e){var t=e.options,r=e.children,i=e.parentFieldName,o=void 0===i?"space_group_ids":i,s=e.childFieldName,l=void 0===s?"space_ids":s,c=e.notRemovableParentItemTooltip,u=e.notRemovableParentIds,p=e.notRemovableChildItemTooltip,f=e.notRemovableChildIds,b=(0,d.Gc)(),v=b.watch,y=b.setValue,g={spaceGroups:(0,d.Dq)({name:o,shouldUnregister:!1}),spaces:(0,d.Dq)({name:l,shouldUnregister:!1})},_=m((0,n.useState)(""),2),x=_[0],j=_[1],w=v(o),O=v(l),S=function(e){return-1!==e.trim().toLowerCase().search(x.trim().toLowerCase())},P={options:t,parentFieldName:o,childFieldName:l,fieldArrayFields:g,spaceGroupsSelected:w,spacesSelected:O,addSpaceGroups:function(e){g.spaceGroups.append(e)},addSpaces:function(e){g.spaces.append(e)},removeSpaceGroup:function(e){var t=w.findIndex((function(t){return t===e}));-1!==t&&g.spaceGroups.remove(t)},removeSpaces:function(e){var t=O.filter((function(t){return!e.includes(t)}));y(l,t)},isSpaceGroupSelected:function(e){return w.includes(e)},isSpaceSelected:function(e){return O.includes(e)},searchText:x,setSearchText:j,getIsFromSearch:S,getHasAnySearchResults:function(){return t.some((function(e){return S(e.name)||e.spaces.some((function(e){return S(e.name)}))}))},hasSpaceGroupUnselectedSpaces:function(e){return e.spaces.some((function(e){return!O.includes(e.id)}))},notRemovableParentItemTooltip:c,notRemovableParentIds:u,notRemovableChildItemTooltip:p,notRemovableChildIds:f,isSpaceGroupRemovable:function(e){return!u||-1===u.indexOf(e)},isSpaceRemovable:function(e){return!f||-1===f.indexOf(e)},areAllSpacesAndSpaceGroupsRemovable:function(){return!u&&!f||0===(null===u||void 0===u?void 0:u.length)&&0===(null===f||void 0===f?void 0:f.length)}};return(0,a.jsx)(h.Provider,{value:P,children:r})},y=function(){var e=(0,n.useContext)(h);if(!e)throw new Error("useSpaceManagementContext must be used within a SpaceManagementContextProvider");return e},g=r(8246),_=function(){return(0,a.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 px-6 py-12 text-center",children:[(0,a.jsx)(g.Z.TitleSm,{weight:"semibold",color:"text-selector-active",children:(0,i.t)([p,"empty_result.title"])}),(0,a.jsx)(g.Z.LabelSm,{color:"text-selector-active",children:(0,i.t)([p,"empty_result.subtitle"])})]})},x=function(e){var t=e.children,r=e.isDisabled,n=void 0!==r&&r,i=e.onClick,o=e.className,s=void 0===o?"":o,l=Boolean(i);return(0,a.jsx)("li",{className:u()("group",s),children:(0,a.jsx)("button",{type:"button",className:u()("flex w-full list-none items-center justify-between rounded-md p-2 text-sm transition-colors md:px-4",{"hover:bg-tertiary group-focus-within:bg-tertiary cursor-pointer":!n&&l,"cursor-default opacity-50":n}),onClick:function(){!n&&(null===i||void 0===i||i())},children:t})})},j=r(81786),w=function(e){var t=e.actionText,r=void 0===t?(0,i.t)("add"):t,n=e.isDisabled,o=void 0!==n&&n;return(0,a.jsx)(j.z,{type:"button",small:!0,variant:"text",className:u()("hidden opacity-0 transition-opacity",{"focus:opacity-100 group-hover:opacity-100 md:block":!o}),children:r})},O=r(18605),S=r(94281),P=function(e){var t=e.children;return(0,a.jsx)("span",{className:"flex items-center gap-2 text-left","data-testid":"space-list-title",children:t})},k=function(e){var t=e.icon,r=void 0===t?void 0:t,n=e.tooltipText,i=void 0===n?void 0:n,o=e.children;return(0,a.jsxs)(P,{children:[(0,a.jsxs)("span",{className:"flex h-4 w-4",children:[r&&i&&(0,a.jsx)(S.T,{className:"flex",placement:"top",delay:300,content:i,interactive:!1,children:(0,a.jsx)(O.JO,{type:r,size:16,className:"text-default"})}),r&&!i&&(0,a.jsx)(O.JO,{type:r,size:16,className:"text-default"})]}),o]})},C=function(e){var t=e.isRemovable,r=e.isNotRemovableTooltip,n=e.children;return t?(0,a.jsx)(a.Fragment,{children:n}):(0,a.jsx)(S.T,{className:"flex",placement:"top",delay:300,content:r,interactive:!1,children:n})},N=function(e){var t=e.space,r=e.spaceGroupId,n=e.onAddChild,i=void 0===n?function(e){e()}:n,o=e.onRemoveChild,a=void 0===o?function(e){e()}:o,s=t.id,l=t.name,c=y(),u=c.isSpaceSelected,d=c.addSpaces,p=c.getIsFromSearch,f=c.removeSpaceGroup,m=c.removeSpaces,b=c.notRemovableChildItemTooltip,h=c.isSpaceRemovable,v=u(s),g=function(){d(s)},_=p(l),x=h(s),j=function(){f(r),m([s])};return{isChecked:v,isSpaceFound:_,onAddClick:function(){i(g,t)},isRemovable:x,isNotRemovableTooltip:b,onRemoveClick:function(){a(j,t)}}},I=["spaceGroupId","onRemoveChild"];function A(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var E=function(e){var t=e.spaceGroupId,r=e.onRemoveChild,n=void 0===r?function(e){e()}:r,o=A(e,I),s=o.name,l=o.icon,c=o.tooltipText,d=N({space:o,spaceGroupId:t,onRemoveChild:n}),f=d.isChecked,m=d.isSpaceFound,b=d.isRemovable,h=d.isNotRemovableTooltip,v=d.onRemoveClick;return(0,a.jsxs)(x,{className:u()({hidden:!f||!m}),isDisabled:!f||!b,onClick:f&&b?v:void 0,children:[(0,a.jsx)(C,{isRemovable:b,isNotRemovableTooltip:h,children:(0,a.jsx)(k,{icon:l,tooltipText:c,children:(0,a.jsx)(g.Z.LabelSm,{children:s})})}),f&&b&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"remove"])})]})},D=function(e){var t=e.spaceGroup,r=e.onAddParent,n=void 0===r?function(e){e()}:r,i=e.onRemoveParent,o=void 0===i?function(e){e()}:i,a=t.id,s=t.name,l=t.spaces,c=y(),u=c.isSpaceGroupSelected,d=c.isSpaceSelected,p=c.addSpaceGroups,f=c.addSpaces,m=c.getIsFromSearch,b=c.removeSpaceGroup,h=c.removeSpaces,v=c.notRemovableParentItemTooltip,g=c.isSpaceGroupRemovable,_=m(s)||l.some((function(e){return m(e.name)})),x=l.map((function(e){return e.id})),j=function(){p(a);var e=x.filter((function(e){return!d(e)}));f(e)},w=(l||[]).filter((function(e){return d(e.id)})),O=u(a),S=O&&w.length===l.length,P=function(){b(a),h(x)};return{isChecked:O,isFromSearch:_,isAllSpacesSelected:S,spacesAlreadySelected:w,onAddClick:function(){return n(j,t)},isRemovable:g(a),isNotRemovableTooltip:v,onRemoveClick:function(){o(P,t)}}},T=["onRemoveParent"];function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M=function(e){var t=e.onRemoveParent,r=void 0===t?function(e){e()}:t,n=L(e,T),o=n.name,s=D({spaceGroup:n,onRemoveParent:r}),l=s.isChecked,c=s.isFromSearch,d=s.isAllSpacesSelected,f=s.spacesAlreadySelected,m=s.isRemovable,b=s.isNotRemovableTooltip,h=s.onRemoveClick,v=!l&&0===f.length||!c,y=l&&d?(0,i.t)("space_access_management.list.spaces_counter.all_spaces"):(0,i.t)("space_access_management.list.spaces_counter",{count:f.length});return(0,a.jsxs)(x,{className:u()({hidden:v}),isDisabled:!l||!m,onClick:l&&m?h:void 0,children:[(0,a.jsx)(C,{isRemovable:m,isNotRemovableTooltip:b,children:(0,a.jsx)(P,{children:(0,a.jsxs)(g.Z.LabelSm,{weight:"semibold",children:[o,(0,a.jsx)("span",{className:"font-normal",children:y})]})})}),l&&m&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"remove"])})]})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=r(54030),z=function(e){var t=e.spaceGroupId,r=e.space,n=e.onAddChild,i=void 0===n?function(e){e()}:n,s=e.onRemoveChild,l=void 0===s?function(e){e()}:s,c=r.name,d=r.icon,p=r.tooltipText,f=N({space:r,spaceGroupId:t,onAddChild:i,onRemoveChild:l}),m=f.onRemoveClick,b=f.onAddClick,h=f.isChecked,v=f.isSpaceFound,y=h?m:b;return(0,a.jsxs)(x,{className:u()({hidden:!v}),isDisabled:!1,onClick:y,children:[(0,a.jsx)(k,{icon:d,tooltipText:p,children:(0,a.jsx)(g.Z.LabelSm,{children:c})}),(0,a.jsx)(o.r,{as:"span",checked:h})]})},V=function(e){var t=e.isToggleEnabled,r=void 0===t||t,n=e.spaceGroup,i=e.onAddParent,s=void 0===i?function(e){e()}:i,l=e.onRemoveParent,c=void 0===l?function(e){e()}:l,d=n.name,p=D({spaceGroup:n,onAddParent:s,onRemoveParent:c}),f=p.isChecked,m=p.onAddClick,b=p.onRemoveClick,h=p.isFromSearch,v=f?b:m;return(0,a.jsxs)(x,{className:u()({hidden:!h}),isDisabled:!r,onClick:v,children:[(0,a.jsx)(P,{children:(0,a.jsx)(g.Z.LabelSm,{weight:"semibold",children:d})}),r&&(0,a.jsx)(o.r,{as:"span",checked:f})]})},q=r(4977),Z=["topicsCountEnabled","onAddChild","spaceGroupId"];function G(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var W=function(e){var t=e.topicsCountEnabled,r=void 0!==t&&t,n=e.onAddChild,o=void 0===n?function(e){e()}:n,s=e.spaceGroupId,l=G(e,Z),c=l.name,d=l.icon,f=l.topicsCount,m=l.tooltipText,b=N({onAddChild:o,space:l,spaceGroupId:s}),h=b.isChecked,v=b.isSpaceFound,y=b.onAddClick;return(0,a.jsx)(a.Fragment,{children:r&&f&&f>=q.tt?(0,a.jsx)(S.T,{content:(0,i.t)("settings.topics.space_management.topics_limit_reached"),interactive:!1,children:(0,a.jsx)(x,{isDisabled:!0,className:u()({hidden:h||!v}),children:(0,a.jsx)(k,{icon:d,tooltipText:m,children:(0,a.jsx)(g.Z.LabelSm,{children:c})})})}):(0,a.jsxs)(x,{isDisabled:h,onClick:y,className:u()({hidden:h||!v}),children:[(0,a.jsx)(k,{icon:d,tooltipText:m,children:(0,a.jsx)(g.Z.LabelSm,{children:c})}),!h&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"add"])})]})})},H=["isButtonEnabled","onAddParent"];function Q(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var J=function(e){var t=e.isButtonEnabled,r=void 0===t||t,n=e.onAddParent,o=void 0===n?function(e){e()}:n,s=Q(e,H),l=s.name,c=D({spaceGroup:s,onAddParent:o}),d=c.isChecked,f=c.onAddClick,m=c.isFromSearch,b=c.isAllSpacesSelected;return(0,a.jsxs)(x,{isDisabled:d||!r,onClick:f,className:u()({hidden:d&&b||!m}),children:[(0,a.jsx)(P,{children:(0,a.jsx)(g.Z.LabelSm,{weight:"semibold",children:l})}),!d&&r&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"add"])})]})};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y="space_access_management",ee=function(e){var t=e.title,r=void 0===t?(0,i.t)([Y,"no_access"]):t,n=e.actionText,o=void 0===n?(0,i.t)([Y,"add_all"]):n,s=e.shouldShowButton,l=void 0===s||s,c=e.onClick;return(0,a.jsxs)("div",{className:"flex w-full items-center justify-between px-6 py-5",children:[(0,a.jsx)(g.Z.LabelXxs,{weight:"semibold",color:"text-light",children:r}),l&&(0,a.jsx)(j.z,{type:"button",variant:"text",small:!0,onClick:function(){null===c||void 0===c||c()},className:"ring-secondary focus:ring-1",children:o})]})},te=function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("md:bg-primary md:divide-primary md:divide-y",r),children:t})},re=["children","className"];function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var se=Object.assign((function(e){var t=e.children,r=e.className,n=ae(e,re);return(0,a.jsx)(v,ie(ie({},n),{},{children:(0,a.jsx)(te,{className:u()("border-primary flex flex-col overflow-hidden md:rounded-lg md:border",r),children:t})}))}),{Header:function(e){var t=e.children;return(0,a.jsx)("div",{className:"focus-within:ring-secondary bg-primary border-primary mb-4 flex justify-between rounded-lg border px-3 py-2 focus-within:ring-1 focus-within:ring-inset md:mb-0 md:rounded-none md:rounded-t-lg md:border-0 md:px-6 md:py-3.5",children:t})},SearchBar:function(){var e=y(),t=e.setSearchText,r=e.searchText;return(0,a.jsxs)("div",{className:"text-default flex w-full items-center gap-3",children:[(0,a.jsx)("span",{className:"flex h-4 w-4",children:(0,a.jsx)(O.JO,{type:"16-search",size:16,className:"text-default"})}),(0,a.jsx)("input",{className:"md:bg-primary placeholder:text-light w-full border-0 bg-inherit p-0 text-sm leading-none outline-none placeholder:opacity-100 focus:ring-0",type:"text",placeholder:(0,i.t)([p,"search"]),onChange:function(e){t(e.target.value)},value:r,autoFocus:!0}),r.length>0&&(0,a.jsx)("span",{className:"flex h-4 w-4",children:(0,a.jsx)(O.JO,{type:"16-close",size:16,className:"text-default cursor-pointer",onClick:function(){t("")}})})]})},AllAccessToggle:function(){var e="all_access_enabled",t=s((0,n.useState)(!1),2),r=t[0],l=t[1],c=function(){l((function(e){return!e}))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",name:e,id:"checkbox-".concat(e),checked:r,onChange:c,className:"hidden"}),(0,a.jsxs)("label",{className:"m-0 flex cursor-pointer select-none items-center gap-3",htmlFor:"checkbox-".concat(e),children:[(0,a.jsx)("span",{className:"text-default text-sm tracking-tighter",children:(0,i.t)(["space_access_management","all_access"])}),(0,a.jsx)(o.r,{as:"span",checked:r,onChange:c})]})]})},Body:function(e){var t=e.children,r=e.className;return(0,y().getHasAnySearchResults)()?(0,a.jsx)("div",{className:u()("flex w-full flex-auto flex-col overflow-hidden",r),children:t}):(0,a.jsx)(_,{})},ListHeader:function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("divide-primary border-primary bg-primary sticky top-0 z-10 hidden divide-x md:flex md:border-b",r),children:t})},ListHeaderColumn:ee,ListHeaderColumnNoAccess:function(e){var t=e.title,r=void 0===t?(0,i.t)([p,"no_access"]):t,n=e.shouldShowAddAllButton,o=void 0===n||n,s=e.onAddAll,l=y(),c=l.options,u=l.parentFieldName,m=l.childFieldName,b=(0,d.Gc)().setValue,h=[],v=[];c.forEach((function(e){h.push(e.id),e.spaces.forEach((function(e){v.push(e.id)}))}));var g=function(){b(u,h),b(m,v)};return(0,a.jsx)(ee,{title:r,actionText:(0,i.t)([p,"add_all"]),onClick:function(){(s||f)(g)},shouldShowButton:o})},ListHeaderColumnAccessGranted:function(e){var t=e.title,r=void 0===t?(0,i.t)([p,"access"]):t,n=e.onRemoveAll,o=void 0===n?function(e){e()}:n,s=y(),l=s.parentFieldName,c=s.childFieldName,u=s.areAllSpacesAndSpaceGroupsRemovable,m=(0,d.Gc)().setValue,b=function(){m(l,[]),m(c,[])},h=u();return(0,a.jsx)(ee,{title:r,actionText:(0,i.t)([p,"remove_all"]),shouldShowButton:h,onClick:h?function(){(o||f)(b)}:void 0})},List:function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,a.jsx)("ul",{className:u()("list-none py-2 md:p-2",r),"data-testid":n,children:t})},ListContainer:function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("md:divide-primary md:grid md:flex-auto md:grid-cols-2 md:divide-x",r),children:t})},ListNoAccess:function(e){var t=e.shouldShowAddParentButton,r=void 0===t||t,n=e.shouldShowEmptySpaceGroups,i=e.onAddParent,o=e.onAddChild,s=e.className,l=y(),c=l.options,d=l.hasSpaceGroupUnselectedSpaces;return(0,a.jsx)(se.List,{className:u()("hidden md:block",s),dataTestId:"list-space-access-denied",children:c.map((function(e){return d(e)||n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,$({onAddParent:null!==i&&void 0!==i?i:f,isButtonEnabled:r},e),"list-no-access-".concat(e.id)),e.spaces.map((function(t){return(0,a.jsx)(W,$({onAddChild:null!==o&&void 0!==o?o:f,spaceGroupId:e.id,topicsCountEnabled:!0},t),"list-no-access-".concat(e.id,"-").concat(t.id))}))]}):null}))})},ListAccessGranted:function(e){var t=e.onRemoveParent,r=e.onRemoveChild,n=e.className,i=y().options;return(0,a.jsx)(se.List,{className:u()("hidden md:block",n),dataTestId:"list-space-access-granted",children:i.map((function(e){var n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M,B(B({},e),{},{onRemoveParent:t||f}),"list-access-granted_".concat(e.id)),null===(n=e.spaces)||void 0===n?void 0:n.map((function(t){return(0,a.jsx)(E,B(B({},t),{},{spaceGroupId:e.id,onRemoveChild:r||f}),"list-access-granted_".concat(e.id,"-").concat(t.id))}))]})}))})},ListMobile:function(e){var t=e.shouldShowAddParentToggle,r=void 0===t||t,i=e.onAddParent,o=e.onAddChild,s=e.onRemoveParent,l=e.onRemoveChild,c=y().options;return(0,F.Be)()?null:(0,a.jsx)(se.List,{className:"md:hidden",children:c.map((function(e){return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(V,{isToggleEnabled:r,spaceGroup:e,onAddParent:i,onRemoveParent:s},"list-mobile-".concat(e.id)),e.spaces.map((function(t){return(0,a.jsx)(z,{spaceGroupId:e.id,space:t,onAddChild:o,onRemoveChild:l},"list-mobile-".concat(e.id,"-").concat(t.id))}))]},e.id)}))})},EmptyResult:_})},83333:(e,t,r)=>{"use strict";r.d(t,{M:()=>i,n:()=>o});var n=r(86013),i=[{value:"all",label:(0,n.t)("notification_settings.all.label"),description:(0,n.t)("notification_settings.all.description")},{value:"mentions",label:(0,n.t)("notification_settings.mentions.label"),description:(0,n.t)("notification_settings.mentions.description")},{value:"never",label:(0,n.t)("notification_settings.never.label"),description:(0,n.t)("notification_settings.never.description")}],o=[{value:"all",label:(0,n.t)("member_notification_settings.all.label"),description:(0,n.t)("member_notification_settings.all.description")},{value:"mentions",label:(0,n.t)("member_notification_settings.mentions.label"),description:(0,n.t)("member_notification_settings.mentions.description")},{value:"never",label:(0,n.t)("member_notification_settings.never.label"),description:(0,n.t)("member_notification_settings.never.description")}]},62034:(e,t,r)=>{"use strict";r.d(t,{_$:()=>x,B_:()=>g,z1:()=>a});var n=r(88767),i=r(81089),o=r(50732),a=function(e){var t=e.space,r=void 0===t?{}:t,a=e.options,s=void 0===a?{}:a,l=o.av.spaces.update({id:r.id});return(0,n.useMutation)((function(e){return(0,i.aU)(l,{space:e})}),s)},s=r(64687),l=r.n(s),c=r(86013),u=r(23560),d=r.n(u),p=r(43990),f=r(98338),m=r(90789),b=r(59256),h=r(69647);function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))}}var g=function(e){var t,r=e.space,a=e.setOpenNotificationsDropdown,s=void 0===a?function(){}:a,u=r.name,v=r.id,g=(0,n.useQueryClient)(),_=(0,f.wh)(),x=_.currentUser,j=_.currentCommunityMember,w=(0,f.T4)({spaceId:v}).refetch,O=(0,f.e2)().actions.refresh,S=(0,f.nT)().actions.refresh,P=(0,p.m)(r.chat_room_uuid).refetchChatRoom,k=(0,b.u)(r.chat_room_uuid).refetchChatParticipants,C=(0,h.p)(),N=C.success,I=C.error,A=(0,n.useMutation)((function(){return(0,i.Cu)(o.av.spaceMembers.joinSpace({spaceId:v}))}),{onSuccess:(t=y(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:O(),S(),g.invalidateQueries(["spaces"]),(0,m.Ug)(r)&&(P(),k()),N((0,c.t)("joined_space",{space_name:r.name})),null!==j&&void 0!==j&&j.profile_confirmed_at?d()(s)&&s(!0):window.location.href=(0,o.lk)({params:{return_to:window.location.href,new_state:!0}});case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onError:function(e){I(e.message||(0,c.t)("join_space_failed",{space_name:u}))}}),E=function(){var e=y(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=4;break}window.location.href=(0,o.j)(),e.next=5;break;case 4:return e.abrupt("return",A.mutateAsync());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{joinSpace:E,isSubmitting:A.isLoading}},_=r(30867),x=function(){return(0,_.p)()}},36044:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(38503),i=r(9951),o=r(85893),a=function(e){var t=e.spaces,r=e.valueKey,a=void 0===r?"slug":r,s=(0,n.TC)().currentAppearance;return t.map((function(e){var t=e.name;return{richLabel:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.S,{className:"mr-1 inline !h-5 !w-5 align-text-top",emoji:e.emoji,appearance:s,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url}),(0,o.jsx)("span",{children:e.name})]}),label:t,value:e[a]}}))}},52494:(e,t,r)=>{"use strict";r.d(t,{AO:()=>P,NA:()=>k,y4:()=>N,cy:()=>C});var n=r(67294),i=r(86013),o=r(88767),a=r(34334),s=r(85239),l=r(50732),c=r(35639),u=r(69647),d=["data","isLoading","isError","error","refetch"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=(0,c.R)().liveStreamsHlsEnabled?s.VM.HLS_SPECTATOR:s.VM.SPECTATOR,r=(0,u.p)(),h=r.error,v=r.success,y=b((0,n.useState)(null),2),g=y[0],_=y[1],x=b((0,n.useState)(null),2),j=x[0],w=x[1],O=(0,o.useQuery)(l.av.liveStreams.show({id:e}),{refetchInterval:!g&&1e4}),S=O.data,P=O.isLoading,k=O.isError,C=O.error,N=O.refetch,I=m(O,d),A=b((0,n.useState)(!1),2),E=A[0],D=A[1],T=(0,o.useMutation)((function(e){return a.Qk.join({id:null===S||void 0===S?void 0:S.id,role:e,forReactQuery:!0})}),{onSuccess:function(e){_(e)},onError:function(e){var t=e.firstErrorDetail?"".concat((0,i.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,i.t)("live_streams.room.join_error"),".");h(t)}}),L=(0,o.useMutation)((function(){return a.Qk.leave({id:null===S||void 0===S?void 0:S.id,participantId:null===g||void 0===g?void 0:g.id,forReactQuery:!0})}),{onSuccess:function(e){return _(e)},onError:function(){return h((0,i.t)("live_streams.room.leave_error"))}}),M=(0,o.useMutation)((function(){return a.Qk.goLive({id:null===S||void 0===S?void 0:S.id,forReactQuery:!0})}),{onSuccess:function(){return N()},onError:function(){return h((0,i.t)("live_streams.room.go_live_error"))}}),R={onSuccess:function(){v((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".end_success"))),D(!0),N()},onError:function(){return h((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".end_error")))}},B=(0,o.useMutation)((function(){return a.Qk.endStream({id:null===S||void 0===S?void 0:S.id})}),R),U=(0,o.useMutation)((function(){return a.Qk.endStreamDelayed({id:null===S||void 0===S?void 0:S.id})}),R),F=(0,o.useMutation)((function(e){return a.Qk.update({id:null===S||void 0===S?void 0:S.id,formData:e})}),{onSuccess:function(){N(),v((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".update_success")),{duration:"short",shouldUseProgress:!1})},onError:function(){return h((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".update_error")))}});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({room:S,isLoading:P,isError:k,apiError:C,joinAsHost:function(){return T.mutate(s.VM.HOST)},joinAsParticipant:function(){return T.mutate(t)},isJoining:T.isLoading,currentParticipant:g,updateRoom:F.mutate,updateRoomAsync:F.mutateAsync,goLive:M.mutate,goLiveAsync:M.mutateAsync,leave:L.mutate,leaveAsync:L.mutateAsync,endStream:B.mutate,endStreamDelayed:U.mutate,endStreamDelayedAsync:U.mutateAsync,onEndStream:function(e){v(e),D(!0),N()},isLeaving:L.isLoading,refetchRoom:N,streamEnded:(0,s.UT)(S)||E,viewTypeOverride:j,setViewTypeOverride:w},I)},y=r(24185);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=r(85893),S=(0,n.createContext)({});S.displayName="LiveStreamContext";var P=function(e){var t=e.children,r=(0,y.UO)().roomSlug,c=v(r),d=c.room,p=c.isLoading,f=c.isError,m=c.apiError,b=c.joinAsHost,h=c.joinAsParticipant,g=c.isJoining,x=c.currentParticipant,w=c.updateRoom,P=c.updateRoomAsync,k=c.goLive,C=c.goLiveAsync,N=c.leave,I=c.leaveAsync,A=c.endStream,E=c.endStreamDelayed,D=c.endStreamDelayedAsync,T=c.onEndStream,L=c.isLeaving,M=c.refetchRoom,R=c.streamEnded,B=c.viewTypeOverride,U=c.setViewTypeOverride,F=function(e){var t=(0,u.p)().error,r=j((0,n.useState)(null),2),s=r[0],l=r[1],c=j((0,n.useState)(null),2),d=c[0],p=c[1],f=(0,o.useMutation)((function(t){return p(t),a.Qk.createRecorder({id:null===e||void 0===e?void 0:e.id,recording_key:t})}),{onSuccess:function(e){return l(e)},onError:function(e){var r=e.firstErrorDetail?"".concat((0,i.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,i.t)("live_streams.room.join_error"),".");t(r)}});return{createRecorder:f.mutate,isCreatingRecorder:f.isLoading,recorder:s&&_(_({},s),{},{recording_key:d})}}(d),z=F.recorder,V=F.createRecorder,q=F.isCreatingRecorder,Z=function(e,t,r){var i={status:s.wA.ACTIVE,per_page:2e3};null!==r&&void 0!==r&&r.recording_key&&(i.recording_key=r.recording_key);var a=(0,o.useQuery)(l.av.liveStreams.participants({roomId:null===e||void 0===e?void 0:e.id,params:i}),{enabled:!!t||!!r}),c=a.data,u=a.isLoading,d=a.refetch,p=null===c||void 0===c?void 0:c.records;return{participants:(0,n.useMemo)((function(){return null===p||void 0===p?void 0:p.reduce((function(e,t){return e[t.id]=t,e}),{})}),[p]),isLoadingParticipants:u,refetchParticipants:d,roles:{host:[null===e||void 0===e?void 0:e.creator.id],moderator:null===p||void 0===p?void 0:p.filter((function(e){return"moderator"===e.role})).map((function(e){return e.community_member_id}))}}}(d,x,z),G=Z.participants,W=Z.isLoadingParticipants,H=Z.refetchParticipants,Q={status:{isLoadingRoom:p,isLoadingParticipants:W,isRoomError:f,apiError:m,isJoining:g,isCreatingRecorder:q,isLeaving:L,streamEnded:R},data:{room:d,recorder:z,participants:G,roles:Z.roles,canHost:!!d&&d.can_host,currentParticipant:x,viewTypeOverride:B,isConferenceRoom:(0,s.$e)(d)},actions:{joinAsHost:b,joinAsParticipant:h,createRecorder:V,updateRoom:w,updateRoomAsync:P,goLive:k,goLiveAsync:C,leave:N,leaveAsync:I,endStream:A,endStreamDelayed:E,endStreamDelayedAsync:D,onEndStream:T,refetchRoom:M,refetchParticipants:H,setViewTypeOverride:U}};return(0,O.jsx)(S.Provider,{value:Q,children:"function"===typeof t?t(Q):t})},k=function(){return(0,n.useContext)(S)},C=function(){return k().data},N=function(){return k().actions}},68921:(e,t,r)=>{"use strict";r.d(t,{G:()=>N,Y:()=>I});var n=r(67294),i=r(96486),o=r(87536),a=r(88767),s=r(13051),l=r(30848),c=r(36891),u=r(3852),d=r(42550),p=r(56031),f=r(28524);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={disablePayButton:!1,existingAccount:!1,message:"",type:""},_=function(e){var t=e.isMemberAddressRequired,r=e.isTaxIdMandatory,i=e.paywall,m=e.isMemberWithSavedPaymentMethods,h=(0,o.Gc)(),y=h.watch,_=h.setValue,x=h.setError,j=v((0,n.useState)(!1),2),w=j[0],O=j[1],S=v((0,n.useState)("card"),2),P=S[0],k=S[1],C=v((0,n.useState)(!1),2),N=C[0],I=C[1],A=v((0,n.useState)(g),2),E=A[0],D=A[1],T=v((0,n.useState)(null),2),L=T[0],M=T[1],R=v((0,n.useState)(!1),2),B=R[0],U=R[1],F=v((0,n.useState)(0),2),z=F[0],V=F[1],q=v((0,n.useState)(!1),2),Z=q[0],G=q[1];(0,n.useEffect)((function(){E.existingAccount&&x("email",{type:"duplicated"})}),[x,E]);var W=(0,a.useMutation)((function(e){return s.k.preview(e)})),H=y(),Q=H.paywall_price_id,J=H.payment_method_type,K=(0,n.useCallback)((function(){var e=y(),t=e.community_id,r=e.paywall_price_id,n=e.community_member_billing_info_attributes,i=e.coupon_code,o=e.coupon_code_applied,a=e.payment_method_type,s={queryParams:{community_id:t,paywall_price_id:r,community_member_billing_info_attributes:n,coupon_code:i,coupon_code_applied:o},shouldIgnoreCommunityMember:(0,d.kh)(a),locale:(0,u.cm)()};W.mutate(s,{onSuccess:function(e){D(g),V(e.amount_due_now),G(e.free_forever)},onError:function(e){console.error(e),o&&_("coupon_code_applied",!1),D({message:e.message,type:"danger",disablePayButton:!0})}})}),[_,D,W]);(0,n.useEffect)((function(){K()}),[Q,J]);var $=(0,n.useCallback)((function(e){_("paywall_price_id",e)}),[_,K]),X=(0,n.useCallback)((function(){var e=y("paywall_price_id");return e?i.prices.find((function(t){return t.id==e})):{trial_enabled:!1}}),[y,i.prices]),Y=function(e,t,r,i){return(0,n.useCallback)((function(n){var o=e().community_member_billing_info_attributes,a=(o=void 0===o?{}:o).address_country,s=void 0===a?"":a,l=n.value,c=n.complete,u=l.name,d=l.address,p=d.line1,f=d.line2,m=d.city,b=d.state,h=d.postal_code,v=d.country;t("name",u),t("community_member_billing_info_attributes[address_line1]",p),t("community_member_billing_info_attributes[address_line2]",f),t("community_member_billing_info_attributes[address_city]",m),t("community_member_billing_info_attributes[address_state]",b),t("community_member_billing_info_attributes[address_postal_code]",h),t("community_member_billing_info_attributes[address_country]",v),s!==v&&(t("community_member_billing_info_attributes[tax_id_type]",""),t("community_member_billing_info_attributes[tax_id_value]",""));var y=!r||c;t("community_member_billing_info_address_attributes_complete",y),y&&i()}),[r,t,e,i])}(y,_,t,K),ee=(0,n.useCallback)((function(e){var t=e||y().coupon_code||"";_("coupon_code",t.toUpperCase()),_("coupon_code_applied",!0),K()}),[y,_,K]),te=(0,n.useCallback)((function(){_("coupon_code",""),_("coupon_code_applied",!1),G(!1),K()}),[_,K]),re=v((0,n.useState)(r),2),ne=re[0],ie=re[1],oe=(0,n.useCallback)((function(){return ie(!0)}),[ie]),ae=v((0,n.useState)(),2),se=ae[0],le=ae[1],ce=(0,n.useCallback)((function(){se&&(clearTimeout(se),le(void 0))}),[se,le]);(0,n.useEffect)((function(){var e=y((function(e,t){if("community_member_billing_info_attributes[tax_id_value]"===t.name){var r=e.community_member_billing_info_attributes.tax_id_type,n=e.community_member_billing_info_attributes.tax_id_value;(0,l.V$)(r,n)&&(ce(),le(setTimeout((function(){K()}),250)))}}));return function(){e.unsubscribe(),ce()}}),[y,K,ce,le]);var ue=X(),de=(0,p.zh)(i),pe=function(e,t,r,n,i,o,a){var s=(0,f.wh)().currentCommunitySettings,l=(s=void 0===s?{}:s).paywalls_3ds_auth_enabled,c=(!t.trial_enabled||t.trial_requires_upfront_payment||e.trial_requires_card)&&(0,d.F_)(r)&&!a,u=!c||n,p=t.trial_enabled&&(0,d.F_)(r)&&e.trial_requires_card&&!t.trial_requires_upfront_payment;return{isCardInfoRequired:c,isCardInfoValid:u,isSetupIntentRequired:!l||!i&&p||i&&!o,arePostCreateActionsRequired:l}}(i,ue,J,N,m,w,Z),fe=pe.isCardInfoRequired,me=pe.isCardInfoValid,be=pe.isSetupIntentRequired,he=pe.arePostCreateActionsRequired;return{applyCouponCode:ee,clearCouponCode:te,enableTaxIdCollection:oe,getSelectedPrice:X,isTaxIdCollectionEnabled:ne,paymentError:E,previewMutation:W,setMemberAddressAttributes:Y,setPaymentError:D,setSelectedPrice:$,isCardInfoComplete:N,setIsCardInfoComplete:I,isCardInfoValid:me,isPaywallActive:de,isCardInfoRequired:fe,isSetupIntentRequired:be,arePostCreateActionsRequired:he,handleError:function(e){D(b(b({},c.JV),e))},isProcessingPayment:B,setIsProcessingPayment:U,amountDue:z,stripePaymentMethodType:P,setStripePaymentMethodType:k,isMemberUsingSavedPaymentMethod:w,setIsMemberUsingSavedPaymentMethod:O,paywallFailure:L,setPaywallFailure:M}},x=r(85893),j=["applyCouponCode","clearCouponCode","enableTaxIdCollection","getSelectedPrice","isTaxIdCollectionEnabled","paymentError","previewMutation","setMemberAddressAttributes","setPaymentError","setSelectedPrice","isCardInfoComplete","setIsCardInfoComplete","isCardInfoValid","isPaywallActive","isCardInfoRequired","isSetupIntentRequired","arePostCreateActionsRequired","handleError","isProcessingPayment","setIsProcessingPayment","isMemberUsingSavedPaymentMethod","setIsMemberUsingSavedPaymentMethod"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var k={hasAlreadyPurchased:!1,applyCouponCode:i.noop,checkoutConfirmationUrl:"",children:null,clearCouponCode:i.noop,communityRootUrl:"",areCouponsEnabled:!1,creditCard:{},currentCommunity:{},currentCommunityMember:{},currentUser:{},enableTaxIdCollection:i.noop,getSelectedPrice:function(){return{trial_enabled:!1}},isMemberAddressRequired:!1,memberBillingInfo:{},isTaxIdCollectionEnabled:!1,loginUrl:"",resetPasswordUrl:"",paymentError:g,paywall:{},previewMutation:{},setMemberAddressAttributes:i.noop,setPaymentError:i.noop,setSelectedPrice:i.noop,isCardInfoComplete:!1,setIsCardInfoComplete:i.noop,isCardInfoValid:!1,isPaywallActive:!1,isCardInfoRequired:!1,isSetupIntentRequired:!1,arePostCreateActionsRequired:!1,handleError:i.noop,isProcessingPayment:!1,setIsProcessingPayment:i.noop,amountDue:0,shouldShowTaxIdForm:!1,isTaxIdMandatory:!1,isBrazilianAccountAndProcessorStripeBr:!1,isPaywallDigitalWalletEnabled:!1,stripePaymentMethodType:"card",setStripePaymentMethodType:i.noop,isMemberWithSavedPaymentMethods:!1,isMemberUsingSavedPaymentMethod:!1,setIsMemberUsingSavedPaymentMethod:i.noop,paywallFailure:null,setPaywallFailure:i.noop,paymentMethodsSupported:["card"],setPaymentMethodsSupported:i.noop},C=(0,n.createContext)(k);C.displayName="PaywallCheckoutContext";var N=function(e){var t=e.children,r=e.isMemberAddressRequired,n=e.paywall,i=e.isTaxIdMandatory,o=e.isMemberWithSavedPaymentMethods,a=_({isMemberAddressRequired:r,isTaxIdMandatory:i,paywall:n,isMemberWithSavedPaymentMethods:o}),s=a.applyCouponCode,l=a.clearCouponCode,c=a.enableTaxIdCollection,u=a.getSelectedPrice,d=a.isTaxIdCollectionEnabled,p=a.paymentError,f=a.previewMutation,m=a.setMemberAddressAttributes,b=a.setPaymentError,h=a.setSelectedPrice,v=a.isCardInfoComplete,y=a.setIsCardInfoComplete,g=a.isCardInfoValid,w=a.isPaywallActive,S=a.isCardInfoRequired,N=a.isSetupIntentRequired,I=a.arePostCreateActionsRequired,A=a.handleError,E=a.isProcessingPayment,D=a.setIsProcessingPayment,T=a.isMemberUsingSavedPaymentMethod,L=a.setIsMemberUsingSavedPaymentMethod,M=P(a,j),R=O(O(O({},k),e),{},{applyCouponCode:s,clearCouponCode:l,enableTaxIdCollection:c,getSelectedPrice:u,isTaxIdCollectionEnabled:d,paymentError:p,previewMutation:f,setMemberAddressAttributes:m,setPaymentError:b,setSelectedPrice:h,isCardInfoComplete:v,setIsCardInfoComplete:y,isCardInfoValid:g,isPaywallActive:w,isCardInfoRequired:S,isSetupIntentRequired:N,arePostCreateActionsRequired:I,handleError:A,isProcessingPayment:E,setIsProcessingPayment:D,isMemberUsingSavedPaymentMethod:T,setIsMemberUsingSavedPaymentMethod:L},M);return(0,x.jsx)(C.Provider,{value:R,children:t})},I=function(){return(0,n.useContext)(C)}},21147:(e,t,r)=>{"use strict";r.d(t,{Q_:()=>o,pN:()=>s,EW:()=>l,KN:()=>c,mB:()=>u,vC:()=>d,zi:()=>p,Kz:()=>f});var n=r(77349),i=r(68997),o=Object.freeze({INCOMPLETE:"incomplete",ACTIVE:"active",TRIAL:"trial",PAST_DUE:"past_due",CANCELED:"canceled"}),a=Object.freeze({SUBSCRIPTION:"active",ONETIME:"onetime",INSTALLMENTS:"installments"}),s=function(e){return(null===e||void 0===e?void 0:e.status)===o.TRIAL},l=function(e){return(null===e||void 0===e?void 0:e.status)===o.PAST_DUE},c=function(e){var t;return(null===e||void 0===e||null===(t=e.paywall_price)||void 0===t?void 0:t.price_type)===a.INSTALLMENTS},u=[o.ACTIVE,o.TRIAL,o.PAST_DUE,o.CANCELED],d=[o.ACTIVE,o.TRIAL,o.PAST_DUE],p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=Number(e)>0?Number(e):0;return(0,n.default)(t,r)},f=function(e){return[i.VT.APP_STORE,i.VT.PLAY_STORE].includes(null===e||void 0===e?void 0:e.platform)}},75388:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=Object.freeze({NOT_STARTED:"not_started",ACTIVE:"active",COMPLETED:"completed",RELEASED:"released",CANCELED:"canceled"}),i=function(e){return e.status===n.COMPLETED}},90332:(e,t,r)=>{"use strict";r.d(t,{B$:()=>a,vv:()=>s,MS:()=>l,XG:()=>c,t:()=>u,O4:()=>d,nl:()=>p,Cc:()=>f,Hv:()=>m});var n=r(86013),i=r(27117),o=r(36298),a=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.self_paced},s=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.structured},l=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.scheduled},c=function(e){return l(e)||s(e)},u=function(e){var t=e.drippedAt,r=e.dripDelay;if(e.needsToCompletePreviousLesson)return(0,n.t)("courses.edit.lesson.complete_previous_lesson_tooltip");if(t){var i=d(t);return"".concat((0,n.t)("courses.edit.lesson.available_on_tooltip")," ").concat(i)}var o=p(r),a=f(r),s=m(a,o);return(0,n.t)("courses.edit.lesson.available_after_tooltip",{drip_delay:s})},d=function(e){return(0,o.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},p=function(e){return e%7!==0||0===e?"days":"weeks"},f=function(e){return e%7===0?e/7:e},m=function(e,t){return 0===e?(0,n.t)("courses.edit.sections.drip_schedule.form.immediately"):"".concat(e," ").concat(b(e,t))},b=function(e,t){return(0,n.t)("courses.edit.sections.drip_schedule.form.".concat(t),{count:e})}},79627:(e,t,r)=>{"use strict";r.d(t,{lo:()=>a,tH:()=>s,mI:()=>l});var n=r(96486),i=r(3852),o=function(e,t,r){try{var o=(0,i.Ed)(),a=new Intl.DateTimeFormat(o,r);return(0,n.upperFirst)(a.formatRange(e,t))}catch(s){return s instanceof Error&&console.error("Could not parse date range: ".concat(s.message)),""}},a=function(e,t,r){return o(e,t,{weekday:"long",month:"short",day:"numeric",hour:"numeric",minute:"numeric",timeZone:r})},s=function(e,t,r){return o(e,t,{weekday:"long",hour:"numeric",minute:"numeric",timeZone:r})},l=function(e,t,r){return o(e,t,{hour:"numeric",minute:"numeric",timeZone:r})}},30427:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var n=function(e){return e.memberTags.filter((function(e){return(e.display_locations||{}).member_directory&&e.is_public}))}},73183:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n=function(e){return e>99?"99+":e}},74481:(e,t,r)=>{"use strict";r.d(t,{Q_:()=>i,$1:()=>a,yK:()=>s,_k:()=>l});var n=r(53103),i=Object.freeze({RESTRICTED:"restricted",PENDING:"pending",REJECTED:"rejected",ENABLED:"enabled"}),o=Object.freeze({STRIPE_US:"CommunityPaymentProcessors::StripeUnitedStates",STRIPE_BR:"CommunityPaymentProcessors::StripeBrazil",REVENUE_CAT:"CommunityPaymentProcessors::RevenueCat"}),a=function(e){return[function(){return e?void 0:n.J6.NOT_EXIST},function(){return e.status===i.RESTRICTED?n.J6.RESTRICTED:void 0},function(){return e.is_restricted_for_application_fees?n.J6.RESTRICED_FOR_APPLICATION_FEES:void 0},function(){return e.status===i.PENDING?n.J6.PENDING:void 0},function(){return e.status===i.REJECTED?n.J6.REJECTED:void 0}]},s=function(e){return null===e||void 0===e?void 0:e.includes(o.REVENUE_CAT)},l=function(e){return e===n.J6.ENABLED}},10012:(e,t,r)=>{"use strict";r.d(t,{Dh:()=>i,hU:()=>o,V5:()=>a,DP:()=>s,vi:()=>l});var n=Object.freeze({fixed:"PaywallCoupons::Fixed",percent:"PaywallCoupons::Percent"}),i=function(e){return e===n.fixed},o=function(e){return e===n.percent},a=n,s=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"}),l=[s.ACTIVE,s.INACTIVE]},56031:(e,t,r)=>{"use strict";r.d(t,{Tl:()=>o,dl:()=>a,zh:()=>s,_h:()=>l,Jy:()=>c,dR:()=>u,j2:()=>d});var n=r(96486),i=r(76296),o=Object.freeze({DRAFT:"draft",ACTIVE:"active",INACTIVE:"inactive"}),a=Object.freeze(["active","inactive"]),s=function(e){return e.status===o.ACTIVE},l=function(e){return e.status===o.INACTIVE},c=function(e){return(0,n.filter)(e,(function(e){return function(e){return(0,n.some)(e.stripe_prices_attributes,(function(e){return(0,i.AP)(e)}))}(e)}))},u=function(e){return void 0!==e},d=function(e){return e===o.ACTIVE&&u(e)}},76296:(e,t,r)=>{"use strict";r.d(t,{zA:()=>l,QT:()=>c,t3:()=>u,ZN:()=>d,T:()=>p,aG:()=>f,AP:()=>m,fe:()=>b,PI:()=>h,X8:()=>v,QC:()=>y,f:()=>g,TM:()=>_,$_:()=>x});var n=r(86013),i=r(96486),o=r(56421),a=r(14246),s=r(31018),l={addingPrice:"adding_price",addingSubscription:"adding_subscription"},c=function(e){return(null===e||void 0===e?void 0:e.price_type)===a.E4.subscription},u=function(e){return(null===e||void 0===e?void 0:e.price_type)===a.E4.installments},d=function(e){return(null===e||void 0===e?void 0:e.price_type)===a.E4.onetime},p=function(e){return c(e)||u(e)},f=function(e){return(0,i.filter)(e,(function(e){return p(e)}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.addingSubscription;return p(e)&&(t==l.addingPrice||!e.upfront_payment_amount)},b=function(e){return(0,i.filter)(e,(function(e){return c(e)}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.addingSubscription;return(0,i.filter)(e,(function(e){return m(e,t)}))},v=function(e,t,r){return Object.values(e.frequencies).find((function(e){return e.interval===t&&e.interval_count===r}))},y=function(e){var t,r=null!==(t=e.stripe_prices_attributes.find((function(e){return e.preferred})))&&void 0!==t?t:e.stripe_prices_attributes[0];return r?(0,o.Y9)(e.currency,r.interval,r.interval_count,r.amount):(0,n.t)("settings.paywalls.list.form.no_preferred_price_selected")},g={noUpfrontPayment:"no_upfront_payment",upfrontPayment:"upfront_payment"},_=function(e,t){if(!t)return{variant:g.noUpfrontPayment};var r=(0,o.LG)(t);if(!r)return{variant:g.noUpfrontPayment};var n=(0,s.I)(e,r,{amountInCents:!0,includeCurrencyCode:!0});return{variant:g.upfrontPayment,amountInCents:r,amountFormatted:n}},x=function(e,t,r){return e.variant===g.noUpfrontPayment?Math.round(t/r):Math.round((t-e.amountInCents)/r)}},88990:(e,t,r)=>{"use strict";r.d(t,{ho:()=>o,FD:()=>a,ju:()=>s});var n=r(96486),i=r(88212),o=function(e){return!(0,n.isNil)(e.paywalls_affiliates_attribution_info)},a=function(e){return o(e)?"manage_attribute_sale":"add_attribute_sale"},s=function(e){return e.status===i._.invited}},37447:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>i,UI:()=>o,zt:()=>a});var n=r(50732),i={onboarding:function(){return"/getting-started"},templates:function(e){return"/communities/".concat(e,"/templates")},questions:function(e){return"/communities/".concat(e,"/questions")},feed:function(){return"/feed"}},o=function(){return"/members"},a=function(e){return"".concat(i.onboarding(),"?").concat((0,n.UK)(e))}},82486:(e,t,r)=>{"use strict";r.d(t,{zb:()=>s,wh:()=>l,yG:()=>c,iQ:()=>u,TO:()=>d});var n=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r=e.spaceGroupId,n=e.currentCommunityMember;return null===n||void 0===n||null===(t=n.hidden_space_group_ids)||void 0===t?void 0:t.includes(r)},l=function(e){var t,r=e.spaceGroup;return null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.can_manage_space_group},c=function(e){var t;return null===(t=e.spaceGroup.policies)||void 0===t?void 0:t.can_create_space},u=function(e){var t=e.spaceGroup,r=e.spaces,i=e.spacesWithDetails,a=void 0===i?[]:i;return r=(r=r.filter((function(e){return e.space_group_id==t.id}))).map((function(e){return o(o({},e),(0,n.find)(a,{id:e.id})||{})})),o(o({},t),{},{spaces:r})},d=function(e){return"paywall"===e}},75126:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var n={customize:function(e){var t=e.botPublicId;return"/settings/community-bot/bot-builder/".concat(t,"/customize")},audience:function(e){var t=e.botPublicId;return"/settings/community-bot/bot-builder/".concat(t,"/audience")},behavior:function(e){var t=e.botPublicId;return"/settings/community-bot/bot-builder/".concat(t,"/behavior")},knowledge:function(e){var t=e.botPublicId;return"/settings/community-bot/bot-builder/".concat(t,"/knowledge")}}},98838:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var n={content:{posts:"/settings/posts",topics:"/settings/topics",moderation:"/settings/moderation",edit_moderation:"/settings/moderation/edit",posts_bulk_actions:"/settings/posts/bulk_actions",live_streams:"/settings/live_streams"},email:{broadcast:"/settings/emails/broadcast",new_broadcast:"/settings/emails/broadcast/new",settings:"/settings/emails/settings",forms:"/settings/emails/forms"},members:{manage:"/audience/manage",invite:"/members/invite/details",invite_access:"/members/invite/access",invite_emails:"/members/invite/emails",invite_paywalls:"/members/invite/paywalls",bulk_import:"/members/bulk_import",bulk_logs:"/settings/members/bulk_import_tasks",onboarding:"/members/onboarding",onboarding_access:"/members/onboarding/access",onboarding_workflows:"/members/onboarding/workflows",gamification:"/settings/gamification",invitation_links:"/members/invitation_links",new_invitation_link:"/members/invitation_links/new",edit_invitation_link:"/members/invitation_links/:id/edit",member_tags:"/settings/member_tags",new_member_tags:"/settings/member_tags/new",edit_member_tags:"/settings/member_tags/:id/edit",profile_fields:"/members/profile_fields",activity_logs:"/settings/members/activity_logs",access_groups:"/settings/access_groups",segments:"/settings/segments"},workflows:{all:"/settings/workflows",history:"/settings/workflows/history"},paywalls:{index:"/settings/paywalls",coupons:"/settings/coupons",subscription_groups:"/settings/paywall_groups",transactions:"/settings/paywall_charges",subscriptions:"/settings/paywall_subscriptions",taxes:"/settings/paywall_tax_settings",bulk_logs:"/settings/paywall_bulk_logs",payment_settings:"/settings/paywall_payment_settings"},affiliates:{directory:"/settings/affiliates_directory",commissions:"/settings/affiliates_commissions",settings:"/settings/affiliates_settings"},plans:{general:"/settings/plans",billing:"/settings/billing",brandedApps:"/settings/branded_apps"},developers:{overview:"/settings/developers",api:"/settings/api",new_api:"/settings/api/new"},live_streams:{live_streams:"/settings/live_streams"},settings:{general:"/settings",onboarding:"/settings/onboarding",community_ai:"/settings/community_ai",custom_domain:"/settings/custom_domain",weekly_digest:"/settings/weekly_digest",embed:"/settings/embed",single_sign_on:"/settings/sso",single_sign_on_verify_connection:"/custom_logins/debug_sessions",messaging:"/settings/messaging",legal:"/settings/legal",discover:"/settings/discover",mobile_app:"/settings/mobile_app"},analytics_v2:{index:"/settings/analytics",members:"/settings/analytics/members",post_comments:"/settings/analytics/post_comments",messages:"/settings/analytics/messages",spaces:"/settings/analytics/spaces",events:"/settings/analytics/events",courses:"/settings/analytics/courses",devices:"/settings/analytics/devices",payments:"/settings/analytics/payments"},site:{index:"/settings/home",navigation:"/settings/navigation",spaces:"/settings/spaces",code_snippets:"/settings/code_snippets"},community_inbox:{index:"/settings/community-inbox"},community_bot:{knowledge:"/settings/community-bot/knowledge",agents:"/settings/community-bot/agents"},builder_ui:{index:"/settings/builder_ui"}}},4717:(e,t,r)=>{"use strict";r.d(t,{w:()=>m,K:()=>h});var n=r(64687),i=r.n(n),o=r(96486),a=r(88767),s=r(81089),l=r(50732),c=r(98338);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))}}var p=["community-setting","show"],f=function(){var e=l.av.communities.communitySettings.index();return(0,s.UT)(e)},m=function(){return(0,a.useQuery)(p,f)},b=function(e){var t=e.data,r=e.updates,n=l.av.communities.communitySettings.update({communitySettingId:t.community_settings.id}),i={community_setting:r};return(0,s.gN)(n,i)},h=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.onMutate,s=void 0===n?o.noop:n,l=r.onSuccess,u=void 0===l?o.noop:l,f=r.onError,m=void 0===f?o.noop:f,h=r.onSettled,v=void 0===h?o.noop:h,y=(0,c.wh)().refetch,g=(0,a.useQueryClient)();return(0,a.useMutation)(b,{onMutate:(t=d(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,n=g.getQueryData(p),g.setQueryData(p,r),s&&s(),e.abrupt("return",{previousData:n,data:r});case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onSuccess:(e=d(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:g.setQueryData(p,t),u&&u();case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:m,onSettled:v})}},62345:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var n=r(98338),i=r(74481),o=function(){var e=(0,n.wh)(),t=e.currentCommunity,r=e.currentCommunitySettings,o=null===t||void 0===t?void 0:t.payment_processor;return{isPaymentProcessorEnabled:o&&o.status===i.Q_.ENABLED&&(!o.is_restricted_for_application_fees||(null===r||void 0===r?void 0:r.paywalls_for_restricted_country_enabled))}}},96685:(e,t,r)=>{"use strict";r.d(t,{U:()=>m});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(81089),l=r(50732),c=r(69647);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){return(0,s.UT)((0,l.Nu)())},p=function(e){var t=e.map((function(e){return e.id}));return(0,s.aU)((0,l.pW)(),{community_order:t})},f=["COMMUNITY_SWITCHER"],m=function(){var e,t,r=(0,a.useQuery)(f,d),n=r.data,s=r.isLoading,l=r.refetch,m=(0,c.p)(),b=(0,a.useMutation)(p,{onSuccess:(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)}),onError:function(){m.error((0,o.t)("community_switcher_reorder.reorder_error"))}}),h=b.mutate,v=b.isLoading,y=(null===n||void 0===n?void 0:n.token)||"";return{communities:(null===n||void 0===n?void 0:n.communities)||[],token:y,isLoadingCommunities:s,isReorderingCommunities:v,refetchCommunities:l,onSortCommunities:h}}},85249:(e,t,r)=>{"use strict";r.d(t,{R:()=>y});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(88767),l=r(81089),c=r(50732),u=r(98338),d=r(69647);function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(){var e=(0,d.p)(),t=(0,u.wh)(),r=t.data,n=t.refetch,f=b((0,o.useState)([]),2),h=f[0],v=f[1],y=b((0,o.useState)([]),2),g=y[0],_=y[1],x=b((0,o.useState)(!1),2),j=x[0],w=x[1],O=b((0,o.useState)(new Set),2),S=O[0],P=O[1],k=b((0,o.useState)({}),2),C=k[0],N=k[1],I=b((0,o.useState)([]),2),A=I[0],E=I[1],D=Boolean(r.display_welcome_banner),T=(0,s.useQuery)("BANNER_DATA",(function(){return(0,l.UT)((0,c.dm)())}),{onSuccess:function(e){N(e.banner),n()},onError:function(e){console.error(e)},enabled:!1}),L=T.refetch,M=T.isLoading,R={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},B=function(){var e=m(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.UT)((0,c.iL)());case 2:return t=e.sent,r=t.posts,v(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=(0,s.useMutation)((function(e){var t=e.communityMemberId,r=e.display;return(0,l.gN)(c.av.communityMembers.preference({id:t}),{display_home_welcome_banner:r})}),{onSuccess:function(){L()},onError:function(){e.error((0,a.t)("request_failure_message"))}}).mutateAsync,F=function(){var e=m(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.UT)((0,c.lc)());case 2:return t=e.sent,r=t.events,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{posts:h,spaces:g,bannerData:C,memberActivityData:A,spacesHasNextPage:j,participatingSpacesIds:S,fetchPosts:B,fetchSpaceSuggestions:function(e){var t=e.page,r=e.perPage,n=void 0===r?9:r;fetch((0,c.J7)()+"?page=".concat(t,"&per_page=").concat(n),R).then((function(e){return e.json()})).then((function(e){_(1===t?e.spaces:[].concat(p(g),p(e.spaces))),w(e.has_next_page),P(new Set(e.participating_space_ids))})).catch((function(e){console.error(e)}))},fetchBannerData:L,fetchCommunityMemberActivityData:function(){fetch((0,c.j0)(),R).then((function(e){return e.json()})).then((function(e){E(e.activity)})).catch((function(e){console.error(e)}))},fetchUpcomingEvents:F,isWelcomeBannerVisible:D,setWelcomeBannerPreference:U,setParticipatingSpacesIds:P,isBannerDataLoading:M}}},96789:(e,t,r)=>{"use strict";r.d(t,{o:()=>y});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(81089),l=r(50732),c=r(85249),u=r(69647);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},y=function(){var e=b((0,o.useState)({community:{},community_setting:{}}),2),t=e[0],r=e[1],n=b((0,o.useState)(!1),2),d=n[0],f=n[1],h=b((0,o.useState)({postSortOptions:[],trendingPostWindowLimit:30,homePageOption:{}}),2),y=h[0],g=h[1],_=b((0,o.useState)([]),2),x=_[0],j=_[1],w=b((0,o.useState)([]),2),O=w[0],S=w[1],P=b((0,o.useState)(!1),2),k=P[0],C=P[1],N=(0,u.p)(),I=N.error,A=N.success,E=(0,c.R)().fetchBannerData,D=function(){var e,t=(e=i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{C(!0),r=(0,s.wG)({landing_page_settings:t}),fetch((0,l.H5)(),p({method:"POST",body:r,mode:"no-cors"},v)).then((function(e){return e.json()})).then((function(){A((0,a.t)("changes_saved")),C(!1),E()})).catch((function(){I((0,a.t)("something_went_wrong")),C(!1)}))}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{dataLoaded:d,settings:t,metaData:y,loggedInUserSpaceOptions:x,loggedOutUserSpaceOptions:O,setSettings:r,fetchLandingPageSettings:function(){f(!1),fetch((0,l.H5)(),v).then((function(e){return e.json()})).then((function(e){r(e.settings),g({postSortOptions:e.post_sort_options,trendingPostWindowLimit:e.trending_post_window_limit,homePageOption:e.home_page_option}),j(e.logged_in_user_space_options),S(e.logged_out_user_space_options)})).finally((function(){f(!0)})).catch((function(e){console.error(e)}))},setLoggedInUserSpaceOptions:j,setLoggedOutUserSpaceOptions:S,reSetWelcomeBannerPreference:function(){return(0,s.gN)((0,l.HJ)())},updateLandingPageSettings:D,isSaving:k}}},62969:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(67294),i=r(39068),o=r(98338),a=r(4717),s=r(39533),l=r(2480).aP[0],c=function(e){var t=(0,o.wh)(),r=t.currentCommunityMember,c=t.currentUser,u=(0,a.w)(),d=u.data,p=u.isLoading,f=null===d||void 0===d?void 0:d.community_settings,m=(0,s.T)({defaultSort:l,scopeResults:e,per_page:3}),b=m.members,h=m.isLoading;return{members:b,isLoading:(0,n.useMemo)((function(){return p||h}),[p,h]),canSeeMembersDirectory:(0,n.useMemo)((function(){var e=null===f||void 0===f?void 0:f.public_member_directory,t=(0,i.vb)(r);return e||t}),[f,r,c]),canSeeMembersAvatarRow:(0,n.useMemo)((function(){return c}),[c])}}},9270:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var n=r(86013),i=r(23560),o=r.n(i),a=r(88767),s=r(81089),l=r(98338),c=r(69647),u=function(e,t){var r=(0,l.wh)().currentCommunityMember,i=(0,c.p)(),u=i.success,d=i.error;return{downloadMembersCSV:(0,a.useMutation)((function(e){var t=e.downloadURL;return(0,s.UT)(t)}),{onSuccess:function(){u((0,n.t)("export_member_csv.message",{email:r.email})),o()(e)&&e()},onError:function(){d((0,n.t)("export_member_csv.error_message")),o()(t)&&t()}}).mutate}}},47544:(e,t,r)=>{"use strict";r.d(t,{f:()=>b});var n=r(64687),i=r.n(n),o=r(67294),a=r(50732);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=p((0,o.useState)([]),2),r=t[0],n=t[1],s=p((0,o.useState)(0),2),c=s[0],f=s[1],m=p((0,o.useState)(!1),2),b=m[0],h=m[1],v=p((0,o.useState)(!1),2),y=v[0],g=v[1],_={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},x=function(t,i){return fetch("/notifications?page=".concat(t,"&per_page=").concat(e,"&notification_group=").concat(i),_).then((function(e){return e.json()})).then((function(e){n(1===t?d(e.records):[].concat(d(r),d(e.records))),g(!0),h(e.has_next_page)}))},j=function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(1,t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{dataLoaded:y,setDataLoaded:g,notifications:r,newNotificationCount:c,setNewNotificationCount:f,hasNextPage:b,setHasNextPage:h,fetchNotifications:x,fetchFirstPage:j,resetNewNotificationsCount:function(){c&&fetch("/notifications/reset_new_notifications_count",l(l({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(e){f(e.new_notifications_count)})).catch((function(e){console.error(e)}))},markAsRead:function(e){e.read_at||fetch("/notifications/".concat(e.id,"/mark_as_read"),l({method:"POST"},_)).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id?t.record:r}));n(i)})).catch((function(e){console.error(e)}))},markAllAsRead:function(){fetch("/notifications/mark_all_as_read",l(l({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(){var e=(new Date).toString(),t=r.map((function(t){return l(l({},t),{},{read_at:e})}));n(t)})).catch((function(e){console.error(e)}))},archiveNotification:function(e){fetch("/notifications/".concat(e.id,"/archive"),l(l({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(){var t=r.filter((function(t){return t.id!==e.id}));n(t)})).catch((function(e){console.error(e)}))},fetchNewNotificationsCount:function(e){return fetch((0,a.Rp)()+"?community_id=".concat(e),_).then((function(e){return e.json()})).then((function(e){f(e.new_notifications_count),e.new_notifications_count&&g(!1)}))},resizeNotificationWindow:function(){var e=document.getElementById("bottomBarNotificationWrapperOuter"),t=document.getElementById("bottomBarNotificationWrapperInner");if(e){var r=window.innerHeight-56;e.style.height=r+"px"}if(t){var n=window.innerHeight-215;t.style.height=n+"px"}},onNotificationEventReceive:function(e){switch(e.event){case"resetNewNotificationCount":case"updateNewNotificationCount":f(e.new_notifications_count);break;case"newNotification":f(c+1)}},unfollowNotification:function(e){fetch("/posts/".concat(e.post_id,"/post_followers/").concat(e.post_follower_id),l(l({},_),{},{method:"DELETE"})).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id&&t.success?(r.post_follower_id=null,r):r}));n(i)})).catch((function(e){console.error(e)}))},followNotification:function(e){fetch("/posts/".concat(e.post_id,"/post_followers"),l(l({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id&&t.success?(r.post_follower_id=t.post_follower_id,r):r}));n(i)})).catch((function(e){console.error(e)}))}}}},39591:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n=r(67294),i=r(88767),o=r(21937);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t,r,s=e.perPage,l=void 0===s?10:s,c=e.page,u=e.setPage,d=e.searchKeyParams,p=void 0===d?"":d,f=e.filters,m=void 0===f?{}:f,b=e.orderParam,h=void 0===b?{created_at:"desc"}:b,v=e.enabled,y=void 0===v||v,g=a((0,n.useState)(h),2),_=g[0],x=g[1],j={filters:m,order:_,page:c,perPage:l,searchKey:p},w=o.W.index(j),O=(0,i.useQuery)({queryKey:["paywall-charges",{filters:m,order:_,page:c,perPage:l,searchKeyParams:p}],queryFn:w,enabled:y}),S=O.data,P=O.refetch,k=O.isLoading,C=O.remove;return{hasFilters:Object.keys(m).length>0,charges:null!==(t=null===S||void 0===S?void 0:S.records)&&void 0!==t?t:[],totalCharges:null!==(r=null===S||void 0===S?void 0:S.count)&&void 0!==r?r:0,refetchCharges:P,removeChargesFromCache:C,isLoadingCharges:k,order:_,setOrder:function(e){x(e),u(1)},perPage:l,page:c,setPage:u}}},97971:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,p:()=>c});var n=r(67294),i=r(88767),o=r(37443);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l="paywall-subscriptions",c=function(e){var t,r,s=e.orderParam,c=void 0===s?{created_at:"desc"}:s,u=e.perPage,d=void 0===u?10:u,p=e.searchKeyParams,f=void 0===p?"":p,m=e.filters,b=void 0===m?{}:m,h=e.enabled,v=void 0===h||h,y=e.page,g=e.setPage,_=a((0,n.useState)(c),2),x=_[0],j=_[1],w={filters:b,order:x,page:y,perPage:d,searchKey:f},O=o.Y.index(w),S=(0,i.useQuery)({queryKey:[l,{filters:b,order:x,page:y,perPage:d},f],queryFn:O,enabled:v}),P=S.data,k=S.refetch,C=S.isLoading,N=S.remove;return{hasFilters:Object.keys(b).length>0,subscriptions:null!==(t=null===P||void 0===P?void 0:P.records)&&void 0!==t?t:[],totalSubscriptions:null!==(r=null===P||void 0===P?void 0:P.count)&&void 0!==r?r:0,refetchSubscriptions:k,removeSubscriptionsFromCache:N,perPage:d,page:y,order:x,setOrder:function(e){j(e),g(1)},setPage:g,isLoadingSubscriptions:C}}},83221:(e,t,r)=>{"use strict";r.d(t,{_o:()=>l,pI:()=>u});var n=r(88767),i=r(16617),o=r(10012);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="paywall-coupons-list",c=o.vi,u=function(e){var t=e.paywallId,r=e.couponStatuses,o=void 0===r?c:r,u=e.skipDateValidations,d=void 0===u||u,p=e.queryParams,f=void 0===p?{}:p,m=e.enabled,b=void 0!==m&&m||Boolean(t),h=(0,n.useQuery)([l,t,{couponStatuses:o,skipDateValidations:d}],i.p.index({paywallId:t,skipDateValidations:d,couponStatuses:o}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:b},f));return{paywallCouponsListQuery:h}}},21721:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(88767),i=r(81089),o=r(50732),a=function(e){return(0,i.Cu)(o.av.admin.paywalls.exports.create(),e)},s=function(){return{createCsvExportMutation:(0,n.useMutation)((function(e){return a(e)}))}}},65325:(e,t,r)=>{"use strict";r.d(t,{k:()=>u});var n=r(88767),i=r(81089),o=r(56031),a=r(50732);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.useQuery)(e,(function(){return(0,i.UT)(a.av.paywalls.index({params:l(l({},t),{},{status:o.dl})}))})),s=r.data,c=void 0===s?[]:s,u=r.isLoading;return{paywalls:c.map((function(e){return{label:e.display_name,value:e.id.toString()}})),isPaywallsLoading:u}}},92130:(e,t,r)=>{"use strict";r.d(t,{o:()=>o,O:()=>s});var n=r(88767),i=r(74543),o="paywalls-list",a=[],s=function(e){var t=e.communityMemberId,r=e.status,s=void 0===r?a:r,l=e.queryParams,c=void 0===l?{}:l,u=e.spaceIds,d=void 0===u?[]:u;return{paywallsListQuery:(0,n.useQuery)([o,t,{status:s,spaceIds:d}],i.i.index({community_member_id:t,status:s,space_ids:d||[]}),c)}}},50743:(e,t,r)=>{"use strict";r.d(t,{O:()=>s,C:()=>l});var n=r(54465),i=r(98338),o={en:"en",pt:"pt-BR"},a=function(e){return o[null!==e&&void 0!==e?e:"en"]},s=function(e){var t=e.stripeAccountId,r=e.stripePublicKey,i=e.locale;return(0,n.J)(r,{stripeAccount:t,locale:a(i)})},l=function(){var e,t,r=(0,i.wh)().currentCommunity;return{stripePromise:s({stripeAccountId:null===(e=r.payment_processor)||void 0===e?void 0:e.id,stripePublicKey:(null===(t=r.payment_processor)||void 0===t?void 0:t.public_api_key)||window.STRIPE_PUBLIC_KEY,locale:window.locale||"en"})}}},44154:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(67294),i=r(96486),o=r(88767),a=r(81089),s=function(e){var t=e.api,r=e.key,s=void 0===r?"tags":r,l=e.useParamsWrapper,c=void 0===l||l,u=(0,o.useInfiniteQuery)(["un-paginate",s,t],(function(e){var r=e.pageParam,n=void 0===r?1:r;return(0,a.UT)(t(c?{params:{page:n}}:{page:n}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),d=u.data,p=u.fetchNextPage,f=u.hasNextPage,m=u.isLoading;return(0,n.useEffect)((function(){f&&p()}),[f,p,d]),{records:(0,i.flatten)(null===d||void 0===d?void 0:d.pages.map((function(e){return e.records})))||[],isLoading:m||f,hasNextPage:f}}},81468:(e,t,r)=>{"use strict";r.d(t,{zw:()=>d,L8:()=>p,mA:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(61437);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest"},p=20,f=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=i.query,u=void 0===l?"":l,f=i.sort,m=void 0===f?d.ALPHABETICAL:f,b=i.filters,h=void 0===b?{}:b,v=i.perPage,y=void 0===v?p:v,g=i.status,_=i.workflowType,x=i.initialPage,j=void 0===x?1:x,w=i.options,O=["all-workflows",u,m,h,y,g,_,j],S=c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===w?{}:w),P=(0,a.useInfiniteQuery)(O,(function(e){var t=e.pageParam,r=void 0===t?j:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,sort:m,filters:h,status:g,workflow_type:_,per_page:y};return u&&(i.query=u),s.n.list({params:i})}),S),k=(0,n.useMemo)((function(){var e;return(null===(e=P.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=P.data)||void 0===e?void 0:e.pages]),C=(null===(t=k[0])||void 0===t?void 0:t.total_count)||0,N=(null===(r=k[0])||void 0===r?void 0:r.per_page)||y,I=(0,n.useMemo)((function(){return o()(k.map((function(e){return e.records})))}),[k]);return c(c({},P),{},{queryKey:O,totalWorkflows:C,workflows:I,pageSize:N,pages:k})}},44742:(e,t,r)=>{"use strict";r.d(t,{L:()=>p,_:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(81089),l=r(50732);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=30,f=function(){var e,t,r,i,c,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=d.query,m=void 0===f?"":f,b=d.order,h=d.filters,v=void 0===h?{}:h,y=d.perPage,g=void 0===y?p:y,_=d.initialPage,x=void 0===_?1:_,j=d.options,w=void 0===j?{}:j,O=d.scope,S=void 0===O?{}:O,P=["audience",m,b,v,g,S],k=(0,a.useInfiniteQuery)(P,(function(e){var t=e.pageParam,r=void 0===t?x:t,n=1;"number"===typeof r&&r>0&&(n=r);var i=u({page:n,filters:v,per_page:g},S);return m&&(i.query=m),b&&(i.order=b),(0,s.UT)(l.av.admin.search.contacts.index({params:i}))}),u({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},w)),C=(0,n.useMemo)((function(){var e;return(null===(e=k.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=k.data)||void 0===e?void 0:e.pages]),N=(null===(t=C[0])||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.total_count)||0,I=(null===(i=C[0])||void 0===i?void 0:i.count)||0,A=(null===(c=C[0])||void 0===c?void 0:c.per_page)||g,E=(0,n.useMemo)((function(){return o()(C.map((function(e){return e.records})))}),[C]);return u(u({},k),{},{queryKey:P,totalAudience:N,totalQueryAudience:I,audience:E,pageSize:A,pages:C})}},34310:(e,t,r)=>{"use strict";r.d(t,{zw:()=>p,fd:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(81089),l=r(50732);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest",ROLE:"role"},f=function(){var e,t,r,i,c,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=d.query,m=void 0===f?"":f,b=d.sort,h=void 0===b?p.ALPHABETICAL:b,v=d.order,y=d.filters,g=void 0===y?{}:y,_=d.perPage,x=void 0===_?30:_,j=d.initialPage,w=void 0===j?1:j,O=d.options,S=void 0===O?{}:O,P=d.adminScope,k=void 0!==P&&P,C=["community-members",m,h,v,g,x],N=u({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},S),I=(0,a.useInfiniteQuery)(C,(function(e){var t=e.pageParam,r=void 0===t?w:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,sort:h,filters:g,per_page:x};m&&(i.query=m),v&&(i.order=v);var o=k?l.av.admin.search.communityMembers.index:l.av.search.communityMembers.index;return(0,s.UT)(o({params:i}))}),N),A=(0,n.useMemo)((function(){var e;return(null===(e=I.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=I.data)||void 0===e?void 0:e.pages]),E=(null===(t=A[0])||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.total_count)||0,D=(null===(i=A[0])||void 0===i?void 0:i.count)||0,T=(null===(c=A[0])||void 0===c?void 0:c.per_page)||x,L=(0,n.useMemo)((function(){return o()(A.map((function(e){return e.records})))}),[A]);return u(u({},I),{},{queryKey:C,totalMembers:E,totalQueryMembers:D,members:L,pageSize:T,pages:A})}},67474:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var n=r(88767),i=r(34334),o=r(69647),a=function(e){var t=e.ids,r=e.withDeleted,a=e.enabled,s=(0,o.p)();return(0,n.useQuery)(["COMMUNITY_MEMBERS_LIST",t,r],(function(){return i.nH.fetchContacts({params:{ids:t,with_deleted:r}})}),{enabled:a,onError:function(e){s.error(e.message)}})}},95721:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)().currentCommunitySettings;return Boolean(null===e||void 0===e?void 0:e.contacts_in_workflows_enabled)}},54485:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(4110),i=function(){return(0,n.$)(".community__switcher")}},60500:(e,t,r)=>{"use strict";r.d(t,{T:()=>i,M:()=>o});var n=r(4110),i=function(){return(0,n.$)(".bottom-banner")},o=function(){return(0,n.$)("#mainHeader")}},28934:(e,t,r)=>{"use strict";r.d(t,{W:()=>o});var n=r(38503),i=r(54876),o=function(){var e=(0,i.q1)(),t=(0,n.TC)().currentTheme;return e&&"default"!==t}},52238:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)().currentCommunitySettings;return Boolean(null===e||void 0===e?void 0:e.in_app_enabled)}},31979:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var n=r(67294),i=r(98338),o=function(){var e=(0,i.nT)(),t=(0,i.e2)(),r=(0,i.wh)(),o=Boolean(e.helpers.isDataLoading()),a=Boolean(t.isLoading),s=Boolean(r.isLoading);return(0,n.useMemo)((function(){return o||a||s}),[o,a,s])}},30867:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)().currentCommunityMember,t=(0,n.L2)().data,r=void 0===t?{}:t,i=r.is_private,o=r.is_space_member,a=null===e||void 0===e?void 0:e.is_admin;return i&&!o&&!a}},66368:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)().currentCommunitySettings;return Boolean(null===e||void 0===e?void 0:e.segments_enabled)}},78572:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(14530),i=r(98338),o=function(){var e,t=(0,n.D)(),r=t.currentPlan,o=t.isCurrentPlanLoading,a=(0,i.wh)(),s=a.isLoading,l=a.currentCommunity,c=null===r||void 0===r?void 0:r.marketing_hub_billing,u=null===c||void 0===c?void 0:c.billing_status,d=null===r||void 0===r||null===(e=r.marketing_hub_billing)||void 0===e?void 0:e.free_period,p=null===l||void 0===l?void 0:l.is_on_trial,f=!p&&"free_period"===u,m=!p&&"active"===u;return{marketingHubBilling:c,marketingBillingFreePeriod:d,isLoading:o||s,billingStatus:u,isTrialing:p,isInFreePeriod:f,isActive:m,isInactive:!(m||f||p)||"inactive"===u}}},14838:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(80129),i=r(24185),o=function(e){var t=(0,i.TH)().search,r=(0,n.parse)(t,{ignoreQueryPrefix:!0});try{return e.cast(r)}catch(o){return console.error("Error parsing query params",o),{}}}},3951:(e,t,r)=>{"use strict";r.d(t,{m:()=>u});var n=r(67294),i=r(81089),o=r(50732);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){var e=l((0,n.useState)(!1),2),t=e[0],r=e[1],c=l((0,n.useState)(null),2),u=c[0],d=c[1],p=l((0,n.useState)(!1),2),f=p[0],m=p[1];return{isJoined:t,joinSpace:function(e){var t={space_id:e};fetch((0,o.J6)(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){r(!0)})).catch((function(e){console.error(e)}))},space:u,fetchSpace:function(e){return(0,i.t5)((0,o.Ox)(e)).then((function(e){return e.json()})).then((function(e){d(e)}))},updateSpace:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m(!0);var n=e instanceof FormData?e:JSON.stringify({space:e});return(0,i.t5)((0,o.C1)(t||u.id),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"PATCH",body:n},r)).then((function(e){return e.json()})).then((function(e){return d(e),m(!1),e}))},createSpace:function(e){var t=JSON.stringify({space:e});return(0,i.t5)(o.av.spaces.create(),{method:"POST",body:t,forReactQuery:!0})},maxSpaceLimit:function(e){return(0,i.t5)(o.av.spaces.maxSpaceLimit(e),{method:"GET",forReactQuery:!0})},isSubmitting:f,reSetWelcomeBannerPreference:function(e){return(0,i.gN)(o.av.spaces.resetSpaceWelcomeBannerPreferencePath(e))}}}},17551:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(24185),i=function(){var e=((0,n.$B)("/c/:spaceSlug")||{}).params;return(e=void 0===e?{}:e).spaceSlug}},79994:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(98338),i=function(){var e=(0,n.wh)().currentCommunity,t=null===e||void 0===e?void 0:e.white_label;return{whiteLabel:t,shouldShowBranding:!t}}},32223:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var n=r(67294),i=r(62447);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=e.defaultCommunityView,r=e.views,a=e.activeStorageKey,s=void 0===a?"members-directory-view-v2":a,l=(0,i._)(s),c=l.getValue,u=l.setValue,d=(0,n.useRef)(t),p=(0,n.useCallback)((function(){var e=c(),t=d.current;if(!e)return null!==t&&void 0!==t?t:r.LIST;var n=e.defaultCommunityView,i=e.defaultUserView;return n===t?i:null!==t&&void 0!==t?t:r.LIST}),[c]),f=o((0,n.useState)(p),2),m=f[0],b=f[1];return(0,n.useEffect)((function(){u({defaultCommunityView:d.current,defaultUserView:m})}),[m,u]),(0,n.useEffect)((function(){d.current=t,b(p())}),[t,p]),[m,b]}},64302:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var n=r(67294),i=r(34623),o=r(50308),a=r.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.onFocusWithin,r=void 0===t?a():t,o=e.onBlurWithin,l=void 0===o?a():o,c=e.onFocusWithinChange,u=void 0===c?a():c,d=s((0,n.useState)(!1),2),p=d[0],f=d[1],m=(0,i.L_)({onFocusWithin:r,onBlurWithin:l,onFocusWithinChange:function(e){f(e),u(e)}});return{isFocusWithin:p,focusWithinProps:m.focusWithinProps}}},36325:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(67294),i=function(e){(0,n.useEffect)((function(){return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[])}},40207:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var n=r(13288),i=r(85893),o=function(){return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(n.a,{})})}},25954:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(24185),i=r(51065),o=r(36589),a=function(){var e,t,r,a,s,l=(0,o.I)().isV3Enabled,c=Boolean((0,n.$B)({path:"/feed"})),u=Boolean((0,n.$B)({path:"/c/:spaceSlug"})),d=Boolean((0,n.$B)({path:"/s/:spaceSlug"})),p=Boolean(null===(e=(0,n.$B)({path:l?"/feed":"/home"}))||void 0===e?void 0:e.isExact),f=Boolean(null===(t=(0,n.$B)({path:"/c/:spaceSlug"}))||void 0===t?void 0:t.isExact),m=Boolean(null===(r=(0,n.$B)({path:"/members"}))||void 0===r?void 0:r.isExact),b=Boolean(null===(a=(0,n.$B)({path:"/messages"}))||void 0===a?void 0:a.isExact),h=Boolean(null===(s=(0,n.$B)({path:"/getting-started"}))||void 0===s?void 0:s.isExact);return{isSpaceRoute:u,isSpaceGroupRoute:d,isFeedRoute:c,isHomePage:p,isSpaceShowPage:f,isMemberDirectoryPage:m,isMessagesPage:b,isSettingsPage:Boolean((0,n.$B)(i.s)),isGettingStartedRoute:h}}},86866:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var n="countries_iso3166"},47126:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var n={APPROVED:"approved",ANSWERED:"answered",UNANSWERED:"unanswered",PENDING:"pending",DISMISSED:"dismissed"}},88212:(e,t,r)=>{"use strict";r.d(t,{s:()=>n,_:()=>i});var n={paypal:"paypal",wise:"wise"},i={inactive:"inactive",invited:"invited",enrolled:"enrolled",disabled:"disabled"}},87045:(e,t,r)=>{"use strict";r.d(t,{R:()=>d});var n=r(88767),i=r(40160),o=r(54914),a=r(93788),s=r(69647),l=r(9965),c=r(14856),u=r(85893),d=function(){return(0,u.jsx)(n.QueryClientProvider,{client:c.Eh,children:(0,u.jsx)(o.Q,{children:(0,u.jsx)(a.H,{includeSidebar:!0,children:(0,u.jsx)(s.V,{children:(0,u.jsx)(i.VK,{children:(0,u.jsx)(l.x,{})})})})})})}},15331:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var n=r(79292),i=r(22837),o=r(50732);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.editor=r.editor,this.editorElement=r,this.afterCompleteCallback=a;var s=i.default.Attachment.attributesForFile(t);this.attachment=new i.default.Attachment(s),this.tempAttachment=new i.default.Attachment({content:this.tempAttachmentContent(),sgid:"".concat((new Date).getTime(),"-").concat(Math.random())}),this.directUpload=new n.DirectUpload(t,o.av.actionTextDirectUpload.create(),this)}var t,r,s;return t=e,r=[{key:"start",value:function(){this.insertTempAttachment(),this.directUpload.create(this.directUploadDidComplete.bind(this))}},{key:"insertTempAttachment",value:function(){this.editor.insertAttachment(this.tempAttachment)}},{key:"removeTempAttachment",value:function(){this.editor.composition.removeAttachment(this.tempAttachment)}},{key:"insertAttachment",value:function(e){this.attachment.setAttributes({sgid:e.attachable_sgid,url:this.createBlobUrl(e.signed_id,e.filename)}),this.editor.insertAttachment(this.attachment)}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;e.upload.addEventListener("progress",(function(e){var r=e.loaded/e.total*100;t.tempAttachment.setAttributes({content:t.tempAttachmentContent(r)})}))}},{key:"directUploadDidComplete",value:function(e,t){if(e)throw this.afterCompleteCallback(),new Error("Direct upload failed: ".concat(e));this.editor.composition.attachments.includes(this.tempAttachment)&&(this.removeTempAttachment(),this.insertAttachment(t)),this.afterCompleteCallback()}},{key:"createBlobUrl",value:function(e,t){return(0,o.Gd)({signed_id:e,filename:t})}},{key:"tempAttachmentContent",value:function(){return function(e,t){return'\n  <div class="progress-card">\n    <div class="editor-overlay">\n      <div class="overlay-editor-actions">\n        <a href="#remove-attachment" data-action="remove-attachment" class="close-btn">\n          <div class="close-btn__caret"></div>\n          <svg class="icon icon-close icon--lg" viewBox="0 0 24 24">\n            <use xlink:href="#icon-close" />\n          </svg>\n        </a>\n      </div>\n    </div>\n    <span class="progress-card__filename">'.concat(t,'</span>\n    <span class="progress-card__amount">').concat(e,' %</span>\n    <div class="attachment__upload progress-bar">\n      <div class="progress-bar__line" style="width:').concat(e,'%;"></div>\n    </div>\n  </div>\n')}(parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0),this.file.name)}},{key:"directUploadUrl",get:function(){return this.editorElement.dataset.directUploadUrl}},{key:"blobUrlTemplate",get:function(){return this.editorElement.dataset.blobUrlTemplate}}],r&&a(t.prototype,r),s&&a(t,s),e}()},70059:(e,t,r)=>{"use strict";function n(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}function i(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}r.d(t,{L:()=>n,q:()=>i})},89827:(e,t,r)=>{"use strict";var n=r(36808),i=r.n(n),o=r(44140),a=r.n(o);document.addEventListener("turbolinks:load",(function(){i().set("browser_time_zone",function(){var e=window.Intl;try{window.Intl=void 0;var t=a().determine().name();return window.Intl=e,t}catch(r){return a().determine().name()}}(),{expires:365,path:"/"})}))},76133:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/bot-builder-canvas-dark-b5fb8ae27d88bacab89d.png"},28661:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/bot-builder-canvas-1c5ee5a2f62334166b23.png"},61484:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/circular-logo@2x-055b4a3832130c1d3614.png"},5808:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/in-app-payments/mobile-1x-a43f8c2ad91fc1828326.png"},63267:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/in-app-payments/mobile-2x-530f725d18f2ccc9c320.png"},47502:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/in-app-payments/mobile-4x-83d3ebc30af3ce177eb3.png"},66490:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature1-6ae2900435a4d52ef0a9.png"},66722:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature2-fac80e115f8875a1c057.png"},11076:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature3-67d430b4a0914121e0b6.png"},37004:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-2x-fe49e81302ad21822bc1.png"},36584:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-4x-09b7c0122878cf156b06.png"},90312:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-a2750d3d3a8671e19bf9.jpg"},5375:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-2x-a17a2a2a55bce8f26a53.png"},67764:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-4x-613308812aad6ac5d9f9.png"},74402:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-0f791108efab72e44a8c.jpg"},84731:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-2x-3124dc05b31b61bab647.png"},31842:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-4x-02dc9245e62484efb9e0.png"},19338:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-1e43652a68a35ba4df5c.jpg"},55411:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/inbox-avatars-c97860ec19e3ebc57f60.png"},8230:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/setup-agents-b731cf762a3024120693.png"},40135:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/small-circle-logo-4c2164904500182b519e.png"},99333:(e,t,r)=>{"use strict";e.exports=r.p+"739afe7befcf75b4a3ba.mp3"},69870:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/SettingsApp/CommunityInbox/BotChatRoom/ChatWindow/thinking-5365205b2428a8c6f62d.gif"},80312:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/SupportWidget/views/HomeView/hand-wave-24-7ebd0422764ce86d5245.png"},47165:()=>{}}]);
//# sourceMappingURL=/packs/js/7682-1c71a5916b74f885cbd2.js.map